(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[179],{822:ee=>{"use strict";ee.exports=g,ee.exports.default=g;var q=1e20;function g(k,_,v,T,j,O){this.fontSize=k||24,this.buffer=void 0===_?3:_,this.cutoff=T||.25,this.fontFamily=j||"sans-serif",this.fontWeight=O||"normal",this.radius=v||8;var B=this.size=this.fontSize+2*this.buffer,Q=B+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=B,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Uint16Array(Q),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(B/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function D(k,_,v,T,j,O){for(var B=0;B<_;B++)S(k,B,_,v,T,j,O);for(var Q=0;Q<v;Q++)S(k,Q*_,1,_,T,j,O)}function S(k,_,v,T,j,O,B){var Q,A,L,ae;for(O[0]=0,B[0]=-q,B[1]=q,Q=0;Q<T;Q++)j[Q]=k[_+Q*v];for(Q=1,A=0,L=0;Q<T;Q++){do{L=(j[Q]-j[ae=O[A]]+Q*Q-ae*ae)/(Q-ae)/2}while(L<=B[A]&&--A>-1);O[++A]=Q,B[A]=L,B[A+1]=q}for(Q=0,A=0;Q<T;Q++){for(;B[A+1]<Q;)A++;k[_+Q*v]=j[ae=O[A]]+(Q-ae)*(Q-ae)}}g.prototype._draw=function(k,_){var O,B,Q,A,L,ae,X,J,Z,v=this.ctx.measureText(k),T=v.width,j=2*this.buffer;_&&this.useMetrics?(L=Math.floor(v.actualBoundingBoxAscent),J=this.buffer+Math.ceil(v.actualBoundingBoxAscent),ae=this.buffer,X=this.buffer,O=(B=Math.min(this.size,Math.ceil(v.actualBoundingBoxRight-v.actualBoundingBoxLeft)))+j,Q=(A=Math.min(this.size-ae,Math.ceil(v.actualBoundingBoxAscent+v.actualBoundingBoxDescent)))+j,this.ctx.textBaseline="alphabetic"):(O=B=this.size,Q=A=this.size,L=19*this.fontSize/24,ae=X=0,J=this.middle,this.ctx.textBaseline="middle"),B&&A&&(this.ctx.clearRect(X,ae,B,A),this.ctx.fillText(k,this.buffer,J),Z=this.ctx.getImageData(X,ae,B,A));var W=new Uint8ClampedArray(O*Q);return function C(k,_,v,T,j,O,B){O.fill(q,0,_*v),B.fill(0,0,_*v);for(var Q=(_-T)/2,A=0;A<j;A++)for(var L=0;L<T;L++){var ae=(A+Q)*_+L+Q,X=k.data[4*(A*T+L)+3]/255;if(1===X)O[ae]=0,B[ae]=q;else if(0===X)O[ae]=q,B[ae]=0;else{var J=Math.max(0,.5-X),Z=Math.max(0,X-.5);O[ae]=J*J,B[ae]=Z*Z}}}(Z,O,Q,B,A,this.gridOuter,this.gridInner),D(this.gridOuter,O,Q,this.f,this.v,this.z),D(this.gridInner,O,Q,this.f,this.v,this.z),function b(k,_,v,T,j,O,B){for(var Q=0;Q<_*v;Q++){var A=Math.sqrt(T[Q])-Math.sqrt(j[Q]);k[Q]=Math.round(255-255*(A/O+B))}}(W,O,Q,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:W,metrics:{width:B,height:A,sdfWidth:O,sdfHeight:Q,top:L,left:0,advance:T}}},g.prototype.draw=function(k){return this._draw(k,!1).data},g.prototype.drawWithMetrics=function(k){return this._draw(k,!0)}},2817:(ee,q,g)=>{"use strict";var C={};g.r(C),g.d(C,{decode:()=>$0e,name:()=>W0e});var b={};g.r(b),g.d(b,{name:()=>Z0e,preprocess:()=>Q0e});var D={};g.r(D),g.d(D,{name:()=>eve,preprocess:()=>tve});var S={};g.r(S),g.d(S,{decode:()=>jve,encode:()=>Uve,name:()=>Lve,preprocess:()=>Bve});var k={};g.r(k),g.d(k,{decode:()=>Wve,encode:()=>$ve,name:()=>Gve});var _={};g.r(_),g.d(_,{decode:()=>Xve,encode:()=>Kve,name:()=>Yve});var v={};g.r(v),g.d(v,{decode:()=>Jve,encode:()=>Zve,name:()=>qve});var T={};g.r(T),g.d(T,{delMany:()=>KLe,get:()=>YLe,setMany:()=>XLe});let O=null,Q=1;function L(n){const e=O;return O=n,e}function x(n){if((!Ze(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Q)){if(!n.producerMustRecompute(n)&&!ce(n))return n.dirty=!1,void(n.lastCleanEpoch=Q);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Q}}function ce(n){Ke(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(x(t),i!==t.version))return!0}return!1}function Ne(n,e){if(function Me(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ke(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Ne(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Ke(r),r.producerIndexOfThis[i]=e}}function Ze(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ke(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let ft=null;function ye(n){return"function"==typeof n}function Ve(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const rt=Ve(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function _t(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class At{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ye(i))try{i()}catch(o){e=o instanceof rt?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{ge(o)}catch(s){e=e??[],s instanceof rt?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ge(e);else{if(e instanceof At){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&_t(t,e)}remove(e){const{_finalizers:t}=this;t&&_t(t,e),e instanceof At&&e._removeParent(this)}}At.EMPTY=(()=>{const n=new At;return n.closed=!0,n})();const wt=At.EMPTY;function Xt(n){return n instanceof At||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function ge(n){ye(n)?n():n.unsubscribe()}const Y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:i}=oe;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Le(n){oe.setTimeout(()=>{const{onUnhandledError:e}=Y;if(!e)throw n;e(n)})}function et(){}const ct=Bn("C",void 0,void 0);function Bn(n,e,t){return{kind:n,value:e,error:t}}let Hn=null;function Tn(n){if(Y.useDeprecatedSynchronousErrorHandling){const e=!Hn;if(e&&(Hn={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Hn;if(Hn=null,t)throw i}}else n()}class Yi extends At{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xt(e)&&e.add(this)):this.destination=ol}static create(e,t,i){return new Bo(e,t,i)}next(e){this.isStopped?Fs(function sn(n){return Bn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Fs(function Et(n){return Bn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fs(ct,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ra=Function.prototype.bind;function mr(n,e){return ra.call(n,e)}class Lo{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){zi(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){zi(i)}else zi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zi(t)}}}class Bo extends Yi{constructor(e,t,i){let r;if(super(),ye(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Y.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&mr(e.next,o),error:e.error&&mr(e.error,o),complete:e.complete&&mr(e.complete,o)}):r=e}this.destination=new Lo(r)}}function zi(n){Y.useDeprecatedSynchronousErrorHandling?function jn(n){Y.useDeprecatedSynchronousErrorHandling&&Hn&&(Hn.errorThrown=!0,Hn.error=n)}(n):Le(n)}function Fs(n,e){const{onStoppedNotification:t}=Y;t&&oe.setTimeout(()=>t(n,e))}const ol={closed:!0,next:et,error:function jo(n){throw n},complete:et},Xa="function"==typeof Symbol&&Symbol.observable||"@@observable";function Uo(n){return n}let Ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function an(n){return n&&n instanceof Yi||function $t(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}(n)&&Xt(n)}(t)?t:new Bo(t,i,r);return Tn(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Wt(i))((r,o)=>{const s=new Bo({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Xa](){return this}pipe(...t){return function We(n){return 0===n.length?Uo:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=Wt(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Wt(n){var e;return null!==(e=n??Y.Promise)&&void 0!==e?e:Promise}const gr=Ve(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yt=(()=>{class n extends Ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Sa(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new gr}next(t){Tn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Tn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Tn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?wt:(this.currentObservers=null,o.push(t),new At(()=>{this.currentObservers=null,_t(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Ye;return t.source=this,t}}return n.create=(e,t)=>new Sa(e,t),n})();class Sa extends Yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:wt}}class Li extends Yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ki(n){return e=>{if(function Ca(n){return ye(n?.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function bi(n,e,t,i,r){return new Ai(n,e,t,i,r)}class Ai extends Yi{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function qt(n,e){return ki((t,i)=>{let r=0;t.subscribe(bi(i,o=>{i.next(n.call(e,o,r++))}))})}function Xn(n){for(let e in n)if(n[e]===Xn)return e;throw Error("Could not find renamed property on target object.")}function Mo(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Si(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Si).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function oo(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ve=Xn({__forward_ref__:Xn});function we(n){return n.__forward_ref__=we,n.toString=function(){return Si(this())},n}function ue(n){return V(n)?n():n}function V(n){return"function"==typeof n&&n.hasOwnProperty(ve)&&n.__forward_ref__===we}function ne(n){return n&&!!n.\u0275providers}const Pe="https://g.co/ng/security#xss";class De extends Error{constructor(e,t){super(function st(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Tt=Xn({\u0275cmp:Xn}),Nt=Xn({\u0275dir:Xn}),zt=Xn({\u0275pipe:Xn}),cn=Xn({\u0275mod:Xn}),mn=Xn({\u0275fac:Xn}),Kr=Xn({__NG_ELEMENT_ID__:Xn}),zr=Xn({__NG_ENV_ID__:Xn});function bn(n){return"string"==typeof n?n:null==n?"":String(n)}function xs(n,e){throw new De(-201,!1)}function dr(n,e){null==n&&function Un(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function It(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function Pp(n){return cx(n,Hi)||cx(n,lx)}function cx(n,e){return n.hasOwnProperty(e)?n[e]:null}function Xi(n){return n&&(n.hasOwnProperty(P_)||n.hasOwnProperty(kC))?n[P_]:null}const Hi=Xn({\u0275prov:Xn}),P_=Xn({\u0275inj:Xn}),lx=Xn({ngInjectableDef:Xn}),kC=Xn({ngInjectorDef:Xn});var yi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(yi||{});let F_;function is(n){const e=F_;return F_=n,e}function ux(n,e,t){const i=Pp(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&yi.Optional?null:void 0!==e?e:void xs()}const Oi=globalThis;class bt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=It({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _u={},qa="__NG_DI_FLAG__",ud="ngTempTokenPath",br=/\n/gm,Up="__source";let bu;function cl(n){const e=bu;return bu=n,e}function PC(n,e=yi.Default){if(void 0===bu)throw new De(-203,!1);return null===bu?ux(n,void 0,e):bu.get(n,e&yi.Optional?null:void 0,e)}function it(n,e=yi.Default){return(function dx(){return F_}()||PC)(ue(n),e)}function Dt(n,e=yi.Default){return it(n,Ec(e))}function Ec(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function V_(n){const e=[];for(let t=0;t<n.length;t++){const i=ue(n[t]);if(Array.isArray(i)){if(0===i.length)throw new De(900,!1);let r,o=yi.Default;for(let s=0;s<i.length;s++){const a=i[s],c=fx(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(it(r,o))}else e.push(it(i))}return e}function yu(n,e){return n[qa]=e,n.prototype[qa]=e,n}function fx(n){return n[qa]}function Ja(n){return{toString:n}.toString()}var Vp=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Vp||{}),Ls=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ls||{});const sa={},Mi=[];function G_(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function rs(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];vu(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function zp(n){return 3===n||4===n||6===n}function vu(n){return 64===n.charCodeAt(0)}function xu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||W_(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function W_(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const px="ng-template";function FC(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==G_(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function mx(n){return 4===n.type&&n.value!==px}function LC(n,e,t){return e===(4!==n.type||t?n.value:px)}function BC(n,e,t){let i=4;const r=n.attrs||[],o=function _x(n){for(let e=0;e<n.length;e++)if(zp(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!LC(n,c,t)||""===c&&1===e.length){if(Ho(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!FC(n.attrs,l,t)){if(Ho(i))return!1;s=!0}continue}const h=jC(8&i?"class":c,r,mx(n),t);if(-1===h){if(Ho(i))return!1;s=!0;continue}if(""!==l){let f;f=h>o?"":r[h+1].toLowerCase();const m=8&i?f:null;if(m&&-1!==G_(m,l,0)||2&i&&l!==f){if(Ho(i))return!1;s=!0}}}}else{if(!s&&!Ho(i)&&!Ho(c))return!1;if(s&&Ho(c))continue;s=!1,i=c|1&i}}return Ho(i)||s}function Ho(n){return 0==(1&n)}function jC(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function ll(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function gx(n,e,t=!1){for(let i=0;i<e.length;i++)if(BC(n,e[i],t))return!0;return!1}function Hp(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function bx(n,e){return n?":not("+e.trim()+")":e}function UC(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Ho(s)&&(e+=bx(o,r),r=""),i=s,o=o||!Ho(i);t++}return""!==r&&(e+=bx(o,r)),e}function En(n){return Ja(()=>{const e=Yn(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Vp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ls.Emulated,styles:n.styles||Mi,_:null,schemas:n.schemas||null,tView:null,id:""};Ti(t);const i=n.dependencies;return t.directiveDefs=Nr(i,!1),t.pipeDefs=Nr(i,!0),t.id=function Y_(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function yx(n){return Zn(n)||at(n)}function zC(n){return null!==n}function dn(n){return Ja(()=>({type:n.type,bootstrap:n.bootstrap||Mi,declarations:n.declarations||Mi,imports:n.imports||Mi,exports:n.exports||Mi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function vx(n,e){if(null==n)return sa;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function Ht(n){return Ja(()=>{const e=Yn(n);return Ti(e),e})}function Go(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Zn(n){return n[Tt]||null}function at(n){return n[Nt]||null}function St(n){return n[zt]||null}function Yn(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||sa,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Mi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vx(n.inputs,e),outputs:vx(n.outputs),debugInfo:null}}function Ti(n){n.features?.forEach(e=>e(n))}function Nr(n,e){if(!n)return null;const t=e?St:yx;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(zC)}const Pr=0,Vt=1,An=2,Gr=3,Wo=4,ao=5,Es=6,Ci=7,nr=8,$o=9,Bs=10,Kn=11,Bh=12,xx=13,Ac=14,Bi=15,dl=16,hd=17,js=18,Eu=19,X_=20,Ta=21,jh=22,Ia=23,Fn=25,Au=1,Za=7,Sc=9,yr=10;var Vh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vh||{});function Yo(n){return Array.isArray(n)&&"object"==typeof n[Au]}function To(n){return Array.isArray(n)&&!0===n[Au]}function K_(n){return 0!=(4&n.flags)}function fd(n){return n.componentOffset>-1}function Fr(n){return 1==(1&n.flags)}function ir(n){return!!n.template}function q_(n){return 0!=(512&n[An])}function pd(n,e){return n.hasOwnProperty(mn)?n[mn]:null}class Ex{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Lr(){return ul}function ul(n){return n.type.prototype.ngOnChanges&&(n.setInput=WC),GC}function GC(){const n=Sx(this),e=n?.current;if(e){const t=n.previous;if(t===sa)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function WC(n,e,t,i){const r=this.declaredInputs[t],o=Sx(n)||function $C(n,e){return n[Ax]=e}(n,{previous:sa,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new Ex(c&&c.currentValue,e,a===sa),n[i]=e}Lr.ngInherit=!0;const Ax="__ngSimpleChanges__";function Sx(n){return n[Ax]||null}const Qa=function(n,e,t){};let Tx=!1;function rr(n){for(;Array.isArray(n);)n=n[Pr];return n}function Yh(n,e){return rr(e[n])}function os(n,e){return rr(e[n.index])}function Xh(n,e){return n.data[e]}function Mr(n,e){const t=e[n];return Yo(t)?t:t[Pr]}function ib(n){return 128==(128&n[An])}function ec(n,e){return null==e?null:n[e]}function Ix(n){n[hd]=0}function Dx(n){1024&n[An]||(n[An]|=1024,ib(n)&&gd(n))}function Rx(n){return 9216&n[An]||n[Ia]?.dirty}function ob(n){Rx(n)?gd(n):64&n[An]&&(function Cc(){return Tx}()?(n[An]|=1024,gd(n)):n[Bs].changeDetectionScheduler?.notify())}function gd(n){n[Bs].changeDetectionScheduler?.notify();let e=_d(n);for(;null!==e&&!(8192&e[An])&&(e[An]|=8192,ib(e));)e=_d(e)}function _d(n){const e=n[Gr];return To(e)?e[Gr]:e}const Vn={lFrame:ub(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ox(){return Vn.bindingsEnabled}function yd(){return null!==Vn.skipHydrationRootTNode}function Mt(){return Vn.lFrame.lView}function wi(){return Vn.lFrame.tView}function Br(n){return Vn.lFrame.contextLView=n,n[nr]}function fi(n){return Vn.lFrame.contextLView=null,n}function ji(){let n=ab();for(;null!==n&&64===n.type;)n=n.parent;return n}function ab(){return Vn.lFrame.currentTNode}function ca(n,e){const t=Vn.lFrame;t.currentTNode=n,t.isParent=e}function Mu(){return Vn.lFrame.isParent}function Mc(){Vn.lFrame.isParent=!1}function la(){return Vn.lFrame.bindingIndex++}function Ic(n){const e=Vn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function JC(n,e){const t=Vn.lFrame;t.bindingIndex=t.bindingRootIndex=n,vd(e)}function vd(n){Vn.lFrame.currentDirectiveIndex=n}function Bx(){return Vn.lFrame.currentQueryIndex}function Jh(n){Vn.lFrame.currentQueryIndex=n}function jx(n){const e=n[Vt];return 2===e.type?e.declTNode:1===e.type?n[ao]:null}function Ux(n,e,t){if(t&yi.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&yi.Host||(r=jx(o),null===r||(o=o[Ac],10&r.type))););if(null===r)return!1;e=r,n=o}const i=Vn.lFrame=Vx();return i.currentTNode=e,i.lView=n,!0}function db(n){const e=Vx(),t=n[Vt];Vn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Vx(){const n=Vn.lFrame,e=null===n?null:n.child;return null===e?ub(n):e}function ub(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function qp(){const n=Vn.lFrame;return Vn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const zx=qp;function Zh(){const n=qp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Io(){return Vn.lFrame.selectedIndex}function ml(n){Vn.lFrame.selectedIndex=n}function Ki(){const n=Vn.lFrame;return Xh(n.tView,n.selectedIndex)}let Wx=!0;function Tu(){return Wx}function Dc(n){Wx=n}function Zp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function Iu(n,e,t){$x(n,e,3,t)}function Qn(n,e,t,i){(3&n[An])===t&&$x(n,e,t,i)}function mb(n,e){let t=n[An];(3&t)===e&&(t&=16383,t+=1,n[An]=t)}function $x(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&n[hd]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[hd]+=65536),(a<o||-1==o)&&(Yx(n,t,e,c),n[hd]=(4294901760&n[hd])+c+2),c++}function Du(n,e){Qa(4,n,e);const t=L(null);try{e.call(n)}finally{L(t),Qa(5,n,e)}}function Yx(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[An]>>14<n[hd]>>16&&(3&n[An])===e&&(n[An]+=16384,Du(a,o)):Du(a,o)}const Ru=-1;class Qh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function tc(n){return n!==Ru}function xd(n){return 32767&n}function gl(n,e){let t=function Kx(n){return n>>16}(n),i=e;for(;t>0;)i=i[Ac],t--;return i}let em=!0;function ku(n){const e=em;return em=n,e}const tm=255,nm=5;let _l=0;const nc={};function ef(n,e){const t=rm(n,e);if(-1!==t)return t;const i=e[Vt];i.firstCreatePass&&(n.injectorIndex=e.length,im(i.data,n),im(e,null),im(i.blueprint,null));const r=om(n,e),o=n.injectorIndex;if(tc(r)){const s=xd(r),a=gl(r,e),c=a[Vt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function im(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function om(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Qx(r),null===i)return Ru;if(t++,r=r[Ac],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Ru}function bb(n,e,t){!function bl(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Kr)&&(i=t[Kr]),null==i&&(i=t[Kr]=_l++);const r=i&tm;e.data[n+(r>>nm)]|=1<<r}(n,e,t)}function yb(n,e,t){if(t&yi.Optional||void 0!==n)return n;xs()}function vb(n,e,t,i){if(t&yi.Optional&&void 0===i&&(i=null),!(t&(yi.Self|yi.Host))){const r=n[$o],o=is(void 0);try{return r?r.get(e,i,t&yi.Optional):ux(e,i,t&yi.Optional)}finally{is(o)}}return yb(i,0,t)}function qx(n,e,t,i=yi.Default,r){if(null!==n){if(2048&e[An]&&!(i&yi.Self)){const s=function nf(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[An]&&!(512&s[An]);){const a=xb(o,s,t,i|yi.Self,nc);if(a!==nc)return a;let c=o.parent;if(!c){const l=s[X_];if(l){const d=l.get(t,nc,i);if(d!==nc)return d}c=Qx(s),s=s[Ac]}o=c}return r}(n,e,t,i,nc);if(s!==nc)return s}const o=xb(n,e,t,i,nc);if(o!==nc)return o}return vb(e,t,i,r)}function xb(n,e,t,i,r){const o=function iM(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Kr)?n[Kr]:void 0;return"number"==typeof e?e>=0?e&tm:rM:e}(t);if("function"==typeof o){if(!Ux(e,n,i))return i&yi.Host?yb(r,0,i):vb(e,t,i,r);try{let s;if(s=o(i),null!=s||i&yi.Optional)return s;xs()}finally{zx()}}else if("number"==typeof o){let s=null,a=rm(n,e),c=Ru,l=i&yi.Host?e[Bi][ao]:null;for((-1===a||i&yi.SkipSelf)&&(c=-1===a?om(n,e):e[a+8],c!==Ru&&tf(i,!1)?(s=e[Vt],a=xd(c),e=gl(c,e)):a=-1);-1!==a;){const d=e[Vt];if(Zx(o,a,d.data)){const h=Jx(a,e,t,s,i,l);if(h!==nc)return h}c=e[a+8],c!==Ru&&tf(i,e[Vt].data[a+8]===l)&&Zx(o,a,e)?(s=d,a=xd(c),e=gl(c,e)):a=-1}}return r}function Jx(n,e,t,i,r,o){const s=e[Vt],a=s.data[n+8],d=Do(a,s,t,null==i?fd(a)&&em:i!=s&&0!=(3&a.type),r&yi.Host&&o===a);return null!==d?Xo(e,s,d,a):nc}function Do(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,d=o>>20,f=r?a+d:n.directiveEnd;for(let m=i?a:a+d;m<f;m++){const y=s[m];if(m<c&&t===y||m>=c&&y.type===t)return m}if(r){const m=s[c];if(m&&ir(m)&&m.type===t)return c}return null}function Xo(n,e,t,i){let r=n[t];const o=e.data;if(function da(n){return n instanceof Qh}(r)){const s=r;s.resolving&&function ns(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new De(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ui(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():bn(n)}(o[t]));const a=ku(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?is(s.injectImpl):null;Ux(n,i,yi.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function pb(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=ul(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&is(l),ku(a),s.resolving=!1,zx()}}return r}function Zx(n,e,t){return!!(t[e+(n>>nm)]&1<<n)}function tf(n,e){return!(n&yi.Self||n&yi.Host&&e)}class Zr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return qx(this._tNode,this._lView,e,Ec(i),t)}}function rM(){return new Zr(ji(),Mt())}function Qi(n){return Ja(()=>{const e=n.prototype.constructor,t=e[mn]||yl(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[mn]||yl(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function yl(n){return V(n)?()=>{const e=yl(ue(n));return e&&e()}:pd(n)}function Qx(n){const e=n[Vt],t=e.type;return 2===t?e.declTNode:1===t?n[ao]:null}function vl(n){return function nM(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(zp(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(ji(),n)}const Rc="__parameters__";function kc(n,e,t){return Ja(()=>{const i=function sf(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(Rc)?c[Rc]:Object.defineProperty(c,Rc,{value:[]})[Rc];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function wl(n,e){n.forEach(t=>Array.isArray(t)?wl(t,e):e(t))}function sm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Cd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Us(n,e,t){let i=Md(n,e);return i>=0?n[1|i]=t:(i=~i,function am(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function cf(n,e){const t=Md(n,e);if(t>=0)return n[1|t]}function Md(n,e){return function iw(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const El=yu(kc("Optional"),8),Nu=yu(kc("SkipSelf"),4),Al=new bt("ENVIRONMENT_INITIALIZER"),Id=new bt("INJECTOR",-1),cm=new bt("INJECTOR_DEF_TYPES");class Vs{get(e,t=_u){if(t===_u){const i=new Error(`NullInjectorError: No provider for ${Si(e)}!`);throw i.name="NullInjectorError",i}return t}}function yM(...n){return{\u0275providers:Tb(0,n),\u0275fromNgModule:!0}}function Tb(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return wl(e,s=>{const a=s;lm(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&dw(r,o),t}function dw(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Ib(r,o=>{e(o,i)})}}function lm(n,e,t,i){if(!(n=ue(n)))return!1;let r=null,o=Xi(n);const s=!o&&Zn(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=Xi(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)lm(l,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{wl(o.imports,d=>{lm(d,e,t,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&dw(l,e)}if(!a){const l=pd(r)||(()=>new r);e({provide:r,useFactory:l,deps:Mi},r),e({provide:cm,useValue:r,multi:!0},r),e({provide:Al,useValue:()=>it(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=n;Ib(c,d=>{e(d,l)})}}}return r!==n&&void 0!==n.providers}function Ib(n,e){for(let t of n)ne(t)&&(t=t.\u0275providers),Array.isArray(t)?Ib(t,e):e(t)}const vM=Xn({provide:String,useValue:Xn});function Db(n){return null!==n&&"object"==typeof n&&vM in n}function Dd(n){return"function"==typeof n}const Rb=new bt("Set Injector scope."),hf={},fw={};let dm;function um(){return void 0===dm&&(dm=new Vs),dm}class fa{}class Fu extends fa{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kb(e,s=>this.processProvider(s)),this.records.set(Id,Lu(void 0,this)),r.has("environment")&&this.records.set(fa,Lu(void 0,this));const o=this.records.get(Rb);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cm,Mi,yi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=cl(this),i=is(void 0);try{return e()}finally{cl(t),is(i)}}get(e,t=_u,i=yi.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zr))return e[zr](this);i=Ec(i);const o=cl(this),s=is(void 0);try{if(!(i&yi.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function pa(n){return"function"==typeof n||"object"==typeof n&&n instanceof bt}(e)&&Pp(e);c=l&&this.injectableDefInScope(l)?Lu(hm(e),hf):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&yi.Self?um():this.parent).get(e,t=i&yi.Optional&&t===_u?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ud]=a[ud]||[]).unshift(Si(e)),o)throw a;return function z_(n,e,t,i){const r=n[ud];throw e[Up]&&r.unshift(e[Up]),n.message=function H_(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Si(e);if(Array.isArray(e))r=e.map(Si).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Si(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(br,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[ud]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{is(s),cl(o)}}resolveInjectorInitializers(){const e=cl(this),t=is(void 0);try{const r=this.get(Al,Mi,yi.Self);for(const o of r)o()}finally{cl(e),is(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Si(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(e){let t=Dd(e=ue(e))?e:ue(e&&e.provide);const i=function EM(n){return Db(n)?Lu(void 0,n.useValue):Lu(pw(n),hf)}(e);if(!Dd(e)&&!0===e.multi){let r=this.records.get(t);r||(r=Lu(void 0,hf,!0),r.factory=()=>V_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===hf&&(t.value=fw,t.value=t.factory()),"object"==typeof t.value&&t.value&&function SM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ue(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function hm(n){const e=Pp(n),t=null!==e?e.factory:pd(n);if(null!==t)return t;if(n instanceof bt)throw new De(204,!1);if(n instanceof Function)return function wM(n){if(n.length>0)throw new De(204,!1);const t=function RC(n){return n&&(n[Hi]||n[lx])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new De(204,!1)}function pw(n,e,t){let i;if(Dd(n)){const r=ue(n);return pd(r)||hm(r)}if(Db(n))i=()=>ue(n.useValue);else if(function hw(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...V_(n.deps||[]));else if(function uw(n){return!(!n||!n.useExisting)}(n))i=()=>it(ue(n.useExisting));else{const r=ue(n&&(n.useClass||n.provide));if(!function AM(n){return!!n.deps}(n))return pd(r)||hm(r);i=()=>new r(...V_(n.deps))}return i}function Lu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kb(n,e){for(const t of n)Array.isArray(t)?kb(t,e):t&&ne(t)?kb(t.\u0275providers,e):e(t)}function gw(n,e=null,t=null,i){const r=_w(n,e,t,i);return r.resolveInjectorInitializers(),r}function _w(n,e=null,t=null,i,r=new Set){const o=[t||Mi,yM(n)];return i=i||("object"==typeof n?void 0:Si(n)),new Fu(o,e||um(),i||null,r)}let Fb,ur=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=_u;static#t=this.NULL=new Vs;static create(t,i){if(Array.isArray(t))return gw({name:""},i,t,"");{const r=t.name??"";return gw({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=It({token:n,providedIn:"any",factory:()=>it(Id)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();const pf=new bt("AppId",{providedIn:"root",factory:()=>NM}),NM="ng",yw=new bt("Platform Initializer"),Oa=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_o=new bt("AnimationModuleType"),Lb=new bt("CSP nonce",{providedIn:"root",factory:()=>function Cl(){if(void 0!==Fb)return Fb;if(typeof document<"u")return document;throw new De(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function _m(n){return 128==(128&n.flags)}var Tl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Tl||{});const bf=new Map;let Dw=0;const Wb="__ngContext__";function qo(n,e){Yo(e)?(n[Wb]=e[Eu],function kw(n){bf.set(n[Eu],n)}(e)):n[Wb]=e}let Yb;function Xb(n,e){return Yb(n,e)}function Jo(n,e,t,i,r){if(null!=i){let o,s=!1;To(i)?o=i:Yo(i)&&(s=!0,i=i[Pr]);const a=rr(i);0===n&&null!==t?null==r?vr(e,t,a):rc(e,t,a,r||null,!0):1===n&&null!==t?rc(e,t,a,r||null,!0):2===n?function Zo(n,e,t){const i=wm(n,e);i&&function jw(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function sT(n,e,t,i,r){const o=t[Za];o!==rr(t)&&Jo(e,n,i,o,r);for(let a=yr;a<t.length;a++){const c=t[a];Am(c[Vt],c,n,e,i,o)}}(e,n,o,t,r)}}function $n(n,e,t){return n.createElement(e,t)}function jr(n,e){e[Bs].changeDetectionScheduler?.notify(),Am(n,e,e[Kn],2,null,null)}function Bw(n,e){const t=n[Sc],i=t.indexOf(e);t.splice(i,1)}function vf(n,e){if(n.length<=yr)return;const t=yr+e,i=n[t];if(i){const r=i[dl];null!==r&&r!==n&&Bw(r,i),e>0&&(n[t-1][Wo]=i[Wo]);const o=Cd(n,yr+e);!function eT(n,e){jr(n,e),e[Pr]=null,e[ao]=null}(i[Vt],i);const s=o[js];null!==s&&s.detachView(o[Vt]),i[Gr]=null,i[Wo]=null,i[An]&=-129}return i}function xm(n,e){if(!(256&e[An])){const t=e[Kn];t.destroyNode&&Am(n,e,t,3,null,null),function tT(n){let e=n[Bh];if(!e)return Kb(n[Vt],n);for(;e;){let t=null;if(Yo(e))t=e[Bh];else{const i=e[yr];i&&(t=i)}if(!t){for(;e&&!e[Wo]&&e!==n;)Yo(e)&&Kb(e[Vt],e),e=e[Gr];null===e&&(e=n),Yo(e)&&Kb(e[Vt],e),t=e&&e[Wo]}e=t}}(e)}}function Kb(n,e){if(!(256&e[An])){e[An]&=-129,e[An]|=256,e[Ia]&&function be(n){if(Ke(n),Ze(n))for(let e=0;e<n.producerNode.length;e++)Ne(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[Ia]),function iT(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Qh)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Qa(4,a,c);try{c.call(a)}finally{Qa(5,a,c)}}else{Qa(4,r,o);try{o.call(r)}finally{Qa(5,r,o)}}}}}(n,e),function qb(n,e){const t=n.cleanup,i=e[Ci];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[Ci]=null);const r=e[Ta];if(null!==r){e[Ta]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Vt].type&&e[Kn].destroy();const t=e[dl];if(null!==t&&To(e[Gr])){t!==e[Gr]&&Bw(t,e);const i=e[js];null!==i&&i.detachView(n)}!function $M(n){bf.delete(n[Eu])}(e)}}function Na(n,e,t){return function Jb(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Pr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Ls.None||o===Ls.Emulated)return null}return os(i,t)}}(n,e.parent,t)}function rc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function vr(n,e,t){n.appendChild(e,t)}function Tr(n,e,t,i,r){null!==i?rc(n,e,t,i,r):vr(n,e,t)}function wm(n,e){return n.parentNode(e)}function Uw(n,e,t){return zw(n,e,t)}let Em,ls,zw=function Vw(n,e,t){return 40&n.type?os(n,t):null};function Vu(n,e,t,i){const r=Na(n,i,e),o=e[Kn],a=Uw(i.parent||e[ao],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)Tr(o,r,t[c],a,!1);else Tr(o,r,t,a,!1);void 0!==Em&&Em(o,i,e,t,r)}function xf(n,e){if(null!==e){const t=e.type;if(3&t)return os(e,n);if(4&t)return zu(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return xf(n,i);{const r=n[e.index];return To(r)?zu(-1,r):rr(r)}}if(32&t)return Xb(e,n)()||rr(n[e.index]);{const i=Zb(n,e);return null!==i?Array.isArray(i)?i[0]:xf(_d(n[Bi]),i):xf(n,e.next)}}return null}function Zb(n,e){return null!==e?n[Bi][ao].projection[e.projection]:null}function zu(n,e){const t=yr+n+1;if(t<e.length){const i=e[t],r=i[Vt].firstChild;if(null!==r)return xf(i,r)}return e[Za]}function Qb(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],c=t.type;if(s&&0===e&&(a&&qo(rr(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)Qb(n,e,t.child,i,r,o,!1),Jo(e,n,r,a,o);else if(32&c){const l=Xb(t,i);let d;for(;d=l();)Jo(e,n,r,d,o);Jo(e,n,r,a,o)}else 16&c?Hw(n,e,i,t,r,o):Jo(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Am(n,e,t,i,r,o){Qb(t,i,n.firstChild,e,r,o,!1)}function Hw(n,e,t,i,r,o){const s=t[Bi],c=s[ao].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Jo(e,n,r,c[l],o);else{let l=c;const d=s[Gr];_m(i)&&(l.flags|=128),Qb(n,e,l,d,r,o,!0)}}function ei(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ey(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&rs(n,e,i),null!==r&&ei(n,e,r),null!==o&&function Lc(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Hu(n){return function Sm(){if(void 0===ls&&(ls=null,Oi.trustedTypes))try{ls=Oi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ls}()?.createHTML(n)||n}class Pd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Pe})`}}class lT extends Pd{getTypeName(){return"HTML"}}class dT extends Pd{getTypeName(){return"Style"}}class uT extends Pd{getTypeName(){return"Script"}}class hT extends Pd{getTypeName(){return"URL"}}class fT extends Pd{getTypeName(){return"ResourceURL"}}function Hs(n){return n instanceof Pd?n.changingThisBreaksApplicationSecurity:n}function oc(n,e){const t=function ny(n){return n instanceof Pd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Pe})`)}return t===e}class Ts{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Hu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class bT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Hu(e),t}}const vT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wf(n){return(n=String(n)).match(vT)?n:"unsafe:"+n}function Bc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ef(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Xw=Bc("area,br,col,hr,img,wbr"),ry=Bc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kw=Bc("rp,rt"),Tm=Ef(Xw,Ef(ry,Bc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ef(Kw,Bc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ef(Kw,ry)),oy=Bc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qw=Ef(oy,Bc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gu=Bc("script,style,template");class wT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Tm.hasOwnProperty(t))return this.sanitizedSomething=!0,!Gu.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!qw.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;oy[a]&&(c=wf(c)),this.buf.push(" ",s,'="',Jw(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Tm.hasOwnProperty(t)&&!Xw.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Jw(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const ET=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,AT=/([^\#-~ |!])/g;function Jw(n){return n.replace(/&/g,"&amp;").replace(ET,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(AT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Im;function sy(n,e){let t=null;try{Im=Im||function co(n){const e=new bT(n);return function yT(){try{return!!(new window.DOMParser).parseFromString(Hu(""),"text/html")}catch{return!1}}()?new Ts(e):e}(n);let i=e?String(e):"";t=Im.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Im.getInertBodyElement(i)}while(i!==o);return Hu((new wT).sanitizeChildren(Dm(t)||t))}finally{if(t){const i=Dm(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Dm(n){return"content"in n&&function ST(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var bo=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(bo||{});function ay(n){const e=function Af(){const n=Mt();return n&&n[Bs].sanitizer}();return e?e.sanitize(bo.URL,n)||"":oc(n,"URL")?Hs(n):wf(bn(n))}class e1{}let t1=()=>null;function py(n,e,t=!1){return t1(n,e,t)}class BT{}class s1{}class UT{resolveComponentFactory(e){throw function jT(n){const e=Error(`No component factory found for ${Si(n)}.`);return e.ngComponent=n,e}(e)}}let Dl=(()=>{class n{static#e=this.NULL=new UT}return n})();function VT(){return Xu(ji(),Mt())}function Xu(n,e){return new Sn(os(n,e))}let Sn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=VT}return n})();function zT(n){return n instanceof Sn?n.nativeElement:n}class c1{}let GT=(()=>{class n{static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:()=>null})}return n})();const _y={};function l1(n){const e=L(null);try{return n()}finally{L(e)}}function Pm(n){return!!function by(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}class u{constructor(){}supports(e){return Pm(e)}create(e){return new w(e)}}const p=(n,e)=>e;class w{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||p}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<Qe(i,r,o)?t:i,a=Qe(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let f=0;f<l;f++){const m=f<o.length?o[f]:o[f]=0,y=m+f;d<=y&&y<l&&(o[f]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Pm(e))throw new De(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function XT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new te(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Be),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Be),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class te{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ee{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Be{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Ee,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qe(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function kt(){return new Lt([new u])}let Lt=(()=>{class n{static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:kt});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||kt()),deps:[[n,new Nu,new El]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new De(901,!1)}}return n})();function Cn(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(rr(o)),To(o)&&hi(o,i);const s=t.type;if(8&s)Cn(n,e,t.child,i);else if(32&s){const a=Xb(t,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=Zb(e,t);if(Array.isArray(a))i.push(...a);else{const c=_d(e[Bi]);Cn(c[Vt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function hi(n,e){for(let t=yr;t<n.length;t++){const i=n[t],r=i[Vt].firstChild;null!==r&&Cn(i[Vt],i,r,e)}n[Za]!==n[Pr]&&e.push(n[Za])}let vi=[];const Wr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{gd(n.lView)},consumerOnSignalRead(){this.lView[Ia]=this}};function yy(n){return JL(n[Bh])}function qL(n){return JL(n[Wo])}function JL(n){for(;null!==n&&!To(n);)n=n[Wo];return n}function KT(n){return n.ngOriginalError}class Fa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&KT(e);for(;t&&KT(t);)t=KT(t);return t||null}}const QL=new bt("",{providedIn:"root",factory:()=>Dt(Fa).handleError.bind(void 0)}),tB=new bt("",{providedIn:"root",factory:()=>!1}),ti={};function Gt(n=1){oB(wi(),Mt(),Io()+n,!1)}function oB(n,e,t,i){if(!i)if(3==(3&e[An])){const o=n.preOrderCheckHooks;null!==o&&Iu(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Qn(e,o,0,t)}ml(t)}function Ge(n,e=yi.Default){const t=Mt();return null===t?it(n,e):qx(ji(),t,ue(n),e)}function u1(n,e,t,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[Pr]=r,h[An]=204|i,(null!==l||n&&2048&n[An])&&(h[An]|=2048),Ix(h),h[Gr]=h[Ac]=n,h[nr]=t,h[Bs]=s||n&&n[Bs],h[Kn]=a||n&&n[Kn],h[$o]=c||n&&n[$o]||null,h[ao]=o,h[Eu]=function Rw(){return Dw++}(),h[Es]=d,h[X_]=l,h[Bi]=2==e.type?n[Bi]:h,h}function Fm(n,e,t,i,r){let o=n.data[e];if(null===o)o=function JT(n,e,t,i,r){const o=ab(),s=Mu(),c=n.data[e]=function jq(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return yd()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,i,r),function qh(){return Vn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function As(){const n=Vn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ca(o,!0),o}function vy(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function sB(n,e,t,i,r){const o=Io(),s=2&i;try{ml(-1),s&&e.length>Fn&&oB(n,e,Fn,!1),Qa(s?2:0,r),t(i,r)}finally{ml(o),Qa(s?3:1,r)}}function ZT(n,e,t){if(K_(e)){const i=L(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{L(i)}}}function QT(n,e,t){Ox()&&(function $q(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;fd(t)&&function Qq(n,e,t){const i=os(e,n),r=aB(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=h1(n,u1(n,r,null,s,i,e,null,n[Bs].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ef(t,e),qo(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],l=Xo(e,n,a,t);qo(l,e),null!==s&&eJ(0,a-r,l,c,0,s),ir(c)&&(Mr(t.index,e)[nr]=Xo(e,n,a,t))}}(n,e,t,os(t,e)),64==(64&t.flags)&&hB(n,e,t))}function eI(n,e,t=os){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function aB(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=tI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function tI(n,e,t,i,r,o,s,a,c,l,d){const h=Fn+i,f=h+r,m=function Oq(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:ti);return t}(h,f),y="function"==typeof l?l():l;return m[Vt]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}let cB=()=>null;function lB(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?dB(t,e,r,o):i.hasOwnProperty(r)&&dB(t,e,i[r],o)}return t}function dB(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function La(n,e,t,i,r,o,s,a){const c=os(e,t);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(sI(n,t,d,i,r),fd(e)&&function zq(n,e){const t=Mr(e,n);16&t[An]||(t[An]|=64)}(t,e.index)):3&e.type&&(i=function Vq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function nI(n,e,t,i){if(Ox()){const r=null===i?null:{"":-1},o=function Xq(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(gx(e,s.selectors,!1))if(i||(i=[]),ir(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),iI(n,e,a.length)}else i.unshift(s),iI(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&uB(n,e,t,s,r,a),r&&function Kq(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new De(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=xu(t.mergedAttrs,t.attrs)}function uB(n,e,t,i,r,o){for(let l=0;l<i.length;l++)bb(ef(t,e),n,i[l].type);!function Jq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=vy(n,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];t.mergedAttrs=xu(t.mergedAttrs,d.hostAttrs),Zq(n,t,e,c,d),qq(c,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Uq(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],f=t?t.get(h):null,y=f?f.outputs:null;c=lB(h.inputs,d,c,f?f.inputs:null),l=lB(h.outputs,d,l,y);const E=null===c||null===s||mx(e)?null:tJ(c,d,s);a.push(E)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function hB(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function ZC(){return Vn.lFrame.currentDirectiveIndex}();try{ml(o);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];vd(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Yq(c,l)}}finally{ml(-1),vd(s)}}function Yq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function iI(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qq(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ir(e)&&(t[""]=n)}}function Zq(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=pd(r.type)),s=new Qh(o,ir(r),Ge);n.blueprint[i]=s,t[i]=s,function Gq(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function Wq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,vy(n,t,r.hostVars,ti),r)}function Rl(n,e,t,i,r,o){const s=os(n,e);!function rI(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?bn(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[Kn],s,o,n.value,t,i,r)}function eJ(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)fB(i,t,s[a++],s[a++],s[a++])}function fB(n,e,t,i,r){const o=L(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{L(o)}}function tJ(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function pB(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function mB(n,e){const t=n.contentQueries;if(null!==t){const i=L(null);try{for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const a=n.data[s];Jh(t[r]),a.contentQueries(2,e[s],s)}}}finally{L(i)}}}function h1(n,e){return n[Bh]?n[xx][Wo]=e:n[Bh]=e,n[xx]=e,e}function oI(n,e,t){Jh(0);const i=L(null);try{e(n,t)}finally{L(i)}}function gB(n){return n[Ci]||(n[Ci]=[])}function _B(n){return n.cleanup||(n.cleanup=[])}function f1(n,e){const t=n[$o],i=t?t.get(Fa,null):null;i&&i.handleError(e)}function sI(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];fB(n.data[s],e[s],i,a,r)}}function rJ(n,e,t,i){const r=e[An];if(256==(256&r))return;e[Bs].inlineEffectRunner?.flush(),db(e);let s=null,a=null;(function oJ(n){return 2!==n.type})(n)&&(a=function Gs(n){return n[Ia]??function ds(n){const e=vi.pop()??Object.create(Wr);return e.lView=n,e}(n)}(e),s=function G(n){return n&&(n.nextProducerIndex=0),L(n)}(a));try{Ix(e),function Lx(n){return Vn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&sB(n,e,t,2,i);const c=3==(3&r);if(c){const h=n.preOrderCheckHooks;null!==h&&Iu(e,h,null)}else{const h=n.preOrderHooks;null!==h&&Qn(e,h,0,null),mb(e,0)}if(function sJ(n){for(let e=yy(n);null!==e;e=qL(e)){if(!(e[An]&Vh.HasTransplantedViews))continue;const t=e[Sc];for(let i=0;i<t.length;i++){Dx(t[i])}}}(e),yB(e,0),null!==n.contentQueries&&mB(n,e),c){const h=n.contentCheckHooks;null!==h&&Iu(e,h)}else{const h=n.contentHooks;null!==h&&Qn(e,h,1),mb(e,1)}!function kq(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)ml(~r);else{const o=r,s=t[++i],a=t[++i];JC(s,o),a(2,e[o])}}}finally{ml(-1)}}(n,e);const l=n.components;null!==l&&xB(e,l,0);const d=n.viewQuery;if(null!==d&&oI(2,d,i),c){const h=n.viewCheckHooks;null!==h&&Iu(e,h)}else{const h=n.viewHooks;null!==h&&Qn(e,h,2),mb(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[jh]){for(const h of e[jh])h();e[jh]=null}e[An]&=-73}catch(c){throw gd(e),c}finally{null!==a&&(function Te(n,e){if(L(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ze(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ne(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,s),function Ws(n){n.lView[Ia]!==n&&(n.lView=null,vi.push(n))}(a)),Zh()}}function yB(n,e){for(let t=yy(n);null!==t;t=qL(t))for(let i=yr;i<t.length;i++)vB(t[i],e)}function aJ(n,e,t){vB(Mr(e,n),t)}function vB(n,e){ib(n)&&cI(n,e)}function cI(n,e){const i=n[Vt],r=n[An],o=n[Ia];let s=!!(0===e&&16&r);if(s||=!!(64&r&&0===e),s||=!!(1024&r),s||=!(!o?.dirty||!ce(o)),o&&(o.dirty=!1),n[An]&=-9217,s)rJ(i,n,i.template,n[nr]);else if(8192&r){yB(n,1);const a=i.components;null!==a&&xB(n,a,1)}}function xB(n,e,t){for(let i=0;i<e.length;i++)aJ(n,e[i],t)}function xy(n){for(n[Bs].changeDetectionScheduler?.notify();n;){n[An]|=64;const e=_d(n);if(q_(n)&&!e)return n;n=e}return null}class wy{get rootNodes(){const e=this._lView,t=e[Vt];return Cn(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(e){this._lView[nr]=e}get destroyed(){return 256==(256&this._lView[An])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Gr];if(To(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(vf(e,i),Cd(t,i))}this._attachedToViewContainer=!1}xm(this._lView[Vt],this._lView)}onDestroy(e){!function hl(n,e){if(256==(256&n[An]))throw new De(911,!1);null===n[Ta]&&(n[Ta]=[]),n[Ta].push(e)}(this._lView,e)}markForCheck(){xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[An]&=-129}reattach(){ob(this._lView),this._lView[An]|=128}detectChanges(){this._lView[An]|=1024,function aI(n,e=!0){const t=n[Bs],i=t.rendererFactory;i.begin?.();try{!function iJ(n){cI(n,0);let e=0;for(;Rx(n);){if(100===e)throw new De(103,!1);e++,cI(n,1)}}(n)}catch(o){throw e&&f1(n,o),o}finally{i.end?.(),t.inlineEffectRunner?.flush()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,jr(this._lView[Vt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=e,ob(this._lView)}}let Ur=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=cJ}return n})();function cJ(n){return function lJ(n,e,t){if(fd(n)&&!t){const i=Mr(n.index,e);return new wy(i,i)}return 47&n.type?new wy(e[Bi],e):null}(ji(),Mt(),16==(16&n))}const wB=new Set;function If(n){wB.has(n)||(wB.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function dI(n){return e=>{setTimeout(n,void 0,e)}}const nn=class yJ extends Yt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=dI(o),r&&(r=dI(r)),s&&(s=dI(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof At&&e.add(a),a}};function EB(...n){}class Qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nn(!1),this.onMicrotaskEmpty=new nn(!1),this.onStable=new nn(!1),this.onError=new nn(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function vJ(){const n="function"==typeof Oi.requestAnimationFrame;let e=Oi[n?"requestAnimationFrame":"setTimeout"],t=Oi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function EJ(n){const e=()=>{!function wJ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Oi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hI(n),n.isCheckStableRunning=!0,uI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hI(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function AJ(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return AB(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),SB(n)}},onInvoke:(t,i,r,o,s,a,c)=>{try{return AB(n),t.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),SB(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,hI(n),uI(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qt.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Qt.isInAngularZone())throw new De(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,xJ,EB,EB);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const xJ={};function uI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hI(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function AB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SB(n){n._nesting--,uI(n)}class CB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nn,this.onMicrotaskEmpty=new nn,this.onStable=new nn,this.onError=new nn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let Ey=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r();return!!this.handler?.execute()||t.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:()=>new n})}return n})();function TJ(n,e){const t=Mr(e,n),i=t[Vt];!function IJ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Pr];null!==r&&null===t[Es]&&(t[Es]=py(r,t[$o])),fI(i,t,t[nr])}function fI(n,e,t){db(e);try{const i=n.viewQuery;null!==i&&oI(1,i,t);const r=n.template;null!==r&&sB(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&mB(n,e),n.staticViewQueries&&oI(2,n.viewQuery,t);const o=n.components;null!==o&&function DJ(n,e){for(let t=0;t<e.length;t++)TJ(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[An]&=-5,Zh()}}function p1(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=oo(r,a):2==o&&(i=oo(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class RB extends Dl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Zn(e);return new Ay(t,this.ngModule)}}function kB(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class kJ{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Ec(i);const r=this.injector.get(e,_y,i);return r!==_y||t===_y?r:this.parentInjector.get(e,t,i)}}class Ay extends s1{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=kB(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return kB(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function VC(n){return n.map(UC).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof fa?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new kJ(e,o):e,a=s.get(c1,null);if(null===a)throw new De(407,!1);const h={rendererFactory:a,sanitizer:s.get(GT,null),inlineEffectRunner:null,afterRenderEventManager:s.get(Ey,null),changeDetectionScheduler:s.get(e1,null)},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=i?function Nq(n,e,t,i){const o=i.get(tB,!1)||t===Ls.ShadowDom,s=n.selectRootElement(e,o);return function Pq(n){cB(n)}(s),s}(f,i,this.componentDef.encapsulation,s):$n(f,m,function RJ(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(m));let E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let M=null;null!==y&&(M=py(y,s,!0));const H=tI(0,null,null,1,0,null,null,null,null,null,null),K=u1(null,H,null,E,null,null,h,f,s,null,M);let de,Ie;db(K);try{const Fe=this.componentDef;let Xe,lt=null;Fe.findHostDirectiveDefs?(Xe=[],lt=new Map,Fe.findHostDirectiveDefs(Fe,Xe,lt),Xe.push(Fe)):Xe=[Fe];const gt=function NJ(n,e){const t=n[Vt],i=Fn;return n[i]=e,Fm(t,i,2,"#host",null)}(K,y),mt=function PJ(n,e,t,i,r,o,s){const a=r[Vt];!function FJ(n,e,t,i){for(const r of n)e.mergedAttrs=xu(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(p1(e,e.mergedAttrs,!0),null!==t&&ey(i,t,e))}(i,n,e,s);let c=null;null!==e&&(c=py(e,r[$o]));const l=o.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const h=u1(r,aB(t),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&iI(a,n,i.length-1),h1(r,h),r[n.index]=h}(gt,y,Fe,Xe,K,h,f);Ie=Xh(H,Fn),y&&function BJ(n,e,t,i){if(i)rs(n,t,["ng-version","17.0.9"]);else{const{attrs:r,classes:o}=function wu(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Ho(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&rs(n,t,r),o&&o.length>0&&ei(n,t,o.join(" "))}}(f,Fe,y,i),void 0!==t&&function jJ(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(Ie,this.ngContentSelectors,t),de=function LJ(n,e,t,i,r,o){const s=ji(),a=r[Vt],c=os(s,r);uB(a,r,s,t,null,i);for(let d=0;d<t.length;d++)qo(Xo(r,a,s.directiveStart+d,s),r);hB(a,r,s),c&&qo(c,r);const l=Xo(r,a,s.directiveStart+s.componentOffset,s);if(n[nr]=r[nr]=l,null!==o)for(const d of o)d(l,e);return ZT(a,s,n),l}(mt,Fe,Xe,lt,K,[UJ]),fI(H,K,null)}finally{Zh()}return new OJ(this.componentType,de,Xu(Ie,K),K,Ie)}}class OJ extends BT{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new wy(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;sI(o[Vt],o,r,e,t),this.previousInputValues.set(e,t),xy(Mr(this._tNode.index,o))}}get injector(){return new Zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function UJ(){const n=ji();Zp(Mt()[Vt],n)}function Wn(n){let e=function OB(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ir(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new De(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=m1(n.inputs),s.inputTransforms=m1(n.inputTransforms),s.declaredInputs=m1(n.declaredInputs),s.outputs=m1(n.outputs);const a=r.hostBindings;a&&GJ(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&zJ(n,c),l&&HJ(n,l),Mo(n.inputs,r.inputs),Mo(n.declaredInputs,r.declaredInputs),Mo(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Mo(s.inputTransforms,r.inputTransforms)),ir(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Wn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function VJ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=xu(r.hostAttrs,t=xu(t,r.hostAttrs))}}(i)}function m1(n){return n===sa?{}:n===Mi?[]:n}function zJ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function HJ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function GJ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Bd(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function yo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ni(n,e,t,i){const r=Mt();return yo(r,la(),e)&&(wi(),Rl(Ki(),r,n,e,t,i)),Ni}function Bm(n,e,t,i){return yo(n,la(),t)?e+bn(t)+i:ti}function _1(n,e){return n<<17|e<<2}function Ku(n){return n>>17&32767}function pI(n){return 2|n}function kf(n){return(131068&n)>>2}function mI(n,e){return-131069&n|e<<2}function gI(n){return 1|n}function $B(n,e,t,i){const r=n[t+1],o=null===e;let s=i?Ku(r):kf(r),a=!1;for(;0!==s&&(!1===a||o);){const l=n[s+1];tZ(n[s],e)&&(a=!0,n[s+1]=i?gI(l):pI(l)),s=i?Ku(l):kf(l)}a&&(n[t+1]=i?pI(r):gI(r))}function tZ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Md(n,e)>=0}const Ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YB(n){return n.substring(Ro.key,Ro.keyEnd)}function XB(n,e){const t=Ro.textEnd;return t===e?-1:(e=Ro.keyEnd=function oZ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ro.key=e,t),$m(n,e,t))}function $m(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function un(n,e,t){const i=Mt();return yo(i,la(),e)&&La(wi(),Ki(),i,n,e,i[Kn],t,!1),un}function _I(n,e,t,i,r){const s=r?"class":"style";sI(n,t,e.inputs[s],s,i)}function Cy(n,e,t){return zc(n,e,t,!1),Cy}function Ln(n,e){return zc(n,e,null,!0),Ln}function Qo(n){!function Hc(n,e,t,i){const r=wi(),o=Ic(2);r.firstUpdatePass&&e3(r,null,o,i);const s=Mt();if(t!==ti&&yo(s,o,t)){const a=r.data[Io()];if(r3(a,i)&&!QB(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=oo(c,t||"")),_I(r,a,s,t,i)}else!function mZ(n,e,t,i,r,o,s,a){r===ti&&(r=Mi);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const f=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let E,y=null;d===h?(c+=2,l+=2,f!==m&&(y=h,E=m)):null===h||null!==d&&d<h?(c+=2,y=d):(l+=2,y=h,E=m),null!==y&&n3(n,e,t,i,y,E,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Kn],s[o+1],s[o+1]=function fZ(n,e,t){if(null==t||""===t)return Mi;const i=[],r=Hs(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(pZ,Ol,n,!0)}function Ol(n,e){for(let t=function iZ(n){return function qB(n){Ro.key=0,Ro.keyEnd=0,Ro.value=0,Ro.valueEnd=0,Ro.textEnd=n.length}(n),XB(n,$m(n,0,Ro.textEnd))}(e);t>=0;t=XB(e,t))Us(n,YB(e),!0)}function zc(n,e,t,i){const r=Mt(),o=wi(),s=Ic(2);o.firstUpdatePass&&e3(o,n,s,i),e!==ti&&yo(r,s,e)&&n3(o,o.data[Io()],r,r[Kn],n,r[s+1]=function gZ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Si(Hs(n)))),n}(e,t),i,s)}function QB(n,e){return e>=n.expandoStartIndex}function e3(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Io()],s=QB(n,t);r3(o,i)&&null===e&&!s&&(e=!1),e=function lZ(n,e,t,i){const r=function lb(n){const e=Vn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=My(t=bI(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=bI(r,n,e,t,i),null===o){let c=function dZ(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==kf(i))return n[Ku(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=bI(null,n,e,c[1],i),c=My(c,e.attrs,i),function uZ(n,e,t,i){n[Ku(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else o=function hZ(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=My(i,n[o].hostAttrs,t);return My(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function QJ(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Ku(s),c=kf(s);n[i]=t;let d,l=!1;if(Array.isArray(t)?(d=t[1],(null===d||Md(t,d)>0)&&(l=!0)):d=t,r)if(0!==c){const f=Ku(n[a+1]);n[i+1]=_1(f,a),0!==f&&(n[f+1]=mI(n[f+1],i)),n[a+1]=function JJ(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=_1(a,0),0!==a&&(n[a+1]=mI(n[a+1],i)),a=i;else n[i+1]=_1(c,0),0===a?a=i:n[c+1]=mI(n[c+1],i),c=i;l&&(n[i+1]=pI(n[i+1])),$B(n,d,i,!0),$B(n,d,i,!1),function eZ(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Md(o,e)>=0&&(t[i+1]=gI(t[i+1]))}(e,d,n,i,o),s=_1(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function bI(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=My(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function My(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Us(n,s,!!t||e[++o]))}return void 0===n?null:n}function pZ(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Us(n,i,t)}function n3(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],d=function ZJ(n){return 1==(1&n)}(l)?i3(c,e,t,r,kf(l),s):void 0;b1(d)||(b1(o)||function qJ(n){return 2==(2&n)}(l)&&(o=i3(c,null,t,r,a,s)),function Gw(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Tl.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Tl.Important),n.setStyle(t,i,r,o))}}(i,s,Yh(Io(),t),r,o))}function i3(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let f=t[r+1];f===ti&&(f=h?Mi:void 0);let m=h?cf(f,i):d===i?f:void 0;if(l&&!b1(m)&&(m=cf(c,i)),b1(m)&&(a=m,s))return a;const y=n[r+1];r=s?Ku(y):kf(y)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=cf(c,i))}return a}function b1(n){return void 0!==n}function r3(n,e){return 0!=(n.flags&(e?8:16))}let d3=()=>null;function Ym(n,e){return d3(n,e)}function ky(n,e,t,i){const r=e.tView,a=u1(n,r,t,4096&n[An]?4096:16,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null);a[dl]=n[e.index];const l=n[js];return null!==l&&(a[js]=l.createEmbeddedView(r)),fI(r,a,t),a}function Xm(n,e){return!e||null===e.firstChild||_m(n)}function Oy(n,e,t,i=!0){const r=e[Vt];if(function Il(n,e,t,i){const r=yr+i,o=t.length;i>0&&(t[r-1][Wo]=e),i<o-yr?(e[Wo]=t[r],sm(t,yr+i,e)):(t.push(e),e[Wo]=null),e[Gr]=t;const s=e[dl];null!==s&&t!==s&&function nT(n,e){const t=n[Sc];e[Bi]!==e[Gr][Gr][Bi]&&(n[An]|=Vh.HasTransplantedViews),null===t?n[Sc]=[e]:t.push(e)}(s,e);const a=e[js];null!==a&&a.insertView(n),ob(e),e[An]|=128}(r,e,n,t),i){const s=zu(t,n),a=e[Kn],c=wm(a,n[Za]);null!==c&&function Ms(n,e,t,i,r,o){i[Pr]=r,i[ao]=e,Am(n,i,t,1,r,o)}(r,n[ao],a,e,c,s)}const o=e[Es];null!==o&&null!==o.firstChild&&(o.firstChild=null)}let us=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qZ}return n})();function qZ(){return _3(ji(),Mt())}const JZ=us,m3=class extends JZ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Xu(this._hostTNode,this._hostLView)}get injector(){return new Zr(this._hostTNode,this._hostLView)}get parentInjector(){const e=om(this._hostTNode,this._hostLView);if(tc(e)){const t=gl(e,this._hostLView),i=xd(e);return new Zr(t[Vt].data[i+8],t)}return new Zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=g3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=Ym(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Xm(this._hostTNode,s)),a}createComponent(e,t,i,r,o){const s=e&&!function af(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const y=t||{};a=y.index,i=y.injector,r=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}const c=s?e:new Ay(Zn(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const E=(s?l:this.parentInjector).get(fa,null);E&&(o=E)}const d=Zn(c.componentType??{}),h=Ym(this._lContainer,d?.id??null),m=c.create(l,r,h?.firstChild??null,o);return this.insertImpl(m.hostView,a,Xm(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function KC(n){return To(n[Gr])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Gr],l=new m3(c,c[ao],c[Gr]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return Oy(s,r,o,i),e.attachToViewContainerRef(),sm(MI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=g3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=vf(this._lContainer,t);i&&(Cd(MI(this._lContainer),t),xm(i[Vt],i))}detach(e){const t=this._adjustIndex(e,-1),i=vf(this._lContainer,t);return i&&null!=Cd(MI(this._lContainer),t)?new wy(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function g3(n){return n[8]}function MI(n){return n[8]||(n[8]=[])}function _3(n,e){let t;const i=e[n.index];return To(i)?t=i:(t=pB(i,e,null,n),e[n.index]=t,h1(e,t)),b3(t,e,n,i),new m3(t,n,e)}let b3=function v3(n,e,t,i){if(n[Za])return;let r;r=8&t.type?rr(i):function ZZ(n,e){const t=n[Kn],i=t.createComment(""),r=os(e,n);return rc(t,wm(t,r),i,function rT(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Za]=r},TI=()=>!1;function Rn(n,e,t,i,r,o,s,a){const c=Mt(),l=wi(),d=n+Fn,h=l.firstCreatePass?function nQ(n,e,t,i,r,o,s,a,c){const l=e.consts,d=Fm(e,n,4,s||null,ec(l,a));nI(e,t,d,ec(l,c)),Zp(e,d);const h=d.tView=tI(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,t,i,r,o,s):l.data[d];ca(h,!1);const f=x3(l,c,h,n);Tu()&&Vu(l,c,f,h),qo(f,c);const m=pB(f,c,f,h);return c[d]=m,h1(c,m),function y3(n,e,t){return TI(n,e,t)}(m,h,c),Fr(h)&&QT(l,c,h),null!=s&&eI(c,h,a),Rn}let x3=function w3(n,e,t,i){return Dc(!0),e[Kn].createComment("")};function xr(n,e,t){If("NgControlFlow");const i=Mt(),r=la(),o=function II(n,e){return n[e]}(i,Fn+n);if(yo(i,r,e)){const a=L(null);try{if(function CI(n,e){const t=vf(n,e);return void 0!==t&&xm(t[Vt],t),t}(o,0),-1!==e){const c=function DI(n,e){return Xh(n,e)}(i[Vt],Fn+e),l=Ym(o,c.tView.ssrId);Oy(o,ky(i,c,t,{dehydratedView:l}),0,Xm(c,l))}}finally{L(a)}}else{const a=function p3(n,e){const t=yr+e;if(t<n.length)return n[t]}(o,0);void 0!==a&&(a[nr]=t)}}function Ft(n,e,t,i){const r=Mt(),o=wi(),s=Fn+n,a=r[Kn],c=o.firstCreatePass?function VQ(n,e,t,i,r,o){const s=e.consts,c=Fm(e,n,2,i,ec(s,r));return nI(e,t,c,ec(s,o)),null!==c.attrs&&p1(c,c.attrs,!1),null!==c.mergedAttrs&&p1(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,t,i):o.data[s],l=X3(o,r,c,a,e,n);r[s]=l;const d=Fr(c);return ca(c,!0),ey(a,l,c),32!=(32&c.flags)&&Tu()&&Vu(o,r,l,c),0===function sb(){return Vn.lFrame.elementDepthCount}()&&qo(l,r),function bd(){Vn.lFrame.elementDepthCount++}(),d&&(QT(o,r,c),ZT(o,c,r)),null!==i&&eI(r,c),Ft}function Bt(){let n=ji();Mu()?Mc():(n=n.parent,ca(n,!1));const e=n;(function Nx(n){return Vn.skipHydrationRootTNode===n})(e)&&function qC(){Vn.skipHydrationRootTNode=null}(),function aa(){Vn.lFrame.elementDepthCount--}();const t=wi();return t.firstCreatePass&&(Zp(t,n),K_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function _b(n){return 0!=(8&n.flags)}(e)&&_I(t,e,Mt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Xx(n){return 0!=(16&n.flags)}(e)&&_I(t,e,Mt(),e.stylesWithoutHost,!1),Bt}function ni(n,e,t,i){return Ft(n,e,t,i),Bt(),ni}let X3=(n,e,t,i,r,o)=>(Dc(!0),$n(i,r,function fb(){return Vn.lFrame.currentNamespace}()));function Ju(n,e,t){const i=Mt();return yo(i,la(),e)&&La(wi(),Ki(),i,n,e,i[Kn],t,!0),Ju}const ng="en-US";let Q3=ng;function ig(n){return!!n&&"function"==typeof n.then}function Aj(n){return!!n&&"function"==typeof n.subscribe}function vn(n,e,t,i){const r=Mt(),o=wi(),s=ji();return function Sj(n,e,t,i,r,o,s){const a=Fr(i),l=n.firstCreatePass&&_B(n),d=e[nr],h=gB(e);let f=!0;if(3&i.type||s){const E=os(i,e),M=s?s(E):E,H=h.length,K=s?Ie=>s(rr(Ie[i.index])):i.index;let de=null;if(!s&&a&&(de=function Hee(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Ci],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==de)(de.__ngLastListenerFn__||de).__ngNextListenerFn__=o,de.__ngLastListenerFn__=o,f=!1;else{o=Mj(i,e,d,o,!1);const Ie=t.listen(M,r,o);h.push(o,Ie),l&&l.push(r,K,H,H+1)}}else o=Mj(i,e,d,o,!1);const m=i.outputs;let y;if(f&&null!==m&&(y=m[r])){const E=y.length;if(E)for(let M=0;M<E;M+=2){const Fe=e[y[M]][y[M+1]].subscribe(o),Xe=h.length;h.push(o,Fe),l&&l.push(r,i.index,Xe,-(Xe+1))}}}(o,r,r[Kn],s,n,e,i),vn}function Cj(n,e,t,i){try{return Qa(6,e,t),!1!==t(i)}catch(r){return f1(n,r),!1}finally{Qa(7,e,t)}}function Mj(n,e,t,i,r){return function o(s){if(s===Function)return i;xy(n.componentOffset>-1?Mr(n.index,e):e);let c=Cj(e,t,i,s),l=o.__ngNextListenerFn__;for(;l;)c=Cj(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Mn(n=1){return function Hx(n){return(Vn.lFrame.contextLView=function rb(n,e){for(;n>0;)e=e[Ac],n--;return e}(n,Vn.lFrame.contextLView))[nr]}(n)}function Gee(n,e){let t=null;const i=function $_(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?gx(n,o,!0):Hp(i,o))return r}else t=r}return t}function uo(n){const e=Mt()[Bi][ao];if(!e.projection){const i=e.projection=function Nc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?Gee(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Gn(n,e=0,t){const i=Mt(),r=wi(),o=Fm(r,Fn+n,16,null,t||null);null===o.projection&&(o.projection=e),Mc(),(!i[Es]||yd())&&32!=(32&o.flags)&&function oT(n,e,t){Hw(e[Kn],0,e,t,Na(n,t,e),Uw(t.parent||e[ao],t,e))}(r,i,o)}function k1(n,e,t){return HI(n,"",e,"",t),k1}function HI(n,e,t,i,r){const o=Mt(),s=Bm(o,e,t,i);return s!==ti&&La(wi(),Ki(),o,n,s,o[Kn],r,!1),HI}function pi(n,e=""){const t=Mt(),i=wi(),r=n+Fn,o=i.firstCreatePass?Fm(i,r,1,e,null):i.data[r],s=Wj(i,t,o,e,n);t[r]=s,Tu()&&Vu(i,t,s,o),ca(o,!1)}let Wj=(n,e,t,i,r)=>(Dc(!0),function vm(n,e){return n.createText(e)}(e[Kn],i));function lc(n){return ga("",n,""),lc}function ga(n,e,t){const i=Mt(),r=Bm(i,n,e,t);return r!==ti&&function Ld(n,e,t){const i=Yh(e,n);!function Lw(n,e,t){n.setValue(e,t)}(n[Kn],i,t)}(i,Io(),r),ga}function WI(n,e,t,i,r){if(n=ue(n),Array.isArray(n))for(let o=0;o<n.length;o++)WI(n[o],e,t,i,r);else{const o=wi(),s=Mt(),a=ji();let c=Dd(n)?n:ue(n.provide);const l=pw(n),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(Dd(n)||!n.multi){const m=new Qh(l,r,Ge),y=YI(c,e,r?d:d+f,h);-1===y?(bb(ef(a,s),o,c),$I(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[y]=m,s[y]=m)}else{const m=YI(c,e,d+f,h),y=YI(c,e,d,d+f),M=y>=0&&t[y];if(r&&!M||!r&&!(m>=0&&t[m])){bb(ef(a,s),o,c);const H=function ste(n,e,t,i,r){const o=new Qh(n,t,Ge);return o.multi=[],o.index=e,o.componentProviders=0,Qj(o,r,i&&!t),o}(r?ote:rte,t.length,r,i,l);!r&&M&&(t[y].providerFactory=H),$I(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(H),s.push(H)}else $I(o,n,m>-1?m:y,Qj(t[r?y:m],l,!r&&i));!r&&i&&M&&t[y].componentProviders++}}}function $I(n,e,t,i){const r=Dd(e),o=function xM(n){return!!n.useClass}(e);if(r||o){const c=(o?ue(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(t);-1===d?l.push(t,[i,c]):l[d+1].push(i,c)}else l.push(t,c)}}}function Qj(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function YI(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function rte(n,e,t,i){return XI(this.multi,[])}function ote(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Xo(t,t[Vt],this.providerFactory.index,i);o=a.slice(0,s),XI(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],XI(r,o);return o}function XI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function li(n,e=[]){return t=>{t.providersResolver=(i,r)=>function ite(n,e,t){const i=wi();if(i.firstCreatePass){const r=ir(n);WI(t,i.data,i.blueprint,r,!0),WI(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Pf{}class e4{}class KI extends Pf{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new RB(this);const r=function Kt(n,e){const t=n[cn]||null;if(!t&&!0===e)throw new Error(`Type ${Si(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function zs(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=_w(e,t,[{provide:Pf,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver},...i],Si(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class qI extends e4{constructor(e){super(),this.moduleType=e}create(e){return new KI(this.moduleType,e,[])}}class t4 extends Pf{constructor(e){super(),this.componentFactoryResolver=new RB(this),this.instance=null;const t=new Fu([...e.providers,{provide:Pf,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver}],e.parent||um(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let lte=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=Tb(0,t.type),r=i.length>0?function n4(n,e,t=null){return new t4({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=It({token:n,providedIn:"environment",factory:()=>new n(it(fa))})}return n})();function Ff(n){If("NgStandalone"),n.getStandaloneInjector=e=>e.get(lte).getOrCreateStandaloneInjector(n)}function d4(n,e,t,i,r,o){const s=e+t;return yo(n,s,r)?function kl(n,e,t){return n[e]=t}(n,s+1,o?i.call(o,r):i(r)):function Gy(n,e){const t=n[e];return t===ti?void 0:t}(n,s+1)}function Ba(n,e){const t=wi();let i;const r=n+Fn;t.firstCreatePass?(i=function Dte(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const o=i.factory||(i.factory=pd(i.type)),a=is(Ge);try{const c=ku(!1),l=o();return ku(c),function Wee(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Mt(),r,l),l}finally{is(a)}}function Pl(n,e,t){const i=n+Fn,r=Mt(),o=function Su(n,e){return n[e]}(r,i);return function Wy(n,e){return n[Vt].data[e].pure}(r,i)?d4(r,function ss(){const n=Vn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,o.transform,t,o):o.transform(t)}function Nte(){return this._results[Symbol.iterator]()}class $y{static#e=Symbol.iterator;get changes(){return this._changes??=new nn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=$y.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Nte)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Ko(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Oc(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}let dc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Lte}return n})();const Pte=dc,Fte=class extends Pte{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=ky(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new wy(r)}};function Lte(){return F1(ji(),Mt())}function F1(n,e){return 4&n.type?new Fte(e,n,Xu(n,e)):null}class ZI{constructor(e){this.queryList=e,this.matches=null}clone(){return new ZI(this.queryList)}setDirty(){this.queryList.setDirty()}}class QI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new QI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==y4(e,t).matches&&this.queries[t].setDirty()}}class m4{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class eD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new eD(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new tD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,Bte(t,o)),this.matchTNodeWithReadOption(e,t,Do(t,e,o,!1,!1))}else i===dc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Do(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Sn||r===us||r===dc&&4&t.type)this.addMatch(t.index,-2);else{const o=Do(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Bte(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Ute(n,e,t,i){return-1===t?function jte(n,e){return 11&n.type?Xu(n,e):4&n.type?F1(n,e):null}(e,n):-2===t?function Vte(n,e,t){return t===Sn?Xu(e,n):t===dc?F1(e,n):t===us?_3(e,n):void 0}(n,e,i):Xo(n,n[Vt],t,e)}function g4(n,e,t,i){const r=e[js].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:Ute(e,o[l],s[c+1],t.metadata.read))}r.matches=a}return r.matches}function nD(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=g4(n,e,r,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=yr;h<d.length;h++){const f=d[h];f[dl]===f[Gr]&&nD(f[Vt],f,l,i)}if(null!==d[Sc]){const h=d[Sc];for(let f=0;f<h.length;f++){const m=h[f];nD(m[Vt],m,l,i)}}}}}return i}function On(n){const e=Mt(),t=wi(),i=Bx();Jh(i+1);const r=y4(t,i);if(n.dirty&&function XC(n){return 4==(4&n[An])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?nD(t,e,i,[]):g4(t,e,r,i);n.reset(o,zT),n.notifyOnChanges()}return!0}return!1}function Pi(n,e,t){const i=wi();i.firstCreatePass&&(b4(i,new m4(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),_4(i,Mt(),e)}function Nn(){return function zte(n,e){return n[js].queries[e].queryList}(Mt(),Bx())}function _4(n,e,t){const i=new $y(4==(4&t));(function Bq(n,e,t,i){const r=gB(e);r.push(t),n.firstCreatePass&&_B(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[js]&&(e[js]=new QI),e[js].queries.push(new ZI(i))}function b4(n,e,t){null===n.queries&&(n.queries=new eD),n.queries.track(new tD(e,t))}function y4(n,e){return n.queries.getByIndex(e)}let sg=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Li(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const U4=new bt(""),j1=new bt("");let dD,cD=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dD||(function jne(n){dD=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(it(Qt),it(lD),it(j1))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})(),lD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return dD?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const uD=new bt("Application Initializer");let hD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Dt(uD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(ig(o))t.push(o);else if(Aj(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const U1=new bt("appBootstrapListener");function H4(n,e){return Array.isArray(e)?e.reduce(H4,n):{...n,...e}}let Qu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Dt(QL),this.afterRenderEffectManager=Dt(Ey),this.componentTypes=[],this.components=[],this.isStable=Dt(sg).hasPendingTasks.pipe(qt(t=>!t)),this._injector=Dt(fa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof s1;if(!this._injector.get(hD).done)throw!r&&function xt(n){const e=Zn(n)||at(n)||St(n);return null!==e&&e.standalone}(t),new De(405,!1);let s;s=r?t:this._injector.get(Dl).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function Vne(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Pf),l=s.create(ur.NULL,[],i||s.selector,a),d=l.location.nativeElement,h=l.injector.get(U4,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),V1(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{try{this.afterRenderEffectManager.execute()}catch(t){this.internalErrorHandler(t)}this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;V1(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(U1,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>V1(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new De(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Hne=(()=>{class n{constructor(){this.zone=Dt(Qt),this.applicationRef=Dt(Qu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gne(){const n=Dt(Qt),e=Dt(Fa);return t=>n.runOutsideAngular(()=>e.handleError(t))}let $ne=(()=>{class n{constructor(){this.subscription=new At,this.initialized=!1,this.zone=Dt(Qt),this.pendingTasks=Dt(sg)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Fl=new bt("LocaleId",{providedIn:"root",factory:()=>Dt(Fl,yi.Optional|yi.SkipSelf)||function Yne(){return typeof $localize<"u"&&$localize.locale||ng}()}),fD=new bt("PlatformDestroyListeners");let Y4=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function SJ(n="zone.js",e){return"noop"===n?new CB:"zone.js"===n?new Qt(e):n}(i?.ngZone,function $4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function cte(n,e,t){return new KI(n,e,t)}(t.moduleType,this.injector,function W4(n){return[{provide:Qt,useFactory:n},{provide:Al,multi:!0,useFactory:()=>{const e=Dt(Hne,{optional:!0});return()=>e.initialize()}},{provide:Al,multi:!0,useFactory:()=>{const e=Dt($ne);return()=>{e.initialize()}}},{provide:QL,useFactory:Gne}]}(()=>r)),s=o.injector.get(Fa,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{V1(this._modules,o),a.unsubscribe()})}),function z4(n,e,t){try{const i=t();return ig(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(hD);return a.runInitializers(),a.donePromise.then(()=>(function ej(n){dr(n,"Expected localeId to be defined"),"string"==typeof n&&(Q3=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Fl,ng)||ng),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=H4({},i);return function Une(n,e,t){const i=new qI(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new De(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(fD,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(it(ur))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),eh=null;const X4=new bt("AllowMultipleToken");function K4(n,e,t=[]){const i=`Platform: ${e}`,r=new bt(i);return(o=[])=>{let s=pD();if(!s||s.injector.get(X4,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function qne(n){if(eh&&!eh.get(X4,!1))throw new De(400,!1);(function V4(){!function me(n){ft=n}(()=>{throw new De(600,!1)})})(),eh=n;const e=n.get(Y4);(function J4(n){n.get(yw,null)?.forEach(t=>t())})(n)}(function q4(n=[],e){return ur.create({name:e,providers:[{provide:Rb,useValue:"platform"},{provide:fD,useValue:new Set([()=>eh=null])},...n]})}(a,i))}return function Jne(n){const e=pD();if(!e)throw new De(401,!1);return e}()}}function pD(){return eh?.get(Y4)??null}const iie=K4(null,"core",[]);let rie=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(it(Qu))};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({})}return n})();function $r(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let ED=null;function th(){return ED}class Oie{}const Jn=new bt("DocumentToken");let vU=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:()=>Dt(Nie),providedIn:"platform"})}return n})(),Nie=(()=>{class n extends vU{constructor(){super(),this._doc=Dt(Jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return th().getBaseHref(this._doc)}onPopState(t){const i=th().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=th().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function xU(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function wU(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function jf(n){return n&&"?"!==n[0]?"?"+n:n}let Zy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:()=>Dt(Fie),providedIn:"root"})}return n})();const Pie=new bt("appBaseHref");let Fie=(()=>{class n extends Zy{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Dt(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xU(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+jf(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+jf(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+jf(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(it(vU),it(Pie,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uf=(()=>{class n{constructor(t){this._subject=new nn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function jie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(wU(EU(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+jf(i))}normalize(t){return n.stripTrailingSlash(function Bie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,EU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+jf(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+jf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=jf;static#t=this.joinWithSlash=xU;static#n=this.stripTrailingSlash=wU;static#i=this.\u0275fac=function(i){return new(i||n)(it(Zy))};static#r=this.\u0275prov=It({token:n,factory:()=>function Lie(){return new Uf(it(Zy))}(),providedIn:"root"})}return n})();function EU(n){return n.replace(/\/index.html$/,"")}class Are{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nh=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Are(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),PU(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{PU(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(us),Ge(dc),Ge(Lt))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function PU(n,e){n.context.$implicit=e.item}let Vf=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Sre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){FU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){FU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(us),Ge(dc))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Sre{constructor(){this.$implicit=null,this.ngIf=null}}function FU(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Si(e)}'.`)}class Rre{createSubscription(e,t){return l1(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){l1(()=>e.unsubscribe())}}class kre{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Ore=new kre,Nre=new Rre;let t0=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(ig(t))return Ore;if(Aj(t))return Nre;throw function Wc(n,e){return new De(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Ur,16))};static#t=this.\u0275pipe=Go({name:"async",type:n,pure:!1,standalone:!0})}return n})(),to=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({})}return n})();const VU="browser";function ih(n){return n===VU}function UD(n){return"server"===n}class woe extends Oie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class HD extends woe{static makeCurrent(){!function kie(n){ED||(ED=n)}(new HD)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Eoe(){return r0=r0||document.querySelector("base"),r0?r0.getAttribute("href"):null}();return null==t?null:function Aoe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){r0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function kU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let r0=null,Coe=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const GD=new bt("EventManagerPlugins");let $U=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new De(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(it(GD),it(Qt))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();class YU{constructor(e){this._doc=e}}const WD="ng-app-id";let XU=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=UD(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${WD}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(WD),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(WD,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn),it(pf),it(Lb,8),it(Oa))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const $D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},YD=/%COMP%/g,Doe=new bt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function qU(n,e){return e.map(t=>t.replace(YD,n))}let JU=(()=>{class n{constructor(t,i,r,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=UD(a),this.defaultRenderer=new XD(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ls.ShadowDom&&(i={...i,encapsulation:Ls.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof QU?r.applyToHost(t):r instanceof KD&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Ls.Emulated:o=new QU(c,l,i,this.appId,d,s,a,h);break;case Ls.ShadowDom:return new Noe(c,l,t,i,s,a,this.nonce,h);default:o=new KD(c,l,i,d,s,a,h)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(it($U),it(XU),it(pf),it(Doe),it(Jn),it(Oa),it(Qt),it(Lb))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();class XD{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($D[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ZU(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ZU(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new De(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=$D[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=$D[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Tl.DashCase|Tl.Important)?e.style.setProperty(t,i,r&Tl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Tl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=th().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function ZU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Noe extends XD{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=qU(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class KD extends XD{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?qU(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class QU extends KD{constructor(e,t,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,t,i,o,s,a,c,l),this.contentAttr=function Roe(n){return"_ngcontent-%COMP%".replace(YD,n)}(l),this.hostAttr=function koe(n){return"_nghost-%COMP%".replace(YD,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Poe=(()=>{class n extends YU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const eV=["alt","control","meta","shift"],Foe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Loe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Boe=(()=>{class n extends YU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>th().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),eV.forEach(l=>{const d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=Foe[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),eV.forEach(s=>{s!==r&&(0,Loe[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const nV=[{provide:Oa,useValue:VU},{provide:yw,useValue:function joe(){HD.makeCurrent()},multi:!0},{provide:Jn,useFactory:function Voe(){return function OM(n){Fb=n}(document),document},deps:[]}],zoe=K4(iie,"browser",nV),Hoe=new bt(""),iV=[{provide:j1,useClass:class Soe{addToWindow(e){Oi.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new De(5103,!1);return o},Oi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Oi.getAllAngularRootElements=()=>e.getAllRootElements(),Oi.frameworkStabilizers||(Oi.frameworkStabilizers=[]),Oi.frameworkStabilizers.push(i=>{const r=Oi.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?th().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:U4,useClass:cD,deps:[Qt,lD,j1]},{provide:cD,useClass:cD,deps:[Qt,lD,j1]}],rV=[{provide:Rb,useValue:"root"},{provide:Fa,useFactory:function Uoe(){return new Fa},deps:[]},{provide:GD,useClass:Poe,multi:!0,deps:[Jn,Qt,Oa]},{provide:GD,useClass:Boe,multi:!0,deps:[Jn]},JU,XU,$U,{provide:c1,useExisting:JU},{provide:class zU{},useClass:Coe,deps:[]},[]];let Goe=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:pf,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(it(Hoe,12))};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({providers:[...rV,...iV],imports:[to,rie]})}return n})();typeof window<"u"&&window;let o0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:function(i){let r=null;return r=i?new(i||n):it(cV),r},providedIn:"root"})}return n})(),cV=(()=>{class n extends o0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case bo.NONE:return i;case bo.HTML:return oc(i,"HTML")?Hs(i):sy(this._doc,String(i)).toString();case bo.STYLE:return oc(i,"Style")?Hs(i):i;case bo.SCRIPT:if(oc(i,"Script"))return Hs(i);throw new De(5200,!1);case bo.URL:return oc(i,"URL")?Hs(i):wf(String(i));case bo.RESOURCE_URL:if(oc(i,"ResourceURL"))return Hs(i);throw new De(5201,!1);default:throw new De(5202,!1)}}bypassSecurityTrustHtml(t){return function pT(n){return new lT(n)}(t)}bypassSecurityTrustStyle(t){return function iy(n){return new dT(n)}(t)}bypassSecurityTrustScript(t){return function mT(n){return new uT(n)}(t)}bypassSecurityTrustUrl(t){return function gT(n){return new hT(n)}(t)}bypassSecurityTrustResourceUrl(t){return function _T(n){return new fT(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn))};static#t=this.\u0275prov=It({token:n,factory:function(i){let r=null;return r=i?new i:function qoe(n){return new cV(n.get(Jn))}(it(ur)),r},providedIn:"root"})}return n})();const JD={now:()=>(JD.delegate||Date).now(),delegate:void 0};class lg extends Yt{constructor(e=1/0,t=1/0,i=JD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}function qi(n,e,t,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function e2(n,e){return function(t,i){e(t,i,n)}}function fc(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function oh(n){return this instanceof oh?(this.v=n,this):new oh(n)}function fV(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function n2(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const r2=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function pV(n){return ye(n?.then)}function mV(n){return ye(n[Xa])}function gV(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function _V(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const bV=function mse(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yV(n){return ye(n?.[bV])}function vV(n){return function hV(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(m){return new Promise(function(y,E){o.push([f,m,y,E])>1||a(f,m)})})}function a(f,m){try{!function c(f){f.value instanceof oh?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}(i[f](m))}catch(y){h(o[0][3],y)}}function l(f){a("next",f)}function d(f){a("throw",f)}function h(f,m){f(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield oh(t.read());if(r)return yield oh(void 0);yield yield oh(i)}}finally{t.releaseLock()}})}function xV(n){return ye(n?.getReader)}function Oo(n){if(n instanceof Ye)return n;if(null!=n){if(mV(n))return function gse(n){return new Ye(e=>{const t=n[Xa]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(r2(n))return function _se(n){return new Ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(pV(n))return function bse(n){return new Ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Le)})}(n);if(gV(n))return wV(n);if(yV(n))return function yse(n){return new Ye(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(xV(n))return function vse(n){return wV(vV(n))}(n)}throw _V(n)}function wV(n){return new Ye(e=>{(function xse(n,e){var t,i,r,o;return function dV(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=fV(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Vd(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function wo(n,e,t=1/0){return ye(e)?wo((i,r)=>qt((o,s)=>e(i,o,r,s))(Oo(n(i,r))),t):("number"==typeof e&&(t=e),ki((i,r)=>function wse(n,e,t,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},m=E=>l<i?y(E):c.push(E),y=E=>{o&&e.next(E),l++;let M=!1;Oo(t(E,d++)).subscribe(bi(e,H=>{r?.(H),o?m(H):e.next(H)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<i;){const H=c.shift();s?Vd(e,s,()=>y(H)):y(H)}f()}catch(H){e.error(H)}}))};return n.subscribe(bi(e,m,()=>{h=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function cE(n=1/0){return wo(Uo,n)}const Ks=new Ye(n=>n.complete());function EV(n){return n&&ye(n.schedule)}function o2(n){return n[n.length-1]}function AV(n){return ye(o2(n))?n.pop():void 0}function s0(n){return EV(o2(n))?n.pop():void 0}function SV(n,e=0){return ki((t,i)=>{t.subscribe(bi(i,r=>Vd(i,n,()=>i.next(r),e),()=>Vd(i,n,()=>i.complete(),e),r=>Vd(i,n,()=>i.error(r),e)))})}function CV(n,e=0){return ki((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function MV(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ye(t=>{Vd(t,e,()=>{const i=n[Symbol.asyncIterator]();Vd(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function fo(n,e){return e?function Dse(n,e){if(null!=n){if(mV(n))return function Sse(n,e){return Oo(n).pipe(CV(e),SV(e))}(n,e);if(r2(n))return function Mse(n,e){return new Ye(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(pV(n))return function Cse(n,e){return Oo(n).pipe(CV(e),SV(e))}(n,e);if(gV(n))return MV(n,e);if(yV(n))return function Tse(n,e){return new Ye(t=>{let i;return Vd(t,e,()=>{i=n[bV](),Vd(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>ye(i?.return)&&i.return()})}(n,e);if(xV(n))return function Ise(n,e){return MV(vV(n),e)}(n,e)}throw _V(n)}(n,e):Oo(n)}function $c(...n){const e=s0(n),t=function Ase(n,e){return"number"==typeof o2(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Oo(i[0]):cE(t)(fo(i,e)):Ks}function or(n,e){return ki((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(bi(i,c=>{r?.unsubscribe();let l=0;const d=o++;Oo(n(c,d)).subscribe(r=bi(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}const lE={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return lE.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return lE.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let s2;function jse(n,e,t){let i=t;return function kse(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,o)=>!("*"===r||!function Nse(n,e){if(!s2){const t=Element.prototype;s2=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&s2.call(n,e)}(n,r)||(i=o,0))),i}class Vse{constructor(e,t){this.componentFactory=t.get(Dl).resolveComponentFactory(e)}create(e){return new zse(this.componentFactory,e)}}class zse{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new lg(1),this.events=this.eventEmitters.pipe(or(i=>$c(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(Qt),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=lE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function Pse(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=ur.create({providers:[],parent:this.injector}),i=function Bse(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=t.length;o<s;++o){const a=t[o],c=jse(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Ur),this.implementsOnChanges=function Ose(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Qu).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(qt(s=>({name:r,value:s}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=lE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Ex(o,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Hse extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const Wse={initialConfig:{},parse:{},rename:{}};class $se{constructor(e,t){this.configState=e,this.storedChanges={},this.options={...Wse,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,t,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=t.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[s]=a}}let Yse=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new $se(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function qT(){throw new Error("invalid")}()};static#t=this.\u0275dir=Ht({type:n,features:[Lr]})}return n})();const a0_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""};function TV(n,e,t,i,r,o,s){try{var a=n[o](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function jt(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(c){TV(o,i,r,s,a,"next",c)}function a(c){TV(o,i,r,s,a,"throw",c)}s(void 0)})}}function c0(n){return(c0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Ae(n,e,t){return(e=function Kse(n){var e=function Xse(n,e){if("object"!==c0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==c0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===c0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IV(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function Ll(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||IV()}window;const DV=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ll();class Jse{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Ae(this,"storage",void 0),Ae(this,"id",void 0),Ae(this,"config",void 0),this.storage=function qse(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function a2(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const o=n.width*t,s=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let dE;var n;function RV(n){return"string"==typeof n?dE[n.toUpperCase()]||dE.WHITE:n}function uE(n,e){if(!n)throw new Error(e||"Assertion failed")}(n=dE||(dE={}))[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE";const sh={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},hE=sh.window||sh.self||sh.global,l0=sh.process||{};function dg(){let n;var e,t;if(Ll&&"performance"in hE)n=null==hE||null===(e=hE.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in l0){var i;const r=null==l0||null===(i=l0.hrtime)||void 0===i?void 0:i.call(l0);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const ug={debug:Ll&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},rae={enabled:!0,level:0};function pc(){}const kV={},OV={once:!0};class d0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};Ae(this,"id",void 0),Ae(this,"VERSION",DV),Ae(this,"_startTs",dg()),Ae(this,"_deltaTs",dg()),Ae(this,"_storage",void 0),Ae(this,"userData",{}),Ae(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Jse("__probe-".concat(this.id,"__"),rae),this.timeStamp("".concat(this.id," started")),function iae(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(o=>r===o)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((dg()-this._startTs).toPrecision(10))}getDelta(){return Number((dg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){uE(e,t)}warn(e){return this._getLogFunction(0,e,ug.warn,arguments,OV)}error(e){return this._getLogFunction(0,e,ug.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,ug.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,ug.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,t,ug.debug||ug.info,arguments,OV)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||pc,i&&[i],{tag:cae(t)}):pc}image(e){let{logLevel:t,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(t||i)?Ll?function aae(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=a2(o,t,i);console.log(...s)},o.src=e,pc}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...a2(e,t,i)),pc;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...a2(o,t,i)),o.src=e.toDataURL(),pc}return pc}({image:r,message:o,scale:s}):function sae(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),pc}({image:r,message:o,scale:s}):pc}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||pc)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=PV({logLevel:e,message:t,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||pc)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=NV(e)}_getLogFunction(e,t,i,r,o){if(this._shouldLog(e)){o=PV({logLevel:e,message:t,args:r,opts:o}),uE(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=dg();const s=o.tag||o.message;if(o.once){if(kV[s])return pc;kV[s]=dg()}return t=function oae(n,e,t){if("string"==typeof e){const i=t.time?function Qse(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function Zse(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function nae(n,e,t){return!Ll&&"string"==typeof n&&(e&&(e=RV(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=RV(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),i.bind(console,t,...o.args)}return pc}}function NV(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return uE(Number.isFinite(e)&&e>=0),e}function PV(n){const{logLevel:e,message:t}=n;n.logLevel=NV(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return uE("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function cae(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}Ae(d0,"VERSION",DV);const Ei=new d0({id:"deck"}),Ii={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ii,"IDENTITY",{get:()=>(Ei.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Bl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},fE={common:0,meters:1,pixels:2},FV={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},hn=new d0({id:"luma.gl"});function qs(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const dae="Requires WebGL2";function pE(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function mi(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function mE(n){return qs(pE(n),"Invalid WebGLRenderingContext"),n}function Ds(n){return qs(mi(n),dae),n}const h0={};const f0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(f0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const zf=function(e){const t=this;this.gl=e,function mae(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(h0[i]=!0)}while(0!==i);for(i in h0)if(h0[i])return delete h0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:t.currentArrayBuffer=s;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=t.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const f=h.attribs[o];return f.buffer=t.currentArrayBuffer,f.size=s,f.type=a,f.normalized=c,f.stride=l,f.offset=d,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function fae(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};zf.prototype.VERTEX_ARRAY_BINDING_OES=34229,zf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new f0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},zf.prototype.createVertexArrayOES=function(){const e=new f0(this);return this.vertexArrayObjects.push(e),e},zf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},zf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof f0&&e.hasBeenBound&&e.ext===this)},zf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function pae(n,e){h0[n]=!0,void 0!==e&&function hae(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const LV="OES_element_index",BV="WEBGL_draw_buffers",jV="WEBGL_debug_renderer_info",Ar=n=>mi(n)?void 0:0,Cae={3074:n=>mi(n)?void 0:36064,35723:n=>mi(n)?void 0:4352,35977:Ar,32937:Ar,36795:(n,e)=>{const t=mi(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(jV);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(jV);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Ar,35071:Ar,37447:Ar,36063:(n,e)=>{if(!mi(n)){const t=n.getExtension(BV);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Ar,35374:Ar,35377:Ar,34852:n=>{if(!mi(n)){const e=n.getExtension(BV);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(LV)?2147483647:65535,33001:n=>n.getExtension(LV)?16777216:65535,33e3:n=>16777216,37157:Ar,35373:Ar,35657:Ar,36183:Ar,37137:Ar,34045:Ar,35978:Ar,35979:Ar,35968:Ar,35376:Ar,35375:Ar,35659:Ar,37154:Ar,35371:Ar,35658:Ar,35076:Ar,35077:Ar,35380:Ar},UV="ANGLE_instanced_arrays",VV={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{qs(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[UV]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){qs(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{qs(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{qs(!1)},deleteQuery:()=>{qs(!1)},beginQuery:()=>{qs(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},c2={readBuffer:(n,e,t)=>{mi(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:o}=function Oae(n,e){return{webgl2:mi(n),ext:n.getExtension(e)}}(n,UV);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!mi(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>mi(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function Mae(n,e,t){const i=Cae[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function Bae(n,e){let{extension:t,target:i,target2:r}=e;const o=VV[t];qs(o);const{meta:s={}}=o,{suffix:a=""}=s,c=n.getExtension(t);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function Nae(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function gae(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new zf(this)),this.__OESVertexArrayObject))}}(n),function Pae(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function Lae(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&Bae(n,{extension:t,target:n.luma,target2:n})}(n,VV),function Fae(n,e){let{target:t,target2:i}=e;Object.keys(c2).forEach(r=>{if("function"==typeof c2[r]){const o=n[r]?n[r].bind(n):()=>{},s=c2[r].bind(null,n,o);t[r]=s,i[r]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const l2={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},ah=(n,e,t)=>e?n.enable(t):n.disable(t),zV=(n,e,t)=>n.hint(t,e),Ua=(n,e,t)=>n.pixelStorei(t,e);function p0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const Vae={3042:ah,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:ah,2885:(n,e)=>n.cullFace(e),2929:ah,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:ah,35723:zV,36006:(n,e)=>{const t=mi(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:zV,2849:(n,e)=>n.lineWidth(e),32823:ah,32824:"polygonOffset",10752:"polygonOffset",35977:ah,32938:"sampleCoverage",32939:"sampleCoverage",3089:ah,3088:(n,e)=>n.scissor(...e),2960:ah,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:Ua,3317:Ua,37440:Ua,37441:Ua,37443:Ua,3330:Ua,3332:Ua,3331:Ua,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:Ua,32878:Ua,3316:Ua,3315:Ua,32877:Ua,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=p0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=p0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=p0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=p0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,o,s,a)},stencilOp:(n,e)=>{e=p0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,o,s,a)},viewport:(n,e)=>n.viewport(...e)};function io(n,e,t){return void 0!==e[n]?e[n]:t[n]}const zae={blendEquation:(n,e,t)=>n.blendEquationSeparate(io(32777,e,t),io(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(io(32969,e,t),io(32968,e,t),io(32971,e,t),io(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(io(32824,e,t),io(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(io(32938,e,t),io(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,io(2962,e,t),io(2967,e,t),io(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,io(34816,e,t),io(36003,e,t),io(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,io(2964,e,t),io(2965,e,t),io(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,io(34817,e,t),io(34818,e,t),io(34819,e,t))},HV={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},jl=(n,e)=>n.isEnabled(e),GV={3042:jl,2884:jl,2929:jl,3024:jl,32823:jl,32926:jl,32928:jl,3089:jl,2960:jl,35977:jl};function WV(n){for(const e in n)return!1;return!0}function Hae(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function $V(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Gae(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class $ae{constructor(e){let{copyState:t=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function Xae(n,e){if("number"==typeof(e=e||l2)){const r=e,o=GV[r];return o?o(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const o=GV[r];i[r]=o?o(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},l2),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){qs(this.stateStack.length>0),zd(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){qs(void 0!==o);const s=e[o],a=this.cache[o];Hae(s,a)||(t=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:t,oldValue:i}}}function YV(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(qs(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new $ae(n,{copyState:i}),function Wae(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const o in HV)Gae(n,o,HV[o]);$V(n,"getParameter"),$V(n,"isEnabled")}return n.state.enable=t,n}function XV(n){qs(n.state),n.state.pop()}function zd(n,e){if(qs(pE(n),"setParameters requires a WebGL context"),WV(e))return;const t={};for(const r in e){const o=Number(r),s=Vae[r];s&&("string"==typeof s?t[s]=!0:s(n,e[r],o))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,zae[r])(n,e,i)}function mc(n,e,t){if(WV(e))return t(n);const{nocatch:i=!0}=e;let r;if(function Yae(n){n.state||YV(n,{copyState:!1}),n.state.push()}(n),zd(n,e),i)r=t(n),XV(n);else try{r=t(n)}finally{XV(n)}return r}function hg(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function d2(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function Jae(n,e,t,i,r){const o=KV(n[0],e,t);let s=qV(n[1],e,i,r),a=KV(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=qV(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,hg(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function KV(n,e,t){return Math.min(Math.round(n*e),t-1)}function qV(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const u2=Ll(),Zae=u2&&typeof document<"u",JV={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function ZV(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qs(u2,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},JV,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:o}=n,s=function nce(n){let o,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(Zae&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:t,onError:i});return r=function tce(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),o&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,n),r?(r=h2(r,n),function ice(n){const e=mi(n)?"WebGL2":"WebGL1",t=function Qae(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";hn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function h2(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function rce(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},JV,e);const{manageState:t,debug:i}=e;return t&&YV(n,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return hn.log(1,...o)()}}),u2&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),hn.level=Math.max(hn.level,1)):hn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function QV(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class e8{constructor(e,t){Ae(this,"name",void 0),Ae(this,"type",void 0),Ae(this,"sampleSize",1),Ae(this,"time",void 0),Ae(this,"count",void 0),Ae(this,"samples",void 0),Ae(this,"lastTiming",void 0),Ae(this,"lastSampleTime",void 0),Ae(this,"lastSampleCount",void 0),Ae(this,"_count",0),Ae(this,"_time",0),Ae(this,"_samples",0),Ae(this,"_startTime",0),Ae(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=QV(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(QV()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class f2{constructor(e){Ae(this,"id",void 0),Ae(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof e8?e:new e8(t,i)),this.stats[t]}}const m0="8.5.21",Hf=new class ace{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new f2({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==m0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(m0));function Jt(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function p2(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return Jt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function ch(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(Ll()&&hn.log(1,"luma.gl ".concat(m0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:m0,version:m0,log:hn,stats:Hf,globals:{modules:{},nodeIO:{}}}),globalThis;const m2={};function _a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";m2[n]=m2[n]||1;const e=m2[n]++;return"".concat(n,"-").concat(e)}function t8(n){return Jt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function fg(n){let e=!0;for(const t in n){e=!1;break}return e}function n8(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(n);i.forEach(s=>{o.methodName||(o[s]=()=>{throw hn.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const pg="Resource subclass must define virtual methods";class Hd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mE(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||_a(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jt(e=p2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=mi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},o=mi(this.gl),s={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?ch(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=ch(this.gl,s[h]))}}return s}setParameter(e,t){Jt(e=p2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=mi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=p2(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return n8(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(pg)}_deleteHandle(){throw new Error(pg)}_bindHandle(e){throw new Error(pg)}_getOptsFromHandle(){throw new Error(pg)}_getParameter(e,t){throw new Error(pg)}_setParameter(e,t){throw new Error(pg)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=Hf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Hf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Hf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Hf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const cce="Failed to deduce GL constant from typed array";function g2(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(cce)}}function g0(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function dce(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:s,width:r,height:o}}function _2(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";hn.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];hn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];hn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const uce={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},hce={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ba{static getBytesPerElement(e){return g0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Jt(e.size),g0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new ba(uce,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ba.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ba.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=_2("Accessor",e,hce),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const r8={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},fce={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:r8},pce={removedProps:r8};class sr extends Hd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/ba.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/ba.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=_2("Buffer",e,fce),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=_2("Buffer",e,pce))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ba(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Jt(t);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(Ds(this.gl),this.gl.bufferSubData(this.target,i,t,r,o)):this.gl.bufferSubData(s,i,t),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return Ds(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ds(this.gl);const o=g0(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Jt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(Jt(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Jt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=g2(e);return Jt(o),this.setAccessor(new ba(this.accessor,{type:o})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Jt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/g0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ba(this.accessor,{type:g2(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return hn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return hn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return hn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return hn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ba(this.accessor,e),this}}const b2={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},o8={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},s8={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},_ce=[9729,9728],a8=globalThis.WebGLBuffer||function(){};class Gf extends Hd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let o=!0;return i&&(o=o&&function mce(n,e){const t=b2[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=mi(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),o=o&&(!r||function gce(n,e){const t=b2[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,t){const{id:i=_a("texture"),handle:r,target:o}=t;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(K=>this.initialize(Object.assign({},e,{pixels:K,data:K}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;t||(t=r);let{width:h,height:f,dataFormat:m,type:y,compressed:E=!1,mipmaps:M=!0}=e;const{depth:H=0}=e;return({width:h,height:f,compressed:E,dataFormat:m,type:y}=this._deduceParameters({format:o,type:y,dataFormat:m,compressed:E,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=H,this.format=o,this.type=y,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),M&&this._isNPOT()&&(hn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),M=!1,this._updateForNPOT(c)),this.mipmaps=M,this.setImageData({data:t,width:h,height:f,depth:H,format:o,type:y,dataFormat:m,border:s,mipmaps:M,parameters:l,compressed:E}),M&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(hn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),mc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:f=this.height,dataFormat:m=this.dataFormat,compressed:y=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:y,width:h,height:f}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:y,data:l,width:h,height:f}));const{gl:E}=this;E.bindTexture(this.target,this.handle);let M=null;({data:l,dataType:M}=this._getDataType({data:l,compressed:y}));let H,K=0;return mc(this.gl,c,()=>{switch(M){case"null":E.texImage2D(t,r,o,h,f,s,m,d,l);break;case"typed-array":E.texImage2D(t,r,o,h,f,s,m,d,l,a);break;case"buffer":H=Ds(E),H.bindBuffer(35052,l.handle||l),H.texImage2D(t,r,o,h,f,s,m,d,a),H.bindBuffer(35052,null);break;case"browser-object":mi(E)?E.texImage2D(t,r,o,h,f,s,m,d,l):E.texImage2D(t,r,o,m,d,l);break;case"compressed":for(const[de,Ie]of l.entries())E.compressedTexImage2D(t,de,Ie.format,Ie.width,Ie.height,s,Ie.data),K+=Ie.levelSize;break;default:Jt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===M?K:l&&l.byteLength?l.byteLength:this.width*this.height*(o8[this.dataFormat]||4)*(s8[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:m=!1,offset:y=0,border:E=this.border,parameters:M={}}=e;if(({type:h,dataFormat:f,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:f,compressed:m,data:r,width:a,height:c})),Jt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const H=r;r=H.data,a=H.shape[0],c=H.shape[1]}r instanceof sr&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),mc(this.gl,M,()=>{if(m)this.gl.compressedTexSubImage2D(t,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(t,l,o,s,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,o,s,a,c,f,h,r,y);else if(r instanceof a8){const H=Ds(this.gl);H.bindBuffer(35052,r),H.texSubImage2D(t,l,o,s,a,c,f,h,y),H.bindBuffer(35052,null)}else mi(this.gl)?Ds(this.gl).texSubImage2D(t,l,o,s,a,c,f,h,r):this.gl.texSubImage2D(t,l,o,s,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return hn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof sr?{data:t.handle,dataType:"buffer"}:t instanceof a8?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=b2[t];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},Jt(r,"Could not deduced texture size"),Jt(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Jt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Jt(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(mi(this.gl)||!this.width||!this.height||t8(this.width)&&t8(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===_ce.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function bce(n,e){return Jt("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class hs extends Gf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Gf.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mE(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:bce(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Wf="EXT_color_buffer_float",c8={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Wf,bpp:2},33327:{gl2:Wf,bpp:4},34842:{gl2:Wf,bpp:8},33326:{gl2:Wf,bpp:4},33328:{gl2:Wf,bpp:8},34836:{gl2:Wf,bpp:16},35898:{gl2:Wf,bpp:4}};class mg extends Hd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function yce(n,e,t){const i=t[e];if(!i)return!1;const r=mi(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,c8)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:o=0}=e;return Jt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&mi(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*c8[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const l8=6144,f8="clear: bad arguments";function v2(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;t&&(s|=16384,!0!==t&&(o.clearColor=t)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Jt(0!==s,f8),mc(n,o,()=>{n.clear(s)})}const x2=[34069,34070,34071,34072,34073,34074];let Sce=(()=>{class n extends Gf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mE(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return jt(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t;const{gl:h}=i,f=s||a,m=yield Promise.all(x2.map(y=>{const E=f[y];return Promise.all(Array.isArray(E)?E:[E])}));i.bind(),x2.forEach((y,E)=>{m[E].length>1&&!1!==i.opts.mipmaps&&hn.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[E].forEach((M,H)=>{r&&o?h.texImage2D(y,H,l,r,o,c,l,d,M):h.texImage2D(y,H,l,l,d,M)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t,{gl:h}=this,f=s||a;return this.bind(),f instanceof Promise?f.then(m=>this.setImageDataForFace(Object.assign({},t,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,f):h.texImage2D(i,0,l,l,d,f),this}}return n.FACES=x2,n})();class Cce extends Gf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return mi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ds(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),mc(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,h),h instanceof sr&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(o8[this.dataFormat]||4)*(s8[this.type]||1),"Texture"),this.loaded=!0,this}}function Tce(n,e){const{gl:t,width:i,height:r,id:o}=n;return new Eo(t,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:n}}))}function gE(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=_0(n);Jt(d);const{gl:f,handle:m,attachments:y}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Jt(y[o]),l=l||y[o].type,s=function Dce(n,e,t,i,r){if(n)return n;const o=g0(e=e||5121,{clamped:!1}),s=function Ace(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Jt(!1),0}}(t);return new o(i*r*s)}(s,l,r,a,c),l=l||g2(s);const E=f.bindFramebuffer(36160,m);return f.readPixels(t,i,a,c,r,l,s),f.bindFramebuffer(36160,E||null),h&&d.delete(),s}function w2(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=gE(n,{sourceAttachment:e}),{width:r,height:o}=n;for(;o>t;)({data:i,width:r,height:o}=dce({data:i,width:r,height:o}));!function lce(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:o}=n;const s=t*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function _0(n){return n instanceof Eo?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Tce(n),deleteFramebuffer:!0}}const p8="Multiple render targets not supported";class Eo extends Hd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Eo(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ds(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ds(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Jt(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:t,height:i})}else r=this._createDefaultAttachments(o,s,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(t,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return Jt(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&hn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Jt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof mg)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,f=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function kce(n){return(Eo.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&v2(this.gl,{color:t,depth:i,stencil:r}),o.forEach((a,c)=>{!function Ece(n){let{framebuffer:e=null,buffer:t=l8,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ds(n),mc(n,{framebuffer:e},()=>{switch(t){case l8:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;n.clearBufferfi(34041,0,o,s);break;default:Jt(!1,f8)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return hn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return hn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return hn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return hn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return hn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return hn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:o,height:s}=e;const a=Ds(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ch(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[t?ch(this.gl,o):o]=this.getAttachmentParameter(e,o,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const o=Number(r);i[e?ch(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(w2(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>hn.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=w2(this,{targetMaxHeight:100});return hn.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new hs(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),t&&i?(s=s||{},s[33306]=new mg(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):t?(s=s||{},s[36096]=new mg(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Jt(!1),s}_unattach(e){const t=this.attachments[e];t&&(t instanceof mg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:Ds(s).framebufferTextureLayer(36160,t,i.target,o,r);break;case 34067:const c=function Rce(n){return n<34069?n+34069:n}(r);s.framebufferTexture2D(36160,t,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,t,3553,i.handle,o);break;default:Jt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function uae(n){return mi(n)?n:null}(this.gl);t?t.readBuffer(e):Jt(36064===e||1029===e,p8),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=Ds(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Jt(1===e.length&&(36064===e[0]||1029===e[0]),p8)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function Fce(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in m8)void 0===n.luma.caps[e]&&(n.luma.caps[e]=_8(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Eo.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const m8={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Nce(n){const e=new hs(n,{format:6408,type:5126,dataFormat:6408}),t=new Eo(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Pce=2;function E2(n,e){return g8(n,e)}function g8(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>_8(n,t))}function _8(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function Lce(n,e){const t=m8[e];let i;Jt(t,e);const r=mi(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!n.getExtension(o)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:Jt(!1);return i}(n,e)),n.luma.caps[e]||hn.log(Pce,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}class A2{constructor(e,t){Ae(this,"opts",void 0),Ae(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=t.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const b0=new class jce{constructor(e={}){Ae(this,"_pool",[]),Ae(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=t*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const f=this._allocate(l,d,a,h);return e&&s?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,o=t.findIndex(s=>s.byteLength>=r);o<0?t.push(i):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,i),t.length>this.opts.poolSize&&t.shift()}},Uce=1/Math.PI*180,Vce=1/180*Math.PI,po={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function zce(n,{precision:e=po.precision}={}){return n=function Yce(n){return Math.round(n/po.EPSILON)*po.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Gd(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function b8(n){return function Gce(n,e){return Wd(n,t=>t*Vce,e)}(n)}function Hce(n){return function Wce(n,e){return Wd(n,t=>t*Uce,e)}(n)}function Yr(n,e,t){return Wd(n,i=>Math.max(e,Math.min(t,i)))}function _E(n,e,t){return Gd(n)?n.map((i,r)=>_E(i,e[r],t)):t*e+(1-t)*n}function gg(n,e,t){const i=po.EPSILON;t&&(po.EPSILON=t);try{if(n===e)return!0;if(Gd(n)&&Gd(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!gg(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=po.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{po.EPSILON=i}}function Wd(n,e,t){if(Gd(n)){const i=n;t=t||function Xce(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}class bE extends(function Kce(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Gd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(po)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+zce(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!gg(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(po.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function gi(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function yE(n,e,t=""){if(po.debug&&!function qce(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}function v8(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class x8 extends bE{get x(){return this[0]}set x(e){this[0]=gi(e)}get y(){return this[1]}set y(e){this[1]=gi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return gi(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return gi(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return v8(e>=0&&e<this.ELEMENTS,"index is out of range"),gi(this[e])}setComponent(e,t){return v8(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Ul=1e-6,ya=typeof Float32Array<"u"?Float32Array:Array;function w8(){var n=new ya(3);return ya!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function E8(n,e,t){var i=new ya(3);return i[0]=n,i[1]=e,i[2]=t,i}function A8(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function vE(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function S2(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s,n}function S8(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,y=o*d-i*f,E=i*h-r*d,M=2*t[3];return h*=M,f*=M,y*=2,E*=2,n[0]=a+(d*=M)+(m*=2),n[1]=c+h+y,n[2]=l+f+E,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function C8(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;return n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s,n}w8();const C2=[0,0,0];let xE;class Rs extends x8{static get ZERO(){return xE||(xE=new Rs(0,0,0),Object.freeze(xE)),xE}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Gd(e)?this.copy(e):(po.debug&&(gi(e),gi(t),gi(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return po.debug&&(gi(e.x),gi(e.y),gi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=gi(e)}angle(e){return function sle(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&A8(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return vE(this,this,e),this.check()}rotateX({radians:e,origin:t=C2}){return function ile(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=C2}){return function rle(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=C2}){return function ole(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return S2(this,this,e),this.check()}transformAsVector(e){return C8(this,this,e),this.check()}transformByMatrix3(e){return function nle(n,e,t){var i=e[0],r=e[1],o=e[2];n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function dle(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return S8(this,this,e),this.check()}}const M8=new Rs;function _g(n,e,t,i){M8.set(n,e,t);const r=M8.len();return{distance:i/r,normal:new Rs(-n/r,-e/r,-t/r)}}function gle(n){return n-Math.fround(n)}let v0;function M2(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,o=(r-i)/t;v0=b0.allocate(v0,o,{type:Float32Array,size:2*t});let s=i,a=0;for(;s<r;){for(let c=0;c<t;c++){const l=n[s++];v0[a+c]=l,v0[a+c+t]=gle(l)}a+=2*t}return v0.subarray(0,o*t*2)}function wE(n){return n.stride||n.size*n.bytesPerElement}function T8(n,e){e.offset&&Ei.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=wE(n),o=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:o,stride:t}}class ble{constructor(e,t,i){Ae(this,"gl",void 0),Ae(this,"id",void 0),Ae(this,"size",void 0),Ae(this,"settings",void 0),Ae(this,"value",void 0),Ae(this,"doublePrecision",void 0),Ae(this,"_buffer",void 0),Ae(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,o=5130===r;let a,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&t.isIndexed?e&&E2(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function Bce(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new sr(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*wE(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),b0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function _le(n,e){const t=T8(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new A2(this,o.high),i["".concat(e,"64Low")]=r?new A2(this,o.low):new Float32Array(this.size),i}if(t){const i=T8(this.getAccessor(),t);return{[e]:new A2(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,o=i*r;if(t&&o&&t.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=t[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof sr?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),t.constant&&this._areValuesEqual(o,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;t.externalBuffer=o,t.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=wE(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;t.externalBuffer=null,t.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=wE(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=M2(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?M2(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,o=b0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),t&&r&&s.subData({data:r instanceof Float64Array?M2(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Ei.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(o){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)t[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}function fs(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const I8=[],D8=[];function EE(n,e=0,t=1/0){let i=I8;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(D8.length=n.length,i=D8):i=I8,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function R8(n){return n&&n[Symbol.asyncIterator]}function T2(n,e=(()=>!0)){return Array.isArray(n)?k8(n,e,[]):e(n)?[n]:[]}function k8(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?k8(r,e,t):e(r)&&t.push(r)}return t}function vle({target:n,source:e,start:t=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=t;s<r;s++)n[a++]=e[s];for(;s<o;)s<o-s?(n.copyWithin(t+s,t,t+s),s*=2):(n.copyWithin(t+s,t,t+o-s),s=o);return n}const xle=[],AE=[[0,1/0]];function I2(n){const{source:e,target:t,start:i=0,size:r,getData:o}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)t[i+l]=d[h]||0,l++}}const Ale={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function O8(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...Ale[t],...e,...n,type:t}}function N8(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function P8(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function F8(n){n.push(n.shift())}function D2(n,e){const{doublePrecision:t,settings:i,value:r,size:o}=n,s=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function L8({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*s,c=t.byteOffset,l=t.startIndices,d=r&&l,h=D2(t,e),f=t.isConstant;if(!d&&i>=h)return;const m=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const H=o;o=(K,de)=>t.normalizeConstant(H(K,de))}const y=f?(H,K)=>o(m,K):(H,K)=>o(m.subarray(H,H+a),K),E=n.getData({length:i}),M=new Float32Array(h);(function Ele({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return I2({source:n,target:e,size:t,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*t,f=o[d]*t;I2({source:n.subarray(s,h),target:e,start:a,end:f,size:t,getData:c}),s=h,a=f}a<e.length&&I2({source:[],target:e,start:a,size:t,getData:c})})({source:E,target:M,sourceStartIndices:r,targetStartIndices:l,size:a,getData:y}),n.byteLength<M.byteLength+c&&n.reallocate(M.byteLength+c),n.subData({data:M,offset:c})}class R2 extends ble{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:AE}),Ae(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return O8(Array.isArray(t)?e[t.find(o=>e[o])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function wle(n,e){if(n===AE||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let o=0;o<i;o++){const s=n[o];s[1]<e[0]?(t.push(s),r=o+1):s[0]>e[1]?t.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=AE}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=xle}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==AE),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:t,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return fs(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function yle(n,e){const{size:t,stride:i,offset:r,startIndices:o,nested:s}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,d=Math.floor((n.length-l)/c);return(h,{index:f,target:m})=>{if(!o){const H=f*c+l;for(let K=0;K<t;K++)m[K]=n[H+K];return m}const y=o[f],E=o[f+1]||d;let M;if(s){M=new Array(E-y);for(let H=y;H<E;H++){const K=H*c+l;m=new Array(t);for(let de=0;de<t;de++)m[de]=n[K+de];M[H-y]=m}}else if(c===t)M=n.subarray(y*t+l,E*t+l);else{M=new n.constructor((E-y)*t);let H=0;for(let K=y;K<E;K++){const de=K*c+l;for(let Ie=0;Ie<t;Ie++)M[H++]=n[de+Ie]}}return M}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:t,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:f,transform:m}=a,y=c.binaryAccessor||("function"==typeof f?f:o[f]);fs("function"==typeof y,'accessor "'.concat(f,'" is not a function'));let E=e.getVertexOffset(i);const{iterable:M,objectInfo:H}=EE(t,i,r);for(const K of M){H.index++;let de=y(K,H);if(m&&(de=m.call(this,de)),h){const Ie=(H.index<h.length-1?h[H.index+1]:s)-h[H.index];if(de&&Array.isArray(de[0])){let Fe=E;for(const Xe of de)e._normalizeValue(Xe,l,Fe),Fe+=d}else de&&de.length>d?l.set(de,E):(e._normalizeValue(de,H.target,0),vle({target:l,source:H.target,start:E,count:Ie}));E+=Ie*d}else e._normalizeValue(de,l,E),E+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let k2={};function ks(n,e,t,i){Ei.level>0&&k2[n]&&k2[n].call(null,e,t,i)}function Va(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const B8="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Mle="#version 300 es\n".concat(B8);function j8(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,o]=t;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function U8(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?Mle:e>300?"#version ".concat(e,"\n").concat(B8):"void main() {gl_FragColor = vec4(0);}";const o=function Dle(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return Va(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class V8 extends Hd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return mi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ds(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,fg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(t);return i<0?(this.unused[e]=r,hn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof sr?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const o=t&&t.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Rle{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof sr?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Jt(mi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=t[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new V8(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];t[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Jt(i[o]instanceof sr)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new sr(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function z8(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const x0="vs",Nle={[x0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},SE="__LUMA_INJECT_DECLARATIONS__",H8=/void\s+main\s*\([^)]*\)\s*\{\n?/,G8=/}\n?[^{}]*$/,N2=[];function W8(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===x0;for(const o in t){const s=t[o];s.sort((c,l)=>c.order-l.order),N2.length=s.length;for(let c=0,l=s.length;c<l;++c)N2[c]=s[c].injection;const a="".concat(N2.join("\n"),"\n");switch(o){case"vs:#decl":r&&(n=n.replace(SE,a));break;case"vs:#main-start":r&&(n=n.replace(H8,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(G8,c=>a+c));break;case"fs:#decl":r||(n=n.replace(SE,a));break;case"fs:#main-start":r||(n=n.replace(H8,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(G8,c=>a+c));break;default:n=n.replace(o,c=>c+a)}}return n=n.replace(SE,""),i&&(n=n.replace(/\}\s*$/,o=>o+Nle[e])),n}function P2(n){const e={};return Va(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}const Ple={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},CE="transform_uSize_",$8="transform_position";const Hle={10241:9728,10240:9728,10242:33071,10243:33071};class Wle{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function Ble(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let o,s;t&&(({width:o,height:s}=i),r["".concat(CE).concat(t)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(CE).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=gE(t);if(!e)return i;const r=i.constructor,o=function Ile(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Va(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof hs)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new sr(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new Eo(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(Hle)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function Mce(n,e){Jt(n instanceof hs||n instanceof Sce||n instanceof Cce);const t=n.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=n;return new t(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function Lle(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,s=Object.keys(t).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((m,y,E)=>{if(s>0){const M=function zle(n,e){const t={},i=function jle(n){return j8(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Ule(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(CE).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(o),d=function Tle(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Va(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return t[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(m,t);if(M){const{updatedLine:H,inject:K}=M;f[y]=H,d=P2([d,K]),Object.assign(c,M.samplerTextureMap),s--}}i&&!a&&(a=function Vle(n,e){const t=j8(n,["varying","out"]);return t&&t.name===e?t.type:null}(m,i))}),i){Jt(r);const m="".concat(CE).concat(i),y="uniform vec2 ".concat(m,";\n"),E="     vec2 ".concat($8," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat($8,", 0, 1.);\n");d=P2([d,{"vs:#decl":y,"vs:#main-start":E}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=P2([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||U8({version:z8(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Ple].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const F2={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function Yle(n){let e=Y8(n);return"object"===e?n?"type"in n?Object.assign({},n,F2[n.type]):"value"in n?(e=Y8(n.value),Object.assign({type:e},n,F2[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},F2[e])}function Y8(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class L2{constructor(e){let{name:t,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:f}=e;Va("string"==typeof t),this.name=t,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function qle(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(d),s&&(this.uniforms=function $le(n){const e={};for(const t in n){const r=Yle(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Va(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&Va(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=o.value}return t}}function Jle(n){return function X8(n){const e={},t={};return B2({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(K8(n))}function B2(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<t)&&(r[o.name]=t);for(const o of e)o.dependencies&&B2({modules:o.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function K8(n,e){return n.map(t=>(t instanceof L2||(Va("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Va(t.name,"shader module has no name"),(t=new L2(t)).dependencies=K8(t.dependencies)),t))}const Qle=7936,ede=7937,tde=7938,nde=35724,j2={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},$f={};function ode(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(j2).forEach(n=>{$f[n]=n});const U2={};function q8(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=j2[e];if(Va(i,e),!function Zle(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in U2)return U2[e];const o=t.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,s),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),U2[e]=c,c}function ME(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function sde(n,e){const t=j2[e];Va(t,e);const i=function ide(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return Va(!1===r||!0===r),r}(n,t))}function bg(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const J8=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],lde=[...J8,[bg("attribute"),"in $1"],[bg("varying"),"out $1"]],dde=[...J8,[bg("varying"),"in $1"]],Z8=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],ude=[...Z8,[bg("in"),"attribute $1"],[bg("out"),"varying $1"]],hde=[...Z8,[bg("in"),"varying $1"]],V2="gl_FragColor",z2=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,fde=/void\s+main\s*\([^)]*\)\s*\{\n?/;function TE(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const _de="\n\n".concat(SE,"\n\n"),Q8={[x0]:"vertex",fs:"fragment"};function e6(n,e){let{id:t,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;Va("string"==typeof i,"shader source must be a string");const f=r===x0,m=i.split("\n");let y=100,E="",M=i;0===m[0].indexOf("#version ")?(y=300,E=m[0],M=m.slice(1).join("\n")):E="#version ".concat(y);const H={};o.forEach(lt=>{Object.assign(H,lt.getDefines())}),Object.assign(H,s);let K=d?"".concat(E,"\n").concat(function wde(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(Q8[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function xde(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(Q8[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function ade(n){switch(function rde(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Qle),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||ede);return{gpuVendor:ode(t,i),vendor:t,renderer:i,version:n.getParameter(tde),shadingLanguageVersion:n.getParameter(nde)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function cde(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return ME(n,$f.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),ME(n,$f.GLSL_DERIVATIVES)&&q8(n,$f.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),ME(n,$f.GLSL_FRAG_DATA)&&q8(n,$f.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),ME(n,$f.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function Ede(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(H),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(E,"\n");const de=function Sde(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,o]=t.split(":"),s=t.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),Ie={},Fe={},Xe={};for(const lt in c){const gt="string"==typeof c[lt]?{injection:c[lt],order:0}:c[lt],mt=lt.match(/^(v|f)s:(#)?([\w-]+)$/);mt?mt[2]?"decl"===mt[3]?Fe[lt]=[gt]:Xe[lt]=[gt]:Ie[lt]=[gt]:Xe[lt]=[gt]}for(const lt of o){h&&lt.checkDeprecations(M,h),K+=lt.getModuleSource(r,y);const mt=lt.injections[r];for(const pt in mt){const yt=pt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const dt="decl"===yt[2]?Fe:Xe;dt[pt]=dt[pt]||[],dt[pt].push(mt[pt])}else Ie[pt]=Ie[pt]||[],Ie[pt].push(mt[pt])}}return K+=_de,K=W8(K,r,Fe),K+=function Ade(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)t+="  ".concat(s.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(de[r],Ie),K+=M,K=W8(K,r,Xe),K=function pde(n,e,t){switch(e){case 300:return t?TE(n,lde):function mde(n){const e=(n=TE(n,dde)).match(z2);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(V2,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(fde,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(V2,"\\b"),"g"),t)}return n}(n);case 100:return t?TE(n,ude):function gde(n){const e=(n=TE(n,hde)).match(z2);if(e){const t=e[1];n=n.replace(z2,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),V2)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}(K,l?100:y,f),K}function vde(n){return function(t){const i={};for(const r of n){const o=r.getUniforms(t,i);Object.assign(i,o)}return i}}const Cde={5126:Ir.bind(null,"uniform1fv",za,1,Os),35664:Ir.bind(null,"uniform2fv",za,2,Os),35665:Ir.bind(null,"uniform3fv",za,3,Os),35666:Ir.bind(null,"uniform4fv",za,4,Os),5124:Ir.bind(null,"uniform1iv",lh,1,Os),35667:Ir.bind(null,"uniform2iv",lh,2,Os),35668:Ir.bind(null,"uniform3iv",lh,3,Os),35669:Ir.bind(null,"uniform4iv",lh,4,Os),35670:Ir.bind(null,"uniform1iv",lh,1,Os),35671:Ir.bind(null,"uniform2iv",lh,2,Os),35672:Ir.bind(null,"uniform3iv",lh,3,Os),35673:Ir.bind(null,"uniform4iv",lh,4,Os),35674:Ir.bind(null,"uniformMatrix2fv",za,4,$d),35675:Ir.bind(null,"uniformMatrix3fv",za,9,$d),35676:Ir.bind(null,"uniformMatrix4fv",za,16,$d),35678:ps,35680:ps,5125:Ir.bind(null,"uniform1uiv",IE,1,Os),36294:Ir.bind(null,"uniform2uiv",IE,2,Os),36295:Ir.bind(null,"uniform3uiv",IE,3,Os),36296:Ir.bind(null,"uniform4uiv",IE,4,Os),35685:Ir.bind(null,"uniformMatrix2x3fv",za,6,$d),35686:Ir.bind(null,"uniformMatrix2x4fv",za,8,$d),35687:Ir.bind(null,"uniformMatrix3x2fv",za,6,$d),35688:Ir.bind(null,"uniformMatrix3x4fv",za,12,$d),35689:Ir.bind(null,"uniformMatrix4x2fv",za,8,$d),35690:Ir.bind(null,"uniformMatrix4x3fv",za,12,$d),35678:ps,35680:ps,35679:ps,35682:ps,36289:ps,36292:ps,36293:ps,36298:ps,36299:ps,36300:ps,36303:ps,36306:ps,36307:ps,36308:ps,36311:ps},Mde={},Tde={},Ide={},t6=[0];function H2(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(t6[0]=n,n=t6);const r=n.length;if(r%e&&hn.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let o=i[r];o||(o=new t(r),i[r]=o);for(let s=0;s<r;s++)o[s]=n[s];return o}function za(n,e){return H2(n,e,Float32Array,Mde)}function lh(n,e){return H2(n,e,Int32Array,Tde)}function IE(n,e){return H2(n,e,Uint32Array,Ide)}function n6(n,e,t){const i=Cde[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function Dde(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function kde(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function Nde(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Gf||n instanceof mg)||n instanceof Eo&&!!n.texture}function Ode(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,o=t.length;r<o;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function ps(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Ir(n,e,t,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,t),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Jt(o===d,"Uniform length cannot change.");for(let f=0;f<d;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(s,n,a,l),r.set(l)),h}}function Os(n,e,t,i){n[e](t,i)}function $d(n,e,t,i){n[e](t,!1,i)}function DE(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function r6(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const o=n[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();t+=o6("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function o6(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class w0 extends Hd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Jt(!1),"unknown"}}constructor(e,t){mE(e),Jt("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:DE(t.source,null)||t.id||_a("unnamed ".concat(w0.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=DE(t,null);i&&(this.id=_a(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(w0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return DE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function i6(n,e,t,i){const r=n.split(/\r?\n/),o={},s={},a=i||DE(e)||"(unnamed)",c="".concat(function Lde(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const f=h.split(":"),m=f[0],y=parseInt(f[2],10);if(isNaN(y))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==m?o[y]=h:s[y]=h}const l=function Bde(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return o6(a,r-a.length)+t+o})}(e);return{shaderName:c,errors:r6(o,l),warnings:r6(s,l)}}(i,this.source,this.shaderType,this.id);throw hn.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),hn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class G2 extends w0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class W2 extends w0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Ude=5120,Vde=5121,zde=5122,Hde=5123,No=5126,E0=5124,A0=5125,$2={[No]:[No,1,"float"],35664:[No,2,"vec2"],35665:[No,3,"vec3"],35666:[No,4,"vec4"],[E0]:[E0,1,"int"],35667:[E0,2,"ivec2"],35668:[E0,3,"ivec3"],35669:[E0,4,"ivec4"],[A0]:[A0,1,"uint"],36294:[A0,2,"uvec2"],36295:[A0,3,"uvec3"],36296:[A0,4,"uvec4"],35670:[No,1,"bool"],35671:[No,2,"bvec2"],35672:[No,3,"bvec3"],35673:[No,4,"bvec4"],35674:[No,8,"mat2"],35685:[No,8,"mat2x3"],35686:[No,8,"mat2x4"],35675:[No,12,"mat3"],35687:[No,12,"mat3x2"],35688:[No,12,"mat3x4"],35676:[No,16,"mat4"],35689:[No,16,"mat4x2"],35690:[No,16,"mat4x3"]};function u6(n){const e=$2[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function h6(n,e){switch(n){case Ude:case Vde:case zde:case Hde:n=No}for(const t in $2){const[i,r,o]=$2[t];if(i===n&&r===e)return{glType:t,name:o}}return null}class fue{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!mi(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,t,i,r){const{type:o,components:s}=u6(i),a={type:o,size:r*s};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new ba(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:o,components:s}=u6(i),c={location:e,name:t,accessor:new ba({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const pue=35981,mue=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class p6 extends Hd{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",mue),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:o,bufferMode:s=pue}=e;return this.hash=t||"",this.vs="string"==typeof i?new G2(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new W2(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Jt(this.vs instanceof G2),Jt(this.fs instanceof W2),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Ds(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new fue(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:f=null,transformFeedback:m,framebuffer:y,parameters:E={},uniforms:M,samplers:H}=e;if((M||H)&&(hn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(M||{})),hn.priority>=t){const K=y?y.id:"default",de="mode=".concat(ch(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(ch(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(K);hn.log(t,de)()}return Jt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(f.bindForDraw(r,d,()=>{if(void 0!==y&&(E=Object.assign({},E,{framebuffer:y})),m){const K=function d6(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Jt(!1),0}}(i);m.begin(K)}this._bindTextures(),mc(this.gl,E,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&mi(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hn.priority>=2&&function Rde(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!kde(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let o=i,s=!1;if(o instanceof Eo&&(o=o.texture),o instanceof Gf)if(s=this.uniforms[t]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[t]=a}else o=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(o)||s)&&Ode(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new G2({handle:r});break;case 35632:i.fs=new W2({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=_a(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),hn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),hn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||hn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=Dde(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=n6(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=n6(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class S0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new S0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(t),h=this._getHash(i),f=l.map(de=>this._getHash(de.name)).sort(),m=s.map(de=>this._getHash(de)),y=Object.keys(r).sort(),E=Object.keys(o).sort(),M=[],H=[];for(const de of y)M.push(this._getHash(de)),M.push(this._getHash(r[de]));for(const de of E)H.push(this._getHash(de)),H.push(this._getHash(o[de]));const K="".concat(d,"/").concat(h,"D").concat(M.join("/"),"M").concat(f.join("/"),"I").concat(H.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[K]){const de=function yde(n,e){const{vs:t,fs:i}=e,r=Jle(e.modules||[]);return{gl:n,vs:e6(n,Object.assign({},e,{source:t,type:x0,modules:r})),fs:e6(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:vde(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[K]=new p6(this.gl,{hash:K,vs:de.vs,fs:de.fs,varyings:s,bufferMode:a}),this._getUniforms[K]=de.getUniforms||(Ie=>{}),this._useCounts[K]=0}return this._useCounts[K]++,this._programCache[K]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;t[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}let kE=null;const OE=globalThis;function m6(n){if(!n&&!Ll())return"Node";if(IV(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":OE.chrome?"Chrome":OE.safari?"Safari":OE.mozInnerScreenX?"Firefox":"Unknown"}class Ha extends Hd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||mi(e)||"Chrome"===m6()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ha(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ha.MAX_ATTRIBUTES=Ha.MAX_ATTRIBUTES||e.getParameter(34921),Ha.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Ha._setConstantFloatArray(e,t,i);break;case Int32Array:Ha._setConstantIntArray(e,t,i);break;case Uint32Array:Ha._setConstantUintArray(e,t,i);break;default:Jt(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ha.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Jt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(Jt(mi(h)),f.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,d||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Ha.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new sr(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function _ue(n,e){const t=function gue(n){return(!kE||kE.byteLength<n)&&(kE=new ArrayBuffer(n)),kE}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,o);(function bue(n){let{target:e,source:t,start:i=0,count:r=1}=n;const o=t.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=t[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:Jt(!1)}}static _setConstantIntArray(e,t,i){switch(Jt(mi(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:Jt(!1)}}static _setConstantUintArray(e,t,i){switch(Jt(mi(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:Jt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return Jt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const xue=/^(.+)__LOCATION_([0-9]+)$/,wue=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Eue{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ha(e),n8(this,"VertexArray","v6.0",wue),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,o)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new sr(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof sr&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof sr&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=t,hn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=ba.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:f}=d;return Jt(Number.isFinite(h)&&Number.isFinite(f)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=xue.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof sr)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof sr)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof sr))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,t){if(Ha.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Ha.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof sr){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return hn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function C0(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function Aue(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let s=0;s<n.length&&s<t;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=C0(n[s],e);const o=n.length>t?"...":"]";return"".concat(r).concat(o)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function g6(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(t&&(o=t.type,s=t.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof sr){const f=e,{data:m,changed:y}=f.getDebugData();let E;return d=y?"*":"",h=m,c=f.byteLength,a=c/m.BYTES_PER_ELEMENT/s,t?E="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(ch(r,o),")"):(l=!0,E="".concat(c," bytes")),{[i]:"".concat(d).concat(C0(h,{size:s,isInteger:l})),"Format ":E}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(C0(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function Cue(n,e){const{type:t,size:i}=e,r=h6(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function _6(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;Jt(t);const s=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&Y2({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&Y2({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||Y2({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const f={};if(!r)for(const m in i){const y=i[m];c[m]||(h++,f[m]={Type:"NOT USED: ".concat(y),[e]:C0(y)})}return{table:c,count:d,unusedTable:f,unusedCount:h}}function Y2(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:o}=n;const s=i[r],a=function Mue(n){return null!=n}(s);return!(o&&a||(e[r]={[t]:a?C0(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function b6(n){const{type:e,size:t}=n.accessor,i=h6(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const Iue={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Rue(n,e){const{attributeMap:t=Iue}=e||{};return t&&t[n]||n}function kue(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Jt(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const y6=()=>{},Pue={};class wg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=_a("model")}=t;Jt(pE(e)),this.id=i,this.gl=e,this.id=t.id||_a("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||S0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Jt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Jt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Jt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function Due(n,e,t){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=Rue(o,t);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new sr(n,c),l],kue(o,l)}}if(r){const o=r.value||r;Jt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new sr(n,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(fg(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return v2(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(t),this.setUniforms(r),hn.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:f=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:y=d.isInstanced}=this.props;y&&!this.isInstanced&&hn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:E,instanceCount:M}=this,{onBeforeRender:H=y6,onAfterRender:K=y6}=this.props;H(),this.program.setUniforms(this.uniforms);const de=this.program.draw(Object.assign(Pue,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:f,isInstanced:E,instanceCount:M,offset:h?m:0}));return K(),hn.priority>=2&&this._logDrawCallEnd(l,c,i),de}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),t&&(o=Object.assign({},o,{35977:t})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Jt(t instanceof p6,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Eue(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof sr&&t.delete()}}_setAnimationProps(e){this.animated&&Jt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(fg(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new V8(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),hn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:hn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const o=function Sue(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=g6(e,e.elements,null,t));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(Cue(s.name,c))),i[a]=g6(e,r[o],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=_6({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=_6({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&hn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&hn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Tue(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=b6(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=b6(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);hn.table(e,o)(),hn.table(e,s)(),hn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),hn.groupEnd(2)()}}class X2{static isSupported(e){return mi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();Jt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new wg(t,Object.assign({},e,{fs:e.fs||U8({version:z8(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function Fue(n){return!(fg(n.feedbackBuffers)&&fg(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new Rle(e,t)),function Lue(n){return!(fg(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new Wle(e,t)),Jt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}class M0{constructor(e){Ae(this,"_inProgress",void 0),Ae(this,"_handle",void 0),Ae(this,"_timeline",void 0),Ae(this,"time",void 0),Ae(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Wue={interpolation:class Bue{constructor({gl:e,attribute:t,timeline:i}){Ae(this,"gl",void 0),Ae(this,"type","interpolation"),Ae(this,"attributeInTransition",void 0),Ae(this,"settings",void 0),Ae(this,"attribute",void 0),Ae(this,"transition",void 0),Ae(this,"currentStartIndices",void 0),Ae(this,"currentLength",void 0),Ae(this,"transform",void 0),Ae(this,"buffers",void 0),this.gl=e,this.transition=new M0(i),this.attribute=t,this.attributeInTransition=new R2(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function Uue(n,e){const t=P8(e.size);return new X2(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new sr(e,r),new sr(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;F8(r);const s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)L8({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=D2(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:N8(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let o=r/t;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class Vue{constructor({gl:e,attribute:t,timeline:i}){Ae(this,"gl",void 0),Ae(this,"type","spring"),Ae(this,"attributeInTransition",void 0),Ae(this,"settings",void 0),Ae(this,"attribute",void 0),Ae(this,"transition",void 0),Ae(this,"currentStartIndices",void 0),Ae(this,"currentLength",void 0),Ae(this,"texture",void 0),Ae(this,"framebuffer",void 0),Ae(this,"transform",void 0),Ae(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new M0(i),this.attribute=t,this.attributeInTransition=new R2(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function Hue(n){return new hs(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function Gue(n,e){return new Eo(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function zue(n,e,t){const i=P8(e.size);return new X2(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new sr(e,r),new sr(e,r),new sr(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:o}=this,s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)L8({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=D2(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:N8(0,o)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),F8(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),gE(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class $ue{constructor(e,{id:t,timeline:i}){Ae(this,"id",void 0),Ae(this,"isSupported",void 0),Ae(this,"gl",void 0),Ae(this,"timeline",void 0),Ae(this,"transitions",void 0),Ae(this,"needsRedraw",void 0),Ae(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=X2.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(t);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void Ei.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=Wue[i.type];s?this.transitions[e]=new s({attribute:t,timeline:this.timeline,gl:this.gl}):(Ei.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const v6="attributeManager.invalidate";class Zue{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){Ae(this,"id",void 0),Ae(this,"gl",void 0),Ae(this,"attributes",void 0),Ae(this,"updateTriggers",void 0),Ae(this,"needsRedraw",void 0),Ae(this,"userData",void 0),Ae(this,"stats",void 0),Ae(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new $ue(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);ks(v6,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);ks(v6,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;ks("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=t,o[l]&&Ei.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:t,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&ks("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in t){const s=t[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new R2(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,t)}),o}_updateAttribute(e){const{attribute:t,numInstances:i}=e;ks("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&ks("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,ks("attribute.updateEnd",t,i)))}}function w6(n,e,t,i,r){const o=e-n;return(t-e)*r+-o*i+o+e}function E6(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const nhe={interpolation:class Que extends M0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=_E(t,i,s)}},spring:class the extends M0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function ehe(n,e,t,i,r){if(Array.isArray(t)){const o=[];for(let s=0;s<t.length;s++)o[s]=w6(n[s],e[s],t[s],i,r);return o}return w6(n,e,t,i,r)}(o,s,t,i,r);const c=E6(a,t),l=E6(a,s);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=s,this._currValue=a}}};class ihe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=O8(r)))return;const s=nhe[r.type];if(!s)return void Ei.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:t,toValue:i}),o.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const NE=Symbol.for("component"),Ag=Symbol.for("asyncPropDefaults"),Yf=Symbol.for("asyncPropOriginal"),dh=Symbol.for("asyncPropResolved");function she(n,e){if(!n.transitions)return!1;const t={},i=q2(n);let r=!1;for(const o in n.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&K2(n[o],e[o],s)&&(t[o]=!0,r=!0)}return!!r&&t}function A6({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(n))if(!(o in t)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=K2(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in t)){if(!(o in n))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(n,o)){const s=K2(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function K2(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function lhe(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function S6(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},A6({oldProps:r,newProps:i,triggerName:t})}function q2(n){const e=n[NE],t=e&&e.constructor;return t?t._propTypes:{}}function mhe(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function PE(n){let t,e={};return i=>{for(const r in i)if(!mhe(i[r],e[r])){t=n(i),e=i;break}return t}}function ghe(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function J2(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],f=e[10],m=e[11],y=e[12],E=e[13],M=e[14],H=e[15],K=t*a-i*s,de=t*c-r*s,Ie=t*l-o*s,Fe=i*c-r*a,Xe=i*l-o*a,lt=r*l-o*c,gt=d*E-h*y,mt=d*M-f*y,pt=d*H-m*y,yt=h*M-f*E,Ct=h*H-m*E,dt=f*H-m*M,ht=K*dt-de*Ct+Ie*yt+Fe*pt-Xe*mt+lt*gt;return ht?(n[0]=(a*dt-c*Ct+l*yt)*(ht=1/ht),n[1]=(r*Ct-i*dt-o*yt)*ht,n[2]=(E*lt-M*Xe+H*Fe)*ht,n[3]=(f*Xe-h*lt-m*Fe)*ht,n[4]=(c*pt-s*dt-l*mt)*ht,n[5]=(t*dt-r*pt+o*mt)*ht,n[6]=(M*Ie-y*lt-H*de)*ht,n[7]=(d*lt-f*Ie+m*de)*ht,n[8]=(s*Ct-a*pt+l*gt)*ht,n[9]=(i*pt-t*Ct-o*gt)*ht,n[10]=(y*Xe-E*Ie+H*K)*ht,n[11]=(h*Ie-d*Xe-m*K)*ht,n[12]=(a*mt-s*yt-c*gt)*ht,n[13]=(t*yt-i*mt+r*gt)*ht,n[14]=(E*de-y*Fe-M*K)*ht,n[15]=(d*Fe-h*de+f*K)*ht,n):null}function Xf(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],E=e[12],M=e[13],H=e[14],K=e[15],de=t[0],Ie=t[1],Fe=t[2],Xe=t[3];return n[0]=de*i+Ie*a+Fe*h+Xe*E,n[1]=de*r+Ie*c+Fe*f+Xe*M,n[2]=de*o+Ie*l+Fe*m+Xe*H,n[3]=de*s+Ie*d+Fe*y+Xe*K,n[4]=(de=t[4])*i+(Ie=t[5])*a+(Fe=t[6])*h+(Xe=t[7])*E,n[5]=de*r+Ie*c+Fe*f+Xe*M,n[6]=de*o+Ie*l+Fe*m+Xe*H,n[7]=de*s+Ie*d+Fe*y+Xe*K,n[8]=(de=t[8])*i+(Ie=t[9])*a+(Fe=t[10])*h+(Xe=t[11])*E,n[9]=de*r+Ie*c+Fe*f+Xe*M,n[10]=de*o+Ie*l+Fe*m+Xe*H,n[11]=de*s+Ie*d+Fe*y+Xe*K,n[12]=(de=t[12])*i+(Ie=t[13])*a+(Fe=t[14])*h+(Xe=t[15])*E,n[13]=de*r+Ie*c+Fe*f+Xe*M,n[14]=de*o+Ie*l+Fe*m+Xe*H,n[15]=de*s+Ie*d+Fe*y+Xe*K,n}function FE(n,e,t){var s,a,c,l,d,h,f,m,y,E,M,H,i=t[0],r=t[1],o=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*o+e[12],n[13]=e[1]*i+e[5]*r+e[9]*o+e[13],n[14]=e[2]*i+e[6]*r+e[10]*o+e[14],n[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],f=e[6],m=e[7],y=e[8],E=e[9],M=e[10],H=e[11],n[0]=s=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=d,n[5]=h,n[6]=f,n[7]=m,n[8]=y,n[9]=E,n[10]=M,n[11]=H,n[12]=s*i+d*r+y*o+e[12],n[13]=a*i+h*r+E*o+e[13],n[14]=c*i+f*r+M*o+e[14],n[15]=l*i+m*r+H*o+e[15]),n}function Z2(n,e,t){var i=t[0],r=t[1],o=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,n[11]=e[11]*o,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function C6(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=o*r+l*i,n[5]=s*r+d*i,n[6]=a*r+h*i,n[7]=c*r+f*i,n[8]=l*r-o*i,n[9]=d*r-s*i,n[10]=h*r-a*i,n[11]=f*r-c*i,n}function M6(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r+l*i,n[1]=s*r+d*i,n[2]=a*r+h*i,n[3]=c*r+f*i,n[4]=l*r-o*i,n[5]=d*r-s*i,n[6]=h*r-a*i,n[7]=f*r-c*i,n}function T6(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function T0(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*o+t[12]*s,n[1]=t[1]*i+t[5]*r+t[9]*o+t[13]*s,n[2]=t[2]*i+t[6]*r+t[10]*o+t[14]*s,n[3]=t[3]*i+t[7]*r+t[11]*o+t[15]*s,n}!function Rhe(){var n=new ya(4);ya!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const I6=[0,0,0,0],Whe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],D6=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$he=[0,0,0],R6=[0,0,0],Yhe=PE(function qhe({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Xhe(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:o,viewProjectionMatrix:s}=n,a=I6,c=I6,l=n.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:f}=k6(n,e,t);return f&&(c=n.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=T0([],c,s),o=i||o,s=Xf([],r,o),s=Xf([],s,Whe)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(n,t,i),d=n.getDistanceScales(),h=[n.width*e,n.height*e],f=T0([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,m={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:$he,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:D6,project_uCameraPosition:a};if(l){const y=n.getDistanceScales(l);switch(t){case Ii.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=y.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=y.unitsPerMeter2;break;case Ii.LNGLAT:case Ii.LNGLAT_OFFSETS:n._pseudoMeters||(m.project_uCommonUnitsPerMeter=y.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=y.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=y.unitsPerDegree2;break;case Ii.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,y.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,y.unitsPerMeter2[2]]}}return m});function k6(n,e,t=R6){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,o=!0;switch(r=e===Ii.LNGLAT_OFFSETS||e===Ii.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Bl.WEB_MERCATOR:(e===Ii.LNGLAT||e===Ii.CARTESIAN)&&(r=[0,0,0],o=!1);break;case Bl.WEB_MERCATOR_AUTO_OFFSET:e===Ii.LNGLAT?i=r:e===Ii.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Bl.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case Bl.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class Jhe extends bE{toString(){let e="[";if(po.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=gi(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function LE(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function O6(n,e){return n[0]=-e[0],n[1]=-e[1],n}function N6(n,e,t,i){var r=e[0],o=e[1];return n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n}!function Zhe(){var n=new ya(2);ya!=Float32Array&&(n[0]=0,n[1]=0)}();var P6=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(P6||{});const efe=45*Math.PI/180,tfe=1,Q2=.1,eR=500,nfe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class qn extends Jhe{static get IDENTITY(){return function rfe(){return jE||(jE=new qn,Object.freeze(jE)),jE}()}static get ZERO(){return function ife(){return BE||(BE=new qn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(BE)),BE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return P6}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,o,s,a,c,l,d,h,f,m,y,E,M){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=f,this[12]=m,this[13]=y,this[14]=E,this[15]=M,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l,d,h,f,m,y,E,M){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=t,this[5]=s,this[6]=d,this[7]=y,this[8]=i,this[9]=a,this[10]=h,this[11]=E,this[12]=r,this[13]=c,this[14]=f,this[15]=M,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(nfe)}fromObject(e){return this.check()}fromQuaternion(e){return function Ahe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,y=r*c,E=o*s,M=o*a,H=o*c;n[0]=1-h-y,n[1]=d+H,n[2]=f-M,n[3]=0,n[4]=d-H,n[5]=1-l-y,n[6]=m+E,n[7]=0,n[8]=f+M,n[9]=m-E,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:o,near:s=Q2,far:a=eR}=e;return a===1/0?function ofe(n,e,t,i,r,o){const a=2*o/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),f=-2*o;n[0]=2*o/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=f,n[15]=0}(this,t,i,r,o,s):function She(n,e,t,i,r,o,s){var a=1/(t-e),c=1/(r-i),l=1/(o-s);n[0]=2*o*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*o*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(s+o)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=s*o*2*l,n[15]=0}(this,t,i,r,o,s,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function Dhe(n,e,t,i){var r,o,s,a,c,l,d,h,f,m,y=e[0],E=e[1],M=e[2],H=i[0],K=i[1],de=i[2],Ie=t[0],Fe=t[1],Xe=t[2];Math.abs(y-Ie)<Ul&&Math.abs(E-Fe)<Ul&&Math.abs(M-Xe)<Ul?function _he(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(d=y-Ie,h=E-Fe,f=M-Xe,r=K*(f*=m=1/Math.hypot(d,h,f))-de*(h*=m),o=de*(d*=m)-H*f,s=H*h-K*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-f*o,c=f*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=d,n[3]=0,n[4]=o,n[5]=c,n[6]=h,n[7]=0,n[8]=s,n[9]=l,n[10]=f,n[11]=0,n[12]=-(r*y+o*E+s*M),n[13]=-(a*y+c*E+l*M),n[14]=-(d*y+h*E+f*M),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:o,near:s=Q2,far:a=eR}=e;return function The(n,e,t,i,r,o,s){var a=1/(e-t),c=1/(i-r),l=1/(o-s);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(s+o)*l,n[15]=1}(this,t,i,r,o,s,a),this.check()}orthographic(e){const{fovy:t=efe,aspect:i=tfe,focalDistance:r=1,near:o=Q2,far:s=eR}=e;F6(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return F6(t),function Che(n,e,t,i,r){var s,o=1/Math.tan(e/2);n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(s=1/(i-r)),n[14]=2*r*i*s):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,o),this.check()}determinant(){return function yhe(n){var e=n[0],t=n[1],i=n[2],r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8],d=n[9],h=n[10],f=n[11],m=n[12],y=n[13],E=n[14],M=n[15];return(e*s-t*o)*(h*M-f*E)-(e*a-i*o)*(d*M-f*y)+(e*c-r*o)*(d*E-h*y)+(t*a-i*s)*(l*M-f*m)-(t*c-r*s)*(l*E-h*m)+(i*c-r*a)*(l*y-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function bhe(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=o,n[11]=e[14],n[12]=r,n[13]=s,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return J2(this,this),this.check()}multiplyLeft(e){return Xf(this,e,this),this.check()}multiplyRight(e){return Xf(this,this,e),this.check()}rotateX(e){return C6(this,this,e),this.check()}rotateY(e){return function xhe(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r-l*i,n[1]=s*r-d*i,n[2]=a*r-h*i,n[3]=c*r-f*i,n[8]=o*i+l*r,n[9]=s*i+d*r,n[10]=a*i+h*r,n[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return M6(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function vhe(n,e,t,i){var c,l,d,h,f,m,y,E,M,H,K,de,Ie,Fe,Xe,lt,gt,mt,pt,yt,Ct,dt,ht,Ot,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<Ul||(r*=a=1/a,o*=a,s*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],m=e[2],y=e[3],M=e[5],H=e[6],K=e[7],Ie=e[9],Fe=e[10],Xe=e[11],pt=r*o*(d=1-l)-s*c,yt=o*o*d+l,Ct=s*o*d+r*c,dt=r*s*d+o*c,ht=o*s*d-r*c,Ot=s*s*d+l,n[0]=(h=e[0])*(lt=r*r*d+l)+(E=e[4])*(gt=o*r*d+s*c)+(de=e[8])*(mt=s*r*d-o*c),n[1]=f*lt+M*gt+Ie*mt,n[2]=m*lt+H*gt+Fe*mt,n[3]=y*lt+K*gt+Xe*mt,n[4]=h*pt+E*yt+de*Ct,n[5]=f*pt+M*yt+Ie*Ct,n[6]=m*pt+H*yt+Fe*Ct,n[7]=y*pt+K*yt+Xe*Ct,n[8]=h*dt+E*ht+de*Ot,n[9]=f*dt+M*ht+Ie*Ot,n[10]=m*dt+H*ht+Fe*Ot,n[11]=y*dt+K*ht+Xe*Ot,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Z2(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return FE(this,this,e),this.check()}transform(e,t){return 4===e.length?(yE(t=T0(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function Qhe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=S2(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return yE(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function lle(n,e,t){const i=e[0],r=e[1],o=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/o,n[1]=(t[1]*i+t[5]*r)/o,n}(t||[-0,-0],e,this);break;case 3:i=C8(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return yE(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let BE,jE;function F6(n){if(n>2*Math.PI)throw Error("expected radians")}function Sg(n,e){const t=T0([],e,n);return T6(t,t,1/t[3]),t}function L6(n,e){const t=n%e;return t<0?e+t:t}function tR(n,e,t){return n<e?e:n>t?t:n}const nR=Math.log2||function afe(n){return Math.log(n)*Math.LOG2E};function Yd(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Yc=Math.PI,B6=Yc/4,gc=Yc/180,iR=180/Yc,Cg=512,UE=4003e4,VE=85.051129,cfe=1.5;function zE(n){const[e,t]=n;return Yd(Number.isFinite(e)),Yd(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[Cg*(e*gc+Yc)/(2*Yc),Cg*(Yc+Math.log(Math.tan(B6+t*gc*.5)))/(2*Yc)]}function Mg(n){const[e,t]=n,i=e/Cg*(2*Yc)-Yc,r=2*(Math.atan(Math.exp(t/Cg*(2*Yc)-Yc))-B6);return[i*iR,r*iR]}function rR(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Yd(Number.isFinite(e)&&Number.isFinite(t));const r=Cg,o=Math.cos(e*gc),s=r/360,a=s/o,c=r/UE/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=gc*Math.tan(e*gc)/o,f=r/UE*d,m=f/a*c;l.unitsPerDegree2=[0,s*d/2,f],l.unitsPerMeter2=[m,0,m]}return l}function j6(n,e){const[t,i,r]=n,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=rR({longitude:t,latitude:i,highPrecision:!0}),d=zE(n);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=Mg(d),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function HE(n){return 2*Math.atan(.5/n)*iR}function oR(n){return.5/Math.tan(.5*n*gc)}function V6(n,e){const[t,i,r=0]=n;return Yd(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Sg(e,[t,i,r,1])}function I0(n,e,t=0){const[i,r,o]=n;if(Yd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return Sg(e,[i,r,o,1]);const s=Sg(e,[i,r,0,1]),a=Sg(e,[i,r,1,1]),c=s[2],l=a[2];return N6([],s,a,c===l?0:((t||0)-c)/(l-c))}function z6(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=n,[[a,c],[l,d]]=i,h=function hfe(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(Yd(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),f=zE([a,tR(d,-VE,VE)]),m=zE([l,tR(c,-VE,VE)]),y=[Math.max(Math.abs(m[0]-f[0]),r),Math.max(Math.abs(m[1]-f[1]),r)],E=[e-h.left-h.right-2*Math.abs(s[0]),t-h.top-h.bottom-2*Math.abs(s[1])];Yd(E[0]>0&&E[1]>0);const M=E[0]/y[0],H=E[1]/y[1],Fe=Mg([(m[0]+f[0])/2+(h.right-h.left)/2/M,(m[1]+f[1])/2+(h.top-h.bottom)/2/H]),Xe=Math.min(o,nR(Math.abs(Math.min(M,H))));return Yd(Number.isFinite(Xe)),{longitude:Fe[0],latitude:Fe[1],zoom:Xe}}const H6=Math.PI/180;function G6(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Sg(i,[e,0,1,1]),o=Sg(i,[e,n.height,1,1]),l=Mg(N6([],r,o,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(t),l}const gfe=Math.PI/180,_fe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K6=[0,0,0],bfe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class uh{constructor(e={}){Ae(this,"id",void 0),Ae(this,"x",void 0),Ae(this,"y",void 0),Ae(this,"width",void 0),Ae(this,"height",void 0),Ae(this,"padding",void 0),Ae(this,"isGeospatial",void 0),Ae(this,"zoom",void 0),Ae(this,"focalDistance",void 0),Ae(this,"position",void 0),Ae(this,"modelMatrix",void 0),Ae(this,"distanceScales",void 0),Ae(this,"scale",void 0),Ae(this,"center",void 0),Ae(this,"cameraPosition",void 0),Ae(this,"projectionMatrix",void 0),Ae(this,"viewMatrix",void 0),Ae(this,"viewMatrixUncentered",void 0),Ae(this,"viewMatrixInverse",void 0),Ae(this,"viewProjectionMatrix",void 0),Ae(this,"pixelProjectionMatrix",void 0),Ae(this,"pixelUnprojectionMatrix",void 0),Ae(this,"resolution",void 0),Ae(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||bfe,this.focalDistance=e.focalDistance||1,this.position=e.position||K6,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Bl.WEB_MERCATOR:Bl.WEB_MERCATOR_AUTO_OFFSET:Bl.IDENTITY}equals(e){return e instanceof uh&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&gg(e.projectionMatrix,this.projectionMatrix)&&gg(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=V6(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=t?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,o,s]=e,l=I0([r,t?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,f]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,f]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=zE(e);return t[1]=Yr(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Mg(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),o=this.unproject([0,this.height],t),s=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?rR({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function mle(n){return{left:_g(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:_g(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:_g(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:_g(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:_g(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:_g(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function dfe(n){const{latitude:e}=n;Yd(Number.isFinite(e));const t=Math.cos(e*gc);return function lfe(n){return nR(n)}(UE*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||rR({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=K6;if(o&&(a=s?new qn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new Rs(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=_fe,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new qn).multiplyRight(t).translate(new Rs(this.center).negate()),this.projectionMatrix=i||function yfe({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=n/e,l=t?(new qn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new qn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:f=0,bottom:m=0}=o,y=Yr((d+n-h)/2,0,n)-n/2,E=Yr((f+e-m)/2,0,e)-e/2;l[8]-=2*y/n,l[9]+=2*E/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*gfe,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Xf(h,h,this.projectionMatrix),Xf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=J2([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function ple(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Z2(f,f,[this.width/2,-this.height/2,1]),FE(f,f,[1,-1,0]),Xf(m,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=J2([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ei.warn("Pixel project matrix not invertible")()}}Ae(uh,"displayName","Viewport");const wfe=Math.PI/180;function q6(n){return 512/4003e4/Math.cos(n*wfe)}class hh extends uh{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:m=!1}=e;let{width:y,height:E,altitude:M=1.5}=e;const H=Math.pow(2,r);y=y||1,E=E||1;let K,de=null;d?(M=d[5]/2,K=HE(M)):(e.fovy?(K=e.fovy,M=oR(K)):K=HE(M),de=function U6(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:d=HE(cfe)}=n;void 0!==i&&(d=HE(i));const h=d*gc,f=r*gc,m=oR(d);let y=m;s&&(y+=s[2]*a/Math.cos(f)/t);const E=h*(.5+(o?o[1]:0)/t),M=Math.sin(E)*y/Math.sin(tR(Math.PI/2-f-E,.01,Math.PI-.01)),H=Math.sin(f)*M+y;return{fov:h,aspect:e/t,focalDistance:m,near:c,far:Math.min(H*l,10*y)}}({width:y,height:E,pitch:o,fovy:K,nearZMultiplier:a,farZMultiplier:c}));let Ie=function ufe(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:o,center:s}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];FE(a,a,[0,0,-r]),C6(a,a,-t*gc),M6(a,a,i*gc);const c=o/e;return Z2(a,a,[c,c,c]),s&&FE(a,a,function ele(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),a}({height:E,pitch:o,bearing:s,scale:H,altitude:M});f&&(Ie=(new qn).translate([512*f,0,0]).multiplyLeft(Ie)),super({...e,width:y,height:E,viewMatrix:Ie,longitude:i,latitude:t,zoom:r,...de,fovy:K,focalDistance:M}),Ae(this,"longitude",void 0),Ae(this,"latitude",void 0),Ae(this,"pitch",void 0),Ae(this,"bearing",void 0),Ae(this,"altitude",void 0),Ae(this,"fovy",void 0),Ae(this,"orthographic",void 0),Ae(this,"_subViewports",void 0),Ae(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=M,this.fovy=K,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const o=r?new hh({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*q6(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/q6(i)]}addMetersToLngLat(e,t){return j6(e,t)}panByPosition(e,t){const i=I0(t,this.pixelUnprojectionMatrix),o=LE([],this.projectFlat(e),O6([],i)),s=LE([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const t=function ffe(n,e=0){const{width:t,height:i,unproject:r}=n,o={targetZ:e},s=r([0,i],o),a=r([t,i],o);let c,l;return(n.fovy?.5*n.fovy*H6:Math.atan(.5/n.altitude))>(90-n.pitch)*H6-.01?(c=G6(n,0,e),l=G6(n,t,e)):(c=r([0,0],o),l=r([t,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=z6({width:i,height:r,bounds:e,...t});return new hh({width:i,height:r,longitude:o,latitude:s,zoom:a})}}function aR(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof hh){const[r,o,s=0]=n,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function J6(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=n;switch(t&&([s,a,c]=T0([],[s,a,c,1],t)),i){case Ii.LNGLAT:return aR([s,a,c],e,o);case Ii.LNGLAT_OFFSETS:return aR([s+r[0],a+r[1],c+(r[2]||0)],e,o);case Ii.METER_OFFSETS:return aR(j6(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}Ae(hh,"displayName","WebMercatorViewport");const Sfe={10241:9987,10240:9729,10242:33071,10243:33071},cR={};function Tg(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&Tg(i,r)))return!1}return!0}const Tfe={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||R0(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>lR(n,e)},accessor:{validate(n,e){const t=GE(n);return"function"===t||t===GE(e.value)},equal:(n,e,t)=>"function"==typeof e||lR(n,e)},array:{validate:(n,e)=>e.optional&&!n||R0(n),equal:(n,e,t)=>t.compare?lR(n,e):n===e},object:{equal:(n,e,t)=>t.compare?Tg(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function Cfe(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof hs)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new hs(t,{...e,parameters:{...Sfe,...i,...n.props.textureParameters}});return cR[r.id]=!0,r}(t,n),release:n=>{!function Mfe(n){!n||!(n instanceof hs)||cR[n.id]&&(n.delete(),delete cR[n.id])}(n)}}};function lR(n,e){if(n===e)return!0;if(!R0(n)||!R0(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Dfe(n,e){switch(GE(e)){case"object":return D0(n,e);case"array":return D0(n,{type:"array",value:e,compare:!1});case"boolean":return D0(n,{type:"boolean",value:e});case"number":return D0(n,{type:"number",value:e});case"function":return D0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function D0(n,e){return"type"in e?{name:n,...Tfe[e.type],...e}:"value"in e?{name:n,type:GE(e.value),...e}:{name:n,type:"object",value:e}}function R0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function GE(n){return R0(n)?"array":null===n?"null":typeof n}function Z6(n){return WE(n,"_mergedDefaultProps")||(function kfe(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=Z6(t),o=function Ife(n){const e={},t={},i={};for(const[r,o]of Object.entries(n)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=Dfe(r,o);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(WE(n,"defaultProps")||{}),s=function Ofe(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function Lfe(n){const e=WE(n,"layerName")||WE(n,"componentName");return e||Ei.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(o.defaultProps,i,n),a={...t._propTypes,...o.propTypes};!function Pfe(n,e){const t={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(t[s]=a,i[s]=Ffe(s))}n[Ag]=t,n[Yf]={},Object.defineProperties(n,i)}(s,a);const c={...t._deprecatedProps,...o.deprecatedProps};(function Nfe(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const o of e[t])Q6(this,o)||(this[o]=i);Ei.deprecated(r,e[t].join("/"))()}})})(s,c),n._mergedDefaultProps=s,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function Ffe(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||R8(e)?this[Yf][n]=e:this[dh][n]=e},get(){if(this[dh]){if(n in this[dh])return this[dh][n]||this[Ag][n];if(n in this[Yf]){const e=this[NE]&&this[NE].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[Ag][n]}}return this[Ag][n]}}}function Q6(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function WE(n,e){return Q6(n,e)&&n[e]}let Bfe=0;class dR{constructor(...e){Ae(this,"id",void 0),Ae(this,"props",void 0),Ae(this,"count",void 0),this.props=function Rfe(n,e){const t=Z6(n.constructor),i=Object.create(t);i[NE]=n,i[Yf]={},i[dh]={};for(let r=0;r<e.length;++r){const o=e[r];for(const s in o)i[s]=o[s]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=Bfe++}clone(e){const{props:t}=this,i={};for(const r in t[Ag])r in t[dh]?i[r]=t[dh][r]:r in t[Yf]&&(i[r]=t[Yf][r]);return new this.constructor({...t,...i,...e})}}function uR(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new $E(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function $E(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return($E=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new $E(n)}Ae(dR,"componentName","Component"),Ae(dR,"defaultProps",{});const jfe=Object.freeze({});class Ufe{constructor(e){Ae(this,"component",void 0),Ae(this,"onAsyncPropUpdated",void 0),Ae(this,"asyncProps",void 0),Ae(this,"oldProps",void 0),Ae(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||jfe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[dh]||{},i=e[Yf]||e,r=e[Ag]||{};for(const o in t){const s=t[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),t[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(R8(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(o=>{o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,t){var i=this;return jt(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var f,h=uR(t);c=!(f=yield h.next()).done;c=!1){const m=f.value;{const{dataTransform:y}=i.component.props;s=y?y(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class Vfe extends Ufe{constructor({attributeManager:e,layer:t}){super(t),Ae(this,"attributeManager",void 0),Ae(this,"needsRedraw",void 0),Ae(this,"needsUpdate",void 0),Ae(this,"subLayers",void 0),Ae(this,"usesPickingColorCache",void 0),Ae(this,"changeFlags",void 0),Ae(this,"viewport",void 0),Ae(this,"uniformTransitions",void 0),Ae(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Xc=n=>"function"==typeof n,fh=n=>null!==n&&"object"==typeof n,t5=n=>fh(n)&&n.constructor==={}.constructor,zfe=n=>n&&"function"==typeof n[Symbol.iterator],Hfe=n=>n&&"function"==typeof n[Symbol.asyncIterator],Ig=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,Dg=n=>typeof Blob<"u"&&n instanceof Blob,Gfe=n=>n&&"object"==typeof n&&n.isBuffer,n5=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||fh(n)&&Xc(n.tee)&&Xc(n.cancel)&&Xc(n.getReader))(n)||(n=>fh(n)&&Xc(n.read)&&Xc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function r5(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function hR(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function fR(n){var e,t;let i;return r5(n,"null loader"),r5(hR(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let pR="";const mR={},qfe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Jfe=/^([-\w.]+\/[-\w.+]+)/;function Zfe(n){const e=Jfe.exec(n);return e?e[1]:n}function o5(n){const e=qfe.exec(n);return e?e[1]:""}const Qfe=/\?.*/;function YE(n){if(Ig(n)){const e=gR(n.url||"");return{url:e,type:Zfe(n.headers.get("content-type")||"")||o5(e)}}return Dg(n)?{url:gR(n.name||""),type:n.type||""}:"string"==typeof n?{url:gR(n),type:o5(n)}:{url:"",type:""}}function gR(n){return n.replace(Qfe,"")}function s5(n){return _R.apply(this,arguments)}function _R(){return _R=jt(function*(n){if(Ig(n))return n;const e={},t=function epe(n){return Ig(n)?n.headers["content-length"]||-1:Dg(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=YE(n);r&&(e["content-type"]=r);const o=yield function ipe(n){return vR.apply(this,arguments)}(n);o&&(e["x-first-bytes"]=o),"string"==typeof n&&(n=(new TextEncoder).encode(n));const s=new Response(n,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),_R.apply(this,arguments)}function bR(){return bR=jt(function*(n){if(!n.ok){const e=yield function npe(n){return yR.apply(this,arguments)}(n);throw new Error(e)}}),bR.apply(this,arguments)}function yR(){return yR=jt(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),yR.apply(this,arguments)}function vR(){return vR=jt(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function rpe(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),vR.apply(this,arguments)}function a5(n,e){return xR.apply(this,arguments)}function xR(){return xR=jt(function*(n,e){if("string"==typeof n){n=function Kfe(n){for(const e in mR)n.startsWith(e)&&(n=n.replace(e,mR[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(pR).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield s5(n)}),xR.apply(this,arguments)}const c5=new d0({id:"loaders.gl"});class ope{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const l5=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),d5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),u5=(d5&&parseFloat(d5[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class spe{constructor(){Ae(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:l5,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),ape={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function wR(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const ER=()=>{const n=wR();return n.globalOptions=n.globalOptions||{...u5},n.globalOptions};function cpe(n,e,t,i){return t=t||[],function lpe(n,e){f5(n,null,u5,ape,e);for(const t of e)f5(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function p5(n,e,t){const r={...n.options||{}};return function upe(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new ope),m5(r,ER()),m5(r,e),r}(e,n,i)}function h5(n,e){const t=ER(),i=n||t;return"function"==typeof i.fetch?i.fetch:fh(i.fetch)?r=>a5(r,i):null!=e&&e.fetch?e?.fetch:a5}function f5(n,e,t,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in n){const c=!e&&fh(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)c5.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=dpe(a,r);c5.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function dpe(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(n===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(t.startsWith(s)||s.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function m5(n,e){for(const t in e)t in e&&(n[t]=t5(e[t])&&t5(n[t])?{...n[t],...e[t]}:e[t])}function zl(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const hpe="3.2.13",Hl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},ppe=Hl.global||Hl.self||Hl.window||{},ph="object"!=typeof process||"[object process]"!==String(process)||process.browser,AR="function"==typeof importScripts,mpe=typeof window<"u"&&typeof window.orientation<"u",g5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);g5&&parseFloat(g5[1]);class SR{}const CR=new Map;function _5(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function b5(n,e=!0,t){const i=t||new Set;if(n)if(y5(n))i.add(n);else if(y5(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)b5(n[r],e,i);return void 0===t?Array.from(i):[]}function y5(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const MR=()=>{};class TR{static isSupported(){return typeof Worker<"u"&&ph||typeof SR<"u"&&!ph}constructor(e){Ae(this,"name",void 0),Ae(this,"source",void 0),Ae(this,"url",void 0),Ae(this,"terminated",!1),Ae(this,"worker",void 0),Ae(this,"onMessage",void 0),Ae(this,"onError",void 0),Ae(this,"_loadableURL","");const{name:t,source:i,url:r}=e;zl(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=MR,this.onError=o=>console.log(o),this.worker=ph?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=MR,this.onError=MR,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||b5(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function gpe(n){zl(n.source&&!n.url||!n.source&&n.url);let e=CR.get(n.source||n.url);return e||(n.url&&(e=function _pe(n){if(!n.startsWith("http"))return n;const e=function bpe(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return _5(e)}(n.url),CR.set(n.url,e)),n.source&&(e=_5(n.source),CR.set(n.source,e))),zl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new SR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new SR(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class vpe{constructor(e,t){Ae(this,"name",void 0),Ae(this,"workerThread",void 0),Ae(this,"isRunning",!0),Ae(this,"result",void 0),Ae(this,"_resolve",()=>{}),Ae(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){zl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){zl(this.isRunning),this.isRunning=!1,this._reject(e)}}class xpe{static isSupported(){return TR.isSupported()}constructor(e){Ae(this,"name","unnamed"),Ae(this,"source",void 0),Ae(this,"url",void 0),Ae(this,"maxConcurrency",1),Ae(this,"maxMobileConcurrency",1),Ae(this,"onDebug",()=>{}),Ae(this,"reuseWorkers",!0),Ae(this,"props",{}),Ae(this,"jobQueue",[]),Ae(this,"idleQueue",[]),Ae(this,"count",0),Ae(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,o,s)=>r.done(s)),i=((r,o)=>r.error(o))){var r=this;return jt(function*(){const o=new Promise(s=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:s}),r));return r._startQueuedJob(),yield o})()}_startQueuedJob(){var e=this;return jt(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new vpe(i.name,t);t.onMessage=o=>i.onMessage(r,o.type,o.payload),t.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new TR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return mpe?this.maxMobileConcurrency:this.maxConcurrency}}const wpe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Xd{static isSupported(){return TR.isSupported()}static getWorkerFarm(e={}){return Xd._workerFarm=Xd._workerFarm||new Xd({}),Xd._workerFarm.setProps(e),Xd._workerFarm}constructor(e){Ae(this,"props",void 0),Ae(this,"workerPools",new Map),this.props={...wpe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let o=this.workerPools.get(t);return o||(o=new xpe({name:t,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Ae(Xd,"_workerFarm",void 0);const Epe="latest";function IR(){return IR=jt(function*(n,e,t,i,r){const o=n.id,s=function Ape(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let o=n.version;"latest"===o&&(o=Epe);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(s,"/dist/").concat(i)}return zl(r),r}(n,t),c=Xd.getWorkerFarm(t).getWorkerPool({name:o,url:s});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Mpe.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),IR.apply(this,arguments)}function Mpe(n,e,t,i){return DR.apply(this,arguments)}function DR(){return DR=jt(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield n(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),DR.apply(this,arguments)}function x5(n){return n&&"object"==typeof n&&n.isBuffer}function w5(n){if(x5(n))return function Tpe(n){return x5(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function kR(){return kR=jt(function*(n){const e=[];var r,t=!1,i=!1;try{for(var s,o=uR(n);t=!(s=yield o.next()).done;t=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function Dpe(...n){const e=n.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),t=e.reduce((o,s)=>o+s.byteLength,0),i=new Uint8Array(t);let r=0;for(const o of e)i.set(o,r),r+=o.byteLength;return i.buffer}(...e)}),kR.apply(this,arguments)}g(643);const kpe=262144,Npe=262144;function E5(n,e){this.v=n,this.k=e}function XE(n){return new E5(n,0)}function k0(n){var e,t;function i(o,s){try{var a=n[o](s),c=a.value,l=c instanceof E5;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=n[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(o,s))})},"function"!=typeof n.return&&(this.return=void 0)}function NR(n){return function(){return new k0(n.apply(this,arguments))}}k0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},k0.prototype.next=function(n){return this._invoke("next",n)},k0.prototype.throw=function(n){return this._invoke("throw",n)},k0.prototype.return=function(n){return this._invoke("return",n)};const Fpe=1048576;function PR(){return PR=NR(function*(n,e){const t=e?.chunkSize||Fpe;let i=0;for(;i<n.size;){const r=i+t,o=yield XE(n.slice(i,r).arrayBuffer());i=r,yield o}}),PR.apply(this,arguments)}function A5(n,e){return l5?function Bpe(n,e){return FR.apply(this,arguments)}(n,e):function jpe(n,e){return LR.apply(this,arguments)}(n,e)}function FR(){return FR=NR(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:o,value:s}=yield XE(r);if(o)return;yield w5(s)}}catch{t.releaseLock()}}),FR.apply(this,arguments)}function LR(){return LR=NR(function*(n,e){var r,t=!1,i=!1;try{for(var s,o=uR(n);t=!(s=yield XE(o.next())).done;t=!1){const a=s.value;yield w5(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield XE(o.return()))}finally{if(i)throw r}}}),LR.apply(this,arguments)}const BR="Cannot convert supplied data type";function jR(){return jR=jt(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function Vpe(n,e,t){if(e.text&&"string"==typeof n)return n;if(Gfe(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(BR)}(n,e);if(Dg(n)&&(n=yield s5(n)),Ig(n)){const r=n;return yield function tpe(n){return bR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(n5(n)&&(n=function Upe(n,e){if("string"==typeof n)return function*Ope(n,e){const t=e?.chunkSize||kpe;let i=0;const r=new TextEncoder;for(;i<n.length;){const o=Math.min(n.length-i,t),s=n.slice(i,i+o);i+=o,yield r.encode(s)}}(n,e);if(n instanceof ArrayBuffer)return function*Ppe(n,e={}){const{chunkSize:t=Npe}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),o=new ArrayBuffer(r),s=new Uint8Array(n,i,r);new Uint8Array(o).set(s),i+=r,yield o}}(n,e);if(Dg(n))return function Lpe(n,e){return PR.apply(this,arguments)}(n,e);if(n5(n))return A5(n,e);if(Ig(n))return A5(n.body,e);throw new Error("makeIterator")}(n,t)),zfe(n)||Hfe(n))return function Rpe(n){return kR.apply(this,arguments)}(n);throw new Error(BR)}),jR.apply(this,arguments)}const Ype=new d0({id:"loaders.gl"}),S5=()=>{const n=wR();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function C5(n){const e=S5();n=Array.isArray(n)?n:[n];for(const t of n){const i=fR(t);e.find(r=>i===r)||e.unshift(i)}}const Kpe=/\.([^.]+)$/;function zR(){return zR=jt(function*(n,e=[],t,i){if(!T5(n))return null;let r=M5(n,e,{...t,nothrow:!0},i);if(r)return r;if(Dg(n)&&(r=M5(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(I5(n));return r}),zR.apply(this,arguments)}function M5(n,e=[],t,i){if(!T5(n))return null;if(e&&!Array.isArray(e))return fR(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function Xpe(){return S5()}()),function Zpe(n){for(const e of n)fR(e)}(r);const o=function Jpe(n,e,t,i){const{url:r,type:o}=YE(n),s=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=HR(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function Qpe(n,e){const t=e&&Kpe.exec(e),i=t&&t[1];return i?function eme(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||HR(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function tme(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(nme(e,t))return t}else if(ArrayBuffer.isView(e)){if(D5(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&D5(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(R5(n)):""),a=a||HR(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&Ype.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(o||null!=t&&t.nothrow))throw new Error(I5(n));return o}function T5(n){return!(n instanceof Response&&204===n.status)}function I5(n){const{url:e,type:t}=YE(n);let i="No valid loader found (";i+=e?"".concat(function $pe(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?R5(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function HR(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function nme(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function D5(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function ime(n,e,t,i){if(i instanceof ArrayBuffer)return function Ipe(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===GR(n,e,i.length);default:return!1}}(n,e,t,r))}function R5(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?GR(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?GR(n,0,e):""}function GR(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function KE(n,e,t,i){return WR.apply(this,arguments)}function WR(){return WR=jt(function*(n,e,t,i){zl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!hR(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=YE(n),s=function Wpe(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function qpe(n){return zR.apply(this,arguments)}(n,s,t);return a?(i=function Gpe(n,e,t=null){if(t)return t;const i={fetch:h5(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:KE,loaders:s},t=cpe(t,a,s,r),i),yield function rme(n,e,t,i){return $R.apply(this,arguments)}(a,n,t,i)):null}),WR.apply(this,arguments)}function $R(){return $R=jt(function*(n,e,t,i){if(function fpe(n,e=hpe){zl(n,"no worker provided")}(n),Ig(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function zpe(n,e,t){return jR.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function Spe(n,e){return!(!Xd.isSupported()||!(ph||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function Cpe(n,e,t,i,r){return IR.apply(this,arguments)}(n,e,t,i,KE);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw zl(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),$R.apply(this,arguments)}function O0(n,e,t,i){return YR.apply(this,arguments)}function YR(){return YR=jt(function*(n,e,t,i){!Array.isArray(e)&&!hR(e)&&(t=e,e=void 0);const r=h5(t);let o=n;return"string"==typeof n&&(o=yield r(n)),Dg(n)&&(o=yield r(n)),yield KE(o,e,t)}),YR.apply(this,arguments)}const dme=Object.freeze([]),ume=PE(({oldViewport:n,viewport:e})=>n.equals(e));let Gl=new Uint8ClampedArray(0);const hme={data:{type:"data",value:dme,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(n);return!c&&!r&&(s.add({resourceId:n,data:O0(n,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:n,onChange:l=>{var d;return null===(d=t.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):O0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ii.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Kf extends dR{constructor(...e){super(...e),Ae(this,"internalState",null),Ae(this,"lifecycle","Awaiting state"),Ae(this,"context",void 0),Ae(this,"state",void 0),Ae(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){fs(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=J6(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=V6(i,t.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return fs(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return fs(this.internalState),function Afe(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function Efe(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=n;return r===Ii.DEFAULT&&(r=e.isGeospatial?Ii.LNGLAT:Ii.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:d}=k6(t,i,r),h=J6(n,{viewport:t,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});d&&function Qce(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ii.DEFAULT||e===Ii.LNGLAT||e===Ii.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){fs(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function hhe(n){if(!function phe(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function fhe(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=ghe(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(s!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,d=c||l;d&&(a&&d.constant&&(d.constant=!1,t.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,o,s;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!ume({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(Gl.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>16777215&&Ei.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Gl=b0.allocate(Gl,t,{size:3,copy:!0,maxCount:Math.max(t,16777215)});const r=Math.floor(Gl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),Gl[3*s+0]=o[0],Gl[3*s+1]=o[1],Gl[3*s+2]=o[2]}e.value=Gl.subarray(0,3*t)}_setModelAttributes(e,t){const o=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Gl.buffer&&(i.value=Gl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){fs(!this.internalState),fs(Number.isFinite(this.props.coordinateSystem)),ks("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Vfe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ei.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new ihe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ks("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(ks("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){ks("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];zd(o.gl,{polygonOffset:c}),mc(o.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=t[r];s&&Array.isArray(a)&&(t.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}t[r]||(t[r]=e[r],o=!0),o&&ks("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function ohe(n,e){const t=A6({newProps:n,oldProps:e,propTypes:q2(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function ahe(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function che(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&S6(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&S6(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:lhe(n,e),transitionsChanged:she(n,e)}}(e,t);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,t[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function rhe(n){const e=q2(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Zue(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Ae(Kf,"defaultProps",hme),Ae(Kf,"layerName","Layer");class XR extends Kf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:y,modelMatrix:E,extensions:M,fetch:H,operation:K,_subLayerProps:de}=this.props,Ie={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:y,modelMatrix:E,extensions:M,fetch:H,operation:K},Fe=de&&e.id&&de[e.id],Xe=Fe&&Fe.updateTriggers,lt=e.id||"sublayer";if(Fe){const gt=this.constructor._propTypes,mt=e.type?e.type._propTypes:{};for(const pt in Fe){const yt=mt[pt]||gt[pt];yt&&"accessor"===yt.type&&(Fe[pt]=this.getSubLayerAccessor(Fe[pt]))}}Object.assign(Ie,e,Fe),Ie.id="".concat(this.props.id,"-").concat(lt),Ie.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...Xe};for(const gt of M){const mt=gt.getSubLayerProps.call(this,gt);mt&&Object.assign(Ie,mt,{updateTriggers:Object.assign(Ie.updateTriggers,mt.updateTriggers)})}return Ie}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=T2(this.renderLayers(),Boolean),this.internalState.subLayers=i),ks("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}Ae(XR,"layerName","CompositeLayer");const pme=/([0-9]+\.?[0-9]*)(%|px)/;function mh(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=pme.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function gh(n,e){return n.relative?Math.round(n.position*e):n.position}class KR{constructor(e){Ae(this,"id",void 0),Ae(this,"viewportInstance",void 0),Ae(this,"_x",void 0),Ae(this,"_y",void 0),Ae(this,"_width",void 0),Ae(this,"_height",void 0),Ae(this,"_padding",void 0),Ae(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};fs(!c||c instanceof uh),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=mh(i),this._y=mh(r),this._width=mh(o),this._height=mh(s),this._padding=a&&{left:mh(a.left||0),right:mh(a.right||0),top:mh(a.top||0),bottom:mh(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&Tg(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:gh(this._x,e),y:gh(this._y,t),width:gh(this._width,e),height:gh(this._height,t)};return this._padding&&(i.padding={left:gh(this._padding.left,e),top:gh(this._padding.top,t),right:gh(this._padding.right,e),bottom:gh(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const mme=(new qn).lookAt({eye:[0,0,1]});function gme({width:n,height:e,near:t,far:i,padding:r}){let o=-n/2,s=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:f=0}=r,m=Yr((l+n-d)/2,0,n)-n/2,y=Yr((h+e-f)/2,0,e)-e/2;o-=m,s-=m,a+=y,c+=y}return(new qn).ortho({left:o,right:s,bottom:a,top:c,near:t,far:i})}class _me extends uh{constructor(e){const{width:t,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,f=Math.min(d,h),m=Math.pow(2,f);let y;if(d!==h){const E=Math.pow(2,d),M=Math.pow(2,h);y={unitsPerMeter:[E/m,M/m,1],metersPerUnit:[m/E,m/M,1]}}super({...e,longitude:void 0,position:a,viewMatrix:mme.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:gme({width:t||1,height:i||1,padding:c,near:r,far:o}),zoom:f,distanceScales:y})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=I0(t,this.pixelUnprojectionMatrix),o=LE([],this.projectFlat(e),O6([],i)),s=LE([],this.center,o);return{target:this.unprojectFlat(s)}}}const O5=()=>{},bme=n=>n;class vme{constructor(e){Ae(this,"getControllerState",void 0),Ae(this,"props",void 0),Ae(this,"propsInTransition",void 0),Ae(this,"transition",void 0),Ae(this,"onViewStateChange",void 0),Ae(this,"onStateChange",void 0),Ae(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=t,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new M0(e.timeline),this.onViewStateChange=e.onViewStateChange||O5,this.onStateChange=e.onStateChange||O5}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),o=t.transitionInterpolator,s=o.getDuration?o.getDuration(e,t):t.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:t.transitionEasing||bme,interpolator:o,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class xme{constructor(e){Ae(this,"_propsToCompare",void 0),Ae(this,"_propsToExtract",void 0),Ae(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!gg(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const o of this._propsToExtract)(o in e||o in t)&&(i[o]=e[o],r[o]=t[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];fs(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const wme=["longitude","latitude","zoom","bearing","pitch"],Eme=["longitude","latitude","zoom"];class qE extends xme{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:wme,required:Eme},super(i.transitionProps),Ae(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(t),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const o of this._propsToExtract)r[o]=_E(e[o]||0,t[o]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...t,...r});Object.assign(r,o.panByPosition(t.aroundPosition,_E(e.around,t.around,i)))}return r}}const _h={transitionDuration:0},JE=n=>1-(1-n)*(1-n),Rg_WHEEL=["wheel"],Rg_PAN=["panstart","panmove","panend"],Rg_PINCH=["pinchstart","pinchmove","pinchend"],Rg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Rg_DOUBLE_TAP=["doubletap"],Rg_KEYBOARD=["keydown"],qf={};class JR{constructor(e){Ae(this,"props",void 0),Ae(this,"state",{}),Ae(this,"transitionManager",void 0),Ae(this,"eventManager",void 0),Ae(this,"onViewStateChange",void 0),Ae(this,"onStateChange",void 0),Ae(this,"makeViewport",void 0),Ae(this,"_controllerState",void 0),Ae(this,"_events",{}),Ae(this,"_interactionState",{isDragging:!1}),Ae(this,"_customEvents",[]),Ae(this,"_eventStartBlocked",null),Ae(this,"_panMove",!1),Ae(this,"invertPan",!1),Ae(this,"dragMode","rotate"),Ae(this,"inertia",0),Ae(this,"scrollZoom",!0),Ae(this,"dragPan",!0),Ae(this,"dragRotate",!0),Ae(this,"doubleClickZoom",!0),Ae(this,"touchZoom",!0),Ae(this,"touchRotate",!1),Ae(this,"keyboard",!0),this.transitionManager=new vme({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&t&&t.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Rg_WHEEL,d&&i),this.toggleEvents(Rg_PAN,d&&(r||o)),this.toggleEvents(Rg_PINCH,d&&(a||c)),this.toggleEvents(Rg_TRIPLE_PAN,d&&c),this.toggleEvents(Rg_DOUBLE_TAP,d&&s),this.toggleEvents(Rg_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,_h,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,_h,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:JE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,_h,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:JE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:t,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,_h,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,_h,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:JE},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return qf._startPinchRotation=e.rotation,qf._lastPinchEvent=e,this.updateViewport(i,_h,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:qf._startPinchRotation-i})}return this.updateViewport(t,_h,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),qf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=qf;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*t/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:JE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return qf._startPinchRotation=null,qf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new qE({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:_h}}class N5{constructor(e,t){Ae(this,"_viewportProps",void 0),Ae(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class P5 extends N5{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:m,startRotationX:y,startRotationOrbit:E,startZoomPosition:M,startZoom:H}=e;super({width:t,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:f,startRotatePos:m,startRotationX:y,startRotationOrbit:E,startZoomPosition:M,startZoom:H}),Ae(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),Yr(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Yr(r[0],i,t),Yr(r[1],i,t)]:Yr(r,i,t),e.rotationX=Yr(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function fle(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class Sme extends JR{constructor(...e){super(...e),Ae(this,"ControllerState",P5),Ae(this,"transition",{transitionDuration:300,transitionInterpolator:new qE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class Cme extends P5{constructor(e){super(e),Ae(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(t)){let[s,a]=t;switch(this.zoomAxis){case"X":s=Yr(s+o,r,i);break;case"Y":a=Yr(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return Yr(t+o,r,i)}}class Mme extends JR{constructor(...e){super(...e),Ae(this,"ControllerState",Cme),Ae(this,"transition",{transitionDuration:300,transitionInterpolator:new qE(["target","zoom"])}),Ae(this,"dragMode","pan")}_onPanRotate(){return!1}}class ZR extends KR{get ViewportType(){return _me}get ControllerType(){return Mme}}Ae(ZR,"displayName","OrthographicView");const QR=Math.PI/180;function Tme({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new qn).lookAt({eye:a,up:s});c.rotateX(i*QR),"Z"===t?c.rotateZ(r*QR):c.rotateY(r*QR);const l=Math.pow(2,o)/n;return c.scale(l),c}class Ime extends uh{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:oR(r);super({...e,longitude:void 0,viewMatrix:Tme({height:t||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),Ae(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=t?r:this.height-r,[a,c,l]=I0([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class F5 extends KR{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return Ime}get ControllerType(){return Sme}}Ae(F5,"displayName","OrbitView");const Dme=[255,255,255],Rme=1;let kme=0;class L5{constructor(e={}){Ae(this,"id",void 0),Ae(this,"color",void 0),Ae(this,"intensity",void 0),Ae(this,"type","ambient");const{color:t=Dme}=e,{intensity:i=Rme}=e;this.id=e.id||"ambient-".concat(kme++),this.color=t,this.intensity=i}}const Ome=[255,255,255],Nme=1,Pme=[0,0,-1];let Fme=0;class B5{constructor(e={}){Ae(this,"id",void 0),Ae(this,"color",void 0),Ae(this,"intensity",void 0),Ae(this,"type","directional"),Ae(this,"direction",void 0),Ae(this,"shadow",void 0);const{color:t=Ome}=e,{intensity:i=Nme}=e,{direction:r=Pme}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(Fme++),this.color=t,this.intensity=i,this.type="directional",this.direction=new Rs(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class Lme{constructor(e,t={id:"pass"}){Ae(this,"id",void 0),Ae(this,"gl",void 0),Ae(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class ZE extends Lme{constructor(...e){super(...e),Ae(this,"_lastRenderIndex",-1)}render(e){return zd(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function jme(n){zd(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const f=o&&o[h.id];s(h);const m=this._getDrawLayerParams(h,e),y=h.subViewports||[h];for(const E of y){const M=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:E,view:f,pass:e.pass,layers:e.layers},m);d.push(M)}}return d}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:o,effects:s,moduleParameters:a}){const c=[],l=j5(this._lastRenderIndex+1),d={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:o},h={};for(let f=0;f<t.length;f++){const m=t[f],y=this._shouldDrawLayer(m,d,r,h),E={shouldDrawLayer:y};y&&(E.layerRenderIndex=l(m,y),E.moduleParameters=this._getModuleParameters(m,s,i,a),E.layerParameters=this.getLayerParameters(m,f,e)),c[f]=E}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function Bme(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,o=e&&e.devicePixelRatio||hg(n);return[i.x*o,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;mc(e,{scissorTest:!0,scissor:l},()=>v2(e,h))}const d={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};zd(e,{viewport:l});for(let h=0;h<t.length;h++){const f=t[h],{shouldDrawLayer:m,layerRenderIndex:y,moduleParameters:E,layerParameters:M}=c[h];if(m&&f.props.pickable&&d.pickableCount++,f.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,y),E.viewport=s;try{f._drawLayer({moduleParameters:E,uniforms:{layerIndex:y},parameters:M})}catch(H){f.raiseError(H,"drawing ".concat(f," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:hg(this.gl)});if(t)for(const c of t){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,t),r)}}function j5(n=0,e={}){const t={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const d=t[c]=t[c]||j5(e[c],e);l=d(r,o),t[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),t[a]=null):l=n;return o&&l>=n&&(n=l+1),e[a]=l,l};return i}class Ume extends ZE{constructor(e,t){super(e,t),Ae(this,"shadowMap",void 0),Ae(this,"depthBuffer",void 0),Ae(this,"fbo",void 0),this.shadowMap=new hs(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new mg(e,{format:33189,width:1,height:1}),this.fbo=new Eo(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;mc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=hg(this.gl),o=i.width*r,s=i.height*r;(o!==t.width||s!==t.height)&&t.resize({width:o,height:s}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const U5="#define SMOOTH_EDGE_RADIUS 0.5",Gme={name:"geometry",vs:"\n".concat(U5,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(U5,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Wme=Object.keys(Ii).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Ii[n],";")).join(""),$me=Object.keys(Bl).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Bl[n],";")).join(""),Yme=Object.keys(fE).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(fE[n],";")).join(""),Xme="".concat(Wme,"\n").concat($me,"\n").concat(Yme,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),Kme={},ek={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Gme],vs:Xme,getUniforms:function qme(n=Kme){return"viewport"in n?function Khe({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=Ii.DEFAULT,coordinateOrigin:r=R6,autoWrapLongitude:o=!1}){i===Ii.DEFAULT&&(i=n.isGeospatial?Ii.LNGLAT:Ii.CARTESIAN);const s=Yhe({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=t||D6,s}(n):{}}},Qme=PE(function rge({viewport:n,center:e}){return new qn(n.viewProjectionMatrix).invert().transform(e)}),ege=PE(function oge({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,o=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(s=>function ige(n,e){const[t,i,r]=n,o=I0([t,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new Rs(n.center).negate()),c=o.map(d=>a.transform(d)),l=(new qn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});t.push(l.multiplyRight(s))}return t}),tge=[0,0,0,1],nge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],tk={name:"shadow",dependencies:[ek],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function sge(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||tge,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=Qme({viewport:n.viewport,center:e.project_uCenter}),o=[],s=ege({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new Rs(n.viewport.center).negate());e.project_uCoordinateSystem===Ii.LNGLAT&&e.project_uProjectionMode===Bl.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(nge),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},age={color:[255,255,255],intensity:1},V5=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],cge=[0,0,0,200/255];class nk{constructor(e={}){Ae(this,"id","lighting-effect"),Ae(this,"props",null),Ae(this,"shadowColor",cge),Ae(this,"shadow",void 0),Ae(this,"ambientLight",null),Ae(this,"directionalLights",[]),Ae(this,"pointLights",[]),Ae(this,"shadowPasses",[]),Ae(this,"shadowMaps",[]),Ae(this,"dummyShadowMap",null),Ae(this,"programManager",void 0),Ae(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=S0.getDefaultProgramManager(e),tk&&this.programManager.addDefaultModule(tk)),this.dummyShadowMap||(this.dummyShadowMap=new hs(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(tk),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new qn).lookAt({eye:new Rs(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new Ume(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new L5(age),this.directionalLights.push(new B5(V5[0]),new B5(V5[1])))}}let lge=1,dge=1;class z5{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=lge++,a={time:0,delay:t,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=dge++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class uge{constructor(e,t,i){Ae(this,"id",void 0),Ae(this,"context",void 0),Ae(this,"isLoaded",void 0),Ae(this,"persistent",void 0),Ae(this,"_loadCount",0),Ae(this,"_subscribers",new Set),Ae(this,"_data",void 0),Ae(this,"_loader",void 0),Ae(this,"_error",void 0),Ae(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=O0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class hge{constructor({gl:e,protocol:t}){Ae(this,"protocol",void 0),Ae(this,"_context",void 0),Ae(this,"_resources",void 0),Ae(this,"_consumers",void 0),Ae(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(t,i):(o=new uge(e,t,this._context),this._resources[e]=o),o.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const fge=[ek],pge=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function mge(n){const e=S0.getDefaultProgramManager(n);for(const t of fge)e.addDefaultModule(t);for(const t of pge)e.addShaderHook(t);return e}class bge{constructor(e,{deck:t,stats:i,viewport:r,timeline:o}={}){Ae(this,"layers",void 0),Ae(this,"context",void 0),Ae(this,"resourceManager",void 0),Ae(this,"_lastRenderedLayers",[]),Ae(this,"_needsRedraw",!1),Ae(this,"_needsUpdate",!1),Ae(this,"_nextLayers",null),Ae(this,"_debug",!1),Ae(this,"activateViewport",s=>{ks("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new hge({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&mge(e),stats:i||new f2({id:"deck.gl"}),viewport:r||new uh({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new z5,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){ks("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=T2(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const s of e)i[s.id]?Ei.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const o=t[r.id];null===o&&Ei.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class yge{constructor(e){Ae(this,"width",void 0),Ae(this,"height",void 0),Ae(this,"views",void 0),Ae(this,"viewState",void 0),Ae(this,"controllers",void 0),Ae(this,"timeline",void 0),Ae(this,"_viewports",void 0),Ae(this,"_viewportMap",void 0),Ae(this,"_isUpdating",void 0),Ae(this,"_needsRedraw",void 0),Ae(this,"_needsUpdate",void 0),Ae(this,"_eventManager",void 0),Ae(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=T2(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Tg(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ei.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const o=e.controller;if(o){const s={...t,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=t[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),this._viewports.unshift(a)}for(const r in t){const o=t[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class xge extends N5{constructor(e){const{width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:m=60,minPitch:y=0,startPanLngLat:E,startZoomLngLat:M,startRotatePos:H,startBearing:K,startPitch:de,startZoom:Ie,normalize:Fe=!0}=e;fs(Number.isFinite(o)),fs(Number.isFinite(r)),fs(Number.isFinite(s)),super({width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:m,minPitch:y,normalize:Fe,position:d},{startPanLngLat:E,startZoomLngLat:M,startRotatePos:H,startBearing:K,startPitch:de,startZoom:Ie}),Ae(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+t,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Yr(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-t.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Yr(r,i,t);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=Yr(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function pfe(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=n;(r<-180||r>180)&&(r=L6(r+180,360)-180),(a<-180||a>180)&&(a=L6(a+180,360)-180);const c=nR(t/512);if(s<=c)s=c,o=0;else{const l=t/2/Math.pow(2,s),d=Mg([0,l])[1];if(o<d)o=d;else{const h=Mg([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:t,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const o=e[0]-t[0],s=e[1]-t[1],a=e[1],c=t[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let f=0;s>0?Math.abs(d-c)>5&&(f=s/(c-d)*1.2):s<0&&c>5&&(f=1-a/c),f=Yr(f,-1,1);const{minPitch:m,maxPitch:y}=this.getViewportProps();let M=i;return f>0?M=i+f*(y-i):f<0&&(M=i-f*(m-i)),{pitch:M,bearing:r+180*h}}}class wge extends JR{constructor(...e){super(...e),Ae(this,"ControllerState",xge),Ae(this,"transition",{transitionDuration:300,transitionInterpolator:new qE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),Ae(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class G5 extends KR{get ViewportType(){return hh}get ControllerType(){return wge}}Ae(G5,"displayName","MapView");class Ege extends ZE{constructor(e,t){super(e,t),Ae(this,"maskMap",void 0),Ae(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new hs(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new Eo(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,mc(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class Mge{constructor(){Ae(this,"id","mask-effect"),Ae(this,"props",null),Ae(this,"useInPicking",!0),Ae(this,"dummyMaskMap",void 0),Ae(this,"channels",[]),Ae(this,"masks",null),Ae(this,"maskPass",void 0),Ae(this,"maskMap",void 0),Ae(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new hs(e,{width:1,height:1}));const a=t.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new Ege(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],d=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:o,views:s,viewport:l,viewportChanged:d})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:o,viewportChanged:s}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,d)=>l!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||s)&&(this.lastViewport=o,e.bounds=function Age({layers:n,viewport:e}){let t=null;for(const o of n){const s=o.getBounds();s&&(t?(t[0]=Math.min(t[0],s[0][0]),t[1]=Math.min(t[1],s[0][1]),t[2]=Math.max(t[2],s[1][0]),t[3]=Math.max(t[3],s[1][1])):t=[s[0][0],s[0][1],s[1][0],s[1][1]])}const i=e.getBounds();if(!t)return i;const r=function Cge(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:o}),c||!gg(e.bounds,a.bounds))){const{maskPass:l,maskMap:d}=this,h=function Sge({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof hh){const{longitude:a,latitude:c,zoom:l}=z6({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new hh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const o=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],s=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new ZR({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:o,zoom:Math.log2(s)}})}({bounds:e.bounds,viewport:o,width:d.width,height:d.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:o}=r.root;let s=t[o];if(!s){if(++i>4){Ei.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>a?.id===o),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[o]=s}s.layers.push(r),s.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const o=this.channels[r];(!o||!(o.id in t))&&(this.channels[r]=null)}for(const r in t){const o=t[r];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Tge=new nk;class Ige{constructor(){Ae(this,"effects",void 0),Ae(this,"_internalEffects",void 0),Ae(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Tg(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Mge),e.some(t=>t instanceof nk)||this._internalEffects.push(Tge)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Dge extends ZE{shouldDrawLayer(e){return"draw"===e.props.operation}}const W5={blendFunc:[1,0,32771,0],blendEquation:32774};class $5 extends ZE{constructor(...e){super(...e),Ae(this,"pickZ",void 0),Ae(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:f,pass:m="picking",pickZ:y}){const E=this.gl;this.pickZ=y;const M=y?null:{byLayer:new Map,byAlpha:[]};this._colors=M;const H=mc(E,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...W5,blend:!y},()=>super.render({target:s,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:f?.filter(de=>de.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:M&&kge.bind(null,M),stats:H}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,W5),r.blend=!0,r.blendColor=function Rge(n,e,t){const{byLayer:i,byAlpha:r}=n;let o,s=i.get(e);return s?(s.viewports.push(t),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[t]},i.set(e,s),r[o]=s):(Ei.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colors,e,i)):r.blend=!1,r}}function kge(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class Nge{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Dge(e),this.pickLayersPass=new $5(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||Eo.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,ks("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new Eo(this.gl),new Eo(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o===this.lastPostProcessEffect){r.target=t.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const Pge={pickedColor:null,pickedObjectIndex:-1};function Fge({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,f=0;for(let m=0;m<l;m++){const y=m+a-i,E=y*y;if(E>d)f+=4*c;else for(let M=0;M<c;M++){if(n[f+3]-1>=0){const K=M+s-t,de=K*K+E;de<=d&&(d=de,h=f)}f+=4}}if(h>=0){const m=n.slice(h,h+4),y=e(m);if(y){const E=Math.floor(h/4/c),M=h/4-E*c;return{...y,pickedColor:m,pickedX:s+M,pickedY:a+E}}Ei.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Pge}function Y5({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function jge(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function Bge(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const f=t.layerId,m=s?s.props.id:null;if(m!==f||a!==t.index){if(m!==f){const y=r.find(E=>E.props.id===f);y&&c.unshift(y)}t.layerId=m,t.index=a,t.info=null}}const l=Y5(n),d=new Map;return d.set(null,l),c.forEach(h=>{let f={...l};h===s&&(f.color=o,f.index=a,f.picked=!0),f=X5({layer:h,info:f,mode:i});const m=f.layer;h===s&&"hover"===i&&(t.info=f),d.set(m.id,f),"hover"===i&&m.updateAutoHighlight(f)}),d}function X5({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class Uge{constructor(e){Ae(this,"gl",void 0),Ae(this,"pickingFBO",void 0),Ae(this,"depthFBO",void 0),Ae(this,"pickLayersPass",void 0),Ae(this,"layerFilter",void 0),Ae(this,"lastPickedInfo",void 0),Ae(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new $5(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(f=>f.id===s):null,l=a&&r.find(f=>f.id===a)||r[0],d=l&&l.unproject([e-l.x,t-l.y]);return{...o,x:e,y:t,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new Eo(i),Eo.isSupported(i,{colorBufferFloat:!0}))){const r=new Eo(i);r.attach({36064:new hs(i,{format:mi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const f=this._getPickable(e),m=hg(this.gl);if(!f)return{result:[],emptyInfo:Y5({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const y=d2(this.gl,[r,o],!0),E=[y.x+Math.floor(y.width/2),y.y+Math.floor(y.height/2)],M=Math.round(s*m),{width:H,height:K}=this.pickingFBO,de=this._getPickingRect({deviceX:E[0],deviceY:E[1],deviceRadius:M,deviceWidth:H,deviceHeight:K}),Ie={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let Fe;const Xe=[],lt=new Set;for(let gt=0;gt<a;gt++){let mt,pt;mt=de?Fge({...this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:de,cullRect:Ie,effects:h,pass:"picking:".concat(c)}),deviceX:E[0],deviceY:E[1],deviceRadius:M,deviceRect:de}):{pickedColor:null,pickedObjectIndex:-1},mt.pickedLayer&&l&&this.depthFBO&&(pt=this._drawAndSample({layers:[mt.pickedLayer],views:t,viewports:i,onViewportActive:d,deviceRect:{x:mt.pickedX,y:mt.pickedY,width:1,height:1},cullRect:Ie,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),mt.pickedLayer&&gt+1<a&&(lt.add(mt.pickedLayer),mt.pickedLayer.disablePickingIndex(mt.pickedObjectIndex)),Fe=Bge({pickInfo:mt,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:o,z:pt,pixelRatio:m});for(const yt of Fe.values())yt.layer&&Xe.push(yt);if(!mt.pickedColor)break}for(const gt of lt)gt.restorePickingColors();return{result:Xe,emptyInfo:Fe.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const m=hg(this.gl),y=d2(this.gl,[r,o],!0),E=y.x,M=y.y+y.height,H=d2(this.gl,[r+s,o+a],!0),de=H.y,Xe=function Lge({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const o=n.slice(i,i+4),s=o.join(",");if(!t.has(s)){const a=e(o);a?t.set(s,{...a,color:o}):Ei.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:{x:E,y:de,width:H.x+H.width-E,height:M-de},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),lt=new Map,gt=Number.isFinite(l);for(let mt=0;mt<Xe.length&&!(gt&&l&&lt.size>=l);mt++){const pt=Xe[mt];let yt={color:pt.pickedColor,layer:null,index:pt.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};yt=X5({layer:pt.pickedLayer,info:yt,mode:c}),lt.has(yt.object)||lt.set(yt.object,yt)}return Array.from(lt.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l}),{x:f,y:m,width:y,height:E}=o,M=new(l?Float32Array:Uint8Array)(y*E*4);return gE(d,{sourceX:f,sourceY:m,sourceWidth:y,sourceHeight:E,target:M}),{pickedColors:M,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,t+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const Vge={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class zge{constructor(e){Ae(this,"el",null),Ae(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Vge),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function K5(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Gge=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),q5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Wge}=(q5&&parseFloat(q5[1]),globalThis),ik=typeof Image<"u",rk=typeof ImageBitmap<"u",ok=!!Gge||!!Wge;function J5(n){const e=function Q5(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Xge=/^data:image\/svg\+xml/,Kge=/\.svg((\?|#).*)?$/;function sk(n){return n&&(Xge.test(n)||Kge.test(n))}function ez(n,e){if(sk(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function tz(n,e,t){return ak.apply(this,arguments)}function ak(){return ak=jt(function*(n,e,t){const i=function qge(n,e){if(sk(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return ez(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Jge(n,e){return ck.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),ak.apply(this,arguments)}function ck(){return ck=jt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),ck.apply(this,arguments)}const Zge={};let nz=!0;function lk(){return lk=jt(function*(n,e,t){let i;i=sk(t)?yield tz(n,e,t):ez(n,t);const r=e&&e.imagebitmap;return yield function e_e(n){return dk.apply(this,arguments)}(i,r)}),lk.apply(this,arguments)}function dk(){return dk=jt(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function t_e(n){for(const e in n||Zge)return!1;return!0}(e)||!nz)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),nz=!1}return yield createImageBitmap(n)}),dk.apply(this,arguments)}const $l=!1,N0=!0;function iz(n){const e=P0(n);return function c_e(n){const e=P0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,$l)?{mimeType:"image/png",width:e.getUint32(16,$l),height:e.getUint32(20,$l)}:null}(e)||function u_e(n){const e=P0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,$l)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function h_e(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,$l);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,$l),width:e.getUint16(o+7,$l)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,$l)}return null}(e)||function l_e(n){const e=P0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,$l)?{mimeType:"image/gif",width:e.getUint16(6,N0),height:e.getUint16(8,N0)}:null}(e)||function d_e(n){const e=P0(n);return e.byteLength>=14&&16973===e.getUint16(0,$l)&&e.getUint32(2,N0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,N0),height:e.getUint32(22,N0)}:null}(e)||function a_e(n){const t=function n_e(n){return function s_e(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function o_e(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function i_e(n){switch(function r_e(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function P0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function uk(){return uk=jt(function*(n,e){const{mimeType:t}=iz(n)||{},i=globalThis._parseImageNode;return K5(i),yield i(n,t)}),uk.apply(this,arguments)}function hk(){return hk=jt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function m_e(n){switch(n){case"auto":case"data":return function Yge(){if(rk)return"imagebitmap";if(ik)return"image";if(ok)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function $ge(n){switch(n){case"auto":return rk||ik||ok;case"imagebitmap":return rk;case"image":return ik;case"data":return ok;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function Qge(n,e,t){return lk.apply(this,arguments)}(n,e,o);break;case"image":a=yield tz(n,e,o);break;case"data":a=yield function f_e(n,e){return uk.apply(this,arguments)}(n,e);break;default:K5(!1)}return"data"===r&&(a=function Z5(n){switch(J5(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),hk.apply(this,arguments)}const rz={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function p_e(n,e,t){return hk.apply(this,arguments)},tests:[n=>!!iz(new DataView(n))],options:{image:{type:"auto",decode:!0}}},__e={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function g_e(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},F0="8.8.27",QE=globalThis.deck&&globalThis.deck.VERSION;if(QE&&QE!==F0)throw new Error("deck.gl - multiple versions detected: ".concat(QE," vs ").concat(F0));QE||(Ei.log(1,"deck.gl ".concat(F0))(),globalThis.deck={...globalThis.deck,VERSION:F0,version:F0,log:Ei,_registerLoggers:function Sle(n){k2=n}},C5([__e,[rz,{imagebitmap:{premultiplyAlpha:"none"}}]]));const b_e=globalThis.deck;class eA extends Hd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=mi(e),r=g8(e,"TIMER_QUERY");let o=i||r;for(const s of t)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Jt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return eA.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const oz=Ll()&&typeof document<"u";let T_e=0;class I_e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(M=>ZV(M)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:m=!0,stats:y=Hf.get("animation-loop-".concat(T_e++))}=e;let{useDevicePixels:E=!0}=e;"useDevicePixelRatio"in e&&(hn.deprecated("useDevicePixelRatio","useDevicePixels")(),E=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=y,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:m,useDevicePixels:E}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Jt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=eA.isSupported(this.gl,["timers"])?new eA(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return jt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return hn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=oz?new Promise((e,t)=>{oz&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function M_e(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function C_e(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?h2(this.props.gl,e):this.onCreateContext(e),!pE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Kae(n){zd(n,l2)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function ece(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function qae(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function oce(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(hn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const o=n.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(hn.warn("Device pixel ratio clamped")(),s=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*s),n.canvas.height=Math.floor(r*s)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Eo(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var tA=g(7271);const D_e={mousedown:1,mousemove:2,mouseup:4};(function k_e(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function R_e(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(tA.PointerEventInput),function O_e(n){n.prototype.handler=function(t){let i=D_e[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(tA.MouseInput);const N_e=tA.Manager,Yl=tA;class nA{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const P_e=Yl?[[Yl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Yl.Rotate,{enable:!1}],[Yl.Pinch,{enable:!1}],[Yl.Swipe,{enable:!1}],[Yl.Pan,{threshold:0,enable:!1}],[Yl.Press,{enable:!1}],[Yl.Tap,{event:"doubletap",taps:2,enable:!1}],[Yl.Tap,{event:"anytap",enable:!1}],[Yl.Tap,{enable:!1}]]:null,cz={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},F_e={doubletap:["tap"]},L_e={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},pk={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},B_e={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},lz={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},j_e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",kg=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let mk=!1;try{kg.addEventListener("test",null,{get passive(){return mk=!0,!0}}),kg.removeEventListener("test",null)}catch{mk=!1}const U_e=-1!==j_e.indexOf("firefox"),{WHEEL_EVENTS:V_e}=pk,uz=4.000244140625;class G_e extends nA{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;kg.WheelEvent&&(U_e&&r.deltaMode===kg.WheelEvent.DOM_DELTA_PIXEL&&(o/=kg.devicePixelRatio),r.deltaMode===kg.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%uz==0&&(o=Math.floor(o/uz)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(V_e),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!mk&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:W_e}=pk,hz="pointermove",fz="pointerover",pz="pointerout",mz="pointerenter",gz="pointerleave";class $_e extends nA{constructor(e,t,i){super(e,t,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(W_e),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===hz&&(this.enableMoveEvent=t),e===fz&&(this.enableOverEvent=t),e===pz&&(this.enableOutEvent=t),e===mz&&(this.enableEnterEvent=t),e===gz&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(fz,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(pz,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(mz,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(gz,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(hz,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:Y_e}=pk,_z="keydown";class X_e extends nA{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:_z,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Y_e),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===_z&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const yz="contextmenu";class K_e extends nA{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:yz,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===yz&&(this.options.enable=t)}}const q_e={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function sbe(n){const e=q_e[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&t),s=!!(4&t),a=!!(2&t)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function abe(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const bk={srcElement:"root",priority:0};class cbe{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=bk;"string"==typeof i||i&&i.addEventListener?c={...bk,srcElement:i}:i&&(c={...bk,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===t){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...sbe(e),...abe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const lbe={events:null,recognizers:null,recognizerOptions:{},Manager:N_e,touchAction:"none",tabIndex:0};class dbe{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:o}=r,s=L_e[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...lbe,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||P_e}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(cz).forEach(r=>{const o=this.manager.get(r);o&&cz[r].forEach(s=>{o.recognizeWith(s)})});for(const r in t.recognizerOptions){const o=this.manager.get(r);if(o){const s=t.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new G_e(e,this._onOtherEvent,{enable:!1}),this.moveInput=new $_e(e,this._onOtherEvent,{enable:!1}),this.keyInput=new X_e(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new K_e(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const o=F_e[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);t?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,o){if("string"!=typeof e){i=t;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=lz[e]||e;let l=a.get(c);l||(l=new cbe(this),a.set(c,l),l.recognizerName=B_e[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,t,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(lz[e]||e);if(o&&(o.remove(e,t),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Jf(){}const vz={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Jf,onResize:Jf,onViewStateChange:Jf,onInteractionStateChange:Jf,onBeforeRender:Jf,onAfterRender:Jf,onLoad:Jf,onError:n=>Ei.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class yk{constructor(e){Ae(this,"props",void 0),Ae(this,"width",0),Ae(this,"height",0),Ae(this,"userData",{}),Ae(this,"canvas",null),Ae(this,"viewManager",null),Ae(this,"layerManager",null),Ae(this,"effectManager",null),Ae(this,"deckRenderer",null),Ae(this,"deckPicker",null),Ae(this,"eventManager",null),Ae(this,"tooltip",null),Ae(this,"metrics",void 0),Ae(this,"animationLoop",void 0),Ae(this,"stats",void 0),Ae(this,"viewState",void 0),Ae(this,"cursorState",void 0),Ae(this,"_needsRedraw",void 0),Ae(this,"_pickRequest",void 0),Ae(this,"_lastPointerDownInfo",null),Ae(this,"_metricsCounter",void 0),Ae(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),Ae(this,"_onEvent",t=>{const i=FV[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,t)),!d&&l&&l(s,t)}),Ae(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...vz,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Ei.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===m6()&&Ei.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new f2({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&b0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,o,s,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ei.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ei.removed("onLayerClick","onClick")(),e.initialViewState&&!Tg(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return t=t||i||r||o||s,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return fs(this.viewManager),this.viewManager.views}getViewports(e){return fs(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){fs(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),o}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),fs(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const o=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new I_e({width:t,height:i,useDevicePixels:d,autoResizeViewport:!1,gl:r,onCreateContext:h=>ZV({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new G5({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var t;o=a,s=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,h2(e,{enable:!0,copyState:!0})),this.tooltip=new zge(this.canvas),zd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new z5;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new dbe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in FV)this.eventManager.on(r,this._onEvent);this.viewManager=new yge({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new bge(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new Ige,this.deckRenderer=new Nge(e),this.deckPicker=new Uge(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;zd(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ei.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=Hf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}Ae(yk,"defaultProps",vz),Ae(yk,"VERSION",b_e.VERSION);const rA={name:"project32",dependencies:[ek],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},ube={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},oA={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function hbe(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ube;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},xz={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class bh{static get DRAW_MODE(){return xz}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=_a("geometry"),drawMode:i=xz.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Jt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Jt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Jt(Number.isFinite(i)),i}}const wz=()=>{},Ez={10241:9987,10240:9729,10242:33071,10243:33071};function _be(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function bbe(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function L0(n){return n&&(n.id||n.url)}function Az(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];n[L0(r)]={...r,x:o,y:t}}}class wbe{constructor(e,{onUpdate:t=wz,onError:i=wz}){Ae(this,"gl",void 0),Ae(this,"onUpdate",void 0),Ae(this,"onError",void 0),Ae(this,"_loadOptions",null),Ae(this,"_texture",null),Ae(this,"_externalTexture",null),Ae(this,"_mapping",{}),Ae(this,"_textureParameters",null),Ae(this,"_pendingCount",0),Ae(this,"_autoPacking",!1),Ae(this,"_xOffset",0),Ae(this,"_yOffset",0),Ae(this,"_rowHeight",0),Ae(this,"_buffer",4),Ae(this,"_canvasWidth",1024),Ae(this,"_canvasHeight",0),Ae(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?L0(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function xbe(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:o}=EE(n);for(const s of r){o.index++;const a=e(s,o),c=L0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function vbe({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[L0(l)]){const{height:h,width:f}=l;i+f+e>s&&(Az(t,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,o=Math.max(o,h)}}return a.length>0&&Az(t,a,r),{mapping:t,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:_be(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new hs(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||Ez})),this._texture.height!==this._canvasHeight&&(this._texture=function ybe(n,e,t,i){const r=n.width,o=n.height,s=new hs(n.gl,{width:e,height:t,parameters:i});return function Ice(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=t;const{framebuffer:f,deleteFramebuffer:m}=_0(n);Jt(f);const{gl:y,handle:E}=f,M=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const H=y.bindFramebuffer(36160,E);Jt(e);let K=null;if(e instanceof Gf&&(K=e,d=Number.isFinite(d)?d:K.width,h=Number.isFinite(h)?h:K.height,K.bind(0),e=K.target),M)switch(e){case 3553:case 34067:y.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:Ds(y).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else y.copyTexImage2D(e,o,s,i,r,d,h,0);K&&K.unbind(),y.bindFramebuffer(36160,H||null),m&&f.delete()}(n,s,{targetY:0,width:r,height:o}),n.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Ez)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,O0(i.url,rz,this._loadOptions).then(r=>{const o=L0(i),{x:s,y:a,width:c,height:l}=this._mapping[o],d=bbe(t,r,c,l);this._texture.setSubImageData({data:d,x:s,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const Sz=[0,0,0,255],Ebe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:Sz},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class vk extends Kf{constructor(...e){super(...e),Ae(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[rA,oA]})}initializeState(){this.state={iconManager:new wbe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Sz},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=t,{iconManager:h}=this.state,f=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:t.loadOptions,autoPacking:!f,iconAtlas:s,iconMapping:f?a:null,textureParameters:d}),f?i.iconMapping!==t.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:y}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(y),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:fE[o],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new wg(e,{...this.getShaders(),id:this.props.id,geometry:new bh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):Ei.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[t,i,r,o]}}Ae(vk,"defaultProps",Ebe),Ae(vk,"layerName","IconLayer");const Mz=[];class xk extends vk{constructor(...e){super(...e),Ae(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&Ei.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:o},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):Mz}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):Mz}}Ae(xk,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),Ae(xk,"layerName","MultiIconLayer");var Cbe=g(822),Mbe=g.n(Cbe);const Tbe=32,Ibe=[];function Dbe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Tz(n,e,t,i){let r=0;for(let s=e;s<t;s++){var o;r+=(null===(o=i[n[s]])||void 0===o?void 0:o.width)||0}return r}function Iz(n,e,t,i,r,o){let s=e,a=0;for(let c=e;c<t;c++){const l=Tz(n,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function Obe(n,e,t,i,r=0,o){void 0===o&&(o=n.length);const s=[];return"break-all"===e?Iz(n,r,o,t,i,s):function kbe(n,e,t,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<t;d++)if((" "===n[d]||" "===n[d+1]||d+1===t)&&(c=d+1),c>a){let h=Tz(n,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=Iz(n,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(n,r,o,t,i,s),s}function Nbe(n,e,t,i,r,o){let s=0,a=0;for(let c=e;c<t;c++){const l=n[c],d=i[l];d?(a||(a=d.height),r[c]=s+d.width/2,s+=d.width):(Ei.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=Tbe)}o[0]=s,o[1]=a}function Dz(n,e,t,i,r){const o=Array.from(n),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let m=0,y=0,E=0;for(let M=0;M<=s;M++){const H=o[M];if(("\n"===H||M===s)&&(E=M),E>y){const K=d?Obe(o,t,i,r,y,E):Ibe;for(let de=0;de<=K.length;de++){const Ie=0===de?y:K[de-1],Fe=de<K.length?K[de]:E;Nbe(o,Ie,Fe,r,a,f);for(let Xe=Ie;Xe<Fe;Xe++)c[Xe]=m+f[1]/2,l[Xe]=f[0];m+=f[1]*e,h[0]=Math.max(h[0],f[0])}y=E}"\n"===H&&(a[y]=0,c[y]=0,l[y]=0,y++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}class Rz{constructor(e=5){Ae(this,"limit",void 0),Ae(this,"_cache",{}),Ae(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const B0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Fbe(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let sA=new Rz(3);function jbe(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function Pz(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class Vbe{constructor(){Ae(this,"props",{...B0}),Ae(this,"_key",void 0),Ae(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function Bbe(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=sA.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=sA.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const o=this._generateFontAtlas(this._key,i,r);this._atlas=o,sA.set(this._key,o)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:o,fontSize:s,buffer:a,sdf:c,radius:l,cutoff:d}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");Pz(f,r,s,o);const{mapping:m,canvasHeight:y,xOffset:E,yOffset:M}=function Rbe({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;for(const h of n)if(!o[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*(t+2*i)+i,width:f,height:t},l+=f+2*i}const d=t+2*i;return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:Dbe(a+(c+1)*d)}}({getFontWidth:H=>f.measureText(H).width,fontHeight:1.2*s,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==y){const H=f.getImageData(0,0,h.width,h.height);h.height=y,f.putImageData(H,0,0)}if(Pz(f,r,s,o),c){const H=new(Mbe())(s,a,l,d,r,o),K=f.getImageData(0,0,H.size,H.size);for(const de of t)jbe(H.draw(de),K),f.putImageData(K,m[de].x-a,m[de].y+a)}else for(const H of t)f.fillText(H,m[H].x,m[H].y+.9*s);return{xOffset:E,yOffset:M,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const Gbe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class wk extends Kf{constructor(...e){super(...e),Ae(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[rA,oA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:fE[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new wg(e,{...this.getShaders(),id:this.props.id,geometry:new bh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}Ae(wk,"defaultProps",Gbe),Ae(wk,"layerName","TextBackgroundLayer");const Fz={start:1,middle:0,end:-1},Lz={top:1,center:0,bottom:-1},Ek=[0,0,0,255],$be={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Ek},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:B0.characterSet},fontFamily:B0.fontFamily,fontWeight:B0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Ek},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:Ek},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Ak extends XR{constructor(...e){super(...e),Ae(this,"state",void 0),Ae(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{size:[f,m]}=Dz(h,c,s,a,r);return[(Fz["function"==typeof l?l(t,i):l]-1)*f/2,(Lz["function"==typeof d?d(t,i):d]-1)*m/2,f,m]}),Ae(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{x:f,y:m,rowWidth:y,size:[E,M]}=Dz(h,c,s,a,r),H=Fz["function"==typeof l?l(t,i):l],K=Lz["function"==typeof d?d(t,i):d],de=f.length,Ie=new Array(2*de);let Fe=0;for(let Xe=0;Xe<de;Xe++)Ie[Fe++]=(H-1)*E/2+(1-H)*(E-y[Xe])/2+f[Xe],Ie[Fe++]=(K-1)*M/2+m[Xe];return Ie})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Vbe}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=t.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function Pbe({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:o}){const s=n.BYTES_PER_ELEMENT,a=t?t/s:1,c=i?i/s:0,l=r[e]||Math.ceil((n.length-c)/a),d=o&&new Set,h=new Array(e);let f=n;if(a>1||c>0){f=new(0,n.constructor)(l);for(let y=0;y<l;y++)f[y]=n[y*a+c]}for(let m=0;m<e;m++){const M=f.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,M),d&&M.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:s,characterSet:c});a=d,o=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:d}=EE(t);s=[0],a=0;for(const h of l){d.index++;const f=Array.from(o(h,d)||"");c&&f.forEach(c.add,c),a+=f.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:y,getBackgroundColor:E,getBorderColor:M,getBorderWidth:H,backgroundPadding:K,background:de,billboard:Ie,fontSettings:Fe,outlineWidth:Xe,outlineColor:lt,sizeScale:gt,sizeUnits:mt,sizeMinPixels:pt,sizeMaxPixels:yt,transitions:Ct,updateTriggers:dt}=this.props,ht=this.getSubLayerClass("characters",xk),Ot=this.getSubLayerClass("background",wk);return[de&&new Ot({getFillColor:E,getLineColor:M,getLineWidth:H,padding:K,getPosition:d,getSize:f,getAngle:m,getPixelOffset:y,billboard:Ie,sizeScale:gt/this.state.fontAtlasManager.props.fontSize,sizeUnits:mt,sizeMinPixels:pt,sizeMaxPixels:yt,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getSize:Ct.getSize,getFillColor:Ct.getBackgroundColor,getLineColor:Ct.getBorderColor,getLineWidth:Ct.getBorderWidth,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:dt.getPosition,getAngle:dt.getAngle,getSize:dt.getSize,getFillColor:dt.getBackgroundColor,getLineColor:dt.getBorderColor,getLineWidth:dt.getBorderWidth,getPixelOffset:dt.getPixelOffset,getBoundingRect:{getText:dt.getText,getTextAnchor:dt.getTextAnchor,getAlignmentBaseline:dt.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new ht({sdf:Fe.sdf,smoothing:Number.isFinite(Fe.smoothing)?Fe.smoothing:B0.smoothing,outlineWidth:Xe,outlineColor:lt,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:y,billboard:Ie,sizeScale:gt*r,sizeUnits:mt,sizeMinPixels:pt*r,sizeMaxPixels:yt*r,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getColor:Ct.getColor,getSize:Ct.getSize,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:dt.getText,getPosition:dt.getPosition,getAngle:dt.getAngle,getColor:dt.getColor,getSize:dt.getSize,getPixelOffset:dt.getPixelOffset,getIconOffsets:{getText:dt.getText,getTextAnchor:dt.getTextAnchor,getAlignmentBaseline:dt.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function Ube(n){Ei.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),sA=new Rz(n)}(e)}}Ae(Ak,"defaultProps",$be),Ae(Ak,"layerName","TextLayer");const Bz="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Ybe={lightSources:{}};function Sk(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const Ck={name:"lights",vs:Bz,fs:Bz,getUniforms:function jz(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ybe;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function Xbe(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?Sk(e):[0,0,0],t.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=Sk(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=Sk(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return jz({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Kbe={};const Jbe={name:"phong-lighting",dependencies:[Ck],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function Vz(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kbe;if(!("material"in n))return{};const{material:e}=n;return e?function qbe(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},Mk=Math.PI/180,aA=new Float32Array(16),zz=new Float32Array(12);function Hz(n,e,t){const i=e[0]*Mk,r=e[1]*Mk,o=e[2]*Mk,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),f=t[0],m=t[1],y=t[2];n[0]=f*h*d,n[1]=f*c*d,n[2]=f*-a,n[3]=m*(-c*l+h*a*s),n[4]=m*(h*l+c*a*s),n[5]=m*d*s,n[6]=y*(c*s+h*a*l),n[7]=y*(-h*s+c*a*l),n[8]=y*d*l}function Gz(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const Wz={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),f=Array.isArray(s),m=l||!c&&!!a(i[0]);n.constant=m?l:h&&d&&f;const y=n.value;if(n.constant){let E;m?(aA.set(a),E=Gz(aA)):(E=zz,Hz(E,r,o),E.set(s,9)),n.value=new Float32Array(E)}else{let E=e*n.size;const{iterable:M,objectInfo:H}=EE(i,e,t);for(const K of M){let de;H.index++,m?(aA.set(l?a:a(K,H)),de=Gz(aA)):(de=zz,Hz(de,h?r:r(K,H),d?o:o(K,H)),de.set(f?s:s(K,H),9)),y[E++]=de[0],y[E++]=de[1],y[E++]=de[2],y[E++]=de[3],y[E++]=de[4],y[E++]=de[5],y[E++]=de[6],y[E++]=de[7],y[E++]=de[8],y[E++]=de[9],y[E++]=de[10],y[E++]=de[11]}}}};function $z(n,e){return e===Ii.CARTESIAN||e===Ii.METER_OFFSETS||e===Ii.DEFAULT&&!n.isGeospatial}function Yz(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Ei.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function eye(n,e){if(n.attributes)return Yz(n.attributes,e),n instanceof bh?n:new bh(n);if(n.positions||n.POSITION)return Yz(n,e),new bh({attributes:n});throw Error("Invalid mesh")}class Tk extends Kf{constructor(...e){super(...e),Ae(this,"state",void 0)}getShaders(){const e=!mi(this.context.gl),t={};return E2(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[rA,Jbe,oA],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Wz}),this.setState({emptyTexture:new hs(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var o;if(null===(o=this.state.model)||void 0===o||o.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const s=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||$z(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new wg(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:eye(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}Ae(Tk,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),Ae(Tk,"layerName","SimpleMeshLayer");const Xz={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[Ck]};class Og{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||_a(this.constructor.name),this.display=!0,this.position=new Rs,this.rotation=new Rs,this.scale=new Rs(1,1,1),this.matrix=new qn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Jt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Jt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Jt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:o=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){Jt(e),t=t||this.matrix;const i=new qn(e).multiplyRight(t),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class j0 extends Og{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;hn.assert(t.every(i=>i instanceof Og),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const o=t.getBounds();if(!o)return;const[s,a]=o,c=new Rs(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new Rs(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new Rs(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new qn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new qn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof j0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let cA;class Ik extends x8{static get ZERO(){return cA||(cA=new Ik(0,0,0,0),Object.freeze(cA)),cA}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),Gd(e)&&1===arguments.length?this.copy(e):(po.debug&&(gi(e),gi(t),gi(i),gi(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return po.debug&&(gi(e.x),gi(e.y),gi(e.z),gi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=gi(e)}get w(){return this[3]}set w(e){this[3]=gi(e)}transform(e){return S2(this,this,e),this.check()}transformByMatrix3(e){return function hle(n,e,t){const i=e[0],r=e[1],o=e[2];n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function ule(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return S8(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function Kz(){var n=new ya(4);return ya!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function qz(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function Jz(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}var Qz=T6,gye=function(){var n=w8(),e=E8(1,0,0),t=E8(0,1,0);return function(i,r,o){var s=A8(r,o);return s<-.999999?(vE(n,e,r),function Zce(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&vE(n,t,r),function tle(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),qz(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(vE(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function jhe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();Kz(),Kz(),function nye(){var n=new ya(9);ya!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const _ye=[0,0,0,1];class Dk extends bE{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function Zz(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return qz(this,e,t),this.check()}identity(){return function iye(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=gi(e)}get y(){return this[1]}set y(e){this[1]=gi(e)}get z(){return this[2]}set z(e){this[2]=gi(e)}get w(){return this[3]}set w(e){this[3]=gi(e)}len(){return function Lhe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function Bhe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function Uhe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return gye(this,e,t),this.check()}add(e){return function Fhe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function aye(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function uye(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function dye(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function Vhe(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return Jz(this,this,e),this.check()}multiplyLeft(e){return Jz(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function rye(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function oye(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function sye(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return Qz(this,this,e),this.check()}slerp(e,t,i){let r,o,s;switch(arguments.length){case 1:({start:r=_ye,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=t;break;default:r=e,o=t,s=i}return function lA(n,e,t,i){var f,m,y,E,M,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>Ul?(f=Math.acos(m),y=Math.sin(f),E=Math.sin((1-i)*f)/y,M=Math.sin(i*f)/y):(E=1-i,M=i),n[0]=E*r+M*c,n[1]=E*o+M*l,n[2]=E*s+M*d,n[3]=E*a+M*h,n}(this,r,o,s),this.check()}transformVector4(e,t=new Ik){return function zhe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),yE(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const bye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function nH(n){if(!n._animation){const e=yye[n.componentType],t=bye[n.type],i=t*n.count,{buffer:r,byteOffset:o}=n.bufferView.data,s=new e(r,o+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=t)a.push(Array.from(s.slice(c,c+t)));n._animation=a}}return n._animation}const vye=new qn,Rk=new Dk;class Cye{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function Sye(n,e,t,i){let{input:r,interpolation:o,output:s}=e;const c=n%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:hn.warn("Bad animation path ".concat(i))()}Jt(t[i].length===s[d].length);const h=r[d],f=r[l];switch(o){case"STEP":!function Aye(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,s[d]);break;case"LINEAR":f>h&&function wye(n,e,t,i,r){if("rotation"===e){Rk.slerp({start:t,target:i,ratio:r});for(let o=0;o<Rk.length;o++)n[e][o]=Rk[o]}else for(let o=0;o<t.length;o++)n[e][o]=r*i[o]+(1-r)*t[o]}(t,i,s[d],s[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function Eye(n,e,t){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const d=r[l]*a,h=o[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(t,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:hn.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function xye(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=vye.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class Mye{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),o=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:nH(e.accessors[c]),interpolation:l,output:nH(e.accessors[d])}}),s=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new Cye({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class Tye extends Og{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof wg?(this.model=e,this._setModelNodeProps(t)):this.model=new wg(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class Iye{constructor(e,t){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},E2(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new hs(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(hn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function iH(n,e){return mi(n)?"#version 300 es\n".concat(e):e}const Oye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nye={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Pye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},Nye,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Mye(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new j0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new j0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new qn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new j0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){hn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function kye(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new Iye(n,e);hn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new Tye(n,{id:t,drawMode:i,vertexCount:r,modules:[Xz],parameters:a.parameters,vs:iH(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:iH(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...s,defines:{...a.defines,...s.defines}});return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),hn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new sr(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new ba({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Oye[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var U0=g(9125);const jye="3.2.13",kk={};function Zf(n){return Ok.apply(this,arguments)}function Ok(){return Ok=jt(function*(n,e=null,t={}){return e&&(n=function Uye(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:ph?t.CDN?(zl(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(jye,"/dist/libs/").concat(n)):AR?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),kk[n]=kk[n]||function Vye(n){return Nk.apply(this,arguments)}(n),yield kk[n]}),Ok.apply(this,arguments)}function Nk(){return Nk=jt(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!ph)try{return U0&&U0.requireFromFile&&(yield U0.requireFromFile(n))}catch{return null}return AR?importScripts(n):function zye(n,e){if(!ph)return U0.requireFromString&&U0.requireFromString(n,e);if(AR)return eval.call(ppe,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),Nk.apply(this,arguments)}const Hye="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),Gye="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let Pk,Bk;function oH(n){return Fk.apply(this,arguments)}function Fk(){return Fk=jt(function*(n){const e=n.modules||{};return e.basis?e.basis:(Pk=Pk||function Wye(n){return Lk.apply(this,arguments)}(n),yield Pk)}),Fk.apply(this,arguments)}function Lk(){return Lk=jt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Zf("basis_transcoder.js","textures",n),yield Zf("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function $ye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,t)}),Lk.apply(this,arguments)}function sH(n){return jk.apply(this,arguments)}function jk(){return jk=jt(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(Bk=Bk||function Yye(n){return Uk.apply(this,arguments)}(n),yield Bk)}),jk.apply(this,arguments)}function Uk(){return Uk=jt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Zf(Gye,"textures",n),yield Zf(Hye,"textures",n)]),e=e||globalThis.BASIS,yield function Xye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,t)}),Uk.apply(this,arguments)}const Kye=["","WEBKIT_","MOZ_"],aH={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let dA=null;var Vk,uA,zk,hA,lH,Hk,dH,uH;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(Vk||(Vk={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(uA||(uA={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(zk||(zk={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(hA||(hA={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}(lH||(lH={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(Hk||(Hk={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(dH||(dH={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(uH||(uH={}));const Ga=[171,75,84,88,32,50,48,187,13,10,26,10],t0e={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function Wk(){return Wk=jt(function*(n,e){if("auto"===e.basis.containerFormat){if(function e0e(n){const e=new Uint8Array(n);return!(e.byteLength<Ga.length||e[0]!==Ga[0]||e[1]!==Ga[1]||e[2]!==Ga[2]||e[3]!==Ga[3]||e[4]!==Ga[4]||e[5]!==Ga[5]||e[6]!==Ga[6]||e[7]!==Ga[7]||e[8]!==Ga[8]||e[9]!==Ga[9]||e[10]!==Ga[10]||e[11]!==Ga[11])}(n))return pH((yield sH(e)).KTX2File,n,e);const{BasisFile:t}=yield oH(e);return $k(t,n,e)}if("encoder"===e.basis.module){const t=yield sH(e);return"ktx2"===e.basis.containerFormat?pH(t.KTX2File,n,e):$k(t.BasisFile,n,e)}{const{BasisFile:i}=yield oH(e);return $k(i,n,e)}}),Wk.apply(this,arguments)}function $k(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(i0e(i,s,l,t));o.push(c)}return o}finally{i.close(),i.delete()}}function i0e(n,e,t,i){const r=n.getImageWidth(e,t),o=n.getImageHeight(e,t),s=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=mH(i,s),d=n.getImageTranscodedSizeInBytes(e,t,l),h=new Uint8Array(d);if(!n.transcodeImage(h,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function pH(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(r0e(i,s,t));break}return[o]}finally{i.close(),i.delete()}}function r0e(n,e,t){const{alphaFlag:i,height:r,width:o}=n.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=mH(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!n.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,hasAlpha:i,format:a}}function mH(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=gH()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),t0e[t]}function gH(){const n=function qye(n){if(!dA){n=n||function Jye(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,dA=new Set;for(const e of Kye)for(const t in aH)n&&n.getExtension("".concat(e).concat(t))&&dA.add(aH[t])}return dA}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const o0e={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function n0e(n,e){return Wk.apply(this,arguments)}};function Qf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const pA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),_H=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:a0e}=(_H&&parseFloat(_H[1]),globalThis),Yk=typeof Image<"u",Xk=typeof ImageBitmap<"u",Kk=!!pA||!!a0e;function bH(n){const e=function vH(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const d0e=/^data:image\/svg\+xml/,u0e=/\.svg((\?|#).*)?$/;function qk(n){return n&&(d0e.test(n)||u0e.test(n))}function xH(n,e){if(qk(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function wH(n,e,t){return Jk.apply(this,arguments)}function Jk(){return Jk=jt(function*(n,e,t){const i=function h0e(n,e){if(qk(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return xH(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function f0e(n,e){return Zk.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),Jk.apply(this,arguments)}function Zk(){return Zk=jt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),Zk.apply(this,arguments)}const p0e={};let EH=!0;function Qk(){return Qk=jt(function*(n,e,t){let i;i=qk(t)?yield wH(n,e,t):xH(n,t);const r=e&&e.imagebitmap;return yield function g0e(n){return eO.apply(this,arguments)}(i,r)}),Qk.apply(this,arguments)}function eO(){return eO=jt(function*(n,e=null){if((function _0e(n){for(const e in n||p0e)return!1;return!0}(e)||!EH)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),EH=!1}return yield createImageBitmap(n)}),eO.apply(this,arguments)}const Kl=!1,z0=!0;function tO(n){const e=H0(n);return function b0e(n){const e=H0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Kl)?{mimeType:"image/png",width:e.getUint32(16,Kl),height:e.getUint32(20,Kl)}:null}(e)||function x0e(n){const e=H0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Kl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function w0e(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,Kl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Kl),width:e.getUint16(o+7,Kl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,Kl)}return null}(e)||function y0e(n){const e=H0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Kl)?{mimeType:"image/gif",width:e.getUint16(6,z0),height:e.getUint16(8,z0)}:null}(e)||function v0e(n){const e=H0(n);return e.byteLength>=14&&16973===e.getUint16(0,Kl)&&e.getUint32(2,z0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,z0),height:e.getUint32(22,z0)}:null}(e)}function H0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function nO(){return nO=jt(function*(n,e){const{mimeType:t}=tO(n)||{},i=globalThis._parseImageNode;return Qf(i),yield i(n,t)}),nO.apply(this,arguments)}function iO(){return iO=jt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function S0e(n){switch(n){case"auto":case"data":return function l0e(){if(Xk)return"imagebitmap";if(Yk)return"image";if(Kk)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function c0e(n){switch(n){case"auto":return Xk||Yk||Kk;case"imagebitmap":return Xk;case"image":return Yk;case"data":return Kk;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function m0e(n,e,t){return Qk.apply(this,arguments)}(n,e,o);break;case"image":a=yield wH(n,e,o);break;case"data":a=yield function E0e(n,e){return nO.apply(this,arguments)}(n,e);break;default:Qf(!1)}return"data"===r&&(a=function yH(n){switch(bH(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),iO.apply(this,arguments)}const C0e={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function A0e(n,e,t){return iO.apply(this,arguments)},tests:[n=>!!tO(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function AH(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function SH(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function Wa(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function CH(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function G0(n,e){return Qf(n>=0),Qf(e>0),n+(e-1)&~(e-1)}function I0e(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+G0(i.byteLength,4)}const TH=["SCALAR","VEC2","VEC3","VEC4"],D0e=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],R0e=new Map(D0e),k0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O0e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},N0e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function IH(n){return TH[n-1]||TH[0]}function DH(n){const e=R0e.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function RH(n,e){const t=N0e[n.componentType],i=k0e[n.type],o=n.count*i,s=n.count*i*O0e[n.componentType];return Wa(s>=0&&s<=e.byteLength),{ArrayType:t,length:o,byteLength:s}}const P0e={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class _c{constructor(e){Ae(this,"gltf",void 0),Ae(this,"sourceBuffers",void 0),Ae(this,"byteLength",void 0),this.gltf=e||{json:{...P0e},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Wa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:o,length:s}=RH(e,t);return new o(r,t.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Wa(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Wa(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=tO(e),r=t||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Wa(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=G0(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:IH(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const o={size:t.size,componentType:DH(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=I0e(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);t[o]=s}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const o of r)i.min.push(o),i.max.push(o);for(let o=t;o<e.length;o+=t)for(let s=0;s<t;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const L0e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",B0e="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",j0e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),U0e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),kH={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},V0e={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function aO(){return aO=jt(function*(n,e,t,i,r,o="NONE"){const s=yield function mA(){return lO.apply(this,arguments)}();!function gA(n,e,t,i,r,o,s){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,d);const f=e(l,i,r,d,o.length);if(0===f&&s&&s(l,c,r),t.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(s,s.exports[V0e[r]],n,e,t,i,s.exports[kH[o||"NONE"]])}),aO.apply(this,arguments)}let cO;function lO(){return lO=jt(function*(){return cO||(cO=function H0e(){return dO.apply(this,arguments)}()),cO}),lO.apply(this,arguments)}function dO(){return dO=jt(function*(){let n=L0e;WebAssembly.validate(j0e)&&(n=B0e,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function G0e(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?U0e[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),dO.apply(this,arguments)}const uO="EXT_meshopt_compression",W0e=uO;function $0e(n,e){return hO.apply(this,arguments)}function hO(){return hO=jt(function*(n,e){var t;const i=new _c(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const o of n.json.bufferViews||[])r.push(Y0e(i,o));yield Promise.all(r),i.removeExtension(uO)}),hO.apply(this,arguments)}function Y0e(n,e){return fO.apply(this,arguments)}function fO(){return fO=jt(function*(n,e){const t=n.getObjectExtension(e,uO);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=t,d=n.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),f=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function z0e(n,e,t,i,r){return aO.apply(this,arguments)}(f,s,o,h,a,c),f}return null}),fO.apply(this,arguments)}const X0e=["image/png","image/jpeg","image/gif"],pO={};const Pg="EXT_texture_webp",Z0e=Pg;function Q0e(n,e){const t=new _c(n);if(!function K0e(n){return void 0===pO[n]&&(pO[n]=function q0e(n){switch(n){case"image/webp":return function J0e(){if(!pA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return pA;default:if(!pA){const{_parseImageNode:e}=globalThis;return!!e&&X0e.includes(n)}return!0}}(n)),pO[n]}("image/webp")){if(t.getRequiredExtensions().includes(Pg))throw new Error("gltf: Required extension ".concat(Pg," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,Pg);o&&(r.source=o.source),t.removeObjectExtension(r,Pg)}t.removeExtension(Pg)}const _A="KHR_texture_basisu",eve=_A;function tve(n,e){const t=new _c(n),{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,_A);o&&(r.source=o.source),t.removeObjectExtension(r,_A)}t.removeExtension(_A)}const NH={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class bA{constructor(e,t,i=!1,r=new Map){Ae(this,"name",void 0),Ae(this,"type",void 0),Ae(this,"nullable",void 0),Ae(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new bA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let ar,PH,FH,LH,BH,jH,UH,VH,zH;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(ar||(ar={}));class ep{static isNull(e){return e&&e.typeId===ar.Null}static isInt(e){return e&&e.typeId===ar.Int}static isFloat(e){return e&&e.typeId===ar.Float}static isBinary(e){return e&&e.typeId===ar.Binary}static isUtf8(e){return e&&e.typeId===ar.Utf8}static isBool(e){return e&&e.typeId===ar.Bool}static isDecimal(e){return e&&e.typeId===ar.Decimal}static isDate(e){return e&&e.typeId===ar.Date}static isTime(e){return e&&e.typeId===ar.Time}static isTimestamp(e){return e&&e.typeId===ar.Timestamp}static isInterval(e){return e&&e.typeId===ar.Interval}static isList(e){return e&&e.typeId===ar.List}static isStruct(e){return e&&e.typeId===ar.Struct}static isUnion(e){return e&&e.typeId===ar.Union}static isFixedSizeBinary(e){return e&&e.typeId===ar.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===ar.FixedSizeList}static isMap(e){return e&&e.typeId===ar.Map}static isDictionary(e){return e&&e.typeId===ar.Dictionary}get typeId(){return ar.NONE}compareTo(e){return this===e}}Symbol,Symbol,PH=Symbol.toStringTag;class Fg extends ep{constructor(e,t){super(),Ae(this,"isSigned",void 0),Ae(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return ar.Int}get[PH](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class ive extends Fg{constructor(){super(!0,8)}}class rve extends Fg{constructor(){super(!0,16)}}class ove extends Fg{constructor(){super(!0,32)}}class sve extends Fg{constructor(){super(!1,8)}}class ave extends Fg{constructor(){super(!1,16)}}class cve extends Fg{constructor(){super(!1,32)}}FH=Symbol.toStringTag;class HH extends ep{constructor(e){super(),Ae(this,"precision",void 0),this.precision=e}get typeId(){return ar.Float}get[FH](){return"Float"}toString(){return"Float".concat(this.precision)}}class lve extends HH{constructor(){super(32)}}class dve extends HH{constructor(){super(64)}}Symbol,Symbol,LH=Symbol.toStringTag,BH=Symbol.toStringTag,jH=Symbol.toStringTag,UH=Symbol.toStringTag,VH=Symbol.toStringTag;class uve extends ep{constructor(e,t){super(),Ae(this,"listSize",void 0),Ae(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return ar.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[VH](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}zH=Symbol.toStringTag;class Lg{constructor(e,t){Ae(this,"fields",void 0),Ae(this,"metadata",void 0),function mve(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function gve(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new Lg(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Lg(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof Lg){const s=e;t=s.fields,i=WH(WH(new Map,this.metadata),s.metadata)}else t=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of t)r[s.name]=s;const o=Object.values(r);return new Lg(o,i)}}function WH(n,e){return new Map([...n||new Map,...e||new Map])}function $H(n,e,t){return function GH(n,e,t){const i=function hve(n){switch(n.constructor){case Int8Array:return new ive;case Uint8Array:return new sve;case Int16Array:return new rve;case Uint16Array:return new ave;case Int32Array:return new ove;case Uint32Array:return new cve;case Float32Array:return new lve;case Float64Array:return new dve;default:throw new Error("array type not supported")}}(e.value),r=t||function pve(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new bA(n,new uve(e.size,new bA("value",i)),!1,r)}(n,e,t?YH(t.metadata):void 0)}function YH(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const XH={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},yve={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class xve{constructor(e){Ae(this,"draco",void 0),Ae(this,"decoder",void 0),Ae(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const f="DRACO decompression failed: ".concat(s.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(o,r,t),c=this._getMeshData(o,a,t),l=function nve(n){let e=1/0,t=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],f=a[l+2];e=d<e?d:e,t=h<t?h:t,i=f<i?f:i,r=d>r?d:r,o=h>o?h:o,s=f>s?f:s}return[[e,t,i],[r,o,s]]}(c.attributes),d=function _ve(n,e,t){const i=YH(e.metadata),r=[],o=function bve(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in n){const c=$H(s,n[s],o[s]);r.push(c)}if(t){const s=$H("indices",t);r.push(s)}return new Lg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,t);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,t);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(t,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function Ave(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=yve[t.data_type],r=t.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function wve(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[s,a]of Object.entries(t.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in XH)if(this.draco[s]===r)return XH[s];const o=t.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);t[o]=this._getDracoMetadataField(e,o)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function Eve(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const yA="1.4.1",Sve="https://www.gstatic.com/draco/versioned/decoders/".concat(yA,"/draco_decoder.js"),Cve="https://www.gstatic.com/draco/versioned/decoders/".concat(yA,"/draco_wasm_wrapper.js"),Mve="https://www.gstatic.com/draco/versioned/decoders/".concat(yA,"/draco_decoder.wasm");let W0;function bO(){return bO=jt(function*(n){const e=n.modules||{};return W0=e.draco3d?W0||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):W0||function Dve(n){return vO.apply(this,arguments)}(n),yield W0}),bO.apply(this,arguments)}function vO(){return vO=jt(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield Zf(Sve,"draco",n):[e,t]=yield Promise.all([yield Zf(Cve,"draco",n),yield Zf(Mve,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function Rve(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),vO.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(yA,"/javascript/draco_encoder.js");const wO={...NH,parse:function Ove(n,e){return EO.apply(this,arguments)}};function EO(){return EO=jt(function*(n,e){const{draco:t}=yield function Ive(n){return bO.apply(this,arguments)}(e),i=new xve(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),EO.apply(this,arguments)}function KH(n){const{buffer:e,size:t,count:i}=function Pve(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function Fve(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:IH(t),componentType:DH(e)}}const tp="KHR_draco_mesh_compression",Lve=tp;function Bve(n,e,t){const i=new _c(n);for(const r of qH(i))i.getObjectExtension(r,tp)}function jve(n,e,t){return AO.apply(this,arguments)}function AO(){return AO=jt(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new _c(n),o=[];for(const s of qH(r))r.getObjectExtension(s,tp)&&o.push(Vve(r,s,e,t));yield Promise.all(o),r.removeExtension(tp)}),AO.apply(this,arguments)}function Uve(n,e={}){const t=new _c(n);for(const i of t.json.meshes||[])zve(i),t.addRequiredExtension(tp)}function Vve(n,e,t,i){return SO.apply(this,arguments)}function SO(){return SO=jt(function*(n,e,t,i){const r=n.getObjectExtension(e,tp);if(!r)return;const o=n.getTypedArrayForBufferView(r.bufferView),s=SH(o.buffer,o.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(s,wO,c,i),d=function Nve(n){const e={};for(const t in n)if("indices"!==t){const r=KH(n[t]);e[t]=r}return e}(l.attributes);for(const[h,f]of Object.entries(d))if(h in e.attributes){const y=n.getAccessor(e.attributes[h]);null!=y&&y.min&&null!=y&&y.max&&(f.min=y.min,f.max=y.max)}e.attributes=d,l.indices&&(e.indices=KH(l.indices)),function Hve(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),SO.apply(this,arguments)}function zve(n,e,t=4,i,r){var o;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(o=r.parseSync)||void 0===o?void 0:o.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(s);return{primitives:[{attributes:c,mode:t,extensions:{[tp]:{bufferView:l,attributes:c}}}]}}function*qH(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const np="KHR_lights_punctual",Gve=np;function Wve(n){return CO.apply(this,arguments)}function CO(){return CO=jt(function*(n){const e=new _c(n),{json:t}=e,i=e.getExtension(np);i&&(e.json.lights=i.lights,e.removeExtension(np));for(const r of t.nodes||[]){const o=e.getObjectExtension(r,np);o&&(r.light=o.light),e.removeObjectExtension(r,np)}}),CO.apply(this,arguments)}function $ve(n){return MO.apply(this,arguments)}function MO(){return MO=jt(function*(n){const e=new _c(n),{json:t}=e;if(t.lights){const i=e.addExtension(np);Wa(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,np,i);delete e.json.lights}}),MO.apply(this,arguments)}const Y0="KHR_materials_unlit",Yve=Y0;function Xve(n){return TO.apply(this,arguments)}function TO(){return TO=jt(function*(n){const e=new _c(n),{json:t}=e;e.removeExtension(Y0);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,Y0)}),TO.apply(this,arguments)}function Kve(n){const e=new _c(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,Y0,{}),e.addExtension(Y0))}const X0="KHR_techniques_webgl",qve=X0;function Jve(n){return IO.apply(this,arguments)}function IO(){return IO=jt(function*(n){const e=new _c(n),{json:t}=e,i=e.getExtension(X0);if(i){const r=function Qve(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),t.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=t[s.program]}),r}(i,e);for(const o of t.materials||[]){const s=e.getObjectExtension(o,X0);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=exe(o.technique,e)),e.removeObjectExtension(o,X0)}e.removeExtension(X0)}}),IO.apply(this,arguments)}function Zve(n,e){return DO.apply(this,arguments)}function DO(){return(DO=jt(function*(n,e){})).apply(this,arguments)}function exe(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const JH=[C,b,D,S,k,_,v];function RO(){return RO=jt(function*(n,e={},t){const i=JH.filter(o=>ZH(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,n,e,t)}}),RO.apply(this,arguments)}function ZH(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const kO="KHR_binary_glTF",QH={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},rxe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class oxe{constructor(){Ae(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),Ae(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function ixe(n){const e=new _c(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,kO);r&&Object.assign(i,r),e.removeObjectExtension(i,kO)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(kO)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in QH)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[t].length;e[t].push(o),this.idToIndexMap[t][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const t in QH)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:o}=t;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),o&&(t.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,t){const i=rxe[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const o of e.materials){var t,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(t=o.values)||void 0===t?void 0:t.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const axe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},cxe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},lxe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},dxe={10240:9729,10241:9986,10242:10497,10243:10497};class fxe{constructor(){Ae(this,"baseUri",""),Ae(this,"json",{}),Ae(this,"buffers",[]),Ae(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Wa(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function uxe(n){return cxe[n]}(e.componentType),e.components=function hxe(n){return axe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=RH(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=t+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):dxe,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return lxe[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const eG=1735152710,OO=12,vA=8,mxe=1313821514,gxe=5130562,_xe=0,bxe=1,yxe=0,Bg=!0;function NO(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),s=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(s),G0(i,4)}function PO(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),G0(i,4)}function FO(){return FO=jt(function*(n,e,t=0,i,r){var o,s,a,c;(function Mxe(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function xxe(n,e=0,t={}){const i=new DataView(n),{magic:r=eG}=t,o=i.getUint32(e,!1);return o===r||o===eG}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function T0e(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function M0e(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?AH(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?AH(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};t=function wxe(n,e,t=0,i={}){const r=new DataView(e),o=function vxe(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),s=r.getUint32(t+4,Bg),a=r.getUint32(t+8,Bg);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),t+=OO,n.version){case 1:return function Exe(n,e,t){Qf(n.header.byteLength>OO+vA);const i=e.getUint32(t+0,Bg),r=e.getUint32(t+4,Bg);return t+=vA,Qf(r===yxe),NO(n,e,t,i),(t+=i)+PO(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function Axe(n,e,t,i){return Qf(n.header.byteLength>OO+vA),function Sxe(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,Bg),o=e.getUint32(t+4,Bg);switch(t+=vA,o){case mxe:NO(n,e,t,r);break;case gxe:PO(n,e,t,r);break;case _xe:i.strict||NO(n,e,t,r);break;case bxe:i.strict||PO(n,e,t,r)}t+=G0(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(s,e,t,i.glb),Wa("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),n._glb=s,n.json=s.json}else Wa(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:s}=n._glb;n.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function sxe(n,e={}){(new oxe).normalize(n,e)}(n,{normalize:null==i||null===(o=i.gltf)||void 0===o?void 0:o.normalize}),function txe(n,e={},t){const i=JH.filter(o=>ZH(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(s=i.gltf)&&void 0!==s&&s.loadBuffers&&n.json.buffers&&(yield function Txe(n,e,t){return LO.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function Ixe(n,e,t){return BO.apply(this,arguments)}(n,i,r);l.push(h)}const d=function nxe(n){return RO.apply(this,arguments)}(n,i,r);return l.push(d),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function pxe(n,e){return(new fxe).postProcess(n,e)}(n,i):n}),FO.apply(this,arguments)}function LO(){return LO=jt(function*(n,e,t){const i=n.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=t;Wa(c);const l=CH(a.uri,e),d=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);n.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===n.buffers[s]&&(n.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),LO.apply(this,arguments)}function BO(){return BO=jt(function*(n,e,t){const i=function Dxe(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],o=[];for(const s of i)o.push(Rxe(n,r[s],s,e,t));return yield Promise.all(o)}),BO.apply(this,arguments)}function Rxe(n,e,t,i,r){return jO.apply(this,arguments)}function jO(){return jO=jt(function*(n,e,t,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=CH(e.uri,i);a=yield(yield o(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function MH(n,e,t){const i=n.bufferViews[t];Wa(i);const o=e[i.buffer];return Wa(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=SH(l.buffer,l.byteOffset,l.byteLength)}Wa(a,"glTF image has no data");let c=yield s(a,[C0e,o0e],{mimeType:e.mimeType,basis:i.basis||{format:gH()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),jO.apply(this,arguments)}const jg={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function kxe(n){return UO.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function UO(){return UO=jt(function*(n,e={},t){(e={...jg.options,...e}).gltf={...jg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function Cxe(n,e){return FO.apply(this,arguments)}({},n,i,e,t)}),UO.apply(this,arguments)}function VO(){return VO=jt(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Nxe(n){return zO.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),VO.apply(this,arguments)}function zO(){return zO=jt(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),zO.apply(this,arguments)}const tG=[255,255,255,255],Lxe={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:tG},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[jg]};class HO extends Kf{constructor(...e){super(...e),Ae(this,"state",void 0)}getShaders(){const e=[rA,oA];return"pbr"===this.props._lighting&&e.push(Xz),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:tG,transition:!0},instanceModelMatrix:Wz})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof Og)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function Fye(n,e,t){const i=new Pye(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function Oxe(n){return VO.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(Ei.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof Og?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&Ei.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):Ei.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):Ei.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Og&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!mi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:t,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:$z(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}Ae(HO,"defaultProps",Lxe),Ae(HO,"layerName","ScenegraphLayer");class Bxe extends bh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=_a("sphere-geometry")}=e,{indices:i,attributes:r}=function jxe(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(t+1);if("number"==typeof i){const H=i;i=(K,de,Ie,Fe,Xe)=>H}const h=new Float32Array(3*d),f=new Float32Array(3*d),m=new Float32Array(2*d),E=new(d>65535?Uint32Array:Uint16Array)(e*t*6);for(let H=0;H<=e;H++)for(let K=0;K<=t;K++){const de=K/t,Ie=H/e,Fe=K+H*(t+1),Xe=2*Fe,lt=3*Fe,gt=l*de,mt=s*Ie,pt=Math.sin(gt),yt=Math.cos(gt),Ct=Math.sin(mt),ht=yt*Ct,Ot=Math.cos(mt),Pt=pt*Ct,yn=i(ht,Ot,Pt,de,Ie);h[lt+0]=yn*ht,h[lt+1]=yn*Ot,h[lt+2]=yn*Pt,f[lt+0]=ht,f[lt+1]=Ot,f[lt+2]=Pt,m[Xe+0]=de,m[Xe+1]=1-Ie}const M=t+1;for(let H=0;H<t;H++)for(let K=0;K<e;K++){const de=6*(H*e+K);E[de+0]=K*M+H,E[de+1]=K*M+H+1,E[de+2]=(K+1)*M+H,E[de+3]=(K+1)*M+H,E[de+4]=K*M+H+1,E[de+5]=(K+1)*M+H+1}return{indices:{size:1,value:E},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const Uxe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class nG extends bh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=_a("truncated-code-geometry")}=e,{indices:i,attributes:r}=function Vxe(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-t,i),f=Math.sin,m=Math.cos,y=Math.PI,E=m(h),M=f(h),H=a?-2:0,K=o+(c?2:0),de=r+1,Ie=new Uint16Array(r*(o+l)*6),Fe=Uxe[s],Xe=new Float32Array(3*d),lt=new Float32Array(3*d),gt=new Float32Array(2*d);let mt=0,pt=0;for(let yt=H;yt<=K;yt++){let ht,Ct=yt/o,dt=i*Ct;yt<0?(dt=0,Ct=1,ht=e):yt>o?(dt=i,Ct=1,ht=t):ht=e+yt/o*(t-e),(-2===yt||yt===o+2)&&(ht=0,Ct=0),dt-=i/2;for(let Ot=0;Ot<de;Ot++){const Pt=f(Ot*y*2/r),yn=m(Ot*y*2/r);Xe[mt+Fe[0]]=Pt*ht,Xe[mt+Fe[1]]=dt,Xe[mt+Fe[2]]=yn*ht,lt[mt+Fe[0]]=yt<0||yt>o?0:Pt*E,lt[mt+Fe[1]]=yt<0?-1:yt>o?1:M,lt[mt+Fe[2]]=yt<0||yt>o?0:yn*E,gt[pt+0]=Ot/r,gt[pt+1]=Ct,pt+=2,mt+=3}}for(let yt=0;yt<o+l;yt++)for(let Ct=0;Ct<r;Ct++){const dt=6*(yt*r+Ct);Ie[dt+0]=de*(yt+0)+0+Ct,Ie[dt+1]=de*(yt+0)+1+Ct,Ie[dt+2]=de*(yt+1)+1+Ct,Ie[dt+3]=de*(yt+0)+0+Ct,Ie[dt+4]=de*(yt+1)+1+Ct,Ie[dt+5]=de*(yt+1)+0+Ct}return{indices:Ie,attributes:{POSITION:{size:3,value:Xe},NORMAL:{size:3,value:lt},TEXCOORD_0:{size:2,value:gt}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class zxe extends nG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=_a("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Hxe extends nG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=_a("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const Gxe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Wxe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),$xe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Yxe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Xxe={POSITION:{size:3,value:new Float32Array(Wxe)},NORMAL:{size:3,value:new Float32Array($xe)},TEXCOORD_0:{size:2,value:new Float32Array(Yxe)}};class Kxe extends bh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=_a("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(Gxe)},attributes:{...Xxe,...e.attributes}})}}class Kc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new xe);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new xe);const i=this.elements,r=e.x,o=e.y,s=e.z;return t.x=i[0]*r+i[1]*o+i[2]*s,t.y=i[3]*r+i[4]*o+i[5]*s,t.z=i[6]*r+i[7]*o+i[8]*s,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new Kc);const i=this.elements,r=e.elements,o=t.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],f=i[6],m=i[7],y=i[8],E=r[0],M=r[1],H=r[2],K=r[3],de=r[4],Ie=r[5],Fe=r[6],Xe=r[7],lt=r[8];return o[0]=s*E+a*K+c*Fe,o[1]=s*M+a*de+c*Xe,o[2]=s*H+a*Ie+c*lt,o[3]=l*E+d*K+h*Fe,o[4]=l*M+d*de+h*Xe,o[5]=l*H+d*Ie+h*lt,o[6]=f*E+m*K+y*Fe,o[7]=f*M+m*de+y*Xe,o[8]=f*H+m*Ie+y*lt,t}scale(e,t){void 0===t&&(t=new Kc);const i=this.elements,r=t.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return t}solve(e,t){void 0===t&&(t=new xe);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,f;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{f=4-d,o[f+4*s]+=o[f+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{f=4-d,o[f+4*a]=f<=s?0:o[f+4*a]-o[f+4*s]*m}while(--d)}}while(--c);if(t.z=o[11]/o[10],t.y=(o[7]-o[6]*t.z)/o[5],t.x=(o[3]-o[2]*t.z-o[1]*t.y)/o[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Kc);const r=qxe;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*f}while(--l)}}while(--a);o=2;do{s=o-1;do{const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*f}while(--l)}while(s--)}while(--o);o=2;do{const f=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*f}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,o=e.w,s=t+t,a=i+i,c=r+r,l=t*s,d=t*a,h=t*c,f=i*a,m=i*c,y=r*c,E=o*s,M=o*a,H=o*c,K=this.elements;return K[0]=1-(f+y),K[1]=d-H,K[2]=h+M,K[3]=d+H,K[4]=1-(l+y),K[5]=m-E,K[6]=h-M,K[7]=m+E,K[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new Kc);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const qxe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class xe{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new xe);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return t.x=a*o-c*r,t.y=c*i-s*o,t.z=s*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new xe(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new xe(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Kc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new xe);const t=this.x,i=this.y,r=this.z;let o=Math.sqrt(t*t+i*i+r*r);return o>0?(o=1/o,e.x=t*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new xe);const r=this.y,o=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*o,t}vmul(e,t){return void 0===t&&(t=new xe),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new xe),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new xe),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=Jxe,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=Zxe;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*t,i.y=o+(e.y-o)*t,i.z=s+(e.z-s)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(iG),iG.almostEquals(e,t)}clone(){return new xe(this.x,this.y,this.z)}}xe.ZERO=new xe(0,0,0),xe.UNIT_X=new xe(1,0,0),xe.UNIT_Y=new xe(0,1,0),xe.UNIT_Z=new xe(0,0,1);const Jxe=new xe,Zxe=new xe,iG=new xe;class fr{constructor(e){void 0===e&&(e={}),this.lowerBound=new xe,this.upperBound=new xe,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,rG),l=rG),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return t&&(t.vadd(o,o),t.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new fr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||t.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||t.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||t.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return t.x<=r.x&&i.x>=o.x&&t.y<=r.y&&i.y>=o.y&&t.z<=r.z&&i.z>=o.z}getCorners(e,t,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),t.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,t){const i=oG;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToLocal(m,m)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=oG;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToWorld(m,m)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,o=1/t.y,s=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,f=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,f)),y=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,f));return!(y<0||m>y)}}const rG=new xe,oG=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe];class Qxe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class ro{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new xe),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=ewe;e.tangents(i,twe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new ro);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return t.x=i*d+s*a+r*l-o*c,t.y=r*d+s*c+o*a-i*l,t.z=o*d+s*l+i*c-r*a,t.w=s*d-i*a-r*c-o*l,t}inverse(e){void 0===e&&(e=new ro);const t=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(t*t+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new ro),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new xe);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;return t.x=d*l+m*-s+h*-c-f*-a,t.y=h*l+m*-a+f*-s-d*-c,t.z=f*l+m*-c+d*-a-h*-s,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,o;void 0===t&&(t="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new ro(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new ro);const r=this.x,o=this.y,s=this.z,a=this.w;let f,m,y,E,M,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),y=Math.sin(f),E=Math.sin((1-t)*f)/y,M=Math.sin(t*f)/y):(E=1-t,M=t),i.x=E*r+M*c,i.y=E*o+M*l,i.z=E*s+M*d,i.w=E*a+M*h,i}integrate(e,t,i,r){void 0===r&&(r=new ro);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,f=.5*t;return r.x+=f*(o*h+s*d-a*l),r.y+=f*(s*h+a*c-o*d),r.z+=f*(a*h+o*l-s*c),r.w+=f*(-o*c-s*l-a*d),r}}const ewe=new xe,twe=new xe,nwe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let fn=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=nwe,n})();class Fi{constructor(e){void 0===e&&(e={}),this.position=new xe,this.quaternion=new ro,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Fi.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Fi.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new xe),i.vsub(e,r),t.conjugate(aG),aG.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new xe),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new xe),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new xe),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const aG=new ro;class ip extends fn{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:fn.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new xe;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){t[s[c]].vsub(t[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new xe;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];ip.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const o=new xe,s=new xe;t.vsub(e,s),i.vsub(t,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,o,s,a,c,l){const d=new xe;let h=-1,f=-Number.MAX_VALUE;for(let y=0;y<i.faces.length;y++){d.copy(i.faceNormals[y]),o.vmult(d,d);const E=d.dot(s);E>f&&(f=E,h=y)}const m=[];for(let y=0;y<i.faces[h].length;y++){const E=i.vertices[i.faces[h][y]],M=new xe;M.copy(E),o.vmult(M,M),r.vadd(M,M),m.push(M)}h>=0&&this.clipFaceAgainstHull(s,e,t,m,a,c,l)}findSeparatingAxis(e,t,i,r,o,s,a,c){const l=new xe,d=new xe,h=new xe,f=new xe,m=new xe,y=new xe;let E=Number.MAX_VALUE;const M=this;if(M.uniqueAxes)for(let H=0;H!==M.uniqueAxes.length;H++){i.vmult(M.uniqueAxes[H],l);const K=M.testSepAxis(l,e,t,i,r,o);if(!1===K)return!1;K<E&&(E=K,s.copy(l))}else{const H=a?a.length:M.faces.length;for(let K=0;K<H;K++){l.copy(M.faceNormals[a?a[K]:K]),i.vmult(l,l);const Ie=M.testSepAxis(l,e,t,i,r,o);if(!1===Ie)return!1;Ie<E&&(E=Ie,s.copy(l))}}if(e.uniqueAxes)for(let H=0;H!==e.uniqueAxes.length;H++){o.vmult(e.uniqueAxes[H],d);const K=M.testSepAxis(d,e,t,i,r,o);if(!1===K)return!1;K<E&&(E=K,s.copy(d))}else{const H=c?c.length:e.faces.length;for(let K=0;K<H;K++){d.copy(e.faceNormals[c?c[K]:K]),o.vmult(d,d);const Ie=M.testSepAxis(d,e,t,i,r,o);if(!1===Ie)return!1;Ie<E&&(E=Ie,s.copy(d))}}for(let H=0;H!==M.uniqueEdges.length;H++){i.vmult(M.uniqueEdges[H],f);for(let K=0;K!==e.uniqueEdges.length;K++)if(o.vmult(e.uniqueEdges[K],m),f.cross(m,y),!y.almostZero()){y.normalize();const de=M.testSepAxis(y,e,t,i,r,o);if(!1===de)return!1;de<E&&(E=de,s.copy(y))}}return r.vsub(t,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,t,i,r,o,s){ip.project(this,e,i,r,GO),ip.project(t,e,o,s,WO);const c=GO[0],l=GO[1],d=WO[0],h=WO[1];if(c<h||d<l)return!1;const f=c-h,m=d-l;return f<m?f:m}calculateLocalInertia(e,t){const i=new xe,r=new xe;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*s*2*s+2*a*2*a),t.y=1/12*e*(2*o*2*o+2*a*2*a),t.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,o,s,a){const c=new xe,l=new xe,d=new xe,h=new xe,f=new xe,m=new xe,y=new xe,E=new xe,M=this,K=r,de=[];let Ie=-1,Fe=Number.MAX_VALUE;for(let pt=0;pt<M.faces.length;pt++){c.copy(M.faceNormals[pt]),i.vmult(c,c);const yt=c.dot(e);yt<Fe&&(Fe=yt,Ie=pt)}if(Ie<0)return;const Xe=M.faces[Ie];Xe.connectedFaces=[];for(let pt=0;pt<M.faces.length;pt++)for(let yt=0;yt<M.faces[pt].length;yt++)-1!==Xe.indexOf(M.faces[pt][yt])&&pt!==Ie&&-1===Xe.connectedFaces.indexOf(pt)&&Xe.connectedFaces.push(pt);const lt=Xe.length;for(let pt=0;pt<lt;pt++){const yt=M.vertices[Xe[pt]];yt.vsub(M.vertices[Xe[(pt+1)%lt]],l),d.copy(l),i.vmult(d,d),t.vadd(d,d),h.copy(this.faceNormals[Ie]),i.vmult(h,h),t.vadd(h,h),d.cross(h,f),f.negate(f),m.copy(yt),i.vmult(m,m),t.vadd(m,m);const dt=Xe.connectedFaces[pt];y.copy(this.faceNormals[dt]);const ht=this.getPlaneConstantOfFace(dt);E.copy(y),i.vmult(E,E);const Ot=ht-E.dot(t);for(this.clipFaceAgainstPlane(K,de,E,Ot);K.length;)K.shift();for(;de.length;)K.push(de.shift())}y.copy(this.faceNormals[Ie]);const gt=this.getPlaneConstantOfFace(Ie);E.copy(y),i.vmult(E,E);const mt=gt-E.dot(t);for(let pt=0;pt<K.length;pt++){let yt=E.dot(K[pt])+mt;yt<=o&&(console.log(`clamped: depth=${yt} to minDist=${o}`),yt=o),yt<=s&&yt<=1e-6&&a.push({point:K[pt],normal:E,depth:yt})}}clipFaceAgainstPlane(e,t,i,r){let o,s;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new xe;h.copy(l),t.push(h)}else{const h=new xe;c.lerp(l,o/(o-s),h),t.push(h)}else if(s<0){const h=new xe;c.lerp(l,o/(o-s),h),t.push(h),t.push(l)}c=l,o=s}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new xe);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)t.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>t.x&&(t.x=o.x),o.y<e.y?e.y=o.y:o.y>t.y&&(t.y=o.y),o.z<e.z?e.z=o.z:o.z>t.z&&(t.z=o.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new xe);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==t;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const o=this.vertices;let s,a,c,l,d,h,f=new xe;for(let m=0;m<o.length;m++)f.copy(o[m]),t.vmult(f,f),e.vadd(f,f),(void 0===s||f.x<s)&&(s=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===d||f.y>d)&&(d=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new xe);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let o=0;o<i;o++){const s=r[o];t.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];t.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new xe;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],d=new xe;e.vsub(l,d);const h=c.dot(d),f=new xe;s.vsub(l,f);const m=c.dot(f);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,t,i,r,o){const s=e.vertices.length,a=rwe;let c=0,l=0;const d=owe,h=e.vertices;d.setZero(),Fi.vectorToLocalFrame(i,r,t,a),Fi.pointToLocalFrame(i,r,d,d);const f=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const y=h[m].dot(a);y>c&&(c=y),y<l&&(l=y)}if(l-=f,c-=f,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const GO=[],WO=[],rwe=(new xe,new xe),owe=new xe;class xA extends fn{constructor(e){super({type:fn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=xe,o=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new ip({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new xe),xA.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let o=0;o!==i.length;o++)t.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)vh.set(o[s][0],o[s][1],o[s][2]),t.vmult(vh,vh),e.vadd(vh,vh),i(vh.x,vh.y,vh.z)}calculateWorldAABB(e,t,i,r){const o=this.halfExtents;ql[0].set(o.x,o.y,o.z),ql[1].set(-o.x,o.y,o.z),ql[2].set(-o.x,-o.y,o.z),ql[3].set(-o.x,-o.y,-o.z),ql[4].set(o.x,-o.y,-o.z),ql[5].set(o.x,o.y,-o.z),ql[6].set(-o.x,o.y,-o.z),ql[7].set(o.x,-o.y,o.z);const s=ql[0];t.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=ql[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const vh=new xe,ql=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe];class pn extends Qxe{constructor(e){void 0===e&&(e={}),super(),this.id=pn.idCounter++,this.index=-1,this.world=null,this.vlambda=new xe,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new xe,this.previousPosition=new xe,this.interpolatedPosition=new xe,this.initPosition=new xe,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new xe,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new xe,this.force=new xe;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?pn.STATIC:pn.DYNAMIC,typeof e.type==typeof pn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=pn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new xe,this.quaternion=new ro,this.initQuaternion=new ro,this.previousQuaternion=new ro,this.interpolatedQuaternion=new ro,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new xe,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new xe,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new xe,this.invInertia=new xe,this.invInertiaWorld=new Kc,this.invMassSolve=0,this.invInertiaSolve=new xe,this.invInertiaWorldSolve=new Kc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new xe(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new xe(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new fr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new xe,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=pn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===pn.SLEEPING&&this.dispatchEvent(pn.wakeupEvent)}sleep(){this.sleepState=pn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===pn.AWAKE&&i<r?(this.sleepState=pn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(pn.sleepyEvent)):t===pn.SLEEPY&&i>r?this.wakeUp():t===pn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(pn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===pn.SLEEPING||this.type===pn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new xe),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new xe),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new xe,o=new ro;return t&&r.copy(t),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=t[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=swe,s=awe,a=this.quaternion,c=this.aabb,l=cwe;for(let d=0;d!==r;d++){const h=e[d];a.vmult(t[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=lwe,r=dwe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new xe),this.type!==pn.DYNAMIC)return;this.sleepState===pn.SLEEPING&&this.wakeUp();const i=hwe;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new xe),this.type!==pn.DYNAMIC)return;const i=fwe,r=pwe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===pn.DYNAMIC&&(this.sleepState===pn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new xe),this.type!==pn.DYNAMIC)return;this.sleepState===pn.SLEEPING&&this.wakeUp();const i=t,r=mwe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=gwe;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new xe),this.type!==pn.DYNAMIC)return;const i=_we,r=bwe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=ywe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),xA.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new xe;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==pn.DYNAMIC&&this.type!==pn.KINEMATIC||this.sleepState===pn.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*f.x,r.y+=a.y*m*f.y,r.z+=a.z*m*f.z;const y=h.elements,E=this.angularFactor,M=c.x*E.x,H=c.y*E.y,K=c.z*E.z;o.x+=e*(y[0]*M+y[1]*H+y[2]*K),o.y+=e*(y[3]*M+y[4]*H+y[5]*K),o.z+=e*(y[6]*M+y[7]*H+y[8]*K),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}pn.idCounter=0,pn.COLLIDE_EVENT_NAME="collide",pn.DYNAMIC=1,pn.STATIC=2,pn.KINEMATIC=4,pn.AWAKE=0,pn.SLEEPY=1,pn.SLEEPING=2,pn.wakeupEvent={type:"wakeup"},pn.sleepyEvent={type:"sleepy"},pn.sleepEvent={type:"sleep"};const swe=new xe,awe=new ro,cwe=new fr,lwe=new Kc,dwe=new Kc,hwe=(new Kc,new xe),fwe=new xe,pwe=new xe,mwe=new xe,gwe=new xe,_we=new xe,bwe=new xe,ywe=new xe;new xe,new xe,new ro,new xe,new xe,new xe,new xe;class K0{constructor(){this.rayFromWorld=new xe,this.rayToWorld=new xe,this.hitNormalWorld=new xe,this.hitPointWorld=new xe,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let cG,lG,dG,uG,hG,fG,pG;cG=fn.types.SPHERE,lG=fn.types.PLANE,dG=fn.types.BOX,uG=fn.types.CYLINDER,hG=fn.types.CONVEXPOLYHEDRON,fG=fn.types.HEIGHTFIELD,pG=fn.types.TRIMESH;class Ao{get[cG](){return this._intersectSphere}get[lG](){return this._intersectPlane}get[dG](){return this._intersectBox}get[uG](){return this._intersectConvex}get[hG](){return this._intersectConvex}get[fG](){return this._intersectHeightfield}get[pG](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new xe),void 0===t&&(t=new xe),this.from=e.clone(),this.to=t.clone(),this.direction=new xe,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Ao.ANY,this.result=new K0,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||Ao.ANY,this.result=t.result||new K0,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(mG),KO.length=0,e.broadphase.aabbQuery(e,mG,KO),this.intersectBodies(KO),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=Cwe,o=Mwe;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function Hwe(n,e,t){t.vsub(n,rp);const i=rp.dot(e);return e.scale(i,EA),EA.vadd(n,EA),t.distanceTo(EA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,o)}_intersectPlane(e,t,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new xe(0,0,1);t.vmult(l,l);const d=new xe;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const y=new xe,E=new xe,M=new xe;s.vsub(i,y);const H=-l.dot(y)/m;c.scale(H,E),s.vadd(E,M),this.reportIntersection(l,M,o,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,o=this.from;t.x=Math.min(r.x,o.x),t.y=Math.min(r.y,o.y),t.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,t,i,r,o){const s=Twe;s.from.copy(this.from),s.to.copy(this.to),Fi.pointToLocalFrame(i,t,s.from,s.from),Fi.pointToLocalFrame(i,t,s.to,s.to),s.updateDirection();const a=Iwe;let c,l,d,h;c=l=0,d=h=e.data.length-1;const f=new fr;s.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let y=l;y<h;y++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,y,f),f.overlapsRay(s)){if(e.getConvexTrianglePillar(m,y,!1),Fi.pointToWorldFrame(i,t,e.pillarOffset,wA),this._intersectConvex(e.pillarConvex,t,wA,r,o,gG),this.result.shouldStop)return;e.getConvexTrianglePillar(m,y,!0),Fi.pointToWorldFrame(i,t,e.pillarOffset,wA),this._intersectConvex(e.pillarConvex,t,wA,r,o,gG)}}}_intersectSphere(e,t,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),f=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=Dwe,y=Rwe;if(!(f<0))if(0===f)s.lerp(a,f,m),m.vsub(i,y),y.normalize(),this.reportIntersection(y,m,o,r,-1);else{const E=(-d-Math.sqrt(f))/(2*l),M=(-d+Math.sqrt(f))/(2*l);if(E>=0&&E<=1&&(s.lerp(a,E,m),m.vsub(i,y),y.normalize(),this.reportIntersection(y,m,o,r,-1)),this.result.shouldStop)return;M>=0&&M<=1&&(s.lerp(a,M,m),m.vsub(i,y),y.normalize(),this.reportIntersection(y,m,o,r,-1))}}_intersectConvex(e,t,i,r,o,s){const a=kwe,c=_G,l=s&&s.faceList||null,d=e.faces,h=e.vertices,f=e.faceNormals,m=this.direction,y=this.from,M=y.distanceTo(this.to),H=l?l.length:d.length,K=this.result;for(let de=0;!K.shouldStop&&de<H;de++){const Ie=l?l[de]:de,Fe=d[Ie],Xe=f[Ie],lt=t,gt=i;c.copy(h[Fe[0]]),lt.vmult(c,c),c.vadd(gt,c),c.vsub(y,c),lt.vmult(Xe,a);const mt=m.dot(a);if(Math.abs(mt)<this.precision)continue;const pt=a.dot(c)/mt;if(!(pt<0)){m.scale(pt,va),va.vadd(y,va),qc.copy(h[Fe[0]]),lt.vmult(qc,qc),gt.vadd(qc,qc);for(let yt=1;!K.shouldStop&&yt<Fe.length-1;yt++){Jl.copy(h[Fe[yt]]),Zl.copy(h[Fe[yt+1]]),lt.vmult(Jl,Jl),lt.vmult(Zl,Zl),gt.vadd(Jl,Jl),gt.vadd(Zl,Zl);const Ct=va.distanceTo(y);!Ao.pointInTriangle(va,qc,Jl,Zl)&&!Ao.pointInTriangle(va,Jl,qc,Zl)||Ct>M||this.reportIntersection(a,va,o,r,Ie)}}}}_intersectTrimesh(e,t,i,r,o,s){const a=Pwe,c=Vwe,l=zwe,d=_G,h=Fwe,f=Lwe,m=Bwe,y=Uwe,E=jwe,M=e.indices,H=this.from,K=this.to,de=this.direction;l.position.copy(i),l.quaternion.copy(t),Fi.vectorToLocalFrame(i,t,de,h),Fi.pointToLocalFrame(i,t,H,f),Fi.pointToLocalFrame(i,t,K,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,m.vsub(f,h),h.normalize();const Ie=f.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let Fe=0,Xe=c.length;!this.result.shouldStop&&Fe!==Xe;Fe++){const lt=c[Fe];e.getNormal(lt,a),e.getVertex(M[3*lt],qc),qc.vsub(f,d);const gt=h.dot(a),mt=a.dot(d)/gt;if(mt<0)continue;h.scale(mt,va),va.vadd(f,va),e.getVertex(M[3*lt+1],Jl),e.getVertex(M[3*lt+2],Zl);const pt=va.distanceSquared(f);!Ao.pointInTriangle(va,Jl,qc,Zl)&&!Ao.pointInTriangle(va,qc,Jl,Zl)||pt>Ie||(Fi.vectorToWorldFrame(t,a,E),Fi.pointToWorldFrame(i,t,va,y),this.reportIntersection(E,y,o,r,lt))}c.length=0}reportIntersection(e,t,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case Ao.ALL:this.hasHit=!0,l.set(s,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case Ao.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c));break;case Ao.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,rp),i.vsub(t,q0),e.vsub(t,qO);const o=rp.dot(rp),s=rp.dot(q0),a=rp.dot(qO),c=q0.dot(q0),l=q0.dot(qO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}Ao.CLOSEST=1,Ao.ANY=2,Ao.ALL=4;const mG=new fr,KO=[],q0=new xe,qO=new xe,Cwe=new xe,Mwe=new ro,va=new xe,qc=new xe,Jl=new xe,Zl=new xe;new xe,new K0;const gG={faceList:[0]},wA=new xe,Twe=new Ao,Iwe=[],Dwe=new xe,Rwe=new xe,kwe=new xe,_G=(new xe,new xe,new xe),Pwe=new xe,Fwe=new xe,Lwe=new xe,Bwe=new xe,jwe=new xe,Uwe=new xe;new fr;const Vwe=[],zwe=new Fi,rp=new xe,EA=new xe;new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new Ao,new xe,new xe,new xe,new xe(1,0,0),new xe(0,1,0),new xe(0,0,1),new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new fr,new xe,new fr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new fr,new xe,new Fi,new fr,new xe,new xe,new xe,new xe,new xe,new ro,new ro,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new fr,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new ro,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe,new fr,new Ao;const Po=globalThis.performance||{};if(!Po.now){let n=Date.now();Po.timing&&Po.timing.navigationStart&&(n=Po.timing.navigationStart),Po.now=()=>Date.now()-n}new xe;var cp=g(1979);function tu(n={}){const{connector:e=(()=>new Yt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),s=c=void 0,d=h=!1},y=()=>{const E=s;m(),E?.unsubscribe()};return ki((E,M)=>{l++,!h&&!d&&f();const H=c=c??e();M.add(()=>{l--,0===l&&!h&&!d&&(a=eN(y,r))}),H.subscribe(M),!s&&l>0&&(s=new Bo({next:K=>H.next(K),error:K=>{h=!0,f(),a=eN(m,t,K),H.error(K)},complete:()=>{d=!0,f(),a=eN(m,i),H.complete()}}),Oo(E).subscribe(s))})(o)}}function eN(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Bo({next:()=>{i.unsubscribe(),n()}});return Oo(e(...t)).subscribe(i)}function Hg(n,e,t){e||(e=new qn(qn.IDENTITY));const i=new qn(qn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const o=new qn(qn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(o)}n.scale&&i.scale(n.scale)}const r=new qn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const o of n.nodes||n.children||[])if(!1===Hg(o,r,t))return!1;return!0}function HG(){C5([NH,jg])}function GG(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||Hg(r,new qn(qn.IDENTITY),(o,s)=>o!==t||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function tN(n,e){return nN.apply(this,arguments)}function nN(){return nN=jt(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(o=>o.blob())):fetch(t);const r=yield KE(i,jg,{DracoLoader:wO,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),GG(n.scenegraphNode,r)}),nN.apply(this,arguments)}function YAe(n,e){return iN.apply(this,arguments)}function iN(){return iN=jt(function*(n,e){return GG(n,yield e)}),iN.apply(this,arguments)}function rN(){return rN=jt(function*(n){console.log("Starting Collisioning");const e=n.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new qn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new fr({lowerBound:new xe(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new xe(...l.map((d,h)=>Math.max(d,c[h])))})}}),t=[];for(const s of n.filter(a=>!!a.scenegraph)){const a=yield O0(s.scenegraph,jg,{DracoLoader:wO,decompress:!0,postProcess:!0});for(const c of a.scenes)Hg(c,new qn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new fr({lowerBound:new xe(...f.map((y,E)=>Math.min(y,m[E]))),upperBound:new xe(...m.map((y,E)=>Math.max(y,f[E])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of t)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),rN.apply(this,arguments)}function oN(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new Bxe;break;case"cone":i=new zxe;break;case"cylinder":i=new Hxe;break;default:i=new Kxe}return new Tk({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Ii.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function WG(n,e,t){if(e&&0!==e.length)return new Ak({id:n,pickable:!0,data:e.map(i=>({...i,position:new qn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}let KAe=(()=>{class n extends XR{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),HG()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const s of t.data){const a=s.geometry??"cube";s.scenegraph?i.scenegraph.push(s):void 0!==i[a]&&i[a].push(s)}const r={};for(const s of i.scenegraph)s.scenegraph&&s.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,s.scenegraph)&&(r[s.scenegraph]=tN({scenegraph:s.scenegraph},n.gltfCache));const o=[];for(const[s,a]of Object.entries(i))if("scenegraph"===s)for(const c of a)o.push(new HO({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:Ii.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?YAe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===s?(o.push(WG("text",a.filter(c=>c.unpickable),{pickable:!1})),o.push(WG("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===s?o.push(oN(s,a,{wireframe:!0,pickable:!1,geometry:s})):(o.push(oN(s,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:s})),o.push(oN(`${s}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:s})));return t.doCollisions&&function XAe(n){rN.apply(this,arguments)}(t.data),o.filter(s=>!!s)}getPickingInfo(t){return t.info}}return n})();function $G(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),$G(t,e);return e}function sN(){return sN=jt(function*(n,e,t,i){HG();const r=yield tN({scenegraph:n,scenegraphNode:t},i),o={},s=[];for(const a of r.scenes)Hg(a,e=new qn(e||qn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new qn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:d["@id"],transformMatrix:new qn(e||qn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new fr({lowerBound:new xe(...f.map((y,E)=>Math.min(y,m[E]))),upperBound:new xe(...m.map((y,E)=>Math.max(y,f[E])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of $G(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new xe(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new qn(qn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),sN.apply(this,arguments)}let JAe=(()=>{class n{constructor(t){this.deckProps=t,this.bodyUILayer=new KAe({}),this.nodeClickSubject=new Yt,this.nodeHoverStartSubject=new Yt,this.nodeHoverStopSubject=new Yt,this.sceneRotationSubject=new Li([0,0]),this.nodeDragStartSubject=new Yt,this.nodeDragSubject=new Yt,this.nodeDragEndSubject=new Yt,this.nodeClick$=this.nodeClickSubject.pipe(tu()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(tu()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(tu()),this.sceneRotation$=this.sceneRotationSubject.pipe(tu()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(tu()),this.nodeDrag$=this.nodeDragSubject.pipe(tu()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(tu());const i={...t,views:["orthographic"===t.camera?new ZR({flipY:!1,near:-1e3}):new F5({orbitAxis:"Y"})],controller:t.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};t.legacyLighting&&(i.effects=[new nk({ambientLight:new L5({color:[255,255,255],intensity:10})})]),this.deck=new yk(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:t.minRotationX??-15,maxRotationX:t.maxRotationX??15,target:t.target??[.5,.5,0],rotationX:0,rotationOrbit:t.rotation??0,zoom:t.zoom??9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){var t=this;return jt(function*(){for(;!t.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(t){if(t?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of t)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new qn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function qAe(n,e,t,i){return sN.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",t),(t=t.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new qn(t.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:t}})}setRotationX(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:t}})}setZoom(t){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:t}})}setTarget(t){this.deck.setProps({viewState:{...this.deck.props.viewState,target:t}})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object?.["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){t.picked&&t.object?.["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(t){if(t.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...t.viewState}}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){t?.object?.["@id"]&&r.next({node:t.object,info:t,e:i})}}return qi([cp.ak],n.prototype,"_onHover",null),qi([cp.ak],n.prototype,"_onClick",null),qi([cp.ak],n.prototype,"_onViewStateChange",null),qi([cp.ak],n.prototype,"_onDragStart",null),qi([cp.ak],n.prototype,"_onDrag",null),qi([cp.ak],n.prototype,"_onDragEnd",null),n})();const nv=Ve(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});let XG=(()=>{class n{constructor(){this.bootstrap$=new lg(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ZAe(n,e){return n===e}function cN(n,e=ZAe){let t=null,i=null;function r(){return function QAe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let eSe=(()=>{class n{static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n._value={},n})();const KG=new bt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>eSe.pop()}),qG=new bt("\u0275NGXS_STATE_FACTORY"),JG=new bt("\u0275NGXS_STATE_CONTEXT_FACTORY");function gn(...n){return fo(n,s0(n))}const{isArray:tSe}=Array,{getPrototypeOf:nSe,prototype:iSe,keys:rSe}=Object;function ZG(n){if(1===n.length){const e=n[0];if(tSe(e))return{args:e,keys:null};if(function oSe(n){return n&&"object"==typeof n&&nSe(n)===iSe}(e)){const t=rSe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:sSe}=Array;function RA(n){return qt(e=>function aSe(n,e){return sSe(e)?n(...e):n(e)}(n,e))}function QG(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function iv(...n){const e=AV(n),{args:t,keys:i}=ZG(n),r=new Ye(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;Oo(t[d]).subscribe(bi(o,f=>{h||(h=!0,l--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?QG(i,a):a),o.complete())}))}});return e?r.pipe(RA(e)):r}function xh(n,e){const t=ye(n)?n:()=>n,i=r=>r.error(t());return new Ye(e?r=>e.schedule(i,0,r):i)}function lp(n){return!!n&&(n instanceof Ye||ye(n.lift)&&ye(n.subscribe))}function Di(n,e){return ki((t,i)=>{let r=0;t.subscribe(bi(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Js(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,tu({connector:()=>new lg(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ri(n){return n<=0?()=>Ks:ki((e,t)=>{let i=0;e.subscribe(bi(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function e9(n,e){return e?t=>t.pipe(e9((i,r)=>Oo(n(i,r)).pipe(qt((o,s)=>e(i,o,r,s))))):ki((t,i)=>{let r=0,o=null,s=!1;t.subscribe(bi(i,a=>{o||(o=bi(i,void 0,()=>{o=null,s&&i.complete()}),Oo(n(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function Gg(n){return ki((e,t)=>{let i=!1;e.subscribe(bi(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Jc(n){return ki((e,t)=>{let o,i=null,r=!1;i=e.subscribe(bi(t,void 0,void 0,s=>{o=Oo(n(s,Jc(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Vr(n){return ki((e,t)=>{Oo(n).subscribe(bi(t,()=>t.complete(),et)),!t.closed&&e.subscribe(t)})}function wh(n,e=Uo){return n=n??cSe,ki((t,i)=>{let r,o=!0;t.subscribe(bi(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function cSe(n,e){return n===e}function Rr(n,e,t){const i=ye(n)||e||t?{next:n,error:e,complete:t}:n;return i?ki((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(bi(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Uo}function rv(...n){return function lSe(){return cE(1)}()(fo(n,s0(n)))}function Zc(...n){const e=s0(n);return ki((t,i)=>{(e?rv(n,t,e):rv(n,t)).subscribe(i)})}function dp(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const o9=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?t:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),n),n},dN=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),uN=n=>n&&"object"==typeof n&&!Array.isArray(n),hN=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(uN(n)&&uN(t))for(const i in t)uN(t[i])?(n[i]||Object.assign(n,{[i]:{}}),hN(n[i],t[i])):Object.assign(n,{[i]:t[i]});return hN(n,...e)};let s9=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return UD(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return Qt.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return Qt.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}}return n.\u0275fac=function(t){return new(t||n)(it(Qt),it(Oa))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a9=new bt("ROOT_OPTIONS"),c9=new bt("ROOT_STATE_TOKEN"),l9=new bt("FEATURE_STATE_TOKEN"),d9=new bt("NGXS_PLUGINS"),nu="NGXS_META",u9="NGXS_OPTIONS_META",fN="NGXS_SELECTOR_META";let OA=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=s9}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:function(t){let i=null;return t?i=new t:(r=it(a9),i=hN(new n,r)),i;var r},providedIn:"root"}),n})();class ySe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let vSe=(()=>{class n{enter(t){return t()}leave(t){return t()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h9=new bt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),xSe=new bt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=Dt(Id),e=n.get(h9);return n.get(e||(typeof Oi.Zone<"u"?s9:vSe))}});function pN(n){if(!n.hasOwnProperty(nu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,nu,{value:e})}return up(n)}function up(n){return n[nu]}function NA(n){return n[fN]}function f9(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function wSe(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function ESe(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let o=t;for(;++i<r;)o=o+" && "+(t=t+"."+e[i]);return new Function("store","return "+o+";")}(n)}function ISe(...n){return function Wg(n,e,t=kSe){const i=function OSe(n){return n.reduce((e,t)=>(e[dp(t)]=!0,e),{})}(n),r=e&&function NSe(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(o){return o.pipe(function DSe(n,e){return Di(t=>{const i=dp(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function kSe(){return qt(n=>n.action)}function PA(n){return e=>new Ye(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let p9=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(it(xSe))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m9(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const o=e.pop();o&&n(...o)}t=!1}}}class PSe extends Yt{constructor(){super(...arguments),this._orderedNext=m9(e=>super.next(e))}next(e){this._orderedNext(e)}}class FSe extends Li{constructor(e){super(e),this._orderedNext=m9(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let g9=(()=>{class n extends PSe{ngOnDestroy(){this.complete()}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Qi(n)))(i||n)}})(),n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _9=n=>(...e)=>n.shift()(...e,(...i)=>_9(n)(...i));let b9=(()=>{class n{constructor(t){this._injector=t,this._errorHandler=null}reportErrorSafely(t){null===this._errorHandler&&(this._errorHandler=this._injector.get(Fa));try{this._errorHandler.handleError(t)}catch{}}}return n.\u0275fac=function(t){return new(t||n)(it(ur))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gN=(()=>{class n extends FSe{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_N=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(it(n,12),it(d9,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),y9=(()=>{class n extends Yt{}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Qi(n)))(i||n)}})(),n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BSe=(()=>{class n{constructor(t,i,r,o,s,a){this._actions=t,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function LSe(n,e){return t=>{let i=!1;return t.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>n.reportErrorSafely(r))}))}}),new Ye(r=>(i=!0,t.pipe(PA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?gn(this._stateStream.getValue()):iv(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return _9([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(Js())}getActionResultStream(t){return this._actionResults.pipe(Di(i=>i.action===t&&"DISPATCHED"!==i.status),Ri(1),Js())}createDispatchObservable(t){return t.pipe(e9(i=>{switch(i.status){case"SUCCESSFUL":return gn(this._stateStream.getValue());case"ERRORED":return xh(i.error);default:return Ks}})).pipe(Js())}}return n.\u0275fac=function(t){return new(t||n)(it(g9),it(y9),it(_N),it(gN),it(p9),it(b9))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ov=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(it(gN),it(BSe),it(OA))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bN=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>E9(i.getState(),t.path),patchState(r){const o=i.getState(),s=function jSe(n){return e=>{const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(r);return w9(i,o,s,t.path)},setState(r){const o=i.getState();return function kA(n){return"function"==typeof n}(r)?w9(i,o,r,t.path):x9(i,o,r,t.path)},dispatch:r=>i.dispatch(r)}}}return n.\u0275fac=function(t){return new(t||n)(it(ov))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function x9(n,e,t,i){const r=o9(e,i,t);return n.setState(r),r}function w9(n,e,t,i){return x9(n,e,t(E9(e,i)),i)}function E9(n,e){return dN(n,e)}new RegExp("^[a-zA-Z0-9_]+$");let A9=(()=>{class n{}return n.type="@@INIT",n})(),S9=(()=>{class n{constructor(t){this.addedStates=t}}return n.type="@@UPDATE_STATE",n})();new bt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let $g=(()=>{class n{constructor(t,i,r,o,s,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=cN(()=>{const l=this;function d(f){const m=l.statePaths[f];return m?f9(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let m=d(f);return m||((...y)=>(m||(m=d(f)),m?m(...y):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(t){let i=t;return Array.isArray(t)?i=t.slice():function TSe(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?i=Object.assign({},t):void 0===t&&(i={}),i}ngOnDestroy(){var t;null===(t=this._actionsSubscription)||void 0===t||t.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function ASe(n){const e=t=>n.find(r=>r===t)[nu].name;return n.reduce((t,i)=>{const{name:r,children:o}=i[nu];return t[r]=(o||[]).map(e),t},{})}(i),o=function MSe(n){const e=[],t={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),t[r]=!0,n[r].forEach(s=>{t[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),s=function CSe(n,e={}){const t=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=t(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function SSe(n){return n.reduce((e,t)=>(e[t[nu].name]=t,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],f=d[nu];this.addRuntimeInfoToMeta(f,h);const m={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(d),defaults:n._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((s,a)=>o9(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new Yt;this._actionsSubscription=this._actions.pipe(Di(i=>"DISPATCHED"===i.status),wo(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe(qt(()=>({action:r,status:"SUCCESSFUL"})),Gg({action:r,status:"CANCELED"}),Jc(o=>gn({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=dp(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=fo(h)),lp(h)?(h=h.pipe(wo(f=>f instanceof Promise?fo(f):lp(f)?f:gn(f)),Gg({})),l.options.cancelUncompleted&&(h=h.pipe(Vr(t.pipe(ISe(i)))))):h=gn({}).pipe(Js()),o.push(h)}catch(h){o.push(xh(h))}s=!0}}return o.length||o.push(gn({})),iv(o)}addToStatesMap(t){const i=[],r=this.statesByName;for(const o of t){const s=up(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==dN(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(it(ur),it(OA),it(n,12),it(g9),it(y9),it(bN),it(KG,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function C9(n){const e=NA(n)||up(n);return e&&e.makeRootSelector||(()=>n)}let Ql=(()=>{class n{constructor(t,i,r,o,s,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(PA(this._internalExecutionStrategy),Js({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(qt(i),Jc(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?gn(void 0):xh(r)}),wh(),PA(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(Ri(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(PA(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return C9(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),t):t;this._stateStream.next(s)}}}return n.\u0275fac=function(t){return new(t||n)(it(gN),it(ov),it(OA),it(p9),it($g),it(KG,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LA=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.store=null,n.config=null,n.\u0275fac=function(t){return new(t||n)(it(Ql),it(OA))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M9=(()=>{class n{constructor(t,i,r,o,s){this._store=t,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new Yt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(Di(()=>!!i),Rr(()=>this._invokeInitOnStates(i.states)),wo(()=>this._bootstrapper.appBootstrapped$),Di(r=>!!r),Jc(r=>(this._internalErrorReporter.reportErrorSafely(r),Ks)),Vr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>dN(o,i.path)).pipe(Zc(void 0),ki((n,e)=>{let t,i=!1;n.subscribe(bi(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))}),Vr(this._destroy$)).subscribe(([o,s])=>{const a=new ySe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(it(Ql),it(b9),it(ov),it(bN),it(XG))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZSe=(()=>{class n{constructor(t,i,r,o,s=[],a){const c=t.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new A9,c)}}return n.\u0275fac=function(t){return new(t||n)(it($g),it(ov),it(Ql),it(LA),it(c9,8),it(M9))},n.\u0275mod=dn({type:n}),n.\u0275inj=ln({}),n})(),QSe=(()=>{class n{constructor(t,i,r,o=[],s){const a=n.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new S9(c.defaults),c))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(it(Ql),it(ov),it($g),it(l9,8),it(M9))},n.\u0275mod=dn({type:n}),n.\u0275inj=ln({}),n})(),T9=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:ZSe,providers:[$g,_N,...t,...n.ngxsTokenProviders(t,i)]}}static forFeature(t=[]){return{ngModule:QSe,providers:[$g,_N,...t,{provide:l9,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,i){return[{provide:h9,useValue:i.executionStrategy},{provide:c9,useValue:t},{provide:a9,useValue:i},{provide:U1,useFactory:n.appBootstrapListenerFactory,multi:!0,deps:[XG]},{provide:JG,useExisting:bN},{provide:qG,useExisting:$g}]}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=dn({type:n}),n.\u0275inj=ln({}),n})();function yN(n,e){return(t,i)=>{const r=pN(t.constructor);Array.isArray(n)||(n=[n]);for(const o of n){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function I9(n){return e=>{const t=e,i=pN(t),r=Object.getPrototypeOf(t),o=function eCe(n,e){return Object.assign(Object.assign({},n[u9]||{}),e)}(r,n);(function tCe(n){const{meta:e,inheritedStateClass:t,optionsWithInheritance:i}=n,{children:r,defaults:o,name:s}=i,a="string"==typeof s?s:s&&s.getName()||null;if(t.hasOwnProperty(nu)){const c=t[nu]||{};e.actions=Object.assign(Object.assign({},e.actions),c.actions)}e.children=r,e.defaults=o,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:o}),t[u9]=o}}const nCe=36;function BA(n,...e){return function(t,i){const r=i.toString(),o=`__${r}__selector`,s=function rCe(n,e,t=[]){return e=e||function oCe(n){const e=n.length-1;return n.charCodeAt(e)===nCe?n.slice(0,e):n}(n),"string"==typeof e?f9(t.length?[e,...t]:e.split("."),LA.config):e}(r,n,e);Object.defineProperties(t,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function iCe(n){return LA.store||function bSe(){throw new Error("You have forgotten to import the NGXS module!")}(),LA.store.select(n)}(s))}}})}}const D9="NGXS_SELECTOR_OPTIONS_META",jA={getOptions:n=>n&&n[D9]||{},defineOptions:(n,e)=>{n&&(n[D9]=e)}};function sCe(n,e){const t=function mN(n){return n.hasOwnProperty(fN)||Object.defineProperty(n,fN,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),NA(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function aCe(n,e){return Object.assign(Object.assign(Object.assign(Object.assign({},jA.getOptions(n.containerClass)||{}),jA.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}(r,i()),t}function sv(n,e,t){const i=function KSe(n,e){const t=e&&e.containerClass,r=cN(function(...s){const a=n.apply(t,s);return a instanceof Function?cN.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=sCe(e,t);return r.makeRootSelector=function XSe(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function qSe(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),s=function JSe(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&up(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>C9(a)(n));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,n,e);return function(a){const c=r.map(l=>l(a));try{return t(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,n,i),i}function Yg(n){return(e,t,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,t));const r=i?.value,o=sv(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}let VN;try{VN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{VN=!1}let fv,mp,zN,cr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?ih(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!VN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(it(Oa))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qg(n){return function aMe(){if(null==fv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fv=!0}))}finally{fv=fv||!1}return fv}()?n:!!n.capture}function cMe(){if(null==mp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return mp=!1,mp;if("scrollBehavior"in document.documentElement.style)mp=!0;else{const n=Element.prototype.scrollTo;mp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return mp}function QA(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ru(n){return n.composedPath?n.composedPath()[0]:n.target}function HN(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ed(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class SMe extends At{constructor(e,t){super()}schedule(e,t=0){return this}}const tS={setInterval(n,e,...t){const{delegate:i}=tS;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=tS;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class $N extends SMe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return tS.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&tS.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_t(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class mv{constructor(e,t=mv.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}mv.now=JD.now;class YN extends mv{constructor(e,t=mv.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const nS=new YN($N),CMe=nS;function Xr(n){return null!=n&&"false"!=`${n}`}function es(n,e=0){return function MMe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function iS(n){return Array.isArray(n)?n:[n]}function So(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ou(n){return n instanceof Sn?n.nativeElement:n}function Sh(...n){const e=s0(n),t=AV(n),{args:i,keys:r}=ZG(n);if(0===i.length)return fo([],e);const o=new Ye(function DMe(n,e,t=Uo){return i=>{z7(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)z7(e,()=>{const l=fo(n[c],e);let d=!1;l.subscribe(bi(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>QG(r,s):Uo));return t?o.pipe(RA(t)):o}function z7(n,e,t){n?Vd(t,n,e):e()}let eP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function jMe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function BMe(n){try{return n.frameElement}catch{return null}}(function YMe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===q7(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=q7(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function WMe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function $Me(n){return!function VMe(n){return function HMe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function UMe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function zMe(n){return function GMe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||K7(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(it(cr))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K7(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function q7(n){if(!K7(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class XMe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ri(1)).subscribe(e)}}let J7=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new XMe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(it(eP),it(Qt),it(Jn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z7(n){return 0===n.buttons||0===n.detail}function Q7(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const KMe=new bt("cdk-input-modality-detector-options"),qMe={ignoreKeys:[18,17,224,91,16]},Jg=qg({passive:!0,capture:!0});let JMe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Li(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ru(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Z7(s)?"keyboard":"mouse"),this._mostRecentTarget=ru(s))},this._onTouchstart=s=>{Q7(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ru(s))},this._options={...qMe,...o},this.modalityDetected=this._modality.pipe(function KN(n){return Di((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(wh()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Jg),r.addEventListener("mousedown",this._onMousedown,Jg),r.addEventListener("touchstart",this._onTouchstart,Jg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Jg),document.removeEventListener("mousedown",this._onMousedown,Jg),document.removeEventListener("touchstart",this._onTouchstart,Jg))}static#e=this.\u0275fac=function(i){return new(i||n)(it(cr),it(Qt),it(Jn),it(KMe,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const QMe=new bt("cdk-focus-monitor-default-options"),aS=qg({passive:!0,capture:!0});let gv=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Yt,this._rootNodeFocusAndBlurListener=a=>{for(let l=ru(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=ou(t);if(!this._platform.isBrowser||1!==r.nodeType)return gn();const o=function dMe(n){if(function lMe(){if(null==zN){const n=typeof document<"u"?document.head:null;zN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return zN}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new Yt,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=ou(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=ou(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=ru(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,aS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,aS)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Vr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,aS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,aS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(it(Qt),it(cr),it(JMe),it(Jn,8),it(QMe,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const eTe=new bt("cdk-dir-doc",{providedIn:"root",factory:function tTe(){return Dt(Jn)}}),nTe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _p=(()=>{class n{constructor(t){this.value="ltr",this.change=new nn,t&&(this.value=function iTe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?nTe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(it(eTe,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aW(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function fTe(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?es(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}const cW=qg({passive:!0,capture:!0});class bTe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=ru(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,cW)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,cW)))}}class yv{static#e=this._eventManager=new bTe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ou(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...lW,...i.animation},s=i.radius||function vTe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,y="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,E=new _Te(this,d,i,y);d.style.transform="scale3d(1, 1, 1)",E.state=0,i.persistent||(this._mostRecentTransientRipple=E);return!y&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(E),K=()=>this._destroyRipple(E);d.addEventListener("transitionend",H),d.addEventListener("transitioncancel",K)}),this._activeRipples.set(E,null),(y||!l)&&this._finishRippleTransition(E),E}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...lW,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ou(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,uW.forEach(i=>{yv._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{hW.forEach(t=>{this._triggerElement.addEventListener(t,this,dW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Z7(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Q7(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(uW.forEach(t=>yv._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&hW.forEach(t=>e.removeEventListener(t,this,dW)))}}const CTe=["addListener","removeListener"],MTe=["addEventListener","removeEventListener"],TTe=["on","off"];function e_(n,e,t,i){if(ye(t)&&(i=t,t=void 0),i)return e_(n,e,t).pipe(RA(i));const[r,o]=function RTe(n){return ye(n.addEventListener)&&ye(n.removeEventListener)}(n)?MTe.map(s=>a=>n[s](e,a,t)):function ITe(n){return ye(n.addListener)&&ye(n.removeListener)}(n)?CTe.map(wW(n,e)):function DTe(n){return ye(n.on)&&ye(n.off)}(n)?TTe.map(wW(n,e)):[];if(!r&&r2(n))return wo(s=>e_(s,e,t))(Oo(n));if(!r)throw new TypeError("Invalid event target");return new Ye(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function wW(n,e){return t=>i=>n[t](e,i)}const vv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=vv;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new At(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=vv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=vv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class OTe extends YN{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class kTe extends $N{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=vv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(vv.cancelAnimationFrame(t),e._scheduled=void 0)}});let rP,PTe=1;const lS={};function EW(n){return n in lS&&(delete lS[n],!0)}const FTe={setImmediate(n){const e=PTe++;return lS[e]=!0,rP||(rP=Promise.resolve()),rP.then(()=>EW(e)&&n()),e},clearImmediate(n){EW(n)}},{setImmediate:LTe,clearImmediate:BTe}=FTe,dS={setImmediate(...n){const{delegate:e}=dS;return(e?.setImmediate||LTe)(...n)},clearImmediate(n){const{delegate:e}=dS;return(e?.clearImmediate||BTe)(n)},delegate:void 0};new class UTe extends YN{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class jTe extends $N{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=dS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(dS.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function oP(n=0,e,t=CMe){let i=-1;return null!=e&&(EV(e)?t=e:i=e),new Ye(r=>{let o=function HTe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function AW(n,e=nS){return function zTe(n){return ki((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,t.next(l)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(bi(t,l=>{i=!0,r=l,o||Oo(n(l)).subscribe(o=bi(t,a,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>oP(n,e))}let SW=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Yt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ye(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(AW(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):gn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Di(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ou(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>e_(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(it(Qt),it(cr),it(Jn,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sP=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Yt,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(AW(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(it(cr),it(Qt),it(Jn,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class aP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class hS extends aP{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class fS extends aP{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class $Te extends aP{constructor(e){super(),this.element=e instanceof Sn?e.nativeElement:e}}class pS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof hS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof fS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof $Te?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class YTe extends pS{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ur.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let t_=(()=>{class n extends pS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new nn,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Dl),Ge(us),Ge(Jn))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Wn]})}return n})(),Ch=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({})}return n})();const MW=cMe();class XTe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=So(-this._previousScrollPosition.left),e.style.top=So(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),MW&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),MW&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class KTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Di(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class TW{enable(){}disable(){}attach(){}}function cP(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function IW(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class qTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();cP(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let JTe=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new TW,this.close=s=>new KTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new XTe(this._viewportRuler,this._document),this.reposition=s=>new qTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(it(SW),it(sP),it(Qt),it(Jn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class lP{constructor(e){if(this.scrollStrategy=new TW,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class ZTe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let DW=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QTe=(()=>{class n extends DW{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn),it(Qt,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eIe=(()=>{class n extends DW{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ru(o)},this._clickListener=o=>{const s=ru(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const d=c[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn),it(cr),it(Qt,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mS=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||HN()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),HN()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(it(Jn),it(cr))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class gS{constructor(e,t,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Yt,this._attachments=new Yt,this._detachments=new Yt,this._locationChanges=At.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Yt,this._outsidePointerEvents=new Yt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ri(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=So(this._config.width),e.height=So(this._config.height),e.minWidth=So(this._config.minWidth),e.minHeight=So(this._config.minHeight),e.maxWidth=So(this._config.maxWidth),e.maxHeight=So(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=iS(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Vr($c(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const RW="cdk-overlay-connected-position-bounding-box",tIe=/([A-Za-z%]+)$/;class nIe{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Yt,this._resizeSubscription=At.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(RW),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),d=this._getOverlayFit(l,t,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&yp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(RW),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=OW(t);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let f=0-a,m=a+o.height-i.height,y=this._subtractOverflows(o.width,0-s,s+o.width-i.width),E=this._subtractOverflows(o.height,f,m),M=y*E;return{visibleArea:M,isCompletelyWithinViewport:o.width*o.height===M,fitsInViewportVertically:E===o.height,fitsInViewportHorizontally:y==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=kW(this._overlayRef.getConfig().minHeight),a=kW(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=OW(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new ZTe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,f;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),y=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>y&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-y/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),y=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>y&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-y/2)}return{top:s,left:h,bottom:a,right:f,width:d,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=So(i.height),r.top=So(i.top),r.bottom=So(i.bottom),r.width=So(i.width),r.left=So(i.left),r.right=So(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=So(o)),s&&(r.maxWidth=So(s))}this._lastBoundingBoxSize=i,yp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){yp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){yp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();yp(i,this._getExactOverlayY(t,e,d)),yp(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=So(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=So(s.maxWidth):o&&(i.maxWidth="")),yp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=So(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=So(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:IW(e,i),isOriginOutsideView:cP(e,i),isOverlayClipped:IW(t,i),isOverlayOutsideView:cP(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&iS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Sn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function yp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function kW(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(tIe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function OW(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const NW="cdk-global-overlay-wrapper";class iIe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(NW),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let m="",y="",E="";c?E="flex-start":"center"===d?(E="center",f?y=h:m=h):f?"left"===d||"end"===d?(E="flex-end",m=h):("right"===d||"start"===d)&&(E="flex-start",y=h):"left"===d||"start"===d?(E="flex-start",m=h):("right"===d||"end"===d)&&(E="flex-end",y=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":y,t.justifyContent=E,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(NW),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let rIe=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new iIe}flexibleConnectedTo(t){return new nIe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(it(sP),it(Jn),it(cr),it(mS))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oIe=0,ea=(()=>{class n{constructor(t,i,r,o,s,a,c,l,d,h,f,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=l,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new lP(t);return s.direction=s.direction||this._directionality.value,new gS(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+oIe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Qu)),new YTe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(it(JTe),it(mS),it(Dl),it(rIe),it(QTe),it(ur),it(Qt),it(Jn),it(_p),it(Uf),it(eIe),it(_o,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vp(n,e){return{type:7,name:n,definitions:e,options:{}}}function yc(n,e=null){return{type:4,styles:e,timings:n}}function Fo(n){return{type:6,styles:n,offset:null}}function vc(n,e,t){return{type:0,name:n,styles:e,options:t}}function Qc(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function xv(n){return new Ye(e=>{Oo(n()).subscribe(e)})}function t$(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return qt(t=>{let i=t;for(let r=0;r<e;r++){const o=i?.[n[r]];if(!(typeof o<"u"))return;i=o}return i})}g(1563);class yS{}class xc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class bDe{encodeKey(e){return n$(e)}encodeValue(e){return n$(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vDe=/%(\d[a-f0-9])/gi,xDe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function n$(n){return encodeURIComponent(n).replace(vDe,(e,t)=>xDe[t]??e)}function xS(n){return`${n}`}class Mh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bDe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yDe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(xS):[xS(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Mh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(xS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class wDe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function i$(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function r$(n){return typeof Blob<"u"&&n instanceof Blob}function o$(n){return typeof FormData<"u"&&n instanceof FormData}class Ev{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function EDe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new xc),this.context||(this.context=new wDe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Mh,this.urlWithParams=t}serializeBody(){return null===this.body?null:i$(this.body)||r$(this.body)||o$(this.body)||function ADe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Mh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||o$(this.body)?null:r$(this.body)?this.body.type||null:i$(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Mh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new Ev(t,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var Th=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Th||{});class pP{constructor(e,t=200,i="OK"){this.headers=e.headers||new xc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class xp extends pP{constructor(e={}){super(e),this.type=Th.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new xp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function mP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let r_=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Ev)o=t;else{let c,l;c=r.headers instanceof xc?r.headers:new xc(r.headers),r.params&&(l=r.params instanceof Mh?r.params:new Mh({fromObject:r.params})),o=new Ev(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const s=gn(o).pipe(function wv(n,e){return ye(e)?wo(n,e,1):wo(n,1)}(c=>this.handler.handle(c)));if(t instanceof Ev||"events"===r.observe)return s;const a=s.pipe(Di(c=>c instanceof xp));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(qt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(qt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(qt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(qt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Mh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,mP(r,i))}post(t,i,r={}){return this.request("POST",t,mP(r,i))}put(t,i,r={}){return this.request("PUT",t,mP(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(it(yS))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const JDe=["*"];let AS;function Sv(n){return function ZDe(){if(void 0===AS&&(AS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(AS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return AS}()?.createHTML(n)||n}function E$(n){return Error(`Unable to find icon with the name "${n}"`)}function A$(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function S$(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ep{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let SS=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new Ep(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(bo.HTML,r);if(!s)throw S$(r);const a=Sv(s);return this._addSvgIconConfig(t,i,new Ep("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Ep(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(bo.HTML,i);if(!o)throw S$(i);const s=Sv(o);return this._addSvgIconSetConfig(t,new Ep("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(bo.RESOURCE_URL,t);if(!i)throw A$(t);const r=this._cachedIconsByUrl.get(i);return r?gn(CS(r)):this._loadSvgIconFromConfig(new Ep(t,null)).pipe(Rr(o=>this._cachedIconsByUrl.set(i,o)),qt(o=>CS(o)))}getNamedSvgIcon(t,i=""){const r=C$(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):xh(E$(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?gn(CS(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(qt(i=>CS(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?gn(r):iv(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Jc(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(bo.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),gn(null)})))).pipe(qt(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw E$(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Rr(i=>t.svgText=i),qt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?gn(null):this._fetchIcon(t).pipe(Rr(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(Sv("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Sv("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function QDe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(bo.RESOURCE_URL,i);if(!s)throw A$(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(qt(l=>Sv(l)),function n_(n){return ki((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(s)),tu());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(C$(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return t2e(o)?new Ep(o.url,null,o.options):new Ep(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(it(r_,8),it(o0),it(Jn,8),it(Fa))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CS(n){return n.cloneNode(!0)}function C$(n,e){return n+":"+e}function t2e(n){return!(!n.url||!n.options)}const n2e=aW(class{constructor(n){this._elementRef=n}}),i2e=new bt("MAT_ICON_DEFAULT_OPTIONS"),r2e=new bt("mat-icon-location",{providedIn:"root",factory:function o2e(){const n=Dt(Jn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),M$=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],s2e=M$.map(n=>`[${n}]`).join(", "),a2e=/^url\(['"]?#(.*?)['"]?\)$/;let Ap=(()=>{class n extends n2e{get inline(){return this._inline}set inline(t){this._inline=Xr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=At.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(s2e),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)M$.forEach(s=>{const a=i[o],c=a.getAttribute(s),l=c?c.match(a2e):null;if(l){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Ri(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Sn),Ge(SS),vl("aria-hidden"),Ge(r2e),Ge(Fa),Ge(i2e,8))};static#t=this.\u0275cmp=En({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Ni("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ln("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Wn],ngContentSelectors:JDe,decls:1,vars:0,template:function(i,r){1&i&&(uo(),Gn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})();function B2e(n,e){}class TS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let vP=(()=>{class n extends pS{constructor(t,i,r,o,s,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._platform=Dt(cr),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=QA(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=QA();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=QA()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Sn),Ge(J7),Ge(Jn,8),Ge(TS),Ge(eP),Ge(Qt),Ge(gS),Ge(gv))};static#t=this.\u0275cmp=En({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Pi(t_,7),2&i){let o;On(o=Nn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Ni("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Wn,Ff],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&Rn(0,B2e,0,0,"ng-template",0)},dependencies:[Ch,t_],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class xP{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Yt,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!ed(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const P$=new bt("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=Dt(ea);return()=>n.scrollStrategies.block()}}),j2e=new bt("DialogData"),U2e=new bt("DefaultDialogConfig");let z2e=0,F$=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Yt,this._afterOpenedAtThisLevel=new Yt,this._ariaHiddenElements=new Map,this.afterAllClosed=xv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Zc(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new TS,...i}).id=i.id||"cdk-dialog-"+z2e++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new xP(s,i),c=this._attachContainer(s,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){wP(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){wP(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),wP(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new lP({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:TS,useValue:r},{provide:xP,useValue:i},{provide:gS,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=vP;const c=new hS(a,r.viewContainerRef,ur.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,o){if(t instanceof dc){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new fS(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new hS(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:j2e,useValue:t.data},{provide:xP,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(_p,null,{optional:!0}))&&a.push({provide:_p,useValue:{value:t.direction,change:gn()}}),ur.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(it(ea),it(ur),it(U2e,8),it(n,12),it(mS),it(P$))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wP(n,e){let t=n.length;for(;t--;)e(n[t])}function G2e(n,e){}class EP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const AP="mdc-dialog--open",L$="mdc-dialog--opening",B$="mdc-dialog--closing";let SP=(()=>{class n extends vP{constructor(t,i,r,o,s,a,c,l,d){super(t,i,r,o,s,a,c,d),this._animationMode=l,this._animationStateChanged=new nn,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?U$(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?U$(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(j$,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(L$,AP)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(AP),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(AP),this._animationsEnabled?(this._hostElement.style.setProperty(j$,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(B$)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(L$,B$)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Sn),Ge(J7),Ge(Jn,8),Ge(EP),Ge(eP),Ge(Qt),Ge(gS),Ge(_o,8),Ge(gv))};static#t=this.\u0275cmp=En({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(Ju("id",r._config.id),Ni("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Ln("_mat-animation-noopable",!r._animationsEnabled))},standalone:!0,features:[Wn,Ff],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Ft(0,"div",0)(1,"div",1),Rn(2,G2e,0,0,"ng-template",2),Bt()())},dependencies:[Ch,t_],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();const j$="--mat-dialog-transition-duration";function U$(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?es(n.substring(0,n.length-2)):n.endsWith("s")?1e3*es(n.substring(0,n.length-1)):"0"===n?0:null}class IS{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Yt,this._beforeClosed=new Yt,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Di(r=>"opened"===r.state),Ri(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Di(r=>"closed"===r.state),Ri(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),$c(this.backdropClick(),this.keydownEvents().pipe(Di(r=>27===r.keyCode&&!this.disableClose&&!ed(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function V$(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Di(t=>"closing"===t.state),Ri(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const z$=new bt("MatMdcDialogData"),Y2e=new bt("mat-mdc-dialog-default-options"),H$=new bt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=Dt(ea);return()=>n.scrollStrategies.block()}});let K2e=0,Cv=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,c,l){this._overlay=t,this._defaultOptions=o,this._scrollStrategy=s,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Yt,this._afterOpenedAtThisLevel=new Yt,this.dialogConfigClass=EP,this.afterAllClosed=xv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Zc(void 0))),this._dialog=i.get(F$),this._dialogRefConstructor=IS,this._dialogContainerType=SP,this._dialogDataToken=z$}open(t,i){let r;(i={...this._defaultOptions||new EP,...i}).id=i.id||"mat-mdc-dialog-"+K2e++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:TS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,c)=>(r=new this._dialogRefConstructor(s,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){return new(i||n)(it(ea),it(ur),it(Uf,8),it(Y2e,8),it(H$),it(n,12),it(mS),it(_o,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),q2e=0,CP=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+q2e++}ngOnInit(){this._dialogRef||(this._dialogRef=function G$(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(IS,8),Ge(Sn),Ge(Cv))};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Ju("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0})}return n})(),MP=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return n})();let X$=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const K$=new bt("CdkAccordion");let Q2e=0,eRe=(()=>{class n{get expanded(){return this._expanded}set expanded(t){this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=At.EMPTY,this.closed=new nn,this.opened=new nn,this.destroyed=new nn,this.expandedChange=new nn,this.id="cdk-accordion-child-"+Q2e++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(K$,12),Ge(Ur),Ge(X$))};static#t=this.\u0275dir=Ht({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:["expanded","expanded",$r],disabled:["disabled","disabled",$r]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[li([{provide:K$,useValue:void 0}]),Bd]})}return n})();const nRe=["body"];function iRe(n,e){}const rRe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],oRe=["mat-expansion-panel-header","*","mat-action-row"];function sRe(n,e){1&n&&ni(0,"span",2),2&n&&un("@indicatorRotate",Mn()._getExpandedState())}const aRe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],cRe=["mat-panel-title","mat-panel-description","*"],q$=new bt("MAT_ACCORDION"),J$="225ms cubic-bezier(0.4,0.0,0.2,1)",Z$={indicatorRotate:vp("indicatorRotate",[vc("collapsed, void",Fo({transform:"rotate(0deg)"})),vc("expanded",Fo({transform:"rotate(180deg)"})),Qc("expanded <=> collapsed, void => collapsed",yc(J$))]),bodyExpansion:vp("bodyExpansion",[vc("collapsed, void",Fo({height:"0px",visibility:"hidden"})),vc("expanded",Fo({height:"*",visibility:""})),Qc("expanded <=> collapsed, void => collapsed",yc(J$))])},Q$=new bt("MAT_EXPANSION_PANEL");let lRe=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(dc),Ge(Q$,8))};static#t=this.\u0275dir=Ht({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),dRe=0;const eY=new bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let tY=(()=>{class n extends eRe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Xr(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,o,s,a,c){super(t,i,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new nn,this.afterCollapse=new nn,this._inputChanges=new Yt,this._headerId="mat-expansion-panel-header-"+dRe++,this._bodyAnimationDone=new Yt,this.accordion=t,this._document=s,this._bodyAnimationDone.pipe(wh((l,d)=>l.fromState===d.fromState&&l.toState===d.toState)).subscribe(l=>{"void"!==l.fromState&&("expanded"===l.toState?this.afterExpand.emit():"collapsed"===l.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Zc(null),Di(()=>this.expanded&&!this._portal),Ri(1)).subscribe(()=>{this._portal=new fS(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(q$,12),Ge(Ur),Ge(X$),Ge(us),Ge(Jn),Ge(_o,8),Ge(eY,8))};static#t=this.\u0275cmp=En({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function eo(n,e,t,i){const r=wi();if(r.firstCreatePass){const o=ji();b4(r,new m4(e,t,i),o.index),function Hte(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}_4(r,Mt(),t)}(o,lRe,5),2&i){let s;On(s=Nn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Pi(nRe,5),2&i){let o;On(o=Nn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Ln("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[li([{provide:q$,useValue:void 0},{provide:Q$,useExisting:n}]),Wn,Lr],ngContentSelectors:oRe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(uo(rRe),Gn(0),Ft(1,"div",0,1),vn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),Ft(3,"div",2),Gn(4,1),Rn(5,iRe,0,0,"ng-template",3),Bt(),Gn(6,2),Bt()),2&i&&(Gt(),un("@bodyExpansion",r._getExpandedState())("id",r.id),Ni("aria-labelledby",r._headerId),Gt(4),un("cdkPortalOutlet",r._portal))},dependencies:[t_],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Z$.bodyExpansion]},changeDetection:0})}return n})();class uRe{}const hRe=fTe(uRe);let fRe=(()=>{class n extends hRe{constructor(t,i,r,o,s,a,c){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=At.EMPTY;const l=t.accordion?t.accordion._stateChanges.pipe(Di(d=>!(!d.hideToggle&&!d.togglePosition))):Ks;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=$c(t.opened,t.closed,l,t._inputChanges.pipe(Di(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Di(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:ed(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(tY,1),Ge(Sn),Ge(gv),Ge(Ur),Ge(eY,8),Ge(_o,8),vl("tabindex"))};static#t=this.\u0275cmp=En({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&vn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Ni("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Cy("height",r._getHeaderHeight()),Ln("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Wn],ngContentSelectors:cRe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(uo(aRe),Ft(0,"span",0),Gn(1),Gn(2,1),Gn(3,2),Bt(),Rn(4,sRe,1,1,"span",1)),2&i&&(Ln("mat-content-hide-toggle",!r._showToggle()),Gt(4),xr(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Z$.indicatorRotate]},changeDetection:0})}return n})();function nY(n,e,t){return t?nY(n,e).pipe(RA(t)):new Ye(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=n(r);return ye(e)?()=>e(r,o):void 0})}const mRe=["youtubeContainer"];let oY=(()=>{class n{get height(){return this._height}set height(t){this._height=t||390}get width(){return this._width}set width(t){this._width=t||640}constructor(t,i){this._ngZone=t,this._destroyed=new Yt,this._playerChanges=new Li(void 0),this._height=390,this._width=640,this.disableCookies=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=ih(i)}ngAfterViewInit(){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer():(this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer())}))}ngOnChanges(t){this._shouldRecreatePlayer(t)?this._createPlayer():this._player&&((t.width||t.height)&&this._setSize(),t.suggestedQuality&&this._setQuality(),(t.startSeconds||t.endSeconds||t.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(t){const i=t.videoId||t.playerVars||t.disableCookies;return!!i&&!i.isFirstChange()}_createPlayer(){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const t=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:this.playerVars})),i=()=>{this._player=t,this._pendingPlayer=void 0,t.removeEventListener("onReady",i),this._playerChanges.next(t),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(t,this._pendingPlayerState),this._pendingPlayerState=void 0);const r=t.getPlayerState();(r===YT.PlayerState.UNSTARTED||r===YT.PlayerState.CUED||null==r)&&this._cuePlayer()};this._pendingPlayer=t,t.addEventListener("onReady",i)}_applyPendingPlayerState(t,i){const{playbackState:r,playbackRate:o,volume:s,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=o&&t.setPlaybackRate(o),null!=s&&t.setVolume(s),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(t){return this._playerChanges.pipe(or(i=>i?nY(r=>{i.addEventListener(t,r)},r=>{try{i?.removeEventListener?.(t,r)}catch{}}):gn()),i=>new Ye(r=>i.subscribe({next:o=>this._ngZone.run(()=>r.next(o)),error:o=>r.error(o),complete:()=>r.complete()})),Vr(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Qt),Ge(Oa))};static#t=this.\u0275cmp=En({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Pi(mRe,7),2&i){let o;On(o=Nn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},features:[Lr],decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&ni(0,"div",null,0)},encapsulation:2,changeDetection:0})}return n})();function sY(n=_Re){return ki((e,t)=>{let i=!1;e.subscribe(bi(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function _Re(){return new nv}let Sp={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function aY(n){Sp=n}const cY=/[&<>"']/,bRe=new RegExp(cY.source,"g"),lY=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,yRe=new RegExp(lY.source,"g"),vRe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dY=n=>vRe[n];function $a(n,e){if(e){if(cY.test(n))return n.replace(bRe,dY)}else if(lY.test(n))return n.replace(yRe,dY);return n}const xRe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function wRe(n){return n.replace(xRe,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const ERe=/(^|[^\[])\^/g;function Ji(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(ERe,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}function uY(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const DS={exec:()=>null};function hY(n,e){const i=n.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function RS(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const o=n.charAt(i-r-1);if(o!==e||t){if(o===e||!t)break;r++}else r++}return n.slice(0,i-r)}function fY(n,e,t,i){const r=e.href,o=e.title?$a(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:o,text:$a(s)}}class kS{options;rules;lexer;constructor(e){this.options=e||Sp}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:RS(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function SRe(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=RS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=RS(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,o={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const s=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let d=!1;if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split("\n",1)[0].replace(/^\t+/,H=>" ".repeat(3*H.length)),f=e.split("\n",1)[0],m=0;this.options.pedantic?(m=2,c=h.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=h.slice(m),m+=t[1].length);let y=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),d=!0),!d){const H=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),K=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),de=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),Ie=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const Fe=e.split("\n",1)[0];if(f=Fe,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),de.test(f)||Ie.test(f)||H.test(f)||K.test(e))break;if(f.search(/[^ ]/)>=m||!f.trim())c+="\n"+f.slice(m);else{if(y||h.search(/[^ ]/)>=4||de.test(h)||Ie.test(h)||K.test(h))break;c+="\n"+f}!y&&!f.trim()&&(y=!0),a+=Fe+"\n",e=e.substring(Fe.length+1),h=f.slice(m)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let M,E=null;this.options.gfm&&(E=/^\[[ xX]\] /.exec(c),E&&(M="[ ] "!==E[0],c=c.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!E,checked:M,loose:!1,text:c,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=c.trimEnd(),o.raw=o.raw.trimEnd();for(let d=0;d<o.items.length;d++)if(this.lexer.state.top=!1,o.items[d].tokens=this.lexer.blockTokens(o.items[d].text,[]),!o.loose){const h=o.items[d].tokens.filter(m=>"space"===m.type),f=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));o.loose=f}if(o.loose)for(let d=0;d<o.items.length;d++)o.items[d].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const i={type:"table",raw:t[0],header:hY(t[1]).map(r=>({text:r,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let o,s,a,c,r=i.align.length;for(o=0;o<r;o++){const l=i.align[o];l&&(i.align[o]=/^ *-+: *$/.test(l)?"right":/^ *:-+: *$/.test(l)?"center":/^ *:-+ *$/.test(l)?"left":null)}for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=hY(i.rows[o],i.header.length).map(l=>({text:l,tokens:[]}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:$a(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=RS(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function ARe(n,e){if(-1===n.indexOf(e[1]))return-1;let t=0;for(let i=0;i<n.length;i++)if("\\"===n[i])i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}(t[2],"()");if(s>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),fY(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return fY(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const s=[...r[0]].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);null!=(r=h.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const f=[...r[0]][0].length,m=e.slice(0,s+r.index+f+c);if(Math.min(s,c)%2){const E=m.slice(1,-1);return{type:"em",raw:m,text:E,tokens:this.lexer.inlineTokens(E)}}const y=m.slice(2,-2);return{type:"strong",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=$a(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return"@"===t[2]?(i=$a(t[1]),r="mailto:"+i):(i=$a(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if("@"===t[2])i=$a(t[0]),r="mailto:"+i;else{let o;do{o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(o!==t[0]);i=$a(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return i=this.lexer.state.inRawBlock?t[0]:$a(t[0]),{type:"text",raw:t[0],text:i}}}}const kn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:DS,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};kn.def=Ji(kn.def).replace("label",kn._label).replace("title",kn._title).getRegex(),kn.bullet=/(?:[*+-]|\d{1,9}[.)])/,kn.listItemStart=Ji(/^( *)(bull) */).replace("bull",kn.bullet).getRegex(),kn.list=Ji(kn.list).replace(/bull/g,kn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+kn.def.source+")").getRegex(),kn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,kn.html=Ji(kn.html,"i").replace("comment",kn._comment).replace("tag",kn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kn.lheading=Ji(kn.lheading).replace(/bull/g,kn.bullet).getRegex(),kn.paragraph=Ji(kn._paragraph).replace("hr",kn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kn._tag).getRegex(),kn.blockquote=Ji(kn.blockquote).replace("paragraph",kn.paragraph).getRegex(),kn.normal={...kn},kn.gfm={...kn.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},kn.gfm.table=Ji(kn.gfm.table).replace("hr",kn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kn._tag).getRegex(),kn.gfm.paragraph=Ji(kn._paragraph).replace("hr",kn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",kn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kn._tag).getRegex(),kn.pedantic={...kn.normal,html:Ji("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",kn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:DS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ji(kn.normal._paragraph).replace("hr",kn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",kn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const on={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:DS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:DS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};on.punctuation=Ji(on.punctuation,"u").replace(/punctuation/g,on._punctuation).getRegex(),on.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,on.anyPunctuation=/\\[punct]/g,on._escapes=/\\([punct])/g,on._comment=Ji(kn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),on.emStrong.lDelim=Ji(on.emStrong.lDelim,"u").replace(/punct/g,on._punctuation).getRegex(),on.emStrong.rDelimAst=Ji(on.emStrong.rDelimAst,"gu").replace(/punct/g,on._punctuation).getRegex(),on.emStrong.rDelimUnd=Ji(on.emStrong.rDelimUnd,"gu").replace(/punct/g,on._punctuation).getRegex(),on.anyPunctuation=Ji(on.anyPunctuation,"gu").replace(/punct/g,on._punctuation).getRegex(),on._escapes=Ji(on._escapes,"gu").replace(/punct/g,on._punctuation).getRegex(),on._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,on._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,on.autolink=Ji(on.autolink).replace("scheme",on._scheme).replace("email",on._email).getRegex(),on._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,on.tag=Ji(on.tag).replace("comment",on._comment).replace("attribute",on._attribute).getRegex(),on._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,on._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,on._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,on.link=Ji(on.link).replace("label",on._label).replace("href",on._href).replace("title",on._title).getRegex(),on.reflink=Ji(on.reflink).replace("label",on._label).replace("ref",kn._label).getRegex(),on.nolink=Ji(on.nolink).replace("ref",kn._label).getRegex(),on.reflinkSearch=Ji(on.reflinkSearch,"g").replace("reflink",on.reflink).replace("nolink",on.nolink).getRegex(),on.normal={...on},on.pedantic={...on.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ji(/^!?\[(label)\]\((.*?)\)/).replace("label",on._label).getRegex(),reflink:Ji(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",on._label).getRegex()},on.gfm={...on.normal,escape:Ji(on.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},on.gfm.url=Ji(on.gfm.url,"i").replace("email",on.gfm._extended_email).getRegex(),on.breaks={...on.gfm,br:Ji(on.br).replace("{2,}","*").getRegex(),text:Ji(on.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class td{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Sp,this.options.tokenizer=this.options.tokenizer||new kS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:kn.normal,inline:on.normal};this.options.pedantic?(t.block=kn.pedantic,t.inline=on.pedantic):this.options.gfm&&(t.block=kn.gfm,t.inline=this.options.breaks?on.breaks:on.gfm),this.tokenizer.rules=t}static get rules(){return{block:kn,inline:on}}static lex(e,t){return new td(t).lex(e)}static lexInline(e,t){return new td(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=t[t.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},h),"number"==typeof f&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return t}}class o_{options;constructor(e){this.options=e||Sp}code(e,t,i){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+$a(r)+'">'+(i?e:$a(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:$a(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const r=uY(e);if(null===r)return i;let o='<a href="'+(e=r)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+i+"</a>",o}image(e,t,i){const r=uY(e);if(null===r)return i;let o=`<img src="${e=r}" alt="${i}"`;return t&&(o+=` title="${t}"`),o+=">",o}text(e){return e}}class DP{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class nd{options;renderer;textRenderer;constructor(e){this.options=e||Sp,this.options.renderer=this.options.renderer||new o_,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new DP}static parse(e,t){return new nd(t).parse(e)}static parseInline(e,t){return new nd(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){const o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){i+=a||"";continue}}switch(o.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const s=o;i+=this.renderer.heading(this.parseInline(s.tokens),s.depth,wRe(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(o.text,o.lang,!!o.escaped);continue;case"table":{const s=o;let a="",c="";for(let d=0;d<s.header.length;d++)c+=this.renderer.tablecell(this.parseInline(s.header[d].tokens),{header:!0,align:s.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<s.rows.length;d++){const h=s.rows[d];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:s.align[f]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(o.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const s=o,a=s.ordered,c=s.start,l=s.loose;let d="";for(let h=0;h<s.items.length;h++){const f=s.items[h],m=f.checked,y=f.task;let E="";if(f.task){const M=this.renderer.checkbox(!!m);l?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=M+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=M+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:M+" "}):E+=M+" "}E+=this.parse(f.tokens,l),d+=this.renderer.listitem(E,y,!!m)}i+=this.renderer.list(d,a,c);continue}case"html":i+=this.renderer.html(o.text,o.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(o.tokens));continue;case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;r+1<e.length&&"text"===e[r+1].type;)s=e[++r],a+="\n"+(s.tokens?this.parseInline(s.tokens):s.text);i+=t?this.renderer.paragraph(a):a;continue}default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let r=0;r<e.length;r++){const o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=s||"";continue}}switch(o.type){case"escape":case"text":i+=t.text(o.text);break;case"html":i+=t.html(o.text);break;case"link":i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break;case"image":i+=t.image(o.href,o.title,o.text);break;case"strong":i+=t.strong(this.parseInline(o.tokens,t));break;case"em":i+=t.em(this.parseInline(o.tokens,t));break;case"codespan":i+=t.codespan(o.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(o.tokens,t));break;default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return i}}class OS{options;constructor(e){this.options=e||Sp}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const Cp=new class CRe{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(td.lex,nd.parse);parseInline=this.#e(td.lexInline,nd.parseInline);Parser=nd;Renderer=o_;TextRenderer=DP;Lexer=td;Tokenizer=kS;Hooks=OS;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const s of o.header)i=i.concat(this.walkTokens(s.tokens,t));for(const s of o.rows)for(const a of s)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":i=i.concat(this.walkTokens(r.items,t));break;default:{const o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{i=i.concat(this.walkTokens(o[s],t))}):o.tokens&&(i=i.concat(this.walkTokens(o.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=t.renderers[o.name];t.renderers[o.name]=s?function(...a){let c=o.renderer.apply(this,a);return!1===c&&(c=s.apply(this,a)),c}:o.renderer}if("tokenizer"in o){if(!o.level||"block"!==o.level&&"inline"!==o.level)throw new Error("extension level must be 'block' or 'inline'");const s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&("block"===o.level?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:"inline"===o.level&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),r.extensions=t),i.renderer){const o=this.defaults.renderer||new o_(this.defaults);for(const s in i.renderer){const a=i.renderer[s],l=o[s];o[s]=(...d)=>{let h=a.apply(o,d);return!1===h&&(h=l.apply(o,d)),h||""}}r.renderer=o}if(i.tokenizer){const o=this.defaults.tokenizer||new kS(this.defaults);for(const s in i.tokenizer){const a=i.tokenizer[s],l=o[s];o[s]=(...d)=>{let h=a.apply(o,d);return!1===h&&(h=l.apply(o,d)),h}}r.tokenizer=o}if(i.hooks){const o=this.defaults.hooks||new OS;for(const s in i.hooks){const a=i.hooks[s],l=o[s];o[s]=OS.passThroughHooks.has(s)?d=>{if(this.defaults.async)return Promise.resolve(a.call(o,d)).then(f=>l.call(o,f));const h=a.call(o,d);return l.call(o,h)}:(...d)=>{let h=a.apply(o,d);return!1===h&&(h=l.apply(o,d)),h}}r.hooks=o}if(i.walkTokens){const o=this.defaults.walkTokens,s=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(s.call(this,a)),o&&(c=c.concat(o.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return td.lex(e,t??this.defaults)}parser(e,t){return nd.parse(e,t??this.defaults)}#e(e,t){return(i,r)=>{const o={...r},s={...this.defaults,...o};!0===this.defaults.async&&!1===o.async&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const a=this.#t(!!s.silent,!!s.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(i):i).then(c=>e(c,s)).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>t(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(i=s.hooks.preprocess(i));const c=e(i,s);s.walkTokens&&this.walkTokens(c,s.walkTokens);let l=t(c,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+$a(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}};function Vi(n,e){return Cp.parse(n,e)}Vi.options=Vi.setOptions=function(n){return Cp.setOptions(n),aY(Vi.defaults=Cp.defaults),Vi},Vi.getDefaults=function IP(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Vi.defaults=Sp,Vi.use=function(...n){return Cp.use(...n),aY(Vi.defaults=Cp.defaults),Vi},Vi.walkTokens=function(n,e){return Cp.walkTokens(n,e)},Vi.parseInline=Cp.parseInline,Vi.Parser=nd,Vi.parser=nd.parse,Vi.Renderer=o_,Vi.TextRenderer=DP,Vi.Lexer=td,Vi.lexer=td.lex,Vi.Tokenizer=kS,Vi.Hooks=OS,Vi.parse=Vi;const MRe=["*"];let pY=(()=>{class n{constructor(){this._buttonClick$=new Yt,this.copied$=this._buttonClick$.pipe(or(()=>$c(gn(!0),oP(3e3).pipe(function fP(n){return qt(()=>n)}(!1)))),wh(),Js(1)),this.copiedText$=this.copied$.pipe(Zc(!1),qt(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=En({type:n,selectors:[["markdown-clipboard"]],standalone:!0,features:[Ff],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Ft(0,"button",0),vn("click",function(){return r.onCopyToClipboardClick()}),Ba(1,"async"),pi(2),Ba(3,"async"),Bt()),2&i&&(Ln("copied",Pl(1,3,r.copied$)),Gt(2),lc(Pl(3,5,r.copiedText$)))},dependencies:[t0],encapsulation:2,changeDetection:0})}return n})();const DRe=new bt("CLIPBOARD_OPTIONS");var RP=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(RP||{});const mY=new bt("MARKED_EXTENSIONS"),kRe=new bt("MARKED_OPTIONS"),gY=new bt("SECURITY_CONTEXT");let kP=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,o,s,a,c){this.clipboardOptions=t,this.extensions=i,this.platform=o,this.securityContext=s,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new o_},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Yt,this.reload$=this._reload$.asObservable(),this.options=r}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:o,emoji:s,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},d=l.renderer||this.renderer||new o_;this.extensions&&(this.renderer=this.extendsRendererForExtensions(d)),a&&(this.renderer=this.extendsRendererForMermaid(d));const h=this.trimIndentation(t),f=r?this.decodeHtml(h):h,m=s?this.parseEmoji(f):f,y=this.parseMarked(m,l,o);return(c?y:this.sanitizer.sanitize(this.securityContext,y))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:o,clipboardOptions:s,katex:a,katexOptions:c,mermaid:l,mermaidOptions:d}=i;o&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...s}),a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...d}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(qt(i=>this.handleExtension(t,i)))}highlight(t){if(!ih(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!ih(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendsRendererForExtensions(t){const i=t;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Vi.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return t;const r=t.code;return t.code=function(o,s,a){return"mermaid"===s?`<div class="mermaid">${o}</div>`:r.call(this,o,s,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),o=r>-1?t.substring(r+4):t,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){return i.renderer&&(Vi.use({renderer:i.renderer}),delete i.renderer),r?Vi.parseInline(t,i):Vi.parse(t,i)}parseEmoji(t){if(!ih(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(ih(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!ih(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:s}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),d=document.createElement("div");d.style.position="relative",l.parentNode.insertBefore(d,l),d.appendChild(l);const h=document.createElement("div");let f,m;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",d.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=o?i.createComponent(o).hostView:s?i.createEmbeddedView(s):i.createComponent(pY).hostView,f.rootNodes.forEach(y=>{y.onmouseover=()=>h.style.opacity="1",h.appendChild(y),m=new ClipboardJS(y,{text:()=>l.innerText})}),f.onDestroy(()=>m.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!ih(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let o=i;return r.length>0&&(o=isNaN(o)?r.search(/\S|$/):Math.min(r.search(/\S|$/),o)),isNaN(i)&&(i=o),o?r.substring(o):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(it(DRe,8),it(mY,8),it(kRe,8),it(Oa),it(gY),it(r_,8),it(o0))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})(),_Y=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new nn,this.load=new nn,this.ready=new nn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Yt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Vr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){var r=this;return jt(function*(){const o={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},s={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(t,o);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,s,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,RP.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,RP.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++){const s=i instanceof Array?i:[i];r.item(o).classList.add(...s)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++)Object.keys(i).forEach(s=>{const a=i[s];if(a){const c=this.toLispCase(s);r.item(o).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let o=0,s=i.length;o<s;o++)r=r.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Sn),Ge(kP),Ge(us))};static#t=this.\u0275cmp=En({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Lr,Ff],ngContentSelectors:MRe,decls:1,vars:0,template:function(i,r){1&i&&(uo(),Gn(0))},encapsulation:2})}return n})();var bY;!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(bY||(bY={}));let yY=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ht({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]})}return n})();function s_(n){return!0===n}function xa(n){return null===n||typeof n>"u"}function Ns(n){return!xa(n)}function OP(n){return!!n}function SY(n){return xa(n)?n:JSON.parse(JSON.stringify(n))}function CY(n){return Ns(n)&&"object"==typeof n&&function NP(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const Cke="NGXS_COMPUTED_OPTION",IY="NGXS_DATA_META",PP="NGXS_META",DY="NGXS_ARGUMENT_REGISTRY_META";let RY=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new Li(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(it(Ql,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function Tv(n){return n[IY]}let wc=(()=>{class n{constructor(t,i,r){n.store=t.get(Ql),n.ngZone=t.get(Qt),n.factory=i,n.context=r,n.computed=t.get(RY),n.injector=t}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(t){return new(t||n)(it(ur),it(qG),it(JG))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();class mo{constructor(){mo.statesCachedMeta.clear()}static createStateContext(e){return wc.context.createStateContext(e)}static ensureMappedState(e){if(xa(wc.factory)||xa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Ns(e.name)?mo.statesCachedMeta.get(e.name):null)||mo.ensureMeta(e)}static getRepositoryByInstance(e){const i=Tv(mo.getStateClassByInstance(e))??null;if(xa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=mo.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=t?.getPayloadTypeByIndex(o);Ns(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=mo.createPayload(t,i),o=function Dke(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new o(r)}static ensureMeta(e){const t=Ns(e.name)?wc.factory.states?.find(i=>i.name===e.name):null;return Ns(t)&&Ns(e.name)&&mo.statesCachedMeta.set(e.name,t),t}}mo.statesCachedMeta=new Map,mo.\u0275fac=function(e){return new(e||mo)},mo.\u0275prov=It({token:mo,factory:mo.\u0275fac}),new class Rke{constructor(){this.subject=new lg(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function su(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Di((r,o)=>n(r,o,i)):Uo,Ri(1),t?Gg(e):sY(()=>new nv))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new lg(1)}};class Oke extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Ns(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function kY(n){return n.NGXS_OPTIONS_META??{name:""}}function OY(n){const e=kY(n),t=e.children??[],r=SY(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(CY(r))return function Nke(n,e){return e.reduce((t,i)=>{const r=kY(i);if(function Mv(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=OY(i),t},n??{})}(r,t);throw new Oke(r)}return r}function NY(){return`__${Cke}__`}function PY(n){return n[NY()]??null}function FY(){return wc?.computed?.sequenceValue??0}function Lke(n){let e=!1;return lp(n)&&(e=!0),e}function FP(n){return n[DY]}class Bke extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class jke{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(OP(this.argumentMap.has(e))||OP(this.payloadMap.has(e)))throw new Bke(e,t)}}function Wke(n){return{enumerable:!0,configurable:!0,get(){const e=Tv(n),t=mo.ensureMappedState(e.stateMeta);return mo.createStateContext(t)}}}const Jke={dataActionSubscribeRequired:!0},Zke=new bt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>Jke});let Qke=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[mo,wc,RY,...t]}}}return n.\u0275fac=function(t){return new(t||n)(it(mo,2),it(wc,2))},n.\u0275mod=dn({type:n}),n.\u0275inj=ln({}),n})();function LY(){return(n,e,t)=>{!function Ike(n,e){if(!function yke(n,e){let t=n,i=!1;if(CY(t))for(;null!==t;){if(s_(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const o=function Fke(n){return xa(PY(n))&&Object.defineProperties(n,{[NY()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),PY(n)}(this),s=o?.get(i);if(s_(s?.isObservable))return s?.value;if(xa(s)||s.sequenceId!==FY()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:FY(),isObservable:Lke(c)}),c}return s?.value},t}}const eOe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function LP(n={}){const e=function tOe(n){const e=wc?.injector?.get(Zke,void 0,yi.Optional),t={...eOe};return Ns(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function Tke(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=mo.getRepositoryByInstance(c),h=d.operations;let f=h[s];const m=d.stateMeta,y=FP(o);if(xa(f)){const de=function qke(n){return String(n).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),Ie=function kke(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let o="";for(let s=0;s<t.length;s++)Ns(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):Ns(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==t.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:de,argumentRegistry:y});f=h[s]={type:Ie,options:{cancelUncompleted:e.cancelUncompleted??!1}},Ns(f)&&(m.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}mo.ensureMappedState(m).instance[f.type]=()=>(s_(e.insideZone)?wc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),lp(l)&&s_(e.subscribeRequired)?gn(null).pipe(qt(()=>l)):l);const H=mo.createAction(f,a,y),K=wc.store.dispatch(H);return lp(l)?function Pke(n,e){return iv([n,e]).pipe(qt(t=>t.pop()))}(K,l):l},r}}function BY(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function Uke(n,e){const t=n[e];return xa(FP(t))&&Object.defineProperties(t,{[DY]:{enumerable:!0,configurable:!0,value:new jke}}),FP(t)})(e,t).createPayloadType(r,t,i)}}function iOe(){return n=>{const e=function Kke(n){if(function cke(n){return!OP(n)}(n.hasOwnProperty(PP))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,PP,{value:e})}return function Xke(n){return n?.[PP]}(n)}(n);if(xa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function Hke(n,e){(function zke(n){const e=Tv(n)??null;return(xa(e)||e?.stateClass!==n)&&function Vke(n){Object.defineProperty(n,IY,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Tv(n)}(n)).stateMeta=e}(n,e),function rOe(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>SY(t)},context:Wke(n)})}(n,e,OY(n)),function $ke(n){const t=Tv(n)?.stateMeta?.name??null;if(Ns(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Ns(this[i]))return this[i];if(xa(wc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=wc.store.select(n).pipe(qt(r=>r),Js({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let oOe=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new Yt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),sOe=(()=>{class n extends oOe{get snapshot(){return this.getState()}get ctx(){return function Yke(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Qi(n)))(i||n)}})(),n.\u0275prov=It({token:n,factory:n.\u0275fac}),qi([LY(),fc("design:type",Object),fc("design:paramtypes",[])],n.prototype,"snapshot",null),qi([LP(),e2(0,BY("patchValue")),fc("design:type",Function),fc("design:paramtypes",[Object]),fc("design:returntype",void 0)],n.prototype,"patchState",null),qi([LP(),e2(0,BY("stateValue")),fc("design:type",Function),fc("design:paramtypes",[Object]),fc("design:returntype",void 0)],n.prototype,"setState",null),qi([LP(),fc("design:type",Function),fc("design:paramtypes",[]),fc("design:returntype",void 0)],n.prototype,"reset",null),n})();Error;const JS=new bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),fF=new bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Dt(Jn);if(!n)throw new Error("Window is not available");return n}}),SPe=new bt("ngx-data-layer",{providedIn:"root",factory:()=>function APe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Dt(fF))}),FX=new bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function CPe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Dt(fF),Dt(SPe))});let LX=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,o){try{const s=new Map([["page_path",t]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(t,i,r,o,s){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(it(JS),it(Jn),it(FX))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();new bt("ngx-google-analytics-routing-settings",{factory:()=>({})}),new bt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});class GX extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class cFe{constructor(){this.cancelUncompleted$=new Yt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const pF="\u0275fac",WX=Symbol("InjectorInstance"),$X=Symbol("FactoryHasBeenDecorated");function YX(n,e){const t=n[WX];return t?t.get(e):null}const uFe={cancelUncompleted:!1};function XX(n=uFe){return(e,t,i)=>{let r;const o=function lFe(n){return n?new cFe:null}(n.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=YX(this,Ql)||function sFe(){throw new GX}(),c=YX(this,Qt)||function aFe(){throw new GX}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function oFe(n,e,t){return ig(e)?function rFe(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):lp(e)?function iFe(n,e,t){return null!==t&&(e=e.pipe(Vr(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,t,{set:a=>r=a,get:()=>s}),function dFe(n){if($X in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[pF]&&function mF(n){const e=n[pF];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[WX]=Ge(Id),r};t&&(t.factory=i),Object.defineProperty(n,pF,{get:()=>i})}(e),n.constructor.prototype[$X]=!0}(e)}}const eLe=["bodyCanvas"];let tLe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new nn,this.nodeDrag=new nn,this.nodeClick=new nn,this.nodeHoverStart=new nn,this.nodeHoverStop=new nn,this.initialized=new nn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:o}=this.bodyCanvas.nativeElement,s=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/s/t.x),Math.log2((o-i.y)/s/t.y));this.zoom=a}}setupBodyUI(){var t=this;return jt(function*(){const i=t.bodyCanvas.nativeElement,r=new JAe({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",o=>o.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(o=>t.rotationChange.next(o)),t.bodyUI.nodeDrag$.subscribe(o=>t.nodeDrag.emit(o)),t.bodyUI.nodeClick$.subscribe(o=>t.nodeClick.emit(o)),t.bodyUI.nodeHoverStart$.subscribe(o=>t.nodeHoverStart.emit(o)),t.bodyUI.nodeHoverStop$.subscribe(o=>t.nodeHoverStop.emit(o))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=En({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Pi(eLe,5,Sn),2&i){let o;On(o=Nn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Qo(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&ni(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})(),nLe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({imports:[to]})}return n})();function xLe(n,e){if(1&n&&(Ft(0,"div",16),ni(1,"youtube-player",17),Bt()),2&n){const t=Mn(3);Gt(),k1("videoId",t.videoID)}}function wLe(n,e){if(1&n&&(Ft(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),pi(3),Bt()(),Ft(4,"div",13),ni(5,"markdown",14),Rn(6,xLe,2,1,"div",15),Bt()()),2&n){const t=Mn(),i=t.index,r=t.$implicit;un("expanded",0===i),Gt(3),lc(r.title),Gt(2),Ln("first",0===i),un("data",r.content),Gt(),un("ngIf",0===i)}}function ELe(n,e){if(1&n&&(Ft(0,"div",9),Rn(1,wLe,7,6,"mat-expansion-panel",10),Bt()),2&n){const t=e.$implicit;Gt(),un("ngIf",t)}}new bt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name)).filter(n=>!0!==n.disabled);let cK=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(IS),Ge(z$))};static#t=this.\u0275cmp=En({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Ft(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),pi(5),Bt(),Ft(6,"div",5)(7,"mat-icon",6),vn("click",function(){return r.close()}),pi(8,"clear"),Bt()()(),Ft(9,"mat-dialog-content",7),Rn(10,ELe,2,1,"div",8),Bt()()()()),2&i&&(Gt(5),lc(r.infoTitle),Gt(5),un("ngForOf",r.documentationContents))},dependencies:[nh,Vf,CP,MP,Ap,tY,fRe,oY,_Y],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})(),lK=(()=>{class n{constructor(t){this.http=t,this.panelContent=new Li({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(o=>{const s={content:this.parseMarkdown(o),infoTitle:r,videoID:i};this.panelContent.next(s)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const o of r)if(o.length){const s=o.includes("\n\n")?"\n\n":"\r\n\r\n",a=o.split(s);i.push({title:a[0],content:a.splice(1).join(s)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(it(r_))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SLe=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new nn,this.closeClicked=new nn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=En({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Qo(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Ft(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),pi(5),Bt(),Ft(6,"mat-icon",5),vn("click",function(){return r.close()}),pi(7,"clear"),Bt()(),ni(8,"img",6),Ft(9,"mat-dialog-content",7)(10,"div",8),pi(11),Bt(),Ft(12,"a",9),vn("click",function(){return r.onDialogButtonClick()}),Bt()()()()()),2&i&&(Gt(5),lc(r.infoTitle),Gt(3),un("src",r.imageUrl,ay),Gt(3),ga(" ",r.message,""),Gt(),un("text",r.callToAction))},dependencies:[Ap,CP,MP,yY],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})(),Wv=(()=>{let n=class sx extends sOe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function aOe(){return Di(n=>null!=n)}(),Js(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(t$(...t),wh(),Js(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(t$(...t),wh(),Js(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Qi(sx)))(r||sx)}})();static#t=this.\u0275prov=It({token:sx,factory:sx.\u0275fac})};return qi([LY()],n.prototype,"config$",null),n=qi([iOe(),I9({name:"globalConfig",defaults:null})],n),n})();!function TLe(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}(),new Yt;let _F=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),bF=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),yF=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();var vF;class tl{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return tl.storage?.length??0}key(e){return tl.storage?.key(e)??null}getItem(e,t){return tl.storage?.getItem(e)??t??null}setItem(e,t){try{return tl.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){tl.storage?.removeItem(e)}clear(){tl.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||tl)};static#n=this.\u0275prov=It({token:tl,factory:tl.\u0275fac,providedIn:"root"})}const hK="callToActionPopupShown";let Oh=(()=>{let n=class MC{static#e=vF=this;static ctaDatePassed(t,i=Date.now){return+i()>+new Date(t)}constructor(t,i,r,o,s){this.dialog=t,this.ga=i,this.storage=r,this.infoService=o,this.http=s}ngxsOnInit(t){const{expirationDate:i,popupShown:r}=t.getState(),o=this.storage.getItem(hK,`${r}`),s=vF.ctaDatePassed(i);"true"!==o&&!s&&t.dispatch(new bF)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(qt(t=>this.infoService.parseMarkdown(t)))}launchLearnMore(t){this.dialog.open(cK,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:t,videoID:"UfxMpzatowE"}})}learnMore(t){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Rr(i=>this.launchLearnMore(i)))}open(t){this.dialog.open(kLe,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(hK,"true"),t.patchState({popupShown:!0})}close(t){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(i){return new(i||MC)(it(Cv),it(LX),it(tl),it(lK),it(r_))};static#n=this.\u0275prov=It({token:MC,factory:MC.\u0275fac})};return qi([yN(_F)],n.prototype,"learnMore",null),qi([yN(bF)],n.prototype,"open",null),qi([yN(yF)],n.prototype,"close",null),n})();Oh=vF=qi([I9({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Oh);let QS=(()=>{class n{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}}return qi([Yg([Oh])],n,"title",null),qi([Yg([Oh])],n,"message",null),qi([Yg([Oh])],n,"callToAction",null),qi([Yg([Oh])],n,"imageUrl",null),qi([Yg([Oh])],n,"expirationDate",null),qi([Yg([Oh])],n,"popupShown",null),n})(),kLe=(()=>{class n{constructor(){this.close=()=>new yF,this.learnMore=()=>new _F}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=En({type:n,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Ft(0,"ccf-call-to-action",0),vn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),Ba(1,"async"),Ba(2,"async"),Ba(3,"async"),Ba(4,"async"),Bt()),2&i&&un("infoTitle",Pl(1,4,r.title$))("message",Pl(2,6,r.message$))("callToAction",Pl(3,8,r.callToAction$))("imageUrl",Pl(4,10,r.imageUrl$))},dependencies:[SLe,t0],changeDetection:0})}return qi([BA(QS.title)],n.prototype,"title$",void 0),qi([BA(QS.message)],n.prototype,"message$",void 0),qi([BA(QS.callToAction)],n.prototype,"callToAction$",void 0),qi([BA(QS.imageUrl)],n.prototype,"imageUrl$",void 0),qi([XX()],n.prototype,"close",void 0),qi([XX()],n.prototype,"learnMore",void 0),n})();const fK="http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity",VLe=[173,255,47,229.5];function wa(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let xF;function nl(){return xF||(xF=function $Le(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=wa(t);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),xF}function YLe(n,e=nl()){return e("readonly",t=>wa(t.get(n)))}function XLe(n,e=nl()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),wa(t.transaction)))}function KLe(n,e=nl()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),wa(t.transaction)))}var qLe=g(5020),eC=g(4938),JLe=g.t(eC,2),ZLe=g.n(eC),QLe=g(7991),pK=g(5440),tC=g(7184),$v=g(9689),eBe=g(7661);const Yv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Xv="http://www.w3.org/2001/XMLSchema#",EF="http://www.w3.org/2000/10/swap/",ta={xsd:{decimal:`${Xv}decimal`,boolean:`${Xv}boolean`,double:`${Xv}double`,integer:`${Xv}integer`,string:`${Xv}string`},rdf:{type:`${Yv}type`,nil:`${Yv}nil`,first:`${Yv}first`,rest:`${Yv}rest`,langString:`${Yv}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${EF}reify#forSome`,forAll:`${EF}reify#forAll`},log:{implies:`${EF}log#implies`}};function nC(n){return!!n&&"DefaultGraph"===n.termType}function AF(n,e){const t=Object.create(null);for(const r in n)i(r,n[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);t[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in t))throw new Error(`Unknown prefix: ${r}`);return t[r]}return e=e||$i,i}const{rdf:tBe,xsd:Ip}=ta;let Kv,nBe=0;const SF={namedNode:function aBe(n){return new gK(n)},blankNode:function cBe(n){return new iBe(n||"n3-"+nBe++)},variable:function dBe(n){return new rBe(n)},literal:function lBe(n,e){if("string"==typeof e)return new __(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return""===t&&("boolean"==typeof n?t=Ip.boolean:"number"==typeof n&&(Number.isFinite(n)?t=Number.isInteger(n)?Ip.integer:Ip.double:(t=Ip.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new __(""===t||t===Ip.string?`"${n}"`:`"${n}"^^${t}`)},defaultGraph:function uBe(){return Kv},quad:_K,triple:_K},$i=SF;class au{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof au?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class gK extends au{get termType(){return"NamedNode"}}class __ extends au{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new gK(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?Ip.string:tBe.langString}equals(e){return e instanceof __?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class iBe extends au{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class rBe extends au{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function qv(n,e,t){if(e=e||SF,!n)return e.defaultGraph();switch(n[0]){case"?":return e.variable(n.substr(1));case"_":return e.blankNode(n.substr(2));case'"':if(e===SF)return new __(n);if('"'===n[n.length-1])return e.literal(n.substr(1,n.length-2));const i=n.lastIndexOf('"',n.length-1);return e.literal(n.substr(1,i-1),"@"===n[i+1]?n.substr(i+2):e.namedNode(n.substr(i+3)));case"[":n=JSON.parse(n);break;default:if(!t||!Array.isArray(n))return e.namedNode(n)}return e.quad(qv(n[0],e,!0),qv(n[1],e,!0),qv(n[2],e,!0),n[3]&&qv(n[3],e,!0))}function Ya(n,e){if("string"==typeof n)return n;if(n instanceof au&&"Quad"!==n.termType)return n.id;if(!n)return Kv.id;switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return`_:${n.value}`;case"Variable":return`?${n.value}`;case"DefaultGraph":return"";case"Literal":return`"${n.value}"${n.language?`@${n.language}`:n.datatype&&n.datatype.value!==Ip.string?`^^${n.datatype.value}`:""}`;case"Quad":const t=[Ya(n.subject,!0),Ya(n.predicate,!0),Ya(n.object,!0)];return nC(n.graph)||t.push(Ya(n.graph,!0)),e?t:JSON.stringify(t);default:throw new Error(`Unexpected termType: ${n.termType}`)}}Kv=new class oBe extends au{constructor(){return super(""),Kv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class sBe extends au{constructor(e,t,i,r){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=r||Kv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function _K(n,e,t,i){return new sBe(n,e,t,i)}var hBe=g(3410),fBe=g.n(hBe);const{xsd:iC}=ta,pBe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,bK={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},mBe=/[\x00-\x20<>\\"\{\}\|\^\`]/,gBe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},_Be=/$0^/;class bBe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const t in this)!(t in gBe)&&this[t]instanceof RegExp&&(this[t]=_Be)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",f="",m="",y=null,E=0,M=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(E=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){M=!0;break}case"<":if(y=this._unescapedIri.exec(i))h="IRI",f=y[1];else if(y=this._iri.exec(i)){if(f=this._unescape(y[1]),null===f||mBe.test(f))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",E=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",E=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",E=2);break;case"_":((y=this._blank.exec(i))||t&&(y=this._blank.exec(`${i} `)))&&(h="blank",m="_",f=y[1]);break;case'"':if(y=this._simpleQuotedString.exec(i))f=y[1];else if(({value:f,matchLength:E}=this._parseLiteral(i)),null===f)return s(this);(null!==y||0!==E)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(y=this._simpleApostropheString.exec(i))f=y[1];else if(({value:f,matchLength:E}=this._parseLiteral(i)),null===f)return s(this);(null!==y||0!==E)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(y=this._variable.exec(i))&&(h="var",f=y[0]);break;case"@":"literal"===this._previousMarker&&(y=this._langcode.exec(i))?(h="langcode",f=y[1]):(y=this._keyword.exec(i))&&(h=y[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){h=".",E=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(i)||t&&(y=this._number.exec(`${i} `)))&&(h="literal",f=y[0],m="string"==typeof y[1]?iC.double:"string"==typeof y[2]?iC.decimal:iC.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(i))?h=y[0].toUpperCase():M=!0;break;case"f":case"t":(y=this._boolean.exec(i))?(h="literal",f=y[0],m=iC.boolean):M=!0;break;case"a":(y=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):M=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(E=1,f="="):(E=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(E=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",E=2):(h=d,E=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",E=2);break;default:M=!0}if(M&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(y=this._prefix.exec(i))?((y=this._prefixed.exec(i))||t&&(y=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=y[1]||"",f=this._unescape(y[2])):(h="prefix",f=y[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const H=E||y[0].length,K=o(h,f,m,l,H);this.previousToken=K,this._previousMarker=h,i=i.substr(H,i.length)}function o(a,c,l,d,h){const f=i?r-i.length:r,y={type:a,value:c,prefix:l,line:d,start:f,end:f+h};return e(null,y),y}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(pBe,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in bK?bK[a]:(t=!0,"")});return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(t,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}fBe()(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}let yK=0;class vK{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&xK(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),r=/trig/.test(t),o=/triple/.test(t),s=/quad/.test(t),a=this._n3Mode=/n3/.test(t),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new bBe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){yK=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:t,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,i,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,r){this._callback(null,this._quad(e,t,i,r||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=CF}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<t;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<t&&"/"!==e[o];)r=o;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${yK++}_`,this._prefixCallback=i||CF,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=t,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=CF):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function CF(){}function xK(n,e){const t=e.namedNode;n._namedNode=t,n._blankNode=e.blankNode,n._literal=e.literal,n._variable=e.variable,n._quad=e.quad,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=t(ta.rdf.first),n.RDF_REST=t(ta.rdf.rest),n.RDF_NIL=t(ta.rdf.nil),n.N3_FORALL=t(ta.r.forAll),n.N3_FORSOME=t(ta.r.forSome),n.ABBREVIATIONS={a:t(ta.rdf.type),"=":t(ta.owl.sameAs),">":t(ta.log.implies)},n.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}xK(vK.prototype,$i);var MF=g(8905);class TF{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||$i,e&&this.addQuads(e)}_termFromId(e,t){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return qv(e,t)}_termToNumericId(e){if("Quad"===e.termType){const t=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let o;return t&&i&&r&&(nC(e.graph)||(o=this._termToNumericId(e.graph)))&&this._ids[o?`.${t}.${i}.${r}.${o}`:`.${t}.${i}.${r}`]}return this._ids[Ya(e)]}_termToNewNumericId(e){const t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${nC(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Ya(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,r;for(const o in t)for(const s in i=t[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,t,i,r){const o=e[t]||(e[t]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,t,i,r){const o=e[t],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[t]}*_findInIndex(e,t,i,r,o,s,a,c){let l,d,h;const f=this._entities,m=this._termFromId(c,this._factory),y={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const E in e)if(d=e[E]){y[o]=this._termFromId(f[E],this._factory),i&&((l=d,d={})[i]=l[i]);for(const M in d)if(h=d[M]){y[s]=this._termFromId(f[M],this._factory);const H=r?r in h?[r]:[]:Object.keys(h);for(let K=0;K<H.length;K++)y[a]=this._termFromId(f[H[K]],this._factory),yield this._factory.quad(y.subject,y.predicate,y.object,m)}}}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let r,o;if(r=e[t])for(o in r)i(o)}_loopByKey1(e,t,i){let r,o;for(r in e)o=e[r],o[t]&&i(r)}_loopBy2Keys(e,t,i,r){let o,s,a;if((o=e[t])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,t,i,r){let s,a,c,o=0;t&&((s=e,e={})[t]=s[t]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!function yBe(n){return"string"==typeof n||n instanceof String}(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=Ya(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o)),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),i=this._termToNewNumericId(i);const s=this._addToIndex(o.subjects,e,t,i);return this._addToIndex(o.predicates,t,i,e),this._addToIndex(o.objects,i,e,t),this._size=null,s}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,i,r){return e&&e.subject&&({subject:e,predicate:t,object:i,graph:r}=e),!this.readQuads(e,t,i,r).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=Ya(r);const o=this._graphs;let s,a,c;if(!((e=e&&this._termToNumericId(e))&&(t=t&&this._termToNumericId(t))&&(i=i&&this._termToNumericId(i))&&(s=o[r])&&(a=s.subjects[e])&&(c=a[t])&&i in c))return!1;for(e in this._removeFromIndex(s.subjects,e,t,i),this._removeFromIndex(s.predicates,t,i,e),this._removeFromIndex(s.objects,i,e,t),null!==this._size&&this._size--,s.subjects)return!0;return delete o[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,i,r){const o=new MF.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,t,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,r){return[...this.readQuads(e,t,i,r)]}*readQuads(e,t,i,r){r=r&&Ya(r);const o=this._getGraphs(r);let s,a,c,l;if(!(e&&!(a=this._termToNumericId(e))||t&&!(c=this._termToNumericId(t))||i&&!(l=this._termToNumericId(i))))for(const d in o)(s=o[d])&&(a?l?yield*this._findInIndex(s.objects,l,a,c,"object","subject","predicate",d):yield*this._findInIndex(s.subjects,a,c,null,"subject","predicate","object",d):c?yield*this._findInIndex(s.predicates,c,l,null,"predicate","object","subject",d):l?yield*this._findInIndex(s.objects,l,null,null,"object","subject","predicate",d):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",d))}match(e,t,i,r){return new IF(this,e,t,i,r)}countQuads(e,t,i,r){r=r&&Ya(r);const o=this._getGraphs(r);let a,c,l,d,s=0;if(e&&!(c=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||i&&!(d=this._termToNumericId(i)))return 0;for(const h in o)(a=o[h])&&(s+=e?i?this._countInIndex(a.objects,d,c,l):this._countInIndex(a.subjects,c,l,d):t?this._countInIndex(a.predicates,l,d,c):this._countInIndex(a.objects,d,c,l));return s}forEach(e,t,i,r,o){this.some(s=>(e(s),!1),t,i,r,o)}every(e,t,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),t,i,r,o);return s&&a}some(e,t,i,r,o){for(const s of this.readQuads(t,i,r,o))if(e(s))return!0;return!1}getSubjects(e,t,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,t,i),r}forSubjects(e,t,i,r){r=r&&Ya(r);const o=this._getGraphs(r);let s,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in o)(s=o[r])&&(a?c?this._loopBy2Keys(s.predicates,a,c,e):this._loopByKey1(s.subjects,a,e):c?this._loopByKey0(s.objects,c,e):this._loop(s.subjects,e))}getPredicates(e,t,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,t,i),r}forPredicates(e,t,i,r){r=r&&Ya(r);const o=this._getGraphs(r);let s,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in o)(s=o[r])&&(a?c?this._loopBy2Keys(s.objects,c,a,e):this._loopByKey0(s.subjects,a,e):c?this._loopByKey1(s.predicates,c,e):this._loop(s.predicates,e))}getObjects(e,t,i){const r=[];return this.forObjects(o=>{r.push(o)},e,t,i),r}forObjects(e,t,i,r){r=r&&Ya(r);const o=this._getGraphs(r);let s,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in o)(s=o[r])&&(a?c?this._loopBy2Keys(s.subjects,a,c,e):this._loopByKey1(s.objects,a,e):c?this._loopByKey0(s.predicates,c,e):this._loop(s.objects,e))}getGraphs(e,t,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,t,i),r}forGraphs(e,t,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),t,i,r,o)}createBlankNode(e){let t,i;if(e)for(t=e=`_:${e}`,i=1;this._ids[t];)t=e+i++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},r=t?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,ta.rdf.rest,ta.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const f=a.graph;let m=a.subject;for(;m&&!l;){const y=this.getQuads(null,null,m,null),E=this.getQuads(m,null,null,null);let M,H=null,K=null,de=null;for(let Ie=0;Ie<E.length&&!l;Ie++)M=E[Ie],M.graph.equals(f)?d?l=r(m,"has non-list arcs out"):M.predicate.value===ta.rdf.first?H?l=r(m,"has multiple rdf:first arcs"):s.push(H=M):M.predicate.value===ta.rdf.rest?K?l=r(m,"has multiple rdf:rest arcs"):s.push(K=M):y.length?l=r(m,"can't be subject and object"):(d=M,h="subject"):l=r(m,"not confined to single graph");for(let Ie=0;Ie<y.length&&!l;++Ie)M=y[Ie],d?l=r(m,"can't have coreferences"):M.predicate.value===ta.rdf.rest?de?l=r(m,"has incoming rdf:rest arcs"):de=M:(d=M,h="object");H?c.unshift(H.object):l=r(m,"has no list head"),m=de&&de.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}class IF extends MF.Readable{constructor(e,t,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:r,subject:o}=this,s=this._filtered=new TF({factory:e._factory});for(const a of e.readQuads(o,r,i,t))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,r){return new IF(this.filtered,e,t,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var vBe=g(2821);function Cr(n,e,t,i,r){return n.readQuads(e,t,i,r)}function wK(n){const e=n.length;let t=0;return new MF.Readable({objectMode:!0,read(){this.push(t<e?n[t++]:null)}})}function DF(n,e){return RF.apply(this,arguments)}function RF(){return RF=jt(function*(n,e){let t;if("string"==typeof n){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.json())}else t=n;if(t){const i=yield eBe.toRDF(t);e.import(wK(i))}return e}),RF.apply(this,arguments)}function kF(){return kF=jt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new vBe.RdfXmlParser({dataFactory:$i,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(t),i.end(),r}return e}),kF.apply(this,arguments)}function OF(){return OF=jt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new vK({format:"n3"}).parse(t);e.import(wK(i))}return e}),OF.apply(this,arguments)}function NF(n,e){const t=JSON.parse(n),i=new TF;return Object.assign(i,t,{_factory:e??$i}),i}const er=AF({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},$i),en=(er("rdf"),er("rdf")("type"),er("rdfs"),er("rdfs")("label"),er("rdfs")("comment"),er("rdfs")("isDefinedBy"),er("rdfs")("seeAlso"),er("ccf")),cu=(er("ccf")("has_registration_location"),er("rdfs")("label"),er("rdfs")("comment"),en("url"),en("sex"),en("age"),en("bmi"),$i.literal("Male"),$i.literal("Female"),en("consortium_name"),en("tissue_provider_name"),en("tissue_provider_uuid"),en("comes_from"),en("subdivided_into_sections"),en("generates_dataset"),en("sample_type"),$i.literal("Tissue Block"),$i.literal("Tissue Section"),$i.literal("Non-standard"),en("section_count"),en("section_size"),en("section_size_unit"),en("section_number"),en("has_registration_location"),en("has_ontology_term"),en("has_cell_type_term"),en("has_biomarker_term"),en("technology"),en("thumbnail"),{x:en,base:er("base"),ontologyNode:{label:en("ccf_pref_label"),parent:en("ccf_part_of"),children:en("ccf_part_of"),rui_rank:en("rui_rank"),synonymLabels:$i.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:en("ccf_part_of"),ct_is_a:en("ccf_ct_isa"),located_in:en("ccf_located_in"),characterizes:en("ccf_characterizes"),bm_located_in:en("ccf_bm_located_in")},spatial:{Female:er("base")("VHFemale"),Male:er("base")("VHMale"),BothSexes:er("base")("VHBothSexes"),FemaleOrgans:er("base")("VHFemaleOrgans"),MaleOrgans:er("base")("VHMaleOrgans")},SpatialObjectReference:en("spatial_object_reference"),SpatialEntity:en("spatial_entity"),SpatialPlacement:en("spatial_placement"),spatialObjectReference:{file:en("file_url"),file_format:en("file_format"),file_subpath:en("file_subpath")},extractionSet:{label:er("rdfs")("label"),rui_rank:en("rui_rank")},spatialEntity:{label:er("rdfs")("label"),description:er("rdfs")("comment"),creator:er("dcterms")("creator"),creator_first_name:en("creator_first_name"),creator_last_name:en("creator_last_name"),creator_middle_name:en("creator_middle_name"),creator_orcid:en("creator_orcid"),creation_date:er("dcterms")("created"),updated_date:en("updated_date"),ccf_annotations:en("collides_with"),representation_of:en("representation_of"),reference_organ:en("has_reference_organ"),extraction_set_for:en("extraction_set_for"),extraction_set:en("has_extraction_set"),sex:en("organ_owner_sex"),side:en("organ_side"),rui_rank:en("rui_rank"),slice_thickness:en("slice_thickness"),slice_count:en("slice_count"),x_dimension:en("x_dimension"),y_dimension:en("y_dimension"),z_dimension:en("z_dimension"),dimension_units:en("dimension_unit"),object:en("has_object_reference")},spatialPlacement:{source:en("placement_for"),target:en("placement_relative_to"),placement_date:er("dcterms")("created"),x_scaling:en("x_scaling"),y_scaling:en("y_scaling"),z_scaling:en("z_scaling"),scaling_units:en("scaling_unit"),x_rotation:en("x_rotation"),y_rotation:en("y_rotation"),z_rotation:en("z_rotation"),w_rotation:en("theta_rotation"),rotation_order:en("rotation_order"),rotation_units:en("rotation_unit"),x_translation:en("x_translation"),y_translation:en("y_translation"),z_translation:en("z_translation"),translation_units:en("translation_unit")}}),oi={x:er("uberon"),body:er("uberon")("0013702")},SBe={x:er("cl"),cell:er("cl")("0000000")},Jv={x:er("fma")},EK=(er("lmha"),{body:oi.body,cell:SBe.cell,respiratory_system:oi.x("0001004"),colon:oi.x("0001155"),left_lung:oi.x("0002168"),right_lung:oi.x("0002167"),left_bronchus:oi.x("0002178"),right_bronchus:oi.x("0002177"),kidney:oi.x("0002113"),ureter:oi.x("0000056"),eye:oi.x("0000970"),fallopian_tube:oi.x("0003889"),knee:oi.x("0001465"),ovary:oi.x("0000992"),trachea:oi.x("0003126"),aorta:oi.x("0000947"),blood:oi.x("0000178"),bone_marrow:oi.x("0002371"),male_reproductive_system:oi.x("0000079"),lymph_node:oi.x("0000029"),blood_vasculature:oi.x("0004537"),brain:oi.x("0000955"),eye_left:oi.x("0004548"),eye_right:Jv.x("54449"),fallopian_tube_left:oi.x("0001303"),fallopian_tube_right:oi.x("0001302"),heart:oi.x("0000948"),kidney_left:oi.x("0004538"),kidney_right:oi.x("0004539"),knee_left:Jv.x("24978"),knee_right:Jv.x("24977"),large_intestine:oi.x("0000059"),liver:oi.x("0002107"),lungs:oi.x("0002048"),mesenteric_lymph_node:oi.x("0002509"),ovary_left:Jv.x("7214"),ovary_right:Jv.x("7213"),pancreas:oi.x("0001264"),pelvis:oi.x("0001270"),prostate_gland:oi.x("0002367"),skin:oi.x("0002097"),small_intestine:oi.x("0002108"),spleen:oi.x("0002106"),thymus:oi.x("0002370"),ureter_left:oi.x("0001223"),ureter_right:oi.x("0001222"),urinary_bladder:oi.x("0001255"),uterus:oi.x("0000995")});function PF(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}PF(cu.spatialObjectReference),PF(cu.spatialEntity),PF(cu.spatialPlacement),ZLe();var oC=g(6030);const y_=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),kr=(Math,Math,{});function kBe(n,{precision:e=kr.precision||4}={}){return n=function RBe(n){return Math.round(n/kr.EPSILON)*kr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Nh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Qv(n,e,t){const i=kr.EPSILON;t&&(kr.EPSILON=t);try{if(n===e)return!0;if(Nh(n)&&Nh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Qv(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=kr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{kr.EPSILON=i}}function il(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}kr.EPSILON=1e-12,kr.debug=!1,kr.precision=4,kr.printTypes=!1,kr.printDegrees=!1,kr.printRowMajor=!0;class FF extends(function BBe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return il(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Nh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(kr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+kBe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Qv(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(kr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function bs(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function SK(n,e,t=""){if(kr.debug&&!function jBe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const CK={};function LF(n,e){CK[n]||(CK[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class UBe extends FF{get ELEMENTS(){return il(!1),0}copy(e){return il(!1),this}get x(){return this[0]}set x(e){this[0]=bs(e)}get y(){return this[1]}set y(e){this[1]=bs(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return bs(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return bs(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return il(e>=0&&e<this.ELEMENTS,"index is out of range"),bs(this[e])}setComponent(e,t){return il(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Ea=typeof Float32Array<"u"?Float32Array:Array;function MK(){var n=new Ea(3);return Ea!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function TK(n,e,t){var i=new Ea(3);return i[0]=n,i[1]=e,i[2]=t,i}function IK(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function sC(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function DK(n,e,t){var i=e[0],r=e[1],o=e[2];return n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8],n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});MK();const BF=[0,0,0],RK={};class Pn extends UBe{static get ZERO(){return RK.ZERO=RK.ZERO||Object.freeze(new Pn(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Nh(e)?this.copy(e):(kr.debug&&(bs(e),bs(t),bs(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return kr.debug&&(bs(e.x),bs(e.y),bs(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=bs(e)}angle(e){return function KBe(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&IK(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return sC(this,this,e),this.check()}rotateX({radians:e,origin:t=BF}){return function $Be(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=BF}){return function YBe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=BF}){return function XBe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function GBe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s}(this,this,e),this.check()}transformAsVector(e){return function JBe(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s}(this,this,e),this.check()}transformByMatrix3(e){return DK(this,this,e),this.check()}transformByMatrix2(e){return function ZBe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function WBe(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,y=o*d-i*f,E=i*h-r*d,M=2*t[3];h*=M,f*=M,y*=2,E*=2,n[0]=a+(d*=M)+(m*=2),n[1]=c+h+y,n[2]=l+f+E}(this,this,e),this.check()}}new Pn,new Pn;const ex=new Pn,PK=new Pn;class jF{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new Pn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=ex.from(t),this.center=(new Pn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new jF(this.center,this.radius)}union(e){const t=this.center,i=this.radius,o=e.radius,s=ex.copy(e.center).subtract(t),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return PK.copy(s).scale((-i+c)/a).add(t),this.center.copy(PK),this.radius=c,this}expand(e){const t=(e=ex.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function NK(n,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(o,s,a),n[2]=Math.hypot(c,l,d),n}(ex,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=ex.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?y_.OUTSIDE:o<i?y_.INTERSECTING:y_.INSIDE}}class i3e extends FF{get ELEMENTS(){return il(!1),0}get RANK(){return il(!1),0}toString(){let e="[";if(kr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=bs(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function FK(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1],y=t[2],E=t[3],M=t[4],H=t[5],K=t[6],de=t[7],Ie=t[8];return n[0]=f*i+m*s+y*l,n[1]=f*r+m*a+y*d,n[2]=f*o+m*c+y*h,n[3]=E*i+M*s+H*l,n[4]=E*r+M*a+H*d,n[5]=E*o+M*c+H*h,n[6]=K*i+de*s+Ie*l,n[7]=K*r+de*a+Ie*d,n[8]=K*o+de*c+Ie*h,n}function LK(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}!function u3e(){var n=new Ea(2);Ea!=Float32Array&&(n[0]=0,n[1]=0)}();const BK=Object.freeze([1,0,0,0,1,0,0,0,1]),f3e=Object.freeze([0,0,0,0,0,0,0,0,0]),p3e=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),x_={};class na extends i3e{static get IDENTITY(){return x_.IDENTITY=x_.IDENTITY||Object.freeze(new na(BK)),x_.IDENTITY}static get ZERO(){return x_.ZERO=x_.ZERO||Object.freeze(new na(f3e)),x_.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return p3e}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function a3e(n){var r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8];return n[0]*(l*o-s*c)+n[1]*(-l*r+s*a)+n[2]*(c*r-o*a)}(this)}identity(){return this.copy(BK)}fromQuaternion(e){return function d3e(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,y=r*c,E=o*s,M=o*a,H=o*c;n[0]=1-h-y,n[3]=d-H,n[6]=f+M,n[1]=d+H,n[4]=1-l-y,n[7]=m-E,n[2]=f-M,n[5]=m+E,n[8]=1-l-h}(this,e),this.check()}transpose(){return function o3e(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function s3e(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,f=-d*o+a*c,m=l*o-s*c,y=t*h+i*f+r*m;y&&(n[0]=h*(y=1/y),n[1]=(-d*i+r*l)*y,n[2]=(a*i-r*s)*y,n[3]=f*y,n[4]=(d*t-r*c)*y,n[5]=(-a*t+r*o)*y,n[6]=m*y,n[7]=(-l*t+i*c)*y,n[8]=(s*t-i*o)*y)}(this,this),this.check()}multiplyLeft(e){return FK(this,e,this),this.check()}multiplyRight(e){return FK(this,this,e),this.check()}rotate(e){return function l3e(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=Math.sin(t),m=Math.cos(t);n[0]=m*i+f*s,n[1]=m*r+f*a,n[2]=m*o+f*c,n[3]=m*s-f*i,n[4]=m*a-f*r,n[5]=m*c-f*o,n[6]=l,n[7]=d,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?LK(this,this,e):LK(this,this,[e,e,e]),this.check()}translate(e){return function c3e(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1];n[0]=i,n[1]=r,n[2]=o,n[3]=s,n[4]=a,n[5]=c,n[6]=f*i+m*s+l,n[7]=f*r+m*a+d,n[8]=f*o+m*c+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function h3e(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=DK(t||[-0,-0,-0],e,this);break;case 4:t=function QBe(n,e,t){const i=e[0],r=e[1],o=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return SK(t,e.length),t}transformVector(e,t){return LF("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return LF("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return LF("Matrix3.transformVector"),this.transform(e,t)}}function jK(){var n=new Ea(4);return Ea!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function UK(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function VK(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}!function m3e(){var n=new Ea(4);Ea!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var H3e=function(){var n=MK(),e=TK(1,0,0),t=TK(0,1,0);return function(i,r,o){var s=IK(r,o);return s<-.999999?(sC(n,e,r),function zBe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&sC(n,t,r),function HBe(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),UK(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(sC(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function A3e(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();jK(),jK(),function r3e(){var n=new Ea(9);Ea!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const G3e=[0,0,0,1];class $K extends FF{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function zK(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}identity(){return function D3e(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return UK(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=bs(e)}get y(){return this[1]}set y(e){this[1]=bs(e)}get z(){return this[2]}set z(e){this[2]=bs(e)}get w(){return this[3]}set w(e){this[3]=bs(e)}len(){return function w3e(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function E3e(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function S3e(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return H3e(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function v3e(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function N3e(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function B3e(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function L3e(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return function C3e(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return il(!t),VK(this,this,e),this.check()}multiplyLeft(e,t){return il(!t),VK(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function R3e(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function k3e(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function O3e(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return function x3e(n,e,t){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t}(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=G3e,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function aC(n,e,t,i){var f,m,y,E,M,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),y=Math.sin(f),E=Math.sin((1-i)*f)/y,M=Math.sin(i*f)/y):(E=1-i,M=i),n[0]=E*r+M*c,n[1]=E*o+M*l,n[2]=E*s+M*d,n[3]=E*a+M*h,n}(this,e,t,i),this.check()}transformVector4(e,t=e){return function M3e(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),SK(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const W3e=new Pn,$3e=new Pn,cC=new Pn,lC=new Pn,dC=new Pn,Y3e=new Pn,X3e=new Pn;class UF{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new Pn).from(e),this.halfAxes=new na(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Pn(e).len(),new Pn(t).len(),new Pn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Pn(e).normalize(),o=new Pn(t).normalize(),s=new Pn(i).normalize();return(new $K).fromMatrix3(new na([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new $K(i),o=(new na).fromQuaternion(r);return o[0]=o[0]*t[0],o[1]=o[1]*t[0],o[2]=o[2]*t[0],o[3]=o[3]*t[1],o[4]=o[4]*t[1],o[5]=o[5]*t[1],o[6]=o[6]*t[2],o[7]=o[7]*t[2],o[8]=o[8]*t[2],this.center=(new Pn).from(e),this.halfAxes=o,this}clone(){return new UF(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new jF){const t=this.halfAxes,i=t.getColumn(0,cC),r=t.getColumn(1,lC),o=t.getColumn(2,dC),s=W3e.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(t)+e.distance;return l<=-c?y_.OUTSIDE:l>=c?y_.INSIDE:y_.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=$3e.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,cC),o=i.getColumn(1,lC),s=i.getColumn(2,dC),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(t.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(t.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(t.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,cC),l=a.getColumn(1,lC),d=a.getColumn(2,dC),h=Y3e.copy(c).add(l).add(d).add(s),f=X3e.copy(h).subtract(e);let m=t.dot(f);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,cC);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,lC);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,dC);return r.transformAsPoint(e),this.halfAxes=new na([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const YK=new Pn,XK=new Pn;class VF{constructor(e=[0,0,1],t=0){this.normal=new Pn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return il(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=YK.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),il(Qv(this.normal.len(),1)),this.distance=r,this}clone(e){return new VF(this.normal,this.distance)}equals(e){return Qv(this.distance,e.distance)&&Qv(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=XK.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=YK.from(e);const i=this.getPointDistance(e),r=XK.copy(this.normal).scale(i);return e.subtract(r).to(t)}}new Pn([1,0,0]),new Pn([0,1,0]),new Pn([0,0,1]),new Pn,new Pn,new VF(new Pn(1,0,0),0),new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,new Pn,Math,new na,new na,new na,new na,new na,new Pn,new Pn,new Pn,new Pn,new Pn,new na,new na,new na;var ZK=g(7659);function Vje(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[cu.ontologyNode.label.id]:"label",[t]:"parent",[cu.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of function*ABe(n,e,t){for(const[i,r]of Object.entries(t))for(const o of Cr(n,e,i,null,null)){const s="Literal"===o.object.termType?(0,$v.fromRdf)(o.object):o.object.id;yield[r,s]}}(n,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=n.getSubjects(t,e,null).map(o=>o.id),i}function QK(n,e,t,i){const r={root:e,nodes:{}},o=new Set;for(const a of Cr(n,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=Vje(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const s=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,eq(r),r}function eq(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)eq(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}g.n(ZK)()(function zje(n){const e=QK(n,EK.body.id,"body",cu.asctb.part_of.id);return e.nodes[EK.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");var nq=g(6990),qje=g.n(nq);qje();const aq={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"},mC="Unknown Euler angle order",S_=.99999;var ts=function(n){return n[n.ZYX=0]="ZYX",n[n.YXZ=1]="YXZ",n[n.XZY=2]="XZY",n[n.ZXY=3]="ZXY",n[n.YZX=4]="YZX",n[n.XYZ=5]="XYZ",n}(ts||{});class go extends bE{static get ZYX(){return ts.ZYX}static get YXZ(){return ts.YXZ}static get XZY(){return ts.XZY}static get ZXY(){return ts.ZXY}static get YZX(){return ts.YZX}static get XYZ(){return ts.XYZ}static get RollPitchYaw(){return ts.ZYX}static get DefaultOrder(){return ts.ZYX}static get RotationOrders(){return ts}static rotationOrder(e){return ts[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=go.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(t*i+o*r);let l=-2*(t*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+o*t),-2*(t*t+s)+1),m=Math.asin(l),y=Math.atan2(c,a);return this.set(f,m,y,go.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function l4e(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=gi(e)}get y(){return this[1]}set y(e){this[1]=gi(e)}get z(){return this[2]}set z(e){this[2]=gi(e)}get alpha(){return this[0]}set alpha(e){this[0]=gi(e)}get beta(){return this[1]}set beta(e){this[1]=gi(e)}get gamma(){return this[2]}set gamma(e){this[2]=gi(e)}get phi(){return this[0]}set phi(e){this[0]=gi(e)}get theta(){return this[1]}set theta(e){this[1]=gi(e)}get psi(){return this[2]}set psi(e){this[2]=gi(e)}get roll(){return this[0]}set roll(e){this[0]=gi(e)}get pitch(){return this[1]}set pitch(e){this[1]=gi(e)}get yaw(){return this[2]}set yaw(e){this[2]=gi(e)}get order(){return this[3]}set order(e){this[3]=function d4e(n){if(n<0&&n>=6)throw new Error(mC);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,ts.ZYX)}fromRotationMatrix(e,t=go.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new Dk;switch(this[4]){case ts.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case ts.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case ts.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case ts.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case ts.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case ts.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(mC)}}_fromRotationMatrix(e,t=go.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(t=t||this[3]){case go.XYZ:this[1]=Math.asin(Yr(o,-1,1)),Math.abs(o)<S_?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case go.YXZ:this[0]=Math.asin(-Yr(c,-1,1)),Math.abs(c)<S_?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case go.ZXY:this[0]=Math.asin(Yr(d,-1,1)),Math.abs(d)<S_?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case go.ZYX:this[1]=Math.asin(-Yr(l,-1,1)),Math.abs(l)<S_?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case go.YZX:this[2]=Math.asin(Yr(s,-1,1)),Math.abs(s)<S_?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case go.XZY:this[2]=Math.asin(-Yr(r,-1,1)),Math.abs(r)<S_?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(mC)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case go.XYZ:{const f=s*c,m=s*h,y=l*c,E=l*h;t[0]=a*c,t[4]=-a*h,t[8]=d,t[1]=m+y*d,t[5]=f-E*d,t[9]=-l*a,t[2]=E-f*d,t[6]=y+m*d,t[10]=s*a;break}case go.YXZ:{const f=a*c,m=a*h,y=d*c,E=d*h;t[0]=f+E*l,t[4]=y*l-m,t[8]=s*d,t[1]=s*h,t[5]=s*c,t[9]=-l,t[2]=m*l-y,t[6]=E+f*l,t[10]=s*a;break}case go.ZXY:{const f=a*c,m=a*h,y=d*c,E=d*h;t[0]=f-E*l,t[4]=-s*h,t[8]=y+m*l,t[1]=m+y*l,t[5]=s*c,t[9]=E-f*l,t[2]=-s*d,t[6]=l,t[10]=s*a;break}case go.ZYX:{const f=s*c,m=s*h,y=l*c,E=l*h;t[0]=a*c,t[4]=y*d-m,t[8]=f*d+E,t[1]=a*h,t[5]=E*d+f,t[9]=m*d-y,t[2]=-d,t[6]=l*a,t[10]=s*a;break}case go.YZX:{const f=s*a,m=s*d,y=l*a,E=l*d;t[0]=a*c,t[4]=E-f*h,t[8]=y*h+m,t[1]=h,t[5]=s*c,t[9]=-l*c,t[2]=-d*c,t[6]=m*h+y,t[10]=f-E*h;break}case go.XZY:{const f=s*a,m=s*d,y=l*a,E=l*d;t[0]=a*c,t[4]=-h,t[8]=d*c,t[1]=f*h+E,t[5]=s*c,t[9]=m*h-y,t[2]=y*h-m,t[6]=l*c,t[10]=E*h+f;break}default:throw new Error(mC)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new Dk(e*r*o-t*i*s,e*i*s+t*r*o,t*i*o-e*r*s,e*i*o+t*r*s)}}const cq={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let gC;const u4e=new Uint8Array(16);function h4e(){if(!gC&&(gC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gC(u4e)}const ys=[];for(let n=0;n<256;++n)ys.push((n+256).toString(16).slice(1));const p4e=function f4e(n,e,t){if(cq.randomUUID&&!e&&!n)return cq.randomUUID();const i=(n=n||{}).random||(n.rng||h4e)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return function lq(n,e=0){return ys[n[e+0]]+ys[n[e+1]]+ys[n[e+2]]+ys[n[e+3]]+"-"+ys[n[e+4]]+ys[n[e+5]]+"-"+ys[n[e+6]]+ys[n[e+7]]+"-"+ys[n[e+8]]+ys[n[e+9]]+"-"+ys[n[e+10]]+ys[n[e+11]]+ys[n[e+12]]+ys[n[e+13]]+ys[n[e+14]]+ys[n[e+15]]}(i)};function*_C(n,e,t){for(const[i,r]of Object.entries(t))for(const o of Cr(n,e,i,null,null)){const s="Literal"===o.object.termType?(0,$v.fromRdf)(o.object):o.object.id;yield[r,s]}}function Dp(n,e,t,i){const r={"@id":e,"@type":t};for(const[o,s]of Object.entries(i))for(const a of Cr(n,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,$v.fromRdf)(a.object):a.object.id;r[s]=c}return r}const tr=AF({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},$i),dq={x:tr("rdf"),type:tr("rdf")("type")},m4e_label=(tr("rdfs"),tr("rdfs")("label")),tn=(tr("rdfs")("comment"),tr("rdfs")("isDefinedBy"),tr("rdfs")("seeAlso"),tr("ccf")),si={id:tr("ccf")("has_registration_location"),label:tr("rdfs")("label"),description:tr("rdfs")("comment"),link:tn("url"),sex:tn("sex"),age:tn("age"),bmi:tn("bmi"),Male:$i.literal("Male"),Female:$i.literal("Female"),consortiumName:tn("consortium_name"),providerName:tn("tissue_provider_name"),providerUUID:tn("tissue_provider_uuid"),donor:tn("comes_from"),sections:tn("subdivided_into_sections"),datasets:tn("generates_dataset"),sampleType:tn("sample_type"),TissueBlock:$i.literal("Tissue Block"),TissueSection:$i.literal("Tissue Section"),NonStandard:$i.literal("Non-standard"),sectionCount:tn("section_count"),sectionSize:tn("section_size"),sectionUnits:tn("section_size_unit"),sectionNumber:tn("section_number"),spatialEntity:tn("has_registration_location"),ontologyTerms:tn("has_ontology_term"),cellTypeTerms:tn("has_cell_type_term"),biomarkerTerms:tn("has_biomarker_term"),technology:tn("technology"),thumbnail:tn("thumbnail")},_i={x:tn,base:tr("base"),ontologyNode:{label:tn("ccf_pref_label"),parent:tn("ccf_part_of"),children:tn("ccf_part_of"),rui_rank:tn("rui_rank"),synonymLabels:$i.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:tn("ccf_part_of"),ct_is_a:tn("ccf_ct_isa"),located_in:tn("ccf_located_in"),characterizes:tn("ccf_characterizes"),bm_located_in:tn("ccf_bm_located_in")},spatial:{Female:tr("base")("VHFemale"),Male:tr("base")("VHMale"),BothSexes:tr("base")("VHBothSexes"),FemaleOrgans:tr("base")("VHFemaleOrgans"),MaleOrgans:tr("base")("VHMaleOrgans")},SpatialObjectReference:tn("spatial_object_reference"),SpatialEntity:tn("spatial_entity"),SpatialPlacement:tn("spatial_placement"),spatialObjectReference:{file:tn("file_url"),file_format:tn("file_format"),file_subpath:tn("file_subpath")},extractionSet:{label:tr("rdfs")("label"),rui_rank:tn("rui_rank")},spatialEntity:{label:tr("rdfs")("label"),description:tr("rdfs")("comment"),creator:tr("dcterms")("creator"),creator_first_name:tn("creator_first_name"),creator_last_name:tn("creator_last_name"),creator_middle_name:tn("creator_middle_name"),creator_orcid:tn("creator_orcid"),creation_date:tr("dcterms")("created"),updated_date:tn("updated_date"),ccf_annotations:tn("collides_with"),representation_of:tn("representation_of"),reference_organ:tn("has_reference_organ"),extraction_set_for:tn("extraction_set_for"),extraction_set:tn("has_extraction_set"),sex:tn("organ_owner_sex"),side:tn("organ_side"),rui_rank:tn("rui_rank"),slice_thickness:tn("slice_thickness"),slice_count:tn("slice_count"),x_dimension:tn("x_dimension"),y_dimension:tn("y_dimension"),z_dimension:tn("z_dimension"),dimension_units:tn("dimension_unit"),object:tn("has_object_reference")},spatialPlacement:{source:tn("placement_for"),target:tn("placement_relative_to"),placement_date:tr("dcterms")("created"),x_scaling:tn("x_scaling"),y_scaling:tn("y_scaling"),z_scaling:tn("z_scaling"),scaling_units:tn("scaling_unit"),x_rotation:tn("x_rotation"),y_rotation:tn("y_rotation"),z_rotation:tn("z_rotation"),w_rotation:tn("theta_rotation"),rotation_order:tn("rotation_order"),rotation_units:tn("rotation_unit"),x_translation:tn("x_translation"),y_translation:tn("y_translation"),z_translation:tn("z_translation"),translation_units:tn("translation_unit")}},ai={x:tr("uberon"),body:tr("uberon")("0013702")},g4e={x:tr("cl"),cell:tr("cl")("0000000")},ix={x:tr("fma")},rl=(tr("lmha"),{body:ai.body,cell:g4e.cell,respiratory_system:ai.x("0001004"),colon:ai.x("0001155"),left_lung:ai.x("0002168"),right_lung:ai.x("0002167"),left_bronchus:ai.x("0002178"),right_bronchus:ai.x("0002177"),kidney:ai.x("0002113"),ureter:ai.x("0000056"),eye:ai.x("0000970"),fallopian_tube:ai.x("0003889"),knee:ai.x("0001465"),ovary:ai.x("0000992"),trachea:ai.x("0003126"),aorta:ai.x("0000947"),blood:ai.x("0000178"),bone_marrow:ai.x("0002371"),male_reproductive_system:ai.x("0000079"),lymph_node:ai.x("0000029"),blood_vasculature:ai.x("0004537"),brain:ai.x("0000955"),eye_left:ai.x("0004548"),eye_right:ix.x("54449"),fallopian_tube_left:ai.x("0001303"),fallopian_tube_right:ai.x("0001302"),heart:ai.x("0000948"),kidney_left:ai.x("0004538"),kidney_right:ai.x("0004539"),knee_left:ix.x("24978"),knee_right:ix.x("24977"),large_intestine:ai.x("0000059"),liver:ai.x("0002107"),lungs:ai.x("0002048"),mesenteric_lymph_node:ai.x("0002509"),ovary_left:ix.x("7214"),ovary_right:ix.x("7213"),pancreas:ai.x("0001264"),pelvis:ai.x("0001270"),prostate_gland:ai.x("0002367"),skin:ai.x("0002097"),small_intestine:ai.x("0002108"),spleen:ai.x("0002106"),thymus:ai.x("0002370"),ureter_left:ai.x("0001223"),ureter_right:ai.x("0001222"),urinary_bladder:ai.x("0001255"),uterus:ai.x("0000995")});function nL(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const bC={spatialObjectReference:nL(_i.spatialObjectReference),spatialEntity:nL(_i.spatialEntity),spatialPlacement:nL(_i.spatialPlacement)};function uq(n,e){const t=Dp(n,e,"ExtractionSet",bC.spatialEntity);return t.extractionSites=tC(n.getSubjects(_i.spatialEntity.extraction_set,e,null).map(i=>Rp(n,i.id)),["rui_rank"]),t}function Rp(n,e){const t=Dp(n,e,"SpatialEntity",bC.spatialEntity);return t.object&&(t.object=function _4e(n,e){return Dp(n,e,"SpatialObjectReference",bC.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,_i.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,si.spatialEntity,e,null),t}function x4e(n,e){const t=Dp(n,e,"SpatialPlacement",bC.spatialPlacement);return t.source&&(t.source=Rp(n,t.source)),t.target&&(t.target=Rp(n,t.target)),t}const E4e=(eC||JLe).DirectedGraph;function hq(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),o=[t.x_rotation,t.y_rotation,t.z_rotation].map(b8),s=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(o).scale(s)}class fq{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new E4e;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},dq.type,_i.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},dq.type,_i.SpatialEntity,null);const t={};for(const i of Cr(e,null,_i.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of Cr(e,null,_i.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new qn(qn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new qn(qn.IDENTITY),o=QLe(this.graph,e,t);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&hq(r,x4e(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=pK(e,"placement[0]",pK(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,t),o&&(o=hq(o,r))):i&&(o=this.getTransformationMatrix(i,t)),o){const s=(new go).fromRotationMatrix(o,go.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(Hce),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${p4e()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class pq{constructor(e){this.db=e}getSpatialEntity(e){return Rp(this.db.store,e)}getExtractionSets(e){return function b4e(n,e){return tC(n.getSubjects(_i.spatialEntity.extraction_set_for,e,null).map(t=>uq(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return uq(this.db.store,e)}getAnatomicalStructures(e){return function y4e(n,e){return tC(n.getSubjects(_i.spatialEntity.reference_organ,e,null).map(t=>Rp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function v4e(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(Rp(n,t.subject.id))},null,_i.spatialEntity.reference_organ,null,null),tC(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(e?.sex){case"Male":t=_i.spatial.Male.id;break;case"Female":t=_i.spatial.Female.id;break;default:t=_i.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(e?.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return e?.debug&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,t,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(_i.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,t){const i=void 0!==t?.sex&&"both"!==t?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===t?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(t)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(s){if(r)s=new qn(qn.IDENTITY).rotateX(b8(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}function rx(n,e,t){const i=new Set;for(const r of e)for(const o of Cr(n,r,t,null,null))i.add(o.object.id);return i}const M4e={[_i.spatialEntity.x_dimension.id]:"x",[_i.spatialEntity.y_dimension.id]:"y",[_i.spatialEntity.z_dimension.id]:"z"};function I4e(n,e,t,i){const r=e.getTransformationMatrix(t,i);let o;if(r){const s=r.getTranslation(),a=function T4e(n,e){const t=Dp(n,e,"Dimensions",M4e);return[t.x,t.y,t.z]}(n,t).map(l=>l/1e3/2),c=(new go).fromRotationMatrix(r,go.XYZ).toQuaternion().normalize().calculateW();o=(new UF).fromCenterHalfSizeQuaternion(s,a,c)}return o}function D4e(n,e,t,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of t){const f=I4e(n,e,h,c);f&&f.distanceSquaredTo([r,o,s].map(y=>y/1e3))<=d&&l.add(h)}return l}function ox(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Cr(n,a,si.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function yC(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Cr(n,a,si.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function C_(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function iL(n,e,t){const i=new Set;for(const r of t){const o=$i.namedNode(r);n.forSubjects(C_(e,i),_i.spatialEntity.ccf_annotations,o,null)}return i}function rL(n,e){const t=function G4e(n,e){const t=new Map;for(const i of n)for(const r of Cr(e,i,si.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id).add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const o=t.get(r);for(const s of Cr(e,r,_i.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function X4e(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[_i.ontologyNode.label.id]:"label",[t]:"parent",[_i.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of _C(n,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=n.getSubjects(t,e,null).map(o=>o.id),i}function mq(n,e,t,i){const r={root:e,nodes:{}},o=new Set;for(const a of Cr(n,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=X4e(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const s=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,gq(r),r}function gq(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)gq(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const _q=ZK(function K4e(n){const e=mq(n,rl.body.id,"body",_i.asctb.part_of.id);return e.nodes[rl.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");function oL(n,e,t,i){return{"@id":`http://purl.org/ccf/${n}`,id:n,label:e,parent:t??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const vC={[si.label.id]:"label",[si.description.id]:"description",[si.link.id]:"link"},Z4e={...vC,[si.providerName.id]:"providerName"},Q4e={...vC,[si.technology.id]:"technology",[si.thumbnail.id]:"thumbnail"},eUe={...vC,[si.sampleType.id]:"sampleType",[si.sectionNumber.id]:"sectionNumber",[si.datasets.id]:"datasets"},tUe={...vC,[si.sampleType.id]:"sampleType",[si.sectionCount.id]:"sectionCount",[si.sectionSize.id]:"sectionSize",[si.sectionUnits.id]:"sectionUnits",[si.donor.id]:"donor",[si.spatialEntity.id]:"spatialEntityId",[si.sections.id]:"sections",[si.datasets.id]:"datasets"};function nUe(n,e){return Dp(n,e,"Donor",Z4e)}function bq(n,e){return Dp(n,e,"Dataset",Q4e)}function iUe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of _C(n,e,eUe))if("datasets"===i){const o=bq(n,r);t[i].push(o)}else t[i]=r;return t}class oUe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const t=Date.now();return this.database.connect().then(function(){var i=jt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-t})}}function sL(){return sL=jt(function*(){const n=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(n,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),sL.apply(this,arguments)}const dUe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function xC(n,e=dUe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:hu,omit:uUe,set:wC,toNumber:aL}=nq,yq={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},hUe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},vq=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),fUe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},M_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},cL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class gUe{constructor(e,t){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=hUe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=yq}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const s=this.getRuiLocation(e,this.donor);s?this.rui_location=s:this.bad=!0,M_[e.group_uuid]||(M_[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=M_[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const d={},h=[];this.sections=h;const f=[];this.datasets=f;for(const H of r.filter(K=>"Sample"===K.entity_type)){const K=this.getSection(H,e);d[H.submission_id]=K,h.push(K),K.section_number=K.section_number??h.length}for(const H of r)if("Dataset"===H.entity_type){const K=this.getDataset(H,t),de=hu(H,["ingest_metadata","metadata","tissue_id"]);d[de]?d[de].datasets?.push(K):f.push(K)}const m=s??{},y=`${m.x_dimension} x ${m.y_dimension} x ${m.z_dimension} ${m.dimension_units}`;this.section_count=m.slice_count||h.length;const E=parseFloat((m.slice_thickness||(m.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=E;const M=m.dimension_units||"millimeter";this.section_units=M,this.description=`${y}, ${E} ${M}, ${this.section_count} Sections`,h.forEach((H,K)=>{H.description=`${m.x_dimension} x ${m.y_dimension} x ${E} ${M}, ${E} ${M}, ${H.description}`,H.section_number=K+1})}getSection(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${M_[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=M_[e.group_uuid]||e.group_name,o=e.created_by_user_displayname,s=e.dataset_type??"",a=s.toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":s.split(/ \[/)[0],l=this.getDatasetThumbnail(e,t)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${o}, ${r}`,description:`Dataset Type: ${s}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,t){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(t?`?token=${t}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=hu(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>vq.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(t?`?token=${t}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(vq.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=fUe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const t=(e.description||"").toLowerCase();let i;t.includes("female")?i="Female":t.includes("male")&&(i="Male");const r=t.match(/age ([0-9]+)/)??t.match(/ ([0-9]+) years/);let o,s,a;r&&(o=aL(r[1]));const c=hu(e,"mapped_metadata",hu(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!o&&c.age_value?.length>0&&(o=c.age_value[0]),!s&&c.body_mass_index_value?.length>0&&(s=c.body_mass_index_value[0]);for(const m of hu(e,"metadata.organ_donor_data",hu(e,"metadata.living_donor_data",[])))"Feminine gender"===m.preferred_term||"Female"===m.preferred_term?i="Female":"Masculine gender"===m.preferred_term||"Male"===m.preferred_term?i="Male":"Current chronological age"===m.preferred_term||"Age"===m.preferred_term?o=aL(m.data_value):"Body mass index"===m.preferred_term?s=aL(m.data_value):"Race"===m.grouping_concept_preferred_term&&(a=m.preferred_term);let l="";i&&o?(l+=`${i}, Age ${o}`,s&&(l+=`, BMI ${s.toFixed(1)}`)):i&&(l=i);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=M_[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${d}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:o,sex:i,bmi:s,race:a,consortium_name:this.portal===yq?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=hu(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?wC(i,["placement","target"],o.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&wC(i,["placement","target"],"Male"===t.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return uUe({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const _Ue=1e4,bUe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],yUe={exists:{field:"rui_location"}};function xq(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:t??yUe,_source:{includes:bUe}})}function lL(n,e){return dL.apply(this,arguments)}function dL(){return dL=jt(function*(n,e){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),dL.apply(this,arguments)}function uL(){return uL=jt(function*(n,e,t){const i=_Ue,r=function vUe(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),o=xq(0,i,t),s=yield lL(n,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(lL(n,{method:"POST",headers:r,body:xq(h,i,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),uL.apply(this,arguments)}function hL(){return hL=jt(function*(n,e,t,i,r="",o=""){let s;if("static"===e?s=yield lL(n):"search-api"===e&&(s=yield function xUe(n,e,t){return uL.apply(this,arguments)}(n,i,t)),s)return function pUe(n,e,t=!1){const r={},o=hu(n,"hits.hits",[]).map(a=>hu(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new gUe(a,e).toJsonLd());for(const a of o){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const s=Object.values(r);return t&&(function mUe(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,t++)}i.samples=r.filter(o=>!0!==o.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(s),console.log(s.map(a=>({"@context":cL,...a})))),xC(JSON.stringify({"@context":cL,"@graph":s}),cL)}(s,i);console.warn(`Unable to load ${n}`)}),hL.apply(this,arguments)}const{delMany:EUe,get:wq,setMany:AUe}=T,SUe={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class CUe{constructor(e=SUe){this.options=e,this.store=new TF(void 0,{factory:$i}),this.graph=new fq(this),this.scene=new pq(this)}connect(e,t=!1){var i=this;return jt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=t?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return jt(function*(){const t=(new Date).getTime(),i=qLe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield wq(r).catch(()=>{});let a;s&&t-new Date(+s).getTime()>36e5?yield EUe([o,r]).catch(()=>{}):a=yield wq(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),AUe([[o,e.serialize()],[r,""+t]]).catch(()=>{}))})()}doConnect(){var e=this;return jt(function*(){const t=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=NF(r,$i);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=NF(o,$i))}else r?.length>0&&i.push(r);i.push(yield function cUe(){return sL.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):t.push(function wUe(n,e,t,i){return hL.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(o=>{if(o)return e.addDataSources([o])}))),t.push(e.addDataSources(i)),yield Promise.all(t),yield e.synchronize()})()}addDataSources(e,t){var i=this;return jt(function*(){const r=t??i.store;return yield Promise.all(e.map(function(){var o=jt(function*(s){if("string"==typeof s)if((s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")){const a=s;s=xC(s=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield DF(s,r)}else s.endsWith("n3")?yield function wBe(n,e){return OF.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function xBe(n,e){return kF.apply(this,arguments)}(s,r):(s=xC(s),yield DF(s,r));else s=xC(JSON.stringify(s)),yield DF(s,r)});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return jt(function*(){return yield new Promise(t=>{setTimeout(t,500)}),e.graph.createGraph(),function lUe(n){const e=_q(n),t=new Map;for(const{subject:i,object:r}of Cr(n,null,_i.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;t.set(i.id,[...o].map(a=>$i.namedNode(a)))}for(const{object:i}of Cr(n,null,si.spatialEntity,null,null))for(const{subject:r}of Cr(n,null,_i.spatialPlacement.source,i,null))for(const{object:o}of Cr(n,r,_i.spatialPlacement.target,null,null))for(const s of t.get(o.id)??[])n.addQuad($i.namedNode(i.id),_i.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function EBe(n){const e=Object.assign({},n);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var t=this;return jt(function*(){t.store=NF(e,$i),t.graph=new fq(t),t.scene=new pq(t),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function k4e(n,e,t){let i=function O4e(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),si.spatialEntity,null,null),e}(n);if(i.size>0&&(i=function z4e(n,e,t=!0){const i=new Set;if(n.forSubjects(C_(e,i),si.spatialEntity,null,null),!t){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(n,i)),i.size>0&&("Male"===t.sex||"Female"===t.sex)){const r=t.sex;i=ox(n,i,o=>function N4e(n,e,t){const i=new Set;return n.forSubjects(C_(e,i),si.sex,si[t],null),i}(n,o,r))}if(i.size>0&&t.consortiums?.length>0&&(i=ox(n,i,r=>function P4e(n,e,t){const i=new Set;for(const r of t){const o=$i.literal(r);n.forSubjects(C_(e,i),si.consortiumName,o,null)}return i}(n,r,t.consortiums))),i.size>0&&t.tmc?.length>0&&(i=ox(n,i,r=>function F4e(n,e,t){const i=new Set;for(const r of t){const o=$i.literal(r);n.forSubjects(C_(e,i),si.providerName,o,null)}return i}(n,r,t.tmc))),i.size>0&&t.technologies?.length>0&&(i=function R4e(n,e,t){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of Cr(n,c,si.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of Cr(n,c,si.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=t(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(n,i,r=>function L4e(n,e,t){const i=new Set;for(const r of t){const o=$i.literal(r);n.forSubjects(C_(e,i),si.technology,o,null)}return i}(n,r,t.technologies))),i.size>0&&t.spatialSearches?.length>0&&(i=yC(n,i,r=>function H4e(n,e,t,i){const r=new Set;for(const o of i)D4e(n,e,t,o).forEach(a=>r.add(a));return r}(n,e,r,t.spatialSearches))),i.size>0&&t.ontologyTerms?.length>0){const r=t.ontologyTerms;-1===r.indexOf(rl.body.id)&&(i=yC(n,i,o=>iL(n,o,r)))}if(i.size>0&&t.cellTypeTerms?.length>0){const r=t.cellTypeTerms;-1===r.indexOf(rl.cell.id)&&(i=yC(n,i,o=>function B4e(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,_i.asctb.located_in,null),r===rl.cell.id&&i.add(rl.body.id);return iL(n,e,[...i])}(n,o,r)))}if(i.size>0&&t.biomarkerTerms?.length>0){const r=t.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=yC(n,i,o=>function j4e(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,_i.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(rl.body.id);return iL(n,e,[...i])}(n,o,r)))}if(i.size>0&&2===t.ageRange?.length&&oC(t.ageRange[0])&&oC(t.ageRange[1])){const r=Math.max(...t.ageRange),o=Math.min(...t.ageRange);1===o&&110===r||(i=ox(n,i,s=>function U4e(n,e,t,i){const r=new Set;for(const o of e)for(const s of Cr(n,o,si.age,null,null)){const a=(0,$v.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}if(i.size>0&&2===t.bmiRange?.length&&oC(t.bmiRange[0])&&oC(t.bmiRange[1])){const r=Math.max(...t.bmiRange),o=Math.min(...t.bmiRange);13===o&&83===r||(i=ox(n,i,s=>function V4e(n,e,t,i){const r=new Set;for(const o of e)for(const s of Cr(n,o,si.bmi,null,null)){const a=(0,$v.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads($i.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(t=>function w4e(n,e){const t=n.getObjects($i.namedNode(e),si.spatialEntity,null);if(t.length>0)return Rp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){var e=this;return jt(function*(){return e.status||(e.status=new oUe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return jt(function*(){return function S4e(n){const e=new Set;for(const t of Cr(n,null,si.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return jt(function*(){return function C4e(n){const e=new Set;for(const t of Cr(n,null,si.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var t=this;return jt(function*(){return e={...e,hasSpatialEntity:!0},[...t.getIds(e)].map(i=>function rUe(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of _C(n,e,tUe))if("sections"===i){const o=iUe(n,r);t[i].push(o)}else if("datasets"===i){const o=bq(n,r);t[i].push(o)}else t[i]="donor"===i?nUe(n,r):r;return t}(t.store,i))})()}getAggregateResults(e){var t=this;return jt(function*(){return function A4e(n,e){const t=rx(e,n,si.donor.id),i=rx(e,t,si.providerUUID.id),r=new Set;for(const c of n)for(const l of Cr(e,c,si.spatialEntity,null,null))r.add(l.subject.id);const o=rx(e,r,si.sections.id),s=new Set([...rx(e,r,si.datasets.id),...rx(e,o,si.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(t.getIds(e),t.store)})()}getOntologyTermOccurences(e){var t=this;return jt(function*(){return function W4e(n,e){const t={};return rL(n,e).forEach((r,o)=>{t[o]=r.size}),t}(t.getIds(e),t.store)})()}getCellTypeTermOccurences(e){var t=this;return jt(function*(){return function Y4e(n,e){const t=rL(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of Cr(e,null,_i.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[rl.cell.id]=t.get(rl.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getBiomarkerTermOccurences(e){var t=this;return jt(function*(){return function $4e(n,e){const t=rL(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of Cr(e,null,_i.asctb.bm_located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r.biomarkers=t.get(rl.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getOntologyTreeModel(){var e=this;return jt(function*(){return _q(e.store)})()}getCellTypeTreeModel(){var e=this;return jt(function*(){return function q4e(n){return mq(n,rl.cell.id,"cell",_i.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return jt(function*(){return function J4e(n){const e=_i.x("ccf_biomarker_type"),t={biomarkers:oL("biomarkers","Biomarkers","",[])};for(const i of Cr(n,null,e,null,null)){const r=i.object.value,o=i.subject.id;t[r]||(t[r]=oL(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),t.biomarkers.children.push(r)),t[r].children.push(o);const s=oL(o,"",r,[]),a={[_i.ontologyNode.label.id]:"label",[m4e_label.id]:"synonymLabels"};for(const[c,l]of _C(n,o,a))"synonymLabels"===c?l&&l!==s.label&&s.synonymLabels.push(l):s[c]=l;for(const c of Object.values(t))c.children.length>1&&c.children.sort((l,d)=>t[l]?.label.localeCompare(t[d]?.label));t[o]=s}return{root:"biomarkers",nodes:t}}(e.store)})()}getReferenceOrgans(){var e=this;return jt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var t=this;return jt(function*(){return t.graph.createGraph(),t.scene.getScene(e)})()}getReferenceOrganScene(e,t){var i=this;return jt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,t)})()}getSpatialPlacement(e,t){var i=this;return jt(function*(){return i.graph.getSpatialPlacement(e,t)})()}}function RUe(n,e){return n===e}let kUe=(()=>{class n{constructor(t,i){this.locator=t,this.globalConfig=i,this.subscriptions=new At,this.dataSource=i.getOption("data").pipe(qt(r=>({...aq,dataSources:r})),Di(r=>Object.keys(r).length>0),qt(r=>r),wh(RUe),or(r=>function DUe(n,e){return new Ye(t=>{const i=n(),r=e(i);return(r?Oo(r):Ks).subscribe(t),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),o=>this.connectDataSource(o.source,r))),Js(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(t){return this.dataSource.pipe(or(i=>i.getTissueBlockResults(t)),Ri(1))}getAggregateResults(t){return this.dataSource.pipe(or(i=>i.getAggregateResults(t)),Ri(1))}getOntologyTermOccurences(t){return this.dataSource.pipe(or(i=>i.getOntologyTermOccurences(t)),Ri(1))}getCellTypeTermOccurences(t){return this.dataSource.pipe(or(i=>i.getCellTypeTermOccurences(t)),Ri(1))}getOntologyTreeModel(){return this.dataSource.pipe(or(t=>t.getOntologyTreeModel()),Ri(1))}getCellTypeTreeModel(){return this.dataSource.pipe(or(t=>t.getCellTypeTreeModel()),Ri(1))}getReferenceOrgans(){return this.dataSource.pipe(or(t=>t.getReferenceOrgans()),Ri(1))}getScene(t){return this.dataSource.pipe(or(i=>i.getScene(t)),Ri(1))}getOrganScene(t,i){return this.dataSource.pipe(or(r=>r.getReferenceOrganScene(t,i)),Ri(1))}createDataSource(){return{source:new CUe,unsubscribe:()=>{}}}connectDataSource(t,i){return jt(function*(){(new Date).getTime();return yield t.connect(i,!1),t})()}static#e=this.\u0275fac=function(i){return new(i||n)(it(Zy),it(Wv))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OUe=(()=>{class n{constructor(t,i){this.configState=t,this.source=i,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(qt(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(qt(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=Sh([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(or(([r,o,s])=>this.chooseScene(r,o))),this.organs$=this.configState.getOption("data").pipe(qt(r=>this.selectOrgans(r)),Js(1)),this.filteredOrgans$=Sh([this.organs$,this.referenceOrgans$]).pipe(qt(([r,o])=>this.getNeededReferenceOrgans(o,r)),Js(1)),this.filteredScene$=Sh([this.scene$,this.organs$,this.referenceOrgans$]).pipe(qt(([r,o,s])=>this.filterSceneNodes(r,o,s)),function HLe(n,e){const t=n.pipe(Zc(""));return i=>Sh([i,t]).pipe(qt(([r,o])=>r.map(s=>function zLe(n,e,t){return n.entityId!==e?n:{...n,color:t}}(s,o,e))))}(this.highlightID$,VLe),function WLe(n){const e=n.pipe(Zc(""));return t=>Sh([t,e]).pipe(qt(([i,r])=>i.map(o=>function GLe(n,e){return n.entityId!==e?n:{...n,zoomToOnLoad:!0}}(o,r))))}(this.zoomToID$),Js(1))}chooseScene(t,i){const r=t?.map(s=>s[fK]?.placement.target)??[];if(new Set(r).size>1)return this.source.getScene();if(i){const s=i.find(a=>a["@id"]===r[0]);if(s)return this.source.getOrganScene(s.representation_of,{ontologyTerms:[s.reference_organ],sex:s.sex})}return gn([])}selectOrgans(t){const r=(t??[]).map(o=>o[fK].placement.target);return new Set(r)}filterSceneNodes(t,i,r){const o=this.getNeededReferenceOrgans(r,i),s=this.getNeededSkins(o),a=new Set([...i,...s]);return t.filter(l=>!l.reference_organ||a.has(l.reference_organ))}getNeededReferenceOrgans(t,i){return t.filter(r=>i.has(r.reference_organ??""))}getNeededSkins(t){if(1===t.length)return[];const i=new Set;return t.forEach(r=>{"Female"===r.sex?i.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===r.sex&&i.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...i]}static#e=this.\u0275fac=function(i){return new(i||n)(it(Wv),it(kUe))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const NUe=["bodyUI"];let PUe=(()=>{class n{constructor(t,i,r){this.configState=t,this.sceneSource=i,this.cdr=r,this.onMouseEnter=new nn,this.onMouseLeave=new nn,this.onClick=new nn,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(Rr(o=>this.reset()))}reset(){var t=this;return jt(function*(){const{bodyUI:i}=t;yield new Promise(s=>setTimeout(s,200));const r=yield function YG(n,e){const t="object"==typeof e;return new Promise((i,r)=>{let s,o=!1;n.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):t?i(e.defaultValue):r(new nv)}})})}(t.organs$.pipe(Ri(1))),o=!!i.scene?.find(s=>s.zoomToOnLoad);if(i.rotation=0,i.rotationX=0,!o)if(r&&1===r.length){const{x_dimension:s,y_dimension:a,z_dimension:c}=r[0];i.bounds={x:1.25*s/1e3,y:1.25*a/1e3,z:1.25*c/1e3},i.target=[s/1e3/2,a/1e3/2,c/1e3/2]}else i.bounds={x:2.2,y:2,z:.4},i.target=[0,0,0];t.cdr.detectChanges()})()}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Wv),Ge(OUe),Ge(Ur))};static#t=this.\u0275cmp=En({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&Pi(NUe,7),2&i){let o;On(o=Nn())&&(r.bodyUI=o.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:4,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(i,r){1&i&&(Ft(0,"ccf-body-ui",0,1),vn("nodeClick",function(s){return r.onClick.emit(s)})("nodeHoverStart",function(s){return r.onMouseEnter.emit(s)})("nodeHoverStop",function(s){return r.onMouseLeave.emit(s)}),Ba(2,"async"),Bt()),2&i&&un("scene",Pl(2,2,r.scene$))("interactive",!0)},dependencies:[tLe,t0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return n})();function FUe(n,e){if(1&n){const t=function Nl(){return Mt()}();Ft(0,"ccf-root",1),vn("onMouseEnter",function(r){return Br(t),fi(Mn().onMouseEnter.emit(r))})("onMouseLeave",function(r){return Br(t),fi(Mn().onMouseLeave.emit(r))})("onClick",function(r){return Br(t),fi(Mn().onClick.emit(r))}),Bt()}}function LUe(n){return"string"==typeof n&&(n=JSON.parse(n)),n.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let BUe=(()=>{class n extends Yse{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...a0_dbOptions,...globalThis.dbOptions},parse:{data:LUe}}),this.onMouseEnter=new nn,this.onMouseLeave=new nn,this.onClick=new nn}static#e=this.\u0275fac=function(i){return new(i||n)(Ge(Wv),Ge(Ur))};static#t=this.\u0275cmp=En({type:n,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[Wn],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&Rn(0,FUe,1,0,"ccf-root",0),2&i&&un("ngIf",r.initialized)},dependencies:[Vf,PUe],encapsulation:2,changeDetection:0})}return n})();const CC=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class VUe{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=dp(this.action),i=function UUe(n){return CC(n.getHours(),2)+":"+CC(n.getMinutes(),2)+":"+CC(n.getSeconds(),2)+"."+CC(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class zUe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const Eq=new bt("NGXS_LOGGER_PLUGIN_OPTIONS");let HUe=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new zUe(this._options),this._store=this._store||this._injector.get(Ql);const o=new VUe(i,this._store,this._logWriter);return o.dispatched(t),r(t,i).pipe(Rr(s=>{o.completed(s)}),Jc(s=>{throw o.errored(s),s}))}}return n.\u0275fac=function(t){return new(t||n)(it(Eq),it(ur))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const Aq=new bt("LOGGER_USER_OPTIONS");function GUe(n){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),n)}let WUe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:d9,useClass:HUe,multi:!0},{provide:Aq,useValue:t},{provide:Eq,useFactory:GUe,deps:[Aq]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=dn({type:n}),n.\u0275inj=ln({}),n})();const $Ue=[Wv];let YUe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({imports:[Qke.forRoot(),T9.forRoot($Ue,{developmentMode:!1}),WUe.forRoot({disabled:true})]})}return n})(),XUe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function Gse(n,e){const t=function Lse(n,e){return e.get(Dl).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new Vse(n,e.injector),r=function Fse(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function Rse(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class o extends Hse{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const d=this[c];delete this[c],a.setInputValue(c,d,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,d){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(c){this.ngElementStrategy.setInputValue(s,c,a)},configurable:!0,enumerable:!0})}),o}(BUe,{injector:this.injector});customElements.define("ccf-body-ui-wc",t)}static#e=this.\u0275fac=function(i){return new(i||n)(it(ur))};static#t=this.\u0275mod=dn({type:n});static#n=this.\u0275inj=ln({imports:[Goe,YUe,nLe]})}return n})();zoe().bootstrapModule(XUe).catch(n=>console.error(n))},2323:ee=>{ee.exports=function(g,C){var b=C.length;if(0!==b){var D=g.length;g.length+=b;for(var S=0;S<b;S++)g[D+S]=C[S]}}},3982:ee=>{"use strict";const{AbortController:q,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;ee.exports=q,ee.exports.AbortSignal=g,ee.exports.default=q},9919:(ee,q)=>{"use strict";q.byteLength=function v(A){var L=_(A),X=L[1];return 3*(L[0]+X)/4-X},q.toByteArray=function j(A){var L,x,ae=_(A),X=ae[0],J=ae[1],Z=new b(function T(A,L,ae){return 3*(L+ae)/4-ae}(0,X,J)),W=0,z=J>0?X-4:X;for(x=0;x<z;x+=4)L=C[A.charCodeAt(x)]<<18|C[A.charCodeAt(x+1)]<<12|C[A.charCodeAt(x+2)]<<6|C[A.charCodeAt(x+3)],Z[W++]=L>>16&255,Z[W++]=L>>8&255,Z[W++]=255&L;return 2===J&&(L=C[A.charCodeAt(x)]<<2|C[A.charCodeAt(x+1)]>>4,Z[W++]=255&L),1===J&&(L=C[A.charCodeAt(x)]<<10|C[A.charCodeAt(x+1)]<<4|C[A.charCodeAt(x+2)]>>2,Z[W++]=L>>8&255,Z[W++]=255&L),Z},q.fromByteArray=function Q(A){for(var L,ae=A.length,X=ae%3,J=[],Z=16383,W=0,z=ae-X;W<z;W+=Z)J.push(B(A,W,W+Z>z?z:W+Z));return 1===X?J.push(g[(L=A[ae-1])>>2]+g[L<<4&63]+"=="):2===X&&J.push(g[(L=(A[ae-2]<<8)+A[ae-1])>>10]+g[L>>4&63]+g[L<<2&63]+"="),J.join("")};for(var g=[],C=[],b=typeof Uint8Array<"u"?Uint8Array:Array,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0;S<64;++S)g[S]=D[S],C[D.charCodeAt(S)]=S;function _(A){var L=A.length;if(L%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=A.indexOf("=");return-1===ae&&(ae=L),[ae,ae===L?0:4-ae%4]}function O(A){return g[A>>18&63]+g[A>>12&63]+g[A>>6&63]+g[63&A]}function B(A,L,ae){for(var J=[],Z=L;Z<ae;Z+=3)J.push(O((A[Z]<<16&16711680)+(A[Z+1]<<8&65280)+(255&A[Z+2])));return J.join("")}C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63},1979:(ee,q)=>{"use strict";var C=function(D){return D.typeOfFunction="function",D.boolTrue=!0,D}(C||{});q.ak=function b(D,S,k){if(!k||typeof k.value!==C.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+S+"> is not a method!");return{configurable:C.boolTrue,get:function(){var _=k.value.bind(this);return Object.defineProperty(this,S,{value:_,configurable:C.boolTrue,writable:C.boolTrue}),_}}}},9007:(ee,q,g)=>{"use strict";var C=g(9919),b=g(2601);q.Buffer=_,q.SlowBuffer=function X($){return+$!=$&&($=0),_.alloc(+$)},q.INSPECT_MAX_BYTES=50;var D=2147483647;function k($){if($>D)throw new RangeError('The value "'+$+'" is invalid for option "size"');var P=new Uint8Array($);return P.__proto__=_.prototype,P}function _($,P,U){if("number"==typeof $){if("string"==typeof P)throw new TypeError('The "string" argument must be of type string. Received type number');return O($)}return v($,P,U)}function v($,P,U){if("string"==typeof $)return function B($,P){if(("string"!=typeof P||""===P)&&(P="utf8"),!_.isEncoding(P))throw new TypeError("Unknown encoding: "+P);var U=0|J($,P),pe=k(U),$e=pe.write($,P);return $e!==U&&(pe=pe.slice(0,$e)),pe}($,P);if(ArrayBuffer.isView($))return Q($);if(null==$)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(fe($,ArrayBuffer)||$&&fe($.buffer,ArrayBuffer))return function A($,P,U){if(P<0||$.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<P+(U||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return(pe=void 0===P&&void 0===U?new Uint8Array($):void 0===U?new Uint8Array($,P):new Uint8Array($,P,U)).__proto__=_.prototype,pe}($,P,U);if("number"==typeof $)throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=$.valueOf&&$.valueOf();if(null!=pe&&pe!==$)return _.from(pe,P,U);var $e=function L($){if(_.isBuffer($)){var P=0|ae($.length),U=k(P);return 0===U.length||$.copy(U,0,0,P),U}return void 0!==$.length?"number"!=typeof $.length||re($.length)?k(0):Q($):"Buffer"===$.type&&Array.isArray($.data)?Q($.data):void 0}($);if($e)return $e;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof $[Symbol.toPrimitive])return _.from($[Symbol.toPrimitive]("string"),P,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function T($){if("number"!=typeof $)throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function O($){return T($),k($<0?0:0|ae($))}function Q($){for(var P=$.length<0?0:0|ae($.length),U=k(P),pe=0;pe<P;pe+=1)U[pe]=255&$[pe];return U}function ae($){if($>=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");return 0|$}function J($,P){if(_.isBuffer($))return $.length;if(ArrayBuffer.isView($)||fe($,ArrayBuffer))return $.byteLength;if("string"!=typeof $)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var U=$.length,pe=arguments.length>2&&!0===arguments[2];if(!pe&&0===U)return 0;for(var $e=!1;;)switch(P){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return I($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return He($).length;default:if($e)return pe?-1:I($).length;P=(""+P).toLowerCase(),$e=!0}}function Z($,P,U){var pe=!1;if((void 0===P||P<0)&&(P=0),P>this.length||((void 0===U||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(P>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return ze(this,P,U);case"utf8":case"utf-8":return ke(this,P,U);case"ascii":return Ke(this,P,U);case"latin1":case"binary":return Me(this,P,U);case"base64":return be(this,P,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,P,U);default:if(pe)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),pe=!0}}function W($,P,U){var pe=$[P];$[P]=$[U],$[U]=pe}function z($,P,U,pe,$e){if(0===$.length)return-1;if("string"==typeof U?(pe=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),re(U=+U)&&(U=$e?0:$.length-1),U<0&&(U=$.length+U),U>=$.length){if($e)return-1;U=$.length-1}else if(U<0){if(!$e)return-1;U=0}if("string"==typeof P&&(P=_.from(P,pe)),_.isBuffer(P))return 0===P.length?-1:x($,P,U,pe,$e);if("number"==typeof P)return P&=255,"function"==typeof Uint8Array.prototype.indexOf?$e?Uint8Array.prototype.indexOf.call($,P,U):Uint8Array.prototype.lastIndexOf.call($,P,U):x($,[P],U,pe,$e);throw new TypeError("val must be string, number or Buffer")}function x($,P,U,pe,$e){var At,ye=1,Ve=$.length,rt=P.length;if(void 0!==pe&&("ucs2"===(pe=String(pe).toLowerCase())||"ucs-2"===pe||"utf16le"===pe||"utf-16le"===pe)){if($.length<2||P.length<2)return-1;ye=2,Ve/=2,rt/=2,U/=2}function _t(Y,oe){return 1===ye?Y[oe]:Y.readUInt16BE(oe*ye)}if($e){var wt=-1;for(At=U;At<Ve;At++)if(_t($,At)===_t(P,-1===wt?0:At-wt)){if(-1===wt&&(wt=At),At-wt+1===rt)return wt*ye}else-1!==wt&&(At-=At-wt),wt=-1}else for(U+rt>Ve&&(U=Ve-rt),At=U;At>=0;At--){for(var Xt=!0,ge=0;ge<rt;ge++)if(_t($,At+ge)!==_t(P,ge)){Xt=!1;break}if(Xt)return At}return-1}function N($,P,U,pe){U=Number(U)||0;var $e=$.length-U;pe?(pe=Number(pe))>$e&&(pe=$e):pe=$e;var ye=P.length;pe>ye/2&&(pe=ye/2);for(var Ve=0;Ve<pe;++Ve){var rt=parseInt(P.substr(2*Ve,2),16);if(re(rt))return Ve;$[U+Ve]=rt}return Ve}function R($,P,U,pe){return Je(I(P,$.length-U),$,U,pe)}function le($,P,U,pe){return Je(function se($){for(var P=[],U=0;U<$.length;++U)P.push(255&$.charCodeAt(U));return P}(P),$,U,pe)}function G($,P,U,pe){return le($,P,U,pe)}function Te($,P,U,pe){return Je(He(P),$,U,pe)}function ce($,P,U,pe){return Je(function ie($,P){for(var U,pe,ye=[],Ve=0;Ve<$.length&&!((P-=2)<0);++Ve)pe=(U=$.charCodeAt(Ve))>>8,ye.push(U%256),ye.push(pe);return ye}(P,$.length-U),$,U,pe)}function be($,P,U){return C.fromByteArray(0===P&&U===$.length?$:$.slice(P,U))}function ke($,P,U){U=Math.min($.length,U);for(var pe=[],$e=P;$e<U;){var _t,At,wt,Xt,ye=$[$e],Ve=null,rt=ye>239?4:ye>223?3:ye>191?2:1;if($e+rt<=U)switch(rt){case 1:ye<128&&(Ve=ye);break;case 2:128==(192&(_t=$[$e+1]))&&(Xt=(31&ye)<<6|63&_t)>127&&(Ve=Xt);break;case 3:At=$[$e+2],128==(192&(_t=$[$e+1]))&&128==(192&At)&&(Xt=(15&ye)<<12|(63&_t)<<6|63&At)>2047&&(Xt<55296||Xt>57343)&&(Ve=Xt);break;case 4:At=$[$e+2],wt=$[$e+3],128==(192&(_t=$[$e+1]))&&128==(192&At)&&128==(192&wt)&&(Xt=(15&ye)<<18|(63&_t)<<12|(63&At)<<6|63&wt)>65535&&Xt<1114112&&(Ve=Xt)}null===Ve?(Ve=65533,rt=1):Ve>65535&&(pe.push((Ve-=65536)>>>10&1023|55296),Ve=56320|1023&Ve),pe.push(Ve),$e+=rt}return function Ze($){var P=$.length;if(P<=Ne)return String.fromCharCode.apply(String,$);for(var U="",pe=0;pe<P;)U+=String.fromCharCode.apply(String,$.slice(pe,pe+=Ne));return U}(pe)}q.kMaxLength=D,!(_.TYPED_ARRAY_SUPPORT=function S(){try{var $=new Uint8Array(1);return $.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===$.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function($,P,U){return v($,P,U)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function($,P,U){return function j($,P,U){return T($),$<=0?k($):void 0!==P?"string"==typeof U?k($).fill(P,U):k($).fill(P):k($)}($,P,U)},_.allocUnsafe=function($){return O($)},_.allocUnsafeSlow=function($){return O($)},_.isBuffer=function(P){return null!=P&&!0===P._isBuffer&&P!==_.prototype},_.compare=function(P,U){if(fe(P,Uint8Array)&&(P=_.from(P,P.offset,P.byteLength)),fe(U,Uint8Array)&&(U=_.from(U,U.offset,U.byteLength)),!_.isBuffer(P)||!_.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===U)return 0;for(var pe=P.length,$e=U.length,ye=0,Ve=Math.min(pe,$e);ye<Ve;++ye)if(P[ye]!==U[ye]){pe=P[ye],$e=U[ye];break}return pe<$e?-1:$e<pe?1:0},_.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(P,U){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(0===P.length)return _.alloc(0);var pe;if(void 0===U)for(U=0,pe=0;pe<P.length;++pe)U+=P[pe].length;var $e=_.allocUnsafe(U),ye=0;for(pe=0;pe<P.length;++pe){var Ve=P[pe];if(fe(Ve,Uint8Array)&&(Ve=_.from(Ve)),!_.isBuffer(Ve))throw new TypeError('"list" argument must be an Array of Buffers');Ve.copy($e,ye),ye+=Ve.length}return $e},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<P;U+=2)W(this,U,U+1);return this},_.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<P;U+=4)W(this,U,U+3),W(this,U+1,U+2);return this},_.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<P;U+=8)W(this,U,U+7),W(this,U+1,U+6),W(this,U+2,U+5),W(this,U+3,U+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var P=this.length;return 0===P?"":0===arguments.length?ke(this,0,P):Z.apply(this,arguments)},_.prototype.equals=function(P){if(!_.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||0===_.compare(this,P)},_.prototype.inspect=function(){var P="",U=q.INSPECT_MAX_BYTES;return P=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(P+=" ... "),"<Buffer "+P+">"},_.prototype.compare=function(P,U,pe,$e,ye){if(fe(P,Uint8Array)&&(P=_.from(P,P.offset,P.byteLength)),!_.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(void 0===U&&(U=0),void 0===pe&&(pe=P?P.length:0),void 0===$e&&($e=0),void 0===ye&&(ye=this.length),U<0||pe>P.length||$e<0||ye>this.length)throw new RangeError("out of range index");if($e>=ye&&U>=pe)return 0;if($e>=ye)return-1;if(U>=pe)return 1;if(this===P)return 0;for(var Ve=(ye>>>=0)-($e>>>=0),rt=(pe>>>=0)-(U>>>=0),_t=Math.min(Ve,rt),At=this.slice($e,ye),wt=P.slice(U,pe),Xt=0;Xt<_t;++Xt)if(At[Xt]!==wt[Xt]){Ve=At[Xt],rt=wt[Xt];break}return Ve<rt?-1:rt<Ve?1:0},_.prototype.includes=function(P,U,pe){return-1!==this.indexOf(P,U,pe)},_.prototype.indexOf=function(P,U,pe){return z(this,P,U,pe,!0)},_.prototype.lastIndexOf=function(P,U,pe){return z(this,P,U,pe,!1)},_.prototype.write=function(P,U,pe,$e){if(void 0===U)$e="utf8",pe=this.length,U=0;else if(void 0===pe&&"string"==typeof U)$e=U,pe=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(pe)?(pe>>>=0,void 0===$e&&($e="utf8")):($e=pe,pe=void 0)}var ye=this.length-U;if((void 0===pe||pe>ye)&&(pe=ye),P.length>0&&(pe<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");$e||($e="utf8");for(var Ve=!1;;)switch($e){case"hex":return N(this,P,U,pe);case"utf8":case"utf-8":return R(this,P,U,pe);case"ascii":return le(this,P,U,pe);case"latin1":case"binary":return G(this,P,U,pe);case"base64":return Te(this,P,U,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,P,U,pe);default:if(Ve)throw new TypeError("Unknown encoding: "+$e);$e=(""+$e).toLowerCase(),Ve=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ne=4096;function Ke($,P,U){var pe="";U=Math.min($.length,U);for(var $e=P;$e<U;++$e)pe+=String.fromCharCode(127&$[$e]);return pe}function Me($,P,U){var pe="";U=Math.min($.length,U);for(var $e=P;$e<U;++$e)pe+=String.fromCharCode($[$e]);return pe}function ze($,P,U){var pe=$.length;(!P||P<0)&&(P=0),(!U||U<0||U>pe)&&(U=pe);for(var $e="",ye=P;ye<U;++ye)$e+=F($[ye]);return $e}function Ce($,P,U){for(var pe=$.slice(P,U),$e="",ye=0;ye<pe.length;ye+=2)$e+=String.fromCharCode(pe[ye]+256*pe[ye+1]);return $e}function je($,P,U){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+P>U)throw new RangeError("Trying to access beyond buffer length")}function he($,P,U,pe,$e,ye){if(!_.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>$e||P<ye)throw new RangeError('"value" argument is out of bounds');if(U+pe>$.length)throw new RangeError("Index out of range")}function Se($,P,U,pe,$e,ye){if(U+pe>$.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function tt($,P,U,pe,$e){return P=+P,U>>>=0,$e||Se($,0,U,4),b.write($,P,U,pe,23,4),U+4}function ft($,P,U,pe,$e){return P=+P,U>>>=0,$e||Se($,0,U,8),b.write($,P,U,pe,52,8),U+8}_.prototype.slice=function(P,U){var pe=this.length;(P=~~P)<0?(P+=pe)<0&&(P=0):P>pe&&(P=pe),(U=void 0===U?pe:~~U)<0?(U+=pe)<0&&(U=0):U>pe&&(U=pe),U<P&&(U=P);var $e=this.subarray(P,U);return $e.__proto__=_.prototype,$e},_.prototype.readUIntLE=function(P,U,pe){P>>>=0,U>>>=0,pe||je(P,U,this.length);for(var $e=this[P],ye=1,Ve=0;++Ve<U&&(ye*=256);)$e+=this[P+Ve]*ye;return $e},_.prototype.readUIntBE=function(P,U,pe){P>>>=0,U>>>=0,pe||je(P,U,this.length);for(var $e=this[P+--U],ye=1;U>0&&(ye*=256);)$e+=this[P+--U]*ye;return $e},_.prototype.readUInt8=function(P,U){return P>>>=0,U||je(P,1,this.length),this[P]},_.prototype.readUInt16LE=function(P,U){return P>>>=0,U||je(P,2,this.length),this[P]|this[P+1]<<8},_.prototype.readUInt16BE=function(P,U){return P>>>=0,U||je(P,2,this.length),this[P]<<8|this[P+1]},_.prototype.readUInt32LE=function(P,U){return P>>>=0,U||je(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},_.prototype.readUInt32BE=function(P,U){return P>>>=0,U||je(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},_.prototype.readIntLE=function(P,U,pe){P>>>=0,U>>>=0,pe||je(P,U,this.length);for(var $e=this[P],ye=1,Ve=0;++Ve<U&&(ye*=256);)$e+=this[P+Ve]*ye;return $e>=(ye*=128)&&($e-=Math.pow(2,8*U)),$e},_.prototype.readIntBE=function(P,U,pe){P>>>=0,U>>>=0,pe||je(P,U,this.length);for(var $e=U,ye=1,Ve=this[P+--$e];$e>0&&(ye*=256);)Ve+=this[P+--$e]*ye;return Ve>=(ye*=128)&&(Ve-=Math.pow(2,8*U)),Ve},_.prototype.readInt8=function(P,U){return P>>>=0,U||je(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},_.prototype.readInt16LE=function(P,U){P>>>=0,U||je(P,2,this.length);var pe=this[P]|this[P+1]<<8;return 32768&pe?4294901760|pe:pe},_.prototype.readInt16BE=function(P,U){P>>>=0,U||je(P,2,this.length);var pe=this[P+1]|this[P]<<8;return 32768&pe?4294901760|pe:pe},_.prototype.readInt32LE=function(P,U){return P>>>=0,U||je(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},_.prototype.readInt32BE=function(P,U){return P>>>=0,U||je(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},_.prototype.readFloatLE=function(P,U){return P>>>=0,U||je(P,4,this.length),b.read(this,P,!0,23,4)},_.prototype.readFloatBE=function(P,U){return P>>>=0,U||je(P,4,this.length),b.read(this,P,!1,23,4)},_.prototype.readDoubleLE=function(P,U){return P>>>=0,U||je(P,8,this.length),b.read(this,P,!0,52,8)},_.prototype.readDoubleBE=function(P,U){return P>>>=0,U||je(P,8,this.length),b.read(this,P,!1,52,8)},_.prototype.writeUIntLE=function(P,U,pe,$e){P=+P,U>>>=0,pe>>>=0,$e||he(this,P,U,pe,Math.pow(2,8*pe)-1,0);var Ve=1,rt=0;for(this[U]=255&P;++rt<pe&&(Ve*=256);)this[U+rt]=P/Ve&255;return U+pe},_.prototype.writeUIntBE=function(P,U,pe,$e){P=+P,U>>>=0,pe>>>=0,$e||he(this,P,U,pe,Math.pow(2,8*pe)-1,0);var Ve=pe-1,rt=1;for(this[U+Ve]=255&P;--Ve>=0&&(rt*=256);)this[U+Ve]=P/rt&255;return U+pe},_.prototype.writeUInt8=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,1,255,0),this[U]=255&P,U+1},_.prototype.writeUInt16LE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,2,65535,0),this[U]=255&P,this[U+1]=P>>>8,U+2},_.prototype.writeUInt16BE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,2,65535,0),this[U]=P>>>8,this[U+1]=255&P,U+2},_.prototype.writeUInt32LE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,4,4294967295,0),this[U+3]=P>>>24,this[U+2]=P>>>16,this[U+1]=P>>>8,this[U]=255&P,U+4},_.prototype.writeUInt32BE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,4,4294967295,0),this[U]=P>>>24,this[U+1]=P>>>16,this[U+2]=P>>>8,this[U+3]=255&P,U+4},_.prototype.writeIntLE=function(P,U,pe,$e){if(P=+P,U>>>=0,!$e){var ye=Math.pow(2,8*pe-1);he(this,P,U,pe,ye-1,-ye)}var Ve=0,rt=1,_t=0;for(this[U]=255&P;++Ve<pe&&(rt*=256);)P<0&&0===_t&&0!==this[U+Ve-1]&&(_t=1),this[U+Ve]=(P/rt>>0)-_t&255;return U+pe},_.prototype.writeIntBE=function(P,U,pe,$e){if(P=+P,U>>>=0,!$e){var ye=Math.pow(2,8*pe-1);he(this,P,U,pe,ye-1,-ye)}var Ve=pe-1,rt=1,_t=0;for(this[U+Ve]=255&P;--Ve>=0&&(rt*=256);)P<0&&0===_t&&0!==this[U+Ve+1]&&(_t=1),this[U+Ve]=(P/rt>>0)-_t&255;return U+pe},_.prototype.writeInt8=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,1,127,-128),P<0&&(P=255+P+1),this[U]=255&P,U+1},_.prototype.writeInt16LE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,2,32767,-32768),this[U]=255&P,this[U+1]=P>>>8,U+2},_.prototype.writeInt16BE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,2,32767,-32768),this[U]=P>>>8,this[U+1]=255&P,U+2},_.prototype.writeInt32LE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,4,2147483647,-2147483648),this[U]=255&P,this[U+1]=P>>>8,this[U+2]=P>>>16,this[U+3]=P>>>24,U+4},_.prototype.writeInt32BE=function(P,U,pe){return P=+P,U>>>=0,pe||he(this,P,U,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[U]=P>>>24,this[U+1]=P>>>16,this[U+2]=P>>>8,this[U+3]=255&P,U+4},_.prototype.writeFloatLE=function(P,U,pe){return tt(this,P,U,!0,pe)},_.prototype.writeFloatBE=function(P,U,pe){return tt(this,P,U,!1,pe)},_.prototype.writeDoubleLE=function(P,U,pe){return ft(this,P,U,!0,pe)},_.prototype.writeDoubleBE=function(P,U,pe){return ft(this,P,U,!1,pe)},_.prototype.copy=function(P,U,pe,$e){if(!_.isBuffer(P))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!$e&&0!==$e&&($e=this.length),U>=P.length&&(U=P.length),U||(U=0),$e>0&&$e<pe&&($e=pe),$e===pe||0===P.length||0===this.length)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if($e<0)throw new RangeError("sourceEnd out of bounds");$e>this.length&&($e=this.length),P.length-U<$e-pe&&($e=P.length-U+pe);var ye=$e-pe;if(this===P&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(U,pe,$e);else if(this===P&&pe<U&&U<$e)for(var Ve=ye-1;Ve>=0;--Ve)P[Ve+U]=this[Ve+pe];else Uint8Array.prototype.set.call(P,this.subarray(pe,$e),U);return ye},_.prototype.fill=function(P,U,pe,$e){if("string"==typeof P){if("string"==typeof U?($e=U,U=0,pe=this.length):"string"==typeof pe&&($e=pe,pe=this.length),void 0!==$e&&"string"!=typeof $e)throw new TypeError("encoding must be a string");if("string"==typeof $e&&!_.isEncoding($e))throw new TypeError("Unknown encoding: "+$e);if(1===P.length){var ye=P.charCodeAt(0);("utf8"===$e&&ye<128||"latin1"===$e)&&(P=ye)}}else"number"==typeof P&&(P&=255);if(U<0||this.length<U||this.length<pe)throw new RangeError("Out of range index");if(pe<=U)return this;var Ve;if(U>>>=0,pe=void 0===pe?this.length:pe>>>0,P||(P=0),"number"==typeof P)for(Ve=U;Ve<pe;++Ve)this[Ve]=P;else{var rt=_.isBuffer(P)?P:_.from(P,$e),_t=rt.length;if(0===_t)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Ve=0;Ve<pe-U;++Ve)this[Ve+U]=rt[Ve%_t]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function F($){return $<16?"0"+$.toString(16):$.toString(16)}function I($,P){P=P||1/0;for(var U,pe=$.length,$e=null,ye=[],Ve=0;Ve<pe;++Ve){if((U=$.charCodeAt(Ve))>55295&&U<57344){if(!$e){if(U>56319){(P-=3)>-1&&ye.push(239,191,189);continue}if(Ve+1===pe){(P-=3)>-1&&ye.push(239,191,189);continue}$e=U;continue}if(U<56320){(P-=3)>-1&&ye.push(239,191,189),$e=U;continue}U=65536+($e-55296<<10|U-56320)}else $e&&(P-=3)>-1&&ye.push(239,191,189);if($e=null,U<128){if((P-=1)<0)break;ye.push(U)}else if(U<2048){if((P-=2)<0)break;ye.push(U>>6|192,63&U|128)}else if(U<65536){if((P-=3)<0)break;ye.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((P-=4)<0)break;ye.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return ye}function He($){return C.toByteArray(function me($){if(($=($=$.split("=")[0]).trim().replace(qe,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}($))}function Je($,P,U,pe){for(var $e=0;$e<pe&&!($e+U>=P.length||$e>=$.length);++$e)P[$e+U]=$[$e];return $e}function fe($,P){return $ instanceof P||null!=$&&null!=$.constructor&&null!=$.constructor.name&&$.constructor.name===P.name}function re($){return $!=$}},1563:(ee,q,g)=>{ee.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(ee,q,g){"use strict";var C,b,D;typeof window<"u"&&window,b=[g(884)],void 0!==(D="function"==typeof(C=function(S){var k=function(){var v,T={},j=[];function O(G){G||(G=document.documentElement);var Te=window.getComputedStyle(G,null).fontSize;return parseFloat(Te)||16}function Q(G,Te){var ce=Te.split(/\d/),be=ce[ce.length-1];switch(Te=parseFloat(Te),be){case"px":default:return Te;case"em":return Te*O(G);case"rem":return Te*O();case"vw":return Te*document.documentElement.clientWidth/100;case"vh":return Te*document.documentElement.clientHeight/100;case"vmin":case"vmax":var ke=document.documentElement.clientWidth/100,Ne=document.documentElement.clientHeight/100;return Te*(0,Math["vmin"===be?"min":"max"])(ke,Ne)}}function A(G,Te){this.element=G;var ce,be,ke,Ne,Ze,Ke,Me,ze,Ce=["min-width","min-height","max-width","max-height"];this.call=function(){for(ce in ke=function B(G){if(!G.getBoundingClientRect)return{width:G.offsetWidth,height:G.offsetHeight};var Te=G.getBoundingClientRect();return{width:Math.round(Te.width),height:Math.round(Te.height)}}(this.element),Ke={},T[Te])T[Te].hasOwnProperty(ce)&&(Ne=Q(this.element,(be=T[Te][ce]).value),Ze="width"===be.property?ke.width:ke.height,Me="","min"===be.mode&&Ze>=Ne&&(Me+=be.value),"max"===be.mode&&Ze<=Ne&&(Me+=be.value),Ke[ze=be.mode+"-"+be.property]||(Ke[ze]=""),Me&&-1===(" "+Ke[ze]+" ").indexOf(" "+Me+" ")&&(Ke[ze]+=" "+Me));for(var je in Ce)Ce.hasOwnProperty(je)&&(Ke[Ce[je]]?this.element.setAttribute(Ce[je],Ke[Ce[je]].substr(1)):this.element.removeAttribute(Ce[je]))}}function L(G,Te){G.elementQueriesSetupInformation||(G.elementQueriesSetupInformation=new A(G,Te)),G.elementQueriesSensor||(G.elementQueriesSensor=new S(G,function(){G.elementQueriesSetupInformation.call()}))}function ae(G,Te,ce,be){if(typeof T[G]>"u"){T[G]=[];var ke=j.length;v.innerHTML+="\n"+G+" {animation: 0.1s element-queries;}",v.innerHTML+="\n"+G+" > .resize-sensor {min-width: "+ke+"px;}",j.push(G)}T[G].push({mode:Te,property:ce,value:be})}function X(G){var Te;if(document.querySelectorAll&&(Te=G?G.querySelectorAll.bind(G):document.querySelectorAll.bind(document)),!Te&&typeof $$<"u"&&(Te=$$),!Te&&typeof jQuery<"u"&&(Te=jQuery),!Te)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Te}function Z(G){var Te=[],ce=[],be=[],ke=0,Ne=-1,Ze=[];for(var Ke in G.children)if(G.children.hasOwnProperty(Ke)&&G.children[Ke].tagName&&"img"===G.children[Ke].tagName.toLowerCase()){Te.push(G.children[Ke]);var Me=G.children[Ke].getAttribute("min-width")||G.children[Ke].getAttribute("data-min-width"),ze=G.children[Ke].getAttribute("data-src")||G.children[Ke].getAttribute("url");be.push(ze),ce.push({minWidth:Me}),Me?G.children[Ke].style.display="none":(ke=Te.length-1,G.children[Ke].style.display="block")}function je(){var Se,he=!1;for(Se in Te)Te.hasOwnProperty(Se)&&ce[Se].minWidth&&G.offsetWidth>ce[Se].minWidth&&(he=Se);if(he||(he=ke),Ne!==he)if(Ze[he])Te[Ne].style.display="none",Te[he].style.display="block",Ne=he;else{var tt=new Image;tt.onload=function(){Te[he].src=be[he],Te[Ne].style.display="none",Te[he].style.display="block",Ze[he]=!0,Ne=he},tt.src=be[he]}else Te[he].src=be[he]}Ne=ke,G.resizeSensorInstance=new S(G,je),je()}var z=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,x=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function N(G){var Te,ce,be,ke;for(G=G.replace(/'/g,'"');null!==(Te=z.exec(G));)for(ce=Te[1]+Te[3],be=Te[2];null!==(ke=x.exec(be));)ae(ce,ke[1],ke[2],ke[3])}function R(G){var Te="";if(G)if("string"==typeof G)(-1!==(G=G.toLowerCase()).indexOf("min-width")||-1!==G.indexOf("max-width"))&&N(G);else for(var ce=0,be=G.length;ce<be;ce++)1===G[ce].type?(-1!==(Te=G[ce].selectorText||G[ce].cssText).indexOf("min-height")||-1!==Te.indexOf("max-height")||-1!==Te.indexOf("min-width")||-1!==Te.indexOf("max-width"))&&N(Te):4===G[ce].type?R(G[ce].cssRules||G[ce].rules):3===G[ce].type&&G[ce].styleSheet.hasOwnProperty("cssRules")&&R(G[ce].styleSheet.cssRules)}var le=!1;this.init=function(){var G="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?G="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?G="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(G="oanimationstart"),document.body.addEventListener(G,function(be){var ke=be.target,Ne=ke&&window.getComputedStyle(ke,null),Ze=Ne&&Ne.getPropertyValue("animation-name");if(Ze&&-1!==Ze.indexOf("element-queries")){ke.elementQueriesSensor=new S(ke,function(){ke.elementQueriesSetupInformation&&ke.elementQueriesSetupInformation.call()});var ze=window.getComputedStyle(ke.resizeSensor,null).getPropertyValue("min-width");ze=parseInt(ze.replace("px","")),L(be.target,j[ze])}}),le||((v=document.createElement("style")).type="text/css",v.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",v.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(v),le=!0);for(var Te=0,ce=document.styleSheets.length;Te<ce;Te++)try{document.styleSheets[Te].href&&0===document.styleSheets[Te].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Te].href),R(document.styleSheets[Te].cssRules||document.styleSheets[Te].rules||document.styleSheets[Te].cssText)}catch{}!function W(){for(var Te=X()("[data-responsive-image],[responsive-image]"),ce=0,be=Te.length;ce<be;ce++)Z(Te[ce])}()},this.findElementQueriesElements=function(G){!function J(G){var Te=X(G);for(var ce in T)if(T.hasOwnProperty(ce))for(var be=Te(ce,G),ke=0,Ne=be.length;ke<Ne;ke++)L(be[ke],ce)}(G)},this.update=function(){this.init()}};k.update=function(){k.instance.update()},k.detach=function(v){v.elementQueriesSetupInformation?(v.elementQueriesSensor.detach(),delete v.elementQueriesSetupInformation,delete v.elementQueriesSensor):v.resizeSensorInstance&&(v.resizeSensorInstance.detach(),delete v.resizeSensorInstance)},k.init=function(){k.instance||(k.instance=new k),k.instance.init()};return k.findElementQueriesElements=function(v){k.instance.findElementQueriesElements(v)},k.listen=function(){!function(v){if(document.addEventListener)document.addEventListener("DOMContentLoaded",v,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var T=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(v(),clearInterval(T))},10);else window.onload=v}(k.init)},k})?C.apply(q,b):C)&&(ee.exports=D)},884:function(ee,q,g){"use strict";var C,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(C=function(){if(typeof window>"u")return null;var D=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),S=D.requestAnimationFrame||D.mozRequestAnimationFrame||D.webkitRequestAnimationFrame||function(B){return D.setTimeout(B,20)},k=D.cancelAnimationFrame||D.mozCancelAnimationFrame||D.webkitCancelAnimationFrame||function(B){D.clearTimeout(B)};function _(B,Q){var A=Object.prototype.toString.call(B),L="[object Array]"===A||"[object NodeList]"===A||"[object HTMLCollection]"===A||"[object Object]"===A||typeof jQuery<"u"&&B instanceof jQuery||typeof Elements<"u"&&B instanceof Elements,ae=0,X=B.length;if(L)for(;ae<X;ae++)Q(B[ae]);else Q(B)}function v(B){if(!B.getBoundingClientRect)return{width:B.offsetWidth,height:B.offsetHeight};var Q=B.getBoundingClientRect();return{width:Math.round(Q.width),height:Math.round(Q.height)}}function T(B,Q){Object.keys(Q).forEach(function(A){B.style[A]=Q[A]})}var j=function(B,Q){var A=0;function L(){var J,Z,X=[];this.add=function(W){X.push(W)},this.call=function(W){for(J=0,Z=X.length;J<Z;J++)X[J].call(this,W)},this.remove=function(W){var z=[];for(J=0,Z=X.length;J<Z;J++)X[J]!==W&&z.push(X[J]);X=z},this.length=function(){return X.length}}function ae(X,J){if(X){if(X.resizedAttached)return void X.resizedAttached.add(J);X.resizedAttached=new L,X.resizedAttached.add(J),X.resizeSensor=document.createElement("div"),X.resizeSensor.dir="ltr",X.resizeSensor.className="resize-sensor";var Z={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},W={position:"absolute",left:"0px",top:"0px",transition:"0s"};T(X.resizeSensor,Z);var z=document.createElement("div");z.className="resize-sensor-expand",T(z,Z);var x=document.createElement("div");T(x,W),z.appendChild(x);var N=document.createElement("div");N.className="resize-sensor-shrink",T(N,Z);var R=document.createElement("div");T(R,W),T(R,{width:"200%",height:"200%"}),N.appendChild(R),X.resizeSensor.appendChild(z),X.resizeSensor.appendChild(N),X.appendChild(X.resizeSensor);var le=window.getComputedStyle(X),G=le?le.getPropertyValue("position"):null;"absolute"!==G&&"relative"!==G&&"fixed"!==G&&"sticky"!==G&&(X.style.position="relative");var Te=!1,ce=0,be=v(X),ke=0,Ne=0,Ze=!0;A=0;var Me=function(){if(Ze){if(0===X.offsetWidth&&0===X.offsetHeight)return void(A||(A=S(function(){A=0,Me()})));Ze=!1}var he,Se;Se=X.offsetHeight,x.style.width=(he=X.offsetWidth)+10+"px",x.style.height=Se+10+"px",z.scrollLeft=he+10,z.scrollTop=Se+10,N.scrollLeft=he+10,N.scrollTop=Se+10};X.resizeSensor.resetSensor=Me;var ze=function(){ce=0,Te&&(ke=be.width,Ne=be.height,X.resizedAttached&&X.resizedAttached.call(be))},Ce=function(){be=v(X),(Te=be.width!==ke||be.height!==Ne)&&!ce&&(ce=S(ze)),Me()},je=function(he,Se,tt){he.attachEvent?he.attachEvent("on"+Se,tt):he.addEventListener(Se,tt)};je(z,"scroll",Ce),je(N,"scroll",Ce),A=S(function(){A=0,Me()})}}_(B,function(X){ae(X,Q)}),this.detach=function(X){A||(k(A),A=0),j.detach(B,X)},this.reset=function(){B.resizeSensor.resetSensor()}};if(j.reset=function(B){_(B,function(Q){Q.resizeSensor.resetSensor()})},j.detach=function(B,Q){_(B,function(A){A&&(A.resizedAttached&&"function"==typeof Q&&(A.resizedAttached.remove(Q),A.resizedAttached.length())||A.resizeSensor&&(A.contains(A.resizeSensor)&&A.removeChild(A.resizeSensor),delete A.resizeSensor,delete A.resizedAttached))})},typeof MutationObserver<"u"){var O=new MutationObserver(function(B){for(var Q in B)if(B.hasOwnProperty(Q))for(var A=B[Q].addedNodes,L=0;L<A.length;L++)A[L].resizeSensor&&j.reset(A[L])});document.addEventListener("DOMContentLoaded",function(B){O.observe(document.body,{childList:!0,subtree:!0})})}return j})?C.call(q,g,q,ee):C)&&(ee.exports=b)},2016:ee=>{"use strict";var C,q="object"==typeof Reflect?Reflect:null,g=q&&"function"==typeof q.apply?q.apply:function(z,x,N){return Function.prototype.apply.call(z,x,N)};C=q&&"function"==typeof q.ownKeys?q.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var D=Number.isNaN||function(z){return z!=z};function S(){S.init.call(this)}ee.exports=S,ee.exports.once=function X(W,z){return new Promise(function(x,N){function R(G){W.removeListener(z,le),N(G)}function le(){"function"==typeof W.removeListener&&W.removeListener("error",R),x([].slice.call(arguments))}Z(W,z,le,{once:!0}),"error"!==z&&function J(W,z,x){"function"==typeof W.on&&Z(W,"error",z,x)}(W,R,{once:!0})})},S.EventEmitter=S,S.prototype._events=void 0,S.prototype._eventsCount=0,S.prototype._maxListeners=void 0;var k=10;function _(W){if("function"!=typeof W)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}function v(W){return void 0===W._maxListeners?S.defaultMaxListeners:W._maxListeners}function T(W,z,x,N){var R,le,G;if(_(x),void 0===(le=W._events)?(le=W._events=Object.create(null),W._eventsCount=0):(void 0!==le.newListener&&(W.emit("newListener",z,x.listener?x.listener:x),le=W._events),G=le[z]),void 0===G)G=le[z]=x,++W._eventsCount;else if("function"==typeof G?G=le[z]=N?[x,G]:[G,x]:N?G.unshift(x):G.push(x),(R=v(W))>0&&G.length>R&&!G.warned){G.warned=!0;var Te=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");Te.name="MaxListenersExceededWarning",Te.emitter=W,Te.type=z,Te.count=G.length,function b(W){console&&console.warn&&console.warn(W)}(Te)}return W}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(W,z,x){var N={fired:!1,wrapFn:void 0,target:W,type:z,listener:x},R=j.bind(N);return R.listener=x,N.wrapFn=R,R}function B(W,z,x){var N=W._events;if(void 0===N)return[];var R=N[z];return void 0===R?[]:"function"==typeof R?x?[R.listener||R]:[R]:x?function ae(W){for(var z=new Array(W.length),x=0;x<z.length;++x)z[x]=W[x].listener||W[x];return z}(R):A(R,R.length)}function Q(W){var z=this._events;if(void 0!==z){var x=z[W];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function A(W,z){for(var x=new Array(z),N=0;N<z;++N)x[N]=W[N];return x}function Z(W,z,x,N){if("function"==typeof W.on)N.once?W.once(z,x):W.on(z,x);else{if("function"!=typeof W.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W);W.addEventListener(z,function R(le){N.once&&W.removeEventListener(z,R),x(le)})}}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(W){if("number"!=typeof W||W<0||D(W))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+W+".");k=W}}),S.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(z){if("number"!=typeof z||z<0||D(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},S.prototype.getMaxListeners=function(){return v(this)},S.prototype.emit=function(z){for(var x=[],N=1;N<arguments.length;N++)x.push(arguments[N]);var R="error"===z,le=this._events;if(void 0!==le)R=R&&void 0===le.error;else if(!R)return!1;if(R){var G;if(x.length>0&&(G=x[0]),G instanceof Error)throw G;var Te=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw Te.context=G,Te}var ce=le[z];if(void 0===ce)return!1;if("function"==typeof ce)g(ce,this,x);else{var be=ce.length,ke=A(ce,be);for(N=0;N<be;++N)g(ke[N],this,x)}return!0},S.prototype.on=S.prototype.addListener=function(z,x){return T(this,z,x,!1)},S.prototype.prependListener=function(z,x){return T(this,z,x,!0)},S.prototype.once=function(z,x){return _(x),this.on(z,O(this,z,x)),this},S.prototype.prependOnceListener=function(z,x){return _(x),this.prependListener(z,O(this,z,x)),this},S.prototype.off=S.prototype.removeListener=function(z,x){var N,R,le,G,Te;if(_(x),void 0===(R=this._events))return this;if(void 0===(N=R[z]))return this;if(N===x||N.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete R[z],R.removeListener&&this.emit("removeListener",z,N.listener||x));else if("function"!=typeof N){for(le=-1,G=N.length-1;G>=0;G--)if(N[G]===x||N[G].listener===x){Te=N[G].listener,le=G;break}if(le<0)return this;0===le?N.shift():function L(W,z){for(;z+1<W.length;z++)W[z]=W[z+1];W.pop()}(N,le),1===N.length&&(R[z]=N[0]),void 0!==R.removeListener&&this.emit("removeListener",z,Te||x)}return this},S.prototype.removeAllListeners=function(z){var x,N,R;if(void 0===(N=this._events))return this;if(void 0===N.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==N[z]&&(0==--this._eventsCount?this._events=Object.create(null):delete N[z]),this;if(0===arguments.length){var G,le=Object.keys(N);for(R=0;R<le.length;++R)"removeListener"!==(G=le[R])&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=N[z]))this.removeListener(z,x);else if(void 0!==x)for(R=x.length-1;R>=0;R--)this.removeListener(z,x[R]);return this},S.prototype.listeners=function(z){return B(this,z,!0)},S.prototype.rawListeners=function(z){return B(this,z,!1)},S.listenerCount=function(W,z){return"function"==typeof W.listenerCount?W.listenerCount(z):Q.call(W,z)},S.prototype.listenerCount=Q,S.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]}},7991:(ee,q,g)=>{var C=g(6943),b=g(9151),D=g(2323);function S(B,Q,A){if(!C(B))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!B.hasNode(Q))throw new Error('graphology-shortest-path: the "'+Q+'" source node does not exist in the given graph.');if(!B.hasNode(A))throw new Error('graphology-shortest-path: the "'+A+'" target node does not exist in the given graph.');if((Q=""+Q)==(A=""+A))return[Q];var L=B.inboundNeighbors.bind(B),ae=B.outboundNeighbors.bind(B),X={},J={};X[Q]=null,J[A]=null;var z,x,N,R,le,G,Te,ce,Z=[Q],W=[A],be=!1;e:for(;Z.length&&W.length;)if(Z.length<=W.length){for(z=Z,Z=[],le=0,Te=z.length;le<Te;le++)for(G=0,ce=(N=ae(x=z[le])).length;G<ce;G++)if((R=N[G])in X||(Z.push(R),X[R]=x),R in J){be=!0;break e}}else for(z=W,W=[],le=0,Te=z.length;le<Te;le++)for(x=z[le],N=L(x),G=0,ce=N.length;G<ce;G++)if(R=N[G],R in J||(W.push(R),J[R]=x),R in X){be=!0;break e}if(!be)return null;for(var ke=[];R;)ke.unshift(R),R=X[R];for(R=J[ke[ke.length-1]];R;)ke.push(R),R=J[R];return ke.length?ke:null}function k(B,Q){if(!C(B))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!B.hasNode(Q))throw new Error('graphology-shortest-path: the "'+Q+'" source node does not exist in the given graph.');var ae,X,J,Z,W,z,A={},L={};for(A[Q=""+Q]=!0,L[Q]=[Q];Object.keys(A).length;)for(J in ae=A,A={},ae)for(W=0,z=(X=B.outboundNeighbors(J)).length;W<z;W++)L[Z=X[W]]||(L[Z]=L[J].concat(Z),A[Z]=!0);return L}function _(B,Q,A){if(!C(Q))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!Q.hasNode(A))throw new Error('graphology-shortest-path: the "'+A+'" source node does not exist in the given graph.');A=""+A;var L=new Set,ae={},X=0;ae[A]=0;for(var Z,W,z,J=[A];0!==J.length;){var x=[];for(Z=0,W=J.length;Z<W;Z++)!L.has(z=J[Z])&&(L.add(z),D(x,Q[B](z)),ae[z]=X);X++,J=x}return ae}var v=_.bind(null,"outboundNeighbors"),T=_.bind(null,"neighbors");function j(B,Q,A){return arguments.length<3?k(B,Q):S(B,Q,A)}j.bidirectional=S,j.singleSource=k,j.singleSourceLength=v,j.undirectedSingleSourceLength=T,j.brandes=function O(B,Q){Q=""+Q;var J,Z,W,z,x,N,R,le,G,A=[],L={},ae={},X=B.nodes();for(N=0,le=X.length;N<le;N++)L[z=X[N]]=[],ae[z]=0;var Te={};ae[Q]=1,Te[Q]=0;for(var ce=b.of(Q);ce.size;)for(z=ce.dequeue(),A.push(z),J=Te[z],Z=ae[z],R=0,G=(W=B.outboundNeighbors(z)).length;R<G;R++)(x=W[R])in Te||(ce.enqueue(x),Te[x]=J+1),Te[x]===J+1&&(ae[x]+=Z,L[x].push(z));return[A,L,ae]},ee.exports=j},6943:ee=>{ee.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(ee){ee.exports=function(){"use strict";function q(ve){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(we){return typeof we}:function(we){return we&&"function"==typeof Symbol&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we})(ve)}function g(ve,we){ve.prototype=Object.create(we.prototype),ve.prototype.constructor=ve,b(ve,we)}function C(ve){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(we){return we.__proto__||Object.getPrototypeOf(we)})(ve)}function b(ve,we){return(b=Object.setPrototypeOf||function(ue,V){return ue.__proto__=V,ue})(ve,we)}function S(ve,we,ue){return(S=function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(V,ne,_e){var Pe=[null];Pe.push.apply(Pe,ne);var De=new(Function.bind.apply(V,Pe));return _e&&b(De,_e.prototype),De}).apply(null,arguments)}function k(ve){var we="function"==typeof Map?new Map:void 0;return(k=function(ue){if(null===ue||-1===Function.toString.call(ue).indexOf("[native code]"))return ue;if("function"!=typeof ue)throw new TypeError("Super expression must either be null or a function");if(void 0!==we){if(we.has(ue))return we.get(ue);we.set(ue,ne)}function ne(){return S(ue,arguments,C(this).constructor)}return ne.prototype=Object.create(ue.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),b(ne,ue)})(ve)}function _(ve){if(void 0===ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}var v=function(){for(var ve=arguments[0],we=1,ue=arguments.length;we<ue;we++)if(arguments[we])for(var V in arguments[we])ve[V]=arguments[we][V];return ve};function T(ve,we,ue,V){var ne=ve._nodes.get(we),_e=null;return ne?_e="mixed"===V?ne.out&&ne.out[ue]||ne.undirected&&ne.undirected[ue]:"directed"===V?ne.out&&ne.out[ue]:ne.undirected&&ne.undirected[ue]:_e}function O(ve){return"object"===q(ve)&&null!==ve&&ve.constructor===Object}function B(ve){var we;for(we in ve)return!1;return!0}function Q(ve,we,ue){Object.defineProperty(ve,we,{enumerable:!1,configurable:!1,writable:!0,value:ue})}function A(ve,we,ue){var V={enumerable:!0,configurable:!0};"function"==typeof ue?V.get=ue:(V.value=ue,V.writable=!1),Object.defineProperty(ve,we,V)}function L(ve){return!(!O(ve)||ve.attributes&&!Array.isArray(ve.attributes))}"function"==typeof Object.assign&&(v=Object.assign);var ae,X={exports:{}},J="object"==typeof Reflect?Reflect:null,Z=J&&"function"==typeof J.apply?J.apply:function(ve,we,ue){return Function.prototype.apply.call(ve,we,ue)};ae=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(ve){return Object.getOwnPropertyNames(ve).concat(Object.getOwnPropertySymbols(ve))}:function(ve){return Object.getOwnPropertyNames(ve)};var W=Number.isNaN||function(ve){return ve!=ve};function z(){z.init.call(this)}X.exports=z,X.exports.once=function(ve,we){return new Promise(function(ue,V){function ne(Pe){ve.removeListener(we,_e),V(Pe)}function _e(){"function"==typeof ve.removeListener&&ve.removeListener("error",ne),ue([].slice.call(arguments))}var Pe;Ne(ve,we,_e,{once:!0}),"error"!==we&&("function"==typeof(Pe=ve).on&&Ne(Pe,"error",ne,{once:!0}))})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var x=10;function N(ve){if("function"!=typeof ve)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ve)}function R(ve){return void 0===ve._maxListeners?z.defaultMaxListeners:ve._maxListeners}function le(ve,we,ue,V){var ne,_e,Pe;if(N(ue),void 0===(_e=ve._events)?(_e=ve._events=Object.create(null),ve._eventsCount=0):(void 0!==_e.newListener&&(ve.emit("newListener",we,ue.listener?ue.listener:ue),_e=ve._events),Pe=_e[we]),void 0===Pe)Pe=_e[we]=ue,++ve._eventsCount;else if("function"==typeof Pe?Pe=_e[we]=V?[ue,Pe]:[Pe,ue]:V?Pe.unshift(ue):Pe.push(ue),(ne=R(ve))>0&&Pe.length>ne&&!Pe.warned){Pe.warned=!0;var st=new Error("Possible EventEmitter memory leak detected. "+Pe.length+" "+String(we)+" listeners added. Use emitter.setMaxListeners() to increase limit");st.name="MaxListenersExceededWarning",st.emitter=ve,st.type=we,st.count=Pe.length,console&&console.warn&&console.warn(st)}return ve}function G(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Te(ve,we,ue){var V={fired:!1,wrapFn:void 0,target:ve,type:we,listener:ue},ne=G.bind(V);return ne.listener=ue,V.wrapFn=ne,ne}function ce(ve,we,ue){var V=ve._events;if(void 0===V)return[];var ne=V[we];return void 0===ne?[]:"function"==typeof ne?ue?[ne.listener||ne]:[ne]:ue?function(_e){for(var Pe=new Array(_e.length),De=0;De<Pe.length;++De)Pe[De]=_e[De].listener||_e[De];return Pe}(ne):ke(ne,ne.length)}function be(ve){var we=this._events;if(void 0!==we){var ue=we[ve];if("function"==typeof ue)return 1;if(void 0!==ue)return ue.length}return 0}function ke(ve,we){for(var ue=new Array(we),V=0;V<we;++V)ue[V]=ve[V];return ue}function Ne(ve,we,ue,V){if("function"==typeof ve.on)V.once?ve.once(we,ue):ve.on(we,ue);else{if("function"!=typeof ve.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ve);ve.addEventListener(we,function ne(_e){V.once&&ve.removeEventListener(we,ne),ue(_e)})}}function Ze(ve){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ve}),this.done=!1}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(ve){if("number"!=typeof ve||ve<0||W(ve))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ve+".");x=ve}}),z.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(ve){if("number"!=typeof ve||ve<0||W(ve))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ve+".");return this._maxListeners=ve,this},z.prototype.getMaxListeners=function(){return R(this)},z.prototype.emit=function(ve){for(var we=[],ue=1;ue<arguments.length;ue++)we.push(arguments[ue]);var V="error"===ve,ne=this._events;if(void 0!==ne)V=V&&void 0===ne.error;else if(!V)return!1;if(V){var _e;if(we.length>0&&(_e=we[0]),_e instanceof Error)throw _e;var Pe=new Error("Unhandled error."+(_e?" ("+_e.message+")":""));throw Pe.context=_e,Pe}var De=ne[ve];if(void 0===De)return!1;if("function"==typeof De)Z(De,this,we);else{var st=De.length,Tt=ke(De,st);for(ue=0;ue<st;++ue)Z(Tt[ue],this,we)}return!0},z.prototype.addListener=function(ve,we){return le(this,ve,we,!1)},z.prototype.on=z.prototype.addListener,z.prototype.prependListener=function(ve,we){return le(this,ve,we,!0)},z.prototype.once=function(ve,we){return N(we),this.on(ve,Te(this,ve,we)),this},z.prototype.prependOnceListener=function(ve,we){return N(we),this.prependListener(ve,Te(this,ve,we)),this},z.prototype.removeListener=function(ve,we){var ue,V,ne,_e,Pe;if(N(we),void 0===(V=this._events))return this;if(void 0===(ue=V[ve]))return this;if(ue===we||ue.listener===we)0==--this._eventsCount?this._events=Object.create(null):(delete V[ve],V.removeListener&&this.emit("removeListener",ve,ue.listener||we));else if("function"!=typeof ue){for(ne=-1,_e=ue.length-1;_e>=0;_e--)if(ue[_e]===we||ue[_e].listener===we){Pe=ue[_e].listener,ne=_e;break}if(ne<0)return this;0===ne?ue.shift():function(De,st){for(;st+1<De.length;st++)De[st]=De[st+1];De.pop()}(ue,ne),1===ue.length&&(V[ve]=ue[0]),void 0!==V.removeListener&&this.emit("removeListener",ve,Pe||we)}return this},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(ve){var we,ue,V;if(void 0===(ue=this._events))return this;if(void 0===ue.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ue[ve]&&(0==--this._eventsCount?this._events=Object.create(null):delete ue[ve]),this;if(0===arguments.length){var ne,_e=Object.keys(ue);for(V=0;V<_e.length;++V)"removeListener"!==(ne=_e[V])&&this.removeAllListeners(ne);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(we=ue[ve]))this.removeListener(ve,we);else if(void 0!==we)for(V=we.length-1;V>=0;V--)this.removeListener(ve,we[V]);return this},z.prototype.listeners=function(ve){return ce(this,ve,!0)},z.prototype.rawListeners=function(ve){return ce(this,ve,!1)},z.listenerCount=function(ve,we){return"function"==typeof ve.listenerCount?ve.listenerCount(we):be.call(ve,we)},z.prototype.listenerCount=be,z.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},Ze.prototype.next=function(){if(this.done)return{done:!0};var ve=this._next();return ve.done&&(this.done=!0),ve},typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this}),Ze.of=function(){var ve=arguments,we=ve.length,ue=0;return new Ze(function(){return ue>=we?{done:!0}:{done:!1,value:ve[ue++]}})},Ze.empty=function(){var ve=new Ze(null);return ve.done=!0,ve},Ze.is=function(ve){return ve instanceof Ze||"object"==typeof ve&&null!==ve&&"function"==typeof ve.next};var Ke=Ze,Me=function(ve,we){for(var ue,V=arguments.length>1?we:1/0,ne=V!==1/0?new Array(V):[],_e=0;;){if(_e===V)return ne;if((ue=ve.next()).done)return _e!==we?ne.slice(0,_e):ne;ne[_e++]=ue.value}},ze=function(ve){function we(ue,V){var ne;return(ne=ve.call(this)||this).name="GraphError",ne.message=ue||"",ne.data=V||{},ne}return g(we,ve),we}(k(Error)),Ce=function(ve){function we(ue,V){var ne;return(ne=ve.call(this,ue,V)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ne),we.prototype.constructor),ne}return g(we,ve),we}(ze),je=function(ve){function we(ue,V){var ne;return(ne=ve.call(this,ue,V)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ne),we.prototype.constructor),ne}return g(we,ve),we}(ze),he=function(ve){function we(ue,V){var ne;return(ne=ve.call(this,ue,V)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(ne),we.prototype.constructor),ne}return g(we,ve),we}(ze);function Se(ve,we){this.key=ve,this.attributes=we,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function tt(ve,we){this.key=ve,this.attributes=we,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function ft(ve,we){this.key=ve,this.attributes=we,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function qe(ve,we,ue,V,ne,_e){this.key=we,this.attributes=_e,this.undirected=ve,this.source=V,this.target=ne,this.generatedKey=ue}function me(ve,we,ue,V,ne,_e,Pe){var De,st,Tt="out",Nt="in";if(we&&(Tt=Nt="undirected"),ve.multi){if(void 0===(st=(De=_e[Tt])[ne])&&(De[ne]=st=new Set),st.add(ue),V===ne&&we)return;void 0===(De=Pe[Nt])[V]&&(De[V]=st)}else{if(_e[Tt][ne]=ue,V===ne&&we)return;Pe[Nt][V]=ue}}tt.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},ft.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var I=[{name:function(ve){return"get".concat(ve,"Attribute")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne){var _e;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+V,De=""+ne;if(ne=arguments[2],!(_e=T(this,Pe,De,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(Pe,'" - "').concat(De,'").'))}else if(!(_e=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==ue&&_e.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return _e.attributes[ne]}}},{name:function(ve){return"get".concat(ve,"Attributes")},attacher:function(ve,we,ue){ve.prototype[we]=function(V){var ne;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _e=""+V,Pe=""+arguments[1];if(!(ne=T(this,_e,Pe,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(_e,'" - "').concat(Pe,'").'))}else if(!(ne=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==ue&&ne.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return ne.attributes}}},{name:function(ve){return"has".concat(ve,"Attribute")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne){var _e;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+V,De=""+ne;if(ne=arguments[2],!(_e=T(this,Pe,De,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(Pe,'" - "').concat(De,'").'))}else if(!(_e=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==ue&&_e.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return _e.attributes.hasOwnProperty(ne)}}},{name:function(ve){return"set".concat(ve,"Attribute")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne,_e){var Pe;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+V,st=""+ne;if(ne=arguments[2],_e=arguments[3],!(Pe=T(this,De,st,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(De,'" - "').concat(st,'").'))}else if(!(Pe=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==ue&&Pe.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return Pe.attributes[ne]=_e,this.emit("edgeAttributesUpdated",{key:Pe.key,type:"set",attributes:Pe.attributes,name:ne}),this}}},{name:function(ve){return"update".concat(ve,"Attribute")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne,_e){var Pe;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+V,st=""+ne;if(ne=arguments[2],_e=arguments[3],!(Pe=T(this,De,st,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(De,'" - "').concat(st,'").'))}else if(!(Pe=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if("function"!=typeof _e)throw new Ce("Graph.".concat(we,": updater should be a function."));if("mixed"!==ue&&Pe.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return Pe.attributes[ne]=_e(Pe.attributes[ne]),this.emit("edgeAttributesUpdated",{key:Pe.key,type:"set",attributes:Pe.attributes,name:ne}),this}}},{name:function(ve){return"remove".concat(ve,"Attribute")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne){var _e;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+V,De=""+ne;if(ne=arguments[2],!(_e=T(this,Pe,De,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(Pe,'" - "').concat(De,'").'))}else if(!(_e=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==ue&&_e.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return delete _e.attributes[ne],this.emit("edgeAttributesUpdated",{key:_e.key,type:"remove",attributes:_e.attributes,name:ne}),this}}},{name:function(ve){return"replace".concat(ve,"Attributes")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne){var _e;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+V,De=""+ne;if(ne=arguments[2],!(_e=T(this,Pe,De,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(Pe,'" - "').concat(De,'").'))}else if(!(_e=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if(!O(ne))throw new Ce("Graph.".concat(we,": provided attributes are not a plain object."));if("mixed"!==ue&&_e.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return _e.attributes=ne,this.emit("edgeAttributesUpdated",{key:_e.key,type:"replace",attributes:_e.attributes}),this}}},{name:function(ve){return"merge".concat(ve,"Attributes")},attacher:function(ve,we,ue){ve.prototype[we]=function(V,ne){var _e;if("mixed"!==this.type&&"mixed"!==ue&&ue!==this.type)throw new he("Graph.".concat(we,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new he("Graph.".concat(we,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+V,De=""+ne;if(ne=arguments[2],!(_e=T(this,Pe,De,ue)))throw new je("Graph.".concat(we,': could not find an edge for the given path ("').concat(Pe,'" - "').concat(De,'").'))}else if(!(_e=this._edges.get(V=""+V)))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" edge in the graph.'));if(!O(ne))throw new Ce("Graph.".concat(we,": provided attributes are not a plain object."));if("mixed"!==ue&&_e.undirected!==("undirected"===ue))throw new je("Graph.".concat(we,': could not find the "').concat(V,'" ').concat(ue," edge in the graph."));return v(_e.attributes,ne),this.emit("edgeAttributesUpdated",{key:_e.key,type:"merge",attributes:_e.attributes,data:ne}),this}}}],se=Ke,ie=function(){var ve,we=arguments,ue=-1;return new se(function V(){if(!ve){if(++ue>=we.length)return{done:!0};ve=we[ue]}var ne=ve.next();return ne.done?(ve=null,V()):ne})},He=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Je(ve,we){for(var ue in we)ve.push(we[ue].key)}function fe(ve,we){for(var ue in we)we[ue].forEach(function(V){return ve.push(V.key)})}function re(ve,we,ue){for(var V in ve)if(V!==ue){var ne=ve[V];we(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey)}}function $(ve,we,ue){for(var V in ve)V!==ue&&ve[V].forEach(function(ne){return we(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey)})}function P(ve,we,ue){for(var V in ve)if(V!==ue){var ne=ve[V];if(we(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey))return!0}return!1}function U(ve,we,ue){var V,ne,_e,Pe,De;for(var st in ve)if(st!==ue)for(V=ve[st].values();!0!==(ne=V.next()).done;)if(Pe=(_e=ne.value).source,we(_e.key,_e.attributes,Pe.key,(De=_e.target).key,Pe.attributes,De.attributes,_e.undirected,_e.generatedKey))return!0;return!1}function pe(ve,we){var ue=Object.keys(ve),V=ue.length,ne=null,_e=0;return new Ke(function Pe(){var De;if(ne){var st=ne.next();if(st.done)return ne=null,_e++,Pe();De=st.value}else{if(_e>=V)return{done:!0};var Tt=ue[_e];if(Tt===we)return _e++,Pe();if((De=ve[Tt])instanceof Set)return ne=De.values(),Pe();_e++}return{done:!1,value:[De.key,De.attributes,De.source.key,De.target.key,De.source.attributes,De.target.attributes]}})}function $e(ve,we,ue){var V=we[ue];V&&ve.push(V.key)}function ye(ve,we,ue){var V=we[ue];V&&V.forEach(function(ne){return ve.push(ne.key)})}function Ve(ve,we,ue){var V=ve[we];if(V){var ne=V.source,_e=V.target;ue(V.key,V.attributes,ne.key,_e.key,ne.attributes,_e.attributes,V.undirected,V.generatedKey)}}function rt(ve,we,ue){var V=ve[we];V&&V.forEach(function(ne){return ue(ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey)})}function _t(ve,we,ue){var V=ve[we];if(V){var ne=V.source,_e=V.target;return ue(V.key,V.attributes,ne.key,_e.key,ne.attributes,_e.attributes,V.undirected,V.generatedKey)}}function At(ve,we,ue){var V=ve[we];if(V){for(var ne,_e,Pe=V.values();!0!==(ne=Pe.next()).done;)if(ue((_e=ne.value).key,_e.attributes,_e.source.key,_e.target.key,_e.source.attributes,_e.target.attributes,_e.undirected,_e.generatedKey))return!0;return!1}}function wt(ve,we){var ue=ve[we];if(ue instanceof Set){var V=ue.values();return new Ke(function(){var ne=V.next();if(ne.done)return ne;var _e=ne.value;return{done:!1,value:[_e.key,_e.attributes,_e.source.key,_e.target.key,_e.source.attributes,_e.target.attributes]}})}return Ke.of([ue.key,ue.attributes,ue.source.key,ue.target.key,ue.source.attributes,ue.target.attributes])}var jn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Yi(ve,we){if(void 0!==we)for(var ue in we)ve.add(ue)}function mr(ve,we,ue){for(var V in we){var ne=we[V];ne instanceof Set&&(ne=ne.values().next().value);var _e=ne.source,De=_e===ve?ne.target:_e;ue(De.key,De.attributes)}}function Lo(ve,we,ue,V){for(var ne in ue){var _e=ue[ne];_e instanceof Set&&(_e=_e.values().next().value);var Pe=_e.source,st=Pe===we?_e.target:Pe;ve.has(st.key)||(ve.add(st.key),V(st.key,st.attributes))}}function Bo(ve,we,ue){for(var V in we){var ne=we[V];ne instanceof Set&&(ne=ne.values().next().value);var _e=ne.source,De=_e===ve?ne.target:_e;if(ue(De.key,De.attributes))return!0}return!1}function zi(ve,we,ue,V){for(var ne in ue){var _e=ue[ne];_e instanceof Set&&(_e=_e.values().next().value);var Pe=_e.source,st=Pe===we?_e.target:Pe;if(!ve.has(st.key)&&(ve.add(st.key),V(st.key,st.attributes)))return!0}return!1}function jo(ve,we){var ue=Object.keys(we),V=ue.length,ne=0;return new Ke(function(){if(ne>=V)return{done:!0};var _e=we[ue[ne++]];_e instanceof Set&&(_e=_e.values().next().value);var Pe=_e.source,st=Pe===ve?_e.target:Pe;return{done:!1,value:[st.key,st.attributes]}})}function Fs(ve,we,ue){var V=Object.keys(ue),ne=V.length,_e=0;return new Ke(function Pe(){if(_e>=ne)return{done:!0};var De=ue[V[_e++]];De instanceof Set&&(De=De.values().next().value);var st=De.source,Nt=st===we?De.target:st;return ve.has(Nt.key)?Pe():(ve.add(Nt.key),{done:!1,value:[Nt.key,Nt.attributes]})})}function We(ve,we,ue){for(var V,ne,_e,Pe,De,st,Tt,Nt=we._nodes.values(),zt=we.type;!0!==(V=Nt.next()).done;){if(ne=V.value,"undirected"!==zt)for(_e in Pe=ne.out)if(st=(De=Pe[_e]).target,Tt=ue(ne.key,st.key,ne.attributes,st.attributes,De.key,De.attributes,De.undirected,De.generatedKey),ve&&Tt)return;if("directed"!==zt)for(_e in Pe=ne.undirected)if((st=(De=Pe[_e]).target).key!==_e&&(st=De.source),Tt=ue(ne.key,st.key,ne.attributes,st.attributes,De.key,De.attributes,De.undirected,De.generatedKey),ve&&Tt)return}}function Ye(ve,we,ue){for(var V,ne,_e,Pe,De,st,Tt,Nt,zt,cn=we._nodes.values(),mn=we.type;!0!==(V=cn.next()).done;){if(ne=V.value,"undirected"!==mn)for(_e in st=ne.out)for(Pe=st[_e].values();!0!==(De=Pe.next()).done;)if(Nt=(Tt=De.value).target,zt=ue(ne.key,Nt.key,ne.attributes,Nt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),ve&&zt)return;if("directed"!==mn)for(_e in st=ne.undirected)for(Pe=st[_e].values();!0!==(De=Pe.next()).done;)if((Nt=(Tt=De.value).target).key!==_e&&(Nt=Tt.source),zt=ue(ne.key,Nt.key,ne.attributes,Nt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),ve&&zt)return}}function Wt(ve,we){var ue={key:ve};return B(we.attributes)||(ue.attributes=v({},we.attributes)),ue}function $t(ve,we){var ue={source:we.source.key,target:we.target.key};return we.generatedKey||(ue.key=ve),B(we.attributes)||(ue.attributes=v({},we.attributes)),we.undirected&&(ue.undirected=!0),ue}var Yt=new Set(["directed","undirected","mixed"]),Sa=new Set(["domain","_events","_eventsCount","_maxListeners"]),Li={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ca(ve,we,ue){var V=new ve.NodeDataClass(we,ue);return ve._nodes.set(we,V),ve.emit("nodeAdded",{key:we,attributes:ue}),V}function ki(ve,we,ue,V,ne,_e,Pe,De){if(!V&&"undirected"===ve.type)throw new he("Graph.".concat(we,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===ve.type)throw new he("Graph.".concat(we,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(De&&!O(De))throw new Ce("Graph.".concat(we,': invalid attributes. Expecting an object but got "').concat(De,'"'));if(_e=""+_e,Pe=""+Pe,De=De||{},!ve.allowSelfLoops&&_e===Pe)throw new he("Graph.".concat(we,': source & target are the same ("').concat(_e,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var st=ve._nodes.get(_e),Tt=ve._nodes.get(Pe);if(!st)throw new je("Graph.".concat(we,': source node "').concat(_e,'" not found.'));if(!Tt)throw new je("Graph.".concat(we,': target node "').concat(Pe,'" not found.'));var Nt={key:null,undirected:V,source:_e,target:Pe,attributes:De};if(ue&&(ne=ve._edgeKeyGenerator(Nt)),ve._edges.has(ne=""+ne))throw new he("Graph.".concat(we,': the "').concat(ne,'" edge already exists in the graph.'));if(!ve.multi&&(V?void 0!==st.undirected[Pe]:void 0!==st.out[Pe]))throw new he("Graph.".concat(we,': an edge linking "').concat(_e,'" to "').concat(Pe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var zt=new qe(V,ne,ue,st,Tt,De);return ve._edges.set(ne,zt),_e===Pe?V?(st.undirectedSelfLoops++,ve._undirectedSelfLoopCount++):(st.directedSelfLoops++,ve._directedSelfLoopCount++):V?(st.undirectedDegree++,Tt.undirectedDegree++):(st.outDegree++,Tt.inDegree++),me(ve,V,zt,_e,Pe,st,Tt),V?ve._undirectedSize++:ve._directedSize++,Nt.key=ne,ve.emit("edgeAdded",Nt),ne}function bi(ve,we,ue,V,ne,_e,Pe,De,st){if(!V&&"undirected"===ve.type)throw new he("Graph.".concat(we,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===ve.type)throw new he("Graph.".concat(we,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(De)if(st){if("function"!=typeof De)throw new Ce("Graph.".concat(we,': invalid updater function. Expecting a function but got "').concat(De,'"'))}else if(!O(De))throw new Ce("Graph.".concat(we,': invalid attributes. Expecting an object but got "').concat(De,'"'));var Tt;if(_e=""+_e,Pe=""+Pe,st&&(Tt=De,De=void 0),!ve.allowSelfLoops&&_e===Pe)throw new he("Graph.".concat(we,': source & target are the same ("').concat(_e,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Nt,zt,cn=ve._nodes.get(_e),mn=ve._nodes.get(Pe);if(!ue&&(Nt=ve._edges.get(ne))){if(Nt.source.key!==_e||Nt.target.key!==Pe||V&&(Nt.source.key!==Pe||Nt.target.key!==_e))throw new he("Graph.".concat(we,': inconsistency detected when attempting to merge the "').concat(ne,'" edge with "').concat(_e,'" source & "').concat(Pe,'" target vs. ("').concat(Nt.source.key,'", "').concat(Nt.target.key,'").'));zt=Nt}if(zt||ve.multi||!cn||(zt=V?cn.undirected[Pe]:cn.out[Pe]),zt)return(st?Tt:De)?(st?(zt.attributes=Tt(zt.attributes),ve.emit("edgeAttributesUpdated",{type:"replace",key:zt.key,attributes:zt.attributes})):(v(zt.attributes,De),ve.emit("edgeAttributesUpdated",{type:"merge",key:zt.key,attributes:zt.attributes,data:De})),zt.key):zt.key;De=De||{},st&&Tt&&(De=Tt(De));var zr={key:null,undirected:V,source:_e,target:Pe,attributes:De};if(ue&&(ne=ve._edgeKeyGenerator(zr)),ve._edges.has(ne=""+ne))throw new he("Graph.".concat(we,': the "').concat(ne,'" edge already exists in the graph.'));return cn||(cn=Ca(ve,_e,{}),_e===Pe&&(mn=cn)),mn||(mn=Ca(ve,Pe,{})),Nt=new qe(V,ne,ue,cn,mn,De),ve._edges.set(ne,Nt),_e===Pe?V?(cn.undirectedSelfLoops++,ve._undirectedSelfLoopCount++):(cn.directedSelfLoops++,ve._directedSelfLoopCount++):V?(cn.undirectedDegree++,mn.undirectedDegree++):(cn.outDegree++,mn.inDegree++),me(ve,V,Nt,_e,Pe,cn,mn),V?ve._undirectedSize++:ve._directedSize++,zr.key=ne,ve.emit("edgeAdded",zr),ne}var ve,Ai=function(ve){function we(V){var ne;if(ne=ve.call(this)||this,(V=v({},Li,V)).edgeKeyGenerator&&"function"!=typeof V.edgeKeyGenerator)throw new Ce("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(V.edgeKeyGenerator,'".'));if("boolean"!=typeof V.multi)throw new Ce("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(V.multi,'".'));if(!Yt.has(V.type))throw new Ce('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(V.type,'".'));if("boolean"!=typeof V.allowSelfLoops)throw new Ce("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(V.allowSelfLoops,'".'));var _e,Pe="mixed"===V.type?Se:"directed"===V.type?tt:ft;return Q(_(ne),"NodeDataClass",Pe),Q(_(ne),"_attributes",{}),Q(_(ne),"_nodes",new Map),Q(_(ne),"_edges",new Map),Q(_(ne),"_directedSize",0),Q(_(ne),"_undirectedSize",0),Q(_(ne),"_directedSelfLoopCount",0),Q(_(ne),"_undirectedSelfLoopCount",0),Q(_(ne),"_edgeKeyGenerator",V.edgeKeyGenerator||(_e=0,function(){return _e++})),Q(_(ne),"_options",V),Sa.forEach(function(De){return Q(_(ne),De,ne[De])}),A(_(ne),"order",function(){return ne._nodes.size}),A(_(ne),"size",function(){return ne._edges.size}),A(_(ne),"directedSize",function(){return ne._directedSize}),A(_(ne),"undirectedSize",function(){return ne._undirectedSize}),A(_(ne),"selfLoopCount",function(){return ne._directedSelfLoopCount+ne._undirectedSelfLoopCount}),A(_(ne),"directedSelfLoopCount",function(){return ne._directedSelfLoopCount}),A(_(ne),"undirectedSelfLoopCount",function(){return ne._undirectedSelfLoopCount}),A(_(ne),"multi",ne._options.multi),A(_(ne),"type",ne._options.type),A(_(ne),"allowSelfLoops",ne._options.allowSelfLoops),A(_(ne),"implementation",function(){return"graphology"}),ne}g(we,ve);var ue=we.prototype;return ue.hasNode=function(V){return this._nodes.has(""+V)},ue.hasDirectedEdge=function(V,ne){if("undirected"===this.type)return!1;if(1===arguments.length){var Pe=this._edges.get(""+V);return!!Pe&&!Pe.undirected}if(2===arguments.length){ne=""+ne;var De=this._nodes.get(V=""+V);if(!De)return!1;var st=De.out[ne];return!(!st||this.multi&&!st.size)}throw new Ce("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ue.hasUndirectedEdge=function(V,ne){if("directed"===this.type)return!1;if(1===arguments.length){var Pe=this._edges.get(""+V);return!!Pe&&Pe.undirected}if(2===arguments.length){ne=""+ne;var De=this._nodes.get(V=""+V);if(!De)return!1;var st=De.undirected[ne];return!(!st||this.multi&&!st.size)}throw new Ce("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ue.hasEdge=function(V,ne){if(1===arguments.length)return this._edges.has(""+V);if(2===arguments.length){ne=""+ne;var Pe=this._nodes.get(V=""+V);if(!Pe)return!1;var De=void 0!==Pe.out&&Pe.out[ne];return De||(De=void 0!==Pe.undirected&&Pe.undirected[ne]),!(!De||this.multi&&!De.size)}throw new Ce("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ue.directedEdge=function(V,ne){if("undirected"!==this.type){if(V=""+V,ne=""+ne,this.multi)throw new he("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var _e=this._nodes.get(V);if(!_e)throw new je('Graph.directedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new je('Graph.directedEdge: could not find the "'.concat(ne,'" target node in the graph.'));var Pe=_e.out&&_e.out[ne]||void 0;return Pe?Pe.key:void 0}},ue.undirectedEdge=function(V,ne){if("directed"!==this.type){if(V=""+V,ne=""+ne,this.multi)throw new he("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var _e=this._nodes.get(V);if(!_e)throw new je('Graph.undirectedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new je('Graph.undirectedEdge: could not find the "'.concat(ne,'" target node in the graph.'));var Pe=_e.undirected&&_e.undirected[ne]||void 0;return Pe?Pe.key:void 0}},ue.edge=function(V,ne){if(this.multi)throw new he("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");ne=""+ne;var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.edge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new je('Graph.edge: could not find the "'.concat(ne,'" target node in the graph.'));var Pe=_e.out&&_e.out[ne]||_e.undirected&&_e.undirected[ne]||void 0;if(Pe)return Pe.key},ue.inDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Ce('Graph.inDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.inDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:_e.inDegree+(ne?_e.directedSelfLoops:0)},ue.outDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Ce('Graph.outDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.outDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:_e.outDegree+(ne?_e.directedSelfLoops:0)},ue.directedDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Ce('Graph.directedDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.directedDegree: could not find the "'.concat(V,'" node in the graph.'));if("undirected"===this.type)return 0;var Pe=ne?_e.directedSelfLoops:0;return _e.inDegree+Pe+(_e.outDegree+Pe)},ue.undirectedDegree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Ce('Graph.undirectedDegree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.undirectedDegree: could not find the "'.concat(V,'" node in the graph.'));return"directed"===this.type?0:_e.undirectedDegree+2*(ne?_e.undirectedSelfLoops:0)},ue.degree=function(V){var ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ne)throw new Ce('Graph.degree: Expecting a boolean but got "'.concat(ne,'" for the second parameter (allowing self-loops to be counted).'));var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.degree: could not find the "'.concat(V,'" node in the graph.'));var Pe=0,De=0;return"directed"!==this.type&&(ne&&(De=_e.undirectedSelfLoops),Pe+=_e.undirectedDegree+2*De),"undirected"!==this.type&&(ne&&(De=_e.directedSelfLoops),Pe+=_e.inDegree+_e.outDegree+2*De),Pe},ue.source=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.source: could not find the "'.concat(V,'" edge in the graph.'));return ne.source.key},ue.target=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.target: could not find the "'.concat(V,'" edge in the graph.'));return ne.target.key},ue.extremities=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.extremities: could not find the "'.concat(V,'" edge in the graph.'));return[ne.source.key,ne.target.key]},ue.opposite=function(V,ne){V=""+V;var _e=this._edges.get(ne=""+ne);if(!_e)throw new je('Graph.opposite: could not find the "'.concat(ne,'" edge in the graph.'));var Pe=_e.source.key,De=_e.target.key;if(V!==Pe&&V!==De)throw new je('Graph.opposite: the "'.concat(V,'" node is not attached to the "').concat(ne,'" edge (').concat(Pe,", ").concat(De,")."));return V===Pe?De:Pe},ue.hasExtremity=function(V,ne){ne=""+ne;var _e=this._edges.get(V=""+V);if(!_e)throw new je('Graph.hasExtremity: could not find the "'.concat(V,'" edge in the graph.'));return _e.source.key===ne||_e.target.key===ne},ue.isUndirected=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.isUndirected: could not find the "'.concat(V,'" edge in the graph.'));return ne.undirected},ue.isDirected=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.isDirected: could not find the "'.concat(V,'" edge in the graph.'));return!ne.undirected},ue.isSelfLoop=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.isSelfLoop: could not find the "'.concat(V,'" edge in the graph.'));return ne.source===ne.target},ue.hasGeneratedKey=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.hasGeneratedKey: could not find the "'.concat(V,'" edge in the graph.'));return ne.generatedKey},ue.addNode=function(V,ne){return function(_e,Pe,De){if(De&&!O(De))throw new Ce('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(De,'"'));if(De=De||{},_e._nodes.has(Pe=""+Pe))throw new he('Graph.addNode: the "'.concat(Pe,'" node already exist in the graph.'));var st=new _e.NodeDataClass(Pe,De);return _e._nodes.set(Pe,st),_e.emit("nodeAdded",{key:Pe,attributes:De}),st}(this,V,ne).key},ue.mergeNode=function(V,ne){if(ne&&!O(ne))throw new Ce('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(ne,'"'));ne=ne||{};var _e=this._nodes.get(V=""+V);return _e?(ne&&(v(_e.attributes,ne),this.emit("nodeAttributesUpdated",{type:"merge",key:V,attributes:_e.attributes,data:ne})),V):(_e=new this.NodeDataClass(V,ne),this._nodes.set(V,_e),this.emit("nodeAdded",{key:V,attributes:ne}),V)},ue.updateNode=function(V,ne){if(ne&&"function"!=typeof ne)throw new Ce('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(ne,'"'));var _e=this._nodes.get(V=""+V);if(_e)return ne&&(_e.attributes=ne(_e.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:V,attributes:_e.attributes})),V;var De=ne?ne({}):{};return _e=new this.NodeDataClass(V,De),this._nodes.set(V,_e),this.emit("nodeAdded",{key:V,attributes:De}),V},ue.dropNode=function(V){var ne=this,_e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.dropNode: could not find the "'.concat(V,'" node in the graph.'));this.forEachEdge(V,function(Pe){ne.dropEdge(Pe)}),this._nodes.delete(V),this.emit("nodeDropped",{key:V,attributes:_e.attributes})},ue.dropEdge=function(V){var ne;if(arguments.length>1){var _e=""+arguments[0],Pe=""+arguments[1];if(!(ne=T(this,_e,Pe,this.type)))throw new je('Graph.dropEdge: could not find the "'.concat(_e,'" -> "').concat(Pe,'" edge in the graph.'))}else if(!(ne=this._edges.get(V=""+V)))throw new je('Graph.dropEdge: could not find the "'.concat(V,'" edge in the graph.'));this._edges.delete(ne.key);var st=ne.source,Tt=ne.target,Nt=ne.attributes,zt=ne.undirected;return st===Tt?zt?(st.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(st.directedSelfLoops--,this._directedSelfLoopCount--):zt?(st.undirectedDegree--,Tt.undirectedDegree--):(st.outDegree--,Tt.inDegree--),function F(ve,we,ue){var V=ve.multi,ne=ue.source,_e=ue.target,Pe=ne.key,De=_e.key,st=ne[we?"undirected":"out"],Tt=we?"undirected":"in";if(De in st)if(V){var Nt=st[De];1===Nt.size?(delete st[De],delete _e[Tt][Pe]):Nt.delete(ue)}else delete st[De];V||delete _e[Tt][Pe]}(this,zt,ne),zt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:V,attributes:Nt,source:st.key,target:Tt.key,undirected:zt}),this},ue.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ue.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ue.getAttribute=function(V){return this._attributes[V]},ue.getAttributes=function(){return this._attributes},ue.hasAttribute=function(V){return this._attributes.hasOwnProperty(V)},ue.setAttribute=function(V,ne){return this._attributes[V]=ne,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},ue.updateAttribute=function(V,ne){if("function"!=typeof ne)throw new Ce("Graph.updateAttribute: updater should be a function.");return this._attributes[V]=ne(this._attributes[V]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},ue.removeAttribute=function(V){return delete this._attributes[V],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:V}),this},ue.replaceAttributes=function(V){if(!O(V))throw new Ce("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=V,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ue.mergeAttributes=function(V){if(!O(V))throw new Ce("Graph.mergeAttributes: provided attributes are not a plain object.");return v(this._attributes,V),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:V}),this},ue.getNodeAttribute=function(V,ne){var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.getNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return _e.attributes[ne]},ue.getNodeAttributes=function(V){var ne=this._nodes.get(V=""+V);if(!ne)throw new je('Graph.getNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));return ne.attributes},ue.hasNodeAttribute=function(V,ne){var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return _e.attributes.hasOwnProperty(ne)},ue.setNodeAttribute=function(V,ne,_e){var Pe=this._nodes.get(V=""+V);if(!Pe)throw new je('Graph.setNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new Ce("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Pe.attributes[ne]=_e,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Pe.attributes,name:ne}),this},ue.updateNodeAttribute=function(V,ne,_e){var Pe=this._nodes.get(V=""+V);if(!Pe)throw new je('Graph.updateNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new Ce("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof _e)throw new Ce("Graph.updateAttribute: updater should be a function.");var De=Pe.attributes,st=_e(De[ne]);return De[ne]=st,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Pe.attributes,name:ne}),this},ue.removeNodeAttribute=function(V,ne){var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return delete _e.attributes[ne],this.emit("nodeAttributesUpdated",{key:V,type:"remove",attributes:_e.attributes,name:ne}),this},ue.replaceNodeAttributes=function(V,ne){var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.replaceNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!O(ne))throw new Ce("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return _e.attributes=ne,this.emit("nodeAttributesUpdated",{key:V,type:"replace",attributes:_e.attributes}),this},ue.mergeNodeAttributes=function(V,ne){var _e=this._nodes.get(V=""+V);if(!_e)throw new je('Graph.mergeNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!O(ne))throw new Ce("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return v(_e.attributes,ne),this.emit("nodeAttributesUpdated",{key:V,type:"merge",attributes:_e.attributes,data:ne}),this},ue.updateEachNodeAttributes=function(V,ne){if("function"!=typeof V)throw new Ce("Graph.updateEachNodeAttributes: expecting an updater function.");if(ne&&!L(ne))throw new Ce("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var _e,Pe,De=this._nodes.values();!0!==(_e=De.next()).done;)(Pe=_e.value).attributes=V(Pe.key,Pe.attributes);this.emit("eachNodeAttributesUpdated",{hints:ne||null})},ue.updateEachEdgeAttributes=function(V,ne){if("function"!=typeof V)throw new Ce("Graph.updateEachEdgeAttributes: expecting an updater function.");if(ne&&!L(ne))throw new Ce("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var _e,Pe,De=this._edges.values();!0!==(_e=De.next()).done;)(Pe=_e.value).attributes=V(Pe.key,Pe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:ne||null})},ue.forEach=function(V){if("function"!=typeof V)throw new Ce("Graph.forEach: expecting a callback.");this.multi?Ye(!1,this,V):We(!1,this,V)},ue.forEachUntil=function(V){if("function"!=typeof V)throw new Ce("Graph.forEach: expecting a callback.");this.multi?Ye(!0,this,V):We(!0,this,V)},ue.adjacency=function(){return this.multi?(st=(V=this)._nodes.values(),Tt=V.type,Nt="outer",zt=null,new Ke(function cn(){var mn;if("outer"===Nt)return!0===(mn=st.next()).done?mn:(ne=mn.value,Nt="directed",cn());if("directed"===Nt)return"undirected"===Tt?(Nt="undirected",cn()):(Pe=ne.out,_e=Object.keys(ne.out),De=0,Nt="inner-directed",cn());if("undirected"===Nt){if("directed"===Tt)return Nt="outer",cn();Pe=ne.undirected,_e=Object.keys(ne.undirected),De=0,Nt="inner-undirected"}if(!zt&&De>=_e.length)return Nt="inner-undirected"===Nt?"outer":"undirected",cn();if(!zt){var Kr=_e[De++];return zt=Pe[Kr].values(),cn()}if((mn=zt.next()).done)return zt=null,cn();var zr=mn.value,bn=zr.target;return"inner-undirected"===Nt&&bn.key===ne.key&&(bn=zr.source),{done:!1,value:[ne.key,bn.key,ne.attributes,bn.attributes,zr.key,zr.attributes]}})):(ui=(cn=this)._nodes.values(),Ka=cn.type,so="outer",new Ke(function ns(){var ld;if("outer"===so)return!0===(ld=ui.next()).done?ld:(mn=ld.value,so="directed",ns());if("directed"===so)return"undirected"===Ka?(so="undirected",ns()):(zr=mn.out,Kr=Object.keys(mn.out),bn=0,so="inner-directed",ns());if("undirected"===so){if("directed"===Ka)return so="outer",ns();zr=mn.undirected,Kr=Object.keys(mn.undirected),bn=0,so="inner-undirected"}if(bn>=Kr.length)return so="inner-undirected"===so?"outer":"undirected",ns();var dd=Kr[bn++],xs=zr[dd],Hr=xs.target;return"inner-undirected"===so&&Hr.key===mn.key&&(Hr=xs.source),{done:!1,value:[mn.key,Hr.key,mn.attributes,Hr.attributes,xs.key,xs.attributes]}}));var cn,mn,Kr,zr,bn,ui,Ka,so,V,ne,_e,Pe,De,st,Tt,Nt,zt},ue.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Me(this._nodes.keys(),this._nodes.size)},ue.forEachNode=function(V){if("function"!=typeof V)throw new Ce("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(ne,_e){V(_e,ne.attributes)})},ue.forEachNodeUntil=function(V){if("function"!=typeof V)throw new Ce("Graph.forEachNode: expecting a callback.");for(var ne,_e,Pe=this._nodes.values();!0!==(ne=Pe.next())&&!V((_e=ne.value).key,_e.attributes););},ue.nodeEntries=function(){var V=this._nodes.values();return new Ke(function(){var ne=V.next();if(ne.done)return ne;var _e=ne.value;return{value:[_e.key,_e.attributes],done:!1}})},ue.exportNode=function(V){var ne=this._nodes.get(V=""+V);if(!ne)throw new je('Graph.exportNode: could not find the "'.concat(V,'" node in the graph.'));return Wt(V,ne)},ue.exportEdge=function(V){var ne=this._edges.get(V=""+V);if(!ne)throw new je('Graph.exportEdge: could not find the "'.concat(V,'" edge in the graph.'));return $t(V,ne)},ue.export=function(){var V=new Array(this._nodes.size),ne=0;this._nodes.forEach(function(Pe,De){V[ne++]=Wt(De,Pe)});var _e=new Array(this._edges.size);return ne=0,this._edges.forEach(function(Pe,De){_e[ne++]=$t(De,Pe)}),{attributes:this.getAttributes(),nodes:V,edges:_e,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ue.importNode=function(V){var ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_e=function an(ve){return O(ve)?"key"in ve?!("attributes"in ve)||O(ve.attributes)&&null!==ve.attributes?null:"invalid-attributes":"no-key":"not-object"}(V);if(_e){if("not-object"===_e)throw new Ce('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===_e)throw new Ce("Graph.importNode: no key provided.");if("invalid-attributes"===_e)throw new Ce("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Pe=V.key,De=V.attributes,st=void 0===De?{}:De;return ne?this.mergeNode(Pe,st):this.addNode(Pe,st),this},ue.importEdge=function(V){var ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_e=function gr(ve){return O(ve)?"source"in ve?"target"in ve?!("attributes"in ve)||O(ve.attributes)&&null!==ve.attributes?"undirected"in ve&&"boolean"!=typeof ve.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(V);if(_e){if("not-object"===_e)throw new Ce('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===_e)throw new Ce("Graph.importEdge: missing souce.");if("no-target"===_e)throw new Ce("Graph.importEdge: missing target.");if("invalid-attributes"===_e)throw new Ce("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===_e)throw new Ce("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Pe=V.source,De=V.target,st=V.attributes,Tt=void 0===st?{}:st,Nt=V.undirected,zt=void 0!==Nt&&Nt;return"key"in V?(ne?zt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:zt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,V.key,Pe,De,Tt):(ne?zt?this.mergeUndirectedEdge:this.mergeDirectedEdge:zt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Pe,De,Tt),this},ue.import=function(V){var ne,_e,Pe,De=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function j(ve){return null!==ve&&"object"===q(ve)&&"function"==typeof ve.addUndirectedEdgeWithKey&&"function"==typeof ve.dropNode}(V))return this.import(V.export(),De),this;if(!O(V))throw new Ce("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(V.attributes){if(!O(V.attributes))throw new Ce("Graph.import: invalid attributes. Expecting a plain object.");De?this.mergeAttributes(V.attributes):this.replaceAttributes(V.attributes)}if(V.nodes){if(Pe=V.nodes,!Array.isArray(Pe))throw new Ce("Graph.import: invalid nodes. Expecting an array.");for(ne=0,_e=Pe.length;ne<_e;ne++)this.importNode(Pe[ne],De)}if(V.edges){if(Pe=V.edges,!Array.isArray(Pe))throw new Ce("Graph.import: invalid edges. Expecting an array.");for(ne=0,_e=Pe.length;ne<_e;ne++)this.importEdge(Pe[ne],De)}return this},ue.nullCopy=function(V){return new we(v({},this._options,V))},ue.emptyCopy=function(V){var ne=this.nullCopy(V);return this._nodes.forEach(function(_e,Pe){var De=v({},_e.attributes);_e=new ne.NodeDataClass(Pe,De),ne._nodes.set(Pe,_e)}),ne},ue.copy=function(){var V=new we(this._options);return V.import(this),V},ue.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(V){return V.upgradeToMixed()}),this._options.type="mixed",A(this,"type",this._options.type),Q(this,"NodeDataClass",Se)),this},ue.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,A(this,"multi",!0),(V=this)._nodes.forEach(function(ne,_e){if(ne.out)for(var Pe in ne.out){var De=new Set;De.add(ne.out[Pe]),ne.out[Pe]=De,V._nodes.get(Pe).in[_e]=De}if(ne.undirected)for(var st in ne.undirected)if(!(st>_e)){var Tt=new Set;Tt.add(ne.undirected[st]),ne.undirected[st]=Tt,V._nodes.get(st).undirected[_e]=Tt}})),this;var V},ue.clearIndex=function(){return this._nodes.forEach(function(V){void 0!==V.in&&(V.in={},V.out={}),void 0!==V.undirected&&(V.undirected={})}),this},ue.toJSON=function(){return this.export()},ue.toString=function(){return"[object Graph]"},ue.inspect=function(){var V=this,ne={};this._nodes.forEach(function(Tt,Nt){ne[Nt]=Tt.attributes});var _e={},Pe={};this._edges.forEach(function(Tt,Nt){var zt=Tt.undirected?"--":"->",cn="",mn="(".concat(Tt.source.key,")").concat(zt,"(").concat(Tt.target.key,")");Tt.generatedKey?V.multi&&(void 0===Pe[mn]?Pe[mn]=0:Pe[mn]++,cn+="".concat(Pe[mn],". ")):cn+="[".concat(Nt,"]: "),_e[cn+=mn]=Tt.attributes});var De={};for(var st in this)this.hasOwnProperty(st)&&!Sa.has(st)&&"function"!=typeof this[st]&&(De[st]=this[st]);return De.attributes=this._attributes,De.nodes=ne,De.edges=_e,Q(De,"constructor",this.constructor),De},we}(X.exports.EventEmitter);typeof Symbol<"u"&&(Ai.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ai.prototype.inspect),[{name:function(ve){return"".concat(ve,"Edge")},generateKey:!0},{name:function(ve){return"".concat(ve,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ve){return"".concat(ve,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ve){return"".concat(ve,"EdgeWithKey")}},{name:function(ve){return"".concat(ve,"DirectedEdgeWithKey")},type:"directed"},{name:function(ve){return"".concat(ve,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ve){["add","merge","update"].forEach(function(we){var ue=ve.name(we),V="add"===we?ki:bi;Ai.prototype[ue]=ve.generateKey?function(ne,_e,Pe){return V(this,ue,!0,"undirected"===(ve.type||this.type),null,ne,_e,Pe,"update"===we)}:function(ne,_e,Pe,De){return V(this,ue,!1,"undirected"===(ve.type||this.type),ne,_e,Pe,De,"update"===we)}})}),typeof Symbol<"u"&&(Ai.prototype[Symbol.iterator]=Ai.prototype.adjacency),ve=Ai,I.forEach(function(we){var ue=we.name,V=we.attacher;V(ve,ue("Edge"),"mixed"),V(ve,ue("DirectedEdge"),"directed"),V(ve,ue("UndirectedEdge"),"undirected")}),function(ve){He.forEach(function(we){var V,ne,_e,Pe;_e=(V=we).type,Pe=V.direction,ve.prototype[ne=V.name]=function(De,st){if("mixed"!==_e&&"mixed"!==this.type&&_e!==this.type)return[];if(!arguments.length)return function Xt(ve,we){if(0===ve.size)return[];if("mixed"===we||we===ve.type)return"function"==typeof Array.from?Array.from(ve._edges.keys()):Me(ve._edges.keys(),ve._edges.size);for(var ue,V,_e=new Array("undirected"===we?ve.undirectedSize:ve.directedSize),Pe="undirected"===we,De=ve._edges.values(),st=0;!0!==(ue=De.next()).done;)(V=ue.value).undirected===Pe&&(_e[st++]=V.key);return _e}(this,_e);if(1===arguments.length){var Tt=this._nodes.get(De=""+De);if(void 0===Tt)throw new je("Graph.".concat(ne,': could not find the "').concat(De,'" node in the graph.'));return function Le(ve,we,ue,V){var ne=[],_e=ve?fe:Je;return"undirected"!==we&&("out"!==ue&&_e(ne,V.in),"in"!==ue&&_e(ne,V.out),!ue&&V.directedSelfLoops>0&&ne.splice(ne.lastIndexOf(V.key),1)),"directed"!==we&&_e(ne,V.undirected),ne}(this.multi,"mixed"===_e?this.type:_e,Pe,Tt)}if(2===arguments.length){st=""+st;var Nt=this._nodes.get(De=""+De);if(!Nt)throw new je("Graph.".concat(ne,':  could not find the "').concat(De,'" source node in the graph.'));if(!this._nodes.has(st))throw new je("Graph.".concat(ne,':  could not find the "').concat(st,'" target node in the graph.'));return function sn(ve,we,ue,V,ne){var _e=we?ye:$e,Pe=[];return"undirected"!==ve&&(void 0!==V.in&&"out"!==ue&&_e(Pe,V.in,ne),void 0!==V.out&&"in"!==ue&&_e(Pe,V.out,ne),!ue&&V.directedSelfLoops>0&&Pe.splice(Pe.lastIndexOf(V.key),1)),"directed"!==ve&&void 0!==V.undirected&&_e(Pe,V.undirected,ne),Pe}(_e,this.multi,Pe,Nt,st)}throw new Ce("Graph.".concat(ne,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ue,V){var ne=V.name,_e=V.type,Pe=V.direction,De="forEach"+ne[0].toUpperCase()+ne.slice(1,-1);ue.prototype[De]=function(st,Tt,Nt){if("mixed"===_e||"mixed"===this.type||_e===this.type){if(1===arguments.length)return function ge(ve,we,ue){if(0!==ve.size)for(var V,ne,_e="mixed"!==we&&we!==ve.type,Pe="undirected"===we,De=ve._edges.values();!0!==(V=De.next()).done;)if(ne=V.value,!_e||ne.undirected===Pe){var zt=ne.source,cn=ne.target;ue(ne.key,ne.attributes,zt.key,cn.key,zt.attributes,cn.attributes,ne.undirected,ne.generatedKey)}}(this,_e,Nt=st);if(2===arguments.length){Nt=Tt;var zt=this._nodes.get(st=""+st);if(void 0===zt)throw new je("Graph.".concat(De,': could not find the "').concat(st,'" node in the graph.'));return function et(ve,we,ue,V,ne){var _e=ve?$:re;"undirected"!==we&&("out"!==ue&&_e(V.in,ne),"in"!==ue&&_e(V.out,ne,ue?null:V.key)),"directed"!==we&&_e(V.undirected,ne)}(this.multi,"mixed"===_e?this.type:_e,Pe,zt,Nt)}if(3===arguments.length){Tt=""+Tt;var cn=this._nodes.get(st=""+st);if(!cn)throw new je("Graph.".concat(De,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new je("Graph.".concat(De,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Bn(ve,we,ue,V,ne,_e){var Pe=we?rt:Ve;"undirected"!==ve&&(void 0!==V.in&&"out"!==ue&&Pe(V.in,ne,_e),V.key!==ne&&void 0!==V.out&&"in"!==ue&&Pe(V.out,ne,_e)),"directed"!==ve&&void 0!==V.undirected&&Pe(V.undirected,ne,_e)}(_e,this.multi,Pe,cn,Tt,Nt)}throw new Ce("Graph.".concat(De,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ve,we),function(ue,V){var ne=V.name,_e=V.type,Pe=V.direction,De="forEach"+ne[0].toUpperCase()+ne.slice(1,-1)+"Until";ue.prototype[De]=function(st,Tt,Nt){if("mixed"===_e||"mixed"===this.type||_e===this.type){if(1===arguments.length)return function Y(ve,we,ue){if(0!==ve.size)for(var V,ne,_e="mixed"!==we&&we!==ve.type,Pe="undirected"===we,De=ve._edges.values();!0!==(V=De.next()).done;)if(ne=V.value,!_e||ne.undirected===Pe){var zt=ne.source,cn=ne.target;if(ue(ne.key,ne.attributes,zt.key,cn.key,zt.attributes,cn.attributes,ne.undirected,ne.generatedKey))break}}(this,_e,Nt=st);if(2===arguments.length){Nt=Tt;var zt=this._nodes.get(st=""+st);if(void 0===zt)throw new je("Graph.".concat(De,': could not find the "').concat(st,'" node in the graph.'));return function ct(ve,we,ue,V,ne){var _e=ve?U:P;"undirected"!==we&&("out"!==ue&&_e(V.in,ne)||"in"!==ue&&_e(V.out,ne,ue?null:V.key))||"directed"===we||_e(V.undirected,ne)}(this.multi,"mixed"===_e?this.type:_e,Pe,zt,Nt)}if(3===arguments.length){Tt=""+Tt;var cn=this._nodes.get(st=""+st);if(!cn)throw new je("Graph.".concat(De,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new je("Graph.".concat(De,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Hn(ve,we,ue,V,ne,_e){var Pe=we?At:_t;"undirected"!==ve&&(void 0!==V.in&&"out"!==ue&&Pe(V.in,ne,_e)||V.key!==ne&&void 0!==V.out&&"in"!==ue&&Pe(V.out,ne,_e,ue?null:V.key))||"directed"===ve||void 0===V.undirected||Pe(V.undirected,ne,_e)}(_e,this.multi,Pe,cn,Tt,Nt)}throw new Ce("Graph.".concat(De,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ve,we),function(ue,V){var _e=V.type,Pe=V.direction,De=V.name.slice(0,-1)+"Entries";ue.prototype[De]=function(st,Tt){if("mixed"!==_e&&"mixed"!==this.type&&_e!==this.type)return Ke.empty();if(!arguments.length)return function oe(ve,we){if(0===ve.size)return Ke.empty();var ue="mixed"!==we&&we!==ve.type,V="undirected"===we,ne=ve._edges.values();return new Ke(function(){for(var _e,Pe;;){if((_e=ne.next()).done)return _e;if(Pe=_e.value,!ue||Pe.undirected===V)break}return{value:[Pe.key,Pe.attributes,Pe.source.key,Pe.target.key,Pe.source.attributes,Pe.target.attributes],done:!1}})}(this,_e);if(1===arguments.length){var Nt=this._nodes.get(st=""+st);if(!Nt)throw new je("Graph.".concat(De,': could not find the "').concat(st,'" node in the graph.'));return function Et(ve,we,ue){var V=Ke.empty();return"undirected"!==ve&&("out"!==we&&void 0!==ue.in&&(V=ie(V,pe(ue.in))),"in"!==we&&void 0!==ue.out&&(V=ie(V,pe(ue.out,we?null:ue.key)))),"directed"!==ve&&void 0!==ue.undirected&&(V=ie(V,pe(ue.undirected))),V}(_e,Pe,Nt)}if(2===arguments.length){Tt=""+Tt;var zt=this._nodes.get(st=""+st);if(!zt)throw new je("Graph.".concat(De,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new je("Graph.".concat(De,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Tn(ve,we,ue,V){var ne=Ke.empty();return"undirected"!==ve&&(void 0!==ue.in&&"out"!==we&&V in ue.in&&(ne=ie(ne,wt(ue.in,V))),void 0!==ue.out&&"in"!==we&&V in ue.out&&(ne=ie(ne,wt(ue.out,V)))),"directed"!==ve&&void 0!==ue.undirected&&V in ue.undirected&&(ne=ie(ne,wt(ue.undirected,V))),ne}(_e,Pe,zt,Tt)}throw new Ce("Graph.".concat(De,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ve,we)})}(Ai),function(ve){jn.forEach(function(we){var V,ne,_e,Pe;_e=(V=we).type,Pe=V.direction,ve.prototype[ne=V.name]=function(De){if("mixed"!==_e&&"mixed"!==this.type&&_e!==this.type)return[];if(2===arguments.length){var st=""+arguments[0],Tt=""+arguments[1];if(!this._nodes.has(st))throw new je("Graph.".concat(ne,': could not find the "').concat(st,'" node in the graph.'));if(!this._nodes.has(Tt))throw new je("Graph.".concat(ne,': could not find the "').concat(Tt,'" node in the graph.'));return function ol(ve,we,ue,V,ne){var _e=ve._nodes.get(V);if("undirected"!==we){if("out"!==ue&&void 0!==_e.in)for(var Pe in _e.in)if(Pe===ne)return!0;if("in"!==ue&&void 0!==_e.out)for(var De in _e.out)if(De===ne)return!0}if("directed"!==we&&void 0!==_e.undirected)for(var st in _e.undirected)if(st===ne)return!0;return!1}(this,_e,Pe,st,Tt)}if(1===arguments.length){var Nt=this._nodes.get(De=""+De);if(void 0===Nt)throw new je("Graph.".concat(ne,': could not find the "').concat(De,'" node in the graph.'));return function ra(ve,we,ue){if("mixed"!==ve){if("undirected"===ve)return Object.keys(ue.undirected);if("string"==typeof we)return Object.keys(ue[we])}var V=new Set;return"undirected"!==ve&&("out"!==we&&Yi(V,ue.in),"in"!==we&&Yi(V,ue.out)),"directed"!==ve&&Yi(V,ue.undirected),Me(V.values(),V.size)}("mixed"===_e?this.type:_e,Pe,Nt)}throw new Ce("Graph.".concat(ne,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Xa(ve,we){var ue=we.name,V=we.type,ne=we.direction,_e="forEach"+ue[0].toUpperCase()+ue.slice(1,-1);ve.prototype[_e]=function(Pe,De){if("mixed"===V||"mixed"===this.type||V===this.type){var st=this._nodes.get(Pe=""+Pe);if(void 0===st)throw new je("Graph.".concat(_e,': could not find the "').concat(Pe,'" node in the graph.'));!function(Tt,Nt,zt,cn){if("mixed"!==Tt){if("undirected"===Tt)return mr(zt,zt.undirected,cn);if("string"==typeof Nt)return mr(zt,zt[Nt],cn)}var mn=new Set;"undirected"!==Tt&&("out"!==Nt&&Lo(mn,zt,zt.in,cn),"in"!==Nt&&Lo(mn,zt,zt.out,cn)),"directed"!==Tt&&Lo(mn,zt,zt.undirected,cn)}("mixed"===V?this.type:V,ne,st,De)}}}(ve,we),function Uo(ve,we){var ue=we.name,V=we.type,ne=we.direction,_e="forEach"+ue[0].toUpperCase()+ue.slice(1,-1)+"Until";ve.prototype[_e]=function(Pe,De){if("mixed"===V||"mixed"===this.type||V===this.type){var st=this._nodes.get(Pe=""+Pe);if(void 0===st)throw new je("Graph.".concat(_e,': could not find the "').concat(Pe,'" node in the graph.'));!function(Tt,Nt,zt,cn){if("mixed"!==Tt){if("undirected"===Tt)return Bo(zt,zt.undirected,cn);if("string"==typeof Nt)return Bo(zt,zt[Nt],cn)}var mn=new Set;"undirected"!==Tt&&("out"!==Nt&&zi(mn,zt,zt.in,cn)||"in"!==Nt&&zi(mn,zt,zt.out,cn))||"directed"===Tt||zi(mn,zt,zt.undirected,cn)}("mixed"===V?this.type:V,ne,st,De)}}}(ve,we),function sl(ve,we){var V=we.type,ne=we.direction,_e=we.name.slice(0,-1)+"Entries";ve.prototype[_e]=function(Pe){if("mixed"!==V&&"mixed"!==this.type&&V!==this.type)return Ke.empty();var De=this._nodes.get(Pe=""+Pe);if(void 0===De)throw new je("Graph.".concat(_e,': could not find the "').concat(Pe,'" node in the graph.'));return function(st,Tt,Nt){if("mixed"!==st){if("undirected"===st)return jo(Nt,Nt.undirected);if("string"==typeof Tt)return jo(Nt,Nt[Tt])}var zt=Ke.empty(),cn=new Set;return"undirected"!==st&&("out"!==Tt&&(zt=ie(zt,Fs(cn,Nt,Nt.in))),"in"!==Tt&&(zt=ie(zt,Fs(cn,Nt,Nt.out)))),"directed"!==st&&(zt=ie(zt,Fs(cn,Nt,Nt.undirected))),zt}("mixed"===V?this.type:V,ne,De)}}(ve,we)})}(Ai);var qt=function(ve){function we(ue){var V=v({type:"directed"},ue);if("multi"in V&&!1!==V.multi)throw new Ce("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==V.type)throw new Ce('DirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return ve.call(this,V)||this}return g(we,ve),we}(Ai),Xn=function(ve){function we(ue){var V=v({type:"undirected"},ue);if("multi"in V&&!1!==V.multi)throw new Ce("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==V.type)throw new Ce('UndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return ve.call(this,V)||this}return g(we,ve),we}(Ai),Mo=function(ve){function we(ue){var V=v({multi:!0},ue);if("multi"in V&&!0!==V.multi)throw new Ce("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ve.call(this,V)||this}return g(we,ve),we}(Ai),Si=function(ve){function we(ue){var V=v({type:"directed",multi:!0},ue);if("multi"in V&&!0!==V.multi)throw new Ce("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==V.type)throw new Ce('MultiDirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return ve.call(this,V)||this}return g(we,ve),we}(Ai),oo=function(ve){function we(ue){var V=v({type:"undirected",multi:!0},ue);if("multi"in V&&!0!==V.multi)throw new Ce("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==V.type)throw new Ce('MultiUndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return ve.call(this,V)||this}return g(we,ve),we}(Ai);function _r(ve){ve.from=function(we,ue){var V=v({},we.options,ue),ne=new ve(V);return ne.import(we),ne}}return _r(Ai),_r(qt),_r(Xn),_r(Mo),_r(Si),_r(oo),Ai.Graph=Ai,Ai.DirectedGraph=qt,Ai.UndirectedGraph=Xn,Ai.MultiGraph=Mo,Ai.MultiDirectedGraph=Si,Ai.MultiUndirectedGraph=oo,Ai.InvalidArgumentsGraphError=Ce,Ai.NotFoundGraphError=je,Ai.UsageGraphError=he,Ai}()},7271:(ee,q,g)=>{var C;!function(b,D,S,k){"use strict";var X,_=["","webkit","Moz","MS","ms","o"],v=D.createElement("div"),T="function",j=Math.round,O=Math.abs,B=Date.now;function Q(Re,Ue,nt){return setTimeout(z(Re,nt),Ue)}function A(Re,Ue,nt){return!!Array.isArray(Re)&&(L(Re,nt[Ue],nt),!0)}function L(Re,Ue,nt){var vt;if(Re)if(Re.forEach)Re.forEach(Ue,nt);else if(Re.length!==k)for(vt=0;vt<Re.length;)Ue.call(nt,Re[vt],vt,Re),vt++;else for(vt in Re)Re.hasOwnProperty(vt)&&Ue.call(nt,Re[vt],vt,Re)}function ae(Re,Ue,nt){var vt="DEPRECATED METHOD: "+Ue+"\n"+nt+" AT \n";return function(){var Ut=new Error("get-stack-trace"),rn=Ut&&Ut.stack?Ut.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ii=b.console&&(b.console.warn||b.console.log);return ii&&ii.call(b.console,vt,rn),Re.apply(this,arguments)}}X="function"!=typeof Object.assign?function(Ue){if(Ue===k||null===Ue)throw new TypeError("Cannot convert undefined or null to object");for(var nt=Object(Ue),vt=1;vt<arguments.length;vt++){var Ut=arguments[vt];if(Ut!==k&&null!==Ut)for(var rn in Ut)Ut.hasOwnProperty(rn)&&(nt[rn]=Ut[rn])}return nt}:Object.assign;var J=ae(function(Ue,nt,vt){for(var Ut=Object.keys(nt),rn=0;rn<Ut.length;)(!vt||vt&&Ue[Ut[rn]]===k)&&(Ue[Ut[rn]]=nt[Ut[rn]]),rn++;return Ue},"extend","Use `assign`."),Z=ae(function(Ue,nt){return J(Ue,nt,!0)},"merge","Use `assign`.");function W(Re,Ue,nt){var Ut,vt=Ue.prototype;(Ut=Re.prototype=Object.create(vt)).constructor=Re,Ut._super=vt,nt&&X(Ut,nt)}function z(Re,Ue){return function(){return Re.apply(Ue,arguments)}}function x(Re,Ue){return typeof Re==T?Re.apply(Ue&&Ue[0]||k,Ue):Re}function N(Re,Ue){return Re===k?Ue:Re}function R(Re,Ue,nt){L(ce(Ue),function(vt){Re.addEventListener(vt,nt,!1)})}function le(Re,Ue,nt){L(ce(Ue),function(vt){Re.removeEventListener(vt,nt,!1)})}function G(Re,Ue){for(;Re;){if(Re==Ue)return!0;Re=Re.parentNode}return!1}function Te(Re,Ue){return Re.indexOf(Ue)>-1}function ce(Re){return Re.trim().split(/\s+/g)}function be(Re,Ue,nt){if(Re.indexOf&&!nt)return Re.indexOf(Ue);for(var vt=0;vt<Re.length;){if(nt&&Re[vt][nt]==Ue||!nt&&Re[vt]===Ue)return vt;vt++}return-1}function ke(Re){return Array.prototype.slice.call(Re,0)}function Ne(Re,Ue,nt){for(var vt=[],Ut=[],rn=0;rn<Re.length;){var ii=Ue?Re[rn][Ue]:Re[rn];be(Ut,ii)<0&&vt.push(Re[rn]),Ut[rn]=ii,rn++}return nt&&(vt=Ue?vt.sort(function(Jr,Vo){return Jr[Ue]>Vo[Ue]}):vt.sort()),vt}function Ze(Re,Ue){for(var nt,vt,Ut=Ue[0].toUpperCase()+Ue.slice(1),rn=0;rn<_.length;){if((vt=(nt=_[rn])?nt+Ut:Ue)in Re)return vt;rn++}return k}var Ke=1;function ze(Re){var Ue=Re.ownerDocument||Re;return Ue.defaultView||Ue.parentWindow||b}var je="ontouchstart"in b,he=Ze(b,"PointerEvent")!==k,Se=je&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),tt="touch",qe="mouse",F=25,I=1,ie=4,He=8,Je=1,fe=2,re=4,$=8,P=16,U=fe|re,pe=$|P,$e=U|pe,ye=["x","y"],Ve=["clientX","clientY"];function rt(Re,Ue){var nt=this;this.manager=Re,this.callback=Ue,this.element=Re.element,this.target=Re.options.inputTarget,this.domHandler=function(vt){x(Re.options.enable,[Re])&&nt.handler(vt)},this.init()}function At(Re,Ue,nt){var vt=nt.pointers.length,Ut=nt.changedPointers.length,rn=Ue&I&&vt-Ut==0,ii=Ue&(ie|He)&&vt-Ut==0;nt.isFirst=!!rn,nt.isFinal=!!ii,rn&&(Re.session={}),nt.eventType=Ue,function wt(Re,Ue){var nt=Re.session,vt=Ue.pointers,Ut=vt.length;nt.firstInput||(nt.firstInput=Y(Ue)),Ut>1&&!nt.firstMultiple?nt.firstMultiple=Y(Ue):1===Ut&&(nt.firstMultiple=!1);var rn=nt.firstInput,ii=nt.firstMultiple,qr=ii?ii.center:rn.center,Jr=Ue.center=oe(vt);Ue.timeStamp=B(),Ue.deltaTime=Ue.timeStamp-rn.timeStamp,Ue.angle=Et(qr,Jr),Ue.distance=ct(qr,Jr),function Xt(Re,Ue){var nt=Ue.center,vt=Re.offsetDelta||{},Ut=Re.prevDelta||{},rn=Re.prevInput||{};(Ue.eventType===I||rn.eventType===ie)&&(Ut=Re.prevDelta={x:rn.deltaX||0,y:rn.deltaY||0},vt=Re.offsetDelta={x:nt.x,y:nt.y}),Ue.deltaX=Ut.x+(nt.x-vt.x),Ue.deltaY=Ut.y+(nt.y-vt.y)}(nt,Ue),Ue.offsetDirection=et(Ue.deltaX,Ue.deltaY);var Vo=Le(Ue.deltaTime,Ue.deltaX,Ue.deltaY);Ue.overallVelocityX=Vo.x,Ue.overallVelocityY=Vo.y,Ue.overallVelocity=O(Vo.x)>O(Vo.y)?Vo.x:Vo.y,Ue.scale=ii?function Bn(Re,Ue){return ct(Ue[0],Ue[1],Ve)/ct(Re[0],Re[1],Ve)}(ii.pointers,vt):1,Ue.rotation=ii?function sn(Re,Ue){return Et(Ue[1],Ue[0],Ve)+Et(Re[1],Re[0],Ve)}(ii.pointers,vt):0,Ue.maxPointers=nt.prevInput?Ue.pointers.length>nt.prevInput.maxPointers?Ue.pointers.length:nt.prevInput.maxPointers:Ue.pointers.length,function ge(Re,Ue){var Ut,rn,ii,qr,nt=Re.lastInterval||Ue,vt=Ue.timeStamp-nt.timeStamp;if(Ue.eventType!=He&&(vt>F||nt.velocity===k)){var Jr=Ue.deltaX-nt.deltaX,Vo=Ue.deltaY-nt.deltaY,dr=Le(vt,Jr,Vo);rn=dr.x,ii=dr.y,Ut=O(dr.x)>O(dr.y)?dr.x:dr.y,qr=et(Jr,Vo),Re.lastInterval=Ue}else Ut=nt.velocity,rn=nt.velocityX,ii=nt.velocityY,qr=nt.direction;Ue.velocity=Ut,Ue.velocityX=rn,Ue.velocityY=ii,Ue.direction=qr}(nt,Ue);var dr=Re.element;G(Ue.srcEvent.target,dr)&&(dr=Ue.srcEvent.target),Ue.target=dr}(Re,nt),Re.emit("hammer.input",nt),Re.recognize(nt),Re.session.prevInput=nt}function Y(Re){for(var Ue=[],nt=0;nt<Re.pointers.length;)Ue[nt]={clientX:j(Re.pointers[nt].clientX),clientY:j(Re.pointers[nt].clientY)},nt++;return{timeStamp:B(),pointers:Ue,center:oe(Ue),deltaX:Re.deltaX,deltaY:Re.deltaY}}function oe(Re){var Ue=Re.length;if(1===Ue)return{x:j(Re[0].clientX),y:j(Re[0].clientY)};for(var nt=0,vt=0,Ut=0;Ut<Ue;)nt+=Re[Ut].clientX,vt+=Re[Ut].clientY,Ut++;return{x:j(nt/Ue),y:j(vt/Ue)}}function Le(Re,Ue,nt){return{x:Ue/Re||0,y:nt/Re||0}}function et(Re,Ue){return Re===Ue?Je:O(Re)>=O(Ue)?Re<0?fe:re:Ue<0?$:P}function ct(Re,Ue,nt){nt||(nt=ye);var vt=Ue[nt[0]]-Re[nt[0]],Ut=Ue[nt[1]]-Re[nt[1]];return Math.sqrt(vt*vt+Ut*Ut)}function Et(Re,Ue,nt){return nt||(nt=ye),180*Math.atan2(Ue[nt[1]]-Re[nt[1]],Ue[nt[0]]-Re[nt[0]])/Math.PI}rt.prototype={handler:function(){},init:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(ze(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(ze(this.element),this.evWin,this.domHandler)}};var Hn={mousedown:I,mousemove:2,mouseup:ie},Tn="mousedown",jn="mousemove mouseup";function Yi(){this.evEl=Tn,this.evWin=jn,this.pressed=!1,rt.apply(this,arguments)}W(Yi,rt,{handler:function(Ue){var nt=Hn[Ue.type];nt&I&&0===Ue.button&&(this.pressed=!0),2&nt&&1!==Ue.which&&(nt=ie),this.pressed&&(nt&ie&&(this.pressed=!1),this.callback(this.manager,nt,{pointers:[Ue],changedPointers:[Ue],pointerType:qe,srcEvent:Ue}))}});var ra={pointerdown:I,pointermove:2,pointerup:ie,pointercancel:He,pointerout:He},mr={2:tt,3:"pen",4:qe,5:"kinect"},Lo="pointerdown",Bo="pointermove pointerup pointercancel";function zi(){this.evEl=Lo,this.evWin=Bo,rt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(Lo="MSPointerDown",Bo="MSPointerMove MSPointerUp MSPointerCancel"),W(zi,rt,{handler:function(Ue){var nt=this.store,vt=!1,Ut=Ue.type.toLowerCase().replace("ms",""),rn=ra[Ut],ii=mr[Ue.pointerType]||Ue.pointerType,qr=ii==tt,Jr=be(nt,Ue.pointerId,"pointerId");rn&I&&(0===Ue.button||qr)?Jr<0&&(nt.push(Ue),Jr=nt.length-1):rn&(ie|He)&&(vt=!0),!(Jr<0)&&(nt[Jr]=Ue,this.callback(this.manager,rn,{pointers:nt,changedPointers:[Ue],pointerType:ii,srcEvent:Ue}),vt&&nt.splice(Jr,1))}});var jo={touchstart:I,touchmove:2,touchend:ie,touchcancel:He};function Xa(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,rt.apply(this,arguments)}function Uo(Re,Ue){var nt=ke(Re.touches),vt=ke(Re.changedTouches);return Ue&(ie|He)&&(nt=Ne(nt.concat(vt),"identifier",!0)),[nt,vt]}W(Xa,rt,{handler:function(Ue){var nt=jo[Ue.type];if(nt===I&&(this.started=!0),this.started){var vt=Uo.call(this,Ue,nt);nt&(ie|He)&&vt[0].length-vt[1].length==0&&(this.started=!1),this.callback(this.manager,nt,{pointers:vt[0],changedPointers:vt[1],pointerType:tt,srcEvent:Ue})}}});var sl={touchstart:I,touchmove:2,touchend:ie,touchcancel:He},We="touchstart touchmove touchend touchcancel";function Ye(){this.evTarget=We,this.targetIds={},rt.apply(this,arguments)}function Wt(Re,Ue){var nt=ke(Re.touches),vt=this.targetIds;if(Ue&(2|I)&&1===nt.length)return vt[nt[0].identifier]=!0,[nt,nt];var Ut,rn,ii=ke(Re.changedTouches),qr=[],Jr=this.target;if(rn=nt.filter(function(Vo){return G(Vo.target,Jr)}),Ue===I)for(Ut=0;Ut<rn.length;)vt[rn[Ut].identifier]=!0,Ut++;for(Ut=0;Ut<ii.length;)vt[ii[Ut].identifier]&&qr.push(ii[Ut]),Ue&(ie|He)&&delete vt[ii[Ut].identifier],Ut++;return qr.length?[Ne(rn.concat(qr),"identifier",!0),qr]:void 0}W(Ye,rt,{handler:function(Ue){var nt=sl[Ue.type],vt=Wt.call(this,Ue,nt);vt&&this.callback(this.manager,nt,{pointers:vt[0],changedPointers:vt[1],pointerType:tt,srcEvent:Ue})}});var $t=2500;function gr(){rt.apply(this,arguments);var Re=z(this.handler,this);this.touch=new Ye(this.manager,Re),this.mouse=new Yi(this.manager,Re),this.primaryTouch=null,this.lastTouches=[]}function Yt(Re,Ue){Re&I?(this.primaryTouch=Ue.changedPointers[0].identifier,Sa.call(this,Ue)):Re&(ie|He)&&Sa.call(this,Ue)}function Sa(Re){var Ue=Re.changedPointers[0];if(Ue.identifier===this.primaryTouch){var nt={x:Ue.clientX,y:Ue.clientY};this.lastTouches.push(nt);var vt=this.lastTouches;setTimeout(function(){var rn=vt.indexOf(nt);rn>-1&&vt.splice(rn,1)},$t)}}function Li(Re){for(var Ue=Re.srcEvent.clientX,nt=Re.srcEvent.clientY,vt=0;vt<this.lastTouches.length;vt++){var Ut=this.lastTouches[vt],rn=Math.abs(Ue-Ut.x),ii=Math.abs(nt-Ut.y);if(rn<=25&&ii<=25)return!0}return!1}W(gr,rt,{handler:function(Ue,nt,vt){var rn=vt.pointerType==qe;if(!(rn&&vt.sourceCapabilities&&vt.sourceCapabilities.firesTouchEvents)){if(vt.pointerType==tt)Yt.call(this,nt,vt);else if(rn&&Li.call(this,vt))return;this.callback(Ue,nt,vt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ca=Ze(v.style,"touchAction"),ki=Ca!==k,bi="compute",qt="manipulation",Xn="none",Mo="pan-x",Si="pan-y",oo=function we(){if(!ki)return!1;var Re={},Ue=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(nt){Re[nt]=!Ue||b.CSS.supports("touch-action",nt)}),Re}();function _r(Re,Ue){this.manager=Re,this.set(Ue)}_r.prototype={set:function(Re){Re==bi&&(Re=this.compute()),ki&&this.manager.element.style&&oo[Re]&&(this.manager.element.style[Ca]=Re),this.actions=Re.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Re=[];return L(this.manager.recognizers,function(Ue){x(Ue.options.enable,[Ue])&&(Re=Re.concat(Ue.getTouchAction()))}),function ve(Re){if(Te(Re,Xn))return Xn;var Ue=Te(Re,Mo),nt=Te(Re,Si);return Ue&&nt?Xn:Ue||nt?Ue?Mo:Si:Te(Re,qt)?qt:"auto"}(Re.join(" "))},preventDefaults:function(Re){var Ue=Re.srcEvent,nt=Re.offsetDirection;if(!this.manager.session.prevented){var vt=this.actions,Ut=Te(vt,Xn)&&!oo[Xn],rn=Te(vt,Si)&&!oo[Si],ii=Te(vt,Mo)&&!oo[Mo];if(Ut&&1===Re.pointers.length&&Re.distance<2&&Re.deltaTime<250)return;return ii&&rn||!(Ut||rn&&nt&U||ii&&nt&pe)?void 0:this.preventSrc(Ue)}Ue.preventDefault()},preventSrc:function(Re){this.manager.session.prevented=!0,Re.preventDefault()}};var ue=1;function Tt(Re){this.options=X({},this.defaults,Re||{}),this.id=function Me(){return Ke++}(),this.manager=null,this.options.enable=N(this.options.enable,!0),this.state=ue,this.simultaneous={},this.requireFail=[]}function Nt(Re){return 16&Re?"cancel":8&Re?"end":4&Re?"move":2&Re?"start":""}function zt(Re){return Re==P?"down":Re==$?"up":Re==fe?"left":Re==re?"right":""}function cn(Re,Ue){var nt=Ue.manager;return nt?nt.get(Re):Re}function mn(){Tt.apply(this,arguments)}function Kr(){mn.apply(this,arguments),this.pX=null,this.pY=null}function zr(){mn.apply(this,arguments)}function bn(){Tt.apply(this,arguments),this._timer=null,this._input=null}function ui(){mn.apply(this,arguments)}function Ka(){mn.apply(this,arguments)}function so(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ns(Re,Ue){return(Ue=Ue||{}).recognizers=N(Ue.recognizers,ns.defaults.preset),new xs(Re,Ue)}function xs(Re,Ue){this.options=X({},ns.defaults,Ue||{}),this.options.inputTarget=this.options.inputTarget||Re,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Re,this.input=function _t(Re){return new(Re.options.inputClass||(he?zi:Se?Ye:je?gr:Yi))(Re,At)}(this),this.touchAction=new _r(this,this.options.touchAction),Hr(this,!0),L(this.options.recognizers,function(nt){var vt=this.add(new nt[0](nt[1]));nt[2]&&vt.recognizeWith(nt[2]),nt[3]&&vt.requireFailure(nt[3])},this)}function Hr(Re,Ue){var vt,nt=Re.element;nt.style&&(L(Re.options.cssProps,function(Ut,rn){vt=Ze(nt.style,rn),Ue?(Re.oldCssProps[vt]=nt.style[vt],nt.style[vt]=Ut):nt.style[vt]=Re.oldCssProps[vt]||""}),Ue||(Re.oldCssProps={}))}Tt.prototype={defaults:{},set:function(Re){return X(this.options,Re),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Re){if(A(Re,"recognizeWith",this))return this;var Ue=this.simultaneous;return Ue[(Re=cn(Re,this)).id]||(Ue[Re.id]=Re,Re.recognizeWith(this)),this},dropRecognizeWith:function(Re){return A(Re,"dropRecognizeWith",this)||(Re=cn(Re,this),delete this.simultaneous[Re.id]),this},requireFailure:function(Re){if(A(Re,"requireFailure",this))return this;var Ue=this.requireFail;return-1===be(Ue,Re=cn(Re,this))&&(Ue.push(Re),Re.requireFailure(this)),this},dropRequireFailure:function(Re){if(A(Re,"dropRequireFailure",this))return this;Re=cn(Re,this);var Ue=be(this.requireFail,Re);return Ue>-1&&this.requireFail.splice(Ue,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Re){return!!this.simultaneous[Re.id]},emit:function(Re){var Ue=this,nt=this.state;function vt(Ut){Ue.manager.emit(Ut,Re)}nt<8&&vt(Ue.options.event+Nt(nt)),vt(Ue.options.event),Re.additionalEvent&&vt(Re.additionalEvent),nt>=8&&vt(Ue.options.event+Nt(nt))},tryEmit:function(Re){if(this.canEmit())return this.emit(Re);this.state=32},canEmit:function(){for(var Re=0;Re<this.requireFail.length;){if(!(this.requireFail[Re].state&(32|ue)))return!1;Re++}return!0},recognize:function(Re){var Ue=X({},Re);if(!x(this.options.enable,[this,Ue]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ue),this.state=this.process(Ue),30&this.state&&this.tryEmit(Ue)},process:function(Re){},getTouchAction:function(){},reset:function(){}},W(mn,Tt,{defaults:{pointers:1},attrTest:function(Re){var Ue=this.options.pointers;return 0===Ue||Re.pointers.length===Ue},process:function(Re){var Ue=this.state,nt=Re.eventType,vt=6&Ue,Ut=this.attrTest(Re);return vt&&(nt&He||!Ut)?16|Ue:vt||Ut?nt&ie?8|Ue:2&Ue?4|Ue:2:32}}),W(Kr,mn,{defaults:{event:"pan",threshold:10,pointers:1,direction:$e},getTouchAction:function(){var Re=this.options.direction,Ue=[];return Re&U&&Ue.push(Si),Re&pe&&Ue.push(Mo),Ue},directionTest:function(Re){var Ue=this.options,nt=!0,vt=Re.distance,Ut=Re.direction,rn=Re.deltaX,ii=Re.deltaY;return Ut&Ue.direction||(Ue.direction&U?(Ut=0===rn?Je:rn<0?fe:re,nt=rn!=this.pX,vt=Math.abs(Re.deltaX)):(Ut=0===ii?Je:ii<0?$:P,nt=ii!=this.pY,vt=Math.abs(Re.deltaY))),Re.direction=Ut,nt&&vt>Ue.threshold&&Ut&Ue.direction},attrTest:function(Re){return mn.prototype.attrTest.call(this,Re)&&(2&this.state||!(2&this.state)&&this.directionTest(Re))},emit:function(Re){this.pX=Re.deltaX,this.pY=Re.deltaY;var Ue=zt(Re.direction);Ue&&(Re.additionalEvent=this.options.event+Ue),this._super.emit.call(this,Re)}}),W(zr,mn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xn]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.scale-1)>this.options.threshold||2&this.state)},emit:function(Re){1!==Re.scale&&(Re.additionalEvent=this.options.event+(Re.scale<1?"in":"out")),this._super.emit.call(this,Re)}}),W(bn,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Re){var Ue=this.options,nt=Re.pointers.length===Ue.pointers,vt=Re.distance<Ue.threshold,Ut=Re.deltaTime>Ue.time;if(this._input=Re,!vt||!nt||Re.eventType&(ie|He)&&!Ut)this.reset();else if(Re.eventType&I)this.reset(),this._timer=Q(function(){this.state=8,this.tryEmit()},Ue.time,this);else if(Re.eventType&ie)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Re){8===this.state&&(Re&&Re.eventType&ie?this.manager.emit(this.options.event+"up",Re):(this._input.timeStamp=B(),this.manager.emit(this.options.event,this._input)))}}),W(ui,mn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xn]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.rotation)>this.options.threshold||2&this.state)}}),W(Ka,mn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|pe,pointers:1},getTouchAction:function(){return Kr.prototype.getTouchAction.call(this)},attrTest:function(Re){var nt,Ue=this.options.direction;return Ue&(U|pe)?nt=Re.overallVelocity:Ue&U?nt=Re.overallVelocityX:Ue&pe&&(nt=Re.overallVelocityY),this._super.attrTest.call(this,Re)&&Ue&Re.offsetDirection&&Re.distance>this.options.threshold&&Re.maxPointers==this.options.pointers&&O(nt)>this.options.velocity&&Re.eventType&ie},emit:function(Re){var Ue=zt(Re.offsetDirection);Ue&&this.manager.emit(this.options.event+Ue,Re),this.manager.emit(this.options.event,Re)}}),W(so,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[qt]},process:function(Re){var Ue=this.options,nt=Re.pointers.length===Ue.pointers,vt=Re.distance<Ue.threshold,Ut=Re.deltaTime<Ue.time;if(this.reset(),Re.eventType&I&&0===this.count)return this.failTimeout();if(vt&&Ut&&nt){if(Re.eventType!=ie)return this.failTimeout();var rn=!this.pTime||Re.timeStamp-this.pTime<Ue.interval,ii=!this.pCenter||ct(this.pCenter,Re.center)<Ue.posThreshold;if(this.pTime=Re.timeStamp,this.pCenter=Re.center,ii&&rn?this.count+=1:this.count=1,this._input=Re,0==this.count%Ue.taps)return this.hasRequireFailures()?(this._timer=Q(function(){this.state=8,this.tryEmit()},Ue.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Q(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ns.VERSION="2.0.7",ns.defaults={domEvents:!1,touchAction:bi,enable:!0,inputTarget:null,inputClass:null,preset:[[ui,{enable:!1}],[zr,{enable:!1},["rotate"]],[Ka,{direction:U}],[Kr,{direction:U},["swipe"]],[so],[so,{event:"doubletap",taps:2},["tap"]],[bn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},xs.prototype={set:function(Re){return X(this.options,Re),Re.touchAction&&this.touchAction.update(),Re.inputTarget&&(this.input.destroy(),this.input.target=Re.inputTarget,this.input.init()),this},stop:function(Re){this.session.stopped=Re?2:1},recognize:function(Re){var Ue=this.session;if(!Ue.stopped){this.touchAction.preventDefaults(Re);var nt,vt=this.recognizers,Ut=Ue.curRecognizer;(!Ut||Ut&&8&Ut.state)&&(Ut=Ue.curRecognizer=null);for(var rn=0;rn<vt.length;)nt=vt[rn],2===Ue.stopped||Ut&&nt!=Ut&&!nt.canRecognizeWith(Ut)?nt.reset():nt.recognize(Re),!Ut&&14&nt.state&&(Ut=Ue.curRecognizer=nt),rn++}},get:function(Re){if(Re instanceof Tt)return Re;for(var Ue=this.recognizers,nt=0;nt<Ue.length;nt++)if(Ue[nt].options.event==Re)return Ue[nt];return null},add:function(Re){if(A(Re,"add",this))return this;var Ue=this.get(Re.options.event);return Ue&&this.remove(Ue),this.recognizers.push(Re),Re.manager=this,this.touchAction.update(),Re},remove:function(Re){if(A(Re,"remove",this))return this;if(Re=this.get(Re)){var Ue=this.recognizers,nt=be(Ue,Re);-1!==nt&&(Ue.splice(nt,1),this.touchAction.update())}return this},on:function(Re,Ue){if(Re!==k&&Ue!==k){var nt=this.handlers;return L(ce(Re),function(vt){nt[vt]=nt[vt]||[],nt[vt].push(Ue)}),this}},off:function(Re,Ue){if(Re!==k){var nt=this.handlers;return L(ce(Re),function(vt){Ue?nt[vt]&&nt[vt].splice(be(nt[vt],Ue),1):delete nt[vt]}),this}},emit:function(Re,Ue){this.options.domEvents&&function N_(Re,Ue){var nt=D.createEvent("Event");nt.initEvent(Re,!0,!0),nt.gesture=Ue,Ue.target.dispatchEvent(nt)}(Re,Ue);var nt=this.handlers[Re]&&this.handlers[Re].slice();if(nt&&nt.length){Ue.type=Re,Ue.preventDefault=function(){Ue.srcEvent.preventDefault()};for(var vt=0;vt<nt.length;)nt[vt](Ue),vt++}},destroy:function(){this.element&&Hr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},X(ns,{INPUT_START:I,INPUT_MOVE:2,INPUT_END:ie,INPUT_CANCEL:He,STATE_POSSIBLE:ue,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Je,DIRECTION_LEFT:fe,DIRECTION_RIGHT:re,DIRECTION_UP:$,DIRECTION_DOWN:P,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:pe,DIRECTION_ALL:$e,Manager:xs,Input:rt,TouchAction:_r,TouchInput:Ye,MouseInput:Yi,PointerEventInput:zi,TouchMouseInput:gr,SingleTouchInput:Xa,Recognizer:Tt,AttrRecognizer:mn,Tap:so,Pan:Kr,Swipe:Ka,Pinch:zr,Rotate:ui,Press:bn,on:R,off:le,each:L,merge:Z,extend:J,assign:X,inherit:W,bindFn:z,prefixed:Ze}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=ns,(C=function(){return ns}.call(q,g,q,ee))!==k&&(ee.exports=C)}(window,document)},2601:(ee,q)=>{q.read=function(g,C,b,D,S){var k,_,v=8*S-D-1,T=(1<<v)-1,j=T>>1,O=-7,B=b?S-1:0,Q=b?-1:1,A=g[C+B];for(B+=Q,k=A&(1<<-O)-1,A>>=-O,O+=v;O>0;k=256*k+g[C+B],B+=Q,O-=8);for(_=k&(1<<-O)-1,k>>=-O,O+=D;O>0;_=256*_+g[C+B],B+=Q,O-=8);if(0===k)k=1-j;else{if(k===T)return _?NaN:1/0*(A?-1:1);_+=Math.pow(2,D),k-=j}return(A?-1:1)*_*Math.pow(2,k-D)},q.write=function(g,C,b,D,S,k){var _,v,T,j=8*k-S-1,O=(1<<j)-1,B=O>>1,Q=23===S?Math.pow(2,-24)-Math.pow(2,-77):0,A=D?0:k-1,L=D?1:-1,ae=C<0||0===C&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(v=isNaN(C)?1:0,_=O):(_=Math.floor(Math.log(C)/Math.LN2),C*(T=Math.pow(2,-_))<1&&(_--,T*=2),(C+=_+B>=1?Q/T:Q*Math.pow(2,1-B))*T>=2&&(_++,T/=2),_+B>=O?(v=0,_=O):_+B>=1?(v=(C*T-1)*Math.pow(2,S),_+=B):(v=C*Math.pow(2,B-1)*Math.pow(2,S),_=0));S>=8;g[b+A]=255&v,A+=L,v/=256,S-=8);for(_=_<<S|v,j+=S;j>0;g[b+A]=255&_,A+=L,_/=256,j-=8);g[b+A-L]|=128*ae}},6698:ee=>{ee.exports="function"==typeof Object.create?function(g,C){C&&(g.super_=C,g.prototype=Object.create(C.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,C){if(C){g.super_=C;var b=function(){};b.prototype=C.prototype,g.prototype=new b,g.prototype.constructor=g}}},4198:(ee,q,g)=>{"use strict";var C=g(7156).default;const{isArray:b,isObject:D,isString:S}=g(8254),{asArray:k}=g(3521),{prependBase:_}=g(2651),v=g(1874),T=g(1252);function O(Q){throw new v("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Q})}function B({context:Q,base:A}){if(!Q)return;const L=Q["@context"];if(S(L))Q["@context"]=_(A,L);else if(b(L))for(let ae=0;ae<L.length;++ae){const X=L[ae];S(X)?L[ae]=_(A,X):D(X)&&B({context:{"@context":X},base:A})}else if(D(L))for(const ae in L)B({context:L[ae],base:A})}ee.exports=class{constructor({sharedCache:A}){this.perOpCache=new Map,this.sharedCache=A}resolve({activeCtx:A,context:L,documentLoader:ae,base:X,cycles:J=new Set}){var Z=this;return C(function*(){L&&D(L)&&L["@context"]&&(L=L["@context"]),L=k(L);const W=[];for(const z of L){if(S(z)){let R=Z._get(z);R||(R=yield Z._resolveRemoteContext({activeCtx:A,url:z,documentLoader:ae,base:X,cycles:J})),b(R)?W.push(...R):W.push(R);continue}if(null===z){W.push(new T({document:null}));continue}D(z)||O(L);const x=JSON.stringify(z);let N=Z._get(x);N||(N=new T({document:z}),Z._cacheResolvedContext({key:x,resolved:N,tag:"static"})),W.push(N)}return W})()}_get(A){let L=this.perOpCache.get(A);if(!L){const ae=this.sharedCache.get(A);ae&&(L=ae.get("static"),L&&this.perOpCache.set(A,L))}return L}_cacheResolvedContext({key:A,resolved:L,tag:ae}){if(this.perOpCache.set(A,L),void 0!==ae){let X=this.sharedCache.get(A);X||(X=new Map,this.sharedCache.set(A,X)),X.set(ae,L)}return L}_resolveRemoteContext({activeCtx:A,url:L,documentLoader:ae,base:X,cycles:J}){var Z=this;return C(function*(){L=_(X,L);const{context:W,remoteDoc:z}=yield Z._fetchContext({activeCtx:A,url:L,documentLoader:ae,cycles:J});B({context:W,base:X=z.documentUrl||L});const x=yield Z.resolve({activeCtx:A,context:W,documentLoader:ae,base:X,cycles:J});return Z._cacheResolvedContext({key:L,resolved:x,tag:z.tag}),x})()}_fetchContext({activeCtx:A,url:L,documentLoader:ae,cycles:X}){return C(function*(){if(X.size>10)throw new v("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===A.processingMode?"loading remote context failed":"context overflow",max:10});if(X.has(L))throw new v("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===A.processingMode?"recursive context inclusion":"context overflow",url:L});let J,Z;X.add(L);try{Z=yield ae(L),J=Z.document||null,S(J)&&(J=JSON.parse(J))}catch(W){throw new v("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:L,cause:W})}if(!D(J))throw new v("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:L});return J="@context"in J?{"@context":J["@context"]}:{"@context":{}},Z.contextUrl&&(b(J["@context"])||(J["@context"]=[J["@context"]]),J["@context"].push(Z.contextUrl)),{context:J,remoteDoc:Z}})()}}},1874:ee=>{"use strict";ee.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",C="jsonld.Error",b={}){super(g),this.name=C,this.message=g,this.details=b}}},1828:ee=>{"use strict";ee.exports=q=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(C,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(C,b)},g.expand=function(C){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(C)},g.flatten=function(C){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(C)},g}},7260:(ee,q,g)=>{"use strict";ee.exports=g(1986).NQuads},4044:(ee,q,g)=>{"use strict";var C=g(7156).default;ee.exports=class{constructor(){this._requests={}}wrapLoader(D){const S=this;return S._loader=D,function(){return S.add.apply(S,arguments)}}add(D){var S=this;return C(function*(){let k=S._requests[D];if(k)return Promise.resolve(k);k=S._requests[D]=S._loader(D);try{return yield k}finally{delete S._requests[D]}})()}}},1252:(ee,q,g)=>{"use strict";const C=g(1072);ee.exports=class{constructor({document:S}){this.document=S,this.cache=new C({max:10})}getProcessed(S){return this.cache.get(S)}setProcessed(S,k){this.cache.set(S,k)}}},8809:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(1874),{isArray:D,isObject:S,isString:k,isUndefined:_}=g(8254),{isList:v,isValue:T,isGraph:j,isSimpleGraph:O,isSubjectReference:B}=g(543),{expandIri:Q,getContextValue:A,isKeyword:L,process:ae,processingMode:X}=g(9611),{removeBase:J,prependBase:Z}=g(2651),{REGEX_KEYWORD:W,addValue:z,asArray:x,compareShortestLeast:N}=g(3521),R={};function G(Te,ce,be){if("@nest"!==Q(Te,ce,{vocab:!0},be))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ee.exports=R,R.compact=function(){var Te=C(function*({activeCtx:ce,activeProperty:be=null,element:ke,options:Ne={}}){if(D(ke)){let Ke=[];for(let Me=0;Me<ke.length;++Me){const ze=yield R.compact({activeCtx:ce,activeProperty:be,element:ke[Me],options:Ne});null!==ze&&Ke.push(ze)}return Ne.compactArrays&&1===Ke.length&&0===(A(ce,be,"@container")||[]).length&&(Ke=Ke[0]),Ke}const Ze=A(ce,be,"@context");if(_(Ze)||(ce=yield ae({activeCtx:ce,localCtx:Ze,propagate:!0,overrideProtected:!0,options:Ne})),S(ke)){if(Ne.link&&"@id"in ke&&Ne.link.hasOwnProperty(ke["@id"])){const tt=Ne.link[ke["@id"]];for(let ft=0;ft<tt.length;++ft)if(tt[ft].expanded===ke)return tt[ft].compacted}if(T(ke)||B(ke)){const tt=R.compactValue({activeCtx:ce,activeProperty:be,value:ke,options:Ne});return Ne.link&&B(ke)&&(Ne.link.hasOwnProperty(ke["@id"])||(Ne.link[ke["@id"]]=[]),Ne.link[ke["@id"]].push({expanded:ke,compacted:tt})),tt}if(v(ke)&&(A(ce,be,"@container")||[]).includes("@list"))return R.compact({activeCtx:ce,activeProperty:be,element:ke["@list"],options:Ne});const Ke="@reverse"===be,Me={},ze=ce;!T(ke)&&!B(ke)&&(ce=ce.revertToPreviousContext());const Ce=A(ze,be,"@context");_(Ce)||(ce=yield ae({activeCtx:ce,localCtx:Ce,propagate:!0,overrideProtected:!0,options:Ne})),Ne.link&&"@id"in ke&&(Ne.link.hasOwnProperty(ke["@id"])||(Ne.link[ke["@id"]]=[]),Ne.link[ke["@id"]].push({expanded:ke,compacted:Me}));let je=ke["@type"]||[];je.length>1&&(je=Array.from(je).sort());const he=ce;for(const tt of je){const ft=R.compactIri({activeCtx:he,iri:tt,relativeTo:{vocab:!0}}),qe=A(ze,ft,"@context");_(qe)||(ce=yield ae({activeCtx:ce,localCtx:qe,options:Ne,propagate:!1}))}const Se=Object.keys(ke).sort();for(const tt of Se){const ft=ke[tt];if("@id"!==tt)if("@type"!==tt)if("@reverse"!==tt)if("@preserve"!==tt)if("@index"!==tt)if("@graph"!==tt&&"@list"!==tt&&"@included"!==tt&&L(tt)){const qe=R.compactIri({activeCtx:ce,iri:tt,relativeTo:{vocab:!0}});z(Me,qe,ft)}else{if(!D(ft))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ft.length){const qe=R.compactIri({activeCtx:ce,iri:tt,value:ft,relativeTo:{vocab:!0},reverse:Ke}),me=ce.mappings.has(qe)?ce.mappings.get(qe)["@nest"]:null;let F=Me;me&&(G(ce,me,Ne),S(Me[me])||(Me[me]={}),F=Me[me]),z(F,qe,ft,{propertyIsArray:!0})}for(const qe of ft){const me=R.compactIri({activeCtx:ce,iri:tt,value:qe,relativeTo:{vocab:!0},reverse:Ke}),F=ce.mappings.has(me)?ce.mappings.get(me)["@nest"]:null;let I=Me;F&&(G(ce,F,Ne),S(Me[F])||(Me[F]={}),I=Me[F]);const se=A(ce,me,"@container")||[],ie=j(qe),He=v(qe);let Je;He?Je=qe["@list"]:ie&&(Je=qe["@graph"]);let fe=yield R.compact({activeCtx:ce,activeProperty:me,element:He||ie?Je:qe,options:Ne});if(He){if(D(fe)||(fe=[fe]),se.includes("@list")){z(I,me,fe,{valueIsArray:!0,allowDuplicate:!0});continue}fe={[R.compactIri({activeCtx:ce,iri:"@list",relativeTo:{vocab:!0}})]:fe},"@index"in qe&&(fe[R.compactIri({activeCtx:ce,iri:"@index",relativeTo:{vocab:!0}})]=qe["@index"])}if(ie)if(se.includes("@graph")&&(se.includes("@id")||se.includes("@index")&&O(qe))){let re;I.hasOwnProperty(me)?re=I[me]:I[me]=re={};const $=(se.includes("@id")?qe["@id"]:qe["@index"])||R.compactIri({activeCtx:ce,iri:"@none",relativeTo:{vocab:!0}});z(re,$,fe,{propertyIsArray:!Ne.compactArrays||se.includes("@set")})}else se.includes("@graph")&&O(qe)?(D(fe)&&fe.length>1&&(fe={"@included":fe}),z(I,me,fe,{propertyIsArray:!Ne.compactArrays||se.includes("@set")})):(D(fe)&&1===fe.length&&Ne.compactArrays&&(fe=fe[0]),fe={[R.compactIri({activeCtx:ce,iri:"@graph",relativeTo:{vocab:!0}})]:fe},"@id"in qe&&(fe[R.compactIri({activeCtx:ce,iri:"@id",relativeTo:{vocab:!0}})]=qe["@id"]),"@index"in qe&&(fe[R.compactIri({activeCtx:ce,iri:"@index",relativeTo:{vocab:!0}})]=qe["@index"]),z(I,me,fe,{propertyIsArray:!Ne.compactArrays||se.includes("@set")}));else if(se.includes("@language")||se.includes("@index")||se.includes("@id")||se.includes("@type")){let re,$;if(I.hasOwnProperty(me)?re=I[me]:I[me]=re={},se.includes("@language"))T(fe)&&(fe=fe["@value"]),$=qe["@language"];else if(se.includes("@index")){const P=A(ce,me,"@index")||"@index",U=R.compactIri({activeCtx:ce,iri:P,relativeTo:{vocab:!0}});if("@index"===P)$=qe["@index"],delete fe[U];else{let pe;if([$,...pe]=x(fe[P]||[]),k($))switch(pe.length){case 0:delete fe[P];break;case 1:fe[P]=pe[0];break;default:fe[P]=pe}else $=null}}else if(se.includes("@id")){const P=R.compactIri({activeCtx:ce,iri:"@id",relativeTo:{vocab:!0}});$=fe[P],delete fe[P]}else if(se.includes("@type")){const P=R.compactIri({activeCtx:ce,iri:"@type",relativeTo:{vocab:!0}});let U;switch([$,...U]=x(fe[P]||[]),U.length){case 0:delete fe[P];break;case 1:fe[P]=U[0];break;default:fe[P]=U}1===Object.keys(fe).length&&"@id"in qe&&(fe=yield R.compact({activeCtx:ce,activeProperty:me,element:{"@id":qe["@id"]},options:Ne}))}$||($=R.compactIri({activeCtx:ce,iri:"@none",relativeTo:{vocab:!0}})),z(re,$,fe,{propertyIsArray:se.includes("@set")})}else{const re=!Ne.compactArrays||se.includes("@set")||se.includes("@list")||D(fe)&&0===fe.length||"@list"===tt||"@graph"===tt;z(I,me,fe,{propertyIsArray:re})}}}else{if((A(ce,be,"@container")||[]).includes("@index"))continue;const me=R.compactIri({activeCtx:ce,iri:tt,relativeTo:{vocab:!0}});z(Me,me,ft)}else{const qe=yield R.compact({activeCtx:ce,activeProperty:be,element:ft,options:Ne});D(qe)&&0===qe.length||z(Me,tt,qe)}else{const qe=yield R.compact({activeCtx:ce,activeProperty:"@reverse",element:ft,options:Ne});for(const me in qe)if(ce.mappings.has(me)&&ce.mappings.get(me).reverse){const F=qe[me],se=(A(ce,me,"@container")||[]).includes("@set")||!Ne.compactArrays;z(Me,me,F,{propertyIsArray:se}),delete qe[me]}if(Object.keys(qe).length>0){const me=R.compactIri({activeCtx:ce,iri:tt,relativeTo:{vocab:!0}});z(Me,me,qe)}}else{let qe=x(ft).map(ie=>R.compactIri({activeCtx:ze,iri:ie,relativeTo:{vocab:!0}}));1===qe.length&&(qe=qe[0]);const me=R.compactIri({activeCtx:ce,iri:"@type",relativeTo:{vocab:!0}}),se=(A(ce,me,"@container")||[]).includes("@set")&&X(ce,1.1)||D(qe)&&0===ft.length;z(Me,me,qe,{propertyIsArray:se})}else{let qe=x(ft).map(F=>R.compactIri({activeCtx:ce,iri:F,relativeTo:{vocab:!1},base:Ne.base}));1===qe.length&&(qe=qe[0]),Me[R.compactIri({activeCtx:ce,iri:"@id",relativeTo:{vocab:!0}})]=qe}}return Me}return ke});return function(ce){return Te.apply(this,arguments)}}(),R.compactIri=({activeCtx:Te,iri:ce,value:be=null,relativeTo:ke={vocab:!1},reverse:Ne=!1,base:Ze=null})=>{if(null===ce)return ce;Te.isPropertyTermScoped&&Te.previousContext&&(Te=Te.previousContext);const Ke=Te.getInverse();if(L(ce)&&ce in Ke&&"@none"in Ke[ce]&&"@type"in Ke[ce]["@none"]&&"@none"in Ke[ce]["@none"]["@type"])return Ke[ce]["@none"]["@type"]["@none"];if(ke.vocab&&ce in Ke){const he=Te["@language"]||"@none",Se=[];S(be)&&"@index"in be&&!("@graph"in be)&&Se.push("@index","@index@set"),S(be)&&"@preserve"in be&&(be=be["@preserve"][0]),j(be)?("@index"in be&&Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in be&&Se.push("@graph@id","@graph@id@set"),Se.push("@graph","@graph@set","@set"),"@index"in be||Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in be||Se.push("@graph@id","@graph@id@set")):S(be)&&!T(be)&&Se.push("@id","@id@set","@type","@set@type");let tt="@language",ft="@null";if(Ne)tt="@type",ft="@reverse",Se.push("@set");else if(v(be)){"@index"in be||Se.push("@list");const me=be["@list"];if(0===me.length)tt="@any",ft="@none";else{let F=0===me.length?he:null,I=null;for(let se=0;se<me.length;++se){const ie=me[se];let He="@none",Je="@none";if(T(ie)?"@direction"in ie?He=`${(ie["@language"]||"").toLowerCase()}_${ie["@direction"]}`:"@language"in ie?He=ie["@language"].toLowerCase():"@type"in ie?Je=ie["@type"]:He="@null":Je="@id",null===F?F=He:He!==F&&T(ie)&&(F="@none"),null===I?I=Je:Je!==I&&(I="@none"),"@none"===F&&"@none"===I)break}F=F||"@none",I=I||"@none","@none"!==I?(tt="@type",ft=I):ft=F}}else{if(T(be))if("@language"in be&&!("@index"in be)){Se.push("@language","@language@set"),ft=be["@language"];const me=be["@direction"];me&&(ft=`${ft}_${me}`)}else"@direction"in be&&!("@index"in be)?ft=`_${be["@direction"]}`:"@type"in be&&(tt="@type",ft=be["@type"]);else tt="@type",ft="@id";Se.push("@set")}Se.push("@none"),S(be)&&!("@index"in be)&&Se.push("@index","@index@set"),T(be)&&1===Object.keys(be).length&&Se.push("@language","@language@set");const qe=function le(Te,ce,be,ke,Ne,Ze){null===Ze&&(Ze="@null");const Ke=[];if(("@id"===Ze||"@reverse"===Ze)&&S(be)&&"@id"in be){"@reverse"===Ze&&Ke.push("@reverse");const ze=R.compactIri({activeCtx:Te,iri:be["@id"],relativeTo:{vocab:!0}});Te.mappings.has(ze)&&Te.mappings.get(ze)&&Te.mappings.get(ze)["@id"]===be["@id"]?Ke.push.apply(Ke,["@vocab","@id"]):Ke.push.apply(Ke,["@id","@vocab"])}else{Ke.push(Ze);const ze=Ke.find(Ce=>Ce.includes("_"));ze&&Ke.push(ze.replace(/^[^_]+_/,"_"))}Ke.push("@none");const Me=Te.inverse[ce];for(const ze of ke){if(!(ze in Me))continue;const Ce=Me[ze][Ne];for(const je of Ke)if(je in Ce)return Ce[je]}return null}(Te,ce,be,Se,tt,ft);if(null!==qe)return qe}if(ke.vocab&&"@vocab"in Te){const he=Te["@vocab"];if(0===ce.indexOf(he)&&ce!==he){const Se=ce.substr(he.length);if(!Te.mappings.has(Se))return Se}}let Me=null;const ze=[];let Ce=Te.fastCurieMap;const je=ce.length-1;for(let he=0;he<je&&ce[he]in Ce;++he)Ce=Ce[ce[he]],""in Ce&&ze.push(Ce[""][0]);for(let he=ze.length-1;he>=0;--he){const Se=ze[he],tt=Se.terms;for(const ft of tt){const qe=ft+":"+ce.substr(Se.iri.length);Te.mappings.get(ft)._prefix&&(!Te.mappings.has(qe)||null===be&&Te.mappings.get(qe)["@id"]===ce)&&(null===Me||N(qe,Me)<0)&&(Me=qe)}}if(null!==Me)return Me;for(const[he,Se]of Te.mappings)if(Se&&Se._prefix&&ce.startsWith(he+":"))throw new b(`Absolute IRI "${ce}" confused with prefix "${he}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Te});if(!ke.vocab){if("@base"in Te){if(Te["@base"]){const he=J(Z(Ze,Te["@base"]),ce);return W.test(he)?`./${he}`:he}return ce}return J(Ze,ce)}return ce},R.compactValue=({activeCtx:Te,activeProperty:ce,value:be,options:ke})=>{if(T(be)){const Me=A(Te,ce,"@type"),ze=A(Te,ce,"@language"),Ce=A(Te,ce,"@direction"),je=A(Te,ce,"@container")||[],he="@index"in be&&!je.includes("@index");if(!he&&"@none"!==Me&&(be["@type"]===Me||"@language"in be&&be["@language"]===ze&&"@direction"in be&&be["@direction"]===Ce||"@language"in be&&be["@language"]===ze||"@direction"in be&&be["@direction"]===Ce))return be["@value"];const Se=Object.keys(be).length,tt=1===Se||2===Se&&"@index"in be&&!he,ft="@language"in Te,qe=k(be["@value"]),me=Te.mappings.has(ce)&&null===Te.mappings.get(ce)["@language"];if(tt&&"@none"!==Me&&(!ft||!qe||me))return be["@value"];const F={};return he&&(F[R.compactIri({activeCtx:Te,iri:"@index",relativeTo:{vocab:!0}})]=be["@index"]),"@type"in be?F[R.compactIri({activeCtx:Te,iri:"@type",relativeTo:{vocab:!0}})]=R.compactIri({activeCtx:Te,iri:be["@type"],relativeTo:{vocab:!0}}):"@language"in be&&(F[R.compactIri({activeCtx:Te,iri:"@language",relativeTo:{vocab:!0}})]=be["@language"]),"@direction"in be&&(F[R.compactIri({activeCtx:Te,iri:"@direction",relativeTo:{vocab:!0}})]=be["@direction"]),F[R.compactIri({activeCtx:Te,iri:"@value",relativeTo:{vocab:!0}})]=be["@value"],F}const Ne=Q(Te,ce,{vocab:!0},ke),Ze=A(Te,ce,"@type"),Ke=R.compactIri({activeCtx:Te,iri:be["@id"],relativeTo:{vocab:"@vocab"===Ze},base:ke.base});return"@id"===Ze||"@vocab"===Ze||"@graph"===Ne?Ke:{[R.compactIri({activeCtx:Te,iri:"@id",relativeTo:{vocab:!0}})]:Ke}}},6982:ee=>{"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";ee.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(3521),D=g(1874),{isArray:S,isObject:k,isString:_,isUndefined:v}=g(8254),{isAbsolute:T,isRelative:j,prependBase:O}=g(2651),{handleEvent:B}=g(3855),{REGEX_BCP47:Q,REGEX_KEYWORD:A,asArray:L,compareShortestLeast:ae}=g(3521),X=new Map,Z={};function W(x,N,R,le,G,Te){if(null===N||!_(N)||Z.isKeyword(N))return N;if(N.match(A))return null;if(le&&le.hasOwnProperty(N)&&!0!==G.get(N)&&Z.createTermDefinition({activeCtx:x,localCtx:le,term:N,defined:G,options:Te}),(R=R||{}).vocab){const be=x.mappings.get(N);if(null===be)return null;if(k(be)&&"@id"in be)return be["@id"]}const ce=N.indexOf(":");if(ce>0){const be=N.substr(0,ce),ke=N.substr(ce+1);if("_"===be||0===ke.indexOf("//"))return N;le&&le.hasOwnProperty(be)&&Z.createTermDefinition({activeCtx:x,localCtx:le,term:be,defined:G,options:Te});const Ne=x.mappings.get(be);if(Ne&&Ne._prefix)return Ne["@id"]+ke;if(T(N))return N}if(R.vocab&&"@vocab"in x)N=x["@vocab"]+N;else if(R.base){let be,ke;"@base"in x?x["@base"]?(ke=O(Te.base,x["@base"]),be=O(ke,N)):(ke=x["@base"],be=N):(ke=Te.base,be=O(Te.base,N)),N=be}return N}function z(x,N){if(!x||"object"!=typeof x||!N||"object"!=typeof N)return x===N;const R=Array.isArray(x);if(R!==Array.isArray(N))return!1;if(R){if(x.length!==N.length)return!1;for(let Te=0;Te<x.length;++Te)if(!z(x[Te],N[Te]))return!1;return!0}const le=Object.keys(x),G=Object.keys(N);if(le.length!==G.length)return!1;for(const Te in x){let ce=x[Te],be=N[Te];if("@container"===Te&&Array.isArray(ce)&&Array.isArray(be)&&(ce=ce.slice().sort(),be=be.slice().sort()),!z(ce,be))return!1}return!0}ee.exports=Z,Z.process=function(){var x=C(function*({activeCtx:N,localCtx:R,options:le,propagate:G=!0,overrideProtected:Te=!1,cycles:ce=new Set}){if(k(R)&&"@context"in R&&S(R["@context"])&&(R=R["@context"]),0===L(R).length)return N;const ke=[],Ne=[({event:ze,next:Ce})=>{ke.push(ze),Ce()}];le.eventHandler&&Ne.push(le.eventHandler);const Ze=le;le={...le,eventHandler:Ne};const Ke=yield le.contextResolver.resolve({activeCtx:N,context:R,documentLoader:le.documentLoader,base:le.base});k(Ke[0].document)&&"boolean"==typeof Ke[0].document["@propagate"]&&(G=Ke[0].document["@propagate"]);let Me=N;!G&&!Me.previousContext&&(Me=Me.clone(),Me.previousContext=N);for(const ze of Ke){let{document:Ce}=ze;if(N=Me,null===Ce){if(!Te&&0!==Object.keys(N.protected).length)throw new D("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Me=N=Z.getInitialContext(le).clone();continue}const je=ze.getProcessed(N);if(je){if(Ze.eventHandler)for(const Se of je.events)B({event:Se,options:Ze});Me=N=je.context;continue}if(k(Ce)&&"@context"in Ce&&(Ce=Ce["@context"]),!k(Ce))throw new D("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ce});Me=Me.clone();const he=new Map;if("@version"in Ce){if(1.1!==Ce["@version"])throw new D("Unsupported JSON-LD version: "+Ce["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ce});if(N.processingMode&&"json-ld-1.0"===N.processingMode)throw new D("@version: "+Ce["@version"]+" not compatible with "+N.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ce});Me.processingMode="json-ld-1.1",Me["@version"]=Ce["@version"],he.set("@version",!0)}if(Me.processingMode=Me.processingMode||N.processingMode,"@base"in Ce){let Se=Ce["@base"];if(null!==Se&&!T(Se)){if(!j(Se))throw new D('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ce});Se=O(Me["@base"],Se)}Me["@base"]=Se,he.set("@base",!0)}if("@vocab"in Ce){const Se=Ce["@vocab"];if(null===Se)delete Me["@vocab"];else{if(!_(Se))throw new D('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ce});if(!T(Se)&&Z.processingMode(Me,1))throw new D('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ce});{const tt=W(Me,Se,{vocab:!0,base:!0},void 0,void 0,le);T(tt)||le.eventHandler&&B({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:tt}},options:le}),Me["@vocab"]=tt}}he.set("@vocab",!0)}if("@language"in Ce){const Se=Ce["@language"];if(null===Se)delete Me["@language"];else{if(!_(Se))throw new D('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ce});Se.match(Q)||le.eventHandler&&B({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Se}},options:le}),Me["@language"]=Se.toLowerCase()}he.set("@language",!0)}if("@direction"in Ce){const Se=Ce["@direction"];if("json-ld-1.0"===N.processingMode)throw new D("Invalid JSON-LD syntax; @direction not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ce});if(null===Se)delete Me["@direction"];else{if("ltr"!==Se&&"rtl"!==Se)throw new D('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ce});Me["@direction"]=Se}he.set("@direction",!0)}if("@propagate"in Ce){const Se=Ce["@propagate"];if("json-ld-1.0"===N.processingMode)throw new D("Invalid JSON-LD syntax; @propagate not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ce});if("boolean"!=typeof Se)throw new D("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:R});he.set("@propagate",!0)}if("@import"in Ce){const Se=Ce["@import"];if("json-ld-1.0"===N.processingMode)throw new D("Invalid JSON-LD syntax; @import not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ce});if(!_(Se))throw new D("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:R});const tt=yield le.contextResolver.resolve({activeCtx:N,context:Se,documentLoader:le.documentLoader,base:le.base});if(1!==tt.length)throw new D("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:R});const ft=tt[0].getProcessed(N);if(ft)Ce=ft;else{const qe=tt[0].document;if("@import"in qe)throw new D("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:R});for(const me in qe)Ce.hasOwnProperty(me)||(Ce[me]=qe[me]);tt[0].setProcessed(N,Ce)}he.set("@import",!0)}he.set("@protected",Ce["@protected"]||!1);for(const Se in Ce)if(Z.createTermDefinition({activeCtx:Me,localCtx:Ce,term:Se,defined:he,options:le,overrideProtected:Te}),k(Ce[Se])&&"@context"in Ce[Se]){const tt=Ce[Se]["@context"];let ft=!0;if(_(tt)){const qe=O(le.base,tt);ce.has(qe)?ft=!1:ce.add(qe)}if(ft)try{yield Z.process({activeCtx:Me.clone(),localCtx:Ce[Se]["@context"],overrideProtected:!0,options:le,cycles:ce})}catch{throw new D("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ce[Se]["@context"],term:Se})}}ze.setProcessed(N,{context:Me,events:ke})}return Me});return function(N){return x.apply(this,arguments)}}(),Z.createTermDefinition=({activeCtx:x,localCtx:N,term:R,defined:le,options:G,overrideProtected:Te=!1})=>{if(le.has(R)){if(le.get(R))return;throw new D("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:N,term:R})}let ce;if(le.set(R,!1),N.hasOwnProperty(R)&&(ce=N[R]),"@type"===R&&k(ce)&&"@set"===(ce["@container"]||"@set")&&Z.processingMode(x,1.1)){const ze=["@container","@id","@protected"],Ce=Object.keys(ce);if(0===Ce.length||Ce.some(je=>!ze.includes(je)))throw new D("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:N,term:R})}else{if(Z.isKeyword(R))throw new D("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:N,term:R});if(R.match(A))return void(G.eventHandler&&B({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:R}},options:G}));if(""===R)throw new D("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:N})}const be=x.mappings.get(R);x.mappings.has(R)&&x.mappings.delete(R);let ke=!1;if((_(ce)||null===ce)&&(ke=!0,ce={"@id":ce}),!k(ce))throw new D("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:N});const Ne={};x.mappings.set(R,Ne),Ne.reverse=!1;const Ze=["@container","@id","@language","@reverse","@type"];Z.processingMode(x,1.1)&&Ze.push("@context","@direction","@index","@nest","@prefix","@protected");for(const ze in ce)if(!Ze.includes(ze))throw new D("Invalid JSON-LD syntax; a term definition must not contain "+ze,"jsonld.SyntaxError",{code:"invalid term definition",context:N});const Ke=R.indexOf(":");if(Ne._termHasColon=Ke>0,"@reverse"in ce){if("@id"in ce)throw new D("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:N});if("@nest"in ce)throw new D("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:N});const ze=ce["@reverse"];if(!_(ze))throw new D("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});if(ze.match(A))return G.eventHandler&&B({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:ze}},options:G}),void(be?x.mappings.set(R,be):x.mappings.delete(R));const Ce=W(x,ze,{vocab:!0,base:!1},N,le,G);if(!T(Ce))throw new D("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});Ne["@id"]=Ce,Ne.reverse=!0}else if("@id"in ce){let ze=ce["@id"];if(ze&&!_(ze))throw new D("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});if(null===ze)Ne["@id"]=null;else{if(!Z.isKeyword(ze)&&ze.match(A))return G.eventHandler&&B({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:ze}},options:G}),void(be?x.mappings.set(R,be):x.mappings.delete(R));if(ze!==R){if(ze=W(x,ze,{vocab:!0,base:!1},N,le,G),!T(ze)&&!Z.isKeyword(ze))throw new D("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});if(R.match(/(?::[^:])|\//)&&W(x,R,{vocab:!0,base:!1},N,new Map(le).set(R,!0),G)!==ze)throw new D("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});Ne["@id"]=ze,Ne._prefix=ke&&!Ne._termHasColon&&null!==ze.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Ne))if(Ne._termHasColon){const ze=R.substr(0,Ke);if(N.hasOwnProperty(ze)&&Z.createTermDefinition({activeCtx:x,localCtx:N,term:ze,defined:le,options:G}),x.mappings.has(ze)){const Ce=R.substr(Ke+1);Ne["@id"]=x.mappings.get(ze)["@id"]+Ce}else Ne["@id"]=R}else if("@type"===R)Ne["@id"]=R;else{if(!("@vocab"in x))throw new D("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N,term:R});Ne["@id"]=x["@vocab"]+R}if((!0===ce["@protected"]||!0===le.get("@protected")&&!1!==ce["@protected"])&&(x.protected[R]=!0,Ne.protected=!0),le.set(R,!0),"@type"in ce){let ze=ce["@type"];if(!_(ze))throw new D("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:N});if("@json"===ze||"@none"===ze){if(Z.processingMode(x,1))throw new D(`Invalid JSON-LD syntax; an @context @type value must not be "${ze}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:N})}else if("@id"!==ze&&"@vocab"!==ze){if(ze=W(x,ze,{vocab:!0,base:!1},N,le,G),!T(ze))throw new D("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:N});if(0===ze.indexOf("_:"))throw new D("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:N})}Ne["@type"]=ze}if("@container"in ce){const ze=_(ce["@container"])?[ce["@container"]]:ce["@container"]||[],Ce=["@list","@set","@index","@language"];let je=!0;const he=ze.includes("@set");if(Z.processingMode(x,1.1)){if(Ce.push("@graph","@id","@type"),ze.includes("@list")){if(1!==ze.length)throw new D("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:N})}else if(ze.includes("@graph")){if(ze.some(Se=>"@graph"!==Se&&"@id"!==Se&&"@index"!==Se&&"@set"!==Se))throw new D("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:N})}else je&=ze.length<=(he?2:1);if(ze.includes("@type")&&(Ne["@type"]=Ne["@type"]||"@id",!["@id","@vocab"].includes(Ne["@type"])))throw new D("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:N})}else je&=!S(ce["@container"]),je&=ze.length<=1;if(je&=ze.every(Se=>Ce.includes(Se)),je&=!(he&&ze.includes("@list")),!je)throw new D("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ce.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:N});if(Ne.reverse&&!ze.every(Se=>["@index","@set"].includes(Se)))throw new D("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:N});Ne["@container"]=ze}if("@index"in ce){if(!("@container"in ce)||!Ne["@container"].includes("@index"))throw new D(`Invalid JSON-LD syntax; @index without @index in @container: "${ce["@index"]}" on term "${R}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:N});if(!_(ce["@index"])||0===ce["@index"].indexOf("@"))throw new D(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ce["@index"]}" on term "${R}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:N});Ne["@index"]=ce["@index"]}if("@context"in ce&&(Ne["@context"]=ce["@context"]),"@language"in ce&&!("@type"in ce)){let ze=ce["@language"];if(null!==ze&&!_(ze))throw new D("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:N});null!==ze&&(ze=ze.toLowerCase()),Ne["@language"]=ze}if("@prefix"in ce){if(R.match(/:|\//))throw new D("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:N});if(Z.isKeyword(Ne["@id"]))throw new D("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:N});if("boolean"!=typeof ce["@prefix"])throw new D("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:N});Ne._prefix=!0===ce["@prefix"]}if("@direction"in ce){const ze=ce["@direction"];if(null!==ze&&"ltr"!==ze&&"rtl"!==ze)throw new D('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:N});Ne["@direction"]=ze}if("@nest"in ce){const ze=ce["@nest"];if(!_(ze)||"@nest"!==ze&&0===ze.indexOf("@"))throw new D("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:N});Ne["@nest"]=ze}const Me=Ne["@id"];if("@context"===Me||"@preserve"===Me)throw new D("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:N});if(be&&be.protected&&!Te&&(x.protected[R]=!0,Ne.protected=!0,!z(be,Ne)))throw new D("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:N,term:R})},Z.expandIri=(x,N,R,le)=>W(x,N,R,void 0,void 0,le),Z.getInitialContext=x=>{const N=JSON.stringify({processingMode:x.processingMode}),R=X.get(N);if(R)return R;const le={processingMode:x.processingMode,mappings:new Map,inverse:null,getInverse:function G(){const Ne=this;if(Ne.inverse)return Ne.inverse;const Ze=Ne.inverse={},Ke=Ne.fastCurieMap={},Me={},ze=(Ne["@language"]||"@none").toLowerCase(),Ce=Ne["@direction"],je=Ne.mappings,he=[...je.keys()].sort(ae);for(const Se of he){const tt=je.get(Se);if(null===tt)continue;let ft=tt["@container"]||"@none";if(ft=[].concat(ft).sort().join(""),null===tt["@id"])continue;const qe=L(tt["@id"]);for(const me of qe){let F=Ze[me];const I=Z.isKeyword(me);if(F)!I&&!tt._termHasColon&&Me[me].push(Se);else if(Ze[me]=F={},!I&&!tt._termHasColon){Me[me]=[Se];const se={iri:me,terms:Me[me]};me[0]in Ke?Ke[me[0]].push(se):Ke[me[0]]=[se]}if(F[ft]||(F[ft]={"@language":{},"@type":{},"@any":{}}),F=F[ft],ce(Se,F["@any"],"@none"),tt.reverse)ce(Se,F["@type"],"@reverse");else if("@none"===tt["@type"])ce(Se,F["@any"],"@none"),ce(Se,F["@language"],"@none"),ce(Se,F["@type"],"@none");else if("@type"in tt)ce(Se,F["@type"],tt["@type"]);else if("@language"in tt&&"@direction"in tt){const se=tt["@language"],ie=tt["@direction"];ce(Se,F["@language"],se&&ie?`${se}_${ie}`.toLowerCase():se?se.toLowerCase():ie?`_${ie}`:"@null")}else"@language"in tt?ce(Se,F["@language"],(tt["@language"]||"@null").toLowerCase()):"@direction"in tt?ce(Se,F["@language"],tt["@direction"]?`_${tt["@direction"]}`:"@none"):Ce?(ce(Se,F["@language"],`_${Ce}`),ce(Se,F["@language"],"@none"),ce(Se,F["@type"],"@none")):(ce(Se,F["@language"],ze),ce(Se,F["@language"],"@none"),ce(Se,F["@type"],"@none"))}}for(const Se in Ke)Te(Ke,Se,1);return Ze},clone:function be(){const Ne={};return Ne.mappings=b.clone(this.mappings),Ne.clone=this.clone,Ne.inverse=null,Ne.getInverse=this.getInverse,Ne.protected=b.clone(this.protected),this.previousContext&&(Ne.previousContext=this.previousContext.clone()),Ne.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Ne["@base"]=this["@base"]),"@language"in this&&(Ne["@language"]=this["@language"]),"@vocab"in this&&(Ne["@vocab"]=this["@vocab"]),Ne},revertToPreviousContext:function ke(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===X.size&&X.clear(),X.set(N,le),le;function Te(Ne,Ze,Ke){const Me=Ne[Ze],ze=Ne[Ze]={};let Ce,je;for(const he of Me)Ce=he.iri,je=Ke>=Ce.length?"":Ce[Ke],je in ze?ze[je].push(he):ze[je]=[he];for(const he in ze)""!==he&&Te(ze,he,Ke+1)}function ce(Ne,Ze,Ke){Ze.hasOwnProperty(Ke)||(Ze[Ke]=Ne)}},Z.getContextValue=(x,N,R)=>{if(null===N)return"@context"===R?void 0:null;if(x.mappings.has(N)){const le=x.mappings.get(N);if(v(R))return le;if(le.hasOwnProperty(R))return le[R]}return"@language"===R&&R in x||"@direction"===R&&R in x?x[R]:"@context"!==R?null:void 0},Z.processingMode=(x,N)=>N.toString()>="1.1"?!x.processingMode||x.processingMode>="json-ld-"+N.toString():"json-ld-1.0"===x.processingMode,Z.isKeyword=x=>{if(!_(x)||"@"!==x[0])return!1;switch(x){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(ee,q,g)=>{"use strict";var C=g(7156).default;const{parseLinkHeader:b,buildHeaders:D}=g(3521),{LINK_HEADER_CONTEXT:S}=g(6982),k=g(1874),_=g(4044),{prependBase:v}=g(2651),T=/(^|(\r\n))link:/i;ee.exports=({secure:O,headers:B={},xhr:Q}={headers:{}})=>{return B=D(B),(new _).wrapLoader(L);function L(X){return ae.apply(this,arguments)}function ae(){return ae=C(function*(X){if(0!==X.indexOf("http:")&&0!==X.indexOf("https:"))throw new k('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:X});if(O&&0!==X.indexOf("https"))throw new k('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:X});let J;try{J=yield function j(O,B,Q){const A=new(O=O||XMLHttpRequest);return new Promise((L,ae)=>{A.onload=()=>L(A),A.onerror=X=>ae(X),A.open("GET",B,!0);for(const X in Q)A.setRequestHeader(X,Q[X]);A.send()})}(Q,X,B)}catch(N){throw new k("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:X,cause:N})}if(J.status>=400)throw new k("URL could not be dereferenced: "+J.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:X,httpStatusCode:J.status});let Z={contextUrl:null,documentUrl:X,document:J.response},W=null;const z=J.getResponseHeader("Content-Type");let x;if(T.test(J.getAllResponseHeaders())&&(x=J.getResponseHeader("Link")),x&&"application/ld+json"!==z){const N=b(x),R=N[S];if(Array.isArray(R))throw new k("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:X});R&&(Z.contextUrl=R.target),W=N.alternate,W&&"application/ld+json"==W.type&&!(z||"").match(/^application\/(\w*\+)?json$/)&&(Z=yield L(v(X,W.target)))}return Z}),ae.apply(this,arguments)}}},3855:(ee,q,g)=>{"use strict";const C=g(1874),{isArray:b}=g(8254),{asArray:D}=g(3521),S={};function k({event:v,handlers:T}){let j=!0;for(let O=0;j&&O<T.length;++O){j=!1;const B=T[O];if(b(B))j=k({event:v,handlers:B});else if("function"==typeof B)B({event:v,next:()=>{j=!0}});else{if("object"!=typeof B)throw new C("Invalid event handler.","jsonld.InvalidEventHandler",{event:v});v.code in B?B[v.code]({event:v,next:()=>{j=!0}}):j=!0}}return j}ee.exports=S,S.defaultEventHandler=null,S.setupEventHandler=({options:v={}})=>{const T=[].concat(v.safe?S.safeEventHandler:[],v.eventHandler?D(v.eventHandler):[],S.defaultEventHandler?S.defaultEventHandler:[]);return 0===T.length?null:T},S.handleEvent=({event:v,options:T})=>{k({event:v,handlers:T.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);S.safeEventHandler=function({event:T,next:j}){if("warning"===T.level&&_.has(T.code))throw new C("Safe mode validation error.","jsonld.ValidationError",{event:T});j()},S.logEventHandler=function({event:T,next:j}){console.log(`EVENT: ${T.message}`,{event:T}),j()},S.logWarningEventHandler=function({event:T,next:j}){"warning"===T.level&&console.warn(`WARNING: ${T.message}`,{event:T}),j()},S.unhandledEventHandler=function({event:T}){throw new C("No handler for event.","jsonld.UnhandledEvent",{event:T})},S.setDefaultEventHandler=function({eventHandler:v}={}){S.defaultEventHandler=v?D(v):null}},3860:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(1874),{isArray:D,isObject:S,isEmptyObject:k,isString:_,isUndefined:v}=g(8254),{isList:T,isValue:j,isGraph:O,isSubject:B}=g(543),{expandIri:Q,getContextValue:A,isKeyword:L,process:ae,processingMode:X}=g(9611),{isAbsolute:J}=g(2651),{REGEX_BCP47:Z,REGEX_KEYWORD:W,addValue:z,asArray:x,getValues:N,validateTypeValue:R}=g(3521),{handleEvent:le}=g(3855),G={};function Te({value:Me,count:ze,options:Ce}){if(0===ze||"@value"in Me||"@list"in Me||1===ze&&"@id"in Me){if(Ce.eventHandler){let je,he;0===ze?(je="empty object",he="Dropping empty object."):"@value"in Me?(je="object with only @value",he="Dropping object with only @value."):"@list"in Me?(je="object with only @list",he="Dropping object with only @list."):1===ze&&"@id"in Me&&(je="object with only @id",he="Dropping object with only @id."),le({event:{type:["JsonLdEvent"],code:je,level:"warning",message:he,details:{value:Me}},options:Ce})}return null}return Me}function ce(Me){return be.apply(this,arguments)}function be(){return(be=C(function*({activeCtx:Me,activeProperty:ze,expandedActiveProperty:Ce,element:je,expandedParent:he,options:Se={},insideList:tt,typeKey:ft,typeScopedContext:qe}){const me=Object.keys(je).sort(),F=[];let I;const se=je[ft]&&"@json"===Q(Me,D(je[ft])?je[ft][0]:je[ft],{vocab:!0},{...Se,typeExpansion:!0});for(const ie of me){let Je,He=je[ie];if("@context"===ie)continue;const fe=Q(Me,ie,{vocab:!0},Se);if(null===fe||!J(fe)&&!L(fe)){Se.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:ie,expandedProperty:fe}},options:Se});continue}if(L(fe)){if("@reverse"===Ce)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:He});if(fe in he&&"@included"!==fe&&"@type"!==fe)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:fe})}if("@id"===fe){if(!_(He)){if(!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:He});if(S(He)){if(!k(He))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He})}else{if(!D(He))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He});if(!He.every(U=>_(U)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He})}}z(he,"@id",x(He).map(U=>{if(_(U)){const pe=Q(Me,U,{base:!0},Se);return Se.eventHandler&&(null===pe?le(null===U?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:U}},options:Se}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:U}},options:Se}):J(pe)||le({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:U,expandedId:pe}},options:Se})),pe}return U}),{propertyIsArray:Se.isFrame});continue}if("@type"===fe){S(He)&&(He=Object.fromEntries(Object.entries(He).map(([U,pe])=>[Q(qe,U,{vocab:!0}),x(pe).map($e=>Q(qe,$e,{base:!0,vocab:!0},{...Se,typeExpansion:!0}))]))),R(He,Se.isFrame),z(he,"@type",x(He).map(U=>{if(_(U)){const pe=Q(qe,U,{base:!0,vocab:!0},{...Se,typeExpansion:!0});return"@json"!==pe&&!J(pe)&&Se.eventHandler&&le({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:U}},options:Se}),pe}return U}),{propertyIsArray:!!Se.isFrame});continue}if("@included"===fe&&X(Me,1.1)){const U=x(yield G.expand({activeCtx:Me,activeProperty:ze,element:He,options:Se}));if(!U.every(pe=>B(pe)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:He});z(he,"@included",U,{propertyIsArray:!0});continue}if("@graph"===fe&&!S(He)&&!D(He))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:He});if("@value"===fe){I=He,se&&X(Me,1.1)?he["@value"]=He:z(he,"@value",He,{propertyIsArray:Se.isFrame});continue}if("@language"===fe){if(null===He)continue;if(!_(He)&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:He});He=x(He).map(U=>_(U)?U.toLowerCase():U);for(const U of He)_(U)&&!U.match(Z)&&Se.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:U}},options:Se});z(he,"@language",He,{propertyIsArray:Se.isFrame});continue}if("@direction"===fe){if(!_(He)&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:He});He=x(He);for(const U of He)if(_(U)&&"ltr"!==U&&"rtl"!==U)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:He});z(he,"@direction",He,{propertyIsArray:Se.isFrame});continue}if("@index"===fe){if(!_(He))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:He});z(he,"@index",He);continue}if("@reverse"===fe){if(!S(He))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:He});if(Je=yield G.expand({activeCtx:Me,activeProperty:"@reverse",element:He,options:Se}),"@reverse"in Je)for(const pe in Je["@reverse"])z(he,pe,Je["@reverse"][pe],{propertyIsArray:!0});let U=he["@reverse"]||null;for(const pe in Je){if("@reverse"===pe)continue;null===U&&(U=he["@reverse"]={}),z(U,pe,[],{propertyIsArray:!0});const $e=Je[pe];for(let ye=0;ye<$e.length;++ye){const Ve=$e[ye];if(j(Ve)||T(Ve))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Je});z(U,pe,Ve,{propertyIsArray:!0})}}continue}if("@nest"===fe){F.push(ie);continue}let re=Me;const $=A(Me,ie,"@context");v($)||(re=yield ae({activeCtx:Me,localCtx:$,propagate:!0,overrideProtected:!0,options:Se}));const P=A(Me,ie,"@container")||[];if(P.includes("@language")&&S(He))Je=Ne(re,He,A(re,ie,"@direction"),Se);else if(P.includes("@index")&&S(He)){const U=P.includes("@graph"),pe=A(re,ie,"@index")||"@index",$e="@index"!==pe&&Q(Me,pe,{vocab:!0},Se);Je=yield Ze({activeCtx:re,options:Se,activeProperty:ie,value:He,asGraph:U,indexKey:pe,propertyIndex:$e})}else if(P.includes("@id")&&S(He)){const U=P.includes("@graph");Je=yield Ze({activeCtx:re,options:Se,activeProperty:ie,value:He,asGraph:U,indexKey:"@id"})}else if(P.includes("@type")&&S(He))Je=yield Ze({activeCtx:re.revertToPreviousContext(),options:Se,activeProperty:ie,value:He,asGraph:!1,indexKey:"@type"});else{const U="@list"===fe;if(U||"@set"===fe){let pe=ze;U&&"@graph"===Ce&&(pe=null),Je=yield G.expand({activeCtx:re,activeProperty:pe,element:He,options:Se,insideList:U})}else Je="@json"===A(Me,ie,"@type")?{"@type":"@json","@value":He}:yield G.expand({activeCtx:re,activeProperty:ie,element:He,options:Se,insideList:!1})}if(null!==Je||"@value"===fe){if("@list"!==fe&&!T(Je)&&P.includes("@list")&&(Je={"@list":x(Je)}),P.includes("@graph")&&!P.some(U=>"@id"===U||"@index"===U)){if(Je=x(Je),Se.isFrame||(Je=Je.filter(U=>null!==Te({value:U,count:Object.keys(U).length,options:Se}))),0===Je.length)continue;Je=Je.map(U=>({"@graph":x(U)}))}if(re.mappings.has(ie)&&re.mappings.get(ie).reverse){const U=he["@reverse"]=he["@reverse"]||{};Je=x(Je);for(let pe=0;pe<Je.length;++pe){const $e=Je[pe];if(j($e)||T($e))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Je});z(U,fe,$e,{propertyIsArray:!0})}continue}z(he,fe,Je,{propertyIsArray:!0})}}if("@value"in he&&("@json"!==he["@type"]||!X(Me,1.1))&&(S(I)||D(I))&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:I});for(const ie of F){const He=D(je[ie])?je[ie]:[je[ie]];for(const Je of He){if(!S(Je)||Object.keys(Je).some(fe=>"@value"===Q(Me,fe,{vocab:!0},Se)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Je});yield ce({activeCtx:Me,activeProperty:ze,expandedActiveProperty:Ce,element:Je,expandedParent:he,options:Se,insideList:tt,typeScopedContext:qe,typeKey:ft})}}})).apply(this,arguments)}function ke({activeCtx:Me,activeProperty:ze,value:Ce,options:je}){if(null==Ce)return null;const he=Q(Me,ze,{vocab:!0},je);if("@id"===he)return Q(Me,Ce,{base:!0},je);if("@type"===he)return Q(Me,Ce,{vocab:!0,base:!0},{...je,typeExpansion:!0});const Se=A(Me,ze,"@type");if(("@id"===Se||"@graph"===he)&&_(Ce)){const ft=Q(Me,Ce,{base:!0},je);return null===ft&&Ce.match(W)&&je.eventHandler&&le({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:ze}},options:je}),{"@id":ft}}if("@vocab"===Se&&_(Ce))return{"@id":Q(Me,Ce,{vocab:!0,base:!0},je)};if(L(he))return Ce;const tt={};if(Se&&!["@id","@vocab","@none"].includes(Se))tt["@type"]=Se;else if(_(Ce)){const ft=A(Me,ze,"@language");null!==ft&&(tt["@language"]=ft);const qe=A(Me,ze,"@direction");null!==qe&&(tt["@direction"]=qe)}return["boolean","number","string"].includes(typeof Ce)||(Ce=Ce.toString()),tt["@value"]=Ce,tt}function Ne(Me,ze,Ce,je){const he=[],Se=Object.keys(ze).sort();for(const tt of Se){const ft=Q(Me,tt,{vocab:!0},je);let qe=ze[tt];D(qe)||(qe=[qe]);for(const me of qe){if(null===me)continue;if(!_(me))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ze});const F={"@value":me};"@none"!==ft&&(tt.match(Z)||je.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:tt}},options:je}),F["@language"]=tt.toLowerCase()),Ce&&(F["@direction"]=Ce),he.push(F)}}return he}function Ze(Me){return Ke.apply(this,arguments)}function Ke(){return(Ke=C(function*({activeCtx:Me,options:ze,activeProperty:Ce,value:je,asGraph:he,indexKey:Se,propertyIndex:tt}){const ft=[],qe=Object.keys(je).sort(),me="@type"===Se;for(let F of qe){if(me){const ie=A(Me,F,"@context");v(ie)||(Me=yield ae({activeCtx:Me,localCtx:ie,propagate:!1,options:ze}))}let se,I=je[F];D(I)||(I=[I]),I=yield G.expand({activeCtx:Me,activeProperty:Ce,element:I,options:ze,insideList:!1,insideIndex:!0}),se=tt?"@none"===F?"@none":ke({activeCtx:Me,activeProperty:Se,value:F,options:ze}):Q(Me,F,{vocab:!0},ze),"@id"===Se?F=Q(Me,F,{base:!0},ze):me&&(F=se);for(let ie of I){if(he&&!O(ie)&&(ie={"@graph":[ie]}),"@type"===Se)"@none"===se||(ie["@type"]=ie["@type"]?[F].concat(ie["@type"]):[F]);else{if(j(ie)&&!["@language","@type","@index"].includes(Se))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Se}".`,"jsonld.SyntaxError",{code:"invalid value object",value:ie});tt?"@none"!==se&&z(ie,tt,se,{propertyIsArray:!0,prependValue:!0}):"@none"!==se&&!(Se in ie)&&(ie[Se]=F)}ft.push(ie)}}return ft})).apply(this,arguments)}ee.exports=G,G.expand=function(){var Me=C(function*({activeCtx:ze,activeProperty:Ce=null,element:je,options:he={},insideList:Se=!1,insideIndex:tt=!1,typeScopedContext:ft=null}){if(null==je)return null;if("@default"===Ce&&(he=Object.assign({},he,{isFrame:!1})),!D(je)&&!S(je))return Se||null!==Ce&&"@graph"!==Q(ze,Ce,{vocab:!0},he)?ke({activeCtx:ze,activeProperty:Ce,value:je,options:he}):(he.eventHandler&&le({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:je}},options:he}),null);if(D(je)){let Je=[];const fe=A(ze,Ce,"@container")||[];Se=Se||fe.includes("@list");for(let re=0;re<je.length;++re){let $=yield G.expand({activeCtx:ze,activeProperty:Ce,element:je[re],options:he,insideIndex:tt,typeScopedContext:ft});Se&&D($)&&($={"@list":$}),null!==$&&(D($)?Je=Je.concat($):Je.push($))}return Je}const qe=Q(ze,Ce,{vocab:!0},he),me=A(ze,Ce,"@context");ft=ft||(ze.previousContext?ze:null);let F=Object.keys(je).sort(),I=!tt;if(I&&ft&&F.length<=2&&!F.includes("@context"))for(const Je of F){const fe=Q(ft,Je,{vocab:!0},he);if("@value"===fe){I=!1,ze=ft;break}if("@id"===fe&&1===F.length){I=!1;break}}I&&(ze=ze.revertToPreviousContext()),v(me)||(ze=yield ae({activeCtx:ze,localCtx:me,propagate:!0,overrideProtected:!0,options:he})),"@context"in je&&(ze=yield ae({activeCtx:ze,localCtx:je["@context"],options:he})),ft=ze;let se=null;for(const Je of F)if("@type"===Q(ze,Je,{vocab:!0},he)){se=se||Je;const re=je[Je],$=Array.isArray(re)?re.length>1?re.slice().sort():re:[re];for(const P of $){const U=A(ft,P,"@context");v(U)||(ze=yield ae({activeCtx:ze,localCtx:U,options:he,propagate:!1}))}}let ie={};yield ce({activeCtx:ze,activeProperty:Ce,expandedActiveProperty:qe,element:je,expandedParent:ie,options:he,insideList:Se,typeKey:se,typeScopedContext:ft}),F=Object.keys(ie);let He=F.length;if("@value"in ie){if("@type"in ie&&("@language"in ie||"@direction"in ie))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ie});let Je=He-1;if("@type"in ie&&(Je-=1),"@index"in ie&&(Je-=1),"@language"in ie&&(Je-=1),"@direction"in ie&&(Je-=1),0!==Je)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ie});const fe=null===ie["@value"]?[]:x(ie["@value"]),re=N(ie,"@type");if(!X(ze,1.1)||!re.includes("@json")||1!==re.length)if(0===fe.length)he.eventHandler&&le({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:ie}},options:he}),ie=null;else{if(!fe.every($=>_($)||k($))&&"@language"in ie)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:ie});if(!re.every($=>J($)&&!(_($)&&0===$.indexOf("_:"))||k($)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:ie})}}else if("@type"in ie&&!D(ie["@type"]))ie["@type"]=[ie["@type"]];else if("@set"in ie||"@list"in ie){if(He>1&&(2!==He||!("@index"in ie)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:ie});"@set"in ie&&(ie=ie["@set"],F=Object.keys(ie),He=F.length)}else 1===He&&"@language"in ie&&(he.eventHandler&&le({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:ie}},options:he}),ie=null);return S(ie)&&!he.keepFreeFloatingNodes&&!Se&&(null===Ce||"@graph"===qe||(A(ze,Ce,"@container")||[]).includes("@graph"))&&(ie=Te({value:ie,count:He,options:he})),ie});return function(ze){return Me.apply(this,arguments)}}()},8295:(ee,q,g)=>{"use strict";const{isSubjectReference:C}=g(543),{createMergedNodeMap:b}=g(9783),D={};ee.exports=D,D.flatten=S=>{const k=b(S),_=[],v=Object.keys(k).sort();for(let T=0;T<v.length;++T){const j=k[v[T]];C(j)||_.push(j)}return _}},9193:(ee,q,g)=>{"use strict";const{isKeyword:C}=g(9611),b=g(543),D=g(8254),S=g(3521),k=g(2651),_=g(1874),{createNodeMap:v,mergeNodeMapGraphs:T}=g(9783),j={};function O(x){const N={};for(const R in x)void 0!==x[R]&&(N["@"+R]=[x[R]]);return[N]}function B(x,N,R){for(let le=R.length-1;le>=0;--le){const G=R[le];if(G.graph===N&&G.subject["@id"]===x["@id"])return!0}return!1}function Q(x,N,R){const le="@"+R;let G=le in x?x[le][0]:N[R];if("embed"===R)if(!0===G)G="@once";else if(!1===G)G="@never";else if("@always"!==G&&"@never"!==G&&"@link"!==G&&"@first"!==G&&"@last"!==G&&"@once"!==G)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});return G}function A(x){if(!D.isArray(x)||1!==x.length||!D.isObject(x[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:x});if("@id"in x[0])for(const N of S.asArray(x[0]["@id"]))if(!D.isObject(N)&&!k.isAbsolute(N)||D.isString(N)&&0===N.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x});if("@type"in x[0])for(const N of S.asArray(x[0]["@type"]))if(!D.isObject(N)&&!k.isAbsolute(N)&&"@json"!==N||D.isString(N)&&0===N.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x})}function ae(x,N,R,le){let G=!0,Te=!1;for(const ce in R){let be=!1;const ke=S.getValues(N,ce),Ne=0===S.getValues(R,ce).length;if("@id"===ce){if(D.isEmptyObject(R["@id"][0]||{})?be=!0:R["@id"].length>=0&&(be=R["@id"].includes(ke[0])),!le.requireAll)return be}else if("@type"===ce){if(G=!1,Ne){if(ke.length>0)return!1;be=!0}else if(1===R["@type"].length&&D.isEmptyObject(R["@type"][0]))be=ke.length>0;else for(const Ze of R["@type"])be=!(!D.isObject(Ze)||!("@default"in Ze))||be||ke.some(Ke=>Ke===Ze);if(!le.requireAll)return be}else{if(C(ce))continue;{const Ze=S.getValues(R,ce)[0];let Ke=!1;if(Ze&&(A([Ze]),Ke="@default"in Ze),G=!1,0===ke.length&&Ke)continue;if(ke.length>0&&Ne)return!1;if(void 0===Ze){if(ke.length>0)return!1;be=!0}else if(b.isList(Ze)){const Me=Ze["@list"][0];if(b.isList(ke[0])){const ze=ke[0]["@list"];b.isValue(Me)?be=ze.some(Ce=>z(Me,Ce)):(b.isSubject(Me)||b.isSubjectReference(Me))&&(be=ze.some(Ce=>W(x,Me,Ce,le)))}}else be=b.isValue(Ze)?ke.some(Me=>z(Ze,Me)):b.isSubjectReference(Ze)?ke.some(Me=>W(x,Ze,Me,le)):!!D.isObject(Ze)&&ke.length>0}}if(!be&&le.requireAll)return!1;Te=Te||be}return G||Te}function X(x,N){const R=x.uniqueEmbeds[x.graph],le=R[N],G=le.parent,Te=le.property,ce={"@id":N};if(D.isArray(G)){for(let ke=0;ke<G.length;++ke)if(S.compareValues(G[ke],ce)){G[ke]=ce;break}}else{const ke=D.isArray(G[Te]);S.removeValue(G,Te,ce,{propertyIsArray:ke}),S.addValue(G,Te,ce,{propertyIsArray:ke})}const be=ke=>{const Ne=Object.keys(R);for(const Ze of Ne)Ze in R&&D.isObject(R[Ze].parent)&&R[Ze].parent["@id"]===ke&&(delete R[Ze],be(Ze))};be(N)}function J(x,N){if(D.isArray(x))return x.map(R=>J(R,N));if(D.isObject(x)){if("@preserve"in x)return x["@preserve"][0];if(b.isValue(x))return x;if(b.isList(x))return x["@list"]=J(x["@list"],N),x;if("@id"in x){const R=x["@id"];if(N.link.hasOwnProperty(R)){const le=N.link[R].indexOf(x);if(-1!==le)return N.link[R][le];N.link[R].push(x)}else N.link[R]=[x]}for(const R in x)"@id"===R&&N.bnodesToClear.includes(x[R])?delete x["@id"]:x[R]=J(x[R],N)}return x}function Z(x,N,R){D.isObject(x)?S.addValue(x,N,R,{propertyIsArray:!0}):x.push(R)}function W(x,N,R,le){if(!("@id"in R))return!1;const G=x.subjects[R["@id"]];return G&&ae(x,G,N,le)}function z(x,N){const R=N["@value"],le=N["@type"],G=N["@language"],Te=x["@value"]?D.isArray(x["@value"])?x["@value"]:[x["@value"]]:[],ce=x["@type"]?D.isArray(x["@type"])?x["@type"]:[x["@type"]]:[],be=x["@language"]?D.isArray(x["@language"])?x["@language"]:[x["@language"]]:[];return 0===Te.length&&0===ce.length&&0===be.length||!(!Te.includes(R)&&!D.isEmptyObject(Te[0])||!(!le&&0===ce.length||ce.includes(le)||le&&D.isEmptyObject(ce[0]))||!(!G&&0===be.length||be.includes(G)||G&&D.isEmptyObject(be[0])))}ee.exports=j,j.frameMergedOrDefault=(x,N,R)=>{const le={options:R,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},G=new S.IdentifierIssuer("_:b");v(x,le.graphMap,"@default",G),R.merged&&(le.graphMap["@merged"]=T(le.graphMap),le.graph="@merged"),le.subjects=le.graphMap[le.graph];const Te=[];return j.frame(le,Object.keys(le.subjects).sort(),N,Te),R.pruneBlankNodeIdentifiers&&(R.bnodesToClear=Object.keys(le.bnodeMap).filter(ce=>1===le.bnodeMap[ce].length)),R.link={},J(Te,R)},j.frame=(x,N,R,le,G=null)=>{A(R);const Te=x.options,ce={embed:Q(R=R[0],Te,"embed"),explicit:Q(R,Te,"explicit"),requireAll:Q(R,Te,"requireAll")};x.link.hasOwnProperty(x.graph)||(x.link[x.graph]={});const be=x.link[x.graph],ke=function L(x,N,R,le){const G={};for(const Te of N){const ce=x.graphMap[x.graph][Te];ae(x,ce,R,le)&&(G[Te]=ce)}return G}(x,N,R,ce),Ne=Object.keys(ke).sort();for(const Ze of Ne){const Ke=ke[Ze];if(null===G?x.uniqueEmbeds={[x.graph]:{}}:x.uniqueEmbeds[x.graph]=x.uniqueEmbeds[x.graph]||{},"@link"===ce.embed&&Ze in be){Z(le,G,be[Ze]);continue}const Me={"@id":Ze};if(0===Ze.indexOf("_:")&&S.addValue(x.bnodeMap,Ze,Me,{propertyIsArray:!0}),be[Ze]=Me,("@first"===ce.embed||"@last"===ce.embed)&&x.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:R});if(x.embedded||!x.uniqueEmbeds[x.graph].hasOwnProperty(Ze)){if(x.embedded&&("@never"===ce.embed||B(Ke,x.graph,x.subjectStack))){Z(le,G,Me);continue}if(x.embedded&&("@first"==ce.embed||"@once"==ce.embed)&&x.uniqueEmbeds[x.graph].hasOwnProperty(Ze)){Z(le,G,Me);continue}if("@last"===ce.embed&&Ze in x.uniqueEmbeds[x.graph]&&X(x,Ze),x.uniqueEmbeds[x.graph][Ze]={parent:le,property:G},x.subjectStack.push({subject:Ke,graph:x.graph}),Ze in x.graphMap){let ze=!1,Ce=null;"@graph"in R?(Ce=R["@graph"][0],ze=!("@merged"===Ze||"@default"===Ze),D.isObject(Ce)||(Ce={})):(ze="@merged"!==x.graph,Ce={}),ze&&j.frame({...x,graph:Ze,embedded:!1},Object.keys(x.graphMap[Ze]).sort(),[Ce],Me,"@graph")}"@included"in R&&j.frame({...x,embedded:!1},N,R["@included"],Me,"@included");for(const ze of Object.keys(Ke).sort())if(C(ze)){if(Me[ze]=S.clone(Ke[ze]),"@type"===ze)for(const Ce of Ke["@type"])0===Ce.indexOf("_:")&&S.addValue(x.bnodeMap,Ce,Me,{propertyIsArray:!0})}else if(!ce.explicit||ze in R)for(const Ce of Ke[ze]){const je=ze in R?R[ze]:O(ce);if(b.isList(Ce)){const he=R[ze]&&R[ze][0]&&R[ze][0]["@list"]?R[ze][0]["@list"]:O(ce),Se={"@list":[]};Z(Me,ze,Se);const tt=Ce["@list"];for(const ft of tt)b.isSubjectReference(ft)?j.frame({...x,embedded:!0},[ft["@id"]],he,Se,"@list"):Z(Se,"@list",S.clone(ft))}else b.isSubjectReference(Ce)?j.frame({...x,embedded:!0},[Ce["@id"]],je,Me,ze):z(je[0],Ce)&&Z(Me,ze,S.clone(Ce))}for(const ze of Object.keys(R).sort()){if("@type"===ze){if(!D.isObject(R[ze][0])||!("@default"in R[ze][0]))continue}else if(C(ze))continue;const Ce=R[ze][0]||{};if(!Q(Ce,Te,"omitDefault")&&!(ze in Me)){let he="@null";"@default"in Ce&&(he=S.clone(Ce["@default"])),D.isArray(he)||(he=[he]),Me[ze]=[{"@preserve":he}]}}for(const ze of Object.keys(R["@reverse"]||{}).sort()){const Ce=R["@reverse"][ze];for(const je of Object.keys(x.subjects))S.getValues(x.subjects[je],ze).some(Se=>Se["@id"]===Ze)&&(Me["@reverse"]=Me["@reverse"]||{},S.addValue(Me["@reverse"],ze,[],{propertyIsArray:!0}),j.frame({...x,embedded:!0},[je],Ce,Me["@reverse"][ze],G))}Z(le,G,Me),x.subjectStack.pop()}}},j.cleanupNull=(x,N)=>{if(D.isArray(x))return x.map(le=>j.cleanupNull(le,N)).filter(le=>le);if("@null"===x)return null;if(D.isObject(x)){if("@id"in x){const R=x["@id"];if(N.link.hasOwnProperty(R)){const le=N.link[R].indexOf(x);if(-1!==le)return N.link[R][le];N.link[R].push(x)}else N.link[R]=[x]}for(const R in x)x[R]=j.cleanupNull(x[R],N)}return x}},9767:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(1874),D=g(543),S=g(8254),{REGEX_BCP47:k,addValue:_}=g(3521),{handleEvent:v}=g(3855),{RDF_LIST:T,RDF_FIRST:j,RDF_REST:O,RDF_NIL:B,RDF_TYPE:Q,RDF_JSON_LITERAL:A,XSD_BOOLEAN:L,XSD_DOUBLE:ae,XSD_INTEGER:X,XSD_STRING:J}=g(6982),Z={};function W(z,x,N,R){if(z.termType.endsWith("Node"))return{"@id":z.value};const le={"@value":z.value};if(z.language)z.language.match(k)||R.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:z.language}},options:R}),le["@language"]=z.language;else{let G=z.datatype.value;if(G||(G=J),G===A){G="@json";try{le["@value"]=JSON.parse(le["@value"])}catch(Te){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:le["@value"],cause:Te})}}if(x){if(G===L)"true"===le["@value"]?le["@value"]=!0:"false"===le["@value"]&&(le["@value"]=!1);else if(S.isNumeric(le["@value"]))if(G===X){const Te=parseInt(le["@value"],10);Te.toFixed(0)===le["@value"]&&(le["@value"]=Te)}else G===ae&&(le["@value"]=parseFloat(le["@value"]));[L,X,ae,J].includes(G)||(le["@type"]=G)}else if("i18n-datatype"===N&&G.startsWith("https://www.w3.org/ns/i18n#")){const[,Te,ce]=G.split(/[#_]/);Te.length>0&&(le["@language"]=Te,Te.match(k)||R.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Te}},options:R})),le["@direction"]=ce}else G!==J&&(le["@type"]=G)}return le}ee.exports=Z,Z.fromRDF=function(){var z=C(function*(x,N){const{useRdfType:R=!1,useNativeTypes:le=!1,rdfDirection:G=null}=N,Te={},ce={"@default":Te},be={};if(G){if("compound-literal"===G)throw new b("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:G});if("i18n-datatype"!==G)throw new b("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:G})}for(const Ze of x){const Ke="DefaultGraph"===Ze.graph.termType?"@default":Ze.graph.value;Ke in ce||(ce[Ke]={}),"@default"!==Ke&&!(Ke in Te)&&(Te[Ke]={"@id":Ke});const Me=ce[Ke],ze=Ze.subject.value,Ce=Ze.predicate.value,je=Ze.object;ze in Me||(Me[ze]={"@id":ze});const he=Me[ze],Se=je.termType.endsWith("Node");if(Se&&!(je.value in Me)&&(Me[je.value]={"@id":je.value}),Ce===Q&&!R&&Se){_(he,"@type",je.value,{propertyIsArray:!0});continue}const tt=W(je,le,G,N);if(_(he,Ce,tt,{propertyIsArray:!0}),Se)if(je.value===B){const ft=Me[je.value];"usages"in ft||(ft.usages=[]),ft.usages.push({node:he,property:Ce,value:tt})}else be[je.value]=!(je.value in be)&&{node:he,property:Ce,value:tt}}for(const Ze in ce){const Ke=ce[Ze];if(!(B in Ke))continue;const Me=Ke[B];if(Me.usages){for(let ze of Me.usages){let Ce=ze.node,je=ze.property,he=ze.value;const Se=[],tt=[];let ft=Object.keys(Ce).length;for(;je===O&&S.isObject(be[Ce["@id"]])&&S.isArray(Ce[j])&&1===Ce[j].length&&S.isArray(Ce[O])&&1===Ce[O].length&&(3===ft||4===ft&&S.isArray(Ce["@type"])&&1===Ce["@type"].length&&Ce["@type"][0]===T)&&(Se.push(Ce[j][0]),tt.push(Ce["@id"]),ze=be[Ce["@id"]],Ce=ze.node,je=ze.property,he=ze.value,ft=Object.keys(Ce).length,D.isBlankNode(Ce)););delete he["@id"],he["@list"]=Se.reverse();for(const qe of tt)delete Ke[qe]}delete Me.usages}}const ke=[],Ne=Object.keys(Te).sort();for(const Ze of Ne){const Ke=Te[Ze];if(Ze in ce){const Me=Ke["@graph"]=[],ze=ce[Ze],Ce=Object.keys(ze).sort();for(const je of Ce){const he=ze[je];D.isSubjectReference(he)||Me.push(he)}}D.isSubjectReference(Ke)||ke.push(Ke)}return ke});return function(x,N){return z.apply(this,arguments)}}()},543:(ee,q,g)=>{"use strict";const C=g(8254),b={};ee.exports=b,b.isSubject=D=>!(!C.isObject(D)||"@value"in D||"@set"in D||"@list"in D)&&(Object.keys(D).length>1||!("@id"in D)),b.isSubjectReference=D=>C.isObject(D)&&1===Object.keys(D).length&&"@id"in D,b.isValue=D=>C.isObject(D)&&"@value"in D,b.isList=D=>C.isObject(D)&&"@list"in D,b.isGraph=D=>C.isObject(D)&&"@graph"in D&&1===Object.keys(D).filter(S=>"@id"!==S&&"@index"!==S).length,b.isSimpleGraph=D=>b.isGraph(D)&&!("@id"in D),b.isBlankNode=D=>{if(C.isObject(D)){if("@id"in D){const S=D["@id"];return!C.isString(S)||0===S.indexOf("_:")}return 0===Object.keys(D).length||!("@value"in D||"@set"in D||"@list"in D)}return!1}},7661:(ee,q,g)=>{var C=g(7156).default;const b=g(1986),D=g(8924),S=g(3521),k=g(4198),_=S.IdentifierIssuer,v=g(1874),T=g(1072),j=g(7260),{expand:O}=g(3860),{flatten:B}=g(8295),{fromRDF:Q}=g(9767),{toRDF:A}=g(240),{frameMergedOrDefault:L,cleanupNull:ae}=g(9193),{isArray:X,isObject:J,isString:Z}=g(8254),{isSubjectReference:W}=g(543),{expandIri:z,getInitialContext:x,process:N,processingMode:R}=g(9611),{compact:le,compactIri:G}=g(8809),{createNodeMap:Te,createMergedNodeMap:ce,mergeNodeMaps:be}=g(9783),{logEventHandler:ke,logWarningEventHandler:Ne,safeEventHandler:Ze,setDefaultEventHandler:Ke,setupEventHandler:Me,strictEventHandler:ze,unhandledEventHandler:Ce}=g(3855),je=function(Se){const tt={},qe=new T({max:100});function me(F,{documentLoader:I=Se.documentLoader,...se}){if(F&&"compactionMap"in F)throw new v('"compactionMap" not supported.',"jsonld.OptionsError");if(F&&"expansionMap"in F)throw new v('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:I},se,F,{eventHandler:Me({options:F})})}return Se.compact=function(){var F=C(function*(I,se,ie){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===se)throw new v("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===I)return null;let He;(ie=me(ie,{base:Z(I)?I:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new k({sharedCache:qe})})).link&&(ie.skipExpansion=!0),ie.compactToRelative||delete ie.base,He=ie.skipExpansion?I:yield Se.expand(I,ie);const Je=yield Se.processContext(x(ie),se,ie);let fe=yield le({activeCtx:Je,element:He,options:ie});ie.compactArrays&&!ie.graph&&X(fe)?1===fe.length?fe=fe[0]:0===fe.length&&(fe={}):ie.graph&&J(fe)&&(fe=[fe]),J(se)&&"@context"in se&&(se=se["@context"]),se=S.clone(se),X(se)||(se=[se]);const re=se;se=[];for(let P=0;P<re.length;++P)(!J(re[P])||Object.keys(re[P]).length>0)&&se.push(re[P]);const $=se.length>0;if(1===se.length&&(se=se[0]),X(fe)){const P=G({activeCtx:Je,iri:"@graph",relativeTo:{vocab:!0}}),U=fe;fe={},$&&(fe["@context"]=se),fe[P]=U}else if(J(fe)&&$){const P=fe;fe={"@context":se};for(const U in P)fe[U]=P[U]}return fe});return function(I,se,ie){return F.apply(this,arguments)}}(),Se.expand=function(){var F=C(function*(I,se){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const ie={},He=[];if("expandContext"in(se=me(se,{keepFreeFloatingNodes:!1,contextResolver:new k({sharedCache:qe})}))){const $=S.clone(se.expandContext);ie.expandContext=J($)&&"@context"in $?$:{"@context":$},He.push(ie.expandContext)}let Je;if(Z(I)){const $=yield Se.get(I,se);Je=$.documentUrl,ie.input=$.document,$.contextUrl&&(ie.remoteContext={"@context":$.contextUrl},He.push(ie.remoteContext))}else ie.input=S.clone(I);"base"in se||(se.base=Je||"");let fe=x(se);for(const $ of He)fe=yield N({activeCtx:fe,localCtx:$,options:se});let re=yield O({activeCtx:fe,element:ie.input,options:se});return J(re)&&"@graph"in re&&1===Object.keys(re).length?re=re["@graph"]:null===re&&(re=[]),X(re)||(re=[re]),re});return function(I,se){return F.apply(this,arguments)}}(),Se.flatten=function(){var F=C(function*(I,se,ie){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");se="function"==typeof se?null:se||null,ie=me(ie,{base:Z(I)?I:"",contextResolver:new k({sharedCache:qe})});const He=yield Se.expand(I,ie),Je=B(He);return null===se?Je:(ie.graph=!0,ie.skipExpansion=!0,yield Se.compact(Je,se,ie))});return function(I,se,ie){return F.apply(this,arguments)}}(),Se.frame=function(){var F=C(function*(I,se,ie){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(ie=me(ie,{base:Z(I)?I:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new k({sharedCache:qe})}),Z(se)){const $e=yield Se.get(se,ie);if(se=$e.document,$e.contextUrl){let ye=se["@context"];ye?X(ye)?ye.push($e.contextUrl):ye=[ye,$e.contextUrl]:ye=$e.contextUrl,se["@context"]=ye}}const He=se&&se["@context"]||{},Je=yield Se.processContext(x(ie),He,ie);ie.hasOwnProperty("omitGraph")||(ie.omitGraph=R(Je,1.1)),ie.hasOwnProperty("pruneBlankNodeIdentifiers")||(ie.pruneBlankNodeIdentifiers=R(Je,1.1));const fe=yield Se.expand(I,ie),re={...ie};re.isFrame=!0,re.keepFreeFloatingNodes=!0;const $=yield Se.expand(se,re),P=Object.keys(se).map($e=>z(Je,$e,{vocab:!0}));re.merged=!P.includes("@graph"),re.is11=R(Je,1.1);const U=L(fe,$,re);re.graph=!ie.omitGraph,re.skipExpansion=!0,re.link={},re.framing=!0;let pe=yield Se.compact(U,He,re);return re.link={},pe=ae(pe,re),pe});return function(I,se,ie){return F.apply(this,arguments)}}(),Se.link=function(){var F=C(function*(I,se,ie){const He={};return se&&(He["@context"]=se),He["@embed"]="@link",Se.frame(I,He,ie)});return function(I,se,ie){return F.apply(this,arguments)}}(),Se.normalize=Se.canonize=function(){var F=C(function*(I,se){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(se=me(se,{base:Z(I)?I:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new k({sharedCache:qe})}))){if("application/n-quads"!==se.inputFormat&&"application/nquads"!==se.inputFormat)throw new v("Unknown canonicalization input format.","jsonld.CanonizeError");const Je=j.parse(I);return b.canonize(Je,se)}const ie={...se};delete ie.format,ie.produceGeneralizedRdf=!1;const He=yield Se.toRDF(I,ie);return b.canonize(He,se)});return function(I,se){return F.apply(this,arguments)}}(),Se.fromRDF=function(){var F=C(function*(I,se){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");se=me(se,{format:Z(I)?"application/n-quads":void 0});const{format:ie}=se;let{rdfParser:He}=se;if(ie){if(He=He||tt[ie],!He)throw new v("Unknown input format.","jsonld.UnknownFormat",{format:ie})}else He=()=>I;const Je=yield He(I);return Q(Je,se)});return function(I,se){return F.apply(this,arguments)}}(),Se.toRDF=function(){var F=C(function*(I,se){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let ie;ie=(se=me(se,{base:Z(I)?I:"",skipExpansion:!1,contextResolver:new k({sharedCache:qe})})).skipExpansion?I:yield Se.expand(I,se);const He=A(ie,se);if(se.format){if("application/n-quads"===se.format||"application/nquads"===se.format)return j.serialize(He);throw new v("Unknown output format.","jsonld.UnknownFormat",{format:se.format})}return He});return function(I,se){return F.apply(this,arguments)}}(),Se.createNodeMap=function(){var F=C(function*(I,se){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");se=me(se,{base:Z(I)?I:"",contextResolver:new k({sharedCache:qe})});const ie=yield Se.expand(I,se);return ce(ie,se)});return function(I,se){return F.apply(this,arguments)}}(),Se.merge=function(){var F=C(function*(I,se,ie){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!X(I))throw new TypeError('Could not merge, "docs" must be an array.');se="function"==typeof se?null:se||null,ie=me(ie,{contextResolver:new k({sharedCache:qe})});const He=yield Promise.all(I.map($e=>{const ye={...ie};return Se.expand($e,ye)}));let Je=!0;"mergeNodes"in ie&&(Je=ie.mergeNodes);const fe=ie.issuer||new _("_:b"),re={"@default":{}};for(let $e=0;$e<He.length;++$e){const ye=S.relabelBlankNodes(He[$e],{issuer:new _("_:b"+$e+"-")}),Ve=Je||0===$e?re:{"@default":{}};if(Te(ye,Ve,"@default",fe),Ve!==re)for(const rt in Ve){const _t=Ve[rt];if(!(rt in re)){re[rt]=_t;continue}const At=re[rt];for(const wt in _t)wt in At||(At[wt]=_t[wt])}}const $=be(re),P=[],U=Object.keys($).sort();for(let $e=0;$e<U.length;++$e){const ye=$[U[$e]];W(ye)||P.push(ye)}return null===se?P:(ie.graph=!0,ie.skipExpansion=!0,yield Se.compact(P,se,ie))});return function(I,se,ie){return F.apply(this,arguments)}}(),Object.defineProperty(Se,"documentLoader",{get:()=>Se._documentLoader,set:F=>Se._documentLoader=F}),Se.documentLoader=function(){var F=C(function*(I){throw new v("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:I})});return function(I){return F.apply(this,arguments)}}(),Se.get=function(){var F=C(function*(I,se){let ie;ie="function"==typeof se.documentLoader?se.documentLoader:Se.documentLoader;const He=yield ie(I);try{if(!He.document)throw new v("No remote document found at the given URL.","jsonld.NullRemoteDocument");Z(He.document)&&(He.document=JSON.parse(He.document))}catch(Je){throw new v("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Je,remoteDoc:He})}return He});return function(I,se){return F.apply(this,arguments)}}(),Se.processContext=function(){var F=C(function*(I,se,ie){return ie=me(ie,{base:"",contextResolver:new k({sharedCache:qe})}),null===se?x(ie):(se=S.clone(se),J(se)&&"@context"in se||(se={"@context":se}),N({activeCtx:I,localCtx:se,options:ie}))});return function(I,se,ie){return F.apply(this,arguments)}}(),Se.getContextValue=g(9611).getContextValue,Se.documentLoaders={},Se.useDocumentLoader=function(F){if(!(F in Se.documentLoaders))throw new v('Unknown document loader type: "'+F+'"',"jsonld.UnknownDocumentLoader",{type:F});Se.documentLoader=Se.documentLoaders[F].apply(Se,Array.prototype.slice.call(arguments,1))},Se.registerRDFParser=function(F,I){tt[F]=I},Se.unregisterRDFParser=function(F){delete tt[F]},Se.registerRDFParser("application/n-quads",j.parse),Se.registerRDFParser("application/nquads",j.parse),Se.url=g(2651),Se.logEventHandler=ke,Se.logWarningEventHandler=Ne,Se.safeEventHandler=Ze,Se.setDefaultEventHandler=Ke,Se.strictEventHandler=ze,Se.unhandledEventHandler=Ce,Se.util=S,Object.assign(Se,S),Se.promises=Se,Se.RequestQueue=g(4044),Se.JsonLdProcessor=g(1828)(Se),D.setupGlobals(Se),D.setupDocumentLoaders(Se),Se},he=function(){return je(function(){return he()})};je(he),ee.exports=he},9783:(ee,q,g)=>{"use strict";const{isKeyword:C}=g(9611),b=g(543),D=g(8254),S=g(3521),k=g(1874),_={};ee.exports=_,_.createMergedNodeMap=(v,T)=>{const j=(T=T||{}).issuer||new S.IdentifierIssuer("_:b"),O={"@default":{}};return _.createNodeMap(v,O,"@default",j),_.mergeNodeMaps(O)},_.createNodeMap=(v,T,j,O,B,Q)=>{if(D.isArray(v)){for(const X of v)_.createNodeMap(X,T,j,O,void 0,Q);return}if(!D.isObject(v))return void(Q&&Q.push(v));if(b.isValue(v)){if("@type"in v){let X=v["@type"];0===X.indexOf("_:")&&(v["@type"]=X=O.getId(X))}return void(Q&&Q.push(v))}if(Q&&b.isList(v)){const X=[];return _.createNodeMap(v["@list"],T,j,O,B,X),void Q.push({"@list":X})}if("@type"in v){const X=v["@type"];for(const J of X)0===J.indexOf("_:")&&O.getId(J)}D.isUndefined(B)&&(B=b.isBlankNode(v)?O.getId(v["@id"]):v["@id"]),Q&&Q.push({"@id":B});const A=T[j],L=A[B]=A[B]||{};L["@id"]=B;const ae=Object.keys(v).sort();for(let X of ae){if("@id"===X)continue;if("@reverse"===X){const Z={"@id":B},W=v["@reverse"];for(const z in W){const x=W[z];for(const N of x){let R=N["@id"];b.isBlankNode(N)&&(R=O.getId(R)),_.createNodeMap(N,T,j,O,R),S.addValue(A[R],z,Z,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===X){B in T||(T[B]={}),_.createNodeMap(v[X],T,B,O);continue}if("@included"===X){_.createNodeMap(v[X],T,j,O);continue}if("@type"!==X&&C(X)){if("@index"===X&&X in L&&(v[X]!==L[X]||v[X]["@id"]!==L[X]["@id"]))throw new k("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:L});L[X]=v[X];continue}const J=v[X];if(0===X.indexOf("_:")&&(X=O.getId(X)),0!==J.length)for(let Z of J)if("@type"===X&&(Z=0===Z.indexOf("_:")?O.getId(Z):Z),b.isSubject(Z)||b.isSubjectReference(Z)){if("@id"in Z&&!Z["@id"])continue;const W=b.isBlankNode(Z)?O.getId(Z["@id"]):Z["@id"];S.addValue(L,X,{"@id":W},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(Z,T,j,O,W)}else if(b.isValue(Z))S.addValue(L,X,Z,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(Z)){const W=[];_.createNodeMap(Z["@list"],T,j,O,B,W),Z={"@list":W},S.addValue(L,X,Z,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(Z,T,j,O,B),S.addValue(L,X,Z,{propertyIsArray:!0,allowDuplicate:!1});else S.addValue(L,X,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=v=>{const T={};for(const j of Object.keys(v).sort())for(const O of Object.keys(v[j]).sort()){const B=v[j][O];O in T||(T[O]={"@id":O});const Q=T[O];for(const A of Object.keys(B).sort())if(C(A)&&"@type"!==A)Q[A]=S.clone(B[A]);else for(const L of B[A])S.addValue(Q,A,S.clone(L),{propertyIsArray:!0,allowDuplicate:!1})}return T},_.mergeNodeMaps=v=>{const T=v["@default"],j=Object.keys(v).sort();for(const O of j){if("@default"===O)continue;const B=v[O];let Q=T[O];Q?"@graph"in Q||(Q["@graph"]=[]):T[O]=Q={"@id":O,"@graph":[]};const A=Q["@graph"];for(const L of Object.keys(B).sort()){const ae=B[L];b.isSubjectReference(ae)||A.push(ae)}}return T}},8924:(ee,q,g)=>{"use strict";const C=g(627),b={};ee.exports=b,b.setupDocumentLoaders=function(D){typeof XMLHttpRequest<"u"&&(D.documentLoaders.xhr=C,D.useDocumentLoader("xhr"))},b.setupGlobals=function(D){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:D.JsonLdProcessor})}},240:(ee,q,g)=>{"use strict";const{createNodeMap:C}=g(9783),{isKeyword:b}=g(9611),D=g(543),S=g(5041),k=g(1874),_=g(8254),v=g(3521),{handleEvent:T}=g(3855),{RDF_FIRST:j,RDF_REST:O,RDF_NIL:B,RDF_TYPE:Q,RDF_JSON_LITERAL:A,RDF_LANGSTRING:L,XSD_BOOLEAN:ae,XSD_DOUBLE:X,XSD_INTEGER:J,XSD_STRING:Z}=g(6982),{isAbsolute:W}=g(2651),z={};function x(le,G,Te,ce,be){const ke=Object.keys(G).sort();for(const Ne of ke){const Ze=G[Ne],Ke=Object.keys(Ze).sort();for(let Me of Ke){const ze=Ze[Me];if("@type"===Me)Me=Q;else if(b(Me))continue;for(const Ce of ze){const je={termType:Ne.startsWith("_:")?"BlankNode":"NamedNode",value:Ne};if(!W(Ne)){be.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ne}},options:be});continue}const he={termType:Me.startsWith("_:")?"BlankNode":"NamedNode",value:Me};if(!W(Me)){be.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Me}},options:be});continue}if("BlankNode"===he.termType&&!be.produceGeneralizedRdf){be.eventHandler&&T({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ce.getOldIds().find(tt=>ce.getId(tt)===Me)}},options:be});continue}const Se=R(Ce,ce,le,Te,be.rdfDirection,be);Se&&le.push({subject:je,predicate:he,object:Se,graph:Te})}}}}function R(le,G,Te,ce,be,ke){const Ne={};if(D.isValue(le)){Ne.termType="Literal",Ne.value=void 0,Ne.datatype={termType:"NamedNode"};let Ze=le["@value"];const Ke=le["@type"]||null;if("@json"===Ke)Ne.value=S(Ze),Ne.datatype.value=A;else if(_.isBoolean(Ze))Ne.value=Ze.toString(),Ne.datatype.value=Ke||ae;else if(_.isDouble(Ze)||Ke===X)_.isDouble(Ze)||(Ze=parseFloat(Ze)),Ne.value=Ze.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ne.datatype.value=Ke||X;else if(_.isNumber(Ze))Ne.value=Ze.toFixed(0),Ne.datatype.value=Ke||J;else if("@direction"in le&&"i18n-datatype"===be){const Me=(le["@language"]||"").toLowerCase();Ne.datatype.value=`https://www.w3.org/ns/i18n#${Me}_${le["@direction"]}`,Ne.value=Ze}else{if("@direction"in le&&"compound-literal"===be)throw new k("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:be});if("@direction"in le&&be)throw new k("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:be});"@language"in le?("@direction"in le&&!be&&ke.eventHandler&&T({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Ne.value}},options:ke}),Ne.value=Ze,Ne.datatype.value=Ke||L,Ne.language=le["@language"]):("@direction"in le&&!be&&ke.eventHandler&&T({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Ne.value}},options:ke}),Ne.value=Ze,Ne.datatype.value=Ke||Z)}}else if(D.isList(le)){const Ze=function N(le,G,Te,ce,be,ke){const Ne={termType:"NamedNode",value:j},Ze={termType:"NamedNode",value:O},Ke={termType:"NamedNode",value:B},Me=le.pop(),ze=Me?{termType:"BlankNode",value:G.getId()}:Ke;let Ce=ze;for(const je of le){const he=R(je,G,Te,ce,be,ke),Se={termType:"BlankNode",value:G.getId()};Te.push({subject:Ce,predicate:Ne,object:he,graph:ce}),Te.push({subject:Ce,predicate:Ze,object:Se,graph:ce}),Ce=Se}if(Me){const je=R(Me,G,Te,ce,be,ke);Te.push({subject:Ce,predicate:Ne,object:je,graph:ce}),Te.push({subject:Ce,predicate:Ze,object:Ke,graph:ce})}return ze}(le["@list"],G,Te,ce,be,ke);Ne.termType=Ze.termType,Ne.value=Ze.value}else{const Ze=_.isObject(le)?le["@id"]:le;Ne.termType=Ze.startsWith("_:")?"BlankNode":"NamedNode",Ne.value=Ze}return"NamedNode"!==Ne.termType||W(Ne.value)?Ne:(ke.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ne.value}},options:ke}),null)}ee.exports=z,z.toRDF=(le,G)=>{const Te=new v.IdentifierIssuer("_:b"),ce={"@default":{}};C(le,ce,"@default",Te);const be=[],ke=Object.keys(ce).sort();for(const Ne of ke){let Ze;if("@default"===Ne)Ze={termType:"DefaultGraph",value:""};else{if(!W(Ne)){G.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ne}},options:G});continue}Ze=Ne.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Ze.value=Ne}x(be,ce[Ne],Ze,Te,G)}return be}},8254:ee=>{"use strict";const q={};ee.exports=q,q.isArray=Array.isArray,q.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),q.isDouble=g=>q.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),q.isEmptyObject=g=>q.isObject(g)&&0===Object.keys(g).length,q.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),q.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),q.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),q.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),q.isUndefined=g=>typeof g>"u"},2651:(ee,q,g)=>{"use strict";const C=g(8254),b={};ee.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(S,k)=>{const _={},v=b.parsers[k||"full"],T=v.regex.exec(S);let j=v.keys.length;for(;j--;)_[v.keys[j]]=void 0===T[j]?null:T[j];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=b.removeDotSegments(_.path),_},b.prependBase=(S,k)=>{if(null===S||b.isAbsolute(k))return k;(!S||C.isString(S))&&(S=b.parse(S||""));const _=b.parse(k),v={protocol:S.protocol||""};if(null!==_.authority)v.authority=_.authority,v.path=_.path,v.query=_.query;else if(v.authority=S.authority,""===_.path)v.path=S.path,v.query=null!==_.query?_.query:S.query;else{if(0===_.path.indexOf("/"))v.path=_.path;else{let j=S.path;j=j.substr(0,j.lastIndexOf("/")+1),(j.length>0||S.authority)&&"/"!==j.substr(-1)&&(j+="/"),j+=_.path,v.path=j}v.query=_.query}""!==_.path&&(v.path=b.removeDotSegments(v.path));let T=v.protocol;return null!==v.authority&&(T+="//"+v.authority),T+=v.path,null!==v.query&&(T+="?"+v.query),null!==_.fragment&&(T+="#"+_.fragment),""===T&&(T="./"),T},b.removeBase=(S,k)=>{if(null===S)return k;(!S||C.isString(S))&&(S=b.parse(S||""));let _="";if(""!==S.href?_+=(S.protocol||"")+"//"+(S.authority||""):k.indexOf("//")&&(_+="//"),0!==k.indexOf(_))return k;const v=b.parse(k.substr(_.length)),T=S.normalizedPath.split("/"),j=v.normalizedPath.split("/"),O=v.fragment||v.query?0:1;for(;T.length>0&&j.length>O&&T[0]===j[0];)T.shift(),j.shift();let B="";if(T.length>0){T.pop();for(let Q=0;Q<T.length;++Q)B+="../"}return B+=j.join("/"),null!==v.query&&(B+="?"+v.query),null!==v.fragment&&(B+="#"+v.fragment),""===B&&(B="./"),B},b.removeDotSegments=S=>{if(0===S.length)return"";const k=S.split("/"),_=[];for(;k.length>0;){const v=k.shift(),T=0===k.length;"."!==v?".."!==v?_.push(v):(_.pop(),T&&_.push("")):T&&_.push("")}return"/"===S[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const D=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=S=>C.isString(S)&&D.test(S),b.isRelative=S=>C.isString(S)},3521:(ee,q,g)=>{"use strict";const C=g(543),b=g(8254),D=g(1986).IdentifierIssuer,S=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,v=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,T=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,O_headers_accept="application/ld+json, application/json",B={};function Q(A,L){if(b.isArray(L))for(let ae=0;ae<L.length;++ae)L[ae]=Q(A,L[ae]);else if(C.isList(L))L["@list"]=Q(A,L["@list"]);else if(b.isObject(L)){C.isBlankNode(L)&&(L["@id"]=A.getId(L["@id"]));const ae=Object.keys(L).sort();for(let X=0;X<ae.length;++X){const J=ae[X];"@id"!==J&&(L[J]=Q(A,L[J]))}}return L}ee.exports=B,B.IdentifierIssuer=D,B.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,B.REGEX_KEYWORD=/^@[a-zA-Z]+$/,B.clone=function(A){if(A&&"object"==typeof A){let L;if(b.isArray(A)){L=[];for(let ae=0;ae<A.length;++ae)L[ae]=B.clone(A[ae])}else if(A instanceof Map){L=new Map;for(const[ae,X]of A)L.set(ae,B.clone(X))}else if(A instanceof Set){L=new Set;for(const ae of A)L.add(B.clone(ae))}else if(b.isObject(A)){L={};for(const ae in A)L[ae]=B.clone(A[ae])}else L=A.toString();return L}return A},B.asArray=function(A){return Array.isArray(A)?A:[A]},B.buildHeaders=(A={})=>{if(Object.keys(A).some(ae=>"accept"===ae.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+O_headers_accept+'" is supported.');return Object.assign({Accept:O_headers_accept},A)},B.parseLinkHeader=A=>{const L={},ae=A.match(_);for(let X=0;X<ae.length;++X){let J=ae[X].match(v);if(!J)continue;const Z={target:J[1]},W=J[2];for(;J=T.exec(W);)Z[J[1]]=void 0===J[2]?J[3]:J[2];const z=Z.rel||"";Array.isArray(L[z])?L[z].push(Z):L[z]=L.hasOwnProperty(z)?[L[z],Z]:Z}return L},B.validateTypeValue=(A,L)=>{if(!(b.isString(A)||b.isArray(A)&&A.every(ae=>b.isString(ae)))){if(L&&b.isObject(A))switch(Object.keys(A).length){case 0:return;case 1:if("@default"in A&&B.asArray(A["@default"]).every(ae=>b.isString(ae)))return}throw new S('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:A})}},B.hasProperty=(A,L)=>{if(A.hasOwnProperty(L)){const ae=A[L];return!b.isArray(ae)||ae.length>0}return!1},B.hasValue=(A,L,ae)=>{if(B.hasProperty(A,L)){let X=A[L];const J=C.isList(X);if(b.isArray(X)||J){J&&(X=X["@list"]);for(let Z=0;Z<X.length;++Z)if(B.compareValues(ae,X[Z]))return!0}else if(!b.isArray(ae))return B.compareValues(ae,X)}return!1},B.addValue=(A,L,ae,X)=>{if("propertyIsArray"in(X=X||{})||(X.propertyIsArray=!1),"valueIsArray"in X||(X.valueIsArray=!1),"allowDuplicate"in X||(X.allowDuplicate=!0),"prependValue"in X||(X.prependValue=!1),X.valueIsArray)A[L]=ae;else if(b.isArray(ae)){0===ae.length&&X.propertyIsArray&&!A.hasOwnProperty(L)&&(A[L]=[]),X.prependValue&&(ae=ae.concat(A[L]),A[L]=[]);for(let J=0;J<ae.length;++J)B.addValue(A,L,ae[J],X)}else if(A.hasOwnProperty(L)){const J=!X.allowDuplicate&&B.hasValue(A,L,ae);!b.isArray(A[L])&&(!J||X.propertyIsArray)&&(A[L]=[A[L]]),J||(X.prependValue?A[L].unshift(ae):A[L].push(ae))}else A[L]=X.propertyIsArray?[ae]:ae},B.getValues=(A,L)=>[].concat(A[L]||[]),B.removeProperty=(A,L)=>{delete A[L]},B.removeValue=(A,L,ae,X)=>{"propertyIsArray"in(X=X||{})||(X.propertyIsArray=!1);const J=B.getValues(A,L).filter(Z=>!B.compareValues(Z,ae));0===J.length?B.removeProperty(A,L):A[L]=1!==J.length||X.propertyIsArray?J:J[0]},B.relabelBlankNodes=(A,L)=>Q((L=L||{}).issuer||new D("_:b"),A),B.compareValues=(A,L)=>!!(A===L||C.isValue(A)&&C.isValue(L)&&A["@value"]===L["@value"]&&A["@type"]===L["@type"]&&A["@language"]===L["@language"]&&A["@index"]===L["@index"])||!!(b.isObject(A)&&"@id"in A&&b.isObject(L)&&"@id"in L)&&A["@id"]===L["@id"],B.compareShortestLeast=(A,L)=>A.length<L.length?-1:L.length<A.length?1:A===L?0:A<L?-1:1},5041:ee=>{"use strict";ee.exports=function q(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((C,b,D)=>C+(0===D?"":",")+q(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(g).sort().reduce((C,b,D)=>void 0===g[b]||"symbol"==typeof g[b]?C:C+(0===C.length?"":",")+q(b)+":"+q(g[b]),"")+"}"}},1072:(ee,q,g)=>{"use strict";const C=g(4439),b=Symbol("max"),D=Symbol("length"),S=Symbol("lengthCalculator"),k=Symbol("allowStale"),_=Symbol("maxAge"),v=Symbol("dispose"),T=Symbol("noDisposeOnSet"),j=Symbol("lruList"),O=Symbol("cache"),B=Symbol("updateAgeOnGet"),Q=()=>1,L=(z,x,N)=>{const R=z[O].get(x);if(R){const le=R.value;if(ae(z,le)){if(J(z,R),!z[k])return}else N&&(z[B]&&(R.value.now=Date.now()),z[j].unshiftNode(R));return le.value}},ae=(z,x)=>{if(!x||!x.maxAge&&!z[_])return!1;const N=Date.now()-x.now;return x.maxAge?N>x.maxAge:z[_]&&N>z[_]},X=z=>{if(z[D]>z[b])for(let x=z[j].tail;z[D]>z[b]&&null!==x;){const N=x.prev;J(z,x),x=N}},J=(z,x)=>{if(x){const N=x.value;z[v]&&z[v](N.key,N.value),z[D]-=N.length,z[O].delete(N.key),z[j].removeNode(x)}};class Z{constructor(x,N,R,le,G){this.key=x,this.value=N,this.length=R,this.now=le,this.maxAge=G||0}}const W=(z,x,N,R)=>{let le=N.value;ae(z,le)&&(J(z,N),z[k]||(le=void 0)),le&&x.call(R,le.value,le.key,z)};ee.exports=class A{constructor(x){if("number"==typeof x&&(x={max:x}),x||(x={}),x.max&&("number"!=typeof x.max||x.max<0))throw new TypeError("max must be a non-negative number");this[b]=x.max||1/0;const R=x.length||Q;if(this[S]="function"!=typeof R?Q:R,this[k]=x.stale||!1,x.maxAge&&"number"!=typeof x.maxAge)throw new TypeError("maxAge must be a number");this[_]=x.maxAge||0,this[v]=x.dispose,this[T]=x.noDisposeOnSet||!1,this[B]=x.updateAgeOnGet||!1,this.reset()}set max(x){if("number"!=typeof x||x<0)throw new TypeError("max must be a non-negative number");this[b]=x||1/0,X(this)}get max(){return this[b]}set allowStale(x){this[k]=!!x}get allowStale(){return this[k]}set maxAge(x){if("number"!=typeof x)throw new TypeError("maxAge must be a non-negative number");this[_]=x,X(this)}get maxAge(){return this[_]}set lengthCalculator(x){"function"!=typeof x&&(x=Q),x!==this[S]&&(this[S]=x,this[D]=0,this[j].forEach(N=>{N.length=this[S](N.value,N.key),this[D]+=N.length})),X(this)}get lengthCalculator(){return this[S]}get length(){return this[D]}get itemCount(){return this[j].length}rforEach(x,N){N=N||this;for(let R=this[j].tail;null!==R;){const le=R.prev;W(this,x,R,N),R=le}}forEach(x,N){N=N||this;for(let R=this[j].head;null!==R;){const le=R.next;W(this,x,R,N),R=le}}keys(){return this[j].toArray().map(x=>x.key)}values(){return this[j].toArray().map(x=>x.value)}reset(){this[v]&&this[j]&&this[j].length&&this[j].forEach(x=>this[v](x.key,x.value)),this[O]=new Map,this[j]=new C,this[D]=0}dump(){return this[j].map(x=>!ae(this,x)&&{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[j]}set(x,N,R){if((R=R||this[_])&&"number"!=typeof R)throw new TypeError("maxAge must be a number");const le=R?Date.now():0,G=this[S](N,x);if(this[O].has(x)){if(G>this[b])return J(this,this[O].get(x)),!1;const be=this[O].get(x).value;return this[v]&&(this[T]||this[v](x,be.value)),be.now=le,be.maxAge=R,be.value=N,this[D]+=G-be.length,be.length=G,this.get(x),X(this),!0}const Te=new Z(x,N,G,le,R);return Te.length>this[b]?(this[v]&&this[v](x,N),!1):(this[D]+=Te.length,this[j].unshift(Te),this[O].set(x,this[j].head),X(this),!0)}has(x){if(!this[O].has(x))return!1;const N=this[O].get(x).value;return!ae(this,N)}get(x){return L(this,x,!0)}peek(x){return L(this,x,!1)}pop(){const x=this[j].tail;return x?(J(this,x),x.value):null}del(x){J(this,this[O].get(x))}load(x){this.reset();const N=Date.now();for(let R=x.length-1;R>=0;R--){const le=x[R],G=le.e||0;if(0===G)this.set(le.k,le.v);else{const Te=G-N;Te>0&&this.set(le.k,le.v,Te)}}}prune(){this[O].forEach((x,N)=>L(this,N,!1))}}},6506:(ee,q,g)=>{var D=g(8745)(g(8492),"DataView");ee.exports=D},9618:(ee,q,g)=>{var C=g(5602),b=g(1499),D=g(2990),S=g(480),k=g(4469);function _(v){var T=-1,j=null==v?0:v.length;for(this.clear();++T<j;){var O=v[T];this.set(O[0],O[1])}}_.prototype.clear=C,_.prototype.delete=b,_.prototype.get=D,_.prototype.has=S,_.prototype.set=k,ee.exports=_},3597:(ee,q,g)=>{var C=g(9365),b=g(9343),D=g(4779),S=g(1509),k=g(7137);function _(v){var T=-1,j=null==v?0:v.length;for(this.clear();++T<j;){var O=v[T];this.set(O[0],O[1])}}_.prototype.clear=C,_.prototype.delete=b,_.prototype.get=D,_.prototype.has=S,_.prototype.set=k,ee.exports=_},1136:(ee,q,g)=>{var D=g(8745)(g(8492),"Map");ee.exports=D},1811:(ee,q,g)=>{var C=g(3413),b=g(5419),D=g(7253),S=g(1115),k=g(6648);function _(v){var T=-1,j=null==v?0:v.length;for(this.clear();++T<j;){var O=v[T];this.set(O[0],O[1])}}_.prototype.clear=C,_.prototype.delete=b,_.prototype.get=D,_.prototype.has=S,_.prototype.set=k,ee.exports=_},641:(ee,q,g)=>{var D=g(8745)(g(8492),"Promise");ee.exports=D},1732:(ee,q,g)=>{var D=g(8745)(g(8492),"Set");ee.exports=D},5960:(ee,q,g)=>{var C=g(1811),b=g(6151),D=g(2154);function S(k){var _=-1,v=null==k?0:k.length;for(this.__data__=new C;++_<v;)this.add(k[_])}S.prototype.add=S.prototype.push=b,S.prototype.has=D,ee.exports=S},1339:(ee,q,g)=>{var C=g(3597),b=g(9488),D=g(5943),S=g(5456),k=g(4793),_=g(8689);function v(T){var j=this.__data__=new C(T);this.size=j.size}v.prototype.clear=b,v.prototype.delete=D,v.prototype.get=S,v.prototype.has=k,v.prototype.set=_,ee.exports=v},1763:(ee,q,g)=>{var C=g(8492);ee.exports=C.Symbol},2760:(ee,q,g)=>{var C=g(8492);ee.exports=C.Uint8Array},6413:(ee,q,g)=>{var D=g(8745)(g(8492),"WeakMap");ee.exports=D},7910:ee=>{ee.exports=function q(g,C,b){switch(b.length){case 0:return g.call(C);case 1:return g.call(C,b[0]);case 2:return g.call(C,b[0],b[1]);case 3:return g.call(C,b[0],b[1],b[2])}return g.apply(C,b)}},2134:ee=>{ee.exports=function q(g,C){for(var b=-1,D=null==g?0:g.length,S=0,k=[];++b<D;){var _=g[b];C(_,b,g)&&(k[S++]=_)}return k}},1384:(ee,q,g)=>{var C=g(5025),b=g(1955),D=g(2261),S=g(7525),k=g(5188),_=g(4868),T=Object.prototype.hasOwnProperty;ee.exports=function j(O,B){var Q=D(O),A=!Q&&b(O),L=!Q&&!A&&S(O),ae=!Q&&!A&&!L&&_(O),X=Q||A||L||ae,J=X?C(O.length,String):[],Z=J.length;for(var W in O)(B||T.call(O,W))&&(!X||!("length"==W||L&&("offset"==W||"parent"==W)||ae&&("buffer"==W||"byteLength"==W||"byteOffset"==W)||k(W,Z)))&&J.push(W);return J}},3880:ee=>{ee.exports=function q(g,C){for(var b=-1,D=null==g?0:g.length,S=Array(D);++b<D;)S[b]=C(g[b],b,g);return S}},7853:ee=>{ee.exports=function q(g,C){for(var b=-1,D=C.length,S=g.length;++b<D;)g[S+b]=C[b];return g}},5916:ee=>{ee.exports=function q(g,C){for(var b=-1,D=null==g?0:g.length;++b<D;)if(C(g[b],b,g))return!0;return!1}},4056:(ee,q,g)=>{var C=g(7826);ee.exports=function b(D,S){for(var k=D.length;k--;)if(C(D[k][0],S))return k;return-1}},5103:(ee,q,g)=>{var C=g(7794),D=g(9386)(C);ee.exports=D},1883:(ee,q,g)=>{var C=g(7853),b=g(2241);ee.exports=function D(S,k,_,v,T){var j=-1,O=S.length;for(_||(_=b),T||(T=[]);++j<O;){var B=S[j];k>0&&_(B)?k>1?D(B,k-1,_,v,T):C(T,B):v||(T[T.length]=B)}return T}},6483:(ee,q,g)=>{var b=g(2086)();ee.exports=b},7794:(ee,q,g)=>{var C=g(6483),b=g(4614);ee.exports=function D(S,k){return S&&C(S,k,b)}},2202:(ee,q,g)=>{var C=g(4826),b=g(8916);ee.exports=function D(S,k){for(var _=0,v=(k=C(k,S)).length;null!=S&&_<v;)S=S[b(k[_++])];return _&&_==v?S:void 0}},7427:(ee,q,g)=>{var C=g(7853),b=g(2261);ee.exports=function D(S,k,_){var v=k(S);return b(S)?v:C(v,_(S))}},4590:(ee,q,g)=>{var C=g(1763),b=g(5933),D=g(9243),_=C?C.toStringTag:void 0;ee.exports=function v(T){return null==T?void 0===T?"[object Undefined]":"[object Null]":_&&_ in Object(T)?b(T):D(T)}},3274:ee=>{ee.exports=function q(g,C){return null!=g&&C in Object(g)}},3022:(ee,q,g)=>{var C=g(4590),b=g(3714);ee.exports=function S(k){return b(k)&&"[object Arguments]"==C(k)}},7108:(ee,q,g)=>{var C=g(7946),b=g(3714);ee.exports=function D(S,k,_,v,T){return S===k||(null==S||null==k||!b(S)&&!b(k)?S!=S&&k!=k:C(S,k,_,v,D,T))}},7946:(ee,q,g)=>{var C=g(1339),b=g(7469),D=g(1642),S=g(9462),k=g(2472),_=g(2261),v=g(7525),T=g(4868),O="[object Arguments]",B="[object Array]",Q="[object Object]",L=Object.prototype.hasOwnProperty;ee.exports=function ae(X,J,Z,W,z,x){var N=_(X),R=_(J),le=N?B:k(X),G=R?B:k(J),Te=(le=le==O?Q:le)==Q,ce=(G=G==O?Q:G)==Q,be=le==G;if(be&&v(X)){if(!v(J))return!1;N=!0,Te=!1}if(be&&!Te)return x||(x=new C),N||T(X)?b(X,J,Z,W,z,x):D(X,J,le,Z,W,z,x);if(!(1&Z)){var ke=Te&&L.call(X,"__wrapped__"),Ne=ce&&L.call(J,"__wrapped__");if(ke||Ne){var Ze=ke?X.value():X,Ke=Ne?J.value():J;return x||(x=new C),z(Ze,Ke,Z,W,x)}}return!!be&&(x||(x=new C),S(X,J,Z,W,z,x))}},2527:(ee,q,g)=>{var C=g(1339),b=g(7108);ee.exports=function k(_,v,T,j){var O=T.length,B=O,Q=!j;if(null==_)return!B;for(_=Object(_);O--;){var A=T[O];if(Q&&A[2]?A[1]!==_[A[0]]:!(A[0]in _))return!1}for(;++O<B;){var L=(A=T[O])[0],ae=_[L],X=A[1];if(Q&&A[2]){if(void 0===ae&&!(L in _))return!1}else{var J=new C;if(j)var Z=j(ae,X,L,_,v,J);if(!(void 0===Z?b(X,ae,3,j,J):Z))return!1}}return!0}},1082:(ee,q,g)=>{var C=g(6861),b=g(9950),D=g(9794),S=g(7075),_=/^\[object .+?Constructor\]$/,B=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ee.exports=function Q(A){return!(!D(A)||b(A))&&(C(A)?B:_).test(S(A))}},8902:(ee,q,g)=>{var C=g(4590),b=g(7765),D=g(3714),be={};be["[object Float32Array]"]=be["[object Float64Array]"]=be["[object Int8Array]"]=be["[object Int16Array]"]=be["[object Int32Array]"]=be["[object Uint8Array]"]=be["[object Uint8ClampedArray]"]=be["[object Uint16Array]"]=be["[object Uint32Array]"]=!0,be["[object Arguments]"]=be["[object Array]"]=be["[object ArrayBuffer]"]=be["[object Boolean]"]=be["[object DataView]"]=be["[object Date]"]=be["[object Error]"]=be["[object Function]"]=be["[object Map]"]=be["[object Number]"]=be["[object Object]"]=be["[object RegExp]"]=be["[object Set]"]=be["[object String]"]=be["[object WeakMap]"]=!1,ee.exports=function ke(Ne){return D(Ne)&&b(Ne.length)&&!!be[C(Ne)]}},1627:(ee,q,g)=>{var C=g(2924),b=g(8526),D=g(5657),S=g(2261),k=g(2692);ee.exports=function _(v){return"function"==typeof v?v:null==v?D:"object"==typeof v?S(v)?b(v[0],v[1]):C(v):k(v)}},190:(ee,q,g)=>{var C=g(6587),b=g(366),S=Object.prototype.hasOwnProperty;ee.exports=function k(_){if(!C(_))return b(_);var v=[];for(var T in Object(_))S.call(_,T)&&"constructor"!=T&&v.push(T);return v}},2839:(ee,q,g)=>{var C=g(5103),b=g(2447);ee.exports=function D(S,k){var _=-1,v=b(S)?Array(S.length):[];return C(S,function(T,j,O){v[++_]=k(T,j,O)}),v}},2924:(ee,q,g)=>{var C=g(2527),b=g(7895),D=g(2265);ee.exports=function S(k){var _=b(k);return 1==_.length&&_[0][2]?D(_[0][0],_[0][1]):function(v){return v===k||C(v,k,_)}}},8526:(ee,q,g)=>{var C=g(7108),b=g(5440),D=g(2494),S=g(6300),k=g(3921),_=g(2265),v=g(8916);ee.exports=function O(B,Q){return S(B)&&k(Q)?_(v(B),Q):function(A){var L=b(A,B);return void 0===L&&L===Q?D(A,B):C(Q,L,3)}}},252:(ee,q,g)=>{var C=g(3880),b=g(2202),D=g(1627),S=g(2839),k=g(6389),_=g(1156),v=g(9664),T=g(5657),j=g(2261);ee.exports=function O(B,Q,A){Q=Q.length?C(Q,function(X){return j(X)?function(J){return b(J,1===X.length?X[0]:X)}:X}):[T];var L=-1;Q=C(Q,_(D));var ae=S(B,function(X,J,Z){return{criteria:C(Q,function(z){return z(X)}),index:++L,value:X}});return k(ae,function(X,J){return v(X,J,A)})}},3400:ee=>{ee.exports=function q(g){return function(C){return C?.[g]}}},6443:(ee,q,g)=>{var C=g(2202);ee.exports=function b(D){return function(S){return C(S,D)}}},8951:(ee,q,g)=>{var C=g(5657),b=g(2394),D=g(6814);ee.exports=function S(k,_){return D(b(k,_,C),k+"")}},8235:(ee,q,g)=>{var C=g(1075),b=g(9383),D=g(5657);ee.exports=b?function(k,_){return b(k,"toString",{configurable:!0,enumerable:!1,value:C(_),writable:!0})}:D},6389:ee=>{ee.exports=function q(g,C){var b=g.length;for(g.sort(C);b--;)g[b]=g[b].value;return g}},5025:ee=>{ee.exports=function q(g,C){for(var b=-1,D=Array(g);++b<g;)D[b]=C(b);return D}},7002:(ee,q,g)=>{var C=g(1763),b=g(3880),D=g(2261),S=g(3423),_=C?C.prototype:void 0,v=_?_.toString:void 0;ee.exports=function T(j){if("string"==typeof j)return j;if(D(j))return b(j,T)+"";if(S(j))return v?v.call(j):"";var O=j+"";return"0"==O&&1/j==-1/0?"-0":O}},1156:ee=>{ee.exports=function q(g){return function(C){return g(C)}}},4795:ee=>{ee.exports=function q(g,C){return g.has(C)}},4826:(ee,q,g)=>{var C=g(2261),b=g(6300),D=g(163),S=g(2674);ee.exports=function k(_,v){return C(_)?_:b(_,v)?[_]:D(S(_))}},5400:(ee,q,g)=>{var C=g(3423);ee.exports=function b(D,S){if(D!==S){var k=void 0!==D,_=null===D,v=D==D,T=C(D),j=void 0!==S,O=null===S,B=S==S,Q=C(S);if(!O&&!Q&&!T&&D>S||T&&j&&B&&!O&&!Q||_&&j&&B||!k&&B||!v)return 1;if(!_&&!T&&!Q&&D<S||Q&&k&&v&&!_&&!T||O&&k&&v||!j&&v||!B)return-1}return 0}},9664:(ee,q,g)=>{var C=g(5400);ee.exports=function b(D,S,k){for(var _=-1,v=D.criteria,T=S.criteria,j=v.length,O=k.length;++_<j;){var B=C(v[_],T[_]);if(B)return _>=O?B:B*("desc"==k[_]?-1:1)}return D.index-S.index}},6189:(ee,q,g)=>{var C=g(8492);ee.exports=C["__core-js_shared__"]},9386:(ee,q,g)=>{var C=g(2447);ee.exports=function b(D,S){return function(k,_){if(null==k)return k;if(!C(k))return D(k,_);for(var v=k.length,T=S?v:-1,j=Object(k);(S?T--:++T<v)&&!1!==_(j[T],T,j););return k}}},2086:ee=>{ee.exports=function q(g){return function(C,b,D){for(var S=-1,k=Object(C),_=D(C),v=_.length;v--;){var T=_[g?v:++S];if(!1===b(k[T],T,k))break}return C}}},9383:(ee,q,g)=>{var C=g(8745),b=function(){try{var D=C(Object,"defineProperty");return D({},"",{}),D}catch{}}();ee.exports=b},7469:(ee,q,g)=>{var C=g(5960),b=g(5916),D=g(4795);ee.exports=function _(v,T,j,O,B,Q){var A=1&j,L=v.length,ae=T.length;if(L!=ae&&!(A&&ae>L))return!1;var X=Q.get(v),J=Q.get(T);if(X&&J)return X==T&&J==v;var Z=-1,W=!0,z=2&j?new C:void 0;for(Q.set(v,T),Q.set(T,v);++Z<L;){var x=v[Z],N=T[Z];if(O)var R=A?O(N,x,Z,T,v,Q):O(x,N,Z,v,T,Q);if(void 0!==R){if(R)continue;W=!1;break}if(z){if(!b(T,function(le,G){if(!D(z,G)&&(x===le||B(x,le,j,O,Q)))return z.push(G)})){W=!1;break}}else if(x!==N&&!B(x,N,j,O,Q)){W=!1;break}}return Q.delete(v),Q.delete(T),W}},1642:(ee,q,g)=>{var C=g(1763),b=g(2760),D=g(7826),S=g(7469),k=g(1575),_=g(8e3),z=C?C.prototype:void 0,x=z?z.valueOf:void 0;ee.exports=function N(R,le,G,Te,ce,be,ke){switch(G){case"[object DataView]":if(R.byteLength!=le.byteLength||R.byteOffset!=le.byteOffset)return!1;R=R.buffer,le=le.buffer;case"[object ArrayBuffer]":return!(R.byteLength!=le.byteLength||!be(new b(R),new b(le)));case"[object Boolean]":case"[object Date]":case"[object Number]":return D(+R,+le);case"[object Error]":return R.name==le.name&&R.message==le.message;case"[object RegExp]":case"[object String]":return R==le+"";case"[object Map]":var Ne=k;case"[object Set]":if(Ne||(Ne=_),R.size!=le.size&&!(1&Te))return!1;var Ke=ke.get(R);if(Ke)return Ke==le;Te|=2,ke.set(R,le);var Me=S(Ne(R),Ne(le),Te,ce,be,ke);return ke.delete(R),Me;case"[object Symbol]":if(x)return x.call(R)==x.call(le)}return!1}},9462:(ee,q,g)=>{var C=g(6131),S=Object.prototype.hasOwnProperty;ee.exports=function k(_,v,T,j,O,B){var Q=1&T,A=C(_),L=A.length;if(L!=C(v).length&&!Q)return!1;for(var J=L;J--;){var Z=A[J];if(!(Q?Z in v:S.call(v,Z)))return!1}var W=B.get(_),z=B.get(v);if(W&&z)return W==v&&z==_;var x=!0;B.set(_,v),B.set(v,_);for(var N=Q;++J<L;){var R=_[Z=A[J]],le=v[Z];if(j)var G=Q?j(le,R,Z,v,_,B):j(R,le,Z,_,v,B);if(!(void 0===G?R===le||O(R,le,T,j,B):G)){x=!1;break}N||(N="constructor"==Z)}if(x&&!N){var Te=_.constructor,ce=v.constructor;Te!=ce&&"constructor"in _&&"constructor"in v&&!("function"==typeof Te&&Te instanceof Te&&"function"==typeof ce&&ce instanceof ce)&&(x=!1)}return B.delete(_),B.delete(v),x}},248:ee=>{var q="object"==typeof global&&global&&global.Object===Object&&global;ee.exports=q},6131:(ee,q,g)=>{var C=g(7427),b=g(771),D=g(4614);ee.exports=function S(k){return C(k,D,b)}},4113:(ee,q,g)=>{var C=g(29);ee.exports=function b(D,S){var k=D.__data__;return C(S)?k["string"==typeof S?"string":"hash"]:k.map}},7895:(ee,q,g)=>{var C=g(3921),b=g(4614);ee.exports=function D(S){for(var k=b(S),_=k.length;_--;){var v=k[_],T=S[v];k[_]=[v,T,C(T)]}return k}},8745:(ee,q,g)=>{var C=g(1082),b=g(1015);ee.exports=function D(S,k){var _=b(S,k);return C(_)?_:void 0}},5933:(ee,q,g)=>{var C=g(1763),b=Object.prototype,D=b.hasOwnProperty,S=b.toString,k=C?C.toStringTag:void 0;ee.exports=function _(v){var T=D.call(v,k),j=v[k];try{v[k]=void 0;var O=!0}catch{}var B=S.call(v);return O&&(T?v[k]=j:delete v[k]),B}},771:(ee,q,g)=>{var C=g(2134),b=g(1315),S=Object.prototype.propertyIsEnumerable,k=Object.getOwnPropertySymbols;ee.exports=k?function(v){return null==v?[]:(v=Object(v),C(k(v),function(T){return S.call(v,T)}))}:b},2472:(ee,q,g)=>{var C=g(6506),b=g(1136),D=g(641),S=g(1732),k=g(6413),_=g(4590),v=g(7075),T="[object Map]",O="[object Promise]",B="[object Set]",Q="[object WeakMap]",A="[object DataView]",L=v(C),ae=v(b),X=v(D),J=v(S),Z=v(k),W=_;(C&&W(new C(new ArrayBuffer(1)))!=A||b&&W(new b)!=T||D&&W(D.resolve())!=O||S&&W(new S)!=B||k&&W(new k)!=Q)&&(W=function(z){var x=_(z),N="[object Object]"==x?z.constructor:void 0,R=N?v(N):"";if(R)switch(R){case L:return A;case ae:return T;case X:return O;case J:return B;case Z:return Q}return x}),ee.exports=W},1015:ee=>{ee.exports=function q(g,C){return g?.[C]}},4583:(ee,q,g)=>{var C=g(4826),b=g(1955),D=g(2261),S=g(5188),k=g(7765),_=g(8916);ee.exports=function v(T,j,O){for(var B=-1,Q=(j=C(j,T)).length,A=!1;++B<Q;){var L=_(j[B]);if(!(A=null!=T&&O(T,L)))break;T=T[L]}return A||++B!=Q?A:!!(Q=null==T?0:T.length)&&k(Q)&&S(L,Q)&&(D(T)||b(T))}},5602:(ee,q,g)=>{var C=g(893);ee.exports=function b(){this.__data__=C?C(null):{},this.size=0}},1499:ee=>{ee.exports=function q(g){var C=this.has(g)&&delete this.__data__[g];return this.size-=C?1:0,C}},2990:(ee,q,g)=>{var C=g(893),S=Object.prototype.hasOwnProperty;ee.exports=function k(_){var v=this.__data__;if(C){var T=v[_];return"__lodash_hash_undefined__"===T?void 0:T}return S.call(v,_)?v[_]:void 0}},480:(ee,q,g)=>{var C=g(893),D=Object.prototype.hasOwnProperty;ee.exports=function S(k){var _=this.__data__;return C?void 0!==_[k]:D.call(_,k)}},4469:(ee,q,g)=>{var C=g(893);ee.exports=function D(S,k){var _=this.__data__;return this.size+=this.has(S)?0:1,_[S]=C&&void 0===k?"__lodash_hash_undefined__":k,this}},2241:(ee,q,g)=>{var C=g(1763),b=g(1955),D=g(2261),S=C?C.isConcatSpreadable:void 0;ee.exports=function k(_){return D(_)||b(_)||!!(S&&_&&_[S])}},5188:ee=>{var g=/^(?:0|[1-9]\d*)$/;ee.exports=function C(b,D){var S=typeof b;return!!(D=D??9007199254740991)&&("number"==S||"symbol"!=S&&g.test(b))&&b>-1&&b%1==0&&b<D}},3817:(ee,q,g)=>{var C=g(7826),b=g(2447),D=g(5188),S=g(9794);ee.exports=function k(_,v,T){if(!S(T))return!1;var j=typeof v;return!!("number"==j?b(T)&&D(v,T.length):"string"==j&&v in T)&&C(T[v],_)}},6300:(ee,q,g)=>{var C=g(2261),b=g(3423),D=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/;ee.exports=function k(_,v){if(C(_))return!1;var T=typeof _;return!("number"!=T&&"symbol"!=T&&"boolean"!=T&&null!=_&&!b(_))||S.test(_)||!D.test(_)||null!=v&&_ in Object(v)}},29:ee=>{ee.exports=function q(g){var C=typeof g;return"string"==C||"number"==C||"symbol"==C||"boolean"==C?"__proto__"!==g:null===g}},9950:(ee,q,g)=>{var S,C=g(6189),b=(S=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";ee.exports=function D(S){return!!b&&b in S}},6587:ee=>{var q=Object.prototype;ee.exports=function g(C){var b=C&&C.constructor;return C===("function"==typeof b&&b.prototype||q)}},3921:(ee,q,g)=>{var C=g(9794);ee.exports=function b(D){return D==D&&!C(D)}},9365:ee=>{ee.exports=function q(){this.__data__=[],this.size=0}},9343:(ee,q,g)=>{var C=g(4056),D=Array.prototype.splice;ee.exports=function S(k){var _=this.__data__,v=C(_,k);return!(v<0||(v==_.length-1?_.pop():D.call(_,v,1),--this.size,0))}},4779:(ee,q,g)=>{var C=g(4056);ee.exports=function b(D){var S=this.__data__,k=C(S,D);return k<0?void 0:S[k][1]}},1509:(ee,q,g)=>{var C=g(4056);ee.exports=function b(D){return C(this.__data__,D)>-1}},7137:(ee,q,g)=>{var C=g(4056);ee.exports=function b(D,S){var k=this.__data__,_=C(k,D);return _<0?(++this.size,k.push([D,S])):k[_][1]=S,this}},3413:(ee,q,g)=>{var C=g(9618),b=g(3597),D=g(1136);ee.exports=function S(){this.size=0,this.__data__={hash:new C,map:new(D||b),string:new C}}},5419:(ee,q,g)=>{var C=g(4113);ee.exports=function b(D){var S=C(this,D).delete(D);return this.size-=S?1:0,S}},7253:(ee,q,g)=>{var C=g(4113);ee.exports=function b(D){return C(this,D).get(D)}},1115:(ee,q,g)=>{var C=g(4113);ee.exports=function b(D){return C(this,D).has(D)}},6648:(ee,q,g)=>{var C=g(4113);ee.exports=function b(D,S){var k=C(this,D),_=k.size;return k.set(D,S),this.size+=k.size==_?0:1,this}},1575:ee=>{ee.exports=function q(g){var C=-1,b=Array(g.size);return g.forEach(function(D,S){b[++C]=[S,D]}),b}},2265:ee=>{ee.exports=function q(g,C){return function(b){return null!=b&&b[g]===C&&(void 0!==C||g in Object(b))}}},7371:(ee,q,g)=>{var C=g(7659);ee.exports=function D(S){var k=C(S,function(v){return 500===_.size&&_.clear(),v}),_=k.cache;return k}},893:(ee,q,g)=>{var b=g(8745)(Object,"create");ee.exports=b},366:(ee,q,g)=>{var b=g(3106)(Object.keys,Object);ee.exports=b},8849:(ee,q,g)=>{ee=g.nmd(ee);var C=g(248),b=q&&!q.nodeType&&q,D=b&&ee&&!ee.nodeType&&ee,k=D&&D.exports===b&&C.process,_=function(){try{return D&&D.require&&D.require("util").types||k&&k.binding&&k.binding("util")}catch{}}();ee.exports=_},9243:ee=>{var g=Object.prototype.toString;ee.exports=function C(b){return g.call(b)}},3106:ee=>{ee.exports=function q(g,C){return function(b){return g(C(b))}}},2394:(ee,q,g)=>{var C=g(7910),b=Math.max;ee.exports=function D(S,k,_){return k=b(void 0===k?S.length-1:k,0),function(){for(var v=arguments,T=-1,j=b(v.length-k,0),O=Array(j);++T<j;)O[T]=v[k+T];T=-1;for(var B=Array(k+1);++T<k;)B[T]=v[T];return B[k]=_(O),C(S,this,B)}}},8492:(ee,q,g)=>{var C=g(248),b="object"==typeof self&&self&&self.Object===Object&&self,D=C||b||Function("return this")();ee.exports=D},6151:ee=>{ee.exports=function g(C){return this.__data__.set(C,"__lodash_hash_undefined__"),this}},2154:ee=>{ee.exports=function q(g){return this.__data__.has(g)}},8e3:ee=>{ee.exports=function q(g){var C=-1,b=Array(g.size);return g.forEach(function(D){b[++C]=D}),b}},6814:(ee,q,g)=>{var C=g(8235),D=g(9531)(C);ee.exports=D},9531:ee=>{var C=Date.now;ee.exports=function b(D){var S=0,k=0;return function(){var _=C(),v=16-(_-k);if(k=_,v>0){if(++S>=800)return arguments[0]}else S=0;return D.apply(void 0,arguments)}}},9488:(ee,q,g)=>{var C=g(3597);ee.exports=function b(){this.__data__=new C,this.size=0}},5943:ee=>{ee.exports=function q(g){var C=this.__data__,b=C.delete(g);return this.size=C.size,b}},5456:ee=>{ee.exports=function q(g){return this.__data__.get(g)}},4793:ee=>{ee.exports=function q(g){return this.__data__.has(g)}},8689:(ee,q,g)=>{var C=g(3597),b=g(1136),D=g(1811);ee.exports=function k(_,v){var T=this.__data__;if(T instanceof C){var j=T.__data__;if(!b||j.length<199)return j.push([_,v]),this.size=++T.size,this;T=this.__data__=new D(j)}return T.set(_,v),this.size=T.size,this}},163:(ee,q,g)=>{var C=g(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D=/\\(\\)?/g,S=C(function(k){var _=[];return 46===k.charCodeAt(0)&&_.push(""),k.replace(b,function(v,T,j,O){_.push(j?O.replace(D,"$1"):T||v)}),_});ee.exports=S},8916:(ee,q,g)=>{var C=g(3423);ee.exports=function D(S){if("string"==typeof S||C(S))return S;var k=S+"";return"0"==k&&1/S==-1/0?"-0":k}},7075:ee=>{var g=Function.prototype.toString;ee.exports=function C(b){if(null!=b){try{return g.call(b)}catch{}try{return b+""}catch{}}return""}},1075:ee=>{ee.exports=function q(g){return function(){return g}}},7826:ee=>{ee.exports=function q(g,C){return g===C||g!=g&&C!=C}},5440:(ee,q,g)=>{var C=g(2202);ee.exports=function b(D,S,k){var _=null==D?void 0:C(D,S);return void 0===_?k:_}},2494:(ee,q,g)=>{var C=g(3274),b=g(4583);ee.exports=function D(S,k){return null!=S&&b(S,k,C)}},5657:ee=>{ee.exports=function q(g){return g}},1955:(ee,q,g)=>{var C=g(3022),b=g(3714),D=Object.prototype,S=D.hasOwnProperty,k=D.propertyIsEnumerable,_=C(function(){return arguments}())?C:function(v){return b(v)&&S.call(v,"callee")&&!k.call(v,"callee")};ee.exports=_},2261:ee=>{ee.exports=Array.isArray},2447:(ee,q,g)=>{var C=g(6861),b=g(7765);ee.exports=function D(S){return null!=S&&b(S.length)&&!C(S)}},7525:(ee,q,g)=>{ee=g.nmd(ee);var C=g(8492),b=g(5706),D=q&&!q.nodeType&&q,S=D&&ee&&!ee.nodeType&&ee,_=S&&S.exports===D?C.Buffer:void 0;ee.exports=(_?_.isBuffer:void 0)||b},6030:(ee,q,g)=>{var b=g(8492).isFinite;ee.exports=function D(S){return"number"==typeof S&&b(S)}},6861:(ee,q,g)=>{var C=g(4590),b=g(9794);ee.exports=function v(T){if(!b(T))return!1;var j=C(T);return"[object Function]"==j||"[object GeneratorFunction]"==j||"[object AsyncFunction]"==j||"[object Proxy]"==j}},7765:ee=>{ee.exports=function g(C){return"number"==typeof C&&C>-1&&C%1==0&&C<=9007199254740991}},9794:ee=>{ee.exports=function q(g){var C=typeof g;return null!=g&&("object"==C||"function"==C)}},3714:ee=>{ee.exports=function q(g){return null!=g&&"object"==typeof g}},3423:(ee,q,g)=>{var C=g(4590),b=g(3714);ee.exports=function S(k){return"symbol"==typeof k||b(k)&&"[object Symbol]"==C(k)}},4868:(ee,q,g)=>{var C=g(8902),b=g(1156),D=g(8849),S=D&&D.isTypedArray,k=S?b(S):C;ee.exports=k},4614:(ee,q,g)=>{var C=g(1384),b=g(190),D=g(2447);ee.exports=function S(k){return D(k)?C(k):b(k)}},6990:function(ee,q,g){var C;ee=g.nmd(ee),function(){var b,_="Expected a function",T="__lodash_hash_undefined__",O="__lodash_placeholder__",x=32,R=128,Me=1/0,ze=9007199254740991,he=4294967295,ft=[["ary",R],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",x],["partialRight",64],["rearg",256]],qe="[object Arguments]",me="[object Array]",I="[object Boolean]",se="[object Date]",He="[object Error]",Je="[object Function]",fe="[object GeneratorFunction]",re="[object Map]",$="[object Number]",U="[object Object]",pe="[object Promise]",ye="[object RegExp]",Ve="[object Set]",rt="[object String]",_t="[object Symbol]",wt="[object WeakMap]",ge="[object ArrayBuffer]",Y="[object DataView]",oe="[object Float32Array]",Le="[object Float64Array]",et="[object Int8Array]",ct="[object Int16Array]",Et="[object Int32Array]",sn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",Hn="[object Uint16Array]",Tn="[object Uint32Array]",jn=/\b__p \+= '';/g,Yi=/\b(__p \+=) '' \+/g,ra=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mr=/&(?:amp|lt|gt|quot|#39);/g,Lo=/[&<>"']/g,Bo=RegExp(mr.source),zi=RegExp(Lo.source),jo=/<%-([\s\S]+?)%>/g,Fs=/<%([\s\S]+?)%>/g,ol=/<%=([\s\S]+?)%>/g,Xa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uo=/^\w*$/,sl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,Ye=RegExp(We.source),Wt=/^\s+/,$t=/\s/,an=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gr=/\{\n\/\* \[wrapped with (.+)\] \*/,Yt=/,? & /,Sa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Li=/[()=,{}\[\]\/\s]/,Ca=/\\(\\)?/g,ki=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bi=/\w*$/,Ai=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Xn=/^\[object .+?Constructor\]$/,Mo=/^0o[0-7]+$/i,Si=/^(?:0|[1-9]\d*)$/,oo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_r=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pe="\\u2700-\\u27bf",De="a-z\\xdf-\\xf6\\xf8-\\xff",cn="A-Z\\xc0-\\xd6\\xd8-\\xde",mn="\\ufe0e\\ufe0f",Kr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bn="["+we+"]",ui="["+Kr+"]",Ka="["+_e+"]",so="\\d+",ns="["+Pe+"]",ld="["+De+"]",dd="[^"+we+Kr+so+Pe+De+cn+"]",xs="\\ud83c[\\udffb-\\udfff]",N_="[^"+we+"]",Lh="(?:\\ud83c[\\udde6-\\uddff]){2}",Re="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+cn+"]",vt="(?:"+ld+"|"+dd+")",Ut="(?:"+Ue+"|"+dd+")",rn="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ii="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",qr="(?:"+Ka+"|"+xs+")?",Jr="["+mn+"]?",IC=Jr+qr+"(?:\\u200d(?:"+[N_,Lh,Re].join("|")+")"+Jr+qr+")*",fL="(?:"+[ns,Lh,Re].join("|")+")"+IC,pL="(?:"+[N_+Ka+"?",Ka,Lh,Re,bn].join("|")+")",mL=RegExp("['\u2019]","g"),It=RegExp(Ka,"g"),ax=RegExp(xs+"(?="+xs+")|"+pL+IC,"g"),ln=RegExp([Ue+"?"+ld+"+"+rn+"(?="+[ui,Ue,"$"].join("|")+")",Ut+"+"+ii+"(?="+[ui,Ue+vt,"$"].join("|")+")",Ue+"?"+vt+"+"+rn,Ue+"+"+ii,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",so,fL].join("|"),"g"),Pp=RegExp("[\\u200d"+we+_e+mn+"]"),DC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cx=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],RC=-1,Xi={};Xi[oe]=Xi[Le]=Xi[et]=Xi[ct]=Xi[Et]=Xi[sn]=Xi[Bn]=Xi[Hn]=Xi[Tn]=!0,Xi[qe]=Xi[me]=Xi[ge]=Xi[I]=Xi[Y]=Xi[se]=Xi[He]=Xi[Je]=Xi[re]=Xi[$]=Xi[U]=Xi[ye]=Xi[Ve]=Xi[rt]=Xi[wt]=!1;var Hi={};Hi[qe]=Hi[me]=Hi[ge]=Hi[Y]=Hi[I]=Hi[se]=Hi[oe]=Hi[Le]=Hi[et]=Hi[ct]=Hi[Et]=Hi[re]=Hi[$]=Hi[U]=Hi[ye]=Hi[Ve]=Hi[rt]=Hi[_t]=Hi[sn]=Hi[Bn]=Hi[Hn]=Hi[Tn]=!0,Hi[He]=Hi[Je]=Hi[wt]=!1;var yi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},F_=parseFloat,dx=parseInt,is="object"==typeof global&&global&&global.Object===Object&&global,ux="object"==typeof self&&self&&self.Object===Object&&self,zo=is||ux||Function("return this")(),Oi=q&&!q.nodeType&&q,Fp=Oi&&ee&&!ee.nodeType&&ee,OC=Fp&&Fp.exports===Oi,bt=OC&&is.process,ws=function(){try{return Fp&&Fp.require&&Fp.require("util").types||bt&&bt.binding&&bt.binding("util")}catch{}}(),Lp=ws&&ws.isArrayBuffer,L_=ws&&ws.isDate,Bp=ws&&ws.isMap,hx=ws&&ws.isRegExp,jp=ws&&ws.isSet,NC=ws&&ws.isTypedArray;function oa(at,St,xt){switch(xt.length){case 0:return at.call(St);case 1:return at.call(St,xt[0]);case 2:return at.call(St,xt[0],xt[1]);case 3:return at.call(St,xt[0],xt[1],xt[2])}return at.apply(St,xt)}function gL(at,St,xt,Kt){for(var Yn=-1,Ti=null==at?0:at.length;++Yn<Ti;){var Nr=at[Yn];St(Kt,Nr,xt(Nr),at)}return Kt}function Ma(at,St){for(var xt=-1,Kt=null==at?0:at.length;++xt<Kt&&!1!==St(at[xt],xt,at););return at}function _L(at,St){for(var xt=null==at?0:at.length;xt--&&!1!==St(at[xt],xt,at););return at}function _u(at,St){for(var xt=-1,Kt=null==at?0:at.length;++xt<Kt;)if(!St(at[xt],xt,at))return!1;return!0}function qa(at,St){for(var xt=-1,Kt=null==at?0:at.length,Yn=0,Ti=[];++xt<Kt;){var Nr=at[xt];St(Nr,xt,at)&&(Ti[Yn++]=Nr)}return Ti}function ud(at,St){return!(null==at||!at.length)&&Ec(at,St,0)>-1}function B_(at,St,xt){for(var Kt=-1,Yn=null==at?0:at.length;++Kt<Yn;)if(xt(St,at[Kt]))return!0;return!1}function br(at,St){for(var xt=-1,Kt=null==at?0:at.length,Yn=Array(Kt);++xt<Kt;)Yn[xt]=St(at[xt],xt,at);return Yn}function al(at,St){for(var xt=-1,Kt=St.length,Yn=at.length;++xt<Kt;)at[Yn+xt]=St[xt];return at}function Up(at,St,xt,Kt){var Yn=-1,Ti=null==at?0:at.length;for(Kt&&Ti&&(xt=at[++Yn]);++Yn<Ti;)xt=St(xt,at[Yn],Yn,at);return xt}function bu(at,St,xt,Kt){var Yn=null==at?0:at.length;for(Kt&&Yn&&(xt=at[--Yn]);Yn--;)xt=St(xt,at[Yn],Yn,at);return xt}function j_(at,St){for(var xt=-1,Kt=null==at?0:at.length;++xt<Kt;)if(St(at[xt],xt,at))return!0;return!1}var cl=z_("length");function U_(at,St,xt){var Kt;return xt(at,function(Yn,Ti,Nr){if(St(Yn,Ti,Nr))return Kt=Ti,!1}),Kt}function Dt(at,St,xt,Kt){for(var Yn=at.length,Ti=xt+(Kt?1:-1);Kt?Ti--:++Ti<Yn;)if(St(at[Ti],Ti,at))return Ti;return-1}function Ec(at,St,xt){return St==St?function UC(at,St,xt){for(var Kt=xt-1,Yn=at.length;++Kt<Yn;)if(at[Kt]===St)return Kt;return-1}(at,St,xt):Dt(at,yu,xt)}function V_(at,St,xt,Kt){for(var Yn=xt-1,Ti=at.length;++Yn<Ti;)if(Kt(at[Yn],St))return Yn;return-1}function yu(at){return at!=at}function fx(at,St){var xt=null==at?0:at.length;return xt?Ls(at,St)/xt:NaN}function z_(at){return function(St){return null==St?b:St[at]}}function H_(at){return function(St){return null==at?b:at[St]}}function Ja(at,St,xt,Kt,Yn){return Yn(at,function(Ti,Nr,Zi){xt=Kt?(Kt=!1,Ti):St(xt,Ti,Nr,Zi)}),xt}function Ls(at,St){for(var xt,Kt=-1,Yn=at.length;++Kt<Yn;){var Ti=St(at[Kt]);Ti!==b&&(xt=xt===b?Ti:xt+Ti)}return xt}function sa(at,St){for(var xt=-1,Kt=Array(at);++xt<at;)Kt[xt]=St(xt);return Kt}function G_(at){return at&&at.slice(0,yx(at)+1).replace(Wt,"")}function rs(at){return function(St){return at(St)}}function zp(at,St){return br(St,function(xt){return at[xt]})}function vu(at,St){return at.has(St)}function xu(at,St){for(var xt=-1,Kt=at.length;++xt<Kt&&Ec(St,at[xt],0)>-1;);return xt}function W_(at,St){for(var xt=at.length;xt--&&Ec(St,at[xt],0)>-1;);return xt}var FC=H_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),mx=H_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function LC(at){return"\\"+yi[at]}function Ho(at){return Pp.test(at)}function $_(at){var St=-1,xt=Array(at.size);return at.forEach(function(Kt,Yn){xt[++St]=[Yn,Kt]}),xt}function _x(at,St){return function(xt){return at(St(xt))}}function ll(at,St){for(var xt=-1,Kt=at.length,Yn=0,Ti=[];++xt<Kt;){var Nr=at[xt];(Nr===St||Nr===O)&&(at[xt]=O,Ti[Yn++]=xt)}return Ti}function Hp(at){var St=-1,xt=Array(at.size);return at.forEach(function(Kt){xt[++St]=Kt}),xt}function wu(at){return Ho(at)?function dn(at){for(var St=ax.lastIndex=0;ax.test(at);)++St;return St}(at):cl(at)}function En(at){return Ho(at)?function vx(at){return at.match(ax)||[]}(at):function PC(at){return at.split("")}(at)}function yx(at){for(var St=at.length;St--&&$t.test(at.charAt(St)););return St}var zC=H_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Zn=function at(St){var u,xt=(St=null==St?zo:Zn.defaults(zo.Object(),St,Zn.pick(zo,cx))).Array,Kt=St.Date,Yn=St.Error,Ti=St.Function,Nr=St.Math,Zi=St.Object,Y_=St.RegExp,Pr=St.String,Vt=St.TypeError,An=xt.prototype,Wo=Zi.prototype,ao=St["__core-js_shared__"],Es=Ti.prototype.toString,Ci=Wo.hasOwnProperty,nr=0,$o=(u=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Bs=Wo.toString,Kn=Es.call(Zi),Bh=zo._,xx=Y_("^"+Es.call(Ci).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ac=OC?St.Buffer:b,Bi=St.Symbol,dl=St.Uint8Array,hd=Ac?Ac.allocUnsafe:b,js=_x(Zi.getPrototypeOf,Zi),Eu=Zi.create,X_=Wo.propertyIsEnumerable,Ta=An.splice,jh=Bi?Bi.isConcatSpreadable:b,Ia=Bi?Bi.iterator:b,Fn=Bi?Bi.toStringTag:b,Au=function(){try{var u=Ou(Zi,"defineProperty");return u({},"",{}),u}catch{}}(),Uh=St.clearTimeout!==zo.clearTimeout&&St.clearTimeout,Za=Kt&&Kt.now!==zo.Date.now&&Kt.now,Gp=St.setTimeout!==zo.setTimeout&&St.setTimeout,Sc=Nr.ceil,yr=Nr.floor,Vh=Zi.getOwnPropertySymbols,Yo=Ac?Ac.isBuffer:b,To=St.isFinite,K_=An.join,fd=_x(Zi.keys,Zi),Fr=Nr.max,ir=Nr.min,q_=Kt.now,HC=St.parseInt,wx=Nr.random,J_=An.reverse,Wp=Ou(St,"DataView"),zh=Ou(St,"Map"),Hh=Ou(St,"Promise"),Gh=Ou(St,"Set"),$p=Ou(St,"WeakMap"),Yp=Ou(Zi,"create"),Z_=$p&&new $p,Wh={},bL=ic(Wp),yL=ic(zh),vL=ic(Hh),xL=ic(Gh),wL=ic($p),Q_=Bi?Bi.prototype:b,Xp=Q_?Q_.valueOf:b,eb=Q_?Q_.toString:b;function Oe(u){if(Tr(u)&&!$n(u)&&!(u instanceof xi)){if(u instanceof Da)return u;if(Ci.call(u,"__wrapped__"))return Tb(u)}return new Da(u)}var $h=function(){function u(){}return function(p){if(!vr(p))return{};if(Eu)return Eu(p);u.prototype=p;var w=new u;return u.prototype=b,w}}();function tb(){}function Da(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=b}function xi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=he,this.__views__=[]}function ul(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var te=u[p];this.set(te[0],te[1])}}function Ra(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var te=u[p];this.set(te[0],te[1])}}function Cc(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var te=u[p];this.set(te[0],te[1])}}function md(u){var p=-1,w=null==u?0:u.length;for(this.__data__=new Cc;++p<w;)this.add(u[p])}function Mr(u){var p=this.__data__=new Ra(u);this.size=p.size}function Dx(u,p){var w=$n(u),te=!w&&Fc(u),Ee=!w&&!te&&Il(u),Be=!w&&!te&&!Ee&&Nd(u),Qe=w||te||Ee||Be,ot=Qe?sa(u.length,Pr):[],ut=ot.length;for(var Rt in u)(p||Ci.call(u,Rt))&&(!Qe||!("length"==Rt||Ee&&("offset"==Rt||"parent"==Rt)||Be&&("buffer"==Rt||"byteLength"==Rt||"byteOffset"==Rt)||ha(Rt,ut)))&&ot.push(Rt);return ot}function rb(u){var p=u.length;return p?u[pb(0,p-1)]:b}function Rx(u,p){return Id(Do(u),bd(p,0,u.length))}function ob(u){return Id(Do(u))}function gd(u,p,w){(w!==b&&!Jo(u[p],w)||w===b&&!(p in u))&&fl(u,p,w)}function hl(u,p,w){var te=u[p];(!Ci.call(u,p)||!Jo(te,w)||w===b&&!(p in u))&&fl(u,p,w)}function Cu(u,p){for(var w=u.length;w--;)if(Jo(u[w][0],p))return w;return-1}function _d(u,p,w,te){return pl(u,function(Ee,Be,Qe){p(te,Ee,w(Ee),Qe)}),te}function Vn(u,p){return u&&Xo(p,co(p),u)}function fl(u,p,w){"__proto__"==p&&Au?Au(u,p,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[p]=w}function sb(u,p){for(var w=-1,te=p.length,Ee=xt(te),Be=null==u;++w<te;)Ee[w]=Be?b:ny(u,p[w]);return Ee}function bd(u,p,w){return u==u&&(w!==b&&(u=u<=w?u:w),p!==b&&(u=u>=p?u:p)),u}function aa(u,p,w,te,Ee,Be){var Qe,ot=1&p,ut=2&p,Rt=4&p;if(w&&(Qe=Ee?w(u,te,Ee,Be):w(u)),Qe!==b)return Qe;if(!vr(u))return u;var kt=$n(u);if(kt){if(Qe=function dM(u){var p=u.length,w=new u.constructor(p);return p&&"string"==typeof u[0]&&Ci.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!ot)return Do(u,Qe)}else{var Lt=as(u),Zt=Lt==Je||Lt==fe;if(Il(u))return im(u,ot);if(Lt==U||Lt==qe||Zt&&!Ee){if(Qe=ut||Zt?{}:ow(u),!ot)return ut?function Zx(u,p){return Xo(u,Md(u),p)}(u,function kx(u,p){return u&&Xo(p,Ts(p),u)}(Qe,u)):function iM(u,p){return Xo(u,cf(u),p)}(u,Vn(Qe,u))}else{if(!Hi[Lt])return Ee?u:{};Qe=function uM(u,p,w){var te=u.constructor;switch(p){case ge:return rm(u);case I:case se:return new te(+u);case Y:return function om(u,p){var w=p?rm(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case oe:case Le:case et:case ct:case Et:case sn:case Bn:case Hn:case Tn:return yb(u,w);case re:return new te;case $:case rt:return new te(u);case ye:return function bb(u){var p=new u.constructor(u.source,bi.exec(u));return p.lastIndex=u.lastIndex,p}(u);case Ve:return new te;case _t:return function nM(u){return Xp?Zi(Xp.call(u)):{}}(u)}}(u,Lt,ot)}}Be||(Be=new Mr);var _n=Be.get(u);if(_n)return _n;Be.set(u,Qe),Zb(u)?u.forEach(function(Cn){Qe.add(aa(Cn,p,w,Cn,u,Be))}):jw(u)&&u.forEach(function(Cn,hi){Qe.set(hi,aa(Cn,p,w,hi,u,Be))});var ri=kt?b:(Rt?ut?wl:Ko:ut?Ts:co)(u);return Ma(ri||u,function(Cn,hi){ri&&(Cn=u[hi=Cn]),hl(Qe,hi,aa(Cn,p,w,hi,u,Be))}),Qe}function yd(u,p,w){var te=w.length;if(null==u)return!te;for(u=Zi(u);te--;){var Ee=w[te],Qe=u[Ee];if(Qe===b&&!(Ee in u)||!(0,p[Ee])(Qe))return!1}return!0}function Nx(u,p,w){if("function"!=typeof u)throw new Vt(_);return uf(function(){u.apply(b,w)},p)}function Kh(u,p,w,te){var Ee=-1,Be=ud,Qe=!0,ot=u.length,ut=[],Rt=p.length;if(!ot)return ut;w&&(p=br(p,rs(w))),te?(Be=B_,Qe=!1):p.length>=200&&(Be=vu,Qe=!1,p=new md(p));e:for(;++Ee<ot;){var kt=u[Ee],Lt=null==w?kt:w(kt);if(kt=te||0!==kt?kt:0,Qe&&Lt==Lt){for(var Zt=Rt;Zt--;)if(p[Zt]===Lt)continue e;ut.push(kt)}else Be(p,Lt,te)||ut.push(kt)}return ut}Oe.templateSettings={escape:jo,evaluate:Fs,interpolate:ol,variable:"",imports:{_:Oe}},(Oe.prototype=tb.prototype).constructor=Oe,(Da.prototype=$h(tb.prototype)).constructor=Da,(xi.prototype=$h(tb.prototype)).constructor=xi,ul.prototype.clear=function GC(){this.__data__=Yp?Yp(null):{},this.size=0},ul.prototype.delete=function WC(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p},ul.prototype.get=function Ax(u){var p=this.__data__;if(Yp){var w=p[u];return w===T?b:w}return Ci.call(p,u)?p[u]:b},ul.prototype.has=function Sx(u){var p=this.__data__;return Yp?p[u]!==b:Ci.call(p,u)},ul.prototype.set=function $C(u,p){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Yp&&p===b?T:p,this},Ra.prototype.clear=function YC(){this.__data__=[],this.size=0},Ra.prototype.delete=function Qa(u){var p=this.__data__,w=Cu(p,u);return!(w<0||(w==p.length-1?p.pop():Ta.call(p,w,1),--this.size,0))},Ra.prototype.get=function Cx(u){var p=this.__data__,w=Cu(p,u);return w<0?b:p[w][1]},Ra.prototype.has=function Mx(u){return Cu(this.__data__,u)>-1},Ra.prototype.set=function Tx(u,p){var w=this.__data__,te=Cu(w,u);return te<0?(++this.size,w.push([u,p])):w[te][1]=p,this},Cc.prototype.clear=function EL(){this.size=0,this.__data__={hash:new ul,map:new(zh||Ra),string:new ul}},Cc.prototype.delete=function rr(u){var p=Eb(this,u).delete(u);return this.size-=p?1:0,p},Cc.prototype.get=function nb(u){return Eb(this,u).get(u)},Cc.prototype.has=function Yh(u){return Eb(this,u).has(u)},Cc.prototype.set=function os(u,p){var w=Eb(this,u),te=w.size;return w.set(u,p),this.size+=w.size==te?0:1,this},md.prototype.add=md.prototype.push=function Xh(u){return this.__data__.set(u,T),this},md.prototype.has=function Su(u){return this.__data__.has(u)},Mr.prototype.clear=function XC(){this.__data__=new Ra,this.size=0},Mr.prototype.delete=function ib(u){var p=this.__data__,w=p.delete(u);return this.size=p.size,w},Mr.prototype.get=function KC(u){return this.__data__.get(u)},Mr.prototype.has=function ec(u){return this.__data__.has(u)},Mr.prototype.set=function Ix(u,p){var w=this.__data__;if(w instanceof Ra){var te=w.__data__;if(!zh||te.length<199)return te.push([u,p]),this.size=++w.size,this;w=this.__data__=new Cc(te)}return w.set(u,p),this.size=w.size,this};var pl=wd(As),Px=wd(ca,!0);function qC(u,p){var w=!0;return pl(u,function(te,Ee,Be){return w=!!p(te,Ee,Be)}),w}function Mt(u,p,w){for(var te=-1,Ee=u.length;++te<Ee;){var Be=u[te],Qe=p(Be);if(null!=Qe&&(ot===b?Qe==Qe&&!Zo(Qe):w(Qe,ot)))var ot=Qe,ut=Be}return ut}function Br(u,p){var w=[];return pl(u,function(te,Ee,Be){p(te,Ee,Be)&&w.push(te)}),w}function fi(u,p,w,te,Ee){var Be=-1,Qe=u.length;for(w||(w=Ab),Ee||(Ee=[]);++Be<Qe;){var ot=u[Be];p>0&&w(ot)?p>1?fi(ot,p-1,w,te,Ee):al(Ee,ot):te||(Ee[Ee.length]=ot)}return Ee}var ji=Zr(),ab=Zr(!0);function As(u,p){return u&&ji(u,p,co)}function ca(u,p){return u&&ab(u,p,co)}function Mu(u,p){return qa(p,function(w){return Na(u[w])})}function Mc(u,p){for(var w=0,te=(p=_l(p,u)).length;null!=u&&w<te;)u=u[Vs(p[w++])];return w&&w==te?u:b}function Fx(u,p,w){var te=p(u);return $n(u)?te:al(te,w(u))}function Ss(u){return null==u?u===b?"[object Undefined]":"[object Null]":Fn&&Fn in Zi(u)?function Us(u){var p=Ci.call(u,Fn),w=u[Fn];try{u[Fn]=b;var te=!0}catch{}var Ee=Bs.call(u);return te&&(p?u[Fn]=w:delete u[Fn]),Ee}(u):function df(u){return Bs.call(u)}(u)}function Kp(u,p){return u>p}function ss(u,p){return null!=u&&Ci.call(u,p)}function Tc(u,p){return null!=u&&p in Zi(u)}function la(u,p,w){for(var te=w?B_:ud,Ee=u[0].length,Be=u.length,Qe=Be,ot=xt(Be),ut=1/0,Rt=[];Qe--;){var kt=u[Qe];Qe&&p&&(kt=br(kt,rs(p))),ut=ir(kt.length,ut),ot[Qe]=!w&&(p||Ee>=120&&kt.length>=120)?new md(Qe&&kt):b}kt=u[0];var Lt=-1,Zt=ot[0];e:for(;++Lt<Ee&&Rt.length<ut;){var _n=kt[Lt],Dn=p?p(_n):_n;if(_n=w||0!==_n?_n:0,!(Zt?vu(Zt,Dn):te(Rt,Dn,w))){for(Qe=Be;--Qe;){var ri=ot[Qe];if(!(ri?vu(ri,Dn):te(u[Qe],Dn,w)))continue e}Zt&&Zt.push(Dn),Rt.push(_n)}}return Rt}function qh(u,p,w){var te=null==(u=_M(u,p=_l(p,u)))?u:u[Vs(pa(p))];return null==te?b:oa(te,u,w)}function cb(u){return Tr(u)&&Ss(u)==qe}function vd(u,p,w,te,Ee){return u===p||(null==u||null==p||!Tr(u)&&!Tr(p)?u!=u&&p!=p:function lb(u,p,w,te,Ee,Be){var Qe=$n(u),ot=$n(p),ut=Qe?me:as(u),Rt=ot?me:as(p),kt=(ut=ut==qe?U:ut)==U,Lt=(Rt=Rt==qe?U:Rt)==U,Zt=ut==Rt;if(Zt&&Il(u)){if(!Il(p))return!1;Qe=!0,kt=!1}if(Zt&&!kt)return Be||(Be=new Mr),Qe||Nd(u)?Qr(u,p,w,te,Ee,Be):function cM(u,p,w,te,Ee,Be,Qe){switch(w){case Y:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case ge:return!(u.byteLength!=p.byteLength||!Be(new dl(u),new dl(p)));case I:case se:case $:return Jo(+u,+p);case He:return u.name==p.name&&u.message==p.message;case ye:case rt:return u==p+"";case re:var ot=$_;case Ve:if(ot||(ot=Hp),u.size!=p.size&&!(1&te))return!1;var Rt=Qe.get(u);if(Rt)return Rt==p;te|=2,Qe.set(u,p);var kt=Qr(ot(u),ot(p),te,Ee,Be,Qe);return Qe.delete(u),kt;case _t:if(Xp)return Xp.call(u)==Xp.call(p)}return!1}(u,p,ut,w,te,Ee,Be);if(!(1&w)){var _n=kt&&Ci.call(u,"__wrapped__"),Dn=Lt&&Ci.call(p,"__wrapped__");if(_n||Dn){var ri=_n?u.value():u,Cn=Dn?p.value():p;return Be||(Be=new Mr),Ee(ri,Cn,w,te,Be)}}return!!Zt&&(Be||(Be=new Mr),function af(u,p,w,te,Ee,Be){var Qe=1&w,ot=Ko(u),ut=ot.length;if(ut!=Ko(p).length&&!Qe)return!1;for(var Lt=ut;Lt--;){var Zt=ot[Lt];if(!(Qe?Zt in p:Ci.call(p,Zt)))return!1}var _n=Be.get(u),Dn=Be.get(p);if(_n&&Dn)return _n==p&&Dn==u;var ri=!0;Be.set(u,p),Be.set(p,u);for(var Cn=Qe;++Lt<ut;){var hi=u[Zt=ot[Lt]],vi=p[Zt];if(te)var Gs=Qe?te(vi,hi,Zt,p,u,Be):te(hi,vi,Zt,u,p,Be);if(!(Gs===b?hi===vi||Ee(hi,vi,w,te,Be):Gs)){ri=!1;break}Cn||(Cn="constructor"==Zt)}if(ri&&!Cn){var ds=u.constructor,Ws=p.constructor;ds!=Ws&&"constructor"in u&&"constructor"in p&&!("function"==typeof ds&&ds instanceof ds&&"function"==typeof Ws&&Ws instanceof Ws)&&(ri=!1)}return Be.delete(u),Be.delete(p),ri}(u,p,w,te,Ee,Be))}(u,p,w,te,vd,Ee))}function Jh(u,p,w,te){var Ee=w.length,Be=Ee,Qe=!te;if(null==u)return!Be;for(u=Zi(u);Ee--;){var ot=w[Ee];if(Qe&&ot[2]?ot[1]!==u[ot[0]]:!(ot[0]in u))return!1}for(;++Ee<Be;){var ut=(ot=w[Ee])[0],Rt=u[ut],kt=ot[1];if(Qe&&ot[2]){if(Rt===b&&!(ut in u))return!1}else{var Lt=new Mr;if(te)var Zt=te(Rt,kt,ut,u,p,Lt);if(!(Zt===b?vd(kt,Rt,3,te,Lt):Zt))return!1}}return!0}function jx(u){return!(!vr(u)||function pM(u){return!!$o&&$o in u}(u))&&(Na(u)?xx:Xn).test(ic(u))}function ub(u){return"function"==typeof u?u:null==u?Is:"object"==typeof u?$n(u)?ml(u[0],u[1]):Io(u):Tf(u)}function qp(u){if(!Td(u))return fd(u);var p=[];for(var w in Zi(u))Ci.call(u,w)&&"constructor"!=w&&p.push(w);return p}function Zh(u,p){return u<p}function Hx(u,p){var w=-1,te=Ms(u)?xt(u.length):[];return pl(u,function(Ee,Be,Qe){te[++w]=p(Ee,Be,Qe)}),te}function Io(u){var p=am(u);return 1==p.length&&p[0][2]?Sb(p[0][0],p[0][1]):function(w){return w===u||Jh(w,u,p)}}function ml(u,p){return El(u)&&lf(p)?Sb(Vs(u),p):function(w){var te=ny(w,u);return te===b&&te===p?iy(w,u):vd(p,te,3)}}function Ki(u,p,w,te,Ee){u!==p&&ji(p,function(Be,Qe){if(Ee||(Ee=new Mr),vr(Be))!function hb(u,p,w,te,Ee,Be,Qe){var ot=Cb(u,w),ut=Cb(p,w),Rt=Qe.get(ut);if(Rt)gd(u,w,Rt);else{var kt=Be?Be(ot,ut,w+"",u,p,Qe):b,Lt=kt===b;if(Lt){var Zt=$n(ut),_n=!Zt&&Il(ut),Dn=!Zt&&!_n&&Nd(ut);kt=ut,Zt||_n||Dn?$n(ot)?kt=ot:jr(ot)?kt=Do(ot):_n?(Lt=!1,kt=im(ut,!0)):Dn?(Lt=!1,kt=yb(ut,!0)):kt=[]:Uu(ut)||Fc(ut)?(kt=ot,Fc(ot)?kt=Sm(ot):(!vr(ot)||Na(ot))&&(kt=ow(ut))):Lt=!1}Lt&&(Qe.set(ut,kt),Ee(kt,ut,te,Be,Qe),Qe.delete(ut)),gd(u,w,kt)}}(u,p,Qe,w,Ki,te,Ee);else{var ot=te?te(Cb(u,Qe),Be,Qe+"",u,p,Ee):b;ot===b&&(ot=Be),gd(u,Qe,ot)}},Ts)}function Gx(u,p){var w=u.length;if(w)return ha(p+=p<0?w:0,w)?u[p]:b}function Jp(u,p,w){p=p.length?br(p,function(Be){return $n(Be)?function(Qe){return Mc(Qe,1===Be.length?Be[0]:Be)}:Be}):[Is];var te=-1;return p=br(p,rs(In())),function Vp(at,St){var xt=at.length;for(at.sort(St);xt--;)at[xt]=at[xt].value;return at}(Hx(u,function(Be,Qe,ot){return{criteria:br(p,function(Rt){return Rt(Be)}),index:++te,value:Be}}),function(Be,Qe){return function qx(u,p,w){for(var te=-1,Ee=u.criteria,Be=p.criteria,Qe=Ee.length,ot=w.length;++te<Qe;){var ut=vb(Ee[te],Be[te]);if(ut)return te>=ot?ut:ut*("desc"==w[te]?-1:1)}return u.index-p.index}(Be,Qe,w)})}function fb(u,p,w){for(var te=-1,Ee=p.length,Be={};++te<Ee;){var Qe=p[te],ot=Mc(u,Qe);w(ot,Qe)&&Du(Be,_l(Qe,u),ot)}return Be}function Tu(u,p,w,te){var Ee=te?V_:Ec,Be=-1,Qe=p.length,ot=u;for(u===p&&(p=Do(p)),w&&(ot=br(u,rs(w)));++Be<Qe;)for(var ut=0,Rt=p[Be],kt=w?w(Rt):Rt;(ut=Ee(ot,kt,ut,te))>-1;)ot!==u&&Ta.call(ot,ut,1),Ta.call(u,ut,1);return u}function Dc(u,p){for(var w=u?p.length:0,te=w-1;w--;){var Ee=p[w];if(w==te||Ee!==Be){var Be=Ee;ha(Ee)?Ta.call(u,Ee,1):xd(u,Ee)}}return u}function pb(u,p){return u+yr(wx()*(p-u+1))}function Iu(u,p){var w="";if(!u||p<1||p>ze)return w;do{p%2&&(w+=u),(p=yr(p/2))&&(u+=u)}while(p);return w}function Qn(u,p){return Mb(aw(u,p,Is),u+"")}function mb(u){return rb(Gu(u))}function $x(u,p){var w=Gu(u);return Id(w,bd(p,0,w.length))}function Du(u,p,w,te){if(!vr(u))return u;for(var Ee=-1,Be=(p=_l(p,u)).length,Qe=Be-1,ot=u;null!=ot&&++Ee<Be;){var ut=Vs(p[Ee]),Rt=w;if("__proto__"===ut||"constructor"===ut||"prototype"===ut)return u;if(Ee!=Qe){var kt=ot[ut];(Rt=te?te(kt,ut,ot):b)===b&&(Rt=vr(kt)?kt:ha(p[Ee+1])?[]:{})}hl(ot,ut,Rt),ot=ot[ut]}return u}var Yx=Z_?function(u,p){return Z_.set(u,p),u}:Is,Ru=Au?function(u,p){return Au(u,"toString",{configurable:!0,enumerable:!1,value:Cf(p),writable:!0})}:Is;function Qh(u){return Id(Gu(u))}function da(u,p,w){var te=-1,Ee=u.length;p<0&&(p=-p>Ee?0:Ee+p),(w=w>Ee?Ee:w)<0&&(w+=Ee),Ee=p>w?0:w-p>>>0,p>>>=0;for(var Be=xt(Ee);++te<Ee;)Be[te]=u[te+p];return Be}function gb(u,p){var w;return pl(u,function(te,Ee,Be){return!(w=p(te,Ee,Be))}),!!w}function Qp(u,p,w){var te=0,Ee=null==u?te:u.length;if("number"==typeof p&&p==p&&Ee<=2147483647){for(;te<Ee;){var Be=te+Ee>>>1,Qe=u[Be];null!==Qe&&!Zo(Qe)&&(w?Qe<=p:Qe<p)?te=Be+1:Ee=Be}return Ee}return _b(u,p,Is,w)}function _b(u,p,w,te){var Ee=0,Be=null==u?0:u.length;if(0===Be)return 0;for(var Qe=(p=w(p))!=p,ot=null===p,ut=Zo(p),Rt=p===b;Ee<Be;){var kt=yr((Ee+Be)/2),Lt=w(u[kt]),Zt=Lt!==b,_n=null===Lt,Dn=Lt==Lt,ri=Zo(Lt);if(Qe)var Cn=te||Dn;else Cn=Rt?Dn&&(te||Zt):ot?Dn&&Zt&&(te||!_n):ut?Dn&&Zt&&!_n&&(te||!ri):!_n&&!ri&&(te?Lt<=p:Lt<p);Cn?Ee=kt+1:Be=kt}return ir(Be,4294967294)}function Xx(u,p){for(var w=-1,te=u.length,Ee=0,Be=[];++w<te;){var Qe=u[w],ot=p?p(Qe):Qe;if(!w||!Jo(ot,ut)){var ut=ot;Be[Ee++]=0===Qe?0:Qe}}return Be}function eM(u){return"number"==typeof u?u:Zo(u)?NaN:+u}function ua(u){if("string"==typeof u)return u;if($n(u))return br(u,ua)+"";if(Zo(u))return eb?eb.call(u):"";var p=u+"";return"0"==p&&1/u==-Me?"-0":p}function tc(u,p,w){var te=-1,Ee=ud,Be=u.length,Qe=!0,ot=[],ut=ot;if(w)Qe=!1,Ee=B_;else if(Be>=200){var Rt=p?null:SL(u);if(Rt)return Hp(Rt);Qe=!1,Ee=vu,ut=new md}else ut=p?[]:ot;e:for(;++te<Be;){var kt=u[te],Lt=p?p(kt):kt;if(kt=w||0!==kt?kt:0,Qe&&Lt==Lt){for(var Zt=ut.length;Zt--;)if(ut[Zt]===Lt)continue e;p&&ut.push(Lt),ot.push(kt)}else Ee(ut,Lt,w)||(ut!==ot&&ut.push(Lt),ot.push(kt))}return ot}function xd(u,p){return null==(u=_M(u,p=_l(p,u)))||delete u[Vs(pa(p))]}function Kx(u,p,w,te){return Du(u,p,w(Mc(u,p)),te)}function gl(u,p,w,te){for(var Ee=u.length,Be=te?Ee:-1;(te?Be--:++Be<Ee)&&p(u[Be],Be,u););return w?da(u,te?0:Be,te?Be+1:Ee):da(u,te?Be+1:0,te?Ee:Be)}function em(u,p){var w=u;return w instanceof xi&&(w=w.value()),Up(p,function(te,Ee){return Ee.func.apply(Ee.thisArg,al([te],Ee.args))},w)}function ku(u,p,w){var te=u.length;if(te<2)return te?tc(u[0]):[];for(var Ee=-1,Be=xt(te);++Ee<te;)for(var Qe=u[Ee],ot=-1;++ot<te;)ot!=Ee&&(Be[Ee]=Kh(Be[Ee]||Qe,u[ot],p,w));return tc(fi(Be,1),p,w)}function tM(u,p,w){for(var te=-1,Ee=u.length,Be=p.length,Qe={};++te<Ee;)w(Qe,u[te],te<Be?p[te]:b);return Qe}function tm(u){return jr(u)?u:[]}function nm(u){return"function"==typeof u?u:Is}function _l(u,p){return $n(u)?u:El(u,p)?[u]:cm(Ui(u))}var nc=Qn;function bl(u,p,w){var te=u.length;return w=w===b?te:w,!p&&w>=te?u:da(u,p,w)}var ef=Uh||function(u){return zo.clearTimeout(u)};function im(u,p){if(p)return u.slice();var w=u.length,te=hd?hd(w):new u.constructor(w);return u.copy(te),te}function rm(u){var p=new u.constructor(u.byteLength);return new dl(p).set(new dl(u)),p}function yb(u,p){var w=p?rm(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function vb(u,p){if(u!==p){var w=u!==b,te=null===u,Ee=u==u,Be=Zo(u),Qe=p!==b,ot=null===p,ut=p==p,Rt=Zo(p);if(!ot&&!Rt&&!Be&&u>p||Be&&Qe&&ut&&!ot&&!Rt||te&&Qe&&ut||!w&&ut||!Ee)return 1;if(!te&&!Be&&!Rt&&u<p||Rt&&w&&Ee&&!te&&!Be||ot&&w&&Ee||!Qe&&Ee||!ut)return-1}return 0}function xb(u,p,w,te){for(var Ee=-1,Be=u.length,Qe=w.length,ot=-1,ut=p.length,Rt=Fr(Be-Qe,0),kt=xt(ut+Rt),Lt=!te;++ot<ut;)kt[ot]=p[ot];for(;++Ee<Qe;)(Lt||Ee<Be)&&(kt[w[Ee]]=u[Ee]);for(;Rt--;)kt[ot++]=u[Ee++];return kt}function Jx(u,p,w,te){for(var Ee=-1,Be=u.length,Qe=-1,ot=w.length,ut=-1,Rt=p.length,kt=Fr(Be-ot,0),Lt=xt(kt+Rt),Zt=!te;++Ee<kt;)Lt[Ee]=u[Ee];for(var _n=Ee;++ut<Rt;)Lt[_n+ut]=p[ut];for(;++Qe<ot;)(Zt||Ee<Be)&&(Lt[_n+w[Qe]]=u[Ee++]);return Lt}function Do(u,p){var w=-1,te=u.length;for(p||(p=xt(te));++w<te;)p[w]=u[w];return p}function Xo(u,p,w,te){var Ee=!w;w||(w={});for(var Be=-1,Qe=p.length;++Be<Qe;){var ot=p[Be],ut=te?te(w[ot],u[ot],ot,w,u):b;ut===b&&(ut=u[ot]),Ee?fl(w,ot,ut):hl(w,ot,ut)}return w}function tf(u,p){return function(w,te){var Ee=$n(w)?gL:_d,Be=p?p():{};return Ee(w,u,In(te,2),Be)}}function ka(u){return Qn(function(p,w){var te=-1,Ee=w.length,Be=Ee>1?w[Ee-1]:b,Qe=Ee>2?w[2]:b;for(Be=u.length>3&&"function"==typeof Be?(Ee--,Be):b,Qe&&cs(w[0],w[1],Qe)&&(Be=Ee<3?b:Be,Ee=1),p=Zi(p);++te<Ee;){var ot=w[te];ot&&u(p,ot,te,Be)}return p})}function wd(u,p){return function(w,te){if(null==w)return w;if(!Ms(w))return u(w,te);for(var Ee=w.length,Be=p?Ee:-1,Qe=Zi(w);(p?Be--:++Be<Ee)&&!1!==te(Qe[Be],Be,Qe););return w}}function Zr(u){return function(p,w,te){for(var Ee=-1,Be=Zi(p),Qe=te(p),ot=Qe.length;ot--;){var ut=Qe[u?ot:++Ee];if(!1===w(Be[ut],ut,Be))break}return p}}function Qi(u){return function(p){var w=Ho(p=Ui(p))?En(p):b,te=w?w[0]:p.charAt(0),Ee=w?bl(w,1).join(""):p.slice(1);return te[u]()+Ee}}function yl(u){return function(p){return Up(Fd(Dm(p).replace(mL,"")),u,"")}}function nf(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var w=$h(u.prototype),te=u.apply(w,p);return vr(te)?te:w}}function vl(u){return function(p,w,te){var Ee=Zi(p);if(!Ms(p)){var Be=In(w,3);p=co(p),w=function(ot){return Be(Ee[ot],ot,Ee)}}var Qe=u(p,w,te);return Qe>-1?Ee[Be?p[Qe]:Qe]:b}}function Ed(u){return Oc(function(p){var w=p.length,te=w,Ee=Da.prototype.thru;for(u&&p.reverse();te--;){var Be=p[te];if("function"!=typeof Be)throw new Vt(_);if(Ee&&!Qe&&"wrapper"==Cd(Be))var Qe=new Da([],!0)}for(te=Qe?te:w;++te<w;){var ot=Cd(Be=p[te]),ut="wrapper"==ot?sm(Be):b;Qe=ut&&Nu(ut[0])&&424==ut[1]&&!ut[4].length&&1==ut[9]?Qe[Cd(ut[0])].apply(Qe,ut[3]):1==Be.length&&Nu(Be)?Qe[ot]():Qe.thru(Be)}return function(){var Rt=arguments,kt=Rt[0];if(Qe&&1==Rt.length&&$n(kt))return Qe.plant(kt).value();for(var Lt=0,Zt=w?p[Lt].apply(this,Rt):kt;++Lt<w;)Zt=p[Lt].call(this,Zt);return Zt}})}function Rc(u,p,w,te,Ee,Be,Qe,ot,ut,Rt){var kt=p&R,Lt=1&p,Zt=2&p,_n=24&p,Dn=512&p,ri=Zt?b:nf(u);return function Cn(){for(var hi=arguments.length,vi=xt(hi),Gs=hi;Gs--;)vi[Gs]=arguments[Gs];if(_n)var ds=Nc(Cn),Ws=function px(at,St){for(var xt=at.length,Kt=0;xt--;)at[xt]===St&&++Kt;return Kt}(vi,ds);if(te&&(vi=xb(vi,te,Ee,_n)),Be&&(vi=Jx(vi,Be,Qe,_n)),hi-=Ws,_n&&hi<Rt){var Wr=ll(vi,ds);return oM(u,p,Rc,Cn.placeholder,w,vi,Wr,ot,ut,Rt-hi)}var Pa=Lt?w:this,Uc=Zt?Pa[u]:u;return hi=vi.length,ot?vi=function cw(u,p){for(var w=u.length,te=ir(p.length,w),Ee=Do(u);te--;){var Be=p[te];u[te]=ha(Be,w)?Ee[Be]:b}return u}(vi,ot):Dn&&hi>1&&vi.reverse(),kt&&ut<hi&&(vi.length=ut),this&&this!==zo&&this instanceof Cn&&(Uc=ri||nf(Uc)),Uc.apply(Pa,vi)}}function Ad(u,p){return function(w,te){return function Ic(u,p,w,te){return As(u,function(Ee,Be,Qe){p(te,w(Ee),Be,Qe)}),te}(w,u,p(te),{})}}function rf(u,p){return function(w,te){var Ee;if(w===b&&te===b)return p;if(w!==b&&(Ee=w),te!==b){if(Ee===b)return te;"string"==typeof w||"string"==typeof te?(w=ua(w),te=ua(te)):(w=eM(w),te=eM(te)),Ee=u(w,te)}return Ee}}function sf(u){return Oc(function(p){return p=br(p,rs(In())),Qn(function(w){var te=this;return u(p,function(Ee){return oa(Ee,te,w)})})})}function kc(u,p){var w=(p=p===b?" ":ua(p)).length;if(w<2)return w?Iu(p,u):p;var te=Iu(p,Sc(u/wu(p)));return Ho(p)?bl(En(te),0,u).join(""):te.slice(0,u)}function ew(u){return function(p,w,te){return te&&"number"!=typeof te&&cs(p,w,te)&&(w=te=b),p=Lc(p),w===b?(w=p,p=0):w=Lc(w),function Zp(u,p,w,te){for(var Ee=-1,Be=Fr(Sc((p-u)/(w||1)),0),Qe=xt(Be);Be--;)Qe[te?Be:++Ee]=u,u+=w;return Qe}(p,w,te=te===b?p<w?1:-1:Lc(te),u)}}function wb(u){return function(p,w){return"string"==typeof p&&"string"==typeof w||(p=ls(p),w=ls(w)),u(p,w)}}function oM(u,p,w,te,Ee,Be,Qe,ot,ut,Rt){var kt=8&p;p|=kt?x:64,4&(p&=~(kt?64:x))||(p&=-4);var ri=[u,p,Ee,kt?Be:b,kt?Qe:b,kt?b:Be,kt?b:Qe,ot,ut,Rt],Cn=w.apply(b,ri);return Nu(u)&&bM(Cn,ri),Cn.placeholder=te,lw(Cn,u,p)}function tw(u){var p=Nr[u];return function(w,te){if(w=ls(w),(te=null==te?0:ir(ei(te),292))&&To(w)){var Ee=(Ui(w)+"e").split("e");return+((Ee=(Ui(p(Ee[0]+"e"+(+Ee[1]+te)))+"e").split("e"))[0]+"e"+(+Ee[1]-te))}return p(w)}}var SL=Gh&&1/Hp(new Gh([,-0]))[1]==Me?function(u){return new Gh(u)}:Yu;function sM(u){return function(p){var w=as(p);return w==re?$_(p):w==Ve?function bx(at){var St=-1,xt=Array(at.size);return at.forEach(function(Kt){xt[++St]=[Kt,Kt]}),xt}(p):function Mi(at,St){return br(St,function(xt){return[xt,at[xt]]})}(p,u(p))}}function xl(u,p,w,te,Ee,Be,Qe,ot){var ut=2&p;if(!ut&&"function"!=typeof u)throw new Vt(_);var Rt=te?te.length:0;if(Rt||(p&=-97,te=Ee=b),Qe=Qe===b?Qe:Fr(ei(Qe),0),ot=ot===b?ot:ei(ot),Rt-=Ee?Ee.length:0,64&p){var kt=te,Lt=Ee;te=Ee=b}var Zt=ut?b:sm(u),_n=[u,p,w,te,Ee,kt,Lt,Be,Qe,ot];if(Zt&&function gM(u,p){var w=u[1],te=p[1],Ee=w|te;if(!(Ee<131)&&!(te==R&&8==w||te==R&&256==w&&u[7].length<=p[8]||384==te&&p[7].length<=p[8]&&8==w))return u;1&te&&(u[2]=p[2],Ee|=1&w?0:4);var ot=p[3];if(ot){var ut=u[3];u[3]=ut?xb(ut,ot,p[4]):ot,u[4]=ut?ll(u[3],O):p[4]}(ot=p[5])&&(u[5]=(ut=u[5])?Jx(ut,ot,p[6]):ot,u[6]=ut?ll(u[5],O):p[6]),(ot=p[7])&&(u[7]=ot),te&R&&(u[8]=null==u[8]?p[8]:ir(u[8],p[8])),null==u[9]&&(u[9]=p[9]),u[0]=p[0],u[1]=Ee}(_n,Zt),u=_n[0],p=_n[1],w=_n[2],te=_n[3],Ee=_n[4],!(ot=_n[9]=_n[9]===b?ut?0:u.length:Fr(_n[9]-Rt,0))&&24&p&&(p&=-25),p&&1!=p)Dn=8==p||16==p?function Qx(u,p,w){var te=nf(u);return function Ee(){for(var Be=arguments.length,Qe=xt(Be),ot=Be,ut=Nc(Ee);ot--;)Qe[ot]=arguments[ot];var Rt=Be<3&&Qe[0]!==ut&&Qe[Be-1]!==ut?[]:ll(Qe,ut);return(Be-=Rt.length)<w?oM(u,p,Rc,Ee.placeholder,b,Qe,Rt,b,b,w-Be):oa(this&&this!==zo&&this instanceof Ee?te:u,this,Qe)}}(u,p,ot):p!=x&&33!=p||Ee.length?Rc.apply(b,_n):function AL(u,p,w,te){var Ee=1&p,Be=nf(u);return function Qe(){for(var ot=-1,ut=arguments.length,Rt=-1,kt=te.length,Lt=xt(kt+ut),Zt=this&&this!==zo&&this instanceof Qe?Be:u;++Rt<kt;)Lt[Rt]=te[Rt];for(;ut--;)Lt[Rt++]=arguments[++ot];return oa(Zt,Ee?w:this,Lt)}}(u,p,w,te);else var Dn=function rM(u,p,w){var te=1&p,Ee=nf(u);return function Be(){return(this&&this!==zo&&this instanceof Be?Ee:u).apply(te?w:this,arguments)}}(u,p,w);return lw((Zt?Yx:bM)(Dn,_n),u,p)}function Sd(u,p,w,te){return u===b||Jo(u,Wo[w])&&!Ci.call(te,w)?p:u}function nw(u,p,w,te,Ee,Be){return vr(u)&&vr(p)&&(Be.set(p,u),Ki(u,p,b,nw,Be),Be.delete(p)),u}function aM(u){return Uu(u)?b:u}function Qr(u,p,w,te,Ee,Be){var Qe=1&w,ot=u.length,ut=p.length;if(ot!=ut&&!(Qe&&ut>ot))return!1;var Rt=Be.get(u),kt=Be.get(p);if(Rt&&kt)return Rt==p&&kt==u;var Lt=-1,Zt=!0,_n=2&w?new md:b;for(Be.set(u,p),Be.set(p,u);++Lt<ot;){var Dn=u[Lt],ri=p[Lt];if(te)var Cn=Qe?te(ri,Dn,Lt,p,u,Be):te(Dn,ri,Lt,u,p,Be);if(Cn!==b){if(Cn)continue;Zt=!1;break}if(_n){if(!j_(p,function(hi,vi){if(!vu(_n,vi)&&(Dn===hi||Ee(Dn,hi,w,te,Be)))return _n.push(vi)})){Zt=!1;break}}else if(Dn!==ri&&!Ee(Dn,ri,w,te,Be)){Zt=!1;break}}return Be.delete(u),Be.delete(p),Zt}function Oc(u){return Mb(aw(u,b,dm),u+"")}function Ko(u){return Fx(u,co,cf)}function wl(u){return Fx(u,Ts,Md)}var sm=Z_?function(u){return Z_.get(u)}:Yu;function Cd(u){for(var p=u.name+"",w=Wh[p],te=Ci.call(Wh,p)?w.length:0;te--;){var Ee=w[te],Be=Ee.func;if(null==Be||Be==u)return Ee.name}return p}function Nc(u){return(Ci.call(Oe,"placeholder")?Oe:u).placeholder}function In(){var u=Oe.iteratee||fy;return u=u===fy?ub:u,arguments.length?u(arguments[0],arguments[1]):u}function Eb(u,p){var w=u.__data__;return function fM(u){var p=typeof u;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u}(p)?w["string"==typeof p?"string":"hash"]:w.map}function am(u){for(var p=co(u),w=p.length;w--;){var te=p[w],Ee=u[te];p[w]=[te,Ee,lf(Ee)]}return p}function Ou(u,p){var w=function BC(at,St){return null==at?b:at[St]}(u,p);return jx(w)?w:b}var cf=Vh?function(u){return null==u?[]:(u=Zi(u),qa(Vh(u),function(p){return X_.call(u,p)}))}:Nm,Md=Vh?function(u){for(var p=[];u;)al(p,cf(u)),u=js(u);return p}:Nm,as=Ss;function rw(u,p,w){for(var te=-1,Ee=(p=_l(p,u)).length,Be=!1;++te<Ee;){var Qe=Vs(p[te]);if(!(Be=null!=u&&w(u,Qe)))break;u=u[Qe]}return Be||++te!=Ee?Be:!!(Ee=null==u?0:u.length)&&rc(Ee)&&ha(Qe,Ee)&&($n(u)||Fc(u))}function ow(u){return"function"!=typeof u.constructor||Td(u)?{}:$h(js(u))}function Ab(u){return $n(u)||Fc(u)||!!(jh&&u&&u[jh])}function ha(u,p){var w=typeof u;return!!(p=p??ze)&&("number"==w||"symbol"!=w&&Si.test(u))&&u>-1&&u%1==0&&u<p}function cs(u,p,w){if(!vr(w))return!1;var te=typeof p;return!!("number"==te?Ms(w)&&ha(p,w.length):"string"==te&&p in w)&&Jo(w[p],u)}function El(u,p){if($n(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!Zo(u))||Uo.test(u)||!Xa.test(u)||null!=p&&u in Zi(p)}function Nu(u){var p=Cd(u),w=Oe[p];if("function"!=typeof w||!(p in xi.prototype))return!1;if(u===w)return!0;var te=sm(w);return!!te&&u===te[0]}(Wp&&as(new Wp(new ArrayBuffer(1)))!=Y||zh&&as(new zh)!=re||Hh&&as(Hh.resolve())!=pe||Gh&&as(new Gh)!=Ve||$p&&as(new $p)!=wt)&&(as=function(u){var p=Ss(u),w=p==U?u.constructor:b,te=w?ic(w):"";if(te)switch(te){case bL:return Y;case yL:return re;case vL:return pe;case xL:return Ve;case wL:return wt}return p});var sw=ao?Na:a1;function Td(u){var p=u&&u.constructor;return u===("function"==typeof p&&p.prototype||Wo)}function lf(u){return u==u&&!vr(u)}function Sb(u,p){return function(w){return null!=w&&w[u]===p&&(p!==b||u in Zi(w))}}function aw(u,p,w){return p=Fr(p===b?u.length-1:p,0),function(){for(var te=arguments,Ee=-1,Be=Fr(te.length-p,0),Qe=xt(Be);++Ee<Be;)Qe[Ee]=te[p+Ee];Ee=-1;for(var ot=xt(p+1);++Ee<p;)ot[Ee]=te[Ee];return ot[p]=w(Qe),oa(u,this,ot)}}function _M(u,p){return p.length<2?u:Mc(u,da(p,0,-1))}function Cb(u,p){if(("constructor"!==p||"function"!=typeof u[p])&&"__proto__"!=p)return u[p]}var bM=Al(Yx),uf=Gp||function(u,p){return zo.setTimeout(u,p)},Mb=Al(Ru);function lw(u,p,w){var te=p+"";return Mb(u,function hM(u,p){var w=p.length;if(!w)return u;var te=w-1;return p[te]=(w>1?"& ":"")+p[te],p=p.join(w>2?", ":" "),u.replace(an,"{\n/* [wrapped with "+p+"] */\n")}(te,function yM(u,p){return Ma(ft,function(w){var te="_."+w[0];p&w[1]&&!ud(u,te)&&u.push(te)}),u.sort()}(function lM(u){var p=u.match(gr);return p?p[1].split(Yt):[]}(te),w)))}function Al(u){var p=0,w=0;return function(){var te=q_(),Ee=16-(te-w);if(w=te,Ee>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(b,arguments)}}function Id(u,p){var w=-1,te=u.length,Ee=te-1;for(p=p===b?te:p;++w<p;){var Be=pb(w,Ee),Qe=u[Be];u[Be]=u[w],u[w]=Qe}return u.length=p,u}var cm=function mM(u){var p=ju(u,function(te){return 500===w.size&&w.clear(),te}),w=p.cache;return p}(function(u){var p=[];return 46===u.charCodeAt(0)&&p.push(""),u.replace(sl,function(w,te,Ee,Be){p.push(Ee?Be.replace(Ca,"$1"):te||w)}),p});function Vs(u){if("string"==typeof u||Zo(u))return u;var p=u+"";return"0"==p&&1/u==-Me?"-0":p}function ic(u){if(null!=u){try{return Es.call(u)}catch{}try{return u+""}catch{}}return""}function Tb(u){if(u instanceof xi)return u.clone();var p=new Da(u.__wrapped__,u.__chain__);return p.__actions__=Do(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}var Ib=Qn(function(u,p){return jr(u)?Kh(u,fi(p,1,jr,!0)):[]}),vM=Qn(function(u,p){var w=pa(p);return jr(w)&&(w=b),jr(u)?Kh(u,fi(p,1,jr,!0),In(w,2)):[]}),Db=Qn(function(u,p){var w=pa(p);return jr(w)&&(w=b),jr(u)?Kh(u,fi(p,1,jr,!0),b,w):[]});function hf(u,p,w){var te=null==u?0:u.length;if(!te)return-1;var Ee=null==w?0:ei(w);return Ee<0&&(Ee=Fr(te+Ee,0)),Dt(u,In(p,3),Ee)}function fw(u,p,w){var te=null==u?0:u.length;if(!te)return-1;var Ee=te-1;return w!==b&&(Ee=ei(w),Ee=w<0?Fr(te+Ee,0):ir(Ee,te-1)),Dt(u,In(p,3),Ee,!0)}function dm(u){return null!=u&&u.length?fi(u,1):[]}function hm(u){return u&&u.length?u[0]:b}var pw=Qn(function(u){var p=br(u,tm);return p.length&&p[0]===u[0]?la(p):[]}),Lu=Qn(function(u){var p=pa(u),w=br(u,tm);return p===pa(w)?p=b:w.pop(),w.length&&w[0]===u[0]?la(w,In(p,2)):[]}),AM=Qn(function(u){var p=pa(u),w=br(u,tm);return(p="function"==typeof p?p:b)&&w.pop(),w.length&&w[0]===u[0]?la(w,b,p):[]});function pa(u){var p=null==u?0:u.length;return p?u[p-1]:b}var Ob=Qn(Nb);function Nb(u,p){return u&&u.length&&p&&p.length?Tu(u,p):u}var mw=Oc(function(u,p){var w=null==u?0:u.length,te=sb(u,p);return Dc(u,br(p,function(Ee){return ha(Ee,w)?+Ee:Ee}).sort(vb)),te});function fm(u){return null==u?u:J_.call(u)}var OM=Qn(function(u){return tc(fi(u,1,jr,!0))}),Cl=Qn(function(u){var p=pa(u);return jr(p)&&(p=b),tc(fi(u,1,jr,!0),In(p,2))}),pf=Qn(function(u){var p=pa(u);return p="function"==typeof p?p:b,tc(fi(u,1,jr,!0),b,p)});function vw(u){if(!u||!u.length)return[];var p=0;return u=qa(u,function(w){if(jr(w))return p=Fr(w.length,p),!0}),sa(p,function(w){return br(u,z_(w))})}function _o(u,p){if(!u||!u.length)return[];var w=vw(u);return null==p?w:br(w,function(te){return oa(p,b,te)})}var Lb=Qn(function(u,p){return jr(u)?Kh(u,p):[]}),PM=Qn(function(u){return ku(qa(u,jr))}),FM=Qn(function(u){var p=pa(u);return jr(p)&&(p=b),ku(qa(u,jr),In(p,2))}),LM=Qn(function(u){var p=pa(u);return p="function"==typeof p?p:b,ku(qa(u,jr),b,p)}),Bb=Qn(vw),zs=Qn(function(u){var p=u.length,w=p>1?u[p-1]:b;return w="function"==typeof w?(u.pop(),w):b,_o(u,w)});function Pc(u){var p=Oe(u);return p.__chain__=!0,p}function mf(u,p){return p(u)}var Ml=Oc(function(u){var p=u.length,w=p?u[0]:0,te=this.__wrapped__,Ee=function(Be){return sb(Be,u)};return!(p>1||this.__actions__.length)&&te instanceof xi&&ha(w)?((te=te.slice(w,+w+(p?1:0))).__actions__.push({func:mf,args:[Ee],thisArg:b}),new Da(te,this.__chain__).thru(function(Be){return p&&!Be.length&&Be.push(b),Be})):this.thru(Ee)}),Aw=tf(function(u,p,w){Ci.call(u,w)?++u[w]:fl(u,w,1)}),UM=vl(hf),Ub=vl(fw);function VM(u,p){return($n(u)?Ma:pl)(u,In(p,3))}function zM(u,p){return($n(u)?_L:Px)(u,In(p,3))}var OL=tf(function(u,p,w){Ci.call(u,w)?u[w].push(p):fl(u,w,[p])}),PL=Qn(function(u,p,w){var te=-1,Ee="function"==typeof p,Be=Ms(u)?xt(u.length):[];return pl(u,function(Qe){Be[++te]=Ee?oa(p,Qe,w):qh(Qe,p,w)}),Be}),HM=tf(function(u,p,w){fl(u,w,p)});function kd(u,p){return($n(u)?br:Hx)(u,In(p,3))}var zb=tf(function(u,p,w){u[w?0:1].push(p)},function(){return[[],[]]}),Tl=Qn(function(u,p){if(null==u)return[];var w=p.length;return w>1&&cs(u,p[0],p[1])?p=[]:w>2&&cs(p[0],p[1],p[2])&&(p=[p[0]]),Jp(u,fi(p,1),[])}),ym=Za||function(){return zo.Date.now()};function Iw(u,p,w){return p=w?b:p,xl(u,R,b,b,b,b,p=u&&null==p?u.length:p)}function Hb(u,p){var w;if("function"!=typeof p)throw new Vt(_);return u=ei(u),function(){return--u>0&&(w=p.apply(this,arguments)),u<=1&&(p=b),w}}var bf=Qn(function(u,p,w){var te=1;if(w.length){var Ee=ll(w,Nc(bf));te|=x}return xl(u,te,p,w,Ee)}),Dw=Qn(function(u,p,w){var te=3;if(w.length){var Ee=ll(w,Nc(Dw));te|=x}return xl(p,te,u,w,Ee)});function Gb(u,p,w){var te,Ee,Be,Qe,ot,ut,Rt=0,kt=!1,Lt=!1,Zt=!0;if("function"!=typeof u)throw new Vt(_);function _n(Wr){var Pa=te,Uc=Ee;return te=Ee=b,Rt=Wr,Qe=u.apply(Uc,Pa)}function Cn(Wr){var Pa=Wr-ut;return ut===b||Pa>=p||Pa<0||Lt&&Wr-Rt>=Be}function hi(){var Wr=ym();if(Cn(Wr))return vi(Wr);ot=uf(hi,function ri(Wr){var yy=p-(Wr-ut);return Lt?ir(yy,Be-(Wr-Rt)):yy}(Wr))}function vi(Wr){return ot=b,Zt&&te?_n(Wr):(te=Ee=b,Qe)}function Ws(){var Wr=ym(),Pa=Cn(Wr);if(te=arguments,Ee=this,ut=Wr,Pa){if(ot===b)return function Dn(Wr){return Rt=Wr,ot=uf(hi,p),kt?_n(Wr):Qe}(ut);if(Lt)return ef(ot),ot=uf(hi,p),_n(ut)}return ot===b&&(ot=uf(hi,p)),Qe}return p=ls(p)||0,vr(w)&&(kt=!!w.leading,Be=(Lt="maxWait"in w)?Fr(ls(w.maxWait)||0,p):Be,Zt="trailing"in w?!!w.trailing:Zt),Ws.cancel=function Gs(){ot!==b&&ef(ot),Rt=0,te=ut=Ee=ot=b},Ws.flush=function ds(){return ot===b?Qe:vi(ym())},Ws}var $M=Qn(function(u,p){return Nx(u,1,p)}),YM=Qn(function(u,p,w){return Nx(u,ls(p)||0,w)});function ju(u,p){if("function"!=typeof u||null!=p&&"function"!=typeof p)throw new Vt(_);var w=function(){var te=arguments,Ee=p?p.apply(this,te):te[0],Be=w.cache;if(Be.has(Ee))return Be.get(Ee);var Qe=u.apply(this,te);return w.cache=Be.set(Ee,Qe)||Be,Qe};return w.cache=new(ju.Cache||Cc),w}function yf(u){if("function"!=typeof u)throw new Vt(_);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}ju.Cache=Cc;var qo=nc(function(u,p){var w=(p=1==p.length&&$n(p[0])?br(p[0],rs(In())):br(fi(p,1),rs(In()))).length;return Qn(function(te){for(var Ee=-1,Be=ir(te.length,w);++Ee<Be;)te[Ee]=p[Ee].call(this,te[Ee]);return oa(u,this,te)})}),Od=Qn(function(u,p){var w=ll(p,Nc(Od));return xl(u,x,b,p,w)}),$b=Qn(function(u,p){var w=ll(p,Nc($b));return xl(u,64,b,p,w)}),Ow=Oc(function(u,p){return xl(u,256,b,b,b,p)});function Jo(u,p){return u===p||u!=u&&p!=p}var vm=wb(Kp),Lw=wb(function(u,p){return u>=p}),Fc=cb(function(){return arguments}())?cb:function(u){return Tr(u)&&Ci.call(u,"callee")&&!X_.call(u,"callee")},$n=xt.isArray,eT=Lp?rs(Lp):function JC(u){return Tr(u)&&Ss(u)==ge};function Ms(u){return null!=u&&rc(u.length)&&!Na(u)}function jr(u){return Tr(u)&&Ms(u)}var Il=Yo||a1,nT=L_?rs(L_):function ZC(u){return Tr(u)&&Ss(u)==se};function qb(u){if(!Tr(u))return!1;var p=Ss(u);return p==He||"[object DOMException]"==p||"string"==typeof u.message&&"string"==typeof u.name&&!Uu(u)}function Na(u){if(!vr(u))return!1;var p=Ss(u);return p==Je||p==fe||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Jb(u){return"number"==typeof u&&u==ei(u)}function rc(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=ze}function vr(u){var p=typeof u;return null!=u&&("object"==p||"function"==p)}function Tr(u){return null!=u&&"object"==typeof u}var jw=Bp?rs(Bp):function Bx(u){return Tr(u)&&as(u)==re};function Em(u){return"number"==typeof u||Tr(u)&&Ss(u)==$}function Uu(u){if(!Tr(u)||Ss(u)!=U)return!1;var p=js(u);if(null===p)return!0;var w=Ci.call(p,"constructor")&&p.constructor;return"function"==typeof w&&w instanceof w&&Es.call(w)==Kn}var Vu=hx?rs(hx):function Ux(u){return Tr(u)&&Ss(u)==ye},Zb=jp?rs(jp):function db(u){return Tr(u)&&as(u)==Ve};function zu(u){return"string"==typeof u||!$n(u)&&Tr(u)&&Ss(u)==rt}function Zo(u){return"symbol"==typeof u||Tr(u)&&Ss(u)==_t}var Nd=NC?rs(NC):function Vx(u){return Tr(u)&&rc(u.length)&&!!Xi[Ss(u)]},Hw=wb(Zh),sT=wb(function(u,p){return u<=p});function Gw(u){if(!u)return[];if(Ms(u))return zu(u)?En(u):Do(u);if(Ia&&u[Ia])return function gx(at){for(var St,xt=[];!(St=at.next()).done;)xt.push(St.value);return xt}(u[Ia]());var p=as(u);return(p==re?$_:p==Ve?Hp:Gu)(u)}function Lc(u){return u?(u=ls(u))===Me||u===-Me?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function ei(u){var p=Lc(u),w=p%1;return p==p?w?p-w:p:0}function ey(u){return u?bd(ei(u),0,he):0}function ls(u){if("number"==typeof u)return u;if(Zo(u))return NaN;if(vr(u)){var p="function"==typeof u.valueOf?u.valueOf():u;u=vr(p)?p+"":p}if("string"!=typeof u)return 0===u?u:+u;u=G_(u);var w=qt.test(u);return w||Mo.test(u)?dx(u.slice(2),w?2:8):Ai.test(u)?NaN:+u}function Sm(u){return Xo(u,Ts(u))}function Ui(u){return null==u?"":ua(u)}var aT=ka(function(u,p){if(Td(p)||Ms(p))Xo(p,co(p),u);else for(var w in p)Ci.call(p,w)&&hl(u,w,p[w])}),cT=ka(function(u,p){Xo(p,Ts(p),u)}),Cm=ka(function(u,p,w,te){Xo(p,Ts(p),u,te)}),Mm=ka(function(u,p,w,te){Xo(p,co(p),u,te)}),ty=Oc(sb),$w=Qn(function(u,p){u=Zi(u);var w=-1,te=p.length,Ee=te>2?p[2]:b;for(Ee&&cs(p[0],p[1],Ee)&&(te=1);++w<te;)for(var Be=p[w],Qe=Ts(Be),ot=-1,ut=Qe.length;++ot<ut;){var Rt=Qe[ot],kt=u[Rt];(kt===b||Jo(kt,Wo[Rt])&&!Ci.call(u,Rt))&&(u[Rt]=Be[Rt])}return u}),Yw=Qn(function(u){return u.push(b,nw),oa(wf,b,u)});function ny(u,p,w){var te=null==u?b:Mc(u,p);return te===b?w:te}function iy(u,p){return null!=u&&rw(u,p,Tc)}var mT=Ad(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Bs.call(p)),u[p]=w},Cf(Is)),gT=Ad(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Bs.call(p)),Ci.call(u,p)?u[p].push(w):u[p]=[w]},In),_T=Qn(qh);function co(u){return Ms(u)?Dx(u):qp(u)}function Ts(u){return Ms(u)?Dx(u,!0):function zx(u){if(!vr(u))return function Pu(u){var p=[];if(null!=u)for(var w in Zi(u))p.push(w);return p}(u);var p=Td(u),w=[];for(var te in u)"constructor"==te&&(p||!Ci.call(u,te))||w.push(te);return w}(u)}var vT=ka(function(u,p,w){Ki(u,p,w)}),wf=ka(function(u,p,w,te){Ki(u,p,w,te)}),Bc=Oc(function(u,p){var w={};if(null==u)return w;var te=!1;p=br(p,function(Be){return Be=_l(Be,u),te||(te=Be.length>1),Be}),Xo(u,wl(u),w),te&&(w=aa(w,7,aM));for(var Ee=p.length;Ee--;)xd(w,p[Ee]);return w}),Xw=Oc(function(u,p){return null==u?{}:function QC(u,p){return fb(u,p,function(w,te){return iy(u,te)})}(u,p)});function ry(u,p){if(null==u)return{};var w=br(wl(u),function(te){return[te]});return p=In(p),fb(u,w,function(te,Ee){return p(te,Ee[0])})}var xT=sM(co),Tm=sM(Ts);function Gu(u){return null==u?[]:zp(u,co(u))}var Im=yl(function(u,p,w){return p=p.toLowerCase(),u+(w?sy(p):p)});function sy(u){return $u(Ui(u).toLowerCase())}function Dm(u){return(u=Ui(u))&&u.replace(oo,FC).replace(It,"")}var MT=yl(function(u,p,w){return u+(w?"-":"")+p.toLowerCase()}),ay=yl(function(u,p,w){return u+(w?" ":"")+p.toLowerCase()}),Zw=Qi("toLowerCase"),zL=yl(function(u,p,w){return u+(w?"_":"")+p.toLowerCase()}),e1=yl(function(u,p,w){return u+(w?" ":"")+$u(p)}),Sf=yl(function(u,p,w){return u+(w?" ":"")+p.toUpperCase()}),$u=Qi("toUpperCase");function Fd(u,p,w){return u=Ui(u),(p=w?b:p)===b?function jC(at){return DC.test(at)}(u)?function Ht(at){return at.match(ln)||[]}(u):function it(at){return at.match(Sa)||[]}(u):u.match(p)||[]}var km=Qn(function(u,p){try{return oa(u,b,p)}catch(w){return qb(w)?w:new Yn(w)}}),hy=Oc(function(u,p){return Ma(p,function(w){w=Vs(w),fl(u,w,bf(u[w],u))}),u});function Cf(u){return function(){return u}}var OT=Ed(),t1=Ed(!0);function Is(u){return u}function fy(u){return ub("function"==typeof u?u:aa(u,1))}var NT=Qn(function(u,p){return function(w){return qh(w,u,p)}}),PT=Qn(function(u,p){return function(w){return qh(u,w,p)}});function r1(u,p,w){var te=co(p),Ee=Mu(p,te);null==w&&(!vr(p)||!Ee.length&&te.length)&&(w=p,p=u,u=this,Ee=Mu(p,co(p)));var Be=!(vr(w)&&"chain"in w&&!w.chain),Qe=Na(u);return Ma(Ee,function(ot){var ut=p[ot];u[ot]=ut,Qe&&(u.prototype[ot]=function(){var Rt=this.__chain__;if(Be||Rt){var kt=u(this.__wrapped__);return(kt.__actions__=Do(this.__actions__)).push({func:ut,args:arguments,thisArg:u}),kt.__chain__=Rt,kt}return ut.apply(u,al([this.value()],arguments))})}),u}function Yu(){}var LT=sf(br),o1=sf(_u),gy=sf(j_);function Tf(u){return El(u)?z_(Vs(u)):function Wx(u){return function(p){return Mc(p,u)}}(u)}var s1=ew(),jT=ew(!0);function Nm(){return[]}function a1(){return!1}var c1=rf(function(u,p){return u+p},0),jc=tw("ceil"),HT=rf(function(u,p){return u/p},1),GT=tw("floor"),KL=rf(function(u,p){return u*p},1),Pm=tw("round"),$T=rf(function(u,p){return u-p},0);return Oe.after=function WM(u,p){if("function"!=typeof p)throw new Vt(_);return u=ei(u),function(){if(--u<1)return p.apply(this,arguments)}},Oe.ary=Iw,Oe.assign=aT,Oe.assignIn=cT,Oe.assignInWith=Cm,Oe.assignWith=Mm,Oe.at=ty,Oe.before=Hb,Oe.bind=bf,Oe.bindAll=hy,Oe.bindKey=Dw,Oe.castArray=function Fw(){if(!arguments.length)return[];var u=arguments[0];return $n(u)?u:[u]},Oe.chain=Pc,Oe.chunk=function dw(u,p,w){p=(w?cs(u,p,w):p===b)?1:Fr(ei(p),0);var te=null==u?0:u.length;if(!te||p<1)return[];for(var Ee=0,Be=0,Qe=xt(Sc(te/p));Ee<te;)Qe[Be++]=da(u,Ee,Ee+=p);return Qe},Oe.compact=function lm(u){for(var p=-1,w=null==u?0:u.length,te=0,Ee=[];++p<w;){var Be=u[p];Be&&(Ee[te++]=Be)}return Ee},Oe.concat=function CL(){var u=arguments.length;if(!u)return[];for(var p=xt(u-1),w=arguments[0],te=u;te--;)p[te-1]=arguments[te];return al($n(w)?Do(w):[w],fi(p,1))},Oe.cond=function Om(u){var p=null==u?0:u.length,w=In();return u=p?br(u,function(te){if("function"!=typeof te[1])throw new Vt(_);return[w(te[0]),te[1]]}):[],Qn(function(te){for(var Ee=-1;++Ee<p;){var Be=u[Ee];if(oa(Be[0],this,te))return oa(Be[1],this,te)}})},Oe.conforms=function WL(u){return function Ox(u){var p=co(u);return function(w){return yd(w,u,p)}}(aa(u,1))},Oe.constant=Cf,Oe.countBy=Aw,Oe.create=function Ww(u,p){var w=$h(u);return null==p?w:Vn(w,p)},Oe.curry=function Rw(u,p,w){var te=xl(u,8,b,b,b,b,b,p=w?b:p);return te.placeholder=Rw.placeholder,te},Oe.curryRight=function kw(u,p,w){var te=xl(u,16,b,b,b,b,b,p=w?b:p);return te.placeholder=kw.placeholder,te},Oe.debounce=Gb,Oe.defaults=$w,Oe.defaultsDeep=Yw,Oe.defer=$M,Oe.delay=YM,Oe.difference=Ib,Oe.differenceBy=vM,Oe.differenceWith=Db,Oe.drop=function uw(u,p,w){var te=null==u?0:u.length;return te?da(u,(p=w||p===b?1:ei(p))<0?0:p,te):[]},Oe.dropRight=function hw(u,p,w){var te=null==u?0:u.length;return te?da(u,0,(p=te-(p=w||p===b?1:ei(p)))<0?0:p):[]},Oe.dropRightWhile=function Dd(u,p){return u&&u.length?gl(u,In(p,3),!0,!0):[]},Oe.dropWhile=function xM(u,p){return u&&u.length?gl(u,In(p,3),!0):[]},Oe.fill=function Rb(u,p,w,te){var Ee=null==u?0:u.length;return Ee?(w&&"number"!=typeof w&&cs(u,p,w)&&(w=0,te=Ee),function wi(u,p,w,te){var Ee=u.length;for((w=ei(w))<0&&(w=-w>Ee?0:Ee+w),(te=te===b||te>Ee?Ee:ei(te))<0&&(te+=Ee),te=w>te?0:ey(te);w<te;)u[w++]=p;return u}(u,p,w,te)):[]},Oe.filter=function jM(u,p){return($n(u)?qa:Br)(u,In(p,3))},Oe.flatMap=function RL(u,p){return fi(kd(u,p),1)},Oe.flatMapDeep=function kL(u,p){return fi(kd(u,p),Me)},Oe.flatMapDepth=function Vb(u,p,w){return w=w===b?1:ei(w),fi(kd(u,p),w)},Oe.flatten=dm,Oe.flattenDeep=function um(u){return null!=u&&u.length?fi(u,Me):[]},Oe.flattenDepth=function fa(u,p){return null!=u&&u.length?fi(u,p=p===b?1:ei(p)):[]},Oe.flip=function Cs(u){return xl(u,512)},Oe.flow=OT,Oe.flowRight=t1,Oe.fromPairs=function Fu(u){for(var p=-1,w=null==u?0:u.length,te={};++p<w;){var Ee=u[p];te[Ee[0]]=Ee[1]}return te},Oe.functions=function Hs(u){return null==u?[]:Mu(u,co(u))},Oe.functionsIn=function oc(u){return null==u?[]:Mu(u,Ts(u))},Oe.groupBy=OL,Oe.initial=function EM(u){return null!=u&&u.length?da(u,0,-1):[]},Oe.intersection=pw,Oe.intersectionBy=Lu,Oe.intersectionWith=AM,Oe.invert=mT,Oe.invertBy=gT,Oe.invokeMap=PL,Oe.iteratee=fy,Oe.keyBy=HM,Oe.keys=co,Oe.keysIn=Ts,Oe.map=kd,Oe.mapKeys=function bT(u,p){var w={};return p=In(p,3),As(u,function(te,Ee,Be){fl(w,p(te,Ee,Be),te)}),w},Oe.mapValues=function yT(u,p){var w={};return p=In(p,3),As(u,function(te,Ee,Be){fl(w,Ee,p(te,Ee,Be))}),w},Oe.matches=function py(u){return Io(aa(u,1))},Oe.matchesProperty=function n1(u,p){return ml(u,aa(p,1))},Oe.memoize=ju,Oe.merge=vT,Oe.mergeWith=wf,Oe.method=NT,Oe.methodOf=PT,Oe.mixin=r1,Oe.negate=yf,Oe.nthArg=function my(u){return u=ei(u),Qn(function(p){return Gx(p,u)})},Oe.omit=Bc,Oe.omitBy=function Ef(u,p){return ry(u,yf(In(p)))},Oe.once=function Wb(u){return Hb(2,u)},Oe.orderBy=function gm(u,p,w,te){return null==u?[]:($n(p)||(p=null==p?[]:[p]),$n(w=te?b:w)||(w=null==w?[]:[w]),Jp(u,p,w))},Oe.over=LT,Oe.overArgs=qo,Oe.overEvery=o1,Oe.overSome=gy,Oe.partial=Od,Oe.partialRight=$b,Oe.partition=zb,Oe.pick=Xw,Oe.pickBy=ry,Oe.property=Tf,Oe.propertyOf=function BT(u){return function(p){return null==u?b:Mc(u,p)}},Oe.pull=Ob,Oe.pullAll=Nb,Oe.pullAllBy=function CM(u,p,w){return u&&u.length&&p&&p.length?Tu(u,p,In(w,2)):u},Oe.pullAllWith=function MM(u,p,w){return u&&u.length&&p&&p.length?Tu(u,p,b,w):u},Oe.pullAt=mw,Oe.range=s1,Oe.rangeRight=jT,Oe.rearg=Ow,Oe.reject=function _f(u,p){return($n(u)?qa:Br)(u,yf(In(p,3)))},Oe.remove=function TM(u,p){var w=[];if(!u||!u.length)return w;var te=-1,Ee=[],Be=u.length;for(p=In(p,3);++te<Be;){var Qe=u[te];p(Qe,te,u)&&(w.push(Qe),Ee.push(te))}return Dc(u,Ee),w},Oe.rest=function XM(u,p){if("function"!=typeof u)throw new Vt(_);return Qn(u,p=p===b?p:ei(p))},Oe.reverse=fm,Oe.sampleSize=function Mw(u,p,w){return p=(w?cs(u,p,w):p===b)?1:ei(p),($n(u)?Rx:$x)(u,p)},Oe.set=function LL(u,p,w){return null==u?u:Du(u,p,w)},Oe.setWith=function BL(u,p,w,te){return te="function"==typeof te?te:b,null==u?u:Du(u,p,w,te)},Oe.shuffle=function Tw(u){return($n(u)?ob:Qh)(u)},Oe.slice=function IM(u,p,w){var te=null==u?0:u.length;return te?(w&&"number"!=typeof w&&cs(u,p,w)?(p=0,w=te):(p=null==p?0:ei(p),w=w===b?te:ei(w)),da(u,p,w)):[]},Oe.sortBy=Tl,Oe.sortedUniq=function Sl(u){return u&&u.length?Xx(u):[]},Oe.sortedUniqBy=function pm(u,p){return u&&u.length?Xx(u,In(p,2)):[]},Oe.split=function Af(u,p,w){return w&&"number"!=typeof w&&cs(u,p,w)&&(p=w=b),(w=w===b?he:w>>>0)?(u=Ui(u))&&("string"==typeof p||null!=p&&!Vu(p))&&!(p=ua(p))&&Ho(u)?bl(En(u),0,w):u.split(p,w):[]},Oe.spread=function Nw(u,p){if("function"!=typeof u)throw new Vt(_);return p=null==p?0:Fr(ei(p),0),Qn(function(w){var te=w[p],Ee=bl(w,0,p);return te&&al(Ee,te),oa(u,this,Ee)})},Oe.tail=function bw(u){var p=null==u?0:u.length;return p?da(u,1,p):[]},Oe.take=function ff(u,p,w){return u&&u.length?da(u,0,(p=w||p===b?1:ei(p))<0?0:p):[]},Oe.takeRight=function RM(u,p,w){var te=null==u?0:u.length;return te?da(u,(p=te-(p=w||p===b?1:ei(p)))<0?0:p,te):[]},Oe.takeRightWhile=function kM(u,p){return u&&u.length?gl(u,In(p,3),!1,!0):[]},Oe.takeWhile=function Fb(u,p){return u&&u.length?gl(u,In(p,3)):[]},Oe.tap=function jb(u,p){return p(u),u},Oe.throttle=function KM(u,p,w){var te=!0,Ee=!0;if("function"!=typeof u)throw new Vt(_);return vr(w)&&(te="leading"in w?!!w.leading:te,Ee="trailing"in w?!!w.trailing:Ee),Gb(u,p,{leading:te,maxWait:p,trailing:Ee})},Oe.thru=mf,Oe.toArray=Gw,Oe.toPairs=xT,Oe.toPairsIn=Tm,Oe.toPath=function Sn(u){return $n(u)?br(u,Vs):Zo(u)?[u]:Do(cm(Ui(u)))},Oe.toPlainObject=Sm,Oe.transform=function oy(u,p,w){var te=$n(u),Ee=te||Il(u)||Nd(u);if(p=In(p,4),null==w){var Be=u&&u.constructor;w=Ee?te?new Be:[]:vr(u)&&Na(Be)?$h(js(u)):{}}return(Ee?Ma:As)(u,function(Qe,ot,ut){return p(w,Qe,ot,ut)}),w},Oe.unary=function Pw(u){return Iw(u,1)},Oe.union=OM,Oe.unionBy=Cl,Oe.unionWith=pf,Oe.uniq=function NM(u){return u&&u.length?tc(u):[]},Oe.uniqBy=function yw(u,p){return u&&u.length?tc(u,In(p,2)):[]},Oe.uniqWith=function Oa(u,p){return p="function"==typeof p?p:b,u&&u.length?tc(u,b,p):[]},Oe.unset=function jL(u,p){return null==u||xd(u,p)},Oe.unzip=vw,Oe.unzipWith=_o,Oe.update=function UL(u,p,w){return null==u?u:Kx(u,p,nm(w))},Oe.updateWith=function qw(u,p,w,te){return te="function"==typeof te?te:b,null==u?u:Kx(u,p,nm(w),te)},Oe.values=Gu,Oe.valuesIn=function wT(u){return null==u?[]:zp(u,Ts(u))},Oe.without=Lb,Oe.words=Fd,Oe.wrap=function qM(u,p){return Od(nm(p),u)},Oe.xor=PM,Oe.xorBy=FM,Oe.xorWith=LM,Oe.zip=Bb,Oe.zipObject=function xw(u,p){return tM(u||[],p||[],hl)},Oe.zipObjectDeep=function Bu(u,p){return tM(u||[],p||[],Du)},Oe.zipWith=zs,Oe.entries=xT,Oe.entriesIn=Tm,Oe.extend=cT,Oe.extendWith=Cm,r1(Oe,Oe),Oe.add=c1,Oe.attempt=km,Oe.camelCase=Im,Oe.capitalize=sy,Oe.ceil=jc,Oe.clamp=function ET(u,p,w){return w===b&&(w=p,p=b),w!==b&&(w=(w=ls(w))==w?w:0),p!==b&&(p=(p=ls(p))==p?p:0),bd(ls(u),p,w)},Oe.clone=function JM(u){return aa(u,4)},Oe.cloneDeep=function Yb(u){return aa(u,5)},Oe.cloneDeepWith=function Xb(u,p){return aa(u,5,p="function"==typeof p?p:b)},Oe.cloneWith=function ZM(u,p){return aa(u,4,p="function"==typeof p?p:b)},Oe.conformsTo=function QM(u,p){return null==p||yd(u,p,co(p))},Oe.deburr=Dm,Oe.defaultTo=function Mf(u,p){return null==u||u!=u?p:u},Oe.divide=HT,Oe.endsWith=function ST(u,p,w){u=Ui(u),p=ua(p);var te=u.length,Ee=w=w===b?te:bd(ei(w),0,te);return(w-=p.length)>=0&&u.slice(w,Ee)==p},Oe.eq=Jo,Oe.escape=function bo(u){return(u=Ui(u))&&zi.test(u)?u.replace(Lo,mx):u},Oe.escapeRegExp=function CT(u){return(u=Ui(u))&&Ye.test(u)?u.replace(We,"\\$&"):u},Oe.every=function DL(u,p,w){var te=$n(u)?_u:qC;return w&&cs(u,p,w)&&(p=b),te(u,In(p,3))},Oe.find=UM,Oe.findIndex=hf,Oe.findKey=function Pd(u,p){return U_(u,In(p,3),As)},Oe.findLast=Ub,Oe.findLastIndex=fw,Oe.findLastKey=function lT(u,p){return U_(u,In(p,3),ca)},Oe.floor=GT,Oe.forEach=VM,Oe.forEachRight=zM,Oe.forIn=function dT(u,p){return null==u?u:ji(u,In(p,3),Ts)},Oe.forInRight=function uT(u,p){return null==u?u:ab(u,In(p,3),Ts)},Oe.forOwn=function hT(u,p){return u&&As(u,In(p,3))},Oe.forOwnRight=function fT(u,p){return u&&ca(u,In(p,3))},Oe.get=ny,Oe.gt=vm,Oe.gte=Lw,Oe.has=function pT(u,p){return null!=u&&rw(u,p,ss)},Oe.hasIn=iy,Oe.head=hm,Oe.identity=Is,Oe.includes=function NL(u,p,w,te){u=Ms(u)?u:Gu(u),w=w&&!te?ei(w):0;var Ee=u.length;return w<0&&(w=Fr(Ee+w,0)),zu(u)?w<=Ee&&u.indexOf(p,w)>-1:!!Ee&&Ec(u,p,w)>-1},Oe.indexOf=function wM(u,p,w){var te=null==u?0:u.length;if(!te)return-1;var Ee=null==w?0:ei(w);return Ee<0&&(Ee=Fr(te+Ee,0)),Ec(u,p,Ee)},Oe.inRange=function AT(u,p,w){return p=Lc(p),w===b?(w=p,p=0):w=Lc(w),function Lx(u,p,w){return u>=ir(p,w)&&u<Fr(p,w)}(u=ls(u),p,w)},Oe.invoke=_T,Oe.isArguments=Fc,Oe.isArray=$n,Oe.isArrayBuffer=eT,Oe.isArrayLike=Ms,Oe.isArrayLikeObject=jr,Oe.isBoolean=function tT(u){return!0===u||!1===u||Tr(u)&&Ss(u)==I},Oe.isBuffer=Il,Oe.isDate=nT,Oe.isElement=function Bw(u){return Tr(u)&&1===u.nodeType&&!Uu(u)},Oe.isEmpty=function vf(u){if(null==u)return!0;if(Ms(u)&&($n(u)||"string"==typeof u||"function"==typeof u.splice||Il(u)||Nd(u)||Fc(u)))return!u.length;var p=as(u);if(p==re||p==Ve)return!u.size;if(Td(u))return!qp(u).length;for(var w in u)if(Ci.call(u,w))return!1;return!0},Oe.isEqual=function xm(u,p){return vd(u,p)},Oe.isEqualWith=function Kb(u,p,w){var te=(w="function"==typeof w?w:b)?w(u,p):b;return te===b?vd(u,p,b,w):!!te},Oe.isError=qb,Oe.isFinite=function iT(u){return"number"==typeof u&&To(u)},Oe.isFunction=Na,Oe.isInteger=Jb,Oe.isLength=rc,Oe.isMap=jw,Oe.isMatch=function FL(u,p){return u===p||Jh(u,p,am(p))},Oe.isMatchWith=function wm(u,p,w){return w="function"==typeof w?w:b,Jh(u,p,am(p),w)},Oe.isNaN=function rT(u){return Em(u)&&u!=+u},Oe.isNative=function Uw(u){if(sw(u))throw new Yn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jx(u)},Oe.isNil=function zw(u){return null==u},Oe.isNull=function Vw(u){return null===u},Oe.isNumber=Em,Oe.isObject=vr,Oe.isObjectLike=Tr,Oe.isPlainObject=Uu,Oe.isRegExp=Vu,Oe.isSafeInteger=function xf(u){return Jb(u)&&u>=-ze&&u<=ze},Oe.isSet=Zb,Oe.isString=zu,Oe.isSymbol=Zo,Oe.isTypedArray=Nd,Oe.isUndefined=function Qb(u){return u===b},Oe.isWeakMap=function Am(u){return Tr(u)&&as(u)==wt},Oe.isWeakSet=function oT(u){return Tr(u)&&"[object WeakSet]"==Ss(u)},Oe.join=function SM(u,p){return null==u?"":K_.call(u,p)},Oe.kebabCase=MT,Oe.last=pa,Oe.lastIndexOf=function kb(u,p,w){var te=null==u?0:u.length;if(!te)return-1;var Ee=te;return w!==b&&(Ee=(Ee=ei(w))<0?Fr(te+Ee,0):ir(Ee,te-1)),p==p?function VC(at,St,xt){for(var Kt=xt+1;Kt--;)if(at[Kt]===St)return Kt;return Kt}(u,p,Ee):Dt(u,yu,Ee,!0)},Oe.lowerCase=ay,Oe.lowerFirst=Zw,Oe.lt=Hw,Oe.lte=sT,Oe.max=function _y(u){return u&&u.length?Mt(u,Is,Kp):b},Oe.maxBy=function $L(u,p){return u&&u.length?Mt(u,In(p,2),Kp):b},Oe.mean=function YL(u){return fx(u,Is)},Oe.meanBy=function XL(u,p){return fx(u,In(p,2))},Oe.min=function WT(u){return u&&u.length?Mt(u,Is,Zh):b},Oe.minBy=function l1(u,p){return u&&u.length?Mt(u,In(p,2),Zh):b},Oe.stubArray=Nm,Oe.stubFalse=a1,Oe.stubObject=function UT(){return{}},Oe.stubString=function Dl(){return""},Oe.stubTrue=function VT(){return!0},Oe.multiply=KL,Oe.nth=function Rd(u,p){return u&&u.length?Gx(u,ei(p)):b},Oe.noConflict=function FT(){return zo._===this&&(zo._=Bh),this},Oe.noop=Yu,Oe.now=ym,Oe.pad=function TT(u,p,w){u=Ui(u);var te=(p=ei(p))?wu(u):0;if(!p||te>=p)return u;var Ee=(p-te)/2;return kc(yr(Ee),w)+u+kc(Sc(Ee),w)},Oe.padEnd=function IT(u,p,w){u=Ui(u);var te=(p=ei(p))?wu(u):0;return p&&te<p?u+kc(p-te,w):u},Oe.padStart=function DT(u,p,w){u=Ui(u);var te=(p=ei(p))?wu(u):0;return p&&te<p?kc(p-te,w)+u:u},Oe.parseInt=function RT(u,p,w){return w||null==p?p=0:p&&(p=+p),HC(Ui(u).replace(Wt,""),p||0)},Oe.random=function Jw(u,p,w){if(w&&"boolean"!=typeof w&&cs(u,p,w)&&(p=w=b),w===b&&("boolean"==typeof p?(w=p,p=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&p===b?(u=0,p=1):(u=Lc(u),p===b?(p=u,u=0):p=Lc(p)),u>p){var te=u;u=p,p=te}if(w||u%1||p%1){var Ee=wx();return ir(u+Ee*(p-u+F_("1e-"+((Ee+"").length-1))),p)}return pb(u,p)},Oe.reduce=function Sw(u,p,w){var te=$n(u)?Up:Ja,Ee=arguments.length<3;return te(u,In(p,4),w,Ee,pl)},Oe.reduceRight=function Cw(u,p,w){var te=$n(u)?bu:Ja,Ee=arguments.length<3;return te(u,In(p,4),w,Ee,Px)},Oe.repeat=function Qw(u,p,w){return p=(w?cs(u,p,w):p===b)?1:ei(p),Iu(Ui(u),p)},Oe.replace=function VL(){var u=arguments,p=Ui(u[0]);return u.length<3?p:p.replace(u[1],u[2])},Oe.result=function Kw(u,p,w){var te=-1,Ee=(p=_l(p,u)).length;for(Ee||(Ee=1,u=b);++te<Ee;){var Be=null==u?b:u[Vs(p[te])];Be===b&&(te=Ee,Be=w),u=Na(Be)?Be.call(u):Be}return u},Oe.round=Pm,Oe.runInContext=at,Oe.sample=function GM(u){return($n(u)?rb:mb)(u)},Oe.size=function _m(u){if(null==u)return 0;if(Ms(u))return zu(u)?wu(u):u.length;var p=as(u);return p==re||p==Ve?u.size:qp(u).length},Oe.snakeCase=zL,Oe.some=function bm(u,p,w){var te=$n(u)?j_:gb;return w&&cs(u,p,w)&&(p=b),te(u,In(p,3))},Oe.sortedIndex=function DM(u,p){return Qp(u,p)},Oe.sortedIndexBy=function ML(u,p,w){return _b(u,p,In(w,2))},Oe.sortedIndexOf=function gw(u,p){var w=null==u?0:u.length;if(w){var te=Qp(u,p);if(te<w&&Jo(u[te],p))return te}return-1},Oe.sortedLastIndex=function _w(u,p){return Qp(u,p,!0)},Oe.sortedLastIndexBy=function ur(u,p,w){return _b(u,p,In(w,2),!0)},Oe.sortedLastIndexOf=function Pb(u,p){if(null!=u&&u.length){var te=Qp(u,p,!0)-1;if(Jo(u[te],p))return te}return-1},Oe.startCase=e1,Oe.startsWith=function HL(u,p,w){return u=Ui(u),w=null==w?0:bd(ei(w),0,u.length),p=ua(p),u.slice(w,w+p.length)==p},Oe.subtract=$T,Oe.sum=function XT(u){return u&&u.length?Ls(u,Is):0},Oe.sumBy=function by(u,p){return u&&u.length?Ls(u,In(p,2)):0},Oe.template=function GL(u,p,w){var te=Oe.templateSettings;w&&cs(u,p,w)&&(p=b),u=Ui(u),p=Cm({},p,te,Sd);var ot,ut,Ee=Cm({},p.imports,te.imports,Sd),Be=co(Ee),Qe=zp(Ee,Be),Rt=0,kt=p.interpolate||_r,Lt="__p += '",Zt=Y_((p.escape||_r).source+"|"+kt.source+"|"+(kt===ol?ki:_r).source+"|"+(p.evaluate||_r).source+"|$","g"),_n="//# sourceURL="+(Ci.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++RC+"]")+"\n";u.replace(Zt,function(Cn,hi,vi,Gs,ds,Ws){return vi||(vi=Gs),Lt+=u.slice(Rt,Ws).replace(ve,LC),hi&&(ot=!0,Lt+="' +\n__e("+hi+") +\n'"),ds&&(ut=!0,Lt+="';\n"+ds+";\n__p += '"),vi&&(Lt+="' +\n((__t = ("+vi+")) == null ? '' : __t) +\n'"),Rt=Ws+Cn.length,Cn}),Lt+="';\n";var Dn=Ci.call(p,"variable")&&p.variable;if(Dn){if(Li.test(Dn))throw new Yn("Invalid `variable` option passed into `_.template`")}else Lt="with (obj) {\n"+Lt+"\n}\n";Lt=(ut?Lt.replace(jn,""):Lt).replace(Yi,"$1").replace(ra,"$1;"),Lt="function("+(Dn||"obj")+") {\n"+(Dn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(ut?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Lt+"return __p\n}";var ri=km(function(){return Ti(Be,_n+"return "+Lt).apply(b,Qe)});if(ri.source=Lt,qb(ri))throw ri;return ri},Oe.times=function Xu(u,p){if((u=ei(u))<1||u>ze)return[];var w=he,te=ir(u,he);p=In(p),u-=he;for(var Ee=sa(te,p);++w<u;)p(w);return Ee},Oe.toFinite=Lc,Oe.toInteger=ei,Oe.toLength=ey,Oe.toLower=function Rm(u){return Ui(u).toLowerCase()},Oe.toNumber=ls,Oe.toSafeInteger=function Hu(u){return u?bd(ei(u),-ze,ze):0===u?u:0},Oe.toString=Ui,Oe.toUpper=function kT(u){return Ui(u).toUpperCase()},Oe.trim=function cy(u,p,w){if((u=Ui(u))&&(w||p===b))return G_(u);if(!u||!(p=ua(p)))return u;var te=En(u),Ee=En(p);return bl(te,xu(te,Ee),W_(te,Ee)+1).join("")},Oe.trimEnd=function ly(u,p,w){if((u=Ui(u))&&(w||p===b))return u.slice(0,yx(u)+1);if(!u||!(p=ua(p)))return u;var te=En(u);return bl(te,0,W_(te,En(p))+1).join("")},Oe.trimStart=function Wu(u,p,w){if((u=Ui(u))&&(w||p===b))return u.replace(Wt,"");if(!u||!(p=ua(p)))return u;var te=En(u);return bl(te,xu(te,En(p))).join("")},Oe.truncate=function dy(u,p){var w=30,te="...";if(vr(p)){var Ee="separator"in p?p.separator:Ee;w="length"in p?ei(p.length):w,te="omission"in p?ua(p.omission):te}var Be=(u=Ui(u)).length;if(Ho(u)){var Qe=En(u);Be=Qe.length}if(w>=Be)return u;var ot=w-wu(te);if(ot<1)return te;var ut=Qe?bl(Qe,0,ot).join(""):u.slice(0,ot);if(Ee===b)return ut+te;if(Qe&&(ot+=ut.length-ot),Vu(Ee)){if(u.slice(ot).search(Ee)){var Rt,kt=ut;for(Ee.global||(Ee=Y_(Ee.source,Ui(bi.exec(Ee))+"g")),Ee.lastIndex=0;Rt=Ee.exec(kt);)var Lt=Rt.index;ut=ut.slice(0,Lt===b?ot:Lt)}}else if(u.indexOf(ua(Ee),ot)!=ot){var Zt=ut.lastIndexOf(Ee);Zt>-1&&(ut=ut.slice(0,Zt))}return ut+te},Oe.unescape=function uy(u){return(u=Ui(u))&&Bo.test(u)?u.replace(mr,zC):u},Oe.uniqueId=function zT(u){var p=++nr;return Ui(u)+p},Oe.upperCase=Sf,Oe.upperFirst=$u,Oe.each=VM,Oe.eachRight=zM,Oe.first=hm,r1(Oe,function(){var u={};return As(Oe,function(p,w){Ci.call(Oe.prototype,w)||(u[w]=p)}),u}(),{chain:!1}),Oe.VERSION="4.17.21",Ma(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Oe[u].placeholder=Oe}),Ma(["drop","take"],function(u,p){xi.prototype[u]=function(w){w=w===b?1:Fr(ei(w),0);var te=this.__filtered__&&!p?new xi(this):this.clone();return te.__filtered__?te.__takeCount__=ir(w,te.__takeCount__):te.__views__.push({size:ir(w,he),type:u+(te.__dir__<0?"Right":"")}),te},xi.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),Ma(["filter","map","takeWhile"],function(u,p){var w=p+1,te=1==w||3==w;xi.prototype[u]=function(Ee){var Be=this.clone();return Be.__iteratees__.push({iteratee:In(Ee,3),type:w}),Be.__filtered__=Be.__filtered__||te,Be}}),Ma(["head","last"],function(u,p){var w="take"+(p?"Right":"");xi.prototype[u]=function(){return this[w](1).value()[0]}}),Ma(["initial","tail"],function(u,p){var w="drop"+(p?"":"Right");xi.prototype[u]=function(){return this.__filtered__?new xi(this):this[w](1)}}),xi.prototype.compact=function(){return this.filter(Is)},xi.prototype.find=function(u){return this.filter(u).head()},xi.prototype.findLast=function(u){return this.reverse().find(u)},xi.prototype.invokeMap=Qn(function(u,p){return"function"==typeof u?new xi(this):this.map(function(w){return qh(w,u,p)})}),xi.prototype.reject=function(u){return this.filter(yf(In(u)))},xi.prototype.slice=function(u,p){u=ei(u);var w=this;return w.__filtered__&&(u>0||p<0)?new xi(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),p!==b&&(w=(p=ei(p))<0?w.dropRight(-p):w.take(p-u)),w)},xi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},xi.prototype.toArray=function(){return this.take(he)},As(xi.prototype,function(u,p){var w=/^(?:filter|find|map|reject)|While$/.test(p),te=/^(?:head|last)$/.test(p),Ee=Oe[te?"take"+("last"==p?"Right":""):p],Be=te||/^find/.test(p);Ee&&(Oe.prototype[p]=function(){var Qe=this.__wrapped__,ot=te?[1]:arguments,ut=Qe instanceof xi,Rt=ot[0],kt=ut||$n(Qe),Lt=function(hi){var vi=Ee.apply(Oe,al([hi],ot));return te&&Zt?vi[0]:vi};kt&&w&&"function"==typeof Rt&&1!=Rt.length&&(ut=kt=!1);var Zt=this.__chain__,Dn=Be&&!Zt,ri=ut&&!this.__actions__.length;if(!Be&&kt){Qe=ri?Qe:new xi(this);var Cn=u.apply(Qe,ot);return Cn.__actions__.push({func:mf,args:[Lt],thisArg:b}),new Da(Cn,Zt)}return Dn&&ri?u.apply(this,ot):(Cn=this.thru(Lt),Dn?te?Cn.value()[0]:Cn.value():Cn)})}),Ma(["pop","push","shift","sort","splice","unshift"],function(u){var p=An[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",te=/^(?:pop|shift)$/.test(u);Oe.prototype[u]=function(){var Ee=arguments;if(te&&!this.__chain__){var Be=this.value();return p.apply($n(Be)?Be:[],Ee)}return this[w](function(Qe){return p.apply($n(Qe)?Qe:[],Ee)})}}),As(xi.prototype,function(u,p){var w=Oe[p];if(w){var te=w.name+"";Ci.call(Wh,te)||(Wh[te]=[]),Wh[te].push({name:p,func:w})}}),Wh[Rc(b,2).name]=[{name:"wrapper",func:b}],xi.prototype.clone=function pd(){var u=new xi(this.__wrapped__);return u.__actions__=Do(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Do(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Do(this.__views__),u},xi.prototype.reverse=function Ex(){if(this.__filtered__){var u=new xi(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},xi.prototype.value=function Lr(){var u=this.__wrapped__.value(),p=this.__dir__,w=$n(u),te=p<0,Ee=w?u.length:0,Be=function iw(u,p,w){for(var te=-1,Ee=w.length;++te<Ee;){var Be=w[te],Qe=Be.size;switch(Be.type){case"drop":u+=Qe;break;case"dropRight":p-=Qe;break;case"take":p=ir(p,u+Qe);break;case"takeRight":u=Fr(u,p-Qe)}}return{start:u,end:p}}(0,Ee,this.__views__),Qe=Be.start,ot=Be.end,ut=ot-Qe,Rt=te?ot:Qe-1,kt=this.__iteratees__,Lt=kt.length,Zt=0,_n=ir(ut,this.__takeCount__);if(!w||!te&&Ee==ut&&_n==ut)return em(u,this.__actions__);var Dn=[];e:for(;ut--&&Zt<_n;){for(var ri=-1,Cn=u[Rt+=p];++ri<Lt;){var hi=kt[ri],Gs=hi.type,ds=(0,hi.iteratee)(Cn);if(2==Gs)Cn=ds;else if(!ds){if(1==Gs)continue e;break e}}Dn[Zt++]=Cn}return Dn},Oe.prototype.at=Ml,Oe.prototype.chain=function gf(){return Pc(this)},Oe.prototype.commit=function TL(){return new Da(this.value(),this.__chain__)},Oe.prototype.next=function mm(){this.__values__===b&&(this.__values__=Gw(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Oe.prototype.plant=function BM(u){for(var p,w=this;w instanceof tb;){var te=Tb(w);te.__index__=0,te.__values__=b,p?Ee.__wrapped__=te:p=te;var Ee=te;w=w.__wrapped__}return Ee.__wrapped__=u,p},Oe.prototype.reverse=function Ew(){var u=this.__wrapped__;if(u instanceof xi){var p=u;return this.__actions__.length&&(p=new xi(this)),(p=p.reverse()).__actions__.push({func:mf,args:[fm],thisArg:b}),new Da(p,this.__chain__)}return this.thru(fm)},Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=function IL(){return em(this.__wrapped__,this.__actions__)},Oe.prototype.first=Oe.prototype.head,Ia&&(Oe.prototype[Ia]=function ww(){return this}),Oe}();zo._=Zn,(C=function(){return Zn}.call(q,g,q,ee))!==b&&(ee.exports=C)}.call(this)},7659:(ee,q,g)=>{var C=g(1811);function D(S,k){if("function"!=typeof S||null!=k&&"function"!=typeof k)throw new TypeError("Expected a function");var _=function(){var v=arguments,T=k?k.apply(this,v):v[0],j=_.cache;if(j.has(T))return j.get(T);var O=S.apply(this,v);return _.cache=j.set(T,O)||j,O};return _.cache=new(D.Cache||C),_}D.Cache=C,ee.exports=D},2692:(ee,q,g)=>{var C=g(3400),b=g(6443),D=g(6300),S=g(8916);ee.exports=function k(_){return D(_)?C(S(_)):b(_)}},7184:(ee,q,g)=>{var C=g(1883),b=g(252),D=g(8951),S=g(3817),k=D(function(_,v){if(null==_)return[];var T=v.length;return T>1&&S(_,v[0],v[1])?v=[]:T>2&&S(v[0],v[1],v[2])&&(v=[v[0]]),b(_,C(v,1),[])});ee.exports=k},1315:ee=>{ee.exports=function q(){return[]}},5706:ee=>{ee.exports=function q(){return!1}},2674:(ee,q,g)=>{var C=g(7002);ee.exports=function b(D){return null==D?"":C(D)}},5249:(ee,q,g)=>{var C=g(549),b=C.ARRAY_BUFFER_SUPPORT,D=C.SYMBOL_SUPPORT;ee.exports=function(k,_){var v,T,j,O,B;if(!k)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(k)||b&&ArrayBuffer.isView(k)||"string"==typeof k||"[object Arguments]"===k.toString())for(j=0,O=k.length;j<O;j++)_(k[j],j);else if("function"!=typeof k.forEach)if(D&&Symbol.iterator in k&&"function"!=typeof k.next&&(k=k[Symbol.iterator]()),"function"!=typeof k.next)for(T in k)k.hasOwnProperty(T)&&_(k[T],T);else for(v=k,j=0;!0!==(B=v.next()).done;)_(B.value,j),j++;else k.forEach(_)}},2508:ee=>{function q(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=function(){return this}),q.of=function(){var g=arguments,C=g.length,b=0;return new q(function(){return b>=C?{done:!0}:{done:!1,value:g[b++]}})},q.empty=function(){return new q(function(){return{done:!0}})},q.fromSequence=function(g){var C=0,b=g.length;return new q(function(){return C>=b?{done:!0}:{done:!1,value:g[C++]}})},q.is=function(g){return g instanceof q||"object"==typeof g&&null!==g&&"function"==typeof g.next},ee.exports=q},549:(ee,q)=>{q.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",q.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(ee,q,g)=>{var C=g(2508),b=g(5249);function D(){this.clear()}D.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},D.prototype.enqueue=function(S){return this.items.push(S),++this.size},D.prototype.dequeue=function(){if(this.size){var S=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,S}},D.prototype.peek=function(){if(this.size)return this.items[this.offset]},D.prototype.forEach=function(S,k){k=arguments.length>1?k:this;for(var _=this.offset,v=0,T=this.items.length;_<T;_++,v++)S.call(k,this.items[_],v,this)},D.prototype.toArray=function(){return this.items.slice(this.offset)},D.prototype.values=function(){var S=this.items,k=this.offset;return new C(function(){if(k>=S.length)return{done:!0};var _=S[k];return k++,{value:_,done:!1}})},D.prototype.entries=function(){var S=this.items,k=this.offset,_=0;return new C(function(){if(k>=S.length)return{done:!0};var v=S[k];return k++,{value:[_++,v],done:!1}})},typeof Symbol<"u"&&(D.prototype[Symbol.iterator]=D.prototype.values),D.prototype.toString=function(){return this.toArray().join(",")},D.prototype.toJSON=function(){return this.toArray()},D.prototype.inspect=function(){var S=this.toArray();return Object.defineProperty(S,"constructor",{value:D,enumerable:!1}),S},typeof Symbol<"u"&&(D.prototype[Symbol.for("nodejs.util.inspect.custom")]=D.prototype.inspect),D.from=function(S){var k=new D;return b(S,function(_){k.enqueue(_)}),k},D.of=function(){return D.from(arguments)},ee.exports=D},5020:ee=>{ee.exports=function q(g,C,b){function D(_,v){if(!C[_]){if(!g[_]){if(S)return S(_,!0);throw new Error("Cannot find module '"+_+"'")}v=C[_]={exports:{}},g[_][0].call(v.exports,function(j){return D(g[_][1][j]||j)},v,v.exports,q,g,C,b)}return C[_].exports}for(var S=void 0,k=0;k<b.length;k++)D(b[k]);return D}({1:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){"use strict";var B=q("crypto");function Q(W,z){var x;return void 0===(x="passthrough"!==(z=ae(W,z)).algorithm?B.createHash(z.algorithm):new Z).write&&(x.write=x.update,x.end=x.update),J(z,x).dispatch(W),x.update||x.end(""),x.digest?x.digest("buffer"===z.encoding?void 0:z.encoding):(W=x.read(),"buffer"!==z.encoding?W.toString(z.encoding):W)}(C=g.exports=Q).sha1=function(W){return Q(W)},C.keys=function(W){return Q(W,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},C.MD5=function(W){return Q(W,{algorithm:"md5",encoding:"hex"})},C.keysMD5=function(W){return Q(W,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var A=B.getHashes?B.getHashes().slice():["sha1","md5"],L=(A.push("passthrough"),["buffer","hex","binary","base64"]);function ae(W,z){var x={};if(x.algorithm=(z=z||{}).algorithm||"sha1",x.encoding=z.encoding||"hex",x.excludeValues=!!z.excludeValues,x.algorithm=x.algorithm.toLowerCase(),x.encoding=x.encoding.toLowerCase(),x.ignoreUnknown=!0===z.ignoreUnknown,x.respectType=!1!==z.respectType,x.respectFunctionNames=!1!==z.respectFunctionNames,x.respectFunctionProperties=!1!==z.respectFunctionProperties,x.unorderedArrays=!0===z.unorderedArrays,x.unorderedSets=!1!==z.unorderedSets,x.unorderedObjects=!1!==z.unorderedObjects,x.replacer=z.replacer||void 0,x.excludeKeys=z.excludeKeys||void 0,void 0===W)throw new Error("Object argument required.");for(var N=0;N<A.length;++N)A[N].toLowerCase()===x.algorithm.toLowerCase()&&(x.algorithm=A[N]);if(-1===A.indexOf(x.algorithm))throw new Error('Algorithm "'+x.algorithm+'"  not supported. supported values: '+A.join(", "));if(-1===L.indexOf(x.encoding)&&"passthrough"!==x.algorithm)throw new Error('Encoding "'+x.encoding+'"  not supported. supported values: '+L.join(", "));return x}function X(W){if("function"==typeof W)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(W))}function J(W,z,x){function N(R){return z.update?z.update(R,"utf8"):z.write(R,"utf8")}return x=x||[],{dispatch:function(R){return this["_"+(null===(R=W.replacer?W.replacer(R):R)?"null":typeof R)](R)},_object:function(R){var le,G=Object.prototype.toString.call(R),Te=/\[object (.*)\]/i.exec(G);if(Te=(Te=Te?Te[1]:"unknown:["+G+"]").toLowerCase(),0<=(G=x.indexOf(R)))return this.dispatch("[CIRCULAR:"+G+"]");if(x.push(R),void 0!==S&&S.isBuffer&&S.isBuffer(R))return N("buffer:"),N(R);if("object"===Te||"function"===Te||"asyncfunction"===Te)return G=Object.keys(R),W.unorderedObjects&&(G=G.sort()),!1===W.respectType||X(R)||G.splice(0,0,"prototype","__proto__","constructor"),W.excludeKeys&&(G=G.filter(function(ce){return!W.excludeKeys(ce)})),N("object:"+G.length+":"),le=this,G.forEach(function(ce){le.dispatch(ce),N(":"),W.excludeValues||le.dispatch(R[ce]),N(",")});if(!this["_"+Te]){if(W.ignoreUnknown)return N("["+Te+"]");throw new Error('Unknown object type "'+Te+'"')}this["_"+Te](R)},_array:function(R,ce){ce=void 0!==ce?ce:!1!==W.unorderedArrays;var G=this;if(N("array:"+R.length+":"),!ce||R.length<=1)return R.forEach(function(be){return G.dispatch(be)});var Te=[];return ce=R.map(function(be){var ke=new Z,Ne=x.slice();return J(W,ke,Ne).dispatch(be),Te=Te.concat(Ne.slice(x.length)),ke.read().toString()}),x=x.concat(Te),ce.sort(),this._array(ce,!1)},_date:function(R){return N("date:"+R.toJSON())},_symbol:function(R){return N("symbol:"+R.toString())},_error:function(R){return N("error:"+R.toString())},_boolean:function(R){return N("bool:"+R.toString())},_string:function(R){N("string:"+R.length+":"),N(R.toString())},_function:function(R){N("fn:"),X(R)?this.dispatch("[native]"):this.dispatch(R.toString()),!1!==W.respectFunctionNames&&this.dispatch("function-name:"+String(R.name)),W.respectFunctionProperties&&this._object(R)},_number:function(R){return N("number:"+R.toString())},_xml:function(R){return N("xml:"+R.toString())},_null:function(){return N("Null")},_undefined:function(){return N("Undefined")},_regexp:function(R){return N("regex:"+R.toString())},_uint8array:function(R){return N("uint8array:"),this.dispatch(Array.prototype.slice.call(R))},_uint8clampedarray:function(R){return N("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(R))},_int8array:function(R){return N("int8array:"),this.dispatch(Array.prototype.slice.call(R))},_uint16array:function(R){return N("uint16array:"),this.dispatch(Array.prototype.slice.call(R))},_int16array:function(R){return N("int16array:"),this.dispatch(Array.prototype.slice.call(R))},_uint32array:function(R){return N("uint32array:"),this.dispatch(Array.prototype.slice.call(R))},_int32array:function(R){return N("int32array:"),this.dispatch(Array.prototype.slice.call(R))},_float32array:function(R){return N("float32array:"),this.dispatch(Array.prototype.slice.call(R))},_float64array:function(R){return N("float64array:"),this.dispatch(Array.prototype.slice.call(R))},_arraybuffer:function(R){return N("arraybuffer:"),this.dispatch(new Uint8Array(R))},_url:function(R){return N("url:"+R.toString())},_map:function(R){return N("map:"),R=Array.from(R),this._array(R,!1!==W.unorderedSets)},_set:function(R){return N("set:"),R=Array.from(R),this._array(R,!1!==W.unorderedSets)},_file:function(R){return N("file:"),this.dispatch([R.name,R.size,R.type,R.lastModfied])},_blob:function(){if(W.ignoreUnknown)return N("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return N("domwindow")},_bigint:function(R){return N("bigint:"+R.toString())},_process:function(){return N("process")},_timer:function(){return N("timer")},_pipe:function(){return N("pipe")},_tcp:function(){return N("tcp")},_udp:function(){return N("udp")},_tty:function(){return N("tty")},_statwatcher:function(){return N("statwatcher")},_securecontext:function(){return N("securecontext")},_connection:function(){return N("connection")},_zlib:function(){return N("zlib")},_context:function(){return N("context")},_nodescript:function(){return N("nodescript")},_httpparser:function(){return N("httpparser")},_dataview:function(){return N("dataview")},_signal:function(){return N("signal")},_fsevent:function(){return N("fsevent")},_tlswrap:function(){return N("tlswrap")}}}function Z(){return{buf:"",write:function(W){this.buf+=W},end:function(W){this.buf+=W},read:function(){return this.buf}}}C.writeToStream=function(W,z,x){return void 0===x&&(x=z,z={}),J(z=ae(W,z),x).dispatch(W)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){!function(B){"use strict";var Q=typeof Uint8Array<"u"?Uint8Array:Array,A="+".charCodeAt(0),L="/".charCodeAt(0),ae="0".charCodeAt(0),X="a".charCodeAt(0),J="A".charCodeAt(0),Z="-".charCodeAt(0),W="_".charCodeAt(0);function z(x){return(x=x.charCodeAt(0))===A||x===Z?62:x===L||x===W?63:x<ae?-1:x<ae+10?x-ae+26+26:x<J+26?x-J:x<X+26?x-X+26:void 0}B.toByteArray=function(x){var N,R;if(0<x.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var le="="===x.charAt((le=x.length)-2)?2:"="===x.charAt(le-1)?1:0,G=new Q(3*x.length/4-le),Te=0<le?x.length-4:x.length,ce=0;function be(ke){G[ce++]=ke}for(N=0;N<Te;N+=4,0)be((16711680&(R=z(x.charAt(N))<<18|z(x.charAt(N+1))<<12|z(x.charAt(N+2))<<6|z(x.charAt(N+3))))>>16),be((65280&R)>>8),be(255&R);return 2==le?be(255&(R=z(x.charAt(N))<<2|z(x.charAt(N+1))>>4)):1==le&&(be((R=z(x.charAt(N))<<10|z(x.charAt(N+1))<<4|z(x.charAt(N+2))>>2)>>8&255),be(255&R)),G},B.fromByteArray=function(x){var N,R,le,G,Te=x.length%3,ce="";function be(ke){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(ke)}for(N=0,le=x.length-Te;N<le;N+=3)ce+=be((G=R=(x[N]<<16)+(x[N+1]<<8)+x[N+2])>>18&63)+be(G>>12&63)+be(G>>6&63)+be(63&G);switch(Te){case 1:ce=(ce+=be((R=x[x.length-1])>>2))+be(R<<4&63)+"==";break;case 2:ce=(ce=(ce+=be((R=(x[x.length-2]<<8)+x[x.length-1])>>10))+be(R>>4&63))+be(R<<2&63)+"="}return ce}}(void 0===C?this.base64js={}:C)}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(q,g,C){(function(b,D,A,k,_,v,T,j,O){var B=q("base64-js"),Q=q("ieee754");function A(me,F,I){if(!(this instanceof A))return new A(me,F,I);var se,ie,He,Je,fe=typeof me;if("base64"===F&&"string"==fe)for(me=(Je=me).trim?Je.trim():Je.replace(/^\s+|\s+$/g,"");me.length%4!=0;)me+="=";if("number"==fe)se=Ze(me);else if("string"==fe)se=A.byteLength(me,F);else{if("object"!=fe)throw new Error("First argument needs to be a number, array or string.");se=Ze(me.length)}if(A._useTypedArrays?ie=A._augment(new Uint8Array(se)):((ie=this).length=se,ie._isBuffer=!0),A._useTypedArrays&&"number"==typeof me.byteLength)ie._set(me);else if(Ke(Je=me)||A.isBuffer(Je)||Je&&"object"==typeof Je&&"number"==typeof Je.length)for(He=0;He<se;He++)ie[He]=A.isBuffer(me)?me.readUInt8(He):me[He];else if("string"==fe)ie.write(me,0,F);else if("number"==fe&&!A._useTypedArrays&&!I)for(He=0;He<se;He++)ie[He]=0;return ie}function J(me,F,I,He){var ie;if(He||(qe("boolean"==typeof I,"missing or invalid endian"),qe(null!=F,"missing offset"),qe(F+1<me.length,"Trying to read beyond buffer length")),!((He=me.length)<=F))return I?(ie=me[F],F+1<He&&(ie|=me[F+1]<<8)):(ie=me[F]<<8,F+1<He&&(ie|=me[F+1])),ie}function Z(me,F,I,He){var ie;if(He||(qe("boolean"==typeof I,"missing or invalid endian"),qe(null!=F,"missing offset"),qe(F+3<me.length,"Trying to read beyond buffer length")),!((He=me.length)<=F))return I?(F+2<He&&(ie=me[F+2]<<16),F+1<He&&(ie|=me[F+1]<<8),ie|=me[F],F+3<He&&(ie+=me[F+3]<<24>>>0)):(F+1<He&&(ie=me[F+1]<<16),F+2<He&&(ie|=me[F+2]<<8),F+3<He&&(ie|=me[F+3]),ie+=me[F]<<24>>>0),ie}function W(me,F,I,se){if(se||(qe("boolean"==typeof I,"missing or invalid endian"),qe(null!=F,"missing offset"),qe(F+1<me.length,"Trying to read beyond buffer length")),!(me.length<=F))return 32768&(se=J(me,F,I,!0))?-1*(65535-se+1):se}function z(me,F,I,se){if(se||(qe("boolean"==typeof I,"missing or invalid endian"),qe(null!=F,"missing offset"),qe(F+3<me.length,"Trying to read beyond buffer length")),!(me.length<=F))return 2147483648&(se=Z(me,F,I,!0))?-1*(4294967295-se+1):se}function x(me,F,I,se){return se||(qe("boolean"==typeof I,"missing or invalid endian"),qe(F+3<me.length,"Trying to read beyond buffer length")),Q.read(me,F,I,23,4)}function N(me,F,I,se){return se||(qe("boolean"==typeof I,"missing or invalid endian"),qe(F+7<me.length,"Trying to read beyond buffer length")),Q.read(me,F,I,52,8)}function R(me,F,I,se,ie){if(ie||(qe(null!=F,"missing value"),qe("boolean"==typeof se,"missing or invalid endian"),qe(null!=I,"missing offset"),qe(I+1<me.length,"trying to write beyond buffer length"),Se(F,65535)),!((ie=me.length)<=I))for(var He=0,Je=Math.min(ie-I,2);He<Je;He++)me[I+He]=(F&255<<8*(se?He:1-He))>>>8*(se?He:1-He)}function le(me,F,I,se,ie){if(ie||(qe(null!=F,"missing value"),qe("boolean"==typeof se,"missing or invalid endian"),qe(null!=I,"missing offset"),qe(I+3<me.length,"trying to write beyond buffer length"),Se(F,4294967295)),!((ie=me.length)<=I))for(var He=0,Je=Math.min(ie-I,4);He<Je;He++)me[I+He]=F>>>8*(se?He:3-He)&255}function G(me,F,I,se,ie){ie||(qe(null!=F,"missing value"),qe("boolean"==typeof se,"missing or invalid endian"),qe(null!=I,"missing offset"),qe(I+1<me.length,"Trying to write beyond buffer length"),tt(F,32767,-32768)),me.length<=I||R(me,0<=F?F:65535+F+1,I,se,ie)}function Te(me,F,I,se,ie){ie||(qe(null!=F,"missing value"),qe("boolean"==typeof se,"missing or invalid endian"),qe(null!=I,"missing offset"),qe(I+3<me.length,"Trying to write beyond buffer length"),tt(F,2147483647,-2147483648)),me.length<=I||le(me,0<=F?F:4294967295+F+1,I,se,ie)}function ce(me,F,I,se,ie){ie||(qe(null!=F,"missing value"),qe("boolean"==typeof se,"missing or invalid endian"),qe(null!=I,"missing offset"),qe(I+3<me.length,"Trying to write beyond buffer length"),ft(F,34028234663852886e22,-34028234663852886e22)),me.length<=I||Q.write(me,F,I,se,23,4)}function be(me,F,I,se,ie){ie||(qe(null!=F,"missing value"),qe("boolean"==typeof se,"missing or invalid endian"),qe(null!=I,"missing offset"),qe(I+7<me.length,"Trying to write beyond buffer length"),ft(F,17976931348623157e292,-17976931348623157e292)),me.length<=I||Q.write(me,F,I,se,52,8)}C.Buffer=A,C.SlowBuffer=A,C.INSPECT_MAX_BYTES=50,A.poolSize=8192,A._useTypedArrays=function(){try{var me=new ArrayBuffer(0),F=new Uint8Array(me);return F.foo=function(){return 42},42===F.foo()&&"function"==typeof F.subarray}catch{return!1}}(),A.isEncoding=function(me){switch(String(me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.isBuffer=function(me){return!(null==me||!me._isBuffer)},A.byteLength=function(me,F){var I;switch(me+="",F||"utf8"){case"hex":I=me.length/2;break;case"utf8":case"utf-8":I=ze(me).length;break;case"ascii":case"binary":case"raw":I=me.length;break;case"base64":I=Ce(me).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":I=2*me.length;break;default:throw new Error("Unknown encoding")}return I},A.concat=function(me,F){if(qe(Ke(me),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===me.length)return new A(0);if(1===me.length)return me[0];if("number"!=typeof F)for(ie=F=0;ie<me.length;ie++)F+=me[ie].length;for(var I=new A(F),se=0,ie=0;ie<me.length;ie++){var He=me[ie];He.copy(I,se),se+=He.length}return I},A.prototype.write=function(me,F,I,se){isFinite(F)?isFinite(I)||(se=I,I=void 0):(re=se,se=F,F=I,I=re),F=Number(F)||0;var ie,He,Je,fe,re=this.length-F;switch((!I||re<(I=Number(I)))&&(I=re),se=String(se||"utf8").toLowerCase()){case"hex":ie=function($,P,U,pe){U=Number(U)||0;var $e=$.length-U;(!pe||$e<(pe=Number(pe)))&&(pe=$e),qe(($e=P.length)%2==0,"Invalid hex string"),$e/2<pe&&(pe=$e/2);for(var ye=0;ye<pe;ye++){var Ve=parseInt(P.substr(2*ye,2),16);qe(!isNaN(Ve),"Invalid hex string"),$[U+ye]=Ve}return A._charsWritten=2*ye,ye}(this,me,F,I);break;case"utf8":case"utf-8":He=this,Je=F,fe=I,ie=A._charsWritten=je(ze(me),He,Je,fe);break;case"ascii":case"binary":ie=function L(me,F,I,se){return A._charsWritten=je(function(ie){for(var He=[],Je=0;Je<ie.length;Je++)He.push(255&ie.charCodeAt(Je));return He}(F),me,I,se)}(this,me,F,I);break;case"base64":He=this,Je=F,fe=I,ie=A._charsWritten=je(Ce(me),He,Je,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function ae(me,F,I,se){return A._charsWritten=je(function(ie){for(var He,Je,fe=[],re=0;re<ie.length;re++)He=(Je=ie.charCodeAt(re))>>8,fe.push(Je%=256),fe.push(He);return fe}(F),me,I,se)}(this,me,F,I);break;default:throw new Error("Unknown encoding")}return ie},A.prototype.toString=function(me,F,I){var se,ie,He,Je,fe=this;if(me=String(me||"utf8").toLowerCase(),F=Number(F)||0,(I=void 0!==I?Number(I):fe.length)===F)return"";switch(me){case"hex":se=function(re,$,P){var U=re.length;(!$||$<0)&&($=0),(!P||P<0||U<P)&&(P=U);for(var pe="",$e=$;$e<P;$e++)pe+=Me(re[$e]);return pe}(fe,F,I);break;case"utf8":case"utf-8":se=function(re,$,P){var U="",pe="";P=Math.min(re.length,P);for(var $e=$;$e<P;$e++)re[$e]<=127?(U+=he(pe)+String.fromCharCode(re[$e]),pe=""):pe+="%"+re[$e].toString(16);return U+he(pe)}(fe,F,I);break;case"ascii":case"binary":se=function X(me,F,I){var se="";I=Math.min(me.length,I);for(var ie=F;ie<I;ie++)se+=String.fromCharCode(me[ie]);return se}(fe,F,I);break;case"base64":ie=fe,Je=I,se=0===(He=F)&&Je===ie.length?B.fromByteArray(ie):B.fromByteArray(ie.slice(He,Je));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":se=function(re,$,P){for(var U=re.slice($,P),pe="",$e=0;$e<U.length;$e+=2)pe+=String.fromCharCode(U[$e]+256*U[$e+1]);return pe}(fe,F,I);break;default:throw new Error("Unknown encoding")}return se},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},A.prototype.copy=function(me,F,I,se){if(F=F||0,(se=se||0===se?se:this.length)!==(I=I||0)&&0!==me.length&&0!==this.length){qe(I<=se,"sourceEnd < sourceStart"),qe(0<=F&&F<me.length,"targetStart out of bounds"),qe(0<=I&&I<this.length,"sourceStart out of bounds"),qe(0<=se&&se<=this.length,"sourceEnd out of bounds"),se>this.length&&(se=this.length);var ie=(se=me.length-F<se-I?me.length-F+I:se)-I;if(ie<100||!A._useTypedArrays)for(var He=0;He<ie;He++)me[He+F]=this[He+I];else me._set(this.subarray(I,I+ie),F)}},A.prototype.slice=function(me,F){var I=this.length;if(me=Ne(me,I,0),F=Ne(F,I,I),A._useTypedArrays)return A._augment(this.subarray(me,F));for(var se=F-me,ie=new A(se,void 0,!0),He=0;He<se;He++)ie[He]=this[He+me];return ie},A.prototype.get=function(me){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(me)},A.prototype.set=function(me,F){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(me,F)},A.prototype.readUInt8=function(me,F){if(F||(qe(null!=me,"missing offset"),qe(me<this.length,"Trying to read beyond buffer length")),!(me>=this.length))return this[me]},A.prototype.readUInt16LE=function(me,F){return J(this,me,!0,F)},A.prototype.readUInt16BE=function(me,F){return J(this,me,!1,F)},A.prototype.readUInt32LE=function(me,F){return Z(this,me,!0,F)},A.prototype.readUInt32BE=function(me,F){return Z(this,me,!1,F)},A.prototype.readInt8=function(me,F){if(F||(qe(null!=me,"missing offset"),qe(me<this.length,"Trying to read beyond buffer length")),!(me>=this.length))return 128&this[me]?-1*(255-this[me]+1):this[me]},A.prototype.readInt16LE=function(me,F){return W(this,me,!0,F)},A.prototype.readInt16BE=function(me,F){return W(this,me,!1,F)},A.prototype.readInt32LE=function(me,F){return z(this,me,!0,F)},A.prototype.readInt32BE=function(me,F){return z(this,me,!1,F)},A.prototype.readFloatLE=function(me,F){return x(this,me,!0,F)},A.prototype.readFloatBE=function(me,F){return x(this,me,!1,F)},A.prototype.readDoubleLE=function(me,F){return N(this,me,!0,F)},A.prototype.readDoubleBE=function(me,F){return N(this,me,!1,F)},A.prototype.writeUInt8=function(me,F,I){I||(qe(null!=me,"missing value"),qe(null!=F,"missing offset"),qe(F<this.length,"trying to write beyond buffer length"),Se(me,255)),F>=this.length||(this[F]=me)},A.prototype.writeUInt16LE=function(me,F,I){R(this,me,F,!0,I)},A.prototype.writeUInt16BE=function(me,F,I){R(this,me,F,!1,I)},A.prototype.writeUInt32LE=function(me,F,I){le(this,me,F,!0,I)},A.prototype.writeUInt32BE=function(me,F,I){le(this,me,F,!1,I)},A.prototype.writeInt8=function(me,F,I){I||(qe(null!=me,"missing value"),qe(null!=F,"missing offset"),qe(F<this.length,"Trying to write beyond buffer length"),tt(me,127,-128)),F>=this.length||this.writeUInt8(0<=me?me:255+me+1,F,I)},A.prototype.writeInt16LE=function(me,F,I){G(this,me,F,!0,I)},A.prototype.writeInt16BE=function(me,F,I){G(this,me,F,!1,I)},A.prototype.writeInt32LE=function(me,F,I){Te(this,me,F,!0,I)},A.prototype.writeInt32BE=function(me,F,I){Te(this,me,F,!1,I)},A.prototype.writeFloatLE=function(me,F,I){ce(this,me,F,!0,I)},A.prototype.writeFloatBE=function(me,F,I){ce(this,me,F,!1,I)},A.prototype.writeDoubleLE=function(me,F,I){be(this,me,F,!0,I)},A.prototype.writeDoubleBE=function(me,F,I){be(this,me,F,!1,I)},A.prototype.fill=function(me,F,I){if(F=F||0,I=I||this.length,qe("number"==typeof(me="string"==typeof(me=me||0)?me.charCodeAt(0):me)&&!isNaN(me),"value is not a number"),qe(F<=I,"end < start"),I!==F&&0!==this.length){qe(0<=F&&F<this.length,"start out of bounds"),qe(0<=I&&I<=this.length,"end out of bounds");for(var se=F;se<I;se++)this[se]=me}},A.prototype.inspect=function(){for(var me=[],F=this.length,I=0;I<F;I++)if(me[I]=Me(this[I]),I===C.INSPECT_MAX_BYTES){me[I+1]="...";break}return"<Buffer "+me.join(" ")+">"},A.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(A._useTypedArrays)return new A(this).buffer;for(var me=new Uint8Array(this.length),F=0,I=me.length;F<I;F+=1)me[F]=this[F];return me.buffer};var ke=A.prototype;function Ne(me,F,I){return"number"!=typeof me?I:F<=(me=~~me)?F:0<=me||0<=(me+=F)?me:0}function Ze(me){return(me=~~Math.ceil(+me))<0?0:me}function Ke(me){return(Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)})(me)}function Me(me){return me<16?"0"+me.toString(16):me.toString(16)}function ze(me){for(var F=[],I=0;I<me.length;I++){var se=me.charCodeAt(I);if(se<=127)F.push(me.charCodeAt(I));else for(var ie=I,He=(55296<=se&&se<=57343&&I++,encodeURIComponent(me.slice(ie,I+1)).substr(1).split("%")),Je=0;Je<He.length;Je++)F.push(parseInt(He[Je],16))}return F}function Ce(me){return B.toByteArray(me)}function je(me,F,I,se){for(var ie=0;ie<se&&!(ie+I>=F.length||ie>=me.length);ie++)F[ie+I]=me[ie];return ie}function he(me){try{return decodeURIComponent(me)}catch{return String.fromCharCode(65533)}}function Se(me,F){qe("number"==typeof me,"cannot write a non-number as a number"),qe(0<=me,"specified a negative value for writing an unsigned value"),qe(me<=F,"value is larger than maximum value for type"),qe(Math.floor(me)===me,"value has a fractional component")}function tt(me,F,I){qe("number"==typeof me,"cannot write a non-number as a number"),qe(me<=F,"value larger than maximum allowed value"),qe(I<=me,"value smaller than minimum allowed value"),qe(Math.floor(me)===me,"value has a fractional component")}function ft(me,F,I){qe("number"==typeof me,"cannot write a non-number as a number"),qe(me<=F,"value larger than maximum allowed value"),qe(I<=me,"value smaller than minimum allowed value")}function qe(me,F){if(!me)throw new Error(F||"Failed assertion")}A._augment=function(me){return me._isBuffer=!0,me._get=me.get,me._set=me.set,me.get=ke.get,me.set=ke.set,me.write=ke.write,me.toString=ke.toString,me.toLocaleString=ke.toString,me.toJSON=ke.toJSON,me.copy=ke.copy,me.slice=ke.slice,me.readUInt8=ke.readUInt8,me.readUInt16LE=ke.readUInt16LE,me.readUInt16BE=ke.readUInt16BE,me.readUInt32LE=ke.readUInt32LE,me.readUInt32BE=ke.readUInt32BE,me.readInt8=ke.readInt8,me.readInt16LE=ke.readInt16LE,me.readInt16BE=ke.readInt16BE,me.readInt32LE=ke.readInt32LE,me.readInt32BE=ke.readInt32BE,me.readFloatLE=ke.readFloatLE,me.readFloatBE=ke.readFloatBE,me.readDoubleLE=ke.readDoubleLE,me.readDoubleBE=ke.readDoubleBE,me.writeUInt8=ke.writeUInt8,me.writeUInt16LE=ke.writeUInt16LE,me.writeUInt16BE=ke.writeUInt16BE,me.writeUInt32LE=ke.writeUInt32LE,me.writeUInt32BE=ke.writeUInt32BE,me.writeInt8=ke.writeInt8,me.writeInt16LE=ke.writeInt16LE,me.writeInt16BE=ke.writeInt16BE,me.writeInt32LE=ke.writeInt32LE,me.writeInt32BE=ke.writeInt32BE,me.writeFloatLE=ke.writeFloatLE,me.writeFloatBE=ke.writeFloatBE,me.writeDoubleLE=ke.writeDoubleLE,me.writeDoubleBE=ke.writeDoubleBE,me.fill=ke.fill,me.inspect=ke.inspect,me.toArrayBuffer=ke.toArrayBuffer,me}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(q,g,C){(function(b,D,B,k,_,v,T,j,O){B=q("buffer").Buffer;var A=new B(4);A.fill(0),g.exports={hash:function(L,ae,X,J){for(var Z=ae(function(R,le){R.length%4!=0&&(R=B.concat([R,A],R.length+(4-R.length%4)));for(var Te=[],ce=le?R.readInt32BE:R.readInt32LE,be=0;be<R.length;be+=4)Te.push(ce.call(R,be));return Te}(L=B.isBuffer(L)?L:new B(L),J),8*L.length),W=(ae=J,new B(X)),z=ae?W.writeInt32BE:W.writeInt32LE,x=0;x<Z.length;x++)z.call(W,Z[x],4*x,!0);return W}}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(q,g,C){(function(b,D,B,k,_,v,T,j,O){B=q("buffer").Buffer;var Q=q("./sha"),A=q("./sha256"),L=q("./rng"),ae={sha1:Q,sha256:A,md5:q("./md5")},X=64,J=new B(X);function Z(R,le){var G=ae[R=R||"sha1"],Te=[];return G||W("algorithm:",R,"is not yet supported"),{update:function(ce){return B.isBuffer(ce)||(ce=new B(ce)),Te.push(ce),this},digest:function(ce){var be=B.concat(Te);return be=le?function(ke,Ne,Ze){B.isBuffer(Ne)||(Ne=new B(Ne)),B.isBuffer(Ze)||(Ze=new B(Ze)),Ne.length>X?Ne=ke(Ne):Ne.length<X&&(Ne=B.concat([Ne,J],X));for(var Ke=new B(X),Me=new B(X),ze=0;ze<X;ze++)Ke[ze]=54^Ne[ze],Me[ze]=92^Ne[ze];return Ze=ke(B.concat([Ke,Ze])),ke(B.concat([Me,Ze]))}(G,le,be):G(be),Te=null,ce?be.toString(ce):be}}}function W(){var R=[].slice.call(arguments).join(" ");throw new Error([R,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}J.fill(0),C.createHash=function(R){return Z(R)},C.createHmac=Z,C.randomBytes=function(R,le){if(!le||!le.call)return new B(L(R));try{le.call(this,void 0,new B(L(R)))}catch(G){le(G)}};var z,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],N=function(R){C[R]=function(){W("sorry,",R,"is not implemented yet")}};for(z in x)N(x[z])}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){var B=q("./helpers");function Q(W,z){W[z>>5]|=128<<z%32,W[14+(z+64>>>9<<4)]=z;for(var x=1732584193,N=-271733879,R=-1732584194,le=271733878,G=0;G<W.length;G+=16){var Te=x,ce=N,be=R,ke=le;x=L(x,N,R,le,W[G+0],7,-680876936),le=L(le,x,N,R,W[G+1],12,-389564586),R=L(R,le,x,N,W[G+2],17,606105819),N=L(N,R,le,x,W[G+3],22,-1044525330),x=L(x,N,R,le,W[G+4],7,-176418897),le=L(le,x,N,R,W[G+5],12,1200080426),R=L(R,le,x,N,W[G+6],17,-1473231341),N=L(N,R,le,x,W[G+7],22,-45705983),x=L(x,N,R,le,W[G+8],7,1770035416),le=L(le,x,N,R,W[G+9],12,-1958414417),R=L(R,le,x,N,W[G+10],17,-42063),N=L(N,R,le,x,W[G+11],22,-1990404162),x=L(x,N,R,le,W[G+12],7,1804603682),le=L(le,x,N,R,W[G+13],12,-40341101),R=L(R,le,x,N,W[G+14],17,-1502002290),x=ae(x,N=L(N,R,le,x,W[G+15],22,1236535329),R,le,W[G+1],5,-165796510),le=ae(le,x,N,R,W[G+6],9,-1069501632),R=ae(R,le,x,N,W[G+11],14,643717713),N=ae(N,R,le,x,W[G+0],20,-373897302),x=ae(x,N,R,le,W[G+5],5,-701558691),le=ae(le,x,N,R,W[G+10],9,38016083),R=ae(R,le,x,N,W[G+15],14,-660478335),N=ae(N,R,le,x,W[G+4],20,-405537848),x=ae(x,N,R,le,W[G+9],5,568446438),le=ae(le,x,N,R,W[G+14],9,-1019803690),R=ae(R,le,x,N,W[G+3],14,-187363961),N=ae(N,R,le,x,W[G+8],20,1163531501),x=ae(x,N,R,le,W[G+13],5,-1444681467),le=ae(le,x,N,R,W[G+2],9,-51403784),R=ae(R,le,x,N,W[G+7],14,1735328473),x=X(x,N=ae(N,R,le,x,W[G+12],20,-1926607734),R,le,W[G+5],4,-378558),le=X(le,x,N,R,W[G+8],11,-2022574463),R=X(R,le,x,N,W[G+11],16,1839030562),N=X(N,R,le,x,W[G+14],23,-35309556),x=X(x,N,R,le,W[G+1],4,-1530992060),le=X(le,x,N,R,W[G+4],11,1272893353),R=X(R,le,x,N,W[G+7],16,-155497632),N=X(N,R,le,x,W[G+10],23,-1094730640),x=X(x,N,R,le,W[G+13],4,681279174),le=X(le,x,N,R,W[G+0],11,-358537222),R=X(R,le,x,N,W[G+3],16,-722521979),N=X(N,R,le,x,W[G+6],23,76029189),x=X(x,N,R,le,W[G+9],4,-640364487),le=X(le,x,N,R,W[G+12],11,-421815835),R=X(R,le,x,N,W[G+15],16,530742520),x=J(x,N=X(N,R,le,x,W[G+2],23,-995338651),R,le,W[G+0],6,-198630844),le=J(le,x,N,R,W[G+7],10,1126891415),R=J(R,le,x,N,W[G+14],15,-1416354905),N=J(N,R,le,x,W[G+5],21,-57434055),x=J(x,N,R,le,W[G+12],6,1700485571),le=J(le,x,N,R,W[G+3],10,-1894986606),R=J(R,le,x,N,W[G+10],15,-1051523),N=J(N,R,le,x,W[G+1],21,-2054922799),x=J(x,N,R,le,W[G+8],6,1873313359),le=J(le,x,N,R,W[G+15],10,-30611744),R=J(R,le,x,N,W[G+6],15,-1560198380),N=J(N,R,le,x,W[G+13],21,1309151649),x=J(x,N,R,le,W[G+4],6,-145523070),le=J(le,x,N,R,W[G+11],10,-1120210379),R=J(R,le,x,N,W[G+2],15,718787259),N=J(N,R,le,x,W[G+9],21,-343485551),x=Z(x,Te),N=Z(N,ce),R=Z(R,be),le=Z(le,ke)}return Array(x,N,R,le)}function A(W,z,x,N,R,le){return Z((z=Z(Z(z,W),Z(N,le)))<<R|z>>>32-R,x)}function L(W,z,x,N,R,le,G){return A(z&x|~z&N,W,z,R,le,G)}function ae(W,z,x,N,R,le,G){return A(z&N|x&~N,W,z,R,le,G)}function X(W,z,x,N,R,le,G){return A(z^x^N,W,z,R,le,G)}function J(W,z,x,N,R,le,G){return A(x^(z|~N),W,z,R,le,G)}function Z(W,z){var x=(65535&W)+(65535&z);return(W>>16)+(z>>16)+(x>>16)<<16|65535&x}g.exports=function(W){return B.hash(W,Q,16)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){g.exports=function(Q){for(var A,L=new Array(Q),ae=0;ae<Q;ae++)!(3&ae)&&(A=4294967296*Math.random()),L[ae]=A>>>((3&ae)<<3)&255;return L}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){var B=q("./helpers");function Q(ae,X){ae[X>>5]|=128<<24-X%32,ae[15+(X+64>>9<<4)]=X;for(var J,Z,W,z=Array(80),x=1732584193,N=-271733879,R=-1732584194,le=271733878,G=-1009589776,Te=0;Te<ae.length;Te+=16){for(var ce=x,be=N,ke=R,Ne=le,Ze=G,Ke=0;Ke<80;Ke++){z[Ke]=Ke<16?ae[Te+Ke]:L(z[Ke-3]^z[Ke-8]^z[Ke-14]^z[Ke-16],1);var Me=A(A(L(x,5),(Me=N,Z=R,W=le,(J=Ke)<20?Me&Z|~Me&W:!(J<40)&&J<60?Me&Z|Me&W|Z&W:Me^Z^W)),A(A(G,z[Ke]),(J=Ke)<20?1518500249:J<40?1859775393:J<60?-1894007588:-899497514));G=le,le=R,R=L(N,30),N=x,x=Me}x=A(x,ce),N=A(N,be),R=A(R,ke),le=A(le,Ne),G=A(G,Ze)}return Array(x,N,R,le,G)}function A(ae,X){var J=(65535&ae)+(65535&X);return(ae>>16)+(X>>16)+(J>>16)<<16|65535&J}function L(ae,X){return ae<<X|ae>>>32-X}g.exports=function(ae){return B.hash(ae,Q,20,!0)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){function B(X,J){var Z=(65535&X)+(65535&J);return(X>>16)+(J>>16)+(Z>>16)<<16|65535&Z}function Q(X,J){var Z,W=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),z=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);X[J>>5]|=128<<24-J%32,X[15+(J+64>>9<<4)]=J;for(var N,R,le=0;le<X.length;le+=16){for(var G=z[0],Te=z[1],ce=z[2],be=z[3],ke=z[4],Ne=z[5],Ze=z[6],Ke=z[7],Me=0;Me<64;Me++)x[Me]=Me<16?X[Me+le]:B(B(B(L(R=x[Me-2],17)^L(R,19)^ae(R,10),x[Me-7]),L(R=x[Me-15],7)^L(R,18)^ae(R,3)),x[Me-16]),Z=B(B(B(B(Ke,L(R=ke,6)^L(R,11)^L(R,25)),ke&Ne^~ke&Ze),W[Me]),x[Me]),N=B(L(N=G,2)^L(N,13)^L(N,22),G&Te^G&ce^Te&ce),Ke=Ze,Ze=Ne,Ne=ke,ke=B(be,Z),be=ce,ce=Te,Te=G,G=B(Z,N);z[0]=B(G,z[0]),z[1]=B(Te,z[1]),z[2]=B(ce,z[2]),z[3]=B(be,z[3]),z[4]=B(ke,z[4]),z[5]=B(Ne,z[5]),z[6]=B(Ze,z[6]),z[7]=B(Ke,z[7])}return z}var A=q("./helpers"),L=function(X,J){return X>>>J|X<<32-J},ae=function(X,J){return X>>>J};g.exports=function(X){return A.hash(X,Q,32,!0)}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){C.read=function(B,Q,A,L,le){var X,J,Z=8*le-L-1,W=(1<<Z)-1,z=W>>1,x=-7,N=A?le-1:0,R=A?-1:1;for(le=B[Q+N],N+=R,X=le&(1<<-x)-1,le>>=-x,x+=Z;0<x;X=256*X+B[Q+N],N+=R,x-=8);for(J=X&(1<<-x)-1,X>>=-x,x+=L;0<x;J=256*J+B[Q+N],N+=R,x-=8);if(0===X)X=1-z;else{if(X===W)return J?NaN:1/0*(le?-1:1);J+=Math.pow(2,L),X-=z}return(le?-1:1)*J*Math.pow(2,X-L)},C.write=function(B,Q,A,L,ae,G){var J,Z,W=8*G-ae-1,z=(1<<W)-1,x=z>>1,N=23===ae?Math.pow(2,-24)-Math.pow(2,-77):0,R=L?0:G-1,le=L?1:-1;for(G=Q<0||0===Q&&1/Q<0?1:0,Q=Math.abs(Q),isNaN(Q)||Q===1/0?(Z=isNaN(Q)?1:0,J=z):(J=Math.floor(Math.log(Q)/Math.LN2),Q*(L=Math.pow(2,-J))<1&&(J--,L*=2),2<=(Q+=1<=J+x?N/L:N*Math.pow(2,1-x))*L&&(J++,L/=2),z<=J+x?(Z=0,J=z):1<=J+x?(Z=(Q*L-1)*Math.pow(2,ae),J+=x):(Z=Q*Math.pow(2,x-1)*Math.pow(2,ae),J=0));8<=ae;B[A+R]=255&Z,R+=le,Z/=256,ae-=8);for(J=J<<ae|Z,W+=ae;0<W;B[A+R]=255&J,R+=le,J/=256,W-=8);B[A+R-le]|=128*G}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(q,g,C){(function(b,D,S,k,_,v,T,j,O){var B,Q,A;function L(){}(b=g.exports={}).nextTick=(Q=typeof window<"u"&&window.setImmediate,A=typeof window<"u"&&window.postMessage&&window.addEventListener,Q?function(ae){return window.setImmediate(ae)}:A?(B=[],window.addEventListener("message",function(ae){var X=ae.source;X!==window&&null!==X||"process-tick"!==ae.data||(ae.stopPropagation(),0<B.length&&B.shift()())},!0),function(ae){B.push(ae),window.postMessage("process-tick","*")}):function(ae){setTimeout(ae,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=L,b.addListener=L,b.once=L,b.off=L,b.removeListener=L,b.removeAllListeners=L,b.emit=L,b.binding=function(ae){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(ae){throw new Error("process.chdir is not supported")}}).call(this,q("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},q("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:ee=>{var g,C,q=ee.exports={};function b(){throw new Error("setTimeout has not been defined")}function D(){throw new Error("clearTimeout has not been defined")}function S(L){if(g===setTimeout)return setTimeout(L,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout(L,0);try{return g(L,0)}catch{try{return g.call(null,L,0)}catch{return g.call(this,L,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch{g=b}try{C="function"==typeof clearTimeout?clearTimeout:D}catch{C=D}}();var T,_=[],v=!1,j=-1;function O(){!v||!T||(v=!1,T.length?_=T.concat(_):j=-1,_.length&&B())}function B(){if(!v){var L=S(O);v=!0;for(var ae=_.length;ae;){for(T=_,_=[];++j<ae;)T&&T[j].run();j=-1,ae=_.length}T=null,v=!1,function k(L){if(C===clearTimeout)return clearTimeout(L);if((C===D||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(L);try{return C(L)}catch{try{return C.call(null,L)}catch{return C.call(this,L)}}}(L)}}function Q(L,ae){this.fun=L,this.array=ae}function A(){}q.nextTick=function(L){var ae=new Array(arguments.length-1);if(arguments.length>1)for(var X=1;X<arguments.length;X++)ae[X-1]=arguments[X];_.push(new Q(L,ae)),1===_.length&&!v&&S(B)},Q.prototype.run=function(){this.fun.apply(null,this.array)},q.title="browser",q.browser=!0,q.env={},q.argv=[],q.version="",q.versions={},q.on=A,q.addListener=A,q.once=A,q.off=A,q.removeListener=A,q.removeAllListeners=A,q.emit=A,q.prependListener=A,q.prependOnceListener=A,q.listeners=function(L){return[]},q.binding=function(L){throw new Error("process.binding is not supported")},q.cwd=function(){return"/"},q.chdir=function(L){throw new Error("process.chdir is not supported")},q.umask=function(){return 0}},3410:ee=>{let q;ee.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(q||(q=Promise.resolve())).then(g).catch(C=>setTimeout(()=>{throw C},0))},1986:(ee,q,g)=>{ee.exports=g(7842)},5327:ee=>{"use strict";ee.exports=class Cq{constructor(g,C=new Map,b=0){this.prefix=g,this._existing=C,this.counter=b}clone(){const{prefix:g,_existing:C,counter:b}=this;return new Cq(g,new Map(C),b)}getId(g){const C=g&&this._existing.get(g);if(C)return C;const b=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,b),b}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(ee,q,g)=>{"use strict";var C=g(7156).default;g(8280);const b=self.crypto||self.msCrypto;ee.exports=class{constructor(S){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===S)this.algorithm={name:"SHA-256"};else{if("sha1"!==S)throw new Error(`Unsupported algorithm "${S}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(S){this._content+=S}digest(){var S=this;return C(function*(){const k=(new TextEncoder).encode(S._content),_=new Uint8Array(yield b.subtle.digest(S.algorithm,k));let v="";for(let T=0;T<_.length;++T)v+=_[T].toString(16).padStart(2,"0");return v})()}}},8003:ee=>{"use strict";const C="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",D="NamedNode",S="BlankNode",k="Literal",_="DefaultGraph",v={};function T(A,L){return A.subject.termType===L.subject.termType&&A.object.termType===L.object.termType&&A.subject.value===L.subject.value&&A.predicate.value===L.predicate.value&&A.object.value===L.object.value&&(A.object.termType!==k||A.object.datatype.termType===L.object.datatype.termType&&A.object.language===L.object.language&&A.object.datatype.value===L.object.datatype.value)}(()=>{const A="(?:<([^:]+:[^>]*)>)",ae="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",X=ae+"0-9-\xb7\u0300-\u036f\u203f-\u2040",Z="(_:(?:["+ae+"0-9])(?:(?:["+X+".])*(?:["+X+"]))?)",R="[ \\t]+",le="[ \\t]*",G="(?:"+A+"|"+Z+")"+R,Te=A+R,ce="(?:"+A+"|"+Z+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+A+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+le,be="(?:\\.|(?:(?:"+A+"|"+Z+")"+le+"\\.))";v.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,v.empty=new RegExp("^[ \\t]*$"),v.quad=new RegExp("^"+le+G+Te+ce+be+le+"$")})(),ee.exports=class TC{static parse(L){const ae=[],X={},J=L.split(v.eoln);let Z=0;for(const W of J){if(Z++,v.empty.test(W))continue;const z=W.match(v.quad);if(null===z)throw new Error("N-Quads parse error on line "+Z+".");const x={subject:null,predicate:null,object:null,graph:null};if(x.subject=void 0!==z[1]?{termType:D,value:z[1]}:{termType:S,value:z[2]},x.predicate={termType:D,value:z[3]},void 0!==z[4]?x.object={termType:D,value:z[4]}:void 0!==z[5]?x.object={termType:S,value:z[5]}:(x.object={termType:k,value:void 0,datatype:{termType:D}},void 0!==z[7]?x.object.datatype.value=z[7]:void 0!==z[8]?(x.object.datatype.value=C,x.object.language=z[8]):x.object.datatype.value=b,x.object.value=z[6].replace(B,function(L,ae,X,J){if(ae)switch(ae){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(X)return String.fromCharCode(parseInt(X,16));if(J)throw new Error("Unsupported U escape")})),x.graph=void 0!==z[9]?{termType:D,value:z[9]}:void 0!==z[10]?{termType:S,value:z[10]}:{termType:_,value:""},x.graph.value in X){let N=!0;const R=X[x.graph.value];for(const le of R)if(T(le,x)){N=!1;break}N&&(R.push(x),ae.push(x))}else X[x.graph.value]=[x],ae.push(x)}return ae}static serialize(L){Array.isArray(L)||(L=TC.legacyDatasetToQuads(L));const ae=[];for(const X of L)ae.push(TC.serializeQuad(X));return ae.sort().join("")}static serializeQuadComponents(L,ae,X,J){let Z="";return Z+=L.termType===D?`<${L.value}>`:`${L.value}`,Z+=` <${ae.value}> `,X.termType===D?Z+=`<${X.value}>`:X.termType===S?Z+=X.value:(Z+=`"${function O(A){return A.replace(j,function(L){switch(L){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(X.value)}"`,X.datatype.value===C?X.language&&(Z+=`@${X.language}`):X.datatype.value!==b&&(Z+=`^^<${X.datatype.value}>`)),J.termType===D?Z+=` <${J.value}>`:J.termType===S&&(Z+=` ${J.value}`),Z+=" .\n",Z}static serializeQuad(L){return TC.serializeQuadComponents(L.subject,L.predicate,L.object,L.graph)}static legacyDatasetToQuads(L){const ae=[],X={"blank node":S,IRI:D,literal:k};for(const J in L)L[J].forEach(W=>{const z={};for(const x in W){const N=W[x],R={termType:X[N.type],value:N.value};R.termType===k&&(R.datatype={termType:D},"datatype"in N&&(R.datatype.value=N.datatype),"language"in N?("datatype"in N||(R.datatype.value=C),R.language=N.language):"datatype"in N||(R.datatype.value=b)),z[x]=R}z.graph="@default"===J?{termType:_,value:""}:{termType:J.startsWith("_:")?S:D,value:J},ae.push(z)});return ae}};const j=/["\\\n\r]/g,B=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:ee=>{"use strict";ee.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let C=0;C<g.length;++C)this.dir.set(g[C],!0)}hasNext(){return!this.done}next(){const{current:g,dir:C}=this,b=g.slice();let D=null,S=0;const k=g.length;for(let _=0;_<k;++_){const v=g[_],T=C.get(v);(null===D||v>D)&&(T&&_>0&&v>g[_-1]||!T&&_<k-1&&v>g[_+1])&&(D=v,S=_)}if(null===D)this.done=!0;else{const _=C.get(D)?S-1:S+1;g[S]=g[_],g[_]=D;for(const v of g)v>D&&C.set(v,!C.get(v))}return b}}},7218:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(5327),D=g(7475),S=g(7790),k=g(8003);function _(v,T){return v.hash<T.hash?-1:v.hash>T.hash?1:0}ee.exports=class{constructor({createMessageDigest:T=(()=>new D("sha256")),canonicalIdMap:j=new Map,maxDeepIterations:O=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",j),this.createMessageDigest=T,this.maxDeepIterations=O,this.quads=null,this.deepIterations=null}main(T){var j=this;return C(function*(){j.deepIterations=new Map,j.quads=T;for(const X of T)j._addBlankNodeQuadInfo({quad:X,component:X.subject}),j._addBlankNodeQuadInfo({quad:X,component:X.object}),j._addBlankNodeQuadInfo({quad:X,component:X.graph});const O=new Map,B=[...j.blankNodeInfo.keys()];let Q=0;for(const X of B)++Q%100==0&&(yield j._yield()),yield j._hashAndTrackBlankNode({id:X,hashToBlankNodes:O});const A=[...O.keys()].sort(),L=[];for(const X of A){const J=O.get(X);J.length>1?L.push(J):j.canonicalIssuer.getId(J[0])}for(const X of L){const J=[];for(const Z of X){if(j.canonicalIssuer.hasId(Z))continue;const W=new b("_:b");W.getId(Z);const z=yield j.hashNDegreeQuads(Z,W);J.push(z)}J.sort(_);for(const Z of J){const W=Z.issuer.getOldIds();for(const z of W)j.canonicalIssuer.getId(z)}}const ae=[];for(const X of j.quads){const J=k.serializeQuadComponents(j._componentWithCanonicalId(X.subject),X.predicate,j._componentWithCanonicalId(X.object),j._componentWithCanonicalId(X.graph));ae.push(J)}return ae.sort(),ae.join("")})()}hashFirstDegreeQuads(T){var j=this;return C(function*(){const O=[],B=j.blankNodeInfo.get(T),Q=B.quads;for(const L of Q){const ae={subject:null,predicate:L.predicate,object:null,graph:null};ae.subject=j.modifyFirstDegreeComponent(T,L.subject,"subject"),ae.object=j.modifyFirstDegreeComponent(T,L.object,"object"),ae.graph=j.modifyFirstDegreeComponent(T,L.graph,"graph"),O.push(k.serializeQuad(ae))}O.sort();const A=j.createMessageDigest();for(const L of O)A.update(L);return B.hash=yield A.digest(),B.hash})()}hashRelatedBlankNode(T,j,O,B){var Q=this;return C(function*(){let A;A=Q.canonicalIssuer.hasId(T)?Q.canonicalIssuer.getId(T):O.hasId(T)?O.getId(T):Q.blankNodeInfo.get(T).hash;const L=Q.createMessageDigest();return L.update(B),"g"!==B&&L.update(Q.getRelatedPredicate(j)),L.update(A),L.digest()})()}hashNDegreeQuads(T,j){var O=this;return C(function*(){const B=O.deepIterations.get(T)||0;if(B>O.maxDeepIterations)throw new Error(`Maximum deep iterations (${O.maxDeepIterations}) exceeded.`);O.deepIterations.set(T,B+1);const Q=O.createMessageDigest(),A=yield O.createHashToRelated(T,j),L=[...A.keys()].sort();for(const ae of L){Q.update(ae);let J,X="";const Z=new S(A.get(ae));let W=0;for(;Z.hasNext();){const z=Z.next();++W%3==0&&(yield O._yield());let x=j.clone(),N="";const R=[];let le=!1;for(const G of z)if(O.canonicalIssuer.hasId(G)?N+=O.canonicalIssuer.getId(G):(x.hasId(G)||R.push(G),N+=x.getId(G)),0!==X.length&&N>X){le=!0;break}if(!le){for(const G of R){const Te=yield O.hashNDegreeQuads(G,x);if(N+=x.getId(G),N+=`<${Te.hash}>`,x=Te.issuer,0!==X.length&&N>X){le=!0;break}}le||(0===X.length||N<X)&&(X=N,J=x)}}Q.update(X),j=J}return{hash:yield Q.digest(),issuer:j}})()}modifyFirstDegreeComponent(T,j){return"BlankNode"!==j.termType?j:{termType:"BlankNode",value:j.value===T?"_:a":"_:z"}}getRelatedPredicate(T){return`<${T.predicate.value}>`}createHashToRelated(T,j){var O=this;return C(function*(){const B=new Map,Q=O.blankNodeInfo.get(T).quads;let A=0;for(const L of Q)++A%100==0&&(yield O._yield()),yield Promise.all([O._addRelatedBlankNodeHash({quad:L,component:L.subject,position:"s",id:T,issuer:j,hashToRelated:B}),O._addRelatedBlankNodeHash({quad:L,component:L.object,position:"o",id:T,issuer:j,hashToRelated:B}),O._addRelatedBlankNodeHash({quad:L,component:L.graph,position:"g",id:T,issuer:j,hashToRelated:B})]);return B})()}_hashAndTrackBlankNode({id:T,hashToBlankNodes:j}){var O=this;return C(function*(){const B=yield O.hashFirstDegreeQuads(T),Q=j.get(B);Q?Q.push(T):j.set(B,[T])})()}_addBlankNodeQuadInfo({quad:T,component:j}){if("BlankNode"!==j.termType)return;const O=j.value,B=this.blankNodeInfo.get(O);B?B.quads.add(T):this.blankNodeInfo.set(O,{quads:new Set([T]),hash:null})}_addRelatedBlankNodeHash({quad:T,component:j,position:O,id:B,issuer:Q,hashToRelated:A}){var L=this;return C(function*(){if("BlankNode"!==j.termType||j.value===B)return;const ae=j.value,X=yield L.hashRelatedBlankNode(ae,T,Q,O),J=A.get(X);J?J.push(ae):A.set(X,[ae])})()}_componentWithCanonicalId(T){return"BlankNode"!==T.termType||T.value.startsWith(this.canonicalIssuer.prefix)?T:{termType:"BlankNode",value:this.canonicalIssuer.getId(T.value)}}_yield(){return C(function*(){return new Promise(T=>setImmediate(T))})()}}},9123:(ee,q,g)=>{"use strict";const C=g(5327),b=g(7475),D=g(7790),S=g(8003);function k(_,v){return _.hash<v.hash?-1:_.hash>v.hash?1:0}ee.exports=class{constructor({createMessageDigest:v=(()=>new b("sha256")),canonicalIdMap:T=new Map,maxDeepIterations:j=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new C("_:c14n",T),this.createMessageDigest=v,this.maxDeepIterations=j,this.quads=null,this.deepIterations=null}main(v){this.deepIterations=new Map,this.quads=v;for(const A of v)this._addBlankNodeQuadInfo({quad:A,component:A.subject}),this._addBlankNodeQuadInfo({quad:A,component:A.object}),this._addBlankNodeQuadInfo({quad:A,component:A.graph});const T=new Map,j=[...this.blankNodeInfo.keys()];for(const A of j)this._hashAndTrackBlankNode({id:A,hashToBlankNodes:T});const O=[...T.keys()].sort(),B=[];for(const A of O){const L=T.get(A);L.length>1?B.push(L):this.canonicalIssuer.getId(L[0])}for(const A of B){const L=[];for(const ae of A){if(this.canonicalIssuer.hasId(ae))continue;const X=new C("_:b");X.getId(ae);const J=this.hashNDegreeQuads(ae,X);L.push(J)}L.sort(k);for(const ae of L){const X=ae.issuer.getOldIds();for(const J of X)this.canonicalIssuer.getId(J)}}const Q=[];for(const A of this.quads){const L=S.serializeQuadComponents(this._componentWithCanonicalId({component:A.subject}),A.predicate,this._componentWithCanonicalId({component:A.object}),this._componentWithCanonicalId({component:A.graph}));Q.push(L)}return Q.sort(),Q.join("")}hashFirstDegreeQuads(v){const T=[],j=this.blankNodeInfo.get(v),O=j.quads;for(const Q of O){const A={subject:null,predicate:Q.predicate,object:null,graph:null};A.subject=this.modifyFirstDegreeComponent(v,Q.subject,"subject"),A.object=this.modifyFirstDegreeComponent(v,Q.object,"object"),A.graph=this.modifyFirstDegreeComponent(v,Q.graph,"graph"),T.push(S.serializeQuad(A))}T.sort();const B=this.createMessageDigest();for(const Q of T)B.update(Q);return j.hash=B.digest(),j.hash}hashRelatedBlankNode(v,T,j,O){let B;B=this.canonicalIssuer.hasId(v)?this.canonicalIssuer.getId(v):j.hasId(v)?j.getId(v):this.blankNodeInfo.get(v).hash;const Q=this.createMessageDigest();return Q.update(O),"g"!==O&&Q.update(this.getRelatedPredicate(T)),Q.update(B),Q.digest()}hashNDegreeQuads(v,T){const j=this.deepIterations.get(v)||0;if(j>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(v,j+1);const O=this.createMessageDigest(),B=this.createHashToRelated(v,T),Q=[...B.keys()].sort();for(const A of Q){O.update(A);let ae,L="";const X=new D(B.get(A));for(;X.hasNext();){const J=X.next();let Z=T.clone(),W="";const z=[];let x=!1;for(const N of J)if(this.canonicalIssuer.hasId(N)?W+=this.canonicalIssuer.getId(N):(Z.hasId(N)||z.push(N),W+=Z.getId(N)),0!==L.length&&W>L){x=!0;break}if(!x){for(const N of z){const R=this.hashNDegreeQuads(N,Z);if(W+=Z.getId(N),W+=`<${R.hash}>`,Z=R.issuer,0!==L.length&&W>L){x=!0;break}}x||(0===L.length||W<L)&&(L=W,ae=Z)}}O.update(L),T=ae}return{hash:O.digest(),issuer:T}}modifyFirstDegreeComponent(v,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===v?"_:a":"_:z"}}getRelatedPredicate(v){return`<${v.predicate.value}>`}createHashToRelated(v,T){const j=new Map,O=this.blankNodeInfo.get(v).quads;for(const B of O)this._addRelatedBlankNodeHash({quad:B,component:B.subject,position:"s",id:v,issuer:T,hashToRelated:j}),this._addRelatedBlankNodeHash({quad:B,component:B.object,position:"o",id:v,issuer:T,hashToRelated:j}),this._addRelatedBlankNodeHash({quad:B,component:B.graph,position:"g",id:v,issuer:T,hashToRelated:j});return j}_hashAndTrackBlankNode({id:v,hashToBlankNodes:T}){const j=this.hashFirstDegreeQuads(v),O=T.get(j);O?O.push(v):T.set(j,[v])}_addBlankNodeQuadInfo({quad:v,component:T}){if("BlankNode"!==T.termType)return;const j=T.value,O=this.blankNodeInfo.get(j);O?O.quads.add(v):this.blankNodeInfo.set(j,{quads:new Set([v]),hash:null})}_addRelatedBlankNodeHash({quad:v,component:T,position:j,id:O,issuer:B,hashToRelated:Q}){if("BlankNode"!==T.termType||T.value===O)return;const A=T.value,L=this.hashRelatedBlankNode(A,v,B,j),ae=Q.get(L);ae?ae.push(A):Q.set(L,[A])}_componentWithCanonicalId({component:v}){return"BlankNode"!==v.termType||v.value.startsWith(this.canonicalIssuer.prefix)?v:{termType:"BlankNode",value:this.canonicalIssuer.getId(v.value)}}}},1326:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(7475),D=g(7218);ee.exports=class extends D{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(k,_,v){return"BlankNode"!==_.termType?_:"graph"===v?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===k?"_:a":"_:z"}}getRelatedPredicate(k){return k.predicate.value}createHashToRelated(k,_){var v=this;return C(function*(){const T=new Map,j=v.blankNodeInfo.get(k).quads;let O=0;for(const B of j){let Q,A;if("BlankNode"===B.subject.termType&&B.subject.value!==k)A=B.subject.value,Q="p";else{if("BlankNode"!==B.object.termType||B.object.value===k)continue;A=B.object.value,Q="r"}++O%100==0&&(yield v._yield());const L=yield v.hashRelatedBlankNode(A,B,_,Q),ae=T.get(L);ae?ae.push(A):T.set(L,[A])}return T})()}}},9869:(ee,q,g)=>{"use strict";const C=g(7475),b=g(9123);ee.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new C("sha1")}modifyFirstDegreeComponent(S,k,_){return"BlankNode"!==k.termType?k:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:k.value===S?"_:a":"_:z"}}getRelatedPredicate(S){return S.predicate.value}createHashToRelated(S,k){const _=new Map,v=this.blankNodeInfo.get(S).quads;for(const T of v){let j,O;if("BlankNode"===T.subject.termType&&T.subject.value!==S)O=T.subject.value,j="p";else{if("BlankNode"!==T.object.termType||T.object.value===S)continue;O=T.object.value,j="r"}const B=this.hashRelatedBlankNode(O,T,k,j),Q=_.get(B);Q?Q.push(O):_.set(B,[O])}return _}}},7842:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(7218),D=g(1326),S=g(9123),k=g(9869);let _;try{_=g(7670)}catch{}function v(T){return Array.isArray(T)?T:q.NQuads.legacyDatasetToQuads(T)}q.NQuads=g(8003),q.IdentifierIssuer=g(5327),q._rdfCanonizeNative=function(T){return T&&(_=T),_},q.canonize=function(){var T=C(function*(j,O){const B=v(j);if(O.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(O.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((Q,A)=>_.canonize(B,O,(L,ae)=>L?A(L):Q(ae)))}if("URDNA2015"===O.algorithm)return new b(O).main(B);if("URGNA2012"===O.algorithm){if(O.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new D(O).main(B)}throw"algorithm"in O?new Error("Invalid RDF Dataset Canonicalization algorithm: "+O.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(j,O){return T.apply(this,arguments)}}(),q._canonizeSync=function(T,j){const O=v(T);if(j.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(j.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(O,j)}if("URDNA2015"===j.algorithm)return new S(j).main(O);if("URGNA2012"===j.algorithm){if(j.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new k(j).main(O)}throw"algorithm"in j?new Error("Invalid RDF Dataset Canonicalization algorithm: "+j.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(ee,q,g){"use strict";var C=this&&this.__createBinding||(Object.create?function(D,S,k,_){void 0===_&&(_=k),Object.defineProperty(D,_,{enumerable:!0,get:function(){return S[k]}})}:function(D,S,k,_){void 0===_&&(_=k),D[_]=S[k]}),b=this&&this.__exportStar||function(D,S){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(S,k)&&C(S,D,k)};Object.defineProperty(q,"__esModule",{value:!0}),b(g(4740),q),b(g(3613),q),b(g(9379),q),b(g(5565),q),b(g(3283),q),b(g(3905),q),b(g(2234),q)},4740:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.BlankNode=void 0,q.BlankNode=class g{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DataFactory=void 0;const C=g(4740),b=g(9379),D=g(5565),S=g(3283),k=g(3905),_=g(2234);let v=0;q.DataFactory=class T{constructor(O){this.blankNodeCounter=0,this.blankNodePrefix=(O=O||{}).blankNodePrefix||`df_${v++}_`}namedNode(O){return new S.NamedNode(O)}blankNode(O){return new C.BlankNode(O||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(O,B){return new D.Literal(O,B)}variable(O){return new _.Variable(O)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(O,B,Q,A){return new k.Quad(O,B,Q,A||this.defaultGraph())}fromTerm(O){switch(O.termType){case"NamedNode":return this.namedNode(O.value);case"BlankNode":return this.blankNode(O.value);case"Literal":return O.language?this.literal(O.value,O.language):O.datatype.equals(D.Literal.XSD_STRING)?this.literal(O.value):this.literal(O.value,this.fromTerm(O.datatype));case"Variable":return this.variable(O.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(O.subject),this.fromTerm(O.predicate),this.fromTerm(O.object),this.fromTerm(O.graph))}}fromQuad(O){return this.fromTerm(O)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}q.DefaultGraph=g,g.INSTANCE=new g},5565:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Literal=void 0;const C=g(3283);class b{constructor(S,k){this.termType="Literal",this.value=S,"string"==typeof k?(this.language=k,this.datatype=b.RDF_LANGUAGE_STRING):k?(this.language="",this.datatype=k):(this.language="",this.datatype=b.XSD_STRING)}equals(S){return!!S&&"Literal"===S.termType&&S.value===this.value&&S.language===this.language&&this.datatype.equals(S.datatype)}}q.Literal=b,b.RDF_LANGUAGE_STRING=new C.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new C.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.NamedNode=void 0,q.NamedNode=class g{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Quad=void 0,q.Quad=class g{constructor(b,D,S,k){this.termType="Quad",this.value="",this.subject=b,this.predicate=D,this.object=S,this.graph=k}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Variable=void 0,q.Variable=class g{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(ee,q,g){"use strict";var C=this&&this.__createBinding||(Object.create?function(A,L,ae,X){void 0===X&&(X=ae),Object.defineProperty(A,X,{enumerable:!0,get:function(){return L[ae]}})}:function(A,L,ae,X){void 0===X&&(X=ae),A[X]=L[ae]}),b=this&&this.__exportStar||function(A,L){for(var ae in A)"default"!==ae&&!Object.prototype.hasOwnProperty.call(L,ae)&&C(L,A,ae)};Object.defineProperty(q,"__esModule",{value:!0}),q.getSupportedJavaScriptPrimitives=q.getSupportedRdfDatatypes=q.getTermRaw=q.toRdf=q.fromRdf=void 0;const D=g(2633),S=g(2538),k=g(6374);b(g(2538),q),b(g(1815),q),b(g(6374),q);const _=new D.DataFactory,v=new k.Translator;function T(A,L){return v.fromRdf(A,L)}v.registerHandler(new S.TypeHandlerString,S.TypeHandlerString.TYPES.map(A=>_.namedNode(A)),["string"]),v.registerHandler(new S.TypeHandlerBoolean,[S.TypeHandlerBoolean.TYPE].map(A=>_.namedNode(A)),["boolean"]),v.registerHandler(new S.TypeHandlerNumberDouble,S.TypeHandlerNumberDouble.TYPES.map(A=>_.namedNode(A)),["number"]),v.registerHandler(new S.TypeHandlerNumberInteger,S.TypeHandlerNumberInteger.TYPES.map(A=>_.namedNode(A)),["number"]),v.registerHandler(new S.TypeHandlerDate,S.TypeHandlerDate.TYPES.map(A=>_.namedNode(A)),["object"]),q.fromRdf=T,q.toRdf=function j(A,L){return L&&"namedNode"in L&&(L={dataFactory:L}),(L=L||{})&&!L.dataFactory&&(L.dataFactory=_),v.toRdf(A,L)},q.getTermRaw=function O(A,L){return"Literal"===A.termType?T(A,L):A.value},q.getSupportedRdfDatatypes=function B(){return v.getSupportedRdfDatatypes()},q.getSupportedJavaScriptPrimitives=function Q(){return v.getSupportedJavaScriptPrimitives()}},1815:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0})},6374:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Translator=void 0,q.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,D,S){for(const k of D)this.supportedRdfDatatypes.push(k),this.fromRdfHandlers[k.value]=b;for(const k of S){let _=this.toRdfHandlers[k];_||(this.toRdfHandlers[k]=_=[]),_.push(b)}}fromRdf(b,D){const S=this.fromRdfHandlers[b.datatype.value];return S?S.fromRdf(b,D):b.value}toRdf(b,D){const S=this.toRdfHandlers[typeof b];if(S)for(const k of S){const _=k.toRdf(b,D);if(_)return _}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerBoolean=void 0;const C=g(6374);class b{fromRdf(S,k){switch(S.value){case"true":case"1":return!0;case"false":case"0":return!1}return k&&C.Translator.incorrectRdfDataType(S),!1}toRdf(S,{datatype:k,dataFactory:_}){return _.literal(S?"true":"false",k||_.namedNode(b.TYPE))}}q.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerDate=void 0;const C=g(6374);class b{fromRdf(S,k){switch(k&&!S.value.match(b.VALIDATORS[S.datatype.value.substr(33,S.datatype.value.length)])&&C.Translator.incorrectRdfDataType(S),S.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(S.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=S.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(S.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(S.value+"-01");default:return new Date(S.value)}}toRdf(S,{datatype:k,dataFactory:_}){if(k=k||_.namedNode(b.TYPES[0]),!(S instanceof Date))return null;const v=S;let T;switch(k.value){case"http://www.w3.org/2001/XMLSchema#gDay":T=String(v.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":T=v.getUTCMonth()+1+"-"+v.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":T=String(v.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":T=v.getUTCFullYear()+"-"+(v.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":T=v.toISOString().replace(/T.*$/,"");break;default:T=v.toISOString()}return _.literal(T,k)}}q.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerNumberDouble=void 0;const C=g(6374);class b{fromRdf(S,k){const _=parseFloat(S.value);return k&&isNaN(_)&&C.Translator.incorrectRdfDataType(S),_}toRdf(S,{datatype:k,dataFactory:_}){return k=k||_.namedNode(b.TYPES[0]),isNaN(S)?_.literal("NaN",k):isFinite(S)?S%1==0?null:_.literal(S.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),k):_.literal(S>0?"INF":"-INF",k)}}q.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerNumberInteger=void 0;const C=g(6374);class b{fromRdf(S,k){const _=parseInt(S.value,10);return k&&(isNaN(_)||S.value.indexOf(".")>=0)&&C.Translator.incorrectRdfDataType(S),_}toRdf(S,{datatype:k,dataFactory:_}){return _.literal(String(S),k||_.namedNode(S<=b.MAX_INT&&S>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}q.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TypeHandlerString=void 0;class g{fromRdf(b){return b.value}toRdf(b,{datatype:D,dataFactory:S}){return S.literal(b,D)}}q.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(ee,q,g){"use strict";var C=this&&this.__createBinding||(Object.create?function(D,S,k,_){void 0===_&&(_=k),Object.defineProperty(D,_,{enumerable:!0,get:function(){return S[k]}})}:function(D,S,k,_){void 0===_&&(_=k),D[_]=S[k]}),b=this&&this.__exportStar||function(D,S){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(S,k)&&C(S,D,k)};Object.defineProperty(q,"__esModule",{value:!0}),b(g(88),q),b(g(1600),q),b(g(1511),q),b(g(9199),q),b(g(2210),q)},2821:function(ee,q,g){"use strict";var C=this&&this.__createBinding||(Object.create?function(D,S,k,_){void 0===_&&(_=k),Object.defineProperty(D,_,{enumerable:!0,get:function(){return S[k]}})}:function(D,S,k,_){void 0===_&&(_=k),D[_]=S[k]}),b=this&&this.__exportStar||function(D,S){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(S,k)&&C(S,D,k)};Object.defineProperty(q,"__esModule",{value:!0}),b(g(5664),q)},758:(ee,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ParseError=void 0;class g extends Error{constructor(b,D){const S=b.saxStream._parser;super(b.trackPosition?`Line ${S.line+1} column ${S.column+1}: ${D}`:D)}}q.ParseError=g},5664:(ee,q,g)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ParseType=q.RdfXmlParser=void 0;const C=g(7054),b=g(9528),D=g(1793),S=g(758),k=g(2633);class _ extends D.Transform{constructor(j){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},j&&(Object.assign(this,j),this.options=j),this.dataFactory||(this.dataFactory=new k.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(j,O){const B={};let Q=!1;for(const L in j.attributes)L.startsWith("xmlns")&&(5===L.length?(Q=!0,B[""]=j.attributes[L]):":"===L.charAt(5)&&(Q=!0,B[L.substr(6)]=j.attributes[L]));const A=O&&O.ns?O.ns:[_.DEFAULT_NS];return Q?A.concat([B]):A}static expandPrefixedTerm(j,O,B){const Q=j.indexOf(":");let A,L;Q>=0?(A=j.substr(0,Q),L=j.substr(Q+1)):(A="",L=j);let ae=null,X=null;for(let J=O.length-1;J>=0;J--){const Z=O[J][A];if(Z){ae=Z;break}X||(X=O[J][""])}if(!ae){if(A&&"xmlns"!==A)throw new S.ParseError(B,`The prefix '${A}' in term '${j}' was not bound.`);ae=X||""}return{prefix:A,local:L,uri:ae}}static isValidIri(j){return _.IRI_REGEX.test(j)}import(j){const O=new D.PassThrough({readableObjectMode:!0});j.on("error",Q=>B.emit("error",Q)),j.on("data",Q=>O.push(Q)),j.on("end",()=>O.push(null));const B=O.pipe(new _(this.options));return B}_transform(j,O,B){try{this.saxStream.write(j,O)}catch(Q){return B(Q)}B()}newParseError(j){return new S.ParseError(this,j)}valueToUri(j,O){return this.uriToNamedNode(C.resolve(j,O.baseIRI))}uriToNamedNode(j){if(!_.isValidIri(j))throw this.newParseError(`Invalid URI: ${j}`);return this.dataFactory.namedNode(j)}validateNcname(j){if(!_.NCNAME_MATCHER.test(j))throw this.newParseError(`Not a valid NCName: ${j}`)}attachSaxListeners(){this.saxStream.on("error",j=>this.emit("error",j)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(j){const O=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let B=v.RESOURCE;if(O&&(O.hadChildren=!0,B=O.childrenParseType),O&&O.childrenStringTags){const A=j.name;let L="";for(const Z in j.attributes)L+=` ${Z}="${j.attributes[Z]}"`;O.childrenStringTags.push(`<${A}${L}>`);const J={childrenStringTags:O.childrenStringTags};return J.childrenStringEmitClosingTag=`</${A}>`,void this.activeTagStack.push(J)}const Q={};O?(Q.language=O.language,Q.baseIRI=O.baseIRI):Q.baseIRI=this.baseIRI,this.activeTagStack.push(Q),Q.ns=_.parseNamespace(j,O),B===v.RESOURCE?this.onTagResource(j,Q,O,!O):this.onTagProperty(j,Q,O)}onTagResource(j,O,B,Q){const A=_.expandPrefixedTerm(j.name,O.ns,this);O.childrenParseType=v.PROPERTY;let L=!0;if(A.uri===_.RDF){if(!Q&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(A.local)>=0)throw this.newParseError(`Illegal node element name: ${A.local}`);switch(A.local){case"RDF":O.childrenParseType=v.RESOURCE;case"Description":L=!1}}const ae=[],X=[];let J=null,Z=!1,W=!1,z=null;for(const x in j.attributes){const N=j.attributes[x],R=_.expandPrefixedTerm(x,O.ns,this);if(B&&R.uri===_.RDF)switch(R.local){case"about":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${N} and ${J} where found.`);J=N;continue;case"ID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${N} and ${J} where found.`);this.validateNcname(N),J="#"+N,Z=!0;continue;case"nodeID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${N} and ${J} where found.`);this.validateNcname(N),J=N,W=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":z=N;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(R.uri===_.XML){if("lang"===R.local){O.language=""===N?null:N.toLowerCase();continue}if("base"===R.local){O.baseIRI=C.resolve(N,O.baseIRI);continue}}"xml"!==R.prefix&&R.uri&&(ae.push(this.uriToNamedNode(R.uri+R.local)),X.push(N))}if(null!==J&&(O.subject=W?this.dataFactory.blankNode(J):this.valueToUri(J,O),Z&&this.claimNodeId(O.subject)),O.subject||(O.subject=this.dataFactory.blankNode()),L){const x=this.uriToNamedNode(A.uri+A.local);this.emitTriple(O.subject,this.dataFactory.namedNode(_.RDF+"type"),x,B?B.reifiedStatementId:null)}if(B){if(B.predicate)if(B.childrenCollectionSubject){const x=this.dataFactory.blankNode();this.emitTriple(B.childrenCollectionSubject,B.childrenCollectionPredicate,x,B.reifiedStatementId),this.emitTriple(x,this.dataFactory.namedNode(_.RDF+"first"),O.subject,O.reifiedStatementId),B.childrenCollectionSubject=x,B.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(B.subject,B.predicate,O.subject,B.reifiedStatementId);for(let x=0;x<B.predicateSubPredicates.length;x++)this.emitTriple(O.subject,B.predicateSubPredicates[x],B.predicateSubObjects[x],null);B.predicateSubPredicates=[],B.predicateSubObjects=[],B.predicateEmitted=!0}for(let x=0;x<ae.length;x++){const N=this.dataFactory.literal(X[x],O.datatype||O.language);this.emitTriple(O.subject,ae[x],N,B.reifiedStatementId)}z&&this.emitTriple(O.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(z),null)}}onTagProperty(j,O,B){const Q=_.expandPrefixedTerm(j.name,O.ns,this);if(O.childrenParseType=v.RESOURCE,O.subject=B.subject,Q.uri===_.RDF&&"li"===Q.local?(B.listItemCounter||(B.listItemCounter=1),O.predicate=this.uriToNamedNode(Q.uri+"_"+B.listItemCounter++)):O.predicate=this.uriToNamedNode(Q.uri+Q.local),Q.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(Q.local)>=0)throw this.newParseError(`Illegal property element name: ${Q.local}`);O.predicateSubPredicates=[],O.predicateSubObjects=[];let A=!1,L=!1,ae=null,X=!0;const J=[],Z=[];for(const W in j.attributes){const z=j.attributes[W],x=_.expandPrefixedTerm(W,O.ns,this);if(x.uri===_.RDF)switch(x.local){case"resource":if(ae)throw this.newParseError(`Found both rdf:resource (${z}) and rdf:nodeID (${ae}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${z})`);O.hadChildren=!0,ae=z,X=!1;continue;case"datatype":if(L)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${z}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${z})`);O.datatype=this.valueToUri(z,O);continue;case"nodeID":if(L)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${z}).`);if(O.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${z}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${z})`);this.validateNcname(z),O.hadChildren=!0,ae=z,X=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(L)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(O.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${O.datatype.value})`);if(ae)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ae})`);if("Resource"===z){A=!0,O.childrenParseType=v.PROPERTY;const N=this.dataFactory.blankNode();this.emitTriple(O.subject,O.predicate,N,O.reifiedStatementId),O.subject=N,O.predicate=null}else"Collection"===z?(A=!0,O.hadChildren=!0,O.childrenCollectionSubject=O.subject,O.childrenCollectionPredicate=O.predicate,X=!1):"Literal"===z&&(A=!0,O.childrenTagsToString=!0,O.childrenStringTags=[]);continue;case"ID":this.validateNcname(z),O.reifiedStatementId=this.valueToUri("#"+z,O),this.claimNodeId(O.reifiedStatementId);continue}else if(x.uri===_.XML&&"lang"===x.local){O.language=""===z?null:z.toLowerCase();continue}if("xml"!==x.prefix&&"xmlns"!==x.prefix&&x.uri){if(A||O.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${z}`);O.hadChildren=!0,L=!0,J.push(this.uriToNamedNode(x.uri+x.local)),Z.push(this.dataFactory.literal(z,O.datatype||O.language))}}if(null!==ae){const W=O.subject;O.subject=X?this.dataFactory.blankNode(ae):this.valueToUri(ae,O),this.emitTriple(W,O.predicate,O.subject,O.reifiedStatementId);for(let z=0;z<J.length;z++)this.emitTriple(O.subject,J[z],Z[z],null);O.predicateEmitted=!0}else X&&(O.predicateSubPredicates=J,O.predicateSubObjects=Z,O.predicateEmitted=!1)}emitTriple(j,O,B,Q){this.push(this.dataFactory.quad(j,O,B,this.defaultGraph)),Q&&(this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"subject"),j,this.defaultGraph)),this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"predicate"),O,this.defaultGraph)),this.push(this.dataFactory.quad(Q,this.dataFactory.namedNode(_.RDF+"object"),B,this.defaultGraph)))}claimNodeId(j){if(!this.allowDuplicateRdfIds){if(this.nodeIds[j.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${j.value}'.`);this.nodeIds[j.value]=!0}}onText(j){const O=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;O&&(O.childrenStringTags?O.childrenStringTags.push(j):O.predicate&&(O.text=j))}onCloseTag(){const j=this.activeTagStack.pop();if(j.childrenStringEmitClosingTag&&j.childrenStringTags.push(j.childrenStringEmitClosingTag),j.childrenTagsToString&&(j.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),j.text=j.childrenStringTags.join(""),j.hadChildren=!1),j.childrenCollectionSubject)this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),j.reifiedStatementId);else if(j.predicate)if(j.hadChildren||j.childrenParseType===v.PROPERTY){if(!j.predicateEmitted){const O=this.dataFactory.blankNode();this.emitTriple(j.subject,j.predicate,O,j.reifiedStatementId);for(let B=0;B<j.predicateSubPredicates.length;B++)this.emitTriple(O,j.predicateSubPredicates[B],j.predicateSubObjects[B],null)}}else this.emitTriple(j.subject,j.predicate,this.dataFactory.literal(j.text||"",j.datatype||j.language),j.reifiedStatementId)}onDoctype(j){j.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(O,B,Q)=>(this.saxStream._parser.ENTITIES[B]=Q,""))}}var v,T;q.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(T=v=q.ParseType||(q.ParseType={}))[T.RESOURCE=0]="RESOURCE",T[T.PROPERTY=1]="PROPERTY"},9987:(ee,q,g)=>{"use strict";const{SymbolDispose:C}=g(6305),{AbortError:b,codes:D}=g(4370),{isNodeStream:S,isWebStream:k,kControllerErrorFunction:_}=g(5428),v=g(4618),{ERR_INVALID_ARG_TYPE:T}=D;let j;ee.exports.addAbortSignal=function(Q,A){if(((B,Q)=>{if("object"!=typeof B||!("aborted"in B))throw new T("signal","AbortSignal",B)})(Q),!S(A)&&!k(A))throw new T("stream",["ReadableStream","WritableStream","Stream"],A);return ee.exports.addAbortSignalNoValidate(Q,A)},ee.exports.addAbortSignalNoValidate=function(B,Q){if("object"!=typeof B||!("aborted"in B))return Q;const A=S(Q)?()=>{Q.destroy(new b(void 0,{cause:B.reason}))}:()=>{Q[_](new b(void 0,{cause:B.reason}))};if(B.aborted)A();else{j=j||g(2656).addAbortListener;const L=j(B,A);v(Q,L[C])}return Q}},2960:(ee,q,g)=>{"use strict";const{StringPrototypeSlice:C,SymbolIterator:b,TypedArrayPrototypeSet:D,Uint8Array:S}=g(6305),{Buffer:k}=g(1657),{inspect:_}=g(2656);ee.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(T){const j={data:T,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length}unshift(T){const j={data:T,next:this.head};0===this.length&&(this.tail=j),this.head=j,++this.length}shift(){if(0===this.length)return;const T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}clear(){this.head=this.tail=null,this.length=0}join(T){if(0===this.length)return"";let j=this.head,O=""+j.data;for(;null!==(j=j.next);)O+=T+j.data;return O}concat(T){if(0===this.length)return k.alloc(0);const j=k.allocUnsafe(T>>>0);let O=this.head,B=0;for(;O;)D(j,O.data,B),B+=O.data.length,O=O.next;return j}consume(T,j){const O=this.head.data;if(T<O.length){const B=O.slice(0,T);return this.head.data=O.slice(T),B}return T===O.length?this.shift():j?this._getString(T):this._getBuffer(T)}first(){return this.head.data}*[b](){for(let T=this.head;T;T=T.next)yield T.data}_getString(T){let j="",O=this.head,B=0;do{const Q=O.data;if(!(T>Q.length)){T===Q.length?(j+=Q,++B,this.head=O.next?O.next:this.tail=null):(j+=C(Q,0,T),this.head=O,O.data=C(Q,T));break}j+=Q,T-=Q.length,++B}while(null!==(O=O.next));return this.length-=B,j}_getBuffer(T){const j=k.allocUnsafe(T),O=T;let B=this.head,Q=0;do{const A=B.data;if(!(T>A.length)){T===A.length?(D(j,A,O-T),++Q,this.head=B.next?B.next:this.tail=null):(D(j,new S(A.buffer,A.byteOffset,T),O-T),this.head=B,B.data=A.slice(T));break}D(j,A,O-T),T-=A.length,++Q}while(null!==(B=B.next));return this.length-=Q,j}[Symbol.for("nodejs.util.inspect.custom")](T,j){return _(this,{...j,depth:0,customInspect:!1})}}},7721:(ee,q,g)=>{"use strict";var C=g(7156).default;const{pipeline:b}=g(4514),D=g(5931),{destroyer:S}=g(5601),{isNodeStream:k,isReadable:_,isWritable:v,isWebStream:T,isTransformStream:j,isWritableStream:O,isReadableStream:B}=g(5428),{AbortError:Q,codes:{ERR_INVALID_ARG_VALUE:A,ERR_MISSING_ARGS:L}}=g(4370),ae=g(4618);ee.exports=function(...J){if(0===J.length)throw new L("streams");if(1===J.length)return D.from(J[0]);const Z=[...J];if("function"==typeof J[0]&&(J[0]=D.from(J[0])),"function"==typeof J[J.length-1]){const ke=J.length-1;J[ke]=D.from(J[ke])}for(let ke=0;ke<J.length;++ke)if(k(J[ke])||T(J[ke])){if(ke<J.length-1&&!(_(J[ke])||B(J[ke])||j(J[ke])))throw new A(`streams[${ke}]`,Z[ke],"must be readable");if(ke>0&&!(v(J[ke])||O(J[ke])||j(J[ke])))throw new A(`streams[${ke}]`,Z[ke],"must be writable")}let W,z,x,N,R;const G=J[0],Te=b(J,function le(ke){const Ne=N;N=null,Ne?Ne(ke):ke?R.destroy(ke):!be&&!ce&&R.destroy()}),ce=!!(v(G)||O(G)||j(G)),be=!!(_(Te)||B(Te)||j(Te));if(R=new D({writableObjectMode:!(null==G||!G.writableObjectMode),readableObjectMode:!(null==Te||!Te.readableObjectMode),writable:ce,readable:be}),ce){if(k(G))R._write=function(Ne,Ze,Ke){G.write(Ne,Ze)?Ke():W=Ke},R._final=function(Ne){G.end(),z=Ne},G.on("drain",function(){if(W){const Ne=W;W=null,Ne()}});else if(T(G)){const Ze=(j(G)?G.writable:G).getWriter();R._write=function(){var Ke=C(function*(Me,ze,Ce){try{yield Ze.ready,Ze.write(Me).catch(()=>{}),Ce()}catch(je){Ce(je)}});return function(Me,ze,Ce){return Ke.apply(this,arguments)}}(),R._final=function(){var Ke=C(function*(Me){try{yield Ze.ready,Ze.close().catch(()=>{}),z=Me}catch(ze){Me(ze)}});return function(Me){return Ke.apply(this,arguments)}}()}const ke=j(Te)?Te.readable:Te;ae(ke,()=>{if(z){const Ne=z;z=null,Ne()}})}if(be)if(k(Te))Te.on("readable",function(){if(x){const ke=x;x=null,ke()}}),Te.on("end",function(){R.push(null)}),R._read=function(){for(;;){const ke=Te.read();if(null===ke)return void(x=R._read);if(!R.push(ke))return}};else if(T(Te)){const Ne=(j(Te)?Te.readable:Te).getReader();R._read=C(function*(){for(;;)try{const{value:Ze,done:Ke}=yield Ne.read();if(!R.push(Ze))return;if(Ke)return void R.push(null)}catch{return}})}return R._destroy=function(ke,Ne){!ke&&null!==N&&(ke=new Q),x=null,W=null,z=null,null===N?Ne(ke):(N=Ne,k(Te)&&S(Te,ke))},R}},5601:(ee,q,g)=>{"use strict";const C=g(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:D},AbortError:S}=g(4370),{Symbol:k}=g(6305),{kIsDestroyed:_,isDestroyed:v,isFinished:T,isServerRequest:j}=g(5428),O=k("kDestroy"),B=k("kConstruct");function Q(ce,be,ke){ce&&(be&&!be.errored&&(be.errored=ce),ke&&!ke.errored&&(ke.errored=ce))}function L(ce,be,ke){let Ne=!1;function Ze(Ke){if(Ne)return;Ne=!0;const Me=ce._readableState,ze=ce._writableState;Q(Ke,ze,Me),ze&&(ze.closed=!0),Me&&(Me.closed=!0),"function"==typeof ke&&ke(Ke),Ke?C.nextTick(ae,ce,Ke):C.nextTick(X,ce)}try{ce._destroy(be||null,Ze)}catch(Ke){Ze(Ke)}}function ae(ce,be){J(ce,be),X(ce)}function X(ce){const be=ce._readableState,ke=ce._writableState;ke&&(ke.closeEmitted=!0),be&&(be.closeEmitted=!0),(null!=ke&&ke.emitClose||null!=be&&be.emitClose)&&ce.emit("close")}function J(ce,be){const ke=ce._readableState,Ne=ce._writableState;null!=Ne&&Ne.errorEmitted||null!=ke&&ke.errorEmitted||(Ne&&(Ne.errorEmitted=!0),ke&&(ke.errorEmitted=!0),ce.emit("error",be))}function W(ce,be,ke){const Ne=ce._readableState,Ze=ce._writableState;if(null!=Ze&&Ze.destroyed||null!=Ne&&Ne.destroyed)return this;null!=Ne&&Ne.autoDestroy||null!=Ze&&Ze.autoDestroy?ce.destroy(be):be&&(Ze&&!Ze.errored&&(Ze.errored=be),Ne&&!Ne.errored&&(Ne.errored=be),ke?C.nextTick(J,ce,be):J(ce,be))}function x(ce){let be=!1;function ke(Ne){if(be)return void W(ce,Ne??new D);be=!0;const Ze=ce._readableState,Ke=ce._writableState,Me=Ke||Ze;Ze&&(Ze.constructed=!0),Ke&&(Ke.constructed=!0),Me.destroyed?ce.emit(O,Ne):Ne?W(ce,Ne,!0):C.nextTick(N,ce)}try{ce._construct(Ne=>{C.nextTick(ke,Ne)})}catch(Ne){C.nextTick(ke,Ne)}}function N(ce){ce.emit(B)}function R(ce){return ce?.setHeader&&"function"==typeof ce.abort}function le(ce){ce.emit("close")}function G(ce,be){ce.emit("error",be),C.nextTick(le,ce)}ee.exports={construct:function z(ce,be){if("function"!=typeof ce._construct)return;const ke=ce._readableState,Ne=ce._writableState;ke&&(ke.constructed=!1),Ne&&(Ne.constructed=!1),ce.once(B,be),!(ce.listenerCount(B)>1)&&C.nextTick(x,ce)},destroyer:function Te(ce,be){!ce||v(ce)||(!be&&!T(ce)&&(be=new S),j(ce)?(ce.socket=null,ce.destroy(be)):R(ce)?ce.abort():R(ce.req)?ce.req.abort():"function"==typeof ce.destroy?ce.destroy(be):"function"==typeof ce.close?ce.close():be?C.nextTick(G,ce,be):C.nextTick(le,ce),ce.destroyed||(ce[_]=!0))},destroy:function A(ce,be){const ke=this._readableState,Ne=this._writableState,Ze=Ne||ke;return null!=Ne&&Ne.destroyed||null!=ke&&ke.destroyed?("function"==typeof be&&be(),this):(Q(ce,Ne,ke),Ne&&(Ne.destroyed=!0),ke&&(ke.destroyed=!0),Ze.constructed?L(this,ce,be):this.once(O,function(Ke){L(this,b(Ke,ce),be)}),this)},undestroy:function Z(){const ce=this._readableState,be=this._writableState;ce&&(ce.constructed=!0,ce.closed=!1,ce.closeEmitted=!1,ce.destroyed=!1,ce.errored=null,ce.errorEmitted=!1,ce.reading=!1,ce.ended=!1===ce.readable,ce.endEmitted=!1===ce.readable),be&&(be.constructed=!0,be.destroyed=!1,be.closed=!1,be.closeEmitted=!1,be.errored=null,be.errorEmitted=!1,be.finalCalled=!1,be.prefinished=!1,be.ended=!1===be.writable,be.ending=!1===be.writable,be.finished=!1===be.writable)},errorOrDestroy:W}},5931:(ee,q,g)=>{"use strict";const{ObjectDefineProperties:C,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:D,ObjectSetPrototypeOf:S}=g(6305);ee.exports=v;const k=g(8383),_=g(9764);S(v.prototype,k.prototype),S(v,k);{const B=D(_.prototype);for(let Q=0;Q<B.length;Q++){const A=B[Q];v.prototype[A]||(v.prototype[A]=_.prototype[A])}}function v(B){if(!(this instanceof v))return new v(B);k.call(this,B),_.call(this,B),B?(this.allowHalfOpen=!1!==B.allowHalfOpen,!1===B.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===B.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let T,O;function j(){return void 0===T&&(T={}),T}C(v.prototype,{writable:{__proto__:null,...b(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(_.prototype,"writableLength")},writableFinished:{__proto__:null,...b(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(B){this._readableState&&this._writableState&&(this._readableState.destroyed=B,this._writableState.destroyed=B)}}}),v.fromWeb=function(B,Q){return j().newStreamDuplexFromReadableWritablePair(B,Q)},v.toWeb=function(B){return j().newReadableWritablePairFromDuplex(B)},v.from=function(B){return O||(O=g(8078)),O(B,"body")}},8078:(ee,q,g)=>{var C=g(7156).default,b=g(6737).default,D=g(8186).default;const S=g(42),k=g(1657),{isReadable:_,isWritable:v,isIterable:T,isNodeStream:j,isReadableNodeStream:O,isWritableNodeStream:B,isDuplexNodeStream:Q,isReadableStream:A,isWritableStream:L}=g(5428),ae=g(4618),{AbortError:X,codes:{ERR_INVALID_ARG_TYPE:J,ERR_INVALID_RETURN_VALUE:Z}}=g(4370),{destroyer:W}=g(5601),z=g(5931),x=g(8383),N=g(9764),{createDeferredPromise:R}=g(2656),le=g(55),G=globalThis.Blob||k.Blob,Te=typeof G<"u"?function(Me){return Me instanceof G}:function(Me){return!1},ce=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:be}=g(6305);class ke extends z{constructor(Me){super(Me),!1===Me?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Me?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Ze(Ke){const Me=Ke.readable&&"function"!=typeof Ke.readable.read?x.wrap(Ke.readable):Ke.readable,ze=Ke.writable;let he,Se,tt,ft,qe,Ce=!!_(Me),je=!!v(ze);function me(F){const I=ft;ft=null,I?I(F):F&&qe.destroy(F)}return qe=new ke({readableObjectMode:!(null==Me||!Me.readableObjectMode),writableObjectMode:!(null==ze||!ze.writableObjectMode),readable:Ce,writable:je}),je&&(ae(ze,F=>{je=!1,F&&W(Me,F),me(F)}),qe._write=function(F,I,se){ze.write(F,I)?se():he=se},qe._final=function(F){ze.end(),Se=F},ze.on("drain",function(){if(he){const F=he;he=null,F()}}),ze.on("finish",function(){if(Se){const F=Se;Se=null,F()}})),Ce&&(ae(Me,F=>{Ce=!1,F&&W(Me,F),me(F)}),Me.on("readable",function(){if(tt){const F=tt;tt=null,F()}}),Me.on("end",function(){qe.push(null)}),qe._read=function(){for(;;){const F=Me.read();if(null===F)return void(tt=qe._read);if(!qe.push(F))return}}),qe._destroy=function(F,I){!F&&null!==ft&&(F=new X),tt=null,he=null,Se=null,null===ft?I(F):(ft=I,W(ze,F),W(Me,F))},qe}ee.exports=function Ke(Me,ze){if(Q(Me))return Me;if(O(Me))return Ze({readable:Me});if(B(Me))return Ze({writable:Me});if(j(Me))return Ze({writable:!1,readable:!1});if(A(Me))return Ze({readable:x.fromWeb(Me)});if(L(Me))return Ze({writable:N.fromWeb(Me)});if("function"==typeof Me){const{value:je,write:he,final:Se,destroy:tt}=function Ne(Ke){let{promise:Me,resolve:ze}=R();const Ce=new ce,je=Ce.signal;return{value:Ke(D(function*(){for(;;){const Se=Me;Me=null;const{chunk:tt,done:ft,cb:qe}=yield b(Se);if(S.nextTick(qe),ft)return;if(je.aborted)throw new X(void 0,{cause:je.reason});({promise:Me,resolve:ze}=R()),yield tt}})(),{signal:je}),write(Se,tt,ft){const qe=ze;ze=null,qe({chunk:Se,done:!1,cb:ft})},final(Se){const tt=ze;ze=null,tt({done:!0,cb:Se})},destroy(Se,tt){Ce.abort(),tt(Se)}}}(Me);if(T(je))return le(ke,je,{objectMode:!0,write:he,final:Se,destroy:tt});const ft=je?.then;if("function"==typeof ft){let qe;const me=be(ft,je,F=>{if(null!=F)throw new Z("nully","body",F)},F=>{W(qe,F)});return qe=new ke({objectMode:!0,readable:!1,write:he,final(F){Se(C(function*(){try{yield me,S.nextTick(F,null)}catch(I){S.nextTick(F,I)}}))},destroy:tt})}throw new Z("Iterable, AsyncIterable or AsyncFunction",ze,je)}if(Te(Me))return Ke(Me.arrayBuffer());if(T(Me))return le(ke,Me,{objectMode:!0,writable:!1});if(A(Me?.readable)&&L(Me?.writable))return ke.fromWeb(Me);if("object"==typeof Me?.writable||"object"==typeof Me?.readable)return Ze({readable:null!=Me&&Me.readable?O(Me?.readable)?Me?.readable:Ke(Me.readable):void 0,writable:null!=Me&&Me.writable?B(Me?.writable)?Me?.writable:Ke(Me.writable):void 0});const Ce=Me?.then;if("function"==typeof Ce){let je;return be(Ce,Me,he=>{null!=he&&je.push(he),je.push(null)},he=>{W(je,he)}),je=new ke({objectMode:!0,writable:!1,read(){}})}throw new J(ze,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Me)}},4618:(ee,q,g)=>{const C=g(42),{AbortError:b,codes:D}=g(4370),{ERR_INVALID_ARG_TYPE:S,ERR_STREAM_PREMATURE_CLOSE:k}=D,{kEmptyObject:_,once:v}=g(2656),{validateAbortSignal:T,validateFunction:j,validateObject:O,validateBoolean:B}=g(2120),{Promise:Q,PromisePrototypeThen:A,SymbolDispose:L}=g(6305),{isClosed:ae,isReadable:X,isReadableNodeStream:J,isReadableStream:Z,isReadableFinished:W,isReadableErrored:z,isWritable:x,isWritableNodeStream:N,isWritableStream:R,isWritableFinished:le,isWritableErrored:G,isNodeStream:Te,willEmitClose:ce,kIsClosedPromise:be}=g(5428);let ke;const Ze=()=>{};function Ke(Ce,je,he){var Se,tt;if(2===arguments.length?(he=je,je=_):null==je?je=_:O(je,"options"),j(he,"callback"),T(je.signal,"options.signal"),he=v(he),Z(Ce)||R(Ce))return function Me(Ce,je,he){let Se=!1,tt=Ze;if(je.signal)if(tt=()=>{Se=!0,he.call(Ce,new b(void 0,{cause:je.signal.reason}))},je.signal.aborted)C.nextTick(tt);else{ke=ke||g(2656).addAbortListener;const qe=ke(je.signal,tt),me=he;he=v((...F)=>{qe[L](),me.apply(Ce,F)})}const ft=(...qe)=>{Se||C.nextTick(()=>he.apply(Ce,qe))};return A(Ce[be].promise,ft,ft),Ze}(Ce,je,he);if(!Te(Ce))throw new S("stream",["ReadableStream","WritableStream","Stream"],Ce);const ft=null!==(Se=je.readable)&&void 0!==Se?Se:J(Ce),qe=null!==(tt=je.writable)&&void 0!==tt?tt:N(Ce),me=Ce._writableState,F=Ce._readableState,I=()=>{Ce.writable||He()};let se=ce(Ce)&&J(Ce)===ft&&N(Ce)===qe,ie=le(Ce,!1);const He=()=>{ie=!0,Ce.destroyed&&(se=!1),(!se||Ce.readable&&!ft)&&(!ft||Je)&&he.call(Ce)};let Je=W(Ce,!1);const fe=()=>{Je=!0,Ce.destroyed&&(se=!1),(!se||Ce.writable&&!qe)&&(!qe||ie)&&he.call(Ce)},re=ye=>{he.call(Ce,ye)};let $=ae(Ce);const P=()=>{$=!0;const ye=G(Ce)||z(Ce);return ye&&"boolean"!=typeof ye?he.call(Ce,ye):ft&&!Je&&J(Ce,!0)&&!W(Ce,!1)?he.call(Ce,new k):!qe||ie||le(Ce,!1)?void he.call(Ce):he.call(Ce,new k)},U=()=>{$=!0;const ye=G(Ce)||z(Ce);if(ye&&"boolean"!=typeof ye)return he.call(Ce,ye);he.call(Ce)},pe=()=>{Ce.req.on("finish",He)};!function Ne(Ce){return Ce.setHeader&&"function"==typeof Ce.abort}(Ce)?qe&&!me&&(Ce.on("end",I),Ce.on("close",I)):(Ce.on("complete",He),se||Ce.on("abort",P),Ce.req?pe():Ce.on("request",pe)),!se&&"boolean"==typeof Ce.aborted&&Ce.on("aborted",P),Ce.on("end",fe),Ce.on("finish",He),!1!==je.error&&Ce.on("error",re),Ce.on("close",P),$?C.nextTick(P):null!=me&&me.errorEmitted||null!=F&&F.errorEmitted?se||C.nextTick(U):(!ft&&(!se||X(Ce))&&(ie||!1===x(Ce))||!qe&&(!se||x(Ce))&&(Je||!1===X(Ce))||F&&Ce.req&&Ce.aborted)&&C.nextTick(U);const $e=()=>{he=Ze,Ce.removeListener("aborted",P),Ce.removeListener("complete",He),Ce.removeListener("abort",P),Ce.removeListener("request",pe),Ce.req&&Ce.req.removeListener("finish",He),Ce.removeListener("end",I),Ce.removeListener("close",I),Ce.removeListener("finish",He),Ce.removeListener("end",fe),Ce.removeListener("error",re),Ce.removeListener("close",P)};if(je.signal&&!$){const ye=()=>{const Ve=he;$e(),Ve.call(Ce,new b(void 0,{cause:je.signal.reason}))};if(je.signal.aborted)C.nextTick(ye);else{ke=ke||g(2656).addAbortListener;const Ve=ke(je.signal,ye),rt=he;he=v((..._t)=>{Ve[L](),rt.apply(Ce,_t)})}}return $e}ee.exports=Ke,ee.exports.finished=function ze(Ce,je){var he;let Se=!1;return null===je&&(je=_),null!==(he=je)&&void 0!==he&&he.cleanup&&(B(je.cleanup,"cleanup"),Se=je.cleanup),new Q((tt,ft)=>{const qe=Ke(Ce,je,me=>{Se&&qe(),me?ft(me):tt()})})}},55:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(42),{PromisePrototypeThen:D,SymbolAsyncIterator:S,SymbolIterator:k}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:v,ERR_STREAM_NULL_VALUES:T}=g(4370).codes;ee.exports=function j(O,B,Q){let A,L;if("string"==typeof B||B instanceof _)return new O({objectMode:!0,...Q,read(){this.push(B),this.push(null)}});if(B&&B[S])L=!0,A=B[S]();else{if(!B||!B[k])throw new v("iterable",["Iterable"],B);L=!1,A=B[k]()}const ae=new O({objectMode:!0,highWaterMark:1,...Q});let X=!1;function Z(){return(Z=C(function*(x){if(null!=x&&"function"==typeof A.throw){const{value:le,done:G}=yield A.throw(x);if(yield le,G)return}if("function"==typeof A.return){const{value:le}=yield A.return();yield le}})).apply(this,arguments)}function z(){return(z=C(function*(){for(;;){try{const{value:x,done:N}=L?yield A.next():A.next();if(N)ae.push(null);else{const R=x&&"function"==typeof x.then?yield x:x;if(null===R)throw X=!1,new T;if(ae.push(R))continue;X=!1}}catch(x){ae.destroy(x)}break}})).apply(this,arguments)}return ae._read=function(){X||(X=!0,function W(){z.apply(this,arguments)}())},ae._destroy=function(x,N){D(function J(x){return Z.apply(this,arguments)}(x),()=>b.nextTick(N,x),R=>b.nextTick(N,R||x))},ae}},900:(ee,q,g)=>{"use strict";const{ArrayIsArray:C,ObjectSetPrototypeOf:b}=g(6305),{EventEmitter:D}=g(2016);function S(_){D.call(this,_)}function k(_,v,T){if("function"==typeof _.prependListener)return _.prependListener(v,T);_._events&&_._events[v]?C(_._events[v])?_._events[v].unshift(T):_._events[v]=[T,_._events[v]]:_.on(v,T)}b(S.prototype,D.prototype),b(S,D),S.prototype.pipe=function(_,v){const T=this;function j(X){_.writable&&!1===_.write(X)&&T.pause&&T.pause()}function O(){T.readable&&T.resume&&T.resume()}T.on("data",j),_.on("drain",O),!_._isStdio&&(!v||!1!==v.end)&&(T.on("end",Q),T.on("close",A));let B=!1;function Q(){B||(B=!0,_.end())}function A(){B||(B=!0,"function"==typeof _.destroy&&_.destroy())}function L(X){ae(),0===D.listenerCount(this,"error")&&this.emit("error",X)}function ae(){T.removeListener("data",j),_.removeListener("drain",O),T.removeListener("end",Q),T.removeListener("close",A),T.removeListener("error",L),_.removeListener("error",L),T.removeListener("end",ae),T.removeListener("close",ae),_.removeListener("close",ae)}return k(T,"error",L),k(_,"error",L),T.on("end",ae),T.on("close",ae),_.on("close",ae),_.emit("pipe",T),_},ee.exports={Stream:S,prependListener:k}},7624:(ee,q,g)=>{"use strict";var C=g(7156).default,b=g(8131).default,D=g(8237).default,S=g(6737).default,k=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:v,ERR_INVALID_ARG_TYPE:T,ERR_MISSING_ARGS:j,ERR_OUT_OF_RANGE:O},AbortError:B}=g(4370),{validateAbortSignal:Q,validateInteger:A,validateObject:L}=g(2120),ae=g(6305).Symbol("kWeak"),X=g(6305).Symbol("kResistStopPropagation"),{finished:J}=g(4618),Z=g(7721),{addAbortSignalNoValidate:W}=g(9987),{isWritable:z,isNodeStream:x}=g(5428),{deprecate:N}=g(2656),{ArrayPrototypePush:R,Boolean:le,MathFloor:G,Number:Te,NumberIsNaN:ce,Promise:be,PromiseReject:ke,PromiseResolve:Ne,PromisePrototypeThen:Ze,Symbol:Ke}=g(6305),Me=Ke("kEmpty"),ze=Ke("kEof");function je(ye,Ve){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);null!=Ve&&L(Ve,"options"),null!=Ve?.signal&&Q(Ve.signal,"options.signal");let rt=1;null!=Ve?.concurrency&&(rt=G(Ve.concurrency));let _t=rt-1;return null!=Ve?.highWaterMark&&(_t=G(Ve.highWaterMark)),A(rt,"options.concurrency",1),A(_t,"options.highWaterMark",0),_t+=rt,function(){var At=k(function*(){const Xt=g(2656).AbortSignalAny([Ve?.signal].filter(le)),ge=this,Y=[],oe={signal:Xt};let Le,et,ct=!1,Et=0;function sn(){ct=!0,Bn()}function Bn(){Et-=1,Hn()}function Hn(){et&&!ct&&Et<rt&&Y.length<_t&&(et(),et=null)}function jn(){return(jn=C(function*(){try{var mr,Yi=!1,ra=!1;try{for(var Bo,Lo=D(ge);Yi=!(Bo=yield Lo.next()).done;Yi=!1){let zi=Bo.value;if(ct)return;if(Xt.aborted)throw new B;try{if(zi=ye(zi,oe),zi===Me)continue;zi=Ne(zi)}catch(jo){zi=ke(jo)}Et+=1,Ze(zi,Bn,sn),Y.push(zi),Le&&(Le(),Le=null),!ct&&(Y.length>=_t||Et>=rt)&&(yield new be(jo=>{et=jo}))}}catch(zi){ra=!0,mr=zi}finally{try{Yi&&null!=Lo.return&&(yield Lo.return())}finally{if(ra)throw mr}}Y.push(ze)}catch(zi){const jo=ke(zi);Ze(jo,Bn,sn),Y.push(jo)}finally{ct=!0,Le&&(Le(),Le=null)}})).apply(this,arguments)}!function Tn(){jn.apply(this,arguments)}();try{for(;;){for(;Y.length>0;){const Yi=yield S(Y[0]);if(Yi===ze)return;if(Xt.aborted)throw new B;Yi!==Me&&(yield Yi),Y.shift(),Hn()}yield S(new be(Yi=>{Le=Yi}))}}finally{ct=!0,et&&(et(),et=null)}});return function wt(){return At.apply(this,arguments)}}().call(this)}function Se(ye){return tt.apply(this,arguments)}function tt(){return(tt=C(function*(ye,Ve=void 0){var At,rt=!1,_t=!1;try{for(var wt=D(ie.call(this,ye,Ve));rt=!(yield wt.next()).done;rt=!1)return!0}catch(ge){_t=!0,At=ge}finally{try{rt&&null!=wt.return&&(yield wt.return())}finally{if(_t)throw At}}return!1})).apply(this,arguments)}function qe(){return(qe=C(function*(ye,Ve=void 0){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);return!(yield Se.call(this,C(function*(...rt){return!(yield ye(...rt))}),Ve))})).apply(this,arguments)}function F(){return(F=C(function*(ye,Ve){var At,rt=!1,_t=!1;try{for(var Xt,wt=D(ie.call(this,ye,Ve));rt=!(Xt=yield wt.next()).done;rt=!1)return Xt.value}catch(ge){_t=!0,At=ge}finally{try{rt&&null!=wt.return&&(yield wt.return())}finally{if(_t)throw At}}})).apply(this,arguments)}function se(){return se=C(function*(ye,Ve){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);function _t(){return(_t=C(function*(oe,Le){return yield ye(oe,Le),Me})).apply(this,arguments)}var Xt,At=!1,wt=!1;try{for(var ge=D(je.call(this,function rt(oe,Le){return _t.apply(this,arguments)},Ve));At=!(yield ge.next()).done;At=!1);}catch(oe){wt=!0,Xt=oe}finally{try{At&&null!=ge.return&&(yield ge.return())}finally{if(wt)throw Xt}}}),se.apply(this,arguments)}function ie(ye,Ve){if("function"!=typeof ye)throw new T("fn",["Function","AsyncFunction"],ye);function _t(){return(_t=C(function*(At,wt){return(yield ye(At,wt))?At:Me})).apply(this,arguments)}return je.call(this,function rt(At,wt){return _t.apply(this,arguments)},Ve)}class He extends j{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function fe(){return fe=C(function*(ye,Ve,rt){var _t;if("function"!=typeof ye)throw new T("reducer",["Function","AsyncFunction"],ye);null!=rt&&L(rt,"options"),null!=rt?.signal&&Q(rt.signal,"options.signal");let At=arguments.length>1;if(null!=rt&&null!==(_t=rt.signal)&&void 0!==_t&&_t.aborted){const sn=new B(void 0,{cause:rt.signal.reason});throw this.once("error",()=>{}),yield J(this.destroy(sn)),sn}const wt=new _,Xt=wt.signal;null!=rt&&rt.signal&&rt.signal.addEventListener("abort",()=>wt.abort(),{once:!0,[ae]:this,[X]:!0});let ge=!1;try{var Le,Y=!1,oe=!1;try{for(var ct,et=D(this);Y=!(ct=yield et.next()).done;Y=!1){const sn=ct.value;var Et;if(ge=!0,null!=rt&&null!==(Et=rt.signal)&&void 0!==Et&&Et.aborted)throw new B;At?Ve=yield ye(Ve,sn,{signal:Xt}):(Ve=sn,At=!0)}}catch(sn){oe=!0,Le=sn}finally{try{Y&&null!=et.return&&(yield et.return())}finally{if(oe)throw Le}}if(!ge&&!At)throw new He}finally{wt.abort()}return Ve}),fe.apply(this,arguments)}function $(){return($=C(function*(ye){null!=ye&&L(ye,"options"),null!=ye?.signal&&Q(ye.signal,"options.signal");const Ve=[];var At,rt=!1,_t=!1;try{for(var Xt,wt=D(this);rt=!(Xt=yield wt.next()).done;rt=!1){const Y=Xt.value;var ge;if(null!=ye&&null!==(ge=ye.signal)&&void 0!==ge&&ge.aborted)throw new B(void 0,{cause:ye.signal.reason});R(Ve,Y)}}catch(Y){_t=!0,At=Y}finally{try{rt&&null!=wt.return&&(yield wt.return())}finally{if(_t)throw At}}return Ve})).apply(this,arguments)}function U(ye){if(ye=Te(ye),ce(ye))return 0;if(ye<0)throw new O("number",">= 0",ye);return ye}ee.exports.streamReturningOperators={asIndexedPairs:N(function he(ye=void 0){return null!=ye&&L(ye,"options"),null!=ye?.signal&&Q(ye.signal,"options.signal"),function(){var Ve=k(function*(){let _t=0;var Xt,At=!1,wt=!1;try{for(var Y,ge=D(this);At=!(Y=yield S(ge.next())).done;At=!1){const Le=Y.value;var oe;if(null!=ye&&null!==(oe=ye.signal)&&void 0!==oe&&oe.aborted)throw new B({cause:ye.signal.reason});yield[_t++,Le]}}catch(Le){wt=!0,Xt=Le}finally{try{At&&null!=ge.return&&(yield S(ge.return()))}finally{if(wt)throw Xt}}});return function rt(){return Ve.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function pe(ye,Ve=void 0){return null!=Ve&&L(Ve,"options"),null!=Ve?.signal&&Q(Ve.signal,"options.signal"),ye=U(ye),function(){var rt=k(function*(){var At;if(null!=Ve&&null!==(At=Ve.signal)&&void 0!==At&&At.aborted)throw new B;var ge,wt=!1,Xt=!1;try{for(var oe,Y=D(this);wt=!(oe=yield S(Y.next())).done;wt=!1){const et=oe.value;var Le;if(null!=Ve&&null!==(Le=Ve.signal)&&void 0!==Le&&Le.aborted)throw new B;ye--<=0&&(yield et)}}catch(et){Xt=!0,ge=et}finally{try{wt&&null!=Y.return&&(yield S(Y.return()))}finally{if(Xt)throw ge}}});return function _t(){return rt.apply(this,arguments)}}().call(this)},filter:ie,flatMap:function P(ye,Ve){const rt=je.call(this,ye,Ve);return function(){var _t=k(function*(){var ge,wt=!1,Xt=!1;try{for(var oe,Y=D(rt);wt=!(oe=yield S(Y.next())).done;wt=!1){const Le=oe.value;yield*b(D(Le),S)}}catch(Le){Xt=!0,ge=Le}finally{try{wt&&null!=Y.return&&(yield S(Y.return()))}finally{if(Xt)throw ge}}});return function At(){return _t.apply(this,arguments)}}().call(this)},map:je,take:function $e(ye,Ve=void 0){return null!=Ve&&L(Ve,"options"),null!=Ve?.signal&&Q(Ve.signal,"options.signal"),ye=U(ye),function(){var rt=k(function*(){var At;if(null!=Ve&&null!==(At=Ve.signal)&&void 0!==At&&At.aborted)throw new B;var ge,wt=!1,Xt=!1;try{for(var oe,Y=D(this);wt=!(oe=yield S(Y.next())).done;wt=!1){const et=oe.value;var Le;if(null!=Ve&&null!==(Le=Ve.signal)&&void 0!==Le&&Le.aborted)throw new B;if(ye-- >0&&(yield et),ye<=0)return}}catch(et){Xt=!0,ge=et}finally{try{wt&&null!=Y.return&&(yield S(Y.return()))}finally{if(Xt)throw ge}}});return function _t(){return rt.apply(this,arguments)}}().call(this)},compose:function Ce(ye,Ve){if(null!=Ve&&L(Ve,"options"),null!=Ve?.signal&&Q(Ve.signal,"options.signal"),x(ye)&&!z(ye))throw new v("stream",ye,"must be writable");const rt=Z(this,ye);return null!=Ve&&Ve.signal&&W(Ve.signal,rt),rt}},ee.exports.promiseReturningOperators={every:function ft(ye){return qe.apply(this,arguments)},forEach:function I(ye,Ve){return se.apply(this,arguments)},reduce:function Je(ye,Ve,rt){return fe.apply(this,arguments)},toArray:function re(ye){return $.apply(this,arguments)},some:Se,find:function me(ye,Ve){return F.apply(this,arguments)}}},6973:(ee,q,g)=>{"use strict";const{ObjectSetPrototypeOf:C}=g(6305);ee.exports=D;const b=g(123);function D(S){if(!(this instanceof D))return new D(S);b.call(this,S)}C(D.prototype,b.prototype),C(D,b),D.prototype._transform=function(S,k,_){_(null,S)}},4514:(ee,q,g)=>{var C=g(7156).default,b=g(8186).default,D=g(6737).default,S=g(8131).default,k=g(8237).default;const _=g(42),{ArrayIsArray:v,Promise:T,SymbolAsyncIterator:j,SymbolDispose:O}=g(6305),B=g(4618),{once:Q}=g(2656),A=g(5601),L=g(5931),{aggregateTwoErrors:ae,codes:{ERR_INVALID_ARG_TYPE:X,ERR_INVALID_RETURN_VALUE:J,ERR_MISSING_ARGS:Z,ERR_STREAM_DESTROYED:W,ERR_STREAM_PREMATURE_CLOSE:z},AbortError:x}=g(4370),{validateFunction:N,validateAbortSignal:R}=g(2120),{isIterable:le,isReadable:G,isReadableNodeStream:Te,isNodeStream:ce,isTransformStream:be,isWebStream:ke,isReadableStream:Ne,isReadableFinished:Ze}=g(5428),Ke=globalThis.AbortController||g(3982).AbortController;let Me,ze,Ce;function je(Je,fe,re){let $=!1;return Je.on("close",()=>{$=!0}),{destroy:U=>{$||($=!0,A.destroyer(Je,U||new W("pipe")))},cleanup:B(Je,{readable:fe,writable:re},U=>{$=!U})}}function Se(Je){if(le(Je))return Je;if(Te(Je))return function tt(Je){return ft.apply(this,arguments)}(Je);throw new X("val",["Readable","Iterable","AsyncIterable"],Je)}function ft(){return(ft=b(function*(Je){ze||(ze=g(8383)),yield*S(k(ze.prototype[j].call(Je)),D)})).apply(this,arguments)}function qe(Je,fe,re,$){return me.apply(this,arguments)}function me(){return(me=C(function*(Je,fe,re,{end:$}){let P,U=null;const pe=Xt=>{if(Xt&&(P=Xt),U){const ge=U;U=null,ge()}},$e=()=>new T((Xt,ge)=>{P?ge(P):U=()=>{P?ge(P):Xt()}});fe.on("drain",pe);const ye=B(fe,{readable:!1},pe);try{fe.writableNeedDrain&&(yield $e());var _t,Ve=!1,rt=!1;try{for(var wt,At=k(Je);Ve=!(wt=yield At.next()).done;Ve=!1)fe.write(wt.value)||(yield $e())}catch(Xt){rt=!0,_t=Xt}finally{try{Ve&&null!=At.return&&(yield At.return())}finally{if(rt)throw _t}}$&&(fe.end(),yield $e()),re()}catch(Xt){re(P!==Xt?ae(P,Xt):Xt)}finally{ye(),fe.off("drain",pe)}})).apply(this,arguments)}function F(Je,fe,re,$){return I.apply(this,arguments)}function I(){return(I=C(function*(Je,fe,re,{end:$}){be(fe)&&(fe=fe.writable);const P=fe.getWriter();try{var $e,U=!1,pe=!1;try{for(var Ve,ye=k(Je);U=!(Ve=yield ye.next()).done;U=!1){const rt=Ve.value;yield P.ready,P.write(rt).catch(()=>{})}}catch(rt){pe=!0,$e=rt}finally{try{U&&null!=ye.return&&(yield ye.return())}finally{if(pe)throw $e}}yield P.ready,$&&(yield P.close()),re()}catch(rt){try{yield P.abort(rt),re(rt)}catch(_t){re(_t)}}})).apply(this,arguments)}function ie(Je,fe,re){if(1===Je.length&&v(Je[0])&&(Je=Je[0]),Je.length<2)throw new Z("streams");const $=new Ke,P=$.signal,U=re?.signal,pe=[];function $e(){Xt(new x)}let ye,Ve,rt;R(U,"options.signal"),Ce=Ce||g(2656).addAbortListener,U&&(ye=Ce(U,$e));const _t=[];let ge,At=0;function wt(et){Xt(et,0==--At)}function Xt(et,ct){var Et;if(et&&(!Ve||"ERR_STREAM_PREMATURE_CLOSE"===Ve.code)&&(Ve=et),Ve||ct){for(;_t.length;)_t.shift()(Ve);null===(Et=ye)||void 0===Et||Et[O](),$.abort(),ct&&(Ve||pe.forEach(sn=>sn()),_.nextTick(fe,Ve,rt))}}for(let et=0;et<Je.length;et++){const ct=Je[et],Et=et<Je.length-1,sn=et>0,Bn=Et||!1!==re?.end,Hn=et===Je.length-1;if(ce(ct)){let Tn=function(jn){jn&&"AbortError"!==jn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==jn.code&&wt(jn)};if(Bn){const{destroy:jn,cleanup:Yi}=je(ct,Et,sn);_t.push(jn),G(ct)&&Hn&&pe.push(Yi)}ct.on("error",Tn),G(ct)&&Hn&&pe.push(()=>{ct.removeListener("error",Tn)})}if(0===et)if("function"==typeof ct){if(ge=ct({signal:P}),!le(ge))throw new J("Iterable, AsyncIterable or Stream","source",ge)}else ge=le(ct)||Te(ct)||be(ct)?ct:L.from(ct);else if("function"==typeof ct){var Y;if(ge=be(ge)?Se(null===(Y=ge)||void 0===Y?void 0:Y.readable):Se(ge),ge=ct(ge,{signal:P}),Et){if(!le(ge,!0))throw new J("AsyncIterable",`transform[${et-1}]`,ge)}else{var oe;Me||(Me=g(6973));const Tn=new Me({objectMode:!0}),jn=null===(oe=ge)||void 0===oe?void 0:oe.then;if("function"==typeof jn)At++,jn.call(ge,mr=>{rt=mr,null!=mr&&Tn.write(mr),Bn&&Tn.end(),_.nextTick(wt)},mr=>{Tn.destroy(mr),_.nextTick(wt,mr)});else if(le(ge,!0))At++,qe(ge,Tn,wt,{end:Bn});else{if(!Ne(ge)&&!be(ge))throw new J("AsyncIterable or Promise","destination",ge);At++,qe(ge.readable||ge,Tn,wt,{end:Bn})}ge=Tn;const{destroy:Yi,cleanup:ra}=je(ge,!1,!0);_t.push(Yi),Hn&&pe.push(ra)}}else if(ce(ct)){if(Te(ge)){At+=2;const Tn=He(ge,ct,wt,{end:Bn});G(ct)&&Hn&&pe.push(Tn)}else if(be(ge)||Ne(ge))At++,qe(ge.readable||ge,ct,wt,{end:Bn});else{if(!le(ge))throw new X("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ge);At++,qe(ge,ct,wt,{end:Bn})}ge=ct}else if(ke(ct)){if(Te(ge))At++,F(Se(ge),ct,wt,{end:Bn});else if(Ne(ge)||le(ge))At++,F(ge,ct,wt,{end:Bn});else{if(!be(ge))throw new X("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ge);At++,F(ge.readable,ct,wt,{end:Bn})}ge=ct}else ge=L.from(ct)}return(null!=P&&P.aborted||null!=U&&U.aborted)&&_.nextTick($e),ge}function He(Je,fe,re,{end:$}){let P=!1;if(fe.on("close",()=>{P||re(new z)}),Je.pipe(fe,{end:!1}),$){let pe=function(){P=!0,fe.end()};Ze(Je)?_.nextTick(pe):Je.once("end",pe)}else re();return B(Je,{readable:!0,writable:!1},pe=>{const $e=Je._readableState;pe&&"ERR_STREAM_PREMATURE_CLOSE"===pe.code&&$e&&$e.ended&&!$e.errored&&!$e.errorEmitted?Je.once("end",re).once("error",re):re(pe)}),B(fe,{readable:!1,writable:!0},re)}ee.exports={pipelineImpl:ie,pipeline:function se(...Je){return ie(Je,Q(function he(Je){return N(Je[Je.length-1],"streams[stream.length - 1]"),Je.pop()}(Je)))}}},8383:(ee,q,g)=>{var C=g(6737).default,b=g(8186).default;const D=g(42),{ArrayPrototypeIndexOf:S,NumberIsInteger:k,NumberIsNaN:_,NumberParseInt:v,ObjectDefineProperties:T,ObjectKeys:j,ObjectSetPrototypeOf:O,Promise:B,SafeSet:Q,SymbolAsyncDispose:A,SymbolAsyncIterator:L,Symbol:ae}=g(6305);ee.exports=wt,wt.ReadableState=At;const{EventEmitter:X}=g(2016),{Stream:J,prependListener:Z}=g(900),{Buffer:W}=g(1657),{addAbortSignal:z}=g(9987),x=g(4618);let N=g(2656).debuglog("stream",We=>{N=We});const R=g(2960),le=g(5601),{getHighWaterMark:G,getDefaultHighWaterMark:Te}=g(8782),{aggregateTwoErrors:ce,codes:{ERR_INVALID_ARG_TYPE:be,ERR_METHOD_NOT_IMPLEMENTED:ke,ERR_OUT_OF_RANGE:Ne,ERR_STREAM_PUSH_AFTER_EOF:Ze,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Ke},AbortError:Me}=g(4370),{validateObject:ze}=g(2120),Ce=ae("kPaused"),{StringDecoder:je}=g(2024),he=g(55);O(wt.prototype,J.prototype),O(wt,J);const Se=()=>{},{errorOrDestroy:tt}=le,ft=1,I=16,se=32,ie=64,$=2048,P=4096,ye=65536;function _t(We){return{enumerable:!1,get(){return 0!=(this.state&We)},set(Ye){Ye?this.state|=We:this.state&=~We}}}function At(We,Ye,Wt){"boolean"!=typeof Wt&&(Wt=Ye instanceof g(5931)),this.state=$|P|I|se,We&&We.objectMode&&(this.state|=ft),Wt&&We&&We.readableObjectMode&&(this.state|=ft),this.highWaterMark=We?G(this,We,"readableHighWaterMark",Wt):Te(!1),this.buffer=new R,this.length=0,this.pipes=[],this.flowing=null,this[Ce]=null,We&&!1===We.emitClose&&(this.state&=~$),We&&!1===We.autoDestroy&&(this.state&=~P),this.errored=null,this.defaultEncoding=We&&We.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,We&&We.encoding&&(this.decoder=new je(We.encoding),this.encoding=We.encoding)}function wt(We){if(!(this instanceof wt))return new wt(We);const Ye=this instanceof g(5931);this._readableState=new At(We,this,Ye),We&&("function"==typeof We.read&&(this._read=We.read),"function"==typeof We.destroy&&(this._destroy=We.destroy),"function"==typeof We.construct&&(this._construct=We.construct),We.signal&&!Ye&&z(We.signal,this)),J.call(this,We),le.construct(this,()=>{this._readableState.needReadable&&sn(this,this._readableState)})}function Xt(We,Ye,Wt,$t){N("readableAddChunk",Ye);const an=We._readableState;let gr;if(an.state&ft||("string"==typeof Ye?an.encoding!==(Wt=Wt||an.defaultEncoding)&&($t&&an.encoding?Ye=W.from(Ye,Wt).toString(an.encoding):(Ye=W.from(Ye,Wt),Wt="")):Ye instanceof W?Wt="":J._isUint8Array(Ye)?(Ye=J._uint8ArrayToBuffer(Ye),Wt=""):null!=Ye&&(gr=new be("chunk",["string","Buffer","Uint8Array"],Ye))),gr)tt(We,gr);else if(null===Ye)an.state&=-9,function et(We,Ye){if(N("onEofChunk"),!Ye.ended){if(Ye.decoder){const Wt=Ye.decoder.end();Wt&&Wt.length&&(Ye.buffer.push(Wt),Ye.length+=Ye.objectMode?1:Wt.length)}Ye.ended=!0,Ye.sync?ct(We):(Ye.needReadable=!1,Ye.emittedReadable=!0,Et(We))}}(We,an);else if(an.state&ft||Ye&&Ye.length>0)if($t)if(4&an.state)tt(We,new Ke);else{if(an.destroyed||an.errored)return!1;ge(We,an,Ye,!0)}else if(an.ended)tt(We,new Ze);else{if(an.destroyed||an.errored)return!1;an.state&=-9,an.decoder&&!Wt?(Ye=an.decoder.write(Ye),an.objectMode||0!==Ye.length?ge(We,an,Ye,!1):sn(We,an)):ge(We,an,Ye,!1)}else $t||(an.state&=-9,sn(We,an));return!an.ended&&(an.length<an.highWaterMark||0===an.length)}function ge(We,Ye,Wt,$t){Ye.flowing&&0===Ye.length&&!Ye.sync&&We.listenerCount("data")>0?(Ye.state&ye?Ye.awaitDrainWriters.clear():Ye.awaitDrainWriters=null,Ye.dataEmitted=!0,We.emit("data",Wt)):(Ye.length+=Ye.objectMode?1:Wt.length,$t?Ye.buffer.unshift(Wt):Ye.buffer.push(Wt),Ye.state&ie&&ct(We)),sn(We,Ye)}function Le(We,Ye){return We<=0||0===Ye.length&&Ye.ended?0:Ye.state&ft?1:_(We)?Ye.flowing&&Ye.length?Ye.buffer.first().length:Ye.length:We<=Ye.length?We:Ye.ended?Ye.length:0}function ct(We){const Ye=We._readableState;N("emitReadable",Ye.needReadable,Ye.emittedReadable),Ye.needReadable=!1,Ye.emittedReadable||(N("emitReadable",Ye.flowing),Ye.emittedReadable=!0,D.nextTick(Et,We))}function Et(We){const Ye=We._readableState;N("emitReadable_",Ye.destroyed,Ye.length,Ye.ended),!Ye.destroyed&&!Ye.errored&&(Ye.length||Ye.ended)&&(We.emit("readable"),Ye.emittedReadable=!1),Ye.needReadable=!Ye.flowing&&!Ye.ended&&Ye.length<=Ye.highWaterMark,mr(We)}function sn(We,Ye){!Ye.readingMore&&Ye.constructed&&(Ye.readingMore=!0,D.nextTick(Bn,We,Ye))}function Bn(We,Ye){for(;!Ye.reading&&!Ye.ended&&(Ye.length<Ye.highWaterMark||Ye.flowing&&0===Ye.length);){const Wt=Ye.length;if(N("maybeReadMore read 0"),We.read(0),Wt===Ye.length)break}Ye.readingMore=!1}function Tn(We){const Ye=We._readableState;Ye.readableListening=We.listenerCount("readable")>0,Ye.resumeScheduled&&!1===Ye[Ce]?Ye.flowing=!0:We.listenerCount("data")>0?We.resume():Ye.readableListening||(Ye.flowing=null)}function jn(We){N("readable nexttick read 0"),We.read(0)}function ra(We,Ye){N("resume",Ye.reading),Ye.reading||We.read(0),Ye.resumeScheduled=!1,We.emit("resume"),mr(We),Ye.flowing&&!Ye.reading&&We.read(0)}function mr(We){const Ye=We._readableState;for(N("flow",Ye.flowing);Ye.flowing&&null!==We.read(););}function Lo(We,Ye){"function"!=typeof We.read&&(We=wt.wrap(We,{objectMode:!0}));const Wt=function Bo(We,Ye){return zi.apply(this,arguments)}(We,Ye);return Wt.stream=We,Wt}function zi(){return(zi=b(function*(We,Ye){let an,Wt=Se;function $t(Yt){this===We?(Wt(),Wt=Se):Wt=Yt}We.on("readable",$t);const gr=x(We,{writable:!1},Yt=>{an=Yt?ce(an,Yt):null,Wt(),Wt=Se});try{for(;;){const Yt=We.destroyed?null:We.read();if(null!==Yt)yield Yt;else{if(an)throw an;if(null===an)return;yield C(new B($t))}}}catch(Yt){throw an=ce(an,Yt),an}finally{!an&&!1===Ye?.destroyOnReturn||void 0!==an&&!We._readableState.autoDestroy?(We.off("readable",$t),gr()):le.destroyer(We,null)}})).apply(this,arguments)}function jo(We,Ye){if(0===Ye.length)return null;let Wt;return Ye.objectMode?Wt=Ye.buffer.shift():!We||We>=Ye.length?(Wt=Ye.decoder?Ye.buffer.join(""):1===Ye.buffer.length?Ye.buffer.first():Ye.buffer.concat(Ye.length),Ye.buffer.clear()):Wt=Ye.buffer.consume(We,Ye.decoder),Wt}function Fs(We){const Ye=We._readableState;N("endReadable",Ye.endEmitted),Ye.endEmitted||(Ye.ended=!0,D.nextTick(ol,Ye,We))}function ol(We,Ye){if(N("endReadableNT",We.endEmitted,We.length),!We.errored&&!We.closeEmitted&&!We.endEmitted&&0===We.length)if(We.endEmitted=!0,Ye.emit("end"),Ye.writable&&!1===Ye.allowHalfOpen)D.nextTick(Xa,Ye);else if(We.autoDestroy){const Wt=Ye._writableState;(!Wt||Wt.autoDestroy&&(Wt.finished||!1===Wt.writable))&&Ye.destroy()}}function Xa(We){We.writable&&!We.writableEnded&&!We.destroyed&&We.end()}let Uo;function sl(){return void 0===Uo&&(Uo={}),Uo}T(At.prototype,{objectMode:_t(ft),ended:_t(2),endEmitted:_t(4),reading:_t(8),constructed:_t(I),sync:_t(se),needReadable:_t(ie),emittedReadable:_t(128),readableListening:_t(256),resumeScheduled:_t(512),errorEmitted:_t(1024),emitClose:_t($),autoDestroy:_t(P),destroyed:_t(8192),closed:_t(16384),closeEmitted:_t(32768),multiAwaitDrain:_t(ye),readingMore:_t(1<<17),dataEmitted:_t(1<<18)}),wt.prototype.destroy=le.destroy,wt.prototype._undestroy=le.undestroy,wt.prototype._destroy=function(We,Ye){Ye(We)},wt.prototype[X.captureRejectionSymbol]=function(We){this.destroy(We)},wt.prototype[A]=function(){let We;return this.destroyed||(We=this.readableEnded?null:new Me,this.destroy(We)),new B((Ye,Wt)=>x(this,$t=>$t&&$t!==We?Wt($t):Ye(null)))},wt.prototype.push=function(We,Ye){return Xt(this,We,Ye,!1)},wt.prototype.unshift=function(We,Ye){return Xt(this,We,Ye,!0)},wt.prototype.isPaused=function(){const We=this._readableState;return!0===We[Ce]||!1===We.flowing},wt.prototype.setEncoding=function(We){const Ye=new je(We);this._readableState.decoder=Ye,this._readableState.encoding=this._readableState.decoder.encoding;const Wt=this._readableState.buffer;let $t="";for(const an of Wt)$t+=Ye.write(an);return Wt.clear(),""!==$t&&Wt.push($t),this._readableState.length=$t.length,this},wt.prototype.read=function(We){N("read",We),void 0===We?We=NaN:k(We)||(We=v(We,10));const Ye=this._readableState,Wt=We;if(We>Ye.highWaterMark&&(Ye.highWaterMark=function oe(We){if(We>1073741824)throw new Ne("size","<= 1GiB",We);return We--,We|=We>>>1,We|=We>>>2,We|=We>>>4,We|=We>>>8,We|=We>>>16,++We}(We)),0!==We&&(Ye.state&=-129),0===We&&Ye.needReadable&&((0!==Ye.highWaterMark?Ye.length>=Ye.highWaterMark:Ye.length>0)||Ye.ended))return N("read: emitReadable",Ye.length,Ye.ended),0===Ye.length&&Ye.ended?Fs(this):ct(this),null;if(0===(We=Le(We,Ye))&&Ye.ended)return 0===Ye.length&&Fs(this),null;let an,$t=0!=(Ye.state&ie);if(N("need readable",$t),(0===Ye.length||Ye.length-We<Ye.highWaterMark)&&($t=!0,N("length less than watermark",$t)),Ye.ended||Ye.reading||Ye.destroyed||Ye.errored||!Ye.constructed)$t=!1,N("reading, ended or constructing",$t);else if($t){N("do read"),Ye.state|=8|se,0===Ye.length&&(Ye.state|=ie);try{this._read(Ye.highWaterMark)}catch(gr){tt(this,gr)}Ye.state&=~se,Ye.reading||(We=Le(Wt,Ye))}return an=We>0?jo(We,Ye):null,null===an?(Ye.needReadable=Ye.length<=Ye.highWaterMark,We=0):(Ye.length-=We,Ye.multiAwaitDrain?Ye.awaitDrainWriters.clear():Ye.awaitDrainWriters=null),0===Ye.length&&(Ye.ended||(Ye.needReadable=!0),Wt!==We&&Ye.ended&&Fs(this)),null!==an&&!Ye.errorEmitted&&!Ye.closeEmitted&&(Ye.dataEmitted=!0,this.emit("data",an)),an},wt.prototype._read=function(We){throw new ke("_read()")},wt.prototype.pipe=function(We,Ye){const Wt=this,$t=this._readableState;1===$t.pipes.length&&($t.multiAwaitDrain||($t.multiAwaitDrain=!0,$t.awaitDrainWriters=new Q($t.awaitDrainWriters?[$t.awaitDrainWriters]:[]))),$t.pipes.push(We),N("pipe count=%d opts=%j",$t.pipes.length,Ye);const gr=Ye&&!1===Ye.end||We===D.stdout||We===D.stderr?Si:Sa;function Sa(){N("onend"),We.end()}$t.endEmitted?D.nextTick(gr):Wt.once("end",gr),We.on("unpipe",function Yt(oo,_r){N("onunpipe"),oo===Wt&&_r&&!1===_r.hasUnpiped&&(_r.hasUnpiped=!0,function ki(){N("cleanup"),We.removeListener("close",Xn),We.removeListener("finish",Mo),Li&&We.removeListener("drain",Li),We.removeListener("error",qt),We.removeListener("unpipe",Yt),Wt.removeListener("end",Sa),Wt.removeListener("end",Si),Wt.removeListener("data",Ai),Ca=!0,Li&&$t.awaitDrainWriters&&(!We._writableState||We._writableState.needDrain)&&Li()}())});let Li,Ca=!1;function bi(){Ca||(1===$t.pipes.length&&$t.pipes[0]===We?(N("false write response, pause",0),$t.awaitDrainWriters=We,$t.multiAwaitDrain=!1):$t.pipes.length>1&&$t.pipes.includes(We)&&(N("false write response, pause",$t.awaitDrainWriters.size),$t.awaitDrainWriters.add(We)),Wt.pause()),Li||(Li=function Hn(We,Ye){return function(){const $t=We._readableState;$t.awaitDrainWriters===Ye?(N("pipeOnDrain",1),$t.awaitDrainWriters=null):$t.multiAwaitDrain&&(N("pipeOnDrain",$t.awaitDrainWriters.size),$t.awaitDrainWriters.delete(Ye)),(!$t.awaitDrainWriters||0===$t.awaitDrainWriters.size)&&We.listenerCount("data")&&We.resume()}}(Wt,We),We.on("drain",Li))}function Ai(oo){N("ondata");const _r=We.write(oo);N("dest.write",_r),!1===_r&&bi()}function qt(oo){if(N("onerror",oo),Si(),We.removeListener("error",qt),0===We.listenerCount("error")){const _r=We._writableState||We._readableState;_r&&!_r.errorEmitted?tt(We,oo):We.emit("error",oo)}}function Xn(){We.removeListener("finish",Mo),Si()}function Mo(){N("onfinish"),We.removeListener("close",Xn),Si()}function Si(){N("unpipe"),Wt.unpipe(We)}return Wt.on("data",Ai),Z(We,"error",qt),We.once("close",Xn),We.once("finish",Mo),We.emit("pipe",Wt),!0===We.writableNeedDrain?bi():$t.flowing||(N("pipe resume"),Wt.resume()),We},wt.prototype.unpipe=function(We){const Ye=this._readableState;if(0===Ye.pipes.length)return this;if(!We){const an=Ye.pipes;Ye.pipes=[],this.pause();for(let gr=0;gr<an.length;gr++)an[gr].emit("unpipe",this,{hasUnpiped:!1});return this}const $t=S(Ye.pipes,We);return-1===$t||(Ye.pipes.splice($t,1),0===Ye.pipes.length&&this.pause(),We.emit("unpipe",this,{hasUnpiped:!1})),this},wt.prototype.addListener=wt.prototype.on=function(We,Ye){const Wt=J.prototype.on.call(this,We,Ye),$t=this._readableState;return"data"===We?($t.readableListening=this.listenerCount("readable")>0,!1!==$t.flowing&&this.resume()):"readable"===We&&!$t.endEmitted&&!$t.readableListening&&($t.readableListening=$t.needReadable=!0,$t.flowing=!1,$t.emittedReadable=!1,N("on readable",$t.length,$t.reading),$t.length?ct(this):$t.reading||D.nextTick(jn,this)),Wt},wt.prototype.off=wt.prototype.removeListener=function(We,Ye){const Wt=J.prototype.removeListener.call(this,We,Ye);return"readable"===We&&D.nextTick(Tn,this),Wt},wt.prototype.removeAllListeners=function(We){const Ye=J.prototype.removeAllListeners.apply(this,arguments);return("readable"===We||void 0===We)&&D.nextTick(Tn,this),Ye},wt.prototype.resume=function(){const We=this._readableState;return We.flowing||(N("resume"),We.flowing=!We.readableListening,function Yi(We,Ye){Ye.resumeScheduled||(Ye.resumeScheduled=!0,D.nextTick(ra,We,Ye))}(this,We)),We[Ce]=!1,this},wt.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ce]=!0,this},wt.prototype.wrap=function(We){let Ye=!1;We.on("data",$t=>{!this.push($t)&&We.pause&&(Ye=!0,We.pause())}),We.on("end",()=>{this.push(null)}),We.on("error",$t=>{tt(this,$t)}),We.on("close",()=>{this.destroy()}),We.on("destroy",()=>{this.destroy()}),this._read=()=>{Ye&&We.resume&&(Ye=!1,We.resume())};const Wt=j(We);for(let $t=1;$t<Wt.length;$t++){const an=Wt[$t];void 0===this[an]&&"function"==typeof We[an]&&(this[an]=We[an].bind(We))}return this},wt.prototype[L]=function(){return Lo(this)},wt.prototype.iterator=function(We){return void 0!==We&&ze(We,"options"),Lo(this,We)},T(wt.prototype,{readable:{__proto__:null,get(){const We=this._readableState;return!(!We||!1===We.readable||We.destroyed||We.errorEmitted||We.endEmitted)},set(We){this._readableState&&(this._readableState.readable=!!We)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(We){this._readableState&&(this._readableState.flowing=We)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(We){this._readableState&&(this._readableState.destroyed=We)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),T(At.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ce]},set(We){this[Ce]=!!We}}}),wt._fromList=jo,wt.from=function(We,Ye){return he(wt,We,Ye)},wt.fromWeb=function(We,Ye){return sl().newStreamReadableFromReadableStream(We,Ye)},wt.toWeb=function(We,Ye){return sl().newReadableStreamFromStreamReadable(We,Ye)},wt.wrap=function(We,Ye){var Wt,$t;return new wt({objectMode:null===(Wt=null!==($t=We.readableObjectMode)&&void 0!==$t?$t:We.objectMode)||void 0===Wt||Wt,...Ye,destroy(an,gr){le.destroyer(We,an),gr(an)}}).wrap(We)}},8782:(ee,q,g)=>{"use strict";const{MathFloor:C,NumberIsInteger:b}=g(6305),{validateInteger:D}=g(2120),{ERR_INVALID_ARG_VALUE:S}=g(4370).codes;let k=16384,_=16;function T(B){return B?_:k}ee.exports={getHighWaterMark:function O(B,Q,A,L){const ae=function v(B,Q,A){return null!=B.highWaterMark?B.highWaterMark:Q?B[A]:null}(Q,L,A);if(null!=ae){if(!b(ae)||ae<0)throw new S(L?`options.${A}`:"options.highWaterMark",ae);return C(ae)}return T(B.objectMode)},getDefaultHighWaterMark:T,setDefaultHighWaterMark:function j(B,Q){D(Q,"value",0),B?_=Q:k=Q}}},123:(ee,q,g)=>{"use strict";const{ObjectSetPrototypeOf:C,Symbol:b}=g(6305);ee.exports=v;const{ERR_METHOD_NOT_IMPLEMENTED:D}=g(4370).codes,S=g(5931),{getHighWaterMark:k}=g(8782);C(v.prototype,S.prototype),C(v,S);const _=b("kCallback");function v(O){if(!(this instanceof v))return new v(O);const B=O?k(this,O,"readableHighWaterMark",!0):null;0===B&&(O={...O,highWaterMark:null,readableHighWaterMark:B,writableHighWaterMark:O.writableHighWaterMark||0}),S.call(this,O),this._readableState.sync=!1,this[_]=null,O&&("function"==typeof O.transform&&(this._transform=O.transform),"function"==typeof O.flush&&(this._flush=O.flush)),this.on("prefinish",j)}function T(O){"function"!=typeof this._flush||this.destroyed?(this.push(null),O&&O()):this._flush((B,Q)=>{B?O?O(B):this.destroy(B):(null!=Q&&this.push(Q),this.push(null),O&&O())})}function j(){this._final!==T&&T.call(this)}v.prototype._final=T,v.prototype._transform=function(O,B,Q){throw new D("_transform()")},v.prototype._write=function(O,B,Q){const A=this._readableState,L=this._writableState,ae=A.length;this._transform(O,B,(X,J)=>{X?Q(X):(null!=J&&this.push(J),L.ended||ae===A.length||A.length<A.highWaterMark?Q():this[_]=Q)})},v.prototype._read=function(){if(this[_]){const O=this[_];this[_]=null,O()}}},5428:(ee,q,g)=>{"use strict";const{SymbolAsyncIterator:C,SymbolIterator:b,SymbolFor:D}=g(6305),S=D("nodejs.stream.destroyed"),k=D("nodejs.stream.errored"),_=D("nodejs.stream.readable"),v=D("nodejs.stream.writable"),T=D("nodejs.stream.disturbed"),j=D("nodejs.webstream.isClosedPromise"),O=D("nodejs.webstream.controllerErrorFunction");function B(he,Se=!1){var tt;return!(!he||"function"!=typeof he.pipe||"function"!=typeof he.on||Se&&("function"!=typeof he.pause||"function"!=typeof he.resume)||he._writableState&&!1===(null===(tt=he._readableState)||void 0===tt?void 0:tt.readable)||he._writableState&&!he._readableState)}function Q(he){var Se;return!(!he||"function"!=typeof he.write||"function"!=typeof he.on||he._readableState&&!1===(null===(Se=he._writableState)||void 0===Se?void 0:Se.writable))}function L(he){return he&&(he._readableState||he._writableState||"function"==typeof he.write&&"function"==typeof he.on||"function"==typeof he.pipe&&"function"==typeof he.on)}function ae(he){return!(!he||L(he)||"function"!=typeof he.pipeThrough||"function"!=typeof he.getReader||"function"!=typeof he.cancel)}function X(he){return!(!he||L(he)||"function"!=typeof he.getWriter||"function"!=typeof he.abort)}function J(he){return!(!he||L(he)||"object"!=typeof he.readable||"object"!=typeof he.writable)}function z(he){if(!L(he))return null;const ft=he._writableState||he._readableState;return!!(he.destroyed||he[S]||null!=ft&&ft.destroyed)}function x(he){if(!Q(he))return null;if(!0===he.writableEnded)return!0;const Se=he._writableState;return(null==Se||!Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)}function le(he,Se){if(!B(he))return null;const tt=he._readableState;return(null==tt||!tt.errored)&&("boolean"!=typeof tt?.endEmitted?null:!!(tt.endEmitted||!1===Se&&!0===tt.ended&&0===tt.length))}function G(he){return he&&null!=he[_]?he[_]:"boolean"!=typeof he?.readable?null:!z(he)&&B(he)&&he.readable&&!le(he)}function Te(he){return he&&null!=he[v]?he[v]:"boolean"!=typeof he?.writable?null:!z(he)&&Q(he)&&he.writable&&!x(he)}function Ze(he){return"boolean"==typeof he._closed&&"boolean"==typeof he._defaultKeepAlive&&"boolean"==typeof he._removedConnection&&"boolean"==typeof he._removedContLen}function Ke(he){return"boolean"==typeof he._sent100&&Ze(he)}ee.exports={isDestroyed:z,kIsDestroyed:S,isDisturbed:function Ce(he){var Se;return!(!he||!(null!==(Se=he[T])&&void 0!==Se?Se:he.readableDidRead||he.readableAborted))},kIsDisturbed:T,isErrored:function je(he){var Se,tt,ft,qe,me,F,I,se,ie,He;return!(!he||!(null!==(Se=null!==(tt=null!==(ft=null!==(qe=null!==(me=null!==(F=he[k])&&void 0!==F?F:he.readableErrored)&&void 0!==me?me:he.writableErrored)&&void 0!==qe?qe:null===(I=he._readableState)||void 0===I?void 0:I.errorEmitted)&&void 0!==ft?ft:null===(se=he._writableState)||void 0===se?void 0:se.errorEmitted)&&void 0!==tt?tt:null===(ie=he._readableState)||void 0===ie?void 0:ie.errored)&&void 0!==Se?Se:null!==(He=he._writableState)&&void 0!==He&&He.errored))},kIsErrored:k,isReadable:G,kIsReadable:_,kIsClosedPromise:j,kControllerErrorFunction:O,kIsWritable:v,isClosed:function Ne(he){if(!L(he))return null;if("boolean"==typeof he.closed)return he.closed;const Se=he._writableState,tt=he._readableState;return"boolean"==typeof Se?.closed||"boolean"==typeof tt?.closed?Se?.closed||tt?.closed:"boolean"==typeof he._closed&&Ze(he)?he._closed:null},isDuplexNodeStream:function A(he){return!(!he||"function"!=typeof he.pipe||!he._readableState||"function"!=typeof he.on||"function"!=typeof he.write)},isFinished:function ce(he,Se){return L(he)?!!z(he)||!(!1!==Se?.readable&&G(he)||!1!==Se?.writable&&Te(he)):null},isIterable:function W(he,Se){return null!=he&&(!0===Se?"function"==typeof he[C]:!1===Se?"function"==typeof he[b]:"function"==typeof he[C]||"function"==typeof he[b])},isReadableNodeStream:B,isReadableStream:ae,isReadableEnded:function R(he){if(!B(he))return null;if(!0===he.readableEnded)return!0;const Se=he._readableState;return!(!Se||Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)},isReadableFinished:le,isReadableErrored:function ke(he){var Se,tt;return L(he)?he.readableErrored?he.readableErrored:null!==(Se=null===(tt=he._readableState)||void 0===tt?void 0:tt.errored)&&void 0!==Se?Se:null:null},isNodeStream:L,isWebStream:function Z(he){return ae(he)||X(he)||J(he)},isWritable:Te,isWritableNodeStream:Q,isWritableStream:X,isWritableEnded:x,isWritableFinished:function N(he,Se){if(!Q(he))return null;if(!0===he.writableFinished)return!0;const tt=he._writableState;return(null==tt||!tt.errored)&&("boolean"!=typeof tt?.finished?null:!!(tt.finished||!1===Se&&!0===tt.ended&&0===tt.length))},isWritableErrored:function be(he){var Se,tt;return L(he)?he.writableErrored?he.writableErrored:null!==(Se=null===(tt=he._writableState)||void 0===tt?void 0:tt.errored)&&void 0!==Se?Se:null:null},isServerRequest:function Me(he){var Se;return"boolean"==typeof he._consuming&&"boolean"==typeof he._dumped&&void 0===(null===(Se=he.req)||void 0===Se?void 0:Se.upgradeOrConnect)},isServerResponse:Ke,willEmitClose:function ze(he){if(!L(he))return null;const ft=he._writableState||he._readableState;return!ft&&Ke(he)||!!(ft&&ft.autoDestroy&&ft.emitClose&&!1===ft.closed)},isTransformStream:J}},9764:(ee,q,g)=>{const C=g(42),{ArrayPrototypeSlice:b,Error:D,FunctionPrototypeSymbolHasInstance:S,ObjectDefineProperty:k,ObjectDefineProperties:_,ObjectSetPrototypeOf:v,StringPrototypeToLowerCase:T,Symbol:j,SymbolHasInstance:O}=g(6305);ee.exports=Ke,Ke.WritableState=Ne;const{EventEmitter:B}=g(2016),Q=g(900).Stream,{Buffer:A}=g(1657),L=g(5601),{addAbortSignal:ae}=g(9987),{getHighWaterMark:X,getDefaultHighWaterMark:J}=g(8782),{ERR_INVALID_ARG_TYPE:Z,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_MULTIPLE_CALLBACK:z,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:N,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:le,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:Te}=g(4370).codes,{errorOrDestroy:ce}=L;function be(){}v(Ke.prototype,Q.prototype),v(Ke,Q);const ke=j("kOnFinished");function Ne(re,$,P){"boolean"!=typeof P&&(P=$ instanceof g(5931)),this.objectMode=!(!re||!re.objectMode),P&&(this.objectMode=this.objectMode||!(!re||!re.writableObjectMode)),this.highWaterMark=re?X(this,re,"writableHighWaterMark",P):J(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(re&&!1===re.decodeStrings),this.defaultEncoding=re&&re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=he.bind(void 0,$),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ze(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!re||!1!==re.emitClose,this.autoDestroy=!re||!1!==re.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ke]=[]}function Ze(re){re.buffered=[],re.bufferedIndex=0,re.allBuffers=!0,re.allNoop=!0}function Ke(re){const $=this instanceof g(5931);if(!$&&!S(Ke,this))return new Ke(re);this._writableState=new Ne(re,this,$),re&&("function"==typeof re.write&&(this._write=re.write),"function"==typeof re.writev&&(this._writev=re.writev),"function"==typeof re.destroy&&(this._destroy=re.destroy),"function"==typeof re.final&&(this._final=re.final),"function"==typeof re.construct&&(this._construct=re.construct),re.signal&&ae(re.signal,this)),Q.call(this,re),L.construct(this,()=>{const P=this._writableState;P.writing||qe(this,P),se(this,P)})}function Me(re,$,P,U){const pe=re._writableState;if("function"==typeof P)U=P,P=pe.defaultEncoding;else{if(P){if("buffer"!==P&&!A.isEncoding(P))throw new Te(P)}else P=pe.defaultEncoding;"function"!=typeof U&&(U=be)}if(null===$)throw new le;if(!pe.objectMode)if("string"==typeof $)!1!==pe.decodeStrings&&($=A.from($,P),P="buffer");else if($ instanceof A)P="buffer";else{if(!Q._isUint8Array($))throw new Z("chunk",["string","Buffer","Uint8Array"],$);$=Q._uint8ArrayToBuffer($),P="buffer"}let $e;return pe.ending?$e=new G:pe.destroyed&&($e=new N("write")),$e?(C.nextTick(U,$e),ce(re,$e,!0),$e):(pe.pendingcb++,function ze(re,$,P,U,pe){const $e=$.objectMode?1:P.length;$.length+=$e;const ye=$.length<$.highWaterMark;return ye||($.needDrain=!0),$.writing||$.corked||$.errored||!$.constructed?($.buffered.push({chunk:P,encoding:U,callback:pe}),$.allBuffers&&"buffer"!==U&&($.allBuffers=!1),$.allNoop&&pe!==be&&($.allNoop=!1)):($.writelen=$e,$.writecb=pe,$.writing=!0,$.sync=!0,re._write(P,U,$.onwrite),$.sync=!1),ye&&!$.errored&&!$.destroyed}(re,pe,$,P,U))}function Ce(re,$,P,U,pe,$e,ye){$.writelen=U,$.writecb=ye,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new N("write")):P?re._writev(pe,$.onwrite):re._write(pe,$e,$.onwrite),$.sync=!1}function je(re,$,P,U){--$.pendingcb,U(P),ft($),ce(re,P)}function he(re,$){const P=re._writableState,U=P.sync,pe=P.writecb;"function"==typeof pe?(P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0,$?(P.errored||(P.errored=$),re._readableState&&!re._readableState.errored&&(re._readableState.errored=$),U?C.nextTick(je,re,P,$,pe):je(re,P,$,pe)):(P.buffered.length>P.bufferedIndex&&qe(re,P),U?null!==P.afterWriteTickInfo&&P.afterWriteTickInfo.cb===pe?P.afterWriteTickInfo.count++:(P.afterWriteTickInfo={count:1,cb:pe,stream:re,state:P},C.nextTick(Se,P.afterWriteTickInfo)):tt(re,P,1,pe))):ce(re,new z)}function Se({stream:re,state:$,count:P,cb:U}){return $.afterWriteTickInfo=null,tt(re,$,P,U)}function tt(re,$,P,U){for(!$.ending&&!re.destroyed&&0===$.length&&$.needDrain&&($.needDrain=!1,re.emit("drain"));P-- >0;)$.pendingcb--,U();$.destroyed&&ft($),se(re,$)}function ft(re){if(re.writing)return;for(let pe=re.bufferedIndex;pe<re.buffered.length;++pe){var $;const{chunk:$e,callback:ye}=re.buffered[pe];re.length-=re.objectMode?1:$e.length,ye(null!==($=re.errored)&&void 0!==$?$:new N("write"))}const P=re[ke].splice(0);for(let pe=0;pe<P.length;pe++){var U;P[pe](null!==(U=re.errored)&&void 0!==U?U:new N("end"))}Ze(re)}function qe(re,$){if($.corked||$.bufferProcessing||$.destroyed||!$.constructed)return;const{buffered:P,bufferedIndex:U,objectMode:pe}=$,$e=P.length-U;if(!$e)return;let ye=U;if($.bufferProcessing=!0,$e>1&&re._writev){$.pendingcb-=$e-1;const Ve=$.allNoop?be:_t=>{for(let At=ye;At<P.length;++At)P[At].callback(_t)},rt=$.allNoop&&0===ye?P:b(P,ye);rt.allBuffers=$.allBuffers,Ce(re,$,!0,$.length,rt,"",Ve),Ze($)}else{do{const{chunk:Ve,encoding:rt,callback:_t}=P[ye];P[ye++]=null,Ce(re,$,!1,pe?1:Ve.length,Ve,rt,_t)}while(ye<P.length&&!$.writing);ye===P.length?Ze($):ye>256?(P.splice(0,ye),$.bufferedIndex=0):$.bufferedIndex=ye}$.bufferProcessing=!1}function me(re){return re.ending&&!re.destroyed&&re.constructed&&0===re.length&&!re.errored&&0===re.buffered.length&&!re.finished&&!re.writing&&!re.errorEmitted&&!re.closeEmitted}function se(re,$,P){me($)&&(function I(re,$){!$.prefinished&&!$.finalCalled&&("function"!=typeof re._final||$.destroyed?($.prefinished=!0,re.emit("prefinish")):($.finalCalled=!0,function F(re,$){let P=!1;function U(pe){if(P)ce(re,pe??z());else if(P=!0,$.pendingcb--,pe){const $e=$[ke].splice(0);for(let ye=0;ye<$e.length;ye++)$e[ye](pe);ce(re,pe,$.sync)}else me($)&&($.prefinished=!0,re.emit("prefinish"),$.pendingcb++,C.nextTick(ie,re,$))}$.sync=!0,$.pendingcb++;try{re._final(U)}catch(pe){U(pe)}$.sync=!1}(re,$)))}(re,$),0===$.pendingcb&&(P?($.pendingcb++,C.nextTick((U,pe)=>{me(pe)?ie(U,pe):pe.pendingcb--},re,$)):me($)&&($.pendingcb++,ie(re,$))))}function ie(re,$){$.pendingcb--,$.finished=!0;const P=$[ke].splice(0);for(let U=0;U<P.length;U++)P[U]();if(re.emit("finish"),$.autoDestroy){const U=re._readableState;(!U||U.autoDestroy&&(U.endEmitted||!1===U.readable))&&re.destroy()}}Ne.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},k(Ne.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),k(Ke,O,{__proto__:null,value:function(re){return!!S(this,re)||this===Ke&&re&&re._writableState instanceof Ne}}),Ke.prototype.pipe=function(){ce(this,new x)},Ke.prototype.write=function(re,$,P){return!0===Me(this,re,$,P)},Ke.prototype.cork=function(){this._writableState.corked++},Ke.prototype.uncork=function(){const re=this._writableState;re.corked&&(re.corked--,re.writing||qe(this,re))},Ke.prototype.setDefaultEncoding=function($){if("string"==typeof $&&($=T($)),!A.isEncoding($))throw new Te($);return this._writableState.defaultEncoding=$,this},Ke.prototype._write=function(re,$,P){if(!this._writev)throw new W("_write()");this._writev([{chunk:re,encoding:$}],P)},Ke.prototype._writev=null,Ke.prototype.end=function(re,$,P){const U=this._writableState;let pe;if("function"==typeof re?(P=re,re=null,$=null):"function"==typeof $&&(P=$,$=null),null!=re){const $e=Me(this,re,$);$e instanceof D&&(pe=$e)}return U.corked&&(U.corked=1,this.uncork()),pe||(U.errored||U.ending?U.finished?pe=new R("end"):U.destroyed&&(pe=new N("end")):(U.ending=!0,se(this,U,!0),U.ended=!0)),"function"==typeof P&&(pe||U.finished?C.nextTick(P,pe):U[ke].push(P)),this},_(Ke.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(re){this._writableState&&(this._writableState.destroyed=re)}},writable:{__proto__:null,get(){const re=this._writableState;return!(!re||!1===re.writable||re.destroyed||re.errored||re.ending||re.ended)},set(re){this._writableState&&(this._writableState.writable=!!re)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const re=this._writableState;return!!re&&!re.destroyed&&!re.ending&&re.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const He=L.destroy;let Je;function fe(){return void 0===Je&&(Je={}),Je}Ke.prototype.destroy=function(re,$){const P=this._writableState;return!P.destroyed&&(P.bufferedIndex<P.buffered.length||P[ke].length)&&C.nextTick(ft,P),He.call(this,re,$),this},Ke.prototype._undestroy=L.undestroy,Ke.prototype._destroy=function(re,$){$(re)},Ke.prototype[B.captureRejectionSymbol]=function(re){this.destroy(re)},Ke.fromWeb=function(re,$){return fe().newStreamWritableFromWritableStream(re,$)},Ke.toWeb=function(re){return fe().newWritableStreamFromStreamWritable(re)}},2120:(ee,q,g)=>{"use strict";const{ArrayIsArray:C,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:D,ArrayPrototypeMap:S,NumberIsInteger:k,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:v,NumberMIN_SAFE_INTEGER:T,NumberParseInt:j,ObjectPrototypeHasOwnProperty:O,RegExpPrototypeExec:B,String:Q,StringPrototypeToUpperCase:A,StringPrototypeTrim:L}=g(6305),{hideStackFrames:ae,codes:{ERR_SOCKET_BAD_PORT:X,ERR_INVALID_ARG_TYPE:J,ERR_INVALID_ARG_VALUE:Z,ERR_OUT_OF_RANGE:W,ERR_UNKNOWN_SIGNAL:z}}=g(4370),{normalizeEncoding:x}=g(2656),{isAsyncFunction:N,isArrayBufferView:R}=g(2656).types,le={},ce=/^[0-7]+$/,Ne=ae((ye,Ve,rt=T,_t=v)=>{if("number"!=typeof ye)throw new J(Ve,"number",ye);if(!k(ye))throw new W(Ve,"an integer",ye);if(ye<rt||ye>_t)throw new W(Ve,`>= ${rt} && <= ${_t}`,ye)}),Ze=ae((ye,Ve,rt=-2147483648,_t=2147483647)=>{if("number"!=typeof ye)throw new J(Ve,"number",ye);if(!k(ye))throw new W(Ve,"an integer",ye);if(ye<rt||ye>_t)throw new W(Ve,`>= ${rt} && <= ${_t}`,ye)}),Ke=ae((ye,Ve,rt=!1)=>{if("number"!=typeof ye)throw new J(Ve,"number",ye);if(!k(ye))throw new W(Ve,"an integer",ye);const _t=rt?1:0,At=4294967295;if(ye<_t||ye>At)throw new W(Ve,`>= ${_t} && <= ${At}`,ye)});function Me(ye,Ve){if("string"!=typeof ye)throw new J(Ve,"string",ye)}const Ce=ae((ye,Ve,rt)=>{if(!b(rt,ye)){const At="must be one of: "+D(S(rt,wt=>"string"==typeof wt?`'${wt}'`:Q(wt)),", ");throw new Z(Ve,ye,At)}});function je(ye,Ve){if("boolean"!=typeof ye)throw new J(Ve,"boolean",ye)}function he(ye,Ve,rt){return null!=ye&&O(ye,Ve)?ye[Ve]:rt}const Se=ae((ye,Ve,rt=null)=>{const _t=he(rt,"allowArray",!1),At=he(rt,"allowFunction",!1);if(!he(rt,"nullable",!1)&&null===ye||!_t&&C(ye)||"object"!=typeof ye&&(!At||"function"!=typeof ye))throw new J(Ve,"Object",ye)}),tt=ae((ye,Ve)=>{if(null!=ye&&"object"!=typeof ye&&"function"!=typeof ye)throw new J(Ve,"a dictionary",ye)}),ft=ae((ye,Ve,rt=0)=>{if(!C(ye))throw new J(Ve,"Array",ye);if(ye.length<rt)throw new Z(Ve,ye,`must be longer than ${rt}`)}),se=ae((ye,Ve="buffer")=>{if(!R(ye))throw new J(Ve,["Buffer","TypedArray","DataView"],ye)}),Je=ae((ye,Ve)=>{if(void 0!==ye&&(null===ye||"object"!=typeof ye||!("aborted"in ye)))throw new J(Ve,"AbortSignal",ye)}),fe=ae((ye,Ve)=>{if("function"!=typeof ye)throw new J(Ve,"Function",ye)}),re=ae((ye,Ve)=>{if("function"!=typeof ye||N(ye))throw new J(Ve,"Function",ye)}),$=ae((ye,Ve)=>{if(void 0!==ye)throw new J(Ve,"undefined",ye)}),U=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function pe(ye,Ve){if(typeof ye>"u"||!B(U,ye))throw new Z(Ve,ye,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}ee.exports={isInt32:function G(ye){return ye===(0|ye)},isUint32:function Te(ye){return ye===ye>>>0},parseFileMode:function ke(ye,Ve,rt){if(typeof ye>"u"&&(ye=rt),"string"==typeof ye){if(null===B(ce,ye))throw new Z(Ve,ye,"must be a 32-bit unsigned integer or an octal string");ye=j(ye,8)}return Ke(ye,Ve),ye},validateArray:ft,validateStringArray:function qe(ye,Ve){ft(ye,Ve);for(let rt=0;rt<ye.length;rt++)Me(ye[rt],`${Ve}[${rt}]`)},validateBooleanArray:function me(ye,Ve){ft(ye,Ve);for(let rt=0;rt<ye.length;rt++)je(ye[rt],`${Ve}[${rt}]`)},validateAbortSignalArray:function F(ye,Ve){ft(ye,Ve);for(let rt=0;rt<ye.length;rt++){const _t=ye[rt],At=`${Ve}[${rt}]`;if(null==_t)throw new J(At,"AbortSignal",_t);Je(_t,At)}},validateBoolean:je,validateBuffer:se,validateDictionary:tt,validateEncoding:function ie(ye,Ve){const rt=x(Ve),_t=ye.length;if("hex"===rt&&_t%2!=0)throw new Z("encoding",Ve,`is invalid for data of length ${_t}`)},validateFunction:fe,validateInt32:Ze,validateInteger:Ne,validateNumber:function ze(ye,Ve,rt=void 0,_t){if("number"!=typeof ye)throw new J(Ve,"number",ye);if(null!=rt&&ye<rt||null!=_t&&ye>_t||(null!=rt||null!=_t)&&_(ye))throw new W(Ve,`${null!=rt?`>= ${rt}`:""}${null!=rt&&null!=_t?" && ":""}${null!=_t?`<= ${_t}`:""}`,ye)},validateObject:Se,validateOneOf:Ce,validatePlainFunction:re,validatePort:function He(ye,Ve="Port",rt=!0){if("number"!=typeof ye&&"string"!=typeof ye||"string"==typeof ye&&0===L(ye).length||+ye!=+ye>>>0||ye>65535||0===ye&&!rt)throw new X(Ve,ye,rt);return 0|ye},validateSignalName:function I(ye,Ve="signal"){if(Me(ye,Ve),void 0===le[ye])throw void 0!==le[A(ye)]?new z(ye+" (signals must use all capital letters)"):new z(ye)},validateString:Me,validateUint32:Ke,validateUndefined:$,validateUnion:function P(ye,Ve,rt){if(!b(rt,ye))throw new J(Ve,`('${D(rt,"|")}')`,ye)},validateAbortSignal:Je,validateLinkHeaderValue:function $e(ye){if("string"==typeof ye)return pe(ye,"hints"),ye;if(C(ye)){const Ve=ye.length;let rt="";if(0===Ve)return rt;for(let _t=0;_t<Ve;_t++){const At=ye[_t];pe(At,"hints"),rt+=At,_t!==Ve-1&&(rt+=", ")}return rt}throw new Z("hints",ye,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(ee,q,g)=>{"use strict";const C=g(8110),b=g(16),D=C.Readable.destroy;ee.exports=C.Readable,ee.exports._uint8ArrayToBuffer=C._uint8ArrayToBuffer,ee.exports._isUint8Array=C._isUint8Array,ee.exports.isDisturbed=C.isDisturbed,ee.exports.isErrored=C.isErrored,ee.exports.isReadable=C.isReadable,ee.exports.Readable=C.Readable,ee.exports.Writable=C.Writable,ee.exports.Duplex=C.Duplex,ee.exports.Transform=C.Transform,ee.exports.PassThrough=C.PassThrough,ee.exports.addAbortSignal=C.addAbortSignal,ee.exports.finished=C.finished,ee.exports.destroy=C.destroy,ee.exports.destroy=D,ee.exports.pipeline=C.pipeline,ee.exports.compose=C.compose,Object.defineProperty(C,"promises",{configurable:!0,enumerable:!0,get:()=>b}),ee.exports.Stream=C.Stream,ee.exports.default=ee.exports},4370:(ee,q,g)=>{"use strict";const{format:C,inspect:b,AggregateError:D}=g(2656),S=globalThis.AggregateError||D,k=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],v=/^([A-Z][a-z0-9]*)+$/,j={};function O(J,Z){if(!J)throw new j.ERR_INTERNAL_ASSERTION(Z)}function B(J){let Z="",W=J.length;const z="-"===J[0]?1:0;for(;W>=z+4;W-=3)Z=`_${J.slice(W-3,W)}${Z}`;return`${J.slice(0,W)}${Z}`}function A(J,Z,W){W||(W=Error);class z extends W{constructor(...N){super(function Q(J,Z,W){if("function"==typeof Z)return O(Z.length<=W.length,`Code: ${J}; The provided arguments length (${W.length}) does not match the required ones (${Z.length}).`),Z(...W);const z=(Z.match(/%[dfijoOs]/g)||[]).length;return O(z===W.length,`Code: ${J}; The provided arguments length (${W.length}) does not match the required ones (${z}).`),0===W.length?Z:C(Z,...W)}(J,Z,N))}toString(){return`${this.name} [${J}]: ${this.message}`}}Object.defineProperties(z.prototype,{name:{value:W.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${J}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),z.prototype.code=J,z.prototype[k]=!0,j[J]=z}function L(J){return Object.defineProperty(J,"name",{value:"__node_internal_"+J.name}),J}class X extends Error{constructor(Z="The operation was aborted",W=void 0){if(void 0!==W&&"object"!=typeof W)throw new j.ERR_INVALID_ARG_TYPE("options","Object",W);super(Z,W),this.code="ABORT_ERR",this.name="AbortError"}}A("ERR_ASSERTION","%s",Error),A("ERR_INVALID_ARG_TYPE",(J,Z,W)=>{O("string"==typeof J,"'name' must be a string"),Array.isArray(Z)||(Z=[Z]);let z="The ";J.endsWith(" argument")?z+=`${J} `:z+=`"${J}" ${J.includes(".")?"property":"argument"} `,z+="must be ";const x=[],N=[],R=[];for(const G of Z)O("string"==typeof G,"All expected entries have to be of type string"),_.includes(G)?x.push(G.toLowerCase()):v.test(G)?N.push(G):(O("object"!==G,'The value "object" should be written as "Object"'),R.push(G));if(N.length>0){const G=x.indexOf("object");-1!==G&&(x.splice(x,G,1),N.push("Object"))}if(x.length>0){switch(x.length){case 1:z+=`of type ${x[0]}`;break;case 2:z+=`one of type ${x[0]} or ${x[1]}`;break;default:{const G=x.pop();z+=`one of type ${x.join(", ")}, or ${G}`}}(N.length>0||R.length>0)&&(z+=" or ")}if(N.length>0){switch(N.length){case 1:z+=`an instance of ${N[0]}`;break;case 2:z+=`an instance of ${N[0]} or ${N[1]}`;break;default:{const G=N.pop();z+=`an instance of ${N.join(", ")}, or ${G}`}}R.length>0&&(z+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(z+="an "),z+=`${R[0]}`;break;case 2:z+=`one of ${R[0]} or ${R[1]}`;break;default:{const G=R.pop();z+=`one of ${R.join(", ")}, or ${G}`}}if(null==W)z+=`. Received ${W}`;else if("function"==typeof W&&W.name)z+=`. Received function ${W.name}`;else if("object"==typeof W){var le;null!==(le=W.constructor)&&void 0!==le&&le.name?z+=`. Received an instance of ${W.constructor.name}`:z+=`. Received ${b(W,{depth:-1})}`}else{let G=b(W,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),z+=`. Received type ${typeof W} (${G})`}return z},TypeError),A("ERR_INVALID_ARG_VALUE",(J,Z,W="is invalid")=>{let z=b(Z);return z.length>128&&(z=z.slice(0,128)+"..."),`The ${J.includes(".")?"property":"argument"} '${J}' ${W}. Received ${z}`},TypeError),A("ERR_INVALID_RETURN_VALUE",(J,Z,W)=>{var z;return`Expected ${J} to be returned from the "${Z}" function but got ${null!=W&&null!==(z=W.constructor)&&void 0!==z&&z.name?`instance of ${W.constructor.name}`:"type "+typeof W}.`},TypeError),A("ERR_MISSING_ARGS",(...J)=>{let Z;O(J.length>0,"At least one arg needs to be specified");const W=J.length;switch(J=(Array.isArray(J)?J:[J]).map(z=>`"${z}"`).join(" or "),W){case 1:Z+=`The ${J[0]} argument`;break;case 2:Z+=`The ${J[0]} and ${J[1]} arguments`;break;default:{const z=J.pop();Z+=`The ${J.join(", ")}, and ${z} arguments`}}return`${Z} must be specified`},TypeError),A("ERR_OUT_OF_RANGE",(J,Z,W)=>{let z;return O(Z,'Missing "range" argument'),Number.isInteger(W)&&Math.abs(W)>2**32?z=B(String(W)):"bigint"==typeof W?(z=String(W),(W>2n**32n||W<-(2n**32n))&&(z=B(z)),z+="n"):z=b(W),`The value of "${J}" is out of range. It must be ${Z}. Received ${z}`},RangeError),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),A("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),A("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),A("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),A("ERR_STREAM_WRITE_AFTER_END","write after end",Error),A("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ee.exports={AbortError:X,aggregateTwoErrors:L(function ae(J,Z){if(J&&Z&&J!==Z){if(Array.isArray(Z.errors))return Z.errors.push(J),Z;const W=new S([Z,J],Z.message);return W.code=Z.code,W}return J||Z}),hideStackFrames:L,codes:j}},6305:ee=>{"use strict";ee.exports={ArrayIsArray:q=>Array.isArray(q),ArrayPrototypeIncludes:(q,g)=>q.includes(g),ArrayPrototypeIndexOf:(q,g)=>q.indexOf(g),ArrayPrototypeJoin:(q,g)=>q.join(g),ArrayPrototypeMap:(q,g)=>q.map(g),ArrayPrototypePop:(q,g)=>q.pop(g),ArrayPrototypePush:(q,g)=>q.push(g),ArrayPrototypeSlice:(q,g,C)=>q.slice(g,C),Error,FunctionPrototypeCall:(q,g,...C)=>q.call(g,...C),FunctionPrototypeSymbolHasInstance:(q,g)=>Function.prototype[Symbol.hasInstance].call(q,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(q,g)=>Object.defineProperties(q,g),ObjectDefineProperty:(q,g,C)=>Object.defineProperty(q,g,C),ObjectGetOwnPropertyDescriptor:(q,g)=>Object.getOwnPropertyDescriptor(q,g),ObjectKeys:q=>Object.keys(q),ObjectSetPrototypeOf:(q,g)=>Object.setPrototypeOf(q,g),Promise,PromisePrototypeCatch:(q,g)=>q.catch(g),PromisePrototypeThen:(q,g,C)=>q.then(g,C),PromiseReject:q=>Promise.reject(q),PromiseResolve:q=>Promise.resolve(q),ReflectApply:Reflect.apply,RegExpPrototypeTest:(q,g)=>q.test(g),SafeSet:Set,String,StringPrototypeSlice:(q,g,C)=>q.slice(g,C),StringPrototypeToLowerCase:q=>q.toLowerCase(),StringPrototypeToUpperCase:q=>q.toUpperCase(),StringPrototypeTrim:q=>q.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(q,g,C)=>q.set(g,C),Boolean,Uint8Array}},2656:(ee,q,g)=>{"use strict";var C=g(7156).default;const b=g(1657),{kResistStopPropagation:D,SymbolDispose:S}=g(6305),k=globalThis.AbortSignal||g(3982).AbortSignal,_=globalThis.AbortController||g(3982).AbortController,v=Object.getPrototypeOf(C(function*(){})).constructor,T=globalThis.Blob||b.Blob,j=typeof T<"u"?function(L){return L instanceof T}:function(L){return!1},O=(A,L)=>{if(void 0!==A&&(null===A||"object"!=typeof A||!("aborted"in A)))throw new ERR_INVALID_ARG_TYPE(L,"AbortSignal",A)};class Q extends Error{constructor(L){if(!Array.isArray(L))throw new TypeError("Expected input to be an Array, got "+typeof L);let ae="";for(let X=0;X<L.length;X++)ae+=`    ${L[X].stack}\n`;super(ae),this.name="AggregateError",this.errors=L}}ee.exports={AggregateError:Q,kEmptyObject:Object.freeze({}),once(A){let L=!1;return function(...ae){L||(L=!0,A.apply(this,ae))}},createDeferredPromise:function(){let A,L;return{promise:new Promise((X,J)=>{A=X,L=J}),resolve:A,reject:L}},promisify:A=>new Promise((L,ae)=>{A((X,...J)=>X?ae(X):L(...J))}),debuglog:()=>function(){},format:(A,...L)=>A.replace(/%([sdifj])/g,function(...[ae,X]){const J=L.shift();return"f"===X?J.toFixed(6):"j"===X?JSON.stringify(J):"s"===X&&"object"==typeof J?`${J.constructor!==Object?J.constructor.name:""} {}`.trim():J.toString()}),inspect(A){switch(typeof A){case"string":if(A.includes("'")){if(!A.includes('"'))return`"${A}"`;if(!A.includes("`")&&!A.includes("${"))return`\`${A}\``}return`'${A}'`;case"number":return isNaN(A)?"NaN":Object.is(A,-0)?String(A):A;case"bigint":return`${String(A)}n`;case"boolean":case"undefined":return String(A);case"object":return"{}"}},types:{isAsyncFunction:A=>A instanceof v,isArrayBufferView:A=>ArrayBuffer.isView(A)},isBlob:j,deprecate:(A,L)=>A,addAbortListener:g(2016).addAbortListener||function(L,ae){if(void 0===L)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",L);let X;return O(L,"signal"),((A,L)=>{if("function"!=typeof A)throw new ERR_INVALID_ARG_TYPE("listener","Function",A)})(ae),L.aborted?queueMicrotask(()=>ae()):(L.addEventListener("abort",ae,{__proto__:null,once:!0,[D]:!0}),X=()=>{L.removeEventListener("abort",ae)}),{__proto__:null,[S](){var J;null===(J=X)||void 0===J||J()}}},AbortSignalAny:k.any||function(L){if(1===L.length)return L[0];const ae=new _,X=()=>ae.abort();return L.forEach(J=>{O(J,"signals"),J.addEventListener("abort",X,{once:!0})}),ae.signal.addEventListener("abort",()=>{L.forEach(J=>J.removeEventListener("abort",X))},{once:!0}),ae.signal}},ee.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(ee,q,g)=>{const{Buffer:C}=g(1657),{ObjectDefineProperty:b,ObjectKeys:D,ReflectApply:S}=g(6305),{promisify:{custom:k}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:v}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:T}}=g(4370),j=g(7721),{setDefaultHighWaterMark:O,getDefaultHighWaterMark:B}=g(8782),{pipeline:Q}=g(4514),{destroyer:A}=g(5601),L=g(4618),X=g(16),J=g(5428),Z=ee.exports=g(900).Stream;Z.isDestroyed=J.isDestroyed,Z.isDisturbed=J.isDisturbed,Z.isErrored=J.isErrored,Z.isReadable=J.isReadable,Z.isWritable=J.isWritable,Z.Readable=g(8383);for(const x of D(_)){let R=function(...le){if(new.target)throw T();return Z.Readable.from(S(N,this,le))};const N=_[x];b(R,"name",{__proto__:null,value:N.name}),b(R,"length",{__proto__:null,value:N.length}),b(Z.Readable.prototype,x,{__proto__:null,value:R,enumerable:!1,configurable:!0,writable:!0})}for(const x of D(v)){let R=function(...G){if(new.target)throw T();return S(N,this,G)};const N=v[x];b(R,"name",{__proto__:null,value:N.name}),b(R,"length",{__proto__:null,value:N.length}),b(Z.Readable.prototype,x,{__proto__:null,value:R,enumerable:!1,configurable:!0,writable:!0})}Z.Writable=g(9764),Z.Duplex=g(5931),Z.Transform=g(123),Z.PassThrough=g(6973),Z.pipeline=Q;const{addAbortSignal:W}=g(9987);Z.addAbortSignal=W,Z.finished=L,Z.destroy=A,Z.compose=j,Z.setDefaultHighWaterMark=O,Z.getDefaultHighWaterMark=B,b(Z,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>X}),b(Q,k,{__proto__:null,enumerable:!0,get:()=>X.pipeline}),b(L,k,{__proto__:null,enumerable:!0,get:()=>X.finished}),Z.Stream=Z,Z._isUint8Array=function(N){return N instanceof Uint8Array},Z._uint8ArrayToBuffer=function(N){return C.from(N.buffer,N.byteOffset,N.byteLength)}},16:(ee,q,g)=>{"use strict";const{ArrayPrototypePop:C,Promise:b}=g(6305),{isIterable:D,isNodeStream:S,isWebStream:k}=g(5428),{pipelineImpl:_}=g(4514),{finished:v}=g(4618);g(8110),ee.exports={finished:v,pipeline:function T(...j){return new b((O,B)=>{let Q,A;const L=j[j.length-1];if(L&&"object"==typeof L&&!S(L)&&!D(L)&&!k(L)){const ae=C(j);Q=ae.signal,A=ae.end}_(j,(ae,X)=>{ae?B(ae):O(X)},{signal:Q,end:A})})}}},1657:(ee,q,g)=>{"use strict";const C=g(9919),b=g(2601),D="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;q.Buffer=v,q.SlowBuffer=function Z(ge){return+ge!=ge&&(ge=0),v.alloc(+ge)},q.INSPECT_MAX_BYTES=50;const S=2147483647;function _(ge){if(ge>S)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const Y=new Uint8Array(ge);return Object.setPrototypeOf(Y,v.prototype),Y}function v(ge,Y,oe){if("number"==typeof ge){if("string"==typeof Y)throw new TypeError('The "string" argument must be of type string. Received type number');return B(ge)}return T(ge,Y,oe)}function T(ge,Y,oe){if("string"==typeof ge)return function Q(ge,Y){if(("string"!=typeof Y||""===Y)&&(Y="utf8"),!v.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);const oe=0|W(ge,Y);let Le=_(oe);const et=Le.write(ge,Y);return et!==oe&&(Le=Le.slice(0,et)),Le}(ge,Y);if(ArrayBuffer.isView(ge))return function L(ge){if(rt(ge,Uint8Array)){const Y=new Uint8Array(ge);return ae(Y.buffer,Y.byteOffset,Y.byteLength)}return A(ge)}(ge);if(null==ge)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(rt(ge,ArrayBuffer)||ge&&rt(ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(rt(ge,SharedArrayBuffer)||ge&&rt(ge.buffer,SharedArrayBuffer)))return ae(ge,Y,oe);if("number"==typeof ge)throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=ge.valueOf&&ge.valueOf();if(null!=Le&&Le!==ge)return v.from(Le,Y,oe);const et=function X(ge){if(v.isBuffer(ge)){const Y=0|J(ge.length),oe=_(Y);return 0===oe.length||ge.copy(oe,0,0,Y),oe}return void 0!==ge.length?"number"!=typeof ge.length||_t(ge.length)?_(0):A(ge):"Buffer"===ge.type&&Array.isArray(ge.data)?A(ge.data):void 0}(ge);if(et)return et;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ge[Symbol.toPrimitive])return v.from(ge[Symbol.toPrimitive]("string"),Y,oe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}function j(ge){if("number"!=typeof ge)throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function B(ge){return j(ge),_(ge<0?0:0|J(ge))}function A(ge){const Y=ge.length<0?0:0|J(ge.length),oe=_(Y);for(let Le=0;Le<Y;Le+=1)oe[Le]=255&ge[Le];return oe}function ae(ge,Y,oe){if(Y<0||ge.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<Y+(oe||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return Le=void 0===Y&&void 0===oe?new Uint8Array(ge):void 0===oe?new Uint8Array(ge,Y):new Uint8Array(ge,Y,oe),Object.setPrototypeOf(Le,v.prototype),Le}function J(ge){if(ge>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return 0|ge}function W(ge,Y){if(v.isBuffer(ge))return ge.length;if(ArrayBuffer.isView(ge)||rt(ge,ArrayBuffer))return ge.byteLength;if("string"!=typeof ge)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const oe=ge.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===oe)return 0;let et=!1;for(;;)switch(Y){case"ascii":case"latin1":case"binary":return oe;case"utf8":case"utf-8":return U(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*oe;case"hex":return oe>>>1;case"base64":return ye(ge).length;default:if(et)return Le?-1:U(ge).length;Y=(""+Y).toLowerCase(),et=!0}}function z(ge,Y,oe){let Le=!1;if((void 0===Y||Y<0)&&(Y=0),Y>this.length||((void 0===oe||oe>this.length)&&(oe=this.length),oe<=0)||(oe>>>=0)<=(Y>>>=0))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return Ce(this,Y,oe);case"utf8":case"utf-8":return Ne(this,Y,oe);case"ascii":return Me(this,Y,oe);case"latin1":case"binary":return ze(this,Y,oe);case"base64":return ke(this,Y,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return je(this,Y,oe);default:if(Le)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),Le=!0}}function x(ge,Y,oe){const Le=ge[Y];ge[Y]=ge[oe],ge[oe]=Le}function N(ge,Y,oe,Le,et){if(0===ge.length)return-1;if("string"==typeof oe?(Le=oe,oe=0):oe>2147483647?oe=2147483647:oe<-2147483648&&(oe=-2147483648),_t(oe=+oe)&&(oe=et?0:ge.length-1),oe<0&&(oe=ge.length+oe),oe>=ge.length){if(et)return-1;oe=ge.length-1}else if(oe<0){if(!et)return-1;oe=0}if("string"==typeof Y&&(Y=v.from(Y,Le)),v.isBuffer(Y))return 0===Y.length?-1:R(ge,Y,oe,Le,et);if("number"==typeof Y)return Y&=255,"function"==typeof Uint8Array.prototype.indexOf?et?Uint8Array.prototype.indexOf.call(ge,Y,oe):Uint8Array.prototype.lastIndexOf.call(ge,Y,oe):R(ge,[Y],oe,Le,et);throw new TypeError("val must be string, number or Buffer")}function R(ge,Y,oe,Le,et){let Hn,ct=1,Et=ge.length,sn=Y.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(ge.length<2||Y.length<2)return-1;ct=2,Et/=2,sn/=2,oe/=2}function Bn(Tn,jn){return 1===ct?Tn[jn]:Tn.readUInt16BE(jn*ct)}if(et){let Tn=-1;for(Hn=oe;Hn<Et;Hn++)if(Bn(ge,Hn)===Bn(Y,-1===Tn?0:Hn-Tn)){if(-1===Tn&&(Tn=Hn),Hn-Tn+1===sn)return Tn*ct}else-1!==Tn&&(Hn-=Hn-Tn),Tn=-1}else for(oe+sn>Et&&(oe=Et-sn),Hn=oe;Hn>=0;Hn--){let Tn=!0;for(let jn=0;jn<sn;jn++)if(Bn(ge,Hn+jn)!==Bn(Y,jn)){Tn=!1;break}if(Tn)return Hn}return-1}function le(ge,Y,oe,Le){oe=Number(oe)||0;const et=ge.length-oe;Le?(Le=Number(Le))>et&&(Le=et):Le=et;const ct=Y.length;let Et;for(Le>ct/2&&(Le=ct/2),Et=0;Et<Le;++Et){const sn=parseInt(Y.substr(2*Et,2),16);if(_t(sn))return Et;ge[oe+Et]=sn}return Et}function G(ge,Y,oe,Le){return Ve(U(Y,ge.length-oe),ge,oe,Le)}function Te(ge,Y,oe,Le){return Ve(function pe(ge){const Y=[];for(let oe=0;oe<ge.length;++oe)Y.push(255&ge.charCodeAt(oe));return Y}(Y),ge,oe,Le)}function ce(ge,Y,oe,Le){return Ve(ye(Y),ge,oe,Le)}function be(ge,Y,oe,Le){return Ve(function $e(ge,Y){let oe,Le,et;const ct=[];for(let Et=0;Et<ge.length&&!((Y-=2)<0);++Et)oe=ge.charCodeAt(Et),Le=oe>>8,et=oe%256,ct.push(et),ct.push(Le);return ct}(Y,ge.length-oe),ge,oe,Le)}function ke(ge,Y,oe){return C.fromByteArray(0===Y&&oe===ge.length?ge:ge.slice(Y,oe))}function Ne(ge,Y,oe){oe=Math.min(ge.length,oe);const Le=[];let et=Y;for(;et<oe;){const ct=ge[et];let Et=null,sn=ct>239?4:ct>223?3:ct>191?2:1;if(et+sn<=oe){let Bn,Hn,Tn,jn;switch(sn){case 1:ct<128&&(Et=ct);break;case 2:Bn=ge[et+1],128==(192&Bn)&&(jn=(31&ct)<<6|63&Bn,jn>127&&(Et=jn));break;case 3:Bn=ge[et+1],Hn=ge[et+2],128==(192&Bn)&&128==(192&Hn)&&(jn=(15&ct)<<12|(63&Bn)<<6|63&Hn,jn>2047&&(jn<55296||jn>57343)&&(Et=jn));break;case 4:Bn=ge[et+1],Hn=ge[et+2],Tn=ge[et+3],128==(192&Bn)&&128==(192&Hn)&&128==(192&Tn)&&(jn=(15&ct)<<18|(63&Bn)<<12|(63&Hn)<<6|63&Tn,jn>65535&&jn<1114112&&(Et=jn))}}null===Et?(Et=65533,sn=1):Et>65535&&(Et-=65536,Le.push(Et>>>10&1023|55296),Et=56320|1023&Et),Le.push(Et),et+=sn}return function Ke(ge){const Y=ge.length;if(Y<=Ze)return String.fromCharCode.apply(String,ge);let oe="",Le=0;for(;Le<Y;)oe+=String.fromCharCode.apply(String,ge.slice(Le,Le+=Ze));return oe}(Le)}q.kMaxLength=S,!(v.TYPED_ARRAY_SUPPORT=function k(){try{const ge=new Uint8Array(1),Y={foo:function(){return 42}};return Object.setPrototypeOf(Y,Uint8Array.prototype),Object.setPrototypeOf(ge,Y),42===ge.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(ge,Y,oe){return T(ge,Y,oe)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(ge,Y,oe){return function O(ge,Y,oe){return j(ge),ge<=0?_(ge):void 0!==Y?"string"==typeof oe?_(ge).fill(Y,oe):_(ge).fill(Y):_(ge)}(ge,Y,oe)},v.allocUnsafe=function(ge){return B(ge)},v.allocUnsafeSlow=function(ge){return B(ge)},v.isBuffer=function(Y){return null!=Y&&!0===Y._isBuffer&&Y!==v.prototype},v.compare=function(Y,oe){if(rt(Y,Uint8Array)&&(Y=v.from(Y,Y.offset,Y.byteLength)),rt(oe,Uint8Array)&&(oe=v.from(oe,oe.offset,oe.byteLength)),!v.isBuffer(Y)||!v.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Y===oe)return 0;let Le=Y.length,et=oe.length;for(let ct=0,Et=Math.min(Le,et);ct<Et;++ct)if(Y[ct]!==oe[ct]){Le=Y[ct],et=oe[ct];break}return Le<et?-1:et<Le?1:0},v.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(Y,oe){if(!Array.isArray(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Y.length)return v.alloc(0);let Le;if(void 0===oe)for(oe=0,Le=0;Le<Y.length;++Le)oe+=Y[Le].length;const et=v.allocUnsafe(oe);let ct=0;for(Le=0;Le<Y.length;++Le){let Et=Y[Le];if(rt(Et,Uint8Array))ct+Et.length>et.length?(v.isBuffer(Et)||(Et=v.from(Et)),Et.copy(et,ct)):Uint8Array.prototype.set.call(et,Et,ct);else{if(!v.isBuffer(Et))throw new TypeError('"list" argument must be an Array of Buffers');Et.copy(et,ct)}ct+=Et.length}return et},v.byteLength=W,v.prototype._isBuffer=!0,v.prototype.swap16=function(){const Y=this.length;if(Y%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let oe=0;oe<Y;oe+=2)x(this,oe,oe+1);return this},v.prototype.swap32=function(){const Y=this.length;if(Y%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let oe=0;oe<Y;oe+=4)x(this,oe,oe+3),x(this,oe+1,oe+2);return this},v.prototype.swap64=function(){const Y=this.length;if(Y%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let oe=0;oe<Y;oe+=8)x(this,oe,oe+7),x(this,oe+1,oe+6),x(this,oe+2,oe+5),x(this,oe+3,oe+4);return this},v.prototype.toLocaleString=v.prototype.toString=function(){const Y=this.length;return 0===Y?"":0===arguments.length?Ne(this,0,Y):z.apply(this,arguments)},v.prototype.equals=function(Y){if(!v.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y||0===v.compare(this,Y)},v.prototype.inspect=function(){let Y="";const oe=q.INSPECT_MAX_BYTES;return Y=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(Y+=" ... "),"<Buffer "+Y+">"},D&&(v.prototype[D]=v.prototype.inspect),v.prototype.compare=function(Y,oe,Le,et,ct){if(rt(Y,Uint8Array)&&(Y=v.from(Y,Y.offset,Y.byteLength)),!v.isBuffer(Y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Y);if(void 0===oe&&(oe=0),void 0===Le&&(Le=Y?Y.length:0),void 0===et&&(et=0),void 0===ct&&(ct=this.length),oe<0||Le>Y.length||et<0||ct>this.length)throw new RangeError("out of range index");if(et>=ct&&oe>=Le)return 0;if(et>=ct)return-1;if(oe>=Le)return 1;if(this===Y)return 0;let Et=(ct>>>=0)-(et>>>=0),sn=(Le>>>=0)-(oe>>>=0);const Bn=Math.min(Et,sn),Hn=this.slice(et,ct),Tn=Y.slice(oe,Le);for(let jn=0;jn<Bn;++jn)if(Hn[jn]!==Tn[jn]){Et=Hn[jn],sn=Tn[jn];break}return Et<sn?-1:sn<Et?1:0},v.prototype.includes=function(Y,oe,Le){return-1!==this.indexOf(Y,oe,Le)},v.prototype.indexOf=function(Y,oe,Le){return N(this,Y,oe,Le,!0)},v.prototype.lastIndexOf=function(Y,oe,Le){return N(this,Y,oe,Le,!1)},v.prototype.write=function(Y,oe,Le,et){if(void 0===oe)et="utf8",Le=this.length,oe=0;else if(void 0===Le&&"string"==typeof oe)et=oe,Le=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(Le)?(Le>>>=0,void 0===et&&(et="utf8")):(et=Le,Le=void 0)}const ct=this.length-oe;if((void 0===Le||Le>ct)&&(Le=ct),Y.length>0&&(Le<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");et||(et="utf8");let Et=!1;for(;;)switch(et){case"hex":return le(this,Y,oe,Le);case"utf8":case"utf-8":return G(this,Y,oe,Le);case"ascii":case"latin1":case"binary":return Te(this,Y,oe,Le);case"base64":return ce(this,Y,oe,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,Y,oe,Le);default:if(Et)throw new TypeError("Unknown encoding: "+et);et=(""+et).toLowerCase(),Et=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Ze=4096;function Me(ge,Y,oe){let Le="";oe=Math.min(ge.length,oe);for(let et=Y;et<oe;++et)Le+=String.fromCharCode(127&ge[et]);return Le}function ze(ge,Y,oe){let Le="";oe=Math.min(ge.length,oe);for(let et=Y;et<oe;++et)Le+=String.fromCharCode(ge[et]);return Le}function Ce(ge,Y,oe){const Le=ge.length;(!Y||Y<0)&&(Y=0),(!oe||oe<0||oe>Le)&&(oe=Le);let et="";for(let ct=Y;ct<oe;++ct)et+=At[ge[ct]];return et}function je(ge,Y,oe){const Le=ge.slice(Y,oe);let et="";for(let ct=0;ct<Le.length-1;ct+=2)et+=String.fromCharCode(Le[ct]+256*Le[ct+1]);return et}function he(ge,Y,oe){if(ge%1!=0||ge<0)throw new RangeError("offset is not uint");if(ge+Y>oe)throw new RangeError("Trying to access beyond buffer length")}function Se(ge,Y,oe,Le,et,ct){if(!v.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>et||Y<ct)throw new RangeError('"value" argument is out of bounds');if(oe+Le>ge.length)throw new RangeError("Index out of range")}function tt(ge,Y,oe,Le,et){Je(Y,Le,et,ge,oe,7);let ct=Number(Y&BigInt(4294967295));ge[oe++]=ct,ct>>=8,ge[oe++]=ct,ct>>=8,ge[oe++]=ct,ct>>=8,ge[oe++]=ct;let Et=Number(Y>>BigInt(32)&BigInt(4294967295));return ge[oe++]=Et,Et>>=8,ge[oe++]=Et,Et>>=8,ge[oe++]=Et,Et>>=8,ge[oe++]=Et,oe}function ft(ge,Y,oe,Le,et){Je(Y,Le,et,ge,oe,7);let ct=Number(Y&BigInt(4294967295));ge[oe+7]=ct,ct>>=8,ge[oe+6]=ct,ct>>=8,ge[oe+5]=ct,ct>>=8,ge[oe+4]=ct;let Et=Number(Y>>BigInt(32)&BigInt(4294967295));return ge[oe+3]=Et,Et>>=8,ge[oe+2]=Et,Et>>=8,ge[oe+1]=Et,Et>>=8,ge[oe]=Et,oe+8}function qe(ge,Y,oe,Le,et,ct){if(oe+Le>ge.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("Index out of range")}function me(ge,Y,oe,Le,et){return Y=+Y,oe>>>=0,et||qe(ge,0,oe,4),b.write(ge,Y,oe,Le,23,4),oe+4}function F(ge,Y,oe,Le,et){return Y=+Y,oe>>>=0,et||qe(ge,0,oe,8),b.write(ge,Y,oe,Le,52,8),oe+8}v.prototype.slice=function(Y,oe){const Le=this.length;(Y=~~Y)<0?(Y+=Le)<0&&(Y=0):Y>Le&&(Y=Le),(oe=void 0===oe?Le:~~oe)<0?(oe+=Le)<0&&(oe=0):oe>Le&&(oe=Le),oe<Y&&(oe=Y);const et=this.subarray(Y,oe);return Object.setPrototypeOf(et,v.prototype),et},v.prototype.readUintLE=v.prototype.readUIntLE=function(Y,oe,Le){Y>>>=0,oe>>>=0,Le||he(Y,oe,this.length);let et=this[Y],ct=1,Et=0;for(;++Et<oe&&(ct*=256);)et+=this[Y+Et]*ct;return et},v.prototype.readUintBE=v.prototype.readUIntBE=function(Y,oe,Le){Y>>>=0,oe>>>=0,Le||he(Y,oe,this.length);let et=this[Y+--oe],ct=1;for(;oe>0&&(ct*=256);)et+=this[Y+--oe]*ct;return et},v.prototype.readUint8=v.prototype.readUInt8=function(Y,oe){return Y>>>=0,oe||he(Y,1,this.length),this[Y]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(Y,oe){return Y>>>=0,oe||he(Y,2,this.length),this[Y]|this[Y+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(Y,oe){return Y>>>=0,oe||he(Y,2,this.length),this[Y]<<8|this[Y+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(Y,oe){return Y>>>=0,oe||he(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+16777216*this[Y+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(Y,oe){return Y>>>=0,oe||he(Y,4,this.length),16777216*this[Y]+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},v.prototype.readBigUInt64LE=wt(function(Y){fe(Y>>>=0,"offset");const oe=this[Y],Le=this[Y+7];(void 0===oe||void 0===Le)&&re(Y,this.length-8);const et=oe+256*this[++Y]+65536*this[++Y]+this[++Y]*2**24,ct=this[++Y]+256*this[++Y]+65536*this[++Y]+Le*2**24;return BigInt(et)+(BigInt(ct)<<BigInt(32))}),v.prototype.readBigUInt64BE=wt(function(Y){fe(Y>>>=0,"offset");const oe=this[Y],Le=this[Y+7];(void 0===oe||void 0===Le)&&re(Y,this.length-8);const et=oe*2**24+65536*this[++Y]+256*this[++Y]+this[++Y],ct=this[++Y]*2**24+65536*this[++Y]+256*this[++Y]+Le;return(BigInt(et)<<BigInt(32))+BigInt(ct)}),v.prototype.readIntLE=function(Y,oe,Le){Y>>>=0,oe>>>=0,Le||he(Y,oe,this.length);let et=this[Y],ct=1,Et=0;for(;++Et<oe&&(ct*=256);)et+=this[Y+Et]*ct;return ct*=128,et>=ct&&(et-=Math.pow(2,8*oe)),et},v.prototype.readIntBE=function(Y,oe,Le){Y>>>=0,oe>>>=0,Le||he(Y,oe,this.length);let et=oe,ct=1,Et=this[Y+--et];for(;et>0&&(ct*=256);)Et+=this[Y+--et]*ct;return ct*=128,Et>=ct&&(Et-=Math.pow(2,8*oe)),Et},v.prototype.readInt8=function(Y,oe){return Y>>>=0,oe||he(Y,1,this.length),128&this[Y]?-1*(255-this[Y]+1):this[Y]},v.prototype.readInt16LE=function(Y,oe){Y>>>=0,oe||he(Y,2,this.length);const Le=this[Y]|this[Y+1]<<8;return 32768&Le?4294901760|Le:Le},v.prototype.readInt16BE=function(Y,oe){Y>>>=0,oe||he(Y,2,this.length);const Le=this[Y+1]|this[Y]<<8;return 32768&Le?4294901760|Le:Le},v.prototype.readInt32LE=function(Y,oe){return Y>>>=0,oe||he(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},v.prototype.readInt32BE=function(Y,oe){return Y>>>=0,oe||he(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},v.prototype.readBigInt64LE=wt(function(Y){fe(Y>>>=0,"offset");const oe=this[Y],Le=this[Y+7];return(void 0===oe||void 0===Le)&&re(Y,this.length-8),(BigInt(this[Y+4]+256*this[Y+5]+65536*this[Y+6]+(Le<<24))<<BigInt(32))+BigInt(oe+256*this[++Y]+65536*this[++Y]+this[++Y]*2**24)}),v.prototype.readBigInt64BE=wt(function(Y){fe(Y>>>=0,"offset");const oe=this[Y],Le=this[Y+7];(void 0===oe||void 0===Le)&&re(Y,this.length-8);const et=(oe<<24)+65536*this[++Y]+256*this[++Y]+this[++Y];return(BigInt(et)<<BigInt(32))+BigInt(this[++Y]*2**24+65536*this[++Y]+256*this[++Y]+Le)}),v.prototype.readFloatLE=function(Y,oe){return Y>>>=0,oe||he(Y,4,this.length),b.read(this,Y,!0,23,4)},v.prototype.readFloatBE=function(Y,oe){return Y>>>=0,oe||he(Y,4,this.length),b.read(this,Y,!1,23,4)},v.prototype.readDoubleLE=function(Y,oe){return Y>>>=0,oe||he(Y,8,this.length),b.read(this,Y,!0,52,8)},v.prototype.readDoubleBE=function(Y,oe){return Y>>>=0,oe||he(Y,8,this.length),b.read(this,Y,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(Y,oe,Le,et){Y=+Y,oe>>>=0,Le>>>=0,et||Se(this,Y,oe,Le,Math.pow(2,8*Le)-1,0);let ct=1,Et=0;for(this[oe]=255&Y;++Et<Le&&(ct*=256);)this[oe+Et]=Y/ct&255;return oe+Le},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(Y,oe,Le,et){Y=+Y,oe>>>=0,Le>>>=0,et||Se(this,Y,oe,Le,Math.pow(2,8*Le)-1,0);let ct=Le-1,Et=1;for(this[oe+ct]=255&Y;--ct>=0&&(Et*=256);)this[oe+ct]=Y/Et&255;return oe+Le},v.prototype.writeUint8=v.prototype.writeUInt8=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,1,255,0),this[oe]=255&Y,oe+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,2,65535,0),this[oe]=255&Y,this[oe+1]=Y>>>8,oe+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,2,65535,0),this[oe]=Y>>>8,this[oe+1]=255&Y,oe+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,4,4294967295,0),this[oe+3]=Y>>>24,this[oe+2]=Y>>>16,this[oe+1]=Y>>>8,this[oe]=255&Y,oe+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,4,4294967295,0),this[oe]=Y>>>24,this[oe+1]=Y>>>16,this[oe+2]=Y>>>8,this[oe+3]=255&Y,oe+4},v.prototype.writeBigUInt64LE=wt(function(Y,oe=0){return tt(this,Y,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeBigUInt64BE=wt(function(Y,oe=0){return ft(this,Y,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeIntLE=function(Y,oe,Le,et){if(Y=+Y,oe>>>=0,!et){const Bn=Math.pow(2,8*Le-1);Se(this,Y,oe,Le,Bn-1,-Bn)}let ct=0,Et=1,sn=0;for(this[oe]=255&Y;++ct<Le&&(Et*=256);)Y<0&&0===sn&&0!==this[oe+ct-1]&&(sn=1),this[oe+ct]=(Y/Et>>0)-sn&255;return oe+Le},v.prototype.writeIntBE=function(Y,oe,Le,et){if(Y=+Y,oe>>>=0,!et){const Bn=Math.pow(2,8*Le-1);Se(this,Y,oe,Le,Bn-1,-Bn)}let ct=Le-1,Et=1,sn=0;for(this[oe+ct]=255&Y;--ct>=0&&(Et*=256);)Y<0&&0===sn&&0!==this[oe+ct+1]&&(sn=1),this[oe+ct]=(Y/Et>>0)-sn&255;return oe+Le},v.prototype.writeInt8=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,1,127,-128),Y<0&&(Y=255+Y+1),this[oe]=255&Y,oe+1},v.prototype.writeInt16LE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,2,32767,-32768),this[oe]=255&Y,this[oe+1]=Y>>>8,oe+2},v.prototype.writeInt16BE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,2,32767,-32768),this[oe]=Y>>>8,this[oe+1]=255&Y,oe+2},v.prototype.writeInt32LE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,4,2147483647,-2147483648),this[oe]=255&Y,this[oe+1]=Y>>>8,this[oe+2]=Y>>>16,this[oe+3]=Y>>>24,oe+4},v.prototype.writeInt32BE=function(Y,oe,Le){return Y=+Y,oe>>>=0,Le||Se(this,Y,oe,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),this[oe]=Y>>>24,this[oe+1]=Y>>>16,this[oe+2]=Y>>>8,this[oe+3]=255&Y,oe+4},v.prototype.writeBigInt64LE=wt(function(Y,oe=0){return tt(this,Y,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeBigInt64BE=wt(function(Y,oe=0){return ft(this,Y,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeFloatLE=function(Y,oe,Le){return me(this,Y,oe,!0,Le)},v.prototype.writeFloatBE=function(Y,oe,Le){return me(this,Y,oe,!1,Le)},v.prototype.writeDoubleLE=function(Y,oe,Le){return F(this,Y,oe,!0,Le)},v.prototype.writeDoubleBE=function(Y,oe,Le){return F(this,Y,oe,!1,Le)},v.prototype.copy=function(Y,oe,Le,et){if(!v.isBuffer(Y))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!et&&0!==et&&(et=this.length),oe>=Y.length&&(oe=Y.length),oe||(oe=0),et>0&&et<Le&&(et=Le),et===Le||0===Y.length||0===this.length)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(et<0)throw new RangeError("sourceEnd out of bounds");et>this.length&&(et=this.length),Y.length-oe<et-Le&&(et=Y.length-oe+Le);const ct=et-Le;return this===Y&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(oe,Le,et):Uint8Array.prototype.set.call(Y,this.subarray(Le,et),oe),ct},v.prototype.fill=function(Y,oe,Le,et){if("string"==typeof Y){if("string"==typeof oe?(et=oe,oe=0,Le=this.length):"string"==typeof Le&&(et=Le,Le=this.length),void 0!==et&&"string"!=typeof et)throw new TypeError("encoding must be a string");if("string"==typeof et&&!v.isEncoding(et))throw new TypeError("Unknown encoding: "+et);if(1===Y.length){const Et=Y.charCodeAt(0);("utf8"===et&&Et<128||"latin1"===et)&&(Y=Et)}}else"number"==typeof Y?Y&=255:"boolean"==typeof Y&&(Y=Number(Y));if(oe<0||this.length<oe||this.length<Le)throw new RangeError("Out of range index");if(Le<=oe)return this;let ct;if(oe>>>=0,Le=void 0===Le?this.length:Le>>>0,Y||(Y=0),"number"==typeof Y)for(ct=oe;ct<Le;++ct)this[ct]=Y;else{const Et=v.isBuffer(Y)?Y:v.from(Y,et),sn=Et.length;if(0===sn)throw new TypeError('The value "'+Y+'" is invalid for argument "value"');for(ct=0;ct<Le-oe;++ct)this[ct+oe]=Et[ct%sn]}return this};const I={};function se(ge,Y,oe){I[ge]=class extends oe{constructor(){super(),Object.defineProperty(this,"message",{value:Y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,delete this.name}get code(){return ge}set code(et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:et,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}function ie(ge){let Y="",oe=ge.length;const Le="-"===ge[0]?1:0;for(;oe>=Le+4;oe-=3)Y=`_${ge.slice(oe-3,oe)}${Y}`;return`${ge.slice(0,oe)}${Y}`}function Je(ge,Y,oe,Le,et,ct){if(ge>oe||ge<Y){const Et="bigint"==typeof Y?"n":"";let sn;throw sn=ct>3?0===Y||Y===BigInt(0)?`>= 0${Et} and < 2${Et} ** ${8*(ct+1)}${Et}`:`>= -(2${Et} ** ${8*(ct+1)-1}${Et}) and < 2 ** ${8*(ct+1)-1}${Et}`:`>= ${Y}${Et} and <= ${oe}${Et}`,new I.ERR_OUT_OF_RANGE("value",sn,ge)}!function He(ge,Y,oe){fe(Y,"offset"),(void 0===ge[Y]||void 0===ge[Y+oe])&&re(Y,ge.length-(oe+1))}(Le,et,ct)}function fe(ge,Y){if("number"!=typeof ge)throw new I.ERR_INVALID_ARG_TYPE(Y,"number",ge)}function re(ge,Y,oe){throw Math.floor(ge)!==ge?(fe(ge,oe),new I.ERR_OUT_OF_RANGE(oe||"offset","an integer",ge)):Y<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(oe||"offset",`>= ${oe?1:0} and <= ${Y}`,ge)}se("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(ge,Y){return`The "${ge}" argument must be of type number. Received type ${typeof Y}`},TypeError),se("ERR_OUT_OF_RANGE",function(ge,Y,oe){let Le=`The value of "${ge}" is out of range.`,et=oe;return Number.isInteger(oe)&&Math.abs(oe)>2**32?et=ie(String(oe)):"bigint"==typeof oe&&(et=String(oe),(oe>BigInt(2)**BigInt(32)||oe<-(BigInt(2)**BigInt(32)))&&(et=ie(et)),et+="n"),Le+=` It must be ${Y}. Received ${et}`,Le},RangeError);const $=/[^+/0-9A-Za-z-_]/g;function U(ge,Y){let oe;Y=Y||1/0;const Le=ge.length;let et=null;const ct=[];for(let Et=0;Et<Le;++Et){if(oe=ge.charCodeAt(Et),oe>55295&&oe<57344){if(!et){if(oe>56319){(Y-=3)>-1&&ct.push(239,191,189);continue}if(Et+1===Le){(Y-=3)>-1&&ct.push(239,191,189);continue}et=oe;continue}if(oe<56320){(Y-=3)>-1&&ct.push(239,191,189),et=oe;continue}oe=65536+(et-55296<<10|oe-56320)}else et&&(Y-=3)>-1&&ct.push(239,191,189);if(et=null,oe<128){if((Y-=1)<0)break;ct.push(oe)}else if(oe<2048){if((Y-=2)<0)break;ct.push(oe>>6|192,63&oe|128)}else if(oe<65536){if((Y-=3)<0)break;ct.push(oe>>12|224,oe>>6&63|128,63&oe|128)}else{if(!(oe<1114112))throw new Error("Invalid code point");if((Y-=4)<0)break;ct.push(oe>>18|240,oe>>12&63|128,oe>>6&63|128,63&oe|128)}}return ct}function ye(ge){return C.toByteArray(function P(ge){if((ge=(ge=ge.split("=")[0]).trim().replace($,"")).length<2)return"";for(;ge.length%4!=0;)ge+="=";return ge}(ge))}function Ve(ge,Y,oe,Le){let et;for(et=0;et<Le&&!(et+oe>=Y.length||et>=ge.length);++et)Y[et+oe]=ge[et];return et}function rt(ge,Y){return ge instanceof Y||null!=ge&&null!=ge.constructor&&null!=ge.constructor.name&&ge.constructor.name===Y.name}function _t(ge){return ge!=ge}const At=function(){const ge="0123456789abcdef",Y=new Array(256);for(let oe=0;oe<16;++oe){const Le=16*oe;for(let et=0;et<16;++et)Y[Le+et]=ge[oe]+ge[et]}return Y}();function wt(ge){return typeof BigInt>"u"?Xt:ge}function Xt(){throw new Error("BigInt not supported")}},7054:function(ee,q,g){"use strict";var C=this&&this.__createBinding||(Object.create?function(D,S,k,_){void 0===_&&(_=k),Object.defineProperty(D,_,{enumerable:!0,get:function(){return S[k]}})}:function(D,S,k,_){void 0===_&&(_=k),D[_]=S[k]}),b=this&&this.__exportStar||function(D,S){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(S,k)&&C(S,D,k)};Object.defineProperty(q,"__esModule",{value:!0}),b(g(361),q)},361:(ee,q)=>{"use strict";function C(S){const k=[];let _=0;for(;_<S.length;)switch(S[_]){case"/":if("."===S[_+1])if("."===S[_+2]){if(!D(S[_+3])){k.push([]),_++;break}k.pop(),S[_+3]||k.push([]),_+=3}else{if(!D(S[_+2])){k.push([]),_++;break}S[_+2]||k.push([]),_+=2}else k.push([]),_++;break;case"#":case"?":k.length||k.push([]),k[k.length-1].push(S.substr(_)),_=S.length;break;default:k.length||k.push([]),k[k.length-1].push(S[_]),_++}return"/"+k.map(v=>v.join("")).join("/")}function b(S,k){let _=k+1;k>=0?"/"===S[k+1]&&"/"===S[k+2]&&(_=k+3):"/"===S[0]&&"/"===S[1]&&(_=2);const v=S.indexOf("/",_);return v<0?S:S.substr(0,v)+C(S.substr(v))}function D(S){return!S||"#"===S||"?"===S||"/"===S}Object.defineProperty(q,"__esModule",{value:!0}),q.removeDotSegmentsOfPath=q.removeDotSegments=q.resolve=void 0,q.resolve=function g(S,k){const _=(k=k||"").indexOf("#");if(_>0&&(k=k.substr(0,_)),!S.length){if(k.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${k}' for value '${S}'`);return k}if(S.startsWith("?")){const A=k.indexOf("?");return A>0&&(k=k.substr(0,A)),k+S}if(S.startsWith("#"))return k+S;if(!k.length){const A=S.indexOf(":");if(A<0)throw new Error(`Found invalid relative IRI '${S}' for a missing baseIRI`);return b(S,A)}const v=S.indexOf(":");if(v>=0)return b(S,v);const T=k.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${k}' for value '${S}'`);const j=k.substr(0,T+1);if(0===S.indexOf("//"))return j+b(S,v);let O;if(k.indexOf("//",T)===T+1){if(O=k.indexOf("/",T+3),O<0)return k.length>T+3?k+"/"+b(S,v):j+b(S,v)}else if(O=k.indexOf("/",T+1),O<0)return j+b(S,v);if(0===S.indexOf("/"))return k.substr(0,O)+C(S);let B=k.substr(O);const Q=B.lastIndexOf("/");return Q>=0&&Q<B.length-1&&(B=B.substr(0,Q+1),"."===S[0]&&"."!==S[1]&&"/"!==S[1]&&S[2]&&(S=S.substr(1))),S=C(S=B+S),k.substr(0,O)+S},q.removeDotSegments=C,q.removeDotSegmentsOfPath=b},9528:(ee,q,g)=>{!function(C){C.parser=function(F,I){return new D(F,I)},C.SAXParser=D,C.SAXStream=O,C.createStream=function j(F,I){return new O(F,I)},C.MAX_BUFFER_LENGTH=65536;var v,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function D(F,I){if(!(this instanceof D))return new D(F,I);var se=this;(function k(F){for(var I=0,se=b.length;I<se;I++)F[b[I]]=""})(se),se.q=se.c="",se.bufferCheckPosition=C.MAX_BUFFER_LENGTH,se.opt=I||{},se.opt.lowercase=se.opt.lowercase||se.opt.lowercasetags,se.looseCase=se.opt.lowercase?"toLowerCase":"toUpperCase",se.tags=[],se.closed=se.closedRoot=se.sawRoot=!1,se.tag=se.error=null,se.strict=!!F,se.noscript=!(!F&&!se.opt.noscript),se.state=G.BEGIN,se.strictEntities=se.opt.strictEntities,se.ENTITIES=Object.create(se.strictEntities?C.XML_ENTITIES:C.ENTITIES),se.attribList=[],se.opt.xmlns&&(se.ns=Object.create(ae)),se.trackPosition=!1!==se.opt.position,se.trackPosition&&(se.position=se.line=se.column=0),ce(se,"onready")}C.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(F){function I(){}return I.prototype=F,new I}),Object.keys||(Object.keys=function(F){var I=[];for(var se in F)F.hasOwnProperty(se)&&I.push(se);return I}),D.prototype={end:function(){Ke(this)},write:function me(F){var I=this;if(this.error)throw this.error;if(I.closed)return Ze(I,"Cannot write after close. Assign an onready handler.");if(null===F)return Ke(I);"object"==typeof F&&(F=F.toString());for(var se=0,ie="";ie=qe(F,se++),I.c=ie,ie;)switch(I.trackPosition&&(I.position++,"\n"===ie?(I.line++,I.column=0):I.column++),I.state){case G.BEGIN:if(I.state=G.BEGIN_WHITESPACE,"\ufeff"===ie)continue;ft(I,ie);continue;case G.BEGIN_WHITESPACE:ft(I,ie);continue;case G.TEXT:if(I.sawRoot&&!I.closedRoot){for(var He=se-1;ie&&"<"!==ie&&"&"!==ie;)(ie=qe(F,se++))&&I.trackPosition&&(I.position++,"\n"===ie?(I.line++,I.column=0):I.column++);I.textNode+=F.substring(He,se-1)}"<"!==ie||I.sawRoot&&I.closedRoot&&!I.strict?(!z(ie)&&(!I.sawRoot||I.closedRoot)&&Me(I,"Text data outside of root node."),"&"===ie?I.state=G.TEXT_ENTITY:I.textNode+=ie):(I.state=G.OPEN_WAKA,I.startTagPosition=I.position);continue;case G.SCRIPT:"<"===ie?I.state=G.SCRIPT_ENDING:I.script+=ie;continue;case G.SCRIPT_ENDING:"/"===ie?I.state=G.CLOSE_TAG:(I.script+="<"+ie,I.state=G.SCRIPT);continue;case G.OPEN_WAKA:"!"===ie?(I.state=G.SGML_DECL,I.sgmlDecl=""):z(ie)||(R(X,ie)?(I.state=G.OPEN_TAG,I.tagName=ie):"/"===ie?(I.state=G.CLOSE_TAG,I.tagName=""):"?"===ie?(I.state=G.PROC_INST,I.procInstName=I.procInstBody=""):(Me(I,"Unencoded <"),I.startTagPosition+1<I.position&&(ie=new Array(I.position-I.startTagPosition).join(" ")+ie),I.textNode+="<"+ie,I.state=G.TEXT));continue;case G.SGML_DECL:(I.sgmlDecl+ie).toUpperCase()===B?(be(I,"onopencdata"),I.state=G.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+ie==="--"?(I.state=G.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+ie).toUpperCase()===Q?(I.state=G.DOCTYPE,(I.doctype||I.sawRoot)&&Me(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===ie?(be(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=G.TEXT):(x(ie)&&(I.state=G.SGML_DECL_QUOTED),I.sgmlDecl+=ie);continue;case G.SGML_DECL_QUOTED:ie===I.q&&(I.state=G.SGML_DECL,I.q=""),I.sgmlDecl+=ie;continue;case G.DOCTYPE:">"===ie?(I.state=G.TEXT,be(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=ie,"["===ie?I.state=G.DOCTYPE_DTD:x(ie)&&(I.state=G.DOCTYPE_QUOTED,I.q=ie));continue;case G.DOCTYPE_QUOTED:I.doctype+=ie,ie===I.q&&(I.q="",I.state=G.DOCTYPE);continue;case G.DOCTYPE_DTD:I.doctype+=ie,"]"===ie?I.state=G.DOCTYPE:x(ie)&&(I.state=G.DOCTYPE_DTD_QUOTED,I.q=ie);continue;case G.DOCTYPE_DTD_QUOTED:I.doctype+=ie,ie===I.q&&(I.state=G.DOCTYPE_DTD,I.q="");continue;case G.COMMENT:"-"===ie?I.state=G.COMMENT_ENDING:I.comment+=ie;continue;case G.COMMENT_ENDING:"-"===ie?(I.state=G.COMMENT_ENDED,I.comment=Ne(I.opt,I.comment),I.comment&&be(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+ie,I.state=G.COMMENT);continue;case G.COMMENT_ENDED:">"!==ie?(Me(I,"Malformed comment"),I.comment+="--"+ie,I.state=G.COMMENT):I.state=G.TEXT;continue;case G.CDATA:"]"===ie?I.state=G.CDATA_ENDING:I.cdata+=ie;continue;case G.CDATA_ENDING:"]"===ie?I.state=G.CDATA_ENDING_2:(I.cdata+="]"+ie,I.state=G.CDATA);continue;case G.CDATA_ENDING_2:">"===ie?(I.cdata&&be(I,"oncdata",I.cdata),be(I,"onclosecdata"),I.cdata="",I.state=G.TEXT):"]"===ie?I.cdata+="]":(I.cdata+="]]"+ie,I.state=G.CDATA);continue;case G.PROC_INST:"?"===ie?I.state=G.PROC_INST_ENDING:z(ie)?I.state=G.PROC_INST_BODY:I.procInstName+=ie;continue;case G.PROC_INST_BODY:if(!I.procInstBody&&z(ie))continue;"?"===ie?I.state=G.PROC_INST_ENDING:I.procInstBody+=ie;continue;case G.PROC_INST_ENDING:">"===ie?(be(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=G.TEXT):(I.procInstBody+="?"+ie,I.state=G.PROC_INST_BODY);continue;case G.OPEN_TAG:R(J,ie)?I.tagName+=ie:(ze(I),">"===ie?he(I):"/"===ie?I.state=G.OPEN_TAG_SLASH:(z(ie)||Me(I,"Invalid character in tag name"),I.state=G.ATTRIB));continue;case G.OPEN_TAG_SLASH:">"===ie?(he(I,!0),Se(I)):(Me(I,"Forward-slash in opening tag not followed by >"),I.state=G.ATTRIB);continue;case G.ATTRIB:if(z(ie))continue;">"===ie?he(I):"/"===ie?I.state=G.OPEN_TAG_SLASH:R(X,ie)?(I.attribName=ie,I.attribValue="",I.state=G.ATTRIB_NAME):Me(I,"Invalid attribute name");continue;case G.ATTRIB_NAME:"="===ie?I.state=G.ATTRIB_VALUE:">"===ie?(Me(I,"Attribute without value"),I.attribValue=I.attribName,je(I),he(I)):z(ie)?I.state=G.ATTRIB_NAME_SAW_WHITE:R(J,ie)?I.attribName+=ie:Me(I,"Invalid attribute name");continue;case G.ATTRIB_NAME_SAW_WHITE:if("="===ie)I.state=G.ATTRIB_VALUE;else{if(z(ie))continue;Me(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",be(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===ie?he(I):R(X,ie)?(I.attribName=ie,I.state=G.ATTRIB_NAME):(Me(I,"Invalid attribute name"),I.state=G.ATTRIB)}continue;case G.ATTRIB_VALUE:if(z(ie))continue;x(ie)?(I.q=ie,I.state=G.ATTRIB_VALUE_QUOTED):(Me(I,"Unquoted attribute value"),I.state=G.ATTRIB_VALUE_UNQUOTED,I.attribValue=ie);continue;case G.ATTRIB_VALUE_QUOTED:if(ie!==I.q){"&"===ie?I.state=G.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=ie;continue}je(I),I.q="",I.state=G.ATTRIB_VALUE_CLOSED;continue;case G.ATTRIB_VALUE_CLOSED:z(ie)?I.state=G.ATTRIB:">"===ie?he(I):"/"===ie?I.state=G.OPEN_TAG_SLASH:R(X,ie)?(Me(I,"No whitespace between attributes"),I.attribName=ie,I.attribValue="",I.state=G.ATTRIB_NAME):Me(I,"Invalid attribute name");continue;case G.ATTRIB_VALUE_UNQUOTED:if(!N(ie)){"&"===ie?I.state=G.ATTRIB_VALUE_ENTITY_U:I.attribValue+=ie;continue}je(I),">"===ie?he(I):I.state=G.ATTRIB;continue;case G.CLOSE_TAG:if(I.tagName)">"===ie?Se(I):R(J,ie)?I.tagName+=ie:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=G.SCRIPT):(z(ie)||Me(I,"Invalid tagname in closing tag"),I.state=G.CLOSE_TAG_SAW_WHITE);else{if(z(ie))continue;le(X,ie)?I.script?(I.script+="</"+ie,I.state=G.SCRIPT):Me(I,"Invalid tagname in closing tag."):I.tagName=ie}continue;case G.CLOSE_TAG_SAW_WHITE:if(z(ie))continue;">"===ie?Se(I):Me(I,"Invalid characters in closing tag");continue;case G.TEXT_ENTITY:case G.ATTRIB_VALUE_ENTITY_Q:case G.ATTRIB_VALUE_ENTITY_U:var fe,re;switch(I.state){case G.TEXT_ENTITY:fe=G.TEXT,re="textNode";break;case G.ATTRIB_VALUE_ENTITY_Q:fe=G.ATTRIB_VALUE_QUOTED,re="attribValue";break;case G.ATTRIB_VALUE_ENTITY_U:fe=G.ATTRIB_VALUE_UNQUOTED,re="attribValue"}if(";"===ie)if(I.opt.unparsedEntities){var $=tt(I);I.entity="",I.state=fe,I.write($)}else I[re]+=tt(I),I.entity="",I.state=fe;else R(I.entity.length?W:Z,ie)?I.entity+=ie:(Me(I,"Invalid character in entity name"),I[re]+="&"+I.entity+ie,I.entity="",I.state=fe);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function S(F){for(var I=Math.max(C.MAX_BUFFER_LENGTH,10),se=0,ie=0,He=b.length;ie<He;ie++){var Je=F[b[ie]].length;if(Je>I)switch(b[ie]){case"textNode":ke(F);break;case"cdata":be(F,"oncdata",F.cdata),F.cdata="";break;case"script":be(F,"onscript",F.script),F.script="";break;default:Ze(F,"Max buffer length exceeded: "+b[ie])}se=Math.max(se,Je)}F.bufferCheckPosition=C.MAX_BUFFER_LENGTH-se+F.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(F){ke(F),""!==F.cdata&&(be(F,"oncdata",F.cdata),F.cdata=""),""!==F.script&&(be(F,"onscript",F.script),F.script="")}(this)}};try{v=g(1793).Stream}catch{v=function(){}}v||(v=function(){});var T=C.EVENTS.filter(function(F){return"error"!==F&&"end"!==F});function O(F,I){if(!(this instanceof O))return new O(F,I);v.apply(this),this._parser=new D(F,I),this.writable=!0,this.readable=!0;var se=this;this._parser.onend=function(){se.emit("end")},this._parser.onerror=function(ie){se.emit("error",ie),se._parser.error=null},this._decoder=null,T.forEach(function(ie){Object.defineProperty(se,"on"+ie,{get:function(){return se._parser["on"+ie]},set:function(He){if(!He)return se.removeAllListeners(ie),se._parser["on"+ie]=He,He;se.on(ie,He)},enumerable:!0,configurable:!1})})}(O.prototype=Object.create(v.prototype,{constructor:{value:O}})).write=function(F){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(F)){if(!this._decoder){var I=g(2024).StringDecoder;this._decoder=new I("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},O.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},O.prototype.on=function(F,I){var se=this;return!se._parser["on"+F]&&-1!==T.indexOf(F)&&(se._parser["on"+F]=function(){var ie=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ie.splice(0,0,F),se.emit.apply(se,ie)}),v.prototype.on.call(se,F,I)};var B="[CDATA[",Q="DOCTYPE",A="http://www.w3.org/XML/1998/namespace",L="http://www.w3.org/2000/xmlns/",ae={xml:A,xmlns:L},X=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,J=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,Z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function z(F){return" "===F||"\n"===F||"\r"===F||"\t"===F}function x(F){return'"'===F||"'"===F}function N(F){return">"===F||z(F)}function R(F,I){return F.test(I)}function le(F,I){return!R(F,I)}var F,I,se,G=0;for(var Te in C.STATE={BEGIN:G++,BEGIN_WHITESPACE:G++,TEXT:G++,TEXT_ENTITY:G++,OPEN_WAKA:G++,SGML_DECL:G++,SGML_DECL_QUOTED:G++,DOCTYPE:G++,DOCTYPE_QUOTED:G++,DOCTYPE_DTD:G++,DOCTYPE_DTD_QUOTED:G++,COMMENT_STARTING:G++,COMMENT:G++,COMMENT_ENDING:G++,COMMENT_ENDED:G++,CDATA:G++,CDATA_ENDING:G++,CDATA_ENDING_2:G++,PROC_INST:G++,PROC_INST_BODY:G++,PROC_INST_ENDING:G++,OPEN_TAG:G++,OPEN_TAG_SLASH:G++,ATTRIB:G++,ATTRIB_NAME:G++,ATTRIB_NAME_SAW_WHITE:G++,ATTRIB_VALUE:G++,ATTRIB_VALUE_QUOTED:G++,ATTRIB_VALUE_CLOSED:G++,ATTRIB_VALUE_UNQUOTED:G++,ATTRIB_VALUE_ENTITY_Q:G++,ATTRIB_VALUE_ENTITY_U:G++,CLOSE_TAG:G++,CLOSE_TAG_SAW_WHITE:G++,SCRIPT:G++,SCRIPT_ENDING:G++},C.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},C.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(C.ENTITIES).forEach(function(F){var I=C.ENTITIES[F],se="number"==typeof I?String.fromCharCode(I):I;C.ENTITIES[F]=se}),C.STATE)C.STATE[C.STATE[Te]]=Te;function ce(F,I,se){F[I]&&F[I](se)}function be(F,I,se){F.textNode&&ke(F),ce(F,I,se)}function ke(F){F.textNode=Ne(F.opt,F.textNode),F.textNode&&ce(F,"ontext",F.textNode),F.textNode=""}function Ne(F,I){return F.trim&&(I=I.trim()),F.normalize&&(I=I.replace(/\s+/g," ")),I}function Ze(F,I){return ke(F),F.trackPosition&&(I+="\nLine: "+F.line+"\nColumn: "+F.column+"\nChar: "+F.c),I=new Error(I),F.error=I,ce(F,"onerror",I),F}function Ke(F){return F.sawRoot&&!F.closedRoot&&Me(F,"Unclosed root tag"),F.state!==G.BEGIN&&F.state!==G.BEGIN_WHITESPACE&&F.state!==G.TEXT&&Ze(F,"Unexpected end"),ke(F),F.c="",F.closed=!0,ce(F,"onend"),D.call(F,F.strict,F.opt),F}function Me(F,I){if("object"!=typeof F||!(F instanceof D))throw new Error("bad call to strictFail");F.strict&&Ze(F,I)}function ze(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var I=F.tags[F.tags.length-1]||F,se=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(se.ns=I.ns),F.attribList.length=0,be(F,"onopentagstart",se)}function Ce(F,I){var ie=F.indexOf(":")<0?["",F]:F.split(":"),He=ie[0],Je=ie[1];return I&&"xmlns"===F&&(He="xmlns",Je=""),{prefix:He,local:Je}}function je(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),-1!==F.attribList.indexOf(F.attribName)||F.tag.attributes.hasOwnProperty(F.attribName))F.attribName=F.attribValue="";else{if(F.opt.xmlns){var I=Ce(F.attribName,!0),ie=I.local;if("xmlns"===I.prefix)if("xml"===ie&&F.attribValue!==A)Me(F,"xml: prefix must be bound to "+A+"\nActual: "+F.attribValue);else if("xmlns"===ie&&F.attribValue!==L)Me(F,"xmlns: prefix must be bound to "+L+"\nActual: "+F.attribValue);else{var He=F.tag,Je=F.tags[F.tags.length-1]||F;He.ns===Je.ns&&(He.ns=Object.create(Je.ns)),He.ns[ie]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,be(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}}function he(F,I){if(F.opt.xmlns){var se=F.tag,ie=Ce(F.tagName);se.prefix=ie.prefix,se.local=ie.local,se.uri=se.ns[ie.prefix]||"",se.prefix&&!se.uri&&(Me(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),se.uri=ie.prefix),se.ns&&(F.tags[F.tags.length-1]||F).ns!==se.ns&&Object.keys(se.ns).forEach(function(rt){be(F,"onopennamespace",{prefix:rt,uri:se.ns[rt]})});for(var Je=0,fe=F.attribList.length;Je<fe;Je++){var re=F.attribList[Je],$=re[0],P=re[1],U=Ce($,!0),pe=U.prefix,ye=""===pe?"":se.ns[pe]||"",Ve={name:$,value:P,prefix:pe,local:U.local,uri:ye};pe&&"xmlns"!==pe&&!ye&&(Me(F,"Unbound namespace prefix: "+JSON.stringify(pe)),Ve.uri=pe),F.tag.attributes[$]=Ve,be(F,"onattribute",Ve)}F.attribList.length=0}F.tag.isSelfClosing=!!I,F.sawRoot=!0,F.tags.push(F.tag),be(F,"onopentag",F.tag),I||(F.state=F.noscript||"script"!==F.tagName.toLowerCase()?G.TEXT:G.SCRIPT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function Se(F){if(!F.tagName)return Me(F,"Weird empty close tag."),F.textNode+="</>",void(F.state=G.TEXT);if(F.script){if("script"!==F.tagName)return F.script+="</"+F.tagName+">",F.tagName="",void(F.state=G.SCRIPT);be(F,"onscript",F.script),F.script=""}var I=F.tags.length,se=F.tagName;F.strict||(se=se[F.looseCase]());for(var ie=se;I--&&F.tags[I].name!==ie;)Me(F,"Unexpected close tag");if(I<0)return Me(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",void(F.state=G.TEXT);F.tagName=se;for(var Je=F.tags.length;Je-- >I;){var fe=F.tag=F.tags.pop();F.tagName=F.tag.name,be(F,"onclosetag",F.tagName);var re={};for(var $ in fe.ns)re[$]=fe.ns[$];F.opt.xmlns&&fe.ns!==(F.tags[F.tags.length-1]||F).ns&&Object.keys(fe.ns).forEach(function(U){be(F,"onclosenamespace",{prefix:U,uri:fe.ns[U]})})}0===I&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=G.TEXT}function tt(F){var ie,I=F.entity,se=I.toLowerCase(),He="";return F.ENTITIES[I]?F.ENTITIES[I]:F.ENTITIES[se]?F.ENTITIES[se]:("#"===(I=se).charAt(0)&&("x"===I.charAt(1)?(I=I.slice(2),He=(ie=parseInt(I,16)).toString(16)):(I=I.slice(1),He=(ie=parseInt(I,10)).toString(10))),I=I.replace(/^0+/,""),isNaN(ie)||He.toLowerCase()!==I?(Me(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(ie))}function ft(F,I){"<"===I?(F.state=G.OPEN_WAKA,F.startTagPosition=F.position):z(I)||(Me(F,"Non-whitespace before first tag."),F.textNode=I,F.state=G.TEXT)}function qe(F,I){var se="";return I<F.length&&(se=F.charAt(I)),se}G=C.STATE,String.fromCodePoint||(F=String.fromCharCode,I=Math.floor,se=function(){var He=[],re=-1,$=arguments.length;if(!$)return"";for(var P="";++re<$;){var U=Number(arguments[re]);if(!isFinite(U)||U<0||U>1114111||I(U)!==U)throw RangeError("Invalid code point: "+U);U<=65535?He.push(U):He.push(55296+((U-=65536)>>10),U%1024+56320),(re+1===$||He.length>16384)&&(P+=F.apply(null,He),He.length=0)}return P},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:se,configurable:!0,writable:!0}):String.fromCodePoint=se)}(q)},8280:function(){!function(ee,q){"use strict";if(!ee.setImmediate){var S,g=1,C={},b=!1,D=ee.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(ee);ae=ae&&ae.setTimeout?ae:ee,"[object process]"==={}.toString.call(ee.process)?function j(){S=function(X){process.nextTick(function(){T(X)})}}():function O(){if(ee.postMessage&&!ee.importScripts){var X=!0,J=ee.onmessage;return ee.onmessage=function(){X=!1},ee.postMessage("","*"),ee.onmessage=J,X}}()?function B(){var X="setImmediate$"+Math.random()+"$",J=function(Z){Z.source===ee&&"string"==typeof Z.data&&0===Z.data.indexOf(X)&&T(+Z.data.slice(X.length))};ee.addEventListener?ee.addEventListener("message",J,!1):ee.attachEvent("onmessage",J),S=function(Z){ee.postMessage(X+Z,"*")}}():ee.MessageChannel?function Q(){var X=new MessageChannel;X.port1.onmessage=function(J){T(J.data)},S=function(J){X.port2.postMessage(J)}}():D&&"onreadystatechange"in D.createElement("script")?function A(){var X=D.documentElement;S=function(J){var Z=D.createElement("script");Z.onreadystatechange=function(){T(J),Z.onreadystatechange=null,X.removeChild(Z),Z=null},X.appendChild(Z)}}():function L(){S=function(X){setTimeout(T,0,X)}}(),ae.setImmediate=function k(X){"function"!=typeof X&&(X=new Function(""+X));for(var J=new Array(arguments.length-1),Z=0;Z<J.length;Z++)J[Z]=arguments[Z+1];return C[g]={callback:X,args:J},S(g),g++},ae.clearImmediate=_}function _(X){delete C[X]}function T(X){if(b)setTimeout(T,0,X);else{var J=C[X];if(J){b=!0;try{!function v(X){var J=X.callback,Z=X.args;switch(Z.length){case 0:J();break;case 1:J(Z[0]);break;case 2:J(Z[0],Z[1]);break;case 3:J(Z[0],Z[1],Z[2]);break;default:J.apply(undefined,Z)}}(J)}finally{_(X),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(ee,q,g)=>{ee.exports=D;var C=g(2016).EventEmitter;function D(){C.call(this)}g(6698)(D,C),D.Readable=g(842),D.Writable=g(7597),D.Duplex=g(2232),D.Transform=g(555),D.PassThrough=g(8226),D.finished=g(1227),D.pipeline=g(2345),D.Stream=D,D.prototype.pipe=function(S,k){var _=this;function v(L){S.writable&&!1===S.write(L)&&_.pause&&_.pause()}function T(){_.readable&&_.resume&&_.resume()}_.on("data",v),S.on("drain",T),!S._isStdio&&(!k||!1!==k.end)&&(_.on("end",O),_.on("close",B));var j=!1;function O(){j||(j=!0,S.end())}function B(){j||(j=!0,"function"==typeof S.destroy&&S.destroy())}function Q(L){if(A(),0===C.listenerCount(this,"error"))throw L}function A(){_.removeListener("data",v),S.removeListener("drain",T),_.removeListener("end",O),_.removeListener("close",B),_.removeListener("error",Q),S.removeListener("error",Q),_.removeListener("end",A),_.removeListener("close",A),S.removeListener("close",A)}return _.on("error",Q),S.on("error",Q),_.on("end",A),_.on("close",A),S.on("close",A),S.emit("pipe",_),S}},9555:ee=>{"use strict";var g={};function C(_,v,T){T||(T=Error);var O=function(B){function Q(A,L,ae){return B.call(this,function j(B,Q,A){return"string"==typeof v?v:v(B,Q,A)}(A,L,ae))||this}return function q(_,v){_.prototype=Object.create(v.prototype),_.prototype.constructor=_,_.__proto__=v}(Q,B),Q}(T);O.prototype.name=T.name,O.prototype.code=_,g[_]=O}function b(_,v){if(Array.isArray(_)){var T=_.length;return _=_.map(function(j){return String(j)}),T>2?"one of ".concat(v," ").concat(_.slice(0,T-1).join(", "),", or ")+_[T-1]:2===T?"one of ".concat(v," ").concat(_[0]," or ").concat(_[1]):"of ".concat(v," ").concat(_[0])}return"of ".concat(v," ").concat(String(_))}C("ERR_INVALID_OPT_VALUE",function(_,v){return'The value "'+v+'" is invalid for option "'+_+'"'},TypeError),C("ERR_INVALID_ARG_TYPE",function(_,v,T){var j,O;if("string"==typeof v&&function D(_,v,T){return _.substr(!T||T<0?0:+T,v.length)===v}(v,"not ")?(j="must not be",v=v.replace(/^not /,"")):j="must be",function S(_,v,T){return(void 0===T||T>_.length)&&(T=_.length),_.substring(T-v.length,T)===v}(_," argument"))O="The ".concat(_," ").concat(j," ").concat(b(v,"type"));else{var B=function k(_,v,T){return"number"!=typeof T&&(T=0),!(T+v.length>_.length)&&-1!==_.indexOf(v,T)}(_,".")?"property":"argument";O='The "'.concat(_,'" ').concat(B," ").concat(j," ").concat(b(v,"type"))}return O+". Received type ".concat(typeof T)},TypeError),C("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),C("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),C("ERR_STREAM_PREMATURE_CLOSE","Premature close"),C("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),C("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),C("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),C("ERR_STREAM_WRITE_AFTER_END","write after end"),C("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),C("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),C("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.q=g},2232:(ee,q,g)=>{"use strict";var C=Object.keys||function(O){var B=[];for(var Q in O)B.push(Q);return B};ee.exports=v;var b=g(842),D=g(7597);g(6698)(v,b);for(var S=C(D.prototype),k=0;k<S.length;k++){var _=S[k];v.prototype[_]||(v.prototype[_]=D.prototype[_])}function v(O){if(!(this instanceof v))return new v(O);b.call(this,O),D.call(this,O),this.allowHalfOpen=!0,O&&(!1===O.readable&&(this.readable=!1),!1===O.writable&&(this.writable=!1),!1===O.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||process.nextTick(j,this)}function j(O){O.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(B){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=B,this._writableState.destroyed=B)}})},8226:(ee,q,g)=>{"use strict";ee.exports=b;var C=g(555);function b(D){if(!(this instanceof b))return new b(D);C.call(this,D)}g(6698)(b,C),b.prototype._transform=function(D,S,k){k(null,D)}},842:(ee,q,g)=>{"use strict";var C;ee.exports=ce,ce.ReadableState=Te,g(2016);var O,D=function(re,$){return re.listeners($).length},S=g(3951),k=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},j=g(964);O=j&&j.debuglog?j.debuglog("stream"):function(){};var z,x,N,B=g(2998),Q=g(3992),L=g(4962).getHighWaterMark,ae=g(9555).q,X=ae.ERR_INVALID_ARG_TYPE,J=ae.ERR_STREAM_PUSH_AFTER_EOF,Z=ae.ERR_METHOD_NOT_IMPLEMENTED,W=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(ce,S);var R=Q.errorOrDestroy,le=["error","close","destroy","pause","resume"];function Te(fe,re,$){C=C||g(2232),"boolean"!=typeof $&&($=re instanceof C),this.objectMode=!!(fe=fe||{}).objectMode,$&&(this.objectMode=this.objectMode||!!fe.readableObjectMode),this.highWaterMark=L(this,fe,"readableHighWaterMark",$),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.destroyed=!1,this.defaultEncoding=fe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,fe.encoding&&(z||(z=g(2024).StringDecoder),this.decoder=new z(fe.encoding),this.encoding=fe.encoding)}function ce(fe){if(C=C||g(2232),!(this instanceof ce))return new ce(fe);this._readableState=new Te(fe,this,this instanceof C),this.readable=!0,fe&&("function"==typeof fe.read&&(this._read=fe.read),"function"==typeof fe.destroy&&(this._destroy=fe.destroy)),S.call(this)}function be(fe,re,$,P,U){O("readableAddChunk",re);var $e,pe=fe._readableState;if(null===re)pe.reading=!1,function ze(fe,re){if(O("onEofChunk"),!re.ended){if(re.decoder){var $=re.decoder.end();$&&$.length&&(re.buffer.push($),re.length+=re.objectMode?1:$.length)}re.ended=!0,re.sync?Ce(fe):(re.needReadable=!1,re.emittedReadable||(re.emittedReadable=!0,je(fe)))}}(fe,pe);else if(U||($e=function Ne(fe,re){var $;return!function T(fe){return k.isBuffer(fe)||fe instanceof _}(re)&&"string"!=typeof re&&void 0!==re&&!fe.objectMode&&($=new X("chunk",["string","Buffer","Uint8Array"],re)),$}(pe,re)),$e)R(fe,$e);else if(pe.objectMode||re&&re.length>0)if("string"!=typeof re&&!pe.objectMode&&Object.getPrototypeOf(re)!==k.prototype&&(re=function v(fe){return k.from(fe)}(re)),P)pe.endEmitted?R(fe,new W):ke(fe,pe,re,!0);else if(pe.ended)R(fe,new J);else{if(pe.destroyed)return!1;pe.reading=!1,pe.decoder&&!$?(re=pe.decoder.write(re),pe.objectMode||0!==re.length?ke(fe,pe,re,!1):he(fe,pe)):ke(fe,pe,re,!1)}else P||(pe.reading=!1,he(fe,pe));return!pe.ended&&(pe.length<pe.highWaterMark||0===pe.length)}function ke(fe,re,$,P){re.flowing&&0===re.length&&!re.sync?(re.awaitDrain=0,fe.emit("data",$)):(re.length+=re.objectMode?1:$.length,P?re.buffer.unshift($):re.buffer.push($),re.needReadable&&Ce(fe)),he(fe,re)}Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(re){this._readableState&&(this._readableState.destroyed=re)}}),ce.prototype.destroy=Q.destroy,ce.prototype._undestroy=Q.undestroy,ce.prototype._destroy=function(fe,re){re(fe)},ce.prototype.push=function(fe,re){var P,$=this._readableState;return $.objectMode?P=!0:"string"==typeof fe&&((re=re||$.defaultEncoding)!==$.encoding&&(fe=k.from(fe,re),re=""),P=!0),be(this,fe,re,!1,P)},ce.prototype.unshift=function(fe){return be(this,fe,null,!0,!1)},ce.prototype.isPaused=function(){return!1===this._readableState.flowing},ce.prototype.setEncoding=function(fe){z||(z=g(2024).StringDecoder);var re=new z(fe);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var $=this._readableState.buffer.head,P="";null!==$;)P+=re.write($.data),$=$.next;return this._readableState.buffer.clear(),""!==P&&this._readableState.buffer.push(P),this._readableState.length=P.length,this};var Ze=1073741824;function Me(fe,re){return fe<=0||0===re.length&&re.ended?0:re.objectMode?1:fe!=fe?re.flowing&&re.length?re.buffer.head.data.length:re.length:(fe>re.highWaterMark&&(re.highWaterMark=function Ke(fe){return fe>=Ze?fe=Ze:(fe--,fe|=fe>>>1,fe|=fe>>>2,fe|=fe>>>4,fe|=fe>>>8,fe|=fe>>>16,fe++),fe}(fe)),fe<=re.length?fe:re.ended?re.length:(re.needReadable=!0,0))}function Ce(fe){var re=fe._readableState;O("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(O("emitReadable",re.flowing),re.emittedReadable=!0,process.nextTick(je,fe))}function je(fe){var re=fe._readableState;O("emitReadable_",re.destroyed,re.length,re.ended),!re.destroyed&&(re.length||re.ended)&&(fe.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,I(fe)}function he(fe,re){re.readingMore||(re.readingMore=!0,process.nextTick(Se,fe,re))}function Se(fe,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&0===re.length);){var $=re.length;if(O("maybeReadMore read 0"),fe.read(0),$===re.length)break}re.readingMore=!1}function ft(fe){var re=fe._readableState;re.readableListening=fe.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:fe.listenerCount("data")>0&&fe.resume()}function qe(fe){O("readable nexttick read 0"),fe.read(0)}function F(fe,re){O("resume",re.reading),re.reading||fe.read(0),re.resumeScheduled=!1,fe.emit("resume"),I(fe),re.flowing&&!re.reading&&fe.read(0)}function I(fe){var re=fe._readableState;for(O("flow",re.flowing);re.flowing&&null!==fe.read(););}function se(fe,re){return 0===re.length?null:(re.objectMode?$=re.buffer.shift():!fe||fe>=re.length?($=re.decoder?re.buffer.join(""):1===re.buffer.length?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):$=re.buffer.consume(fe,re.decoder),$);var $}function ie(fe){var re=fe._readableState;O("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,process.nextTick(He,re,fe))}function He(fe,re){if(O("endReadableNT",fe.endEmitted,fe.length),!fe.endEmitted&&0===fe.length&&(fe.endEmitted=!0,re.readable=!1,re.emit("end"),fe.autoDestroy)){var $=re._writableState;(!$||$.autoDestroy&&$.finished)&&re.destroy()}}function Je(fe,re){for(var $=0,P=fe.length;$<P;$++)if(fe[$]===re)return $;return-1}ce.prototype.read=function(fe){O("read",fe),fe=parseInt(fe,10);var re=this._readableState,$=fe;if(0!==fe&&(re.emittedReadable=!1),0===fe&&re.needReadable&&((0!==re.highWaterMark?re.length>=re.highWaterMark:re.length>0)||re.ended))return O("read: emitReadable",re.length,re.ended),0===re.length&&re.ended?ie(this):Ce(this),null;if(0===(fe=Me(fe,re))&&re.ended)return 0===re.length&&ie(this),null;var U,P=re.needReadable;return O("need readable",P),(0===re.length||re.length-fe<re.highWaterMark)&&O("length less than watermark",P=!0),re.ended||re.reading?O("reading or ended",P=!1):P&&(O("do read"),re.reading=!0,re.sync=!0,0===re.length&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(fe=Me($,re))),null===(U=fe>0?se(fe,re):null)?(re.needReadable=re.length<=re.highWaterMark,fe=0):(re.length-=fe,re.awaitDrain=0),0===re.length&&(re.ended||(re.needReadable=!0),$!==fe&&re.ended&&ie(this)),null!==U&&this.emit("data",U),U},ce.prototype._read=function(fe){R(this,new Z("_read()"))},ce.prototype.pipe=function(fe,re){var $=this,P=this._readableState;switch(P.pipesCount){case 0:P.pipes=fe;break;case 1:P.pipes=[P.pipes,fe];break;default:P.pipes.push(fe)}P.pipesCount+=1,O("pipe count=%d opts=%j",P.pipesCount,re);var pe=re&&!1===re.end||fe===process.stdout||fe===process.stderr?Y:ye;function ye(){O("onend"),fe.end()}P.endEmitted?process.nextTick(pe):$.once("end",pe),fe.on("unpipe",function $e(oe,Le){O("onunpipe"),oe===$&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,function _t(){O("cleanup"),fe.removeListener("close",Xt),fe.removeListener("finish",ge),fe.removeListener("drain",Ve),fe.removeListener("error",wt),fe.removeListener("unpipe",$e),$.removeListener("end",ye),$.removeListener("end",Y),$.removeListener("data",At),rt=!0,P.awaitDrain&&(!fe._writableState||fe._writableState.needDrain)&&Ve()}())});var Ve=function tt(fe){return function(){var $=fe._readableState;O("pipeOnDrain",$.awaitDrain),$.awaitDrain&&$.awaitDrain--,0===$.awaitDrain&&D(fe,"data")&&($.flowing=!0,I(fe))}}($);fe.on("drain",Ve);var rt=!1;function At(oe){O("ondata");var Le=fe.write(oe);O("dest.write",Le),!1===Le&&((1===P.pipesCount&&P.pipes===fe||P.pipesCount>1&&-1!==Je(P.pipes,fe))&&!rt&&(O("false write response, pause",P.awaitDrain),P.awaitDrain++),$.pause())}function wt(oe){O("onerror",oe),Y(),fe.removeListener("error",wt),0===D(fe,"error")&&R(fe,oe)}function Xt(){fe.removeListener("finish",ge),Y()}function ge(){O("onfinish"),fe.removeListener("close",Xt),Y()}function Y(){O("unpipe"),$.unpipe(fe)}return $.on("data",At),function G(fe,re,$){if("function"==typeof fe.prependListener)return fe.prependListener(re,$);fe._events&&fe._events[re]?Array.isArray(fe._events[re])?fe._events[re].unshift($):fe._events[re]=[$,fe._events[re]]:fe.on(re,$)}(fe,"error",wt),fe.once("close",Xt),fe.once("finish",ge),fe.emit("pipe",$),P.flowing||(O("pipe resume"),$.resume()),fe},ce.prototype.unpipe=function(fe){var re=this._readableState,$={hasUnpiped:!1};if(0===re.pipesCount)return this;if(1===re.pipesCount)return fe&&fe!==re.pipes||(fe||(fe=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,fe&&fe.emit("unpipe",this,$)),this;if(!fe){var P=re.pipes,U=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var pe=0;pe<U;pe++)P[pe].emit("unpipe",this,{hasUnpiped:!1});return this}var $e=Je(re.pipes,fe);return-1===$e||(re.pipes.splice($e,1),re.pipesCount-=1,1===re.pipesCount&&(re.pipes=re.pipes[0]),fe.emit("unpipe",this,$)),this},ce.prototype.addListener=ce.prototype.on=function(fe,re){var $=S.prototype.on.call(this,fe,re),P=this._readableState;return"data"===fe?(P.readableListening=this.listenerCount("readable")>0,!1!==P.flowing&&this.resume()):"readable"===fe&&!P.endEmitted&&!P.readableListening&&(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,O("on readable",P.length,P.reading),P.length?Ce(this):P.reading||process.nextTick(qe,this)),$},ce.prototype.removeListener=function(fe,re){var $=S.prototype.removeListener.call(this,fe,re);return"readable"===fe&&process.nextTick(ft,this),$},ce.prototype.removeAllListeners=function(fe){var re=S.prototype.removeAllListeners.apply(this,arguments);return("readable"===fe||void 0===fe)&&process.nextTick(ft,this),re},ce.prototype.resume=function(){var fe=this._readableState;return fe.flowing||(O("resume"),fe.flowing=!fe.readableListening,function me(fe,re){re.resumeScheduled||(re.resumeScheduled=!0,process.nextTick(F,fe,re))}(this,fe)),fe.paused=!1,this},ce.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ce.prototype.wrap=function(fe){var re=this,$=this._readableState,P=!1;for(var U in fe.on("end",function(){if(O("wrapped end"),$.decoder&&!$.ended){var $e=$.decoder.end();$e&&$e.length&&re.push($e)}re.push(null)}),fe.on("data",function($e){O("wrapped data"),$.decoder&&($e=$.decoder.write($e)),$.objectMode&&null==$e||!($.objectMode||$e&&$e.length)||re.push($e)||(P=!0,fe.pause())}),fe)void 0===this[U]&&"function"==typeof fe[U]&&(this[U]=function(ye){return function(){return fe[ye].apply(fe,arguments)}}(U));for(var pe=0;pe<le.length;pe++)fe.on(le[pe],this.emit.bind(this,le[pe]));return this._read=function($e){O("wrapped _read",$e),P&&(P=!1,fe.resume())},this},"function"==typeof Symbol&&(ce.prototype[Symbol.asyncIterator]=function(){return void 0===x&&(x=g(2590)),x(this)}),Object.defineProperty(ce.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ce.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ce.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}}),ce._fromList=se,Object.defineProperty(ce.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ce.from=function(fe,re){return void 0===N&&(N=g(5374)),N(ce,fe,re)})},555:(ee,q,g)=>{"use strict";ee.exports=T;var C=g(9555).q,b=C.ERR_METHOD_NOT_IMPLEMENTED,D=C.ERR_MULTIPLE_CALLBACK,S=C.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=C.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function v(B,Q){var A=this._transformState;A.transforming=!1;var L=A.writecb;if(null===L)return this.emit("error",new D);A.writechunk=null,A.writecb=null,null!=Q&&this.push(Q),L(B);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function T(B){if(!(this instanceof T))return new T(B);_.call(this,B),this._transformState={afterTransform:v.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,B&&("function"==typeof B.transform&&(this._transform=B.transform),"function"==typeof B.flush&&(this._flush=B.flush)),this.on("prefinish",j)}function j(){var B=this;"function"!=typeof this._flush||this._readableState.destroyed?O(this,null,null):this._flush(function(Q,A){O(B,Q,A)})}function O(B,Q,A){if(Q)return B.emit("error",Q);if(null!=A&&B.push(A),B._writableState.length)throw new k;if(B._transformState.transforming)throw new S;return B.push(null)}g(6698)(T,_),T.prototype.push=function(B,Q){return this._transformState.needTransform=!1,_.prototype.push.call(this,B,Q)},T.prototype._transform=function(B,Q,A){A(new b("_transform()"))},T.prototype._write=function(B,Q,A){var L=this._transformState;if(L.writecb=A,L.writechunk=B,L.writeencoding=Q,!L.transforming){var ae=this._readableState;(L.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},T.prototype._read=function(B){var Q=this._transformState;null===Q.writechunk||Q.transforming?Q.needTransform=!0:(Q.transforming=!0,this._transform(Q.writechunk,Q.writeencoding,Q.afterTransform))},T.prototype._destroy=function(B,Q){_.prototype._destroy.call(this,B,function(A){Q(A)})}},7597:(ee,q,g)=>{"use strict";function b(I){var se=this;this.next=null,this.entry=null,this.finish=function(){!function F(I,se,ie){var He=I.entry;for(I.entry=null;He;){var Je=He.callback;se.pendingcb--,Je(ie),He=He.next}se.corkedRequestsFree.next=I}(se,I)}}var D;ee.exports=Te,Te.WritableState=le;var G,S={deprecate:g(496)},k=g(3951),_=g(9007).Buffer,v=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},O=g(3992),Q=g(4962).getHighWaterMark,A=g(9555).q,L=A.ERR_INVALID_ARG_TYPE,ae=A.ERR_METHOD_NOT_IMPLEMENTED,X=A.ERR_MULTIPLE_CALLBACK,J=A.ERR_STREAM_CANNOT_PIPE,Z=A.ERR_STREAM_DESTROYED,W=A.ERR_STREAM_NULL_VALUES,z=A.ERR_STREAM_WRITE_AFTER_END,x=A.ERR_UNKNOWN_ENCODING,N=O.errorOrDestroy;function R(){}function le(I,se,ie){D=D||g(2232),"boolean"!=typeof ie&&(ie=se instanceof D),this.objectMode=!!(I=I||{}).objectMode,ie&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=Q(this,I,"writableHighWaterMark",ie),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===I.decodeStrings),this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Je){!function ze(I,se){var ie=I._writableState,He=ie.sync,Je=ie.writecb;if("function"!=typeof Je)throw new X;if(function Me(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}(ie),se)!function Ke(I,se,ie,He,Je){--se.pendingcb,ie?(process.nextTick(Je,He),process.nextTick(qe,I,se),I._writableState.errorEmitted=!0,N(I,He)):(Je(He),I._writableState.errorEmitted=!0,N(I,He),qe(I,se))}(I,ie,He,se,Je);else{var fe=Se(ie)||I.destroyed;!fe&&!ie.corked&&!ie.bufferProcessing&&ie.bufferedRequest&&he(I,ie),He?process.nextTick(Ce,I,ie,fe,Je):Ce(I,ie,fe,Je)}}(se,Je)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==I.emitClose,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Te(I){var se=this instanceof(D=D||g(2232));if(!se&&!G.call(Te,this))return new Te(I);this._writableState=new le(I,this,se),this.writable=!0,I&&("function"==typeof I.write&&(this._write=I.write),"function"==typeof I.writev&&(this._writev=I.writev),"function"==typeof I.destroy&&(this._destroy=I.destroy),"function"==typeof I.final&&(this._final=I.final)),k.call(this)}function Ze(I,se,ie,He,Je,fe,re){se.writelen=He,se.writecb=re,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new Z("write")):ie?I._writev(Je,se.onwrite):I._write(Je,fe,se.onwrite),se.sync=!1}function Ce(I,se,ie,He){ie||function je(I,se){0===se.length&&se.needDrain&&(se.needDrain=!1,I.emit("drain"))}(I,se),se.pendingcb--,He(),qe(I,se)}function he(I,se){se.bufferProcessing=!0;var ie=se.bufferedRequest;if(I._writev&&ie&&ie.next){var Je=new Array(se.bufferedRequestCount),fe=se.corkedRequestsFree;fe.entry=ie;for(var re=0,$=!0;ie;)Je[re]=ie,ie.isBuf||($=!1),ie=ie.next,re+=1;Je.allBuffers=$,Ze(I,se,!0,se.length,Je,"",fe.finish),se.pendingcb++,se.lastBufferedRequest=null,fe.next?(se.corkedRequestsFree=fe.next,fe.next=null):se.corkedRequestsFree=new b(se),se.bufferedRequestCount=0}else{for(;ie;){var P=ie.chunk;if(Ze(I,se,!1,se.objectMode?1:P.length,P,ie.encoding,ie.callback),ie=ie.next,se.bufferedRequestCount--,se.writing)break}null===ie&&(se.lastBufferedRequest=null)}se.bufferedRequest=ie,se.bufferProcessing=!1}function Se(I){return I.ending&&0===I.length&&null===I.bufferedRequest&&!I.finished&&!I.writing}function tt(I,se){I._final(function(ie){se.pendingcb--,ie&&N(I,ie),se.prefinished=!0,I.emit("prefinish"),qe(I,se)})}function qe(I,se){var ie=Se(se);if(ie&&(function ft(I,se){!se.prefinished&&!se.finalCalled&&("function"!=typeof I._final||se.destroyed?(se.prefinished=!0,I.emit("prefinish")):(se.pendingcb++,se.finalCalled=!0,process.nextTick(tt,I,se)))}(I,se),0===se.pendingcb&&(se.finished=!0,I.emit("finish"),se.autoDestroy))){var He=I._readableState;(!He||He.autoDestroy&&He.endEmitted)&&I.destroy()}return ie}g(6698)(Te,k),le.prototype.getBuffer=function(){for(var se=this.bufferedRequest,ie=[];se;)ie.push(se),se=se.next;return ie},function(){try{Object.defineProperty(le.prototype,"buffer",{get:S.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(G=Function.prototype[Symbol.hasInstance],Object.defineProperty(Te,Symbol.hasInstance,{value:function(se){return!!G.call(this,se)||this===Te&&se&&se._writableState instanceof le}})):G=function(se){return se instanceof this},Te.prototype.pipe=function(){N(this,new J)},Te.prototype.write=function(I,se,ie){var He=this._writableState,Je=!1,fe=!He.objectMode&&function j(I){return _.isBuffer(I)||I instanceof v}(I);return fe&&!_.isBuffer(I)&&(I=function T(I){return _.from(I)}(I)),"function"==typeof se&&(ie=se,se=null),fe?se="buffer":se||(se=He.defaultEncoding),"function"!=typeof ie&&(ie=R),He.ending?function ce(I,se){var ie=new z;N(I,ie),process.nextTick(se,ie)}(this,ie):(fe||function be(I,se,ie,He){var Je;return null===ie?Je=new W:"string"!=typeof ie&&!se.objectMode&&(Je=new L("chunk",["string","Buffer"],ie)),!Je||(N(I,Je),process.nextTick(He,Je),!1)}(this,He,I,ie))&&(He.pendingcb++,Je=function Ne(I,se,ie,He,Je,fe){if(!ie){var re=function ke(I,se,ie){return!I.objectMode&&!1!==I.decodeStrings&&"string"==typeof se&&(se=_.from(se,ie)),se}(se,He,Je);He!==re&&(ie=!0,Je="buffer",He=re)}var $=se.objectMode?1:He.length;se.length+=$;var P=se.length<se.highWaterMark;if(P||(se.needDrain=!0),se.writing||se.corked){var U=se.lastBufferedRequest;se.lastBufferedRequest={chunk:He,encoding:Je,isBuf:ie,callback:fe,next:null},U?U.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else Ze(I,se,!1,$,He,Je,fe);return P}(this,He,fe,I,se,ie)),Je},Te.prototype.cork=function(){this._writableState.corked++},Te.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&he(this,I))},Te.prototype.setDefaultEncoding=function(se){if("string"==typeof se&&(se=se.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((se+"").toLowerCase())>-1))throw new x(se);return this._writableState.defaultEncoding=se,this},Object.defineProperty(Te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Te.prototype._write=function(I,se,ie){ie(new ae("_write()"))},Te.prototype._writev=null,Te.prototype.end=function(I,se,ie){var He=this._writableState;return"function"==typeof I?(ie=I,I=null,se=null):"function"==typeof se&&(ie=se,se=null),null!=I&&this.write(I,se),He.corked&&(He.corked=1,this.uncork()),He.ending||function me(I,se,ie){se.ending=!0,qe(I,se),ie&&(se.finished?process.nextTick(ie):I.once("finish",ie)),se.ended=!0,I.writable=!1}(this,He,ie),this},Object.defineProperty(Te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Te.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(se){this._writableState&&(this._writableState.destroyed=se)}}),Te.prototype.destroy=O.destroy,Te.prototype._undestroy=O.undestroy,Te.prototype._destroy=function(I,se){se(I)}},2590:(ee,q,g)=>{"use strict";var C;function b(z,x,N){return x=function D(z){var x=function S(z,x){if("object"!=typeof z||null===z)return z;var N=z[Symbol.toPrimitive];if(void 0!==N){var R=N.call(z,x||"default");if("object"!=typeof R)return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(z)}(z,"string");return"symbol"==typeof x?x:String(x)}(x),x in z?Object.defineProperty(z,x,{value:N,enumerable:!0,configurable:!0,writable:!0}):z[x]=N,z}var k=g(1227),_=Symbol("lastResolve"),v=Symbol("lastReject"),T=Symbol("error"),j=Symbol("ended"),O=Symbol("lastPromise"),B=Symbol("handlePromise"),Q=Symbol("stream");function A(z,x){return{value:z,done:x}}function L(z){var x=z[_];if(null!==x){var N=z[Q].read();null!==N&&(z[O]=null,z[_]=null,z[v]=null,x(A(N,!1)))}}function ae(z){process.nextTick(L,z)}var J=Object.getPrototypeOf(function(){}),Z=Object.setPrototypeOf((b(C={get stream(){return this[Q]},next:function(){var x=this,N=this[T];if(null!==N)return Promise.reject(N);if(this[j])return Promise.resolve(A(void 0,!0));if(this[Q].destroyed)return new Promise(function(Te,ce){process.nextTick(function(){x[T]?ce(x[T]):Te(A(void 0,!0))})});var le,R=this[O];if(R)le=new Promise(function X(z,x){return function(N,R){z.then(function(){x[j]?N(A(void 0,!0)):x[B](N,R)},R)}}(R,this));else{var G=this[Q].read();if(null!==G)return Promise.resolve(A(G,!1));le=new Promise(this[B])}return this[O]=le,le}},Symbol.asyncIterator,function(){return this}),b(C,"return",function(){var x=this;return new Promise(function(N,R){x[Q].destroy(null,function(le){le?R(le):N(A(void 0,!0))})})}),C),J);ee.exports=function(x){var N,R=Object.create(Z,(b(N={},Q,{value:x,writable:!0}),b(N,_,{value:null,writable:!0}),b(N,v,{value:null,writable:!0}),b(N,T,{value:null,writable:!0}),b(N,j,{value:x._readableState.endEmitted,writable:!0}),b(N,B,{value:function(G,Te){var ce=R[Q].read();ce?(R[O]=null,R[_]=null,R[v]=null,G(A(ce,!1))):(R[_]=G,R[v]=Te)},writable:!0}),N));return R[O]=null,k(x,function(le){if(le&&"ERR_STREAM_PREMATURE_CLOSE"!==le.code){var G=R[v];return null!==G&&(R[O]=null,R[_]=null,R[v]=null,G(le)),void(R[T]=le)}var Te=R[_];null!==Te&&(R[O]=null,R[_]=null,R[v]=null,Te(A(void 0,!0))),R[j]=!0}),x.on("readable",ae.bind(null,R)),R}},2998:(ee,q,g)=>{"use strict";function C(ae,X){var J=Object.keys(ae);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ae);X&&(Z=Z.filter(function(W){return Object.getOwnPropertyDescriptor(ae,W).enumerable})),J.push.apply(J,Z)}return J}function b(ae){for(var X=1;X<arguments.length;X++){var J=null!=arguments[X]?arguments[X]:{};X%2?C(Object(J),!0).forEach(function(Z){D(ae,Z,J[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(J)):C(Object(J)).forEach(function(Z){Object.defineProperty(ae,Z,Object.getOwnPropertyDescriptor(J,Z))})}return ae}function D(ae,X,J){return(X=v(X))in ae?Object.defineProperty(ae,X,{value:J,enumerable:!0,configurable:!0,writable:!0}):ae[X]=J,ae}function k(ae,X){for(var J=0;J<X.length;J++){var Z=X[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(ae,v(Z.key),Z)}}function v(ae){var X=function T(ae,X){if("object"!=typeof ae||null===ae)return ae;var J=ae[Symbol.toPrimitive];if(void 0!==J){var Z=J.call(ae,X||"default");if("object"!=typeof Z)return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===X?String:Number)(ae)}(ae,"string");return"symbol"==typeof X?X:String(X)}var O=g(9007).Buffer,Q=g(9862).inspect,A=Q&&Q.custom||"inspect";function L(ae,X,J){O.prototype.copy.call(ae,X,J)}ee.exports=function(){function ae(){(function S(ae,X){if(!(ae instanceof X))throw new TypeError("Cannot call a class as a function")})(this,ae),this.head=null,this.tail=null,this.length=0}return function _(ae,X,J){X&&k(ae.prototype,X),J&&k(ae,J),Object.defineProperty(ae,"prototype",{writable:!1})}(ae,[{key:"push",value:function(J){var Z={data:J,next:null};this.length>0?this.tail.next=Z:this.head=Z,this.tail=Z,++this.length}},{key:"unshift",value:function(J){var Z={data:J,next:this.head};0===this.length&&(this.tail=Z),this.head=Z,++this.length}},{key:"shift",value:function(){if(0!==this.length){var J=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,J}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(J){if(0===this.length)return"";for(var Z=this.head,W=""+Z.data;Z=Z.next;)W+=J+Z.data;return W}},{key:"concat",value:function(J){if(0===this.length)return O.alloc(0);for(var Z=O.allocUnsafe(J>>>0),W=this.head,z=0;W;)L(W.data,Z,z),z+=W.data.length,W=W.next;return Z}},{key:"consume",value:function(J,Z){var W;return J<this.head.data.length?(W=this.head.data.slice(0,J),this.head.data=this.head.data.slice(J)):W=J===this.head.data.length?this.shift():Z?this._getString(J):this._getBuffer(J),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(J){var Z=this.head,W=1,z=Z.data;for(J-=z.length;Z=Z.next;){var x=Z.data,N=J>x.length?x.length:J;if(z+=N===x.length?x:x.slice(0,J),0==(J-=N)){N===x.length?(++W,this.head=Z.next?Z.next:this.tail=null):(this.head=Z,Z.data=x.slice(N));break}++W}return this.length-=W,z}},{key:"_getBuffer",value:function(J){var Z=O.allocUnsafe(J),W=this.head,z=1;for(W.data.copy(Z),J-=W.data.length;W=W.next;){var x=W.data,N=J>x.length?x.length:J;if(x.copy(Z,Z.length-J,0,N),0==(J-=N)){N===x.length?(++z,this.head=W.next?W.next:this.tail=null):(this.head=W,W.data=x.slice(N));break}++z}return this.length-=z,Z}},{key:A,value:function(J,Z){return Q(this,b(b({},Z),{},{depth:0,customInspect:!1}))}}]),ae}()},3992:ee=>{"use strict";function g(k,_){D(k,_),C(k)}function C(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function D(k,_){k.emit("error",_)}ee.exports={destroy:function q(k,_){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(D,this,k)):process.nextTick(D,this,k)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(k||null,function(O){!_&&O?v._writableState?v._writableState.errorEmitted?process.nextTick(C,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,O)):process.nextTick(g,v,O):_?(process.nextTick(C,v),_(O)):process.nextTick(C,v)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function S(k,_){var v=k._readableState,T=k._writableState;v&&v.autoDestroy||T&&T.autoDestroy?k.destroy(_):k.emit("error",_)}}},1227:(ee,q,g)=>{"use strict";var C=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function D(){}ee.exports=function k(_,v,T){if("function"==typeof v)return k(_,null,v);v||(v={}),T=function b(_){var v=!1;return function(){if(!v){v=!0;for(var T=arguments.length,j=new Array(T),O=0;O<T;O++)j[O]=arguments[O];_.apply(this,j)}}}(T||D);var j=v.readable||!1!==v.readable&&_.readable,O=v.writable||!1!==v.writable&&_.writable,B=function(){_.writable||A()},Q=_._writableState&&_._writableState.finished,A=function(){O=!1,Q=!0,j||T.call(_)},L=_._readableState&&_._readableState.endEmitted,ae=function(){j=!1,L=!0,O||T.call(_)},X=function(z){T.call(_,z)},J=function(){var z;return j&&!L?((!_._readableState||!_._readableState.ended)&&(z=new C),T.call(_,z)):O&&!Q?((!_._writableState||!_._writableState.ended)&&(z=new C),T.call(_,z)):void 0},Z=function(){_.req.on("finish",A)};return function S(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",A),_.on("abort",J),_.req?Z():_.on("request",Z)):O&&!_._writableState&&(_.on("end",B),_.on("close",B)),_.on("end",ae),_.on("finish",A),!1!==v.error&&_.on("error",X),_.on("close",J),function(){_.removeListener("complete",A),_.removeListener("abort",J),_.removeListener("request",Z),_.req&&_.req.removeListener("finish",A),_.removeListener("end",B),_.removeListener("close",B),_.removeListener("finish",A),_.removeListener("end",ae),_.removeListener("error",X),_.removeListener("close",J)}}},5374:ee=>{ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(ee,q,g)=>{"use strict";var C,D=g(9555).q,S=D.ERR_MISSING_ARGS,k=D.ERR_STREAM_DESTROYED;function _(A){if(A)throw A}function j(A){A()}function O(A,L){return A.pipe(L)}ee.exports=function Q(){for(var A=arguments.length,L=new Array(A),ae=0;ae<A;ae++)L[ae]=arguments[ae];var X=function B(A){return A.length&&"function"==typeof A[A.length-1]?A.pop():_}(L);if(Array.isArray(L[0])&&(L=L[0]),L.length<2)throw new S("streams");var J,Z=L.map(function(W,z){var x=z<L.length-1;return function T(A,L,ae,X){X=function b(A){var L=!1;return function(){L||(L=!0,A.apply(void 0,arguments))}}(X);var J=!1;A.on("close",function(){J=!0}),void 0===C&&(C=g(1227)),C(A,{readable:L,writable:ae},function(W){if(W)return X(W);J=!0,X()});var Z=!1;return function(W){if(!J&&!Z){if(Z=!0,function v(A){return A.setHeader&&"function"==typeof A.abort}(A))return A.abort();if("function"==typeof A.destroy)return A.destroy();X(W||new k("pipe"))}}}(W,x,z>0,function(R){J||(J=R),R&&Z.forEach(j),!x&&(Z.forEach(j),X(J))})});return L.reduce(O)}},4962:(ee,q,g)=>{"use strict";var C=g(9555).q.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function D(S,k,_,v){var T=function b(S,k,_){return null!=S.highWaterMark?S.highWaterMark:k?S[_]:null}(k,v,_);if(null!=T){if(!isFinite(T)||Math.floor(T)!==T||T<0)throw new C(v?_:"highWaterMark",T);return Math.floor(T)}return S.objectMode?16:16384}}},3951:(ee,q,g)=>{ee.exports=g(2016).EventEmitter},2024:(ee,q,g)=>{"use strict";var C=g(4282).Buffer,b=C.isEncoding||function(Z){switch((Z=""+Z)&&Z.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(Z){var W;switch(this.encoding=function S(Z){var W=function D(Z){if(!Z)return"utf8";for(var W;;)switch(Z){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Z;default:if(W)return;Z=(""+Z).toLowerCase(),W=!0}}(Z);if("string"!=typeof W&&(C.isEncoding===b||!b(Z)))throw new Error("Unknown encoding: "+Z);return W||Z}(Z),this.encoding){case"utf16le":this.text=Q,this.end=A,W=4;break;case"utf8":this.fillLast=j,W=4;break;case"base64":this.text=L,this.end=ae,W=3;break;default:return this.write=X,void(this.end=J)}this.lastNeed=0,this.lastTotal=0,this.lastChar=C.allocUnsafe(W)}function _(Z){return Z<=127?0:Z>>5==6?2:Z>>4==14?3:Z>>3==30?4:Z>>6==2?-1:-2}function j(Z){var W=this.lastTotal-this.lastNeed,z=function T(Z,W,z){if(128!=(192&W[0]))return Z.lastNeed=0,"\ufffd";if(Z.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return Z.lastNeed=1,"\ufffd";if(Z.lastNeed>2&&W.length>2&&128!=(192&W[2]))return Z.lastNeed=2,"\ufffd"}}(this,Z);return void 0!==z?z:this.lastNeed<=Z.length?(Z.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(Z.copy(this.lastChar,W,0,Z.length),void(this.lastNeed-=Z.length))}function Q(Z,W){if((Z.length-W)%2==0){var z=Z.toString("utf16le",W);if(z){var x=z.charCodeAt(z.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Z[Z.length-2],this.lastChar[1]=Z[Z.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Z[Z.length-1],Z.toString("utf16le",W,Z.length-1)}function A(Z){var W=Z&&Z.length?this.write(Z):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function L(Z,W){var z=(Z.length-W)%3;return 0===z?Z.toString("base64",W):(this.lastNeed=3-z,this.lastTotal=3,1===z?this.lastChar[0]=Z[Z.length-1]:(this.lastChar[0]=Z[Z.length-2],this.lastChar[1]=Z[Z.length-1]),Z.toString("base64",W,Z.length-z))}function ae(Z){var W=Z&&Z.length?this.write(Z):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function X(Z){return Z.toString(this.encoding)}function J(Z){return Z&&Z.length?this.write(Z):""}q.StringDecoder=k,k.prototype.write=function(Z){if(0===Z.length)return"";var W,z;if(this.lastNeed){if(void 0===(W=this.fillLast(Z)))return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<Z.length?W?W+this.text(Z,z):this.text(Z,z):W||""},k.prototype.end=function B(Z){var W=Z&&Z.length?this.write(Z):"";return this.lastNeed?W+"\ufffd":W},k.prototype.text=function O(Z,W){var z=function v(Z,W,z){var x=W.length-1;if(x<z)return 0;var N=_(W[x]);return N>=0?(N>0&&(Z.lastNeed=N-1),N):--x<z||-2===N?0:(N=_(W[x]))>=0?(N>0&&(Z.lastNeed=N-2),N):--x<z||-2===N?0:(N=_(W[x]))>=0?(N>0&&(2===N?N=0:Z.lastNeed=N-3),N):0}(this,Z,W);if(!this.lastNeed)return Z.toString("utf8",W);this.lastTotal=z;var x=Z.length-(z-this.lastNeed);return Z.copy(this.lastChar,0,x),Z.toString("utf8",W,x)},k.prototype.fillLast=function(Z){if(this.lastNeed<=Z.length)return Z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Z.length),this.lastNeed-=Z.length}},4282:(ee,q,g)=>{var C=g(9007),b=C.Buffer;function D(k,_){for(var v in k)_[v]=k[v]}function S(k,_,v){return b(k,_,v)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?ee.exports=C:(D(C,q),q.Buffer=S),S.prototype=Object.create(b.prototype),D(b,S),S.from=function(k,_,v){if("number"==typeof k)throw new TypeError("Argument must not be a number");return b(k,_,v)},S.alloc=function(k,_,v){if("number"!=typeof k)throw new TypeError("Argument must be a number");var T=b(k);return void 0!==_?"string"==typeof v?T.fill(_,v):T.fill(_):T.fill(0),T},S.allocUnsafe=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return b(k)},S.allocUnsafeSlow=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return C.SlowBuffer(k)}},496:ee=>{function g(C){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[C];return null!=b&&"true"===String(b).toLowerCase()}ee.exports=function q(C,b){if(g("noDeprecation"))return C;var D=!1;return function S(){if(!D){if(g("throwDeprecation"))throw new Error(b);g("traceDeprecation")?console.trace(b):console.warn(b),D=!0}return C.apply(this,arguments)}}},1171:ee=>{"use strict";ee.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(ee,q,g)=>{"use strict";function C(_){var v=this;if(v instanceof C||(v=new C),v.tail=null,v.head=null,v.length=0,_&&"function"==typeof _.forEach)_.forEach(function(O){v.push(O)});else if(arguments.length>0)for(var T=0,j=arguments.length;T<j;T++)v.push(arguments[T]);return v}function b(_,v,T){var j=v===_.head?new k(T,null,v,_):new k(T,v,v.next,_);return null===j.next&&(_.tail=j),null===j.prev&&(_.head=j),_.length++,j}function D(_,v){_.tail=new k(v,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function S(_,v){_.head=new k(v,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function k(_,v,T,j){if(!(this instanceof k))return new k(_,v,T,j);this.list=j,this.value=_,v?(v.next=this,this.prev=v):this.prev=null,T?(T.prev=this,this.next=T):this.next=null}ee.exports=C,C.Node=k,C.create=C,C.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var v=_.next,T=_.prev;return v&&(v.prev=T),T&&(T.next=v),_===this.head&&(this.head=v),_===this.tail&&(this.tail=T),_.list.length--,_.next=null,_.prev=null,_.list=null,v},C.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var v=this.head;_.list=this,_.next=v,v&&(v.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},C.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var v=this.tail;_.list=this,_.prev=v,v&&(v.next=_),this.tail=_,this.head||(this.head=_),this.length++}},C.prototype.push=function(){for(var _=0,v=arguments.length;_<v;_++)D(this,arguments[_]);return this.length},C.prototype.unshift=function(){for(var _=0,v=arguments.length;_<v;_++)S(this,arguments[_]);return this.length},C.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},C.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},C.prototype.forEach=function(_,v){v=v||this;for(var T=this.head,j=0;null!==T;j++)_.call(v,T.value,j,this),T=T.next},C.prototype.forEachReverse=function(_,v){v=v||this;for(var T=this.tail,j=this.length-1;null!==T;j--)_.call(v,T.value,j,this),T=T.prev},C.prototype.get=function(_){for(var v=0,T=this.head;null!==T&&v<_;v++)T=T.next;if(v===_&&null!==T)return T.value},C.prototype.getReverse=function(_){for(var v=0,T=this.tail;null!==T&&v<_;v++)T=T.prev;if(v===_&&null!==T)return T.value},C.prototype.map=function(_,v){v=v||this;for(var T=new C,j=this.head;null!==j;)T.push(_.call(v,j.value,this)),j=j.next;return T},C.prototype.mapReverse=function(_,v){v=v||this;for(var T=new C,j=this.tail;null!==j;)T.push(_.call(v,j.value,this)),j=j.prev;return T},C.prototype.reduce=function(_,v){var T,j=this.head;if(arguments.length>1)T=v;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");j=this.head.next,T=this.head.value}for(var O=0;null!==j;O++)T=_(T,j.value,O),j=j.next;return T},C.prototype.reduceReverse=function(_,v){var T,j=this.tail;if(arguments.length>1)T=v;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");j=this.tail.prev,T=this.tail.value}for(var O=this.length-1;null!==j;O--)T=_(T,j.value,O),j=j.prev;return T},C.prototype.toArray=function(){for(var _=new Array(this.length),v=0,T=this.head;null!==T;v++)_[v]=T.value,T=T.next;return _},C.prototype.toArrayReverse=function(){for(var _=new Array(this.length),v=0,T=this.tail;null!==T;v++)_[v]=T.value,T=T.prev;return _},C.prototype.slice=function(_,v){(v=v||this.length)<0&&(v+=this.length),(_=_||0)<0&&(_+=this.length);var T=new C;if(v<_||v<0)return T;_<0&&(_=0),v>this.length&&(v=this.length);for(var j=0,O=this.head;null!==O&&j<_;j++)O=O.next;for(;null!==O&&j<v;j++,O=O.next)T.push(O.value);return T},C.prototype.sliceReverse=function(_,v){(v=v||this.length)<0&&(v+=this.length),(_=_||0)<0&&(_+=this.length);var T=new C;if(v<_||v<0)return T;_<0&&(_=0),v>this.length&&(v=this.length);for(var j=this.length,O=this.tail;null!==O&&j>v;j--)O=O.prev;for(;null!==O&&j>_;j--,O=O.prev)T.push(O.value);return T},C.prototype.splice=function(_,v,...T){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var j=0,O=this.head;null!==O&&j<_;j++)O=O.next;var B=[];for(j=0;O&&j<v;j++)B.push(O.value),O=this.removeNode(O);for(null===O&&(O=this.tail),O!==this.head&&O!==this.tail&&(O=O.prev),j=0;j<T.length;j++)O=b(this,O,T[j]);return B},C.prototype.reverse=function(){for(var _=this.head,v=this.tail,T=_;null!==T;T=T.prev){var j=T.prev;T.prev=T.next,T.next=j}return this.head=v,this.tail=_,this};try{g(1171)(C)}catch{}},643:()=>{},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(ee,q,g)=>{var C=g(3801);function b(D){var S,k;function _(T,j){try{var O=D[T](j),B=O.value,Q=B instanceof C;Promise.resolve(Q?B.v:B).then(function(A){if(Q){var L="return"===T?"return":"next";if(!B.k||A.done)return _(L,A);A=D[L](A).value}v(O.done?"return":"normal",A)},function(A){_("throw",A)})}catch(A){v("throw",A)}}function v(T,j){switch(T){case"return":S.resolve({value:j,done:!0});break;case"throw":S.reject(j);break;default:S.resolve({value:j,done:!1})}(S=S.next)?_(S.key,S.arg):k=null}this._invoke=function(T,j){return new Promise(function(O,B){var Q={key:T,arg:j,resolve:O,reject:B,next:null};k?k=k.next=Q:(S=k=Q,_(T,j))})},"function"!=typeof D.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(D){return this._invoke("next",D)},b.prototype.throw=function(D){return this._invoke("throw",D)},b.prototype.return=function(D){return this._invoke("return",D)},ee.exports=b,ee.exports.__esModule=!0,ee.exports.default=ee.exports},3801:ee=>{ee.exports=function q(g,C){this.v=g,this.k=C},ee.exports.__esModule=!0,ee.exports.default=ee.exports},8131:(ee,q,g)=>{var C=g(3801);ee.exports=function b(D){var S={},k=!1;function _(v,T){return k=!0,T=new Promise(function(j){j(D[v](T))}),{done:!1,value:new C(T,1)}}return S[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},S.next=function(v){return k?(k=!1,v):_("next",v)},"function"==typeof D.throw&&(S.throw=function(v){if(k)throw k=!1,v;return _("throw",v)}),"function"==typeof D.return&&(S.return=function(v){return k?(k=!1,v):_("return",v)}),S},ee.exports.__esModule=!0,ee.exports.default=ee.exports},8237:ee=>{function g(C){function b(D){if(Object(D)!==D)return Promise.reject(new TypeError(D+" is not an object."));var S=D.done;return Promise.resolve(D.value).then(function(k){return{value:k,done:S}})}return(g=function(S){this.s=S,this.n=S.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(S){var k=this.s.return;return void 0===k?Promise.resolve({value:S,done:!0}):b(k.apply(this.s,arguments))},throw:function(S){var k=this.s.return;return void 0===k?Promise.reject(S):b(k.apply(this.s,arguments))}},new g(C)}ee.exports=function q(C){var b,D,S,k=2;for(typeof Symbol<"u"&&(D=Symbol.asyncIterator,S=Symbol.iterator);k--;){if(D&&null!=(b=C[D]))return b.call(C);if(S&&null!=(b=C[S]))return new g(b.call(C));D="@@asyncIterator",S="@@iterator"}throw new TypeError("Object is not async iterable")},ee.exports.__esModule=!0,ee.exports.default=ee.exports},7156:ee=>{function q(C,b,D,S,k,_,v){try{var T=C[_](v),j=T.value}catch(O){return void D(O)}T.done?b(j):Promise.resolve(j).then(S,k)}ee.exports=function g(C){return function(){var b=this,D=arguments;return new Promise(function(S,k){var _=C.apply(b,D);function v(j){q(_,S,k,v,T,"next",j)}function T(j){q(_,S,k,v,T,"throw",j)}v(void 0)})}},ee.exports.__esModule=!0,ee.exports.default=ee.exports},6737:(ee,q,g)=>{var C=g(3801);ee.exports=function b(D){return new C(D,0)},ee.exports.__esModule=!0,ee.exports.default=ee.exports},8186:(ee,q,g)=>{var C=g(4642);ee.exports=function b(D){return function(){return new C(D.apply(this,arguments))}},ee.exports.__esModule=!0,ee.exports.default=ee.exports}},ee=>{ee(ee.s=2817)}]);