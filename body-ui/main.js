(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[179],{2943:(te,J,m)=>{"use strict";var E={};m.r(E),m.d(E,{decode:()=>kge,name:()=>Oge});var b={};m.r(b),m.d(b,{name:()=>zge,preprocess:()=>Hge});var D={};m.r(D),m.d(D,{name:()=>Gge,preprocess:()=>Wge});var A={};m.r(A),m.d(A,{decode:()=>D_e,encode:()=>R_e,name:()=>M_e,preprocess:()=>I_e});var k={};m.r(k),m.d(k,{decode:()=>V_e,name:()=>B_e});var g={};m.r(g),m.d(g,{decode:()=>K_e,encode:()=>q_e,name:()=>X_e});var y={};m.r(y),m.d(y,{decode:()=>Z_e,encode:()=>Q_e,name:()=>J_e});var M={};m.r(M),m.d(M,{decode:()=>tbe,encode:()=>nbe,name:()=>ebe});var j={};m.r(j),m.d(j,{decode:()=>sbe,name:()=>obe});var N={};function U(t){return"function"==typeof t}function ce(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}m.r(N),m.d(N,{delMany:()=>Yke,get:()=>Wke,setMany:()=>$ke});const R=ce(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function $(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ae{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(U(i))try{i()}catch(o){e=o instanceof R?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{ne(o)}catch(s){e=e??[],s instanceof R?e=[...e,...s.errors]:e.push(s)}}if(e)throw new R(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ne(e);else{if(e instanceof ae){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&$(n,e)}remove(e){const{_finalizers:n}=this;n&&$(n,e),e instanceof ae&&e._removeParent(this)}}ae.EMPTY=(()=>{const t=new ae;return t.closed=!0,t})();const Y=ae.EMPTY;function re(t){return t instanceof ae||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function ne(t){U(t)?t():t.unsubscribe()}const W={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},z={setTimeout(t,e,...n){const{delegate:i}=z;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function v(t){z.setTimeout(()=>{const{onUnhandledError:e}=W;if(!e)throw t;e(t)})}function L(){}const T=Ce("C",void 0,void 0);function Ce(t,e,n){return{kind:t,value:e,error:n}}let le=null;function xe(t){if(W.useDeprecatedSynchronousErrorHandling){const e=!le;if(e&&(le={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=le;if(le=null,n)throw i}}else t()}class De extends ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,re(e)&&e.add(this)):this.destination=Se}static create(e,n,i){return new Ne(e,n,i)}next(e){this.isStopped?me(function H(t){return Ce("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?me(function he(t){return Ce("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?me(T,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function Ye(t,e){return tt.call(t,e)}class Ae{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){ke(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){ke(i)}else ke(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ke(n)}}}class Ne extends De{constructor(e,n,i){let r;if(super(),U(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&W.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Ye(e.next,o),error:e.error&&Ye(e.error,o),complete:e.complete&&Ye(e.complete,o)}):r=e}this.destination=new Ae(r)}}function ke(t){W.useDeprecatedSynchronousErrorHandling?function Ie(t){W.useDeprecatedSynchronousErrorHandling&&le&&(le.errorThrown=!0,le.error=t)}(t):v(t)}function me(t,e){const{onStoppedNotification:n}=W;n&&z.setTimeout(()=>n(t,e))}const Se={closed:!0,next:L,error:function ze(t){throw t},complete:L},Xe="function"==typeof Symbol&&Symbol.observable||"@@observable";function rt(t){return t}function Qe(...t){return ge(t)}function ge(t){return 0===t.length?rt:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let B=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function K(t){return t&&t instanceof De||function se(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}(t)&&re(t)}(n)?n:new Ne(n,i,r);return xe(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=I(i))((r,o)=>{const s=new Ne({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Xe](){return this}pipe(...n){return ge(n)(this)}toPromise(n){return new(n=I(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function I(t){var e;return null!==(e=t??W.Promise)&&void 0!==e?e:Promise}const Fe=ce(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ve=(()=>{class t extends B{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new pe(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Fe}next(n){xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Y:(this.currentObservers=null,o.push(n),new ae(()=>{this.currentObservers=null,$(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new B;return n.source=this,n}}return t.create=(e,n)=>new pe(e,n),t})();class pe extends Ve{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:Y}}class Z extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function G(t){return U(t?.lift)}function C(t){return e=>{if(G(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function O(t,e,n,i,r){return new ue(t,e,n,i,r)}class ue extends De{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function de(t,e){return C((n,i)=>{let r=0;n.subscribe(O(i,o=>{i.next(t.call(e,o,r++))}))})}function dt(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Vt(t,e){return function(n,i){e(n,i,t)}}function oe(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function jr(t){return this instanceof jr?(this.v=t,this):new jr(t)}function Ur(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function on(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Uc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Vc(t){return U(t?.then)}function Nd(t){return U(t[Xe])}function zc(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function Fd(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nl=function Pl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Hc(t){return U(t?.[Nl])}function wi(t){return function Mo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(p){i[p]&&(r[p]=function(_){return new Promise(function(x,P){o.push([p,_,x,P])>1||a(p,_)})})}function a(p,_){try{!function c(p){p.value instanceof jr?Promise.resolve(p.value.v).then(l,d):h(o[0][2],p)}(i[p](_))}catch(x){h(o[0][3],x)}}function l(p){a("next",p)}function d(p){a("throw",p)}function h(p,_){p(_),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield jr(n.read());if(r)return yield jr(void 0);yield yield jr(i)}}finally{n.releaseLock()}})}function ac(t){return U(t?.getReader)}function Ei(t){if(t instanceof B)return t;if(null!=t){if(Nd(t))return function Ia(t){return new B(e=>{const n=t[Xe]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Uc(t))return function Da(t){return new B(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Vc(t))return function cc(t){return new B(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,v)})}(t);if(zc(t))return _e(t);if(Hc(t))return function Do(t){return new B(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(ac(t))return function Me(t){return _e(wi(t))}(t)}throw Fd(t)}function _e(t){return new B(e=>{(function we(t,e){var n,i,r,o;return function We(t,e,n,i){return new(n||(n=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Ur(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function V(t,e,n,i=0,r=!1){const o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function fe(t,e,n=1/0){return U(e)?fe((i,r)=>de((o,s)=>e(i,o,r,s))(Ei(t(i,r))),n):("number"==typeof e&&(n=e),C((i,r)=>function ie(t,e,n,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const p=()=>{h&&!c.length&&!l&&e.complete()},_=P=>l<i?x(P):c.push(P),x=P=>{o&&e.next(P),l++;let F=!1;Ei(n(P,d++)).subscribe(O(e,X=>{r?.(X),o?_(X):e.next(X)},()=>{F=!0},void 0,()=>{if(F)try{for(l--;c.length&&l<i;){const X=c.shift();s?V(e,s,()=>x(X)):x(X)}p()}catch(X){e.error(X)}}))};return t.subscribe(O(e,_,()=>{h=!0,p()})),()=>{a?.()}}(i,r,t,n)))}function Le(t=1/0){return fe(rt,t)}const $e=new B(t=>t.complete());function Tt(t){return t&&U(t.schedule)}function Ft(t){return t[t.length-1]}function en(t){return U(Ft(t))?t.pop():void 0}function gn(t){return Tt(Ft(t))?t.pop():void 0}function Ar(t,e=0){return C((n,i)=>{n.subscribe(O(i,r=>V(i,t,()=>i.next(r),e),()=>V(i,t,()=>i.complete(),e),r=>V(i,t,()=>i.error(r),e)))})}function mo(t,e=0){return C((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function lc(t,e){if(!t)throw new Error("Iterable cannot be null");return new B(n=>{V(n,e,()=>{const i=t[Symbol.asyncIterator]();V(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Fi(t,e){return e?function Fs(t,e){if(null!=t){if(Nd(t))return function Gc(t,e){return Ei(t).pipe(mo(e),Ar(e))}(t,e);if(Uc(t))return function Vr(t,e){return new B(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(Vc(t))return function ta(t,e){return Ei(t).pipe(mo(e),Ar(e))}(t,e);if(zc(t))return lc(t,e);if(Hc(t))return function Ro(t,e){return new B(n=>{let i;return V(n,e,()=>{i=t[Nl](),V(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>U(i?.return)&&i.return()})}(t,e);if(ac(t))return function Fl(t,e){return lc(wi(t),e)}(t,e)}throw Fd(t)}(t,e):Ei(t)}function go(...t){const e=gn(t),n=function po(t,e){return"number"==typeof Ft(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Ei(i[0]):Le(n)(Fi(i,e)):$e}function qt(...t){return Fi(t,gn(t))}function Oe(t={}){const{connector:e=(()=>new Ve),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},_=()=>{p(),s=c=void 0,d=h=!1},x=()=>{const P=s;_(),P?.unsubscribe()};return C((P,F)=>{l++,!h&&!d&&p();const X=c=c??e();F.add(()=>{l--,0===l&&!h&&!d&&(a=Ue(x,r))}),X.subscribe(F),!s&&l>0&&(s=new Ne({next:Q=>X.next(Q),error:Q=>{h=!0,p(),a=Ue(_,n,Q),X.error(Q)},complete:()=>{d=!0,p(),a=Ue(_,i),X.complete()}}),Ei(P).subscribe(s))})(o)}}function Ue(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Ne({next:()=>{i.unsubscribe(),t()}});return Ei(e(...n)).subscribe(i)}function qe(t,e){return C((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(O(i,c=>{r?.unsubscribe();let l=0;const d=o++;Ei(t(c,d)).subscribe(r=O(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function ht(t,e=rt){return t=t??Pt,C((n,i)=>{let r,o=!0;n.subscribe(O(i,s=>{const a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function Pt(t,e){return t===e}function Nt(t){for(let e in t)if(t[e]===Nt)return e;throw Error("Could not find renamed property on target object.")}function $n(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ri(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ri).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function vr(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const no=Nt({__forward_ref__:Nt});function qn(t){return t.__forward_ref__=qn,t.toString=function(){return ri(this())},t}function kn(t){return Bf(t)?t():t}function Bf(t){return"function"==typeof t&&t.hasOwnProperty(no)&&t.__forward_ref__===qn}function Hg(t){return t&&!!t.\u0275providers}const X0="https://g.co/ng/security#xss";class Mt extends Error{constructor(e,n){super(function Ld(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Fn(t){return"string"==typeof t?t:null==t?"":String(t)}function Ui(t,e){throw new Mt(-201,!1)}function Jo(t,e){null==t&&function mn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function Et(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function _o(t){return gs(t,na)||gs(t,jf)}function gs(t,e){return t.hasOwnProperty(e)?t[e]:null}function Zu(t){return t&&(t.hasOwnProperty(Bd)||t.hasOwnProperty(rr))?t[Bd]:null}const na=Nt({\u0275prov:Nt}),Bd=Nt({\u0275inj:Nt}),jf=Nt({ngInjectableDef:Nt}),rr=Nt({ngInjectorDef:Nt});var Ln=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ln||{});let Qu;function bo(t){const e=Qu;return Qu=t,e}function q0(t,e,n){const i=_o(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Ln.Optional?null:void 0!==e?e:void Ui(ri(t))}const Ti=globalThis,jd={},Oo="__NG_DI_FLAG__",Ud="ngTempTokenPath",Q0=/\n/gm,tv="__source";let Vd;function $c(t){const e=Vd;return Vd=t,e}function _S(t,e=Ln.Default){if(void 0===Vd)throw new Mt(-203,!1);return null===Vd?q0(t,void 0,e):Vd.get(t,e&Ln.Optional?null:void 0,e)}function nt(t,e=Ln.Default){return(function K0(){return Qu}()||_S)(kn(t),e)}function Gt(t,e=Ln.Default){return nt(t,zd(e))}function zd(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vf(t){const e=[];for(let n=0;n<t.length;n++){const i=kn(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Mt(900,!1);let r,o=Ln.Default;for(let s=0;s<i.length;s++){const a=i[s],c=zf(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(nt(r,o))}else e.push(nt(i))}return e}function Ls(t,e){return t[Oo]=e,t.prototype[Oo]=e,t}function zf(t){return t[Oo]}function dc(t){return{toString:t}.toString()}var uc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(uc||{}),Sr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Sr||{});const ia={},Ai=[],Hf=Nt({\u0275cmp:Nt}),Xg=Nt({\u0275dir:Nt}),Kg=Nt({\u0275pipe:Nt}),iv=Nt({\u0275mod:Nt}),Bs=Nt({\u0275fac:Nt}),ct=Nt({__NG_ELEMENT_ID__:Nt}),xt=Nt({__NG_ENV_ID__:Nt});function _t(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Jt(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{const o=r,s=n[++i];Si(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function Bn(t){return 3===t||4===t||6===t}function Si(t){return 64===t.charCodeAt(0)}function ur(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Li(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Li(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Gf="ng-template";function vS(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if("string"==typeof o&&r){const s=t[i++];if(n&&"class"===o&&-1!==_t(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<t.length&&"string"==typeof(o=t[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function _s(t){return 4===t.type&&t.value!==Gf}function Wf(t,e,n){return e===(4!==t.type||n?t.value:Gf)}function xS(t,e,n){let i=4;const r=t.attrs||[],o=function wS(t){for(let e=0;e<t.length;e++)if(Bn(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!Wf(t,c,n)||""===c&&1===e.length){if(yo(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!vS(t.attrs,l,n)){if(yo(i))return!1;s=!0}continue}const h=$f(8&i?"class":c,r,_s(t),n);if(-1===h){if(yo(i))return!1;s=!0;continue}if(""!==l){let p;p=h>o?"":r[h+1].toLowerCase();const _=8&i?p:null;if(_&&-1!==_t(_,l,0)||2&i&&l!==p){if(yo(i))return!1;s=!0}}}}else{if(!s&&!yo(i)&&!yo(c))return!1;if(s&&yo(c))continue;s=!1,i=c|1&i}}return yo(i)||s}function yo(t){return 0==(1&t)}function $f(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){const s=e[r];if(s===t)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function rv(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function nh(t,e,n=!1){for(let i=0;i<e.length;i++)if(xS(t,e[i],n))return!0;return!1}function Yf(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function ov(t,e){return t?":not("+e.trim()+")":e}function ES(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!yo(s)&&(e+=ov(o,r),r=""),i=s,o=o||!yo(i);n++}return""!==r&&(e+=ov(o,r)),e}function An(t){return dc(()=>{const e=rh(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===uc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Sr.Emulated,styles:t.styles||Ai,_:null,schemas:t.schemas||null,tView:null,id:""};oh(n);const i=t.dependencies;return n.directiveDefs=Gd(i,!1),n.pipeDefs=Gd(i,!0),n.id=function cv(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function sv(t){return Qn(t)||kr(t)}function qf(t){return null!==t}function ln(t){return dc(()=>({type:t.type,bootstrap:t.bootstrap||Ai,declarations:t.declarations||Ai,imports:t.imports||Ai,exports:t.exports||Ai,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ih(t,e){if(null==t)return ia;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function jt(t){return dc(()=>{const e=rh(t);return oh(e),e})}function Or(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qn(t){return t[Hf]||null}function kr(t){return t[Xg]||null}function ko(t){return t[Kg]||null}function rh(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ia,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ai,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ih(t.inputs,e),outputs:ih(t.outputs)}}function oh(t){t.features?.forEach(e=>e(t))}function Gd(t,e){if(!t)return null;const n=e?ko:sv;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(qf)}const Cr=0,Kt=1,fn=2,oi=3,ra=4,sh=5,ro=6,Wd=7,hr=8,js=9,Yc=10,Sn=11,hc=12,$d=13,fc=14,Xi=15,ah=16,Yd=17,Ra=18,ch=19,lv=20,oa=21,ys=22,lh=23,Pe=24,Jn=25,Zo=1,ui=2,Oa=7,Xd=9,oo=11;function Qo(t){return Array.isArray(t)&&"object"==typeof t[Zo]}function es(t){return Array.isArray(t)&&!0===t[Zo]}function Jg(t){return 0!=(4&t.flags)}function Po(t){return t.componentOffset>-1}function Zf(t){return 1==(1&t.flags)}function aa(t){return!!t.template}function Zg(t){return 0!=(512&t[fn])}function ca(t,e){return t.hasOwnProperty(Bs)?t[Bs]:null}let t_=Ti.WeakRef??class pc{constructor(e){this.ref=e}deref(){return this.ref}},DS=0,da=null,uh=!1;function xr(t){const e=da;return da=t,e}class mc{constructor(){this.id=DS++,this.ref=function Bl(t){return new t_(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=uh;uh=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{uh=e}}producerAccessed(){if(uh)throw new Error("");if(null===da)return;let e=da.producers.get(this.id);void 0===e?(e={consumerNode:da.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:da.trackingVersion},da.producers.set(this.id,e),this.consumers.set(da.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=da.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==da?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let tp=null;function xo(t){const e=xr(null);try{return t()}finally{xr(e)}}const rp=()=>{};class kS extends mc{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=rp,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=xr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=rp,this.watch(this.registerOnCleanup)}finally{xr(e)}}cleanup(){this.cleanupFn()}}class fv{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Pr(){return op}function op(t){return t.type.prototype.ngOnChanges&&(t.setInput=hh),PS}function PS(){const t=pv(this),e=t?.current;if(e){const n=t.previous;if(n===ia)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function hh(t,e,n,i){const r=this.declaredInputs[n],o=pv(t)||function NS(t,e){return t[i_]=e}(t,{previous:ia,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new fv(c&&c.currentValue,e,a===ia),t[i]=e}Pr.ngInherit=!0;const i_="__ngSimpleChanges__";function pv(t){return t[i_]||null}const Na=function(t,e,n){};function Ki(t){for(;Array.isArray(t);)t=t[Cr];return t}function ap(t,e){return Ki(e[t])}function No(t,e){return Ki(e[t.index])}function mv(t,e){return t.data[e]}function ts(t,e){const n=e[t];return Qo(n)?n:n[Cr]}function qc(t,e){return null==e?null:t[e]}function s_(t){t[Yd]=0}function bv(t){1024&t[fn]||(t[fn]|=1024,a_(t,1))}function yv(t){1024&t[fn]&&(t[fn]&=-1025,a_(t,-1))}function a_(t,e){let n=t[oi];if(null===n)return;n[sh]+=e;let i=n;for(n=n[oi];null!==n&&(1===e&&1===i[sh]||-1===e&&0===i[sh]);)n[sh]+=e,i=n,n=n[oi]}const Dn={lFrame:Cv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xv(){return Dn.bindingsEnabled}function Fa(){return null!==Dn.skipHydrationRootTNode}function Ct(){return Dn.lFrame.lView}function pi(){return Dn.lFrame.tView}function Tr(t){return Dn.lFrame.contextLView=t,t[hr]}function Mr(t){return Dn.lFrame.contextLView=null,t}function Ri(){let t=gc();for(;null!==t&&64===t.type;)t=t.parent;return t}function gc(){return Dn.lFrame.currentTNode}function ua(t,e){const n=Dn.lFrame;n.currentTNode=t,n.isParent=e}function Qd(){return Dn.lFrame.isParent}function dp(){Dn.lFrame.isParent=!1}function vs(){return Dn.lFrame.bindingIndex++}function La(t){const e=Dn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HS(t,e){const n=Dn.lFrame;n.bindingIndex=n.bindingRootIndex=t,u_(e)}function u_(t){Dn.lFrame.currentDirectiveIndex=t}function h_(){return Dn.lFrame.currentQueryIndex}function f_(t){Dn.lFrame.currentQueryIndex=t}function Sv(t){const e=t[Kt];return 2===e.type?e.declTNode:1===e.type?t[ro]:null}function p_(t,e,n){if(n&Ln.SkipSelf){let r=e,o=t;for(;!(r=r.parent,null!==r||n&Ln.Host||(r=Sv(o),null===r||(o=o[fc],10&r.type))););if(null===r)return!1;e=r,t=o}const i=Dn.lFrame=ha();return i.currentTNode=e,i.lView=t,!0}function Eo(t){const e=ha(),n=t[Kt];Dn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ha(){const t=Dn.lFrame,e=null===t?null:t.child;return null===e?Cv(t):e}function Cv(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Tv(){const t=Dn.lFrame;return Dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const fh=Tv;function Jc(){const t=Tv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Fo(){return Dn.lFrame.selectedIndex}function Zc(t){Dn.lFrame.selectedIndex=t}function Bi(){const t=Dn.lFrame;return mv(t.tView,t.selectedIndex)}let m_=!0;function zl(){return m_}function Ba(t){m_=t}function gp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function mh(t,e,n){bp(t,e,3,n)}function Hl(t,e,n,i){(3&t[fn])===n&&bp(t,e,n,i)}function _p(t,e){let n=t[fn];(3&n)===e&&(n&=8191,n+=1,t[fn]=n)}function bp(t,e,n,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&t[Yd]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[Yd]+=65536),(a<o||-1==o)&&(Ov(t,n,e,c),t[Yd]=(4294901760&t[Yd])+c+2),c++}function Rv(t,e){Na(4,t,e);const n=xr(null);try{e.call(t)}finally{xr(n),Na(5,t,e)}}function Ov(t,e,n,i){const r=n[i]<0,o=n[i+1],a=t[r?-n[i]:n[i]];r?t[fn]>>13<t[Yd]>>16&&(3&t[fn])===e&&(t[fn]+=8192,Rv(a,o)):Rv(a,o)}const ns=-1;class eu{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function gh(t){return t!==ns}function Qc(t){return 32767&t}function bn(t,e){let n=function tu(t){return t>>16}(t),i=e;for(;n>0;)i=i[fc],n--;return i}let nu=!0;function iu(t){const e=nu;return nu=t,e}const Fv=255,vp=5;let Lv=0;const Qi={};function xp(t,e){const n=Bv(t,e);if(-1!==n)return n;const i=e[Kt];i.firstCreatePass&&(t.injectorIndex=e.length,wp(i.data,t),wp(e,null),wp(i.blueprint,null));const r=_h(t,e),o=t.injectorIndex;if(gh(r)){const s=Qc(r),a=bn(r,e),c=a[Kt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function wp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Bv(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function _h(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=Vv(r),null===i)return ns;if(n++,r=r[fc],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return ns}function g_(t,e,n){!function YS(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(ct)&&(i=n[ct]),null==i&&(i=n[ct]=Lv++);const r=i&Fv;e.data[t+(r>>vp)]|=1<<r}(t,e,n)}function jv(t,e,n){if(n&Ln.Optional||void 0!==t)return t;Ui()}function ja(t,e,n,i){if(n&Ln.Optional&&void 0===i&&(i=null),!(n&(Ln.Self|Ln.Host))){const r=t[js],o=bo(void 0);try{return r?r.get(e,i,n&Ln.Optional):q0(e,i,n&Ln.Optional)}finally{bo(o)}}return jv(i,0,n)}function Ao(t,e,n,i=Ln.Default,r){if(null!==t){if(2048&e[fn]&&!(i&Ln.Self)){const s=function Uv(t,e,n,i,r){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[fn]&&!(512&s[fn]);){const a=Ep(o,s,n,i|Ln.Self,Qi);if(a!==Qi)return a;let c=o.parent;if(!c){const l=s[lv];if(l){const d=l.get(n,Qi,i);if(d!==Qi)return d}c=Vv(s),s=s[fc]}o=c}return r}(t,e,n,i,Qi);if(s!==Qi)return s}const o=Ep(t,e,n,i,Qi);if(o!==Qi)return o}return ja(e,n,i,r)}function Ep(t,e,n,i,r){const o=function qS(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ct)?t[ct]:void 0;return"number"==typeof e?e>=0?e&Fv:ZS:e}(n);if("function"==typeof o){if(!p_(e,t,i))return i&Ln.Host?jv(r,0,i):ja(e,n,i,r);try{let s;if(s=o(i),null!=s||i&Ln.Optional)return s;Ui()}finally{fh()}}else if("number"==typeof o){let s=null,a=Bv(t,e),c=ns,l=i&Ln.Host?e[Xi][ro]:null;for((-1===a||i&Ln.SkipSelf)&&(c=-1===a?_h(t,e):e[a+8],c!==ns&&__(i,!1)?(s=e[Kt],a=Qc(c),e=bn(c,e)):a=-1);-1!==a;){const d=e[Kt];if(su(o,a,d.data)){const h=KS(a,e,n,s,i,l);if(h!==Qi)return h}c=e[a+8],c!==ns&&__(i,e[Kt].data[a+8]===l)&&su(o,a,e)?(s=d,a=Qc(c),e=bn(c,e)):a=-1}}return r}function KS(t,e,n,i,r,o){const s=e[Kt],a=s.data[t+8],d=ou(a,s,n,null==i?Po(a)&&nu:i!=s&&0!=(3&a.type),r&Ln.Host&&o===a);return null!==d?Gl(e,s,d,a):Qi}function ou(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,p=r?a+d:t.directiveEnd;for(let _=i?a:a+d;_<p;_++){const x=s[_];if(_<c&&n===x||_>=c&&x.type===n)return _}if(r){const _=s[c];if(_&&aa(_)&&_.type===n)return c}return null}function Gl(t,e,n,i){let r=t[n];const o=e.data;if(function kv(t){return t instanceof eu}(r)){const s=r;s.resolving&&function nS(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Mt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ii(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Fn(t)}(o[n]));const a=iu(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?bo(s.injectImpl):null;p_(t,i,Ln.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function mp(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=op(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&bo(l),iu(a),s.resolving=!1,fh()}}return r}function su(t,e,n){return!!(n[e+(t>>vp)]&1<<t)}function __(t,e){return!(t&Ln.Self||t&Ln.Host&&e)}class Lo{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Ao(this._tNode,this._lView,e,zd(i),n)}}function ZS(){return new Lo(Ri(),Ct())}function Vi(t){return dc(()=>{const e=t.prototype.constructor,n=e[Bs]||Ap(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[Bs]||Ap(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Ap(t){return Bf(t)?()=>{const e=Ap(kn(t));return e&&e()}:ca(t)}function Vv(t){const e=t[Kt],n=e.type;return 2===n?e.declTNode:1===n?t[ro]:null}function Ua(t){return function XS(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(Bn(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===e)return n[r+1];r+=2}}}return null}(Ri(),t)}const Va="__parameters__";function bc(t,e,n){return dc(()=>{const i=function Sp(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(Va)?c[Va]:Object.defineProperty(c,Va,{value:[]})[Va];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function $l(t,e){t.forEach(n=>Array.isArray(n)?$l(n,e):e(n))}function y_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function yh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function vh(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function xs(t,e,n){let i=du(t,e);return i>=0?t[1|i]=n:(i=~i,function zv(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function v_(t,e){const n=du(t,e);if(n>=0)return t[1|n]}function du(t,e){return function Hv(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}(t,e,1)}const tl=Ls(bc("Optional"),8),Tp=Ls(bc("SkipSelf"),4);function kp(t){return 128==(128&t.flags)}var nl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(nl||{});const C_=new Map;let SC=0;const M_="__ngContext__";function So(t,e){Qo(e)?(t[M_]=e[ch],function CC(t){C_.set(t[ch],t)}(e)):t[M_]=e}let R_;function O_(t,e){return R_(t,e)}function il(t){const e=t[oi];return es(e)?e[oi]:e}function hx(t){return k_(t[hc])}function Bp(t){return k_(t[ra])}function k_(t){for(;null!==t&&!es(t);)t=t[ra];return t}function fu(t,e,n,i,r){if(null!=i){let o,s=!1;es(i)?o=i:Qo(i)&&(s=!0,i=i[Cr]);const a=Ki(i);0===t&&null!==n?null==r?mx(e,n,a):zi(e,n,a,r||null,!0):1===t&&null!==n?zi(e,n,a,r||null,!0):2===t?function Gp(t,e,n){const i=Vp(t,e);i&&function BC(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function vx(t,e,n,i,r){const o=n[Oa];o!==Ki(n)&&fu(e,t,i,o,r);for(let a=oo;a<n.length;a++){const c=n[a];Ah(c[Kt],c,t,e,i,o)}}(e,t,o,n,r)}}function Up(t,e,n){return t.createElement(e,n)}function px(t,e){const n=t[Xd],i=n.indexOf(e);yv(e),n.splice(i,1)}function rs(t,e){if(t.length<=oo)return;const n=oo+e,i=t[n];if(i){const r=i[ah];null!==r&&r!==t&&px(r,i),e>0&&(t[n-1][ra]=i[ra]);const o=yh(t,oo+e);!function OC(t,e){Ah(t,e,e[Sn],2,null,null),e[Cr]=null,e[ro]=null}(i[Kt],i);const s=o[Ra];null!==s&&s.detachView(o[Kt]),i[oi]=null,i[ra]=null,i[fn]&=-129}return i}function N_(t,e){if(!(256&e[fn])){const n=e[Sn];e[lh]?.destroy(),e[Pe]?.destroy(),n.destroyNode&&Ah(t,e,n,3,null,null),function NC(t){let e=t[hc];if(!e)return F_(t[Kt],t);for(;e;){let n=null;if(Qo(e))n=e[hc];else{const i=e[oo];i&&(n=i)}if(!n){for(;e&&!e[ra]&&e!==t;)Qo(e)&&F_(e[Kt],e),e=e[oi];null===e&&(e=t),Qo(e)&&F_(e[Kt],e),n=e&&e[ra]}e=n}}(e)}}function F_(t,e){if(!(256&e[fn])){e[fn]&=-129,e[fn]|=256,function Yn(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof eu)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Na(4,a,c);try{c.call(a)}finally{Na(5,a,c)}}else{Na(4,r,o);try{o.call(r)}finally{Na(5,r,o)}}}}}(t,e),function Yl(t,e){const n=t.cleanup,i=e[Wd];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else n[o].call(i[n[o+1]]);null!==i&&(e[Wd]=null);const r=e[oa];if(null!==r){e[oa]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,e),1===e[Kt].type&&e[Sn].destroy();const n=e[ah];if(null!==n&&es(e[oi])){n!==e[oi]&&px(n,e);const i=e[Ra];null!==i&&i.detachView(t)}!function TC(t){C_.delete(t[ch])}(e)}}function L_(t,e,n){return function Bo(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[Cr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===Sr.None||o===Sr.Emulated)return null}return No(i,n)}}(t,e.parent,n)}function zi(t,e,n,i,r){t.insertBefore(e,n,i,r)}function mx(t,e,n){t.appendChild(e,n)}function yc(t,e,n,i,r){null!==i?zi(t,e,n,i,r):mx(t,e,n)}function Vp(t,e){return t.parentNode(e)}function gx(t,e,n){return _x(t,e,n)}let fa,Kl,z_,_x=function zp(t,e,n){return 40&t.type?No(t,n):null};function Xl(t,e,n,i){const r=L_(t,i,e),o=e[Sn],a=gx(i.parent||e[ro],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)yc(o,r,n[c],a,!1);else yc(o,r,n,a,!1);void 0!==fa&&fa(o,i,e,n,r)}function Hi(t,e){if(null!==e){const n=e.type;if(3&n)return No(e,t);if(4&n)return Hp(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Hi(t,i);{const r=t[e.index];return es(r)?Hp(-1,r):Ki(r)}}if(32&n)return O_(e,t)()||Ki(t[e.index]);{const i=fr(t,e);return null!==i?Array.isArray(i)?i[0]:Hi(il(t[Xi]),i):Hi(t,e.next)}}return null}function fr(t,e){return null!==e?t[Xi][ro].projection[e.projection]:null}function Hp(t,e){const n=oo+t+1;if(n<e.length){const i=e[n],r=i[Kt].firstChild;if(null!==r)return Hi(i,r)}return e[Oa]}function j_(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],c=n.type;if(s&&0===e&&(a&&So(Ki(a),i),n.flags|=2),32!=(32&n.flags))if(8&c)j_(t,e,n.child,i,r,o,!1),fu(e,t,r,a,o);else if(32&c){const l=O_(n,i);let d;for(;d=l();)fu(e,t,r,d,o);fu(e,t,r,a,o)}else 16&c?yx(t,e,i,n,r,o):fu(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Ah(t,e,n,i,r,o){j_(n,i,t.firstChild,e,r,o,!1)}function yx(t,e,n,i,r,o){const s=n[Xi],c=s[ro].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)fu(e,t,r,c[l],o);else{let l=c;const d=s[oi];kp(i)&&(l.flags|=128),j_(t,e,l,d,r,o,!0)}}function xx(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function V_(t,e,n){const{mergedAttrs:i,classes:r,styles:o}=n;null!==i&&Jt(t,e,i),null!==r&&xx(t,e,r),null!==o&&function U_(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function pa(t){return function jo(){if(void 0===Kl&&(Kl=null,Ti.trustedTypes))try{Kl=Ti.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Kl}()?.createHTML(t)||t}class mi{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${X0})`}}class GC extends mi{getTypeName(){return"HTML"}}class Ax extends mi{getTypeName(){return"Style"}}class $p extends mi{getTypeName(){return"Script"}}class WC extends mi{getTypeName(){return"URL"}}class $C extends mi{getTypeName(){return"ResourceURL"}}function Es(t){return t instanceof mi?t.changingThisBreaksApplicationSecurity:t}function Ha(t,e){const n=function YC(t){return t instanceof mi&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${X0})`)}return n===e}class QC{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(pa(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class eT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=pa(e),n}}const tT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pu(t){return(t=String(t)).match(tT)?t:"unsafe:"+t}function vc(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ch(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Cx=vc("area,br,col,hr,img,wbr"),Hr=vc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Uo=vc("rp,rt"),Yp=Ch(Cx,Ch(Hr,vc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ch(Uo,vc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ch(Uo,Hr)),W_=vc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$_=Ch(W_,vc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nT=vc("script,style,template");class iT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!Yp.hasOwnProperty(n))return this.sanitizedSomething=!0,!nT.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!$_.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;W_[a]&&(c=pu(c)),this.buf.push(" ",s,'="',Y_(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();Yp.hasOwnProperty(n)&&!Cx.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Y_(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const rT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tx=/([^\#-~ |!])/g;function Y_(t){return t.replace(/&/g,"&amp;").replace(rT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Tx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xp;function Mx(t,e){let n=null;try{Xp=Xp||function Sx(t){const e=new eT(t);return function G_(){try{return!!(new window.DOMParser).parseFromString(pa(""),"text/html")}catch{return!1}}()?new QC(e):e}(t);let i=e?String(e):"";n=Xp.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Xp.getInertBodyElement(i)}while(i!==o);return pa((new iT).sanitizeChildren(X_(n)||n))}finally{if(n){const i=X_(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function X_(t){return"content"in t&&function oT(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(pr||{});function K_(t){const e=function Th(){const t=Ct();return t&&t[Yc].sanitizer}();return e?e.sanitize(pr.URL,t)||"":Ha(t,"URL")?Es(t):pu(Fn(t))}class bt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Et({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Mh=new bt("ENVIRONMENT_INITIALIZER"),Kp=new bt("INJECTOR",-1),kx=new bt("INJECTOR_DEF_TYPES");class q_{get(e,n=jd){if(n===jd){const i=new Error(`NullInjectorError: No provider for ${ri(e)}!`);throw i.name="NullInjectorError",i}return n}}function dT(...t){return{\u0275providers:Px(0,t),\u0275fromNgModule:!0}}function Px(t,...e){const n=[],i=new Set;let r;const o=s=>{n.push(s)};return $l(e,s=>{const a=s;qp(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Nx(r,o),n}function Nx(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];Z_(r,o=>{e(o,i)})}}function qp(t,e,n,i){if(!(t=kn(t)))return!1;let r=null,o=Zu(t);const s=!o&&Qn(t);if(o||s){if(s&&!s.standalone)return!1;r=t}else{const c=t.ngModule;if(o=Zu(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)qp(l,e,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{$l(o.imports,d=>{qp(d,e,n,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&Nx(l,e)}if(!a){const l=ca(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ai},r),e({provide:kx,useValue:r,multi:!0},r),e({provide:Mh,useValue:()=>nt(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=t;Z_(c,d=>{e(d,l)})}}}return r!==t&&void 0!==t.providers}function Z_(t,e){for(let n of t)Hg(n)&&(n=n.\u0275providers),Array.isArray(n)?Z_(n,e):e(n)}const uT=Nt({provide:String,useValue:Nt});function Q_(t){return null!==t&&"object"==typeof t&&uT in t}function ql(t){return"function"==typeof t}const eb=new bt("Set Injector scope."),Jp={},tb={};let Zp;function Ih(){return void 0===Zp&&(Zp=new q_),Zp}class Hs{}class Qp extends Hs{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ob(e,s=>this.processProvider(s)),this.records.set(Kp,mu(void 0,this)),r.has("environment")&&this.records.set(Hs,mu(void 0,this));const o=this.records.get(eb);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kx.multi,Ai,Ln.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=$c(this),i=bo(void 0);try{return e()}finally{$c(n),bo(i)}}get(e,n=jd,i=Ln.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xt))return e[xt](this);i=zd(i);const o=$c(this),s=bo(void 0);try{if(!(i&Ln.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function pT(t){return"function"==typeof t||"object"==typeof t&&t instanceof bt}(e)&&_o(e);c=l&&this.injectableDefInScope(l)?mu(nb(e),Jp):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&Ln.Self?Ih():this.parent).get(e,n=i&Ln.Optional&&n===jd?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Ud]=a[Ud]||[]).unshift(ri(e)),o)throw a;return function bS(t,e,n,i){const r=t[Ud];throw e[tv]&&r.unshift(e[tv]),t.message=function yS(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=ri(e);if(Array.isArray(e))r=e.map(ri).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ri(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Q0,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Ud]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{bo(s),$c(o)}}resolveInjectorInitializers(){const e=$c(this),n=bo(void 0);try{const r=this.get(Mh.multi,Ai,Ln.Self);for(const o of r)o()}finally{$c(e),bo(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(ri(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Mt(205,!1)}processProvider(e){let n=ql(e=kn(e))?e:kn(e&&e.provide);const i=function fT(t){return Q_(t)?mu(void 0,t.useValue):mu(Bx(t),Jp)}(e);if(ql(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=mu(void 0,Jp,!0),r.factory=()=>Vf(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Jp&&(n.value=tb,n.value=n.factory()),"object"==typeof n.value&&n.value&&function rb(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=kn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function nb(t){const e=_o(t),n=null!==e?e.factory:ca(t);if(null!==n)return n;if(t instanceof bt)throw new Mt(204,!1);if(t instanceof Function)return function ib(t){const e=t.length;if(e>0)throw vh(e,"?"),new Mt(204,!1);const n=function fS(t){return t&&(t[na]||t[jf])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Mt(204,!1)}function Bx(t,e,n){let i;if(ql(t)){const r=kn(t);return ca(r)||nb(r)}if(Q_(t))i=()=>kn(t.useValue);else if(function Lx(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Vf(t.deps||[]));else if(function Fx(t){return!(!t||!t.useExisting)}(t))i=()=>nt(kn(t.useExisting));else{const r=kn(t&&(t.useClass||t.provide));if(!function ss(t){return!!t.deps}(t))return ca(r)||nb(r);i=()=>new r(...Vf(t.deps))}return i}function mu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ob(t,e){for(const n of t)Array.isArray(n)?ob(n,e):n&&Hg(n)?ob(n.\u0275providers,e):e(n)}const Dh=new bt("AppId",{providedIn:"root",factory:()=>mT}),mT="ng",em=new bt("Platform Initializer"),ma=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Xr=new bt("AnimationModuleType"),sb=new bt("CSP nonce",{providedIn:"root",factory:()=>function os(){if(void 0!==z_)return z_;if(typeof document<"u")return document;throw new Mt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Vx=(t,e,n)=>null;function hb(t,e,n=!1){return Vx(t,e,n)}class et{}class it{}class Ot{resolveComponentFactory(e){throw function lt(t){const e=Error(`No component factory found for ${ri(t)}.`);return e.ngComponent=t,e}(e)}}let Yt=(()=>{class e{}return e.NULL=new Ot,e})();function pn(){return yn(Ri(),Ct())}function yn(t,e){return new Ut(No(t,e))}let Ut=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=pn,e})();function Cn(t){return t instanceof Ut?t.nativeElement:t}class li{}let Vo=(()=>{var t;class e{}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>null}),e})();class Nr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ir=new Nr("16.2.1"),Ss={};function xF(t,e=null,n=null,i){const r=wF(t,e,n,i);return r.resolveInjectorInitializers(),r}function wF(t,e=null,n=null,i,r=new Set){const o=[n||Ai,dT(t)];return i=i||("object"==typeof t?void 0:ri(t)),new Qp(o,e||Ih(),i||null,r)}let wr=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return xF({name:""},r,i,"");{const o=i.name??"";return xF({name:o},i.parent,i.providers,o)}}}return(t=e).THROW_IF_NOT_FOUND=jd,t.NULL=new q_,t.\u0275prov=Et({token:t,providedIn:"any",factory:()=>nt(Kp)}),t.__NG_ELEMENT_ID__=-1,e})();let CT=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Mt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>new t}),e})();function fb(t){for(;t;){t[fn]|=64;const e=il(t);if(Zg(t)&&!e)return t;t=e}return null}function TT(t){return t.ngOriginalError}class xc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&TT(e);for(;n&&TT(n);)n=TT(n);return n||null}}const TF=new bt("",{providedIn:"root",factory:()=>!1});class RF extends mc{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){fb(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=xr(this);this.trackingVersion++;try{e(n,i)}finally{xr(r)}}destroy(){this.trackingVersion++}}let Gx=null;function OF(){return Gx??=new RF,Gx}function kF(t,e){return t[e]??OF()}function PF(t,e){const n=OF();n.hasReadASignal&&(t[e]=Gx,n.lView=t,Gx=new RF)}const Zn={};function Wt(t){NF(pi(),Ct(),Fo()+t,!1)}function NF(t,e,n,i){if(!i)if(3==(3&e[fn])){const o=t.preOrderCheckHooks;null!==o&&mh(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Hl(e,o,0,n)}Zc(n)}function Ge(t,e=Ln.Default){const n=Ct();return null===n?nt(t,e):Ao(Ri(),n,kn(t),e)}function Nh(){throw new Error("invalid")}function Wx(t,e,n,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[Cr]=r,h[fn]=140|i,(null!==l||t&&2048&t[fn])&&(h[fn]|=2048),s_(h),h[oi]=h[fc]=t,h[hr]=n,h[Yc]=s||t&&t[Yc],h[Sn]=a||t&&t[Sn],h[js]=c||t&&t[js]||null,h[ro]=o,h[ch]=function Np(){return SC++}(),h[ys]=d,h[lv]=l,h[Xi]=2==e.type?t[Xi]:h,h}function am(t,e,n,i,r){let o=t.data[e];if(null===o)o=function MT(t,e,n,i,r){const o=gc(),s=Qd(),c=t.data[e]=function IX(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Fa()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,e,n,i,r),function Av(){return Dn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function Ul(){const t=Dn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ua(o,!0),o}function pb(t,e,n,i){if(0===n)return-1;const r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function FF(t,e,n,i,r){const o=kF(e,lh),s=Fo(),a=2&i;try{if(Zc(-1),a&&e.length>Jn&&NF(t,e,Jn,!1),Na(a?2:0,r),a)o.runInContext(n,i,r);else{const l=xr(null);try{n(i,r)}finally{xr(l)}}}finally{a&&null===e[lh]&&PF(e,lh),Zc(s),Na(a?3:1,r)}}function IT(t,e,n){if(Jg(e)){const i=xr(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{xr(i)}}}function DT(t,e,n){xv()&&(function FX(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;Po(n)&&function HX(t,e,n){const i=No(e,t),r=LF(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=$x(t,Wx(t,r,null,s,i,e,null,t[Yc].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||xp(n,e),So(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const c=t.data[a],l=Gl(e,t,a,n);So(l,e),null!==s&&GX(0,a-r,l,c,0,s),aa(c)&&(ts(n.index,e)[hr]=Gl(e,t,a,n))}}(t,e,n,No(n,e)),64==(64&n.flags)&&zF(t,e,n))}function RT(t,e,n=No){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function LF(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=OT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function OT(t,e,n,i,r,o,s,a,c,l,d){const h=Jn+i,p=h+r,_=function EX(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Zn);return n}(h,p),x="function"==typeof l?l():l;return _[Kt]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:x,incompleteFirstPass:!1,ssrId:d}}let BF=t=>null;function jF(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const o=t[r];null===i?UF(n,e,r,o):i.hasOwnProperty(r)&&UF(n,e,i[r],o)}return n}function UF(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function ga(t,e,n,i,r,o,s,a){const c=No(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(LT(t,n,d,i,r),Po(e)&&function OX(t,e){const n=ts(e,t);16&n[fn]||(n[fn]|=64)}(n,e.index)):3&e.type&&(i=function RX(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function kT(t,e,n,i){if(xv()){const r=null===i?null:{"":-1},o=function BX(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(nh(e,s.selectors,!1))if(i||(i=[]),aa(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),PT(t,e,a.length)}else i.unshift(s),PT(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&VF(t,e,n,s,r,a),r&&function jX(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const o=n[e[r+1]];if(null==o)throw new Mt(-301,!1);i.push(e[r],o)}}}(n,i,r)}n.mergedAttrs=ur(n.mergedAttrs,n.attrs)}function VF(t,e,n,i,r,o){for(let l=0;l<i.length;l++)g_(xp(n,e),t,i[l].type);!function VX(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=pb(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=ur(n.mergedAttrs,d.hostAttrs),zX(t,n,e,c,d),UX(c,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function DX(t,e,n){const r=e.directiveEnd,o=t.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],p=n?n.get(h):null,x=p?p.outputs:null;c=jF(h.inputs,d,c,p?p.inputs:null),l=jF(h.outputs,d,l,x);const P=null===c||null===s||_s(e)?null:WX(c,d,s);a.push(P)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,o)}function zF(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function GS(){return Dn.lFrame.currentDirectiveIndex}();try{Zc(o);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];u_(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&LX(c,l)}}finally{Zc(-1),u_(s)}}function LX(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function PT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function UX(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;aa(e)&&(n[""]=t)}}function zX(t,e,n,i,r){t.data[i]=r;const o=r.factory||(r.factory=ca(r.type)),s=new eu(o,aa(r),Ge);t.blueprint[i]=s,n[i]=s,function PX(t,e,n,i,r){const o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function NX(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,i,o)}}(t,e,i,pb(t,n,r.hostVars,Zn),r)}function sl(t,e,n,i,r,o){const s=No(t,e);!function NT(t,e,n,i,r,o,s){if(null==o)t.removeAttribute(e,r,n);else{const a=null==s?Fn(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}(e[Sn],s,o,t.value,n,i,r)}function GX(t,e,n,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)HF(i,n,s[a++],s[a++],s[a++])}function HF(t,e,n,i,r){const o=xr(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{xr(o)}}function WX(t,e,n){let i=null,r=0;for(;r<n.length;){const o=n[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function GF(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function WF(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const s=t.data[o];f_(n[i]),s.contentQueries(2,e[o],o)}}}function $x(t,e){return t[hc]?t[$d][ra]=e:t[hc]=e,t[$d]=e,e}function FT(t,e,n){f_(0);const i=xr(null);try{e(t,n)}finally{xr(i)}}function $F(t){return t[Wd]||(t[Wd]=[])}function YF(t){return t.cleanup||(t.cleanup=[])}function KF(t,e){const n=t[js],i=n?n.get(xc,null):null;i&&i.handleError(e)}function LT(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];HF(t.data[s],e[s],i,a,r)}}function $X(t,e){const n=ts(e,t),i=n[Kt];!function YX(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[Cr];null!==r&&null===n[ys]&&(n[ys]=hb(r,n[js])),BT(i,n,n[hr])}function BT(t,e,n){Eo(e);try{const i=t.viewQuery;null!==i&&FT(1,i,n);const r=t.template;null!==r&&FF(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&WF(t,e),t.staticViewQueries&&FT(2,t.viewQuery,n);const o=t.components;null!==o&&function XX(t,e){for(let n=0;n<e.length;n++)$X(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[fn]&=-5,Jc()}}let qF=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,o){const s=typeof Zone>"u"?null:Zone.current,a=new kS(i,d=>{this.all.has(d)&&this.queue.set(d,s)},o);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>new t}),e})();function Yx(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=vr(r,a):2==o&&(i=vr(i,a+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function mb(t,e,n,i,r=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&i.push(Ki(o)),es(o)){for(let a=oo;a<o.length;a++){const c=o[a],l=c[Kt].firstChild;null!==l&&mb(c[Kt],c,l,i)}o[Oa]!==o[Cr]&&i.push(o[Oa])}const s=n.type;if(8&s)mb(t,e,n.child,i);else if(32&s){const a=O_(n,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=fr(e,n);if(Array.isArray(a))i.push(...a);else{const c=il(e[Xi]);mb(c[Kt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Xx(t,e,n,i=!0){const r=e[Yc],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{JF(t,e,t.template,n)}catch(c){throw i&&KF(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function JF(t,e,n,i){const r=e[fn];if(256!=(256&r)){e[Yc].effectManager?.flush(),Eo(e);try{s_(e),function Ev(t){return Dn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&FF(t,e,n,2,i);const s=3==(3&r);if(s){const l=t.preOrderCheckHooks;null!==l&&mh(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Hl(e,l,0,null),_p(e,0)}if(function JX(t){for(let e=hx(t);null!==e;e=Bp(e)){if(!e[ui])continue;const n=e[Xd];for(let i=0;i<n.length;i++){bv(n[i])}}}(e),ZF(e,2),null!==t.contentQueries&&WF(t,e),s){const l=t.contentCheckHooks;null!==l&&mh(e,l)}else{const l=t.contentHooks;null!==l&&Hl(e,l,1),_p(e,1)}!function wX(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=kF(e,Pe);try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Zc(~o);else{const s=o,a=n[++r],c=n[++r];HS(a,s),i.runInContext(c,2,e[s])}}}finally{null===e[Pe]&&PF(e,Pe),Zc(-1)}}(t,e);const a=t.components;null!==a&&eL(e,a,0);const c=t.viewQuery;if(null!==c&&FT(2,c,i),s){const l=t.viewCheckHooks;null!==l&&mh(e,l)}else{const l=t.viewHooks;null!==l&&Hl(e,l,2),_p(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[fn]&=-73,yv(e)}finally{Jc()}}}function ZF(t,e){for(let n=hx(t);null!==n;n=Bp(n))for(let i=oo;i<n.length;i++)QF(n[i],e)}function ZX(t,e,n){QF(ts(e,t),n)}function QF(t,e){if(!function _v(t){return 128==(128&t[fn])}(t))return;const n=t[Kt];if(80&t[fn]&&0===e||1024&t[fn]||2===e)JF(n,t,n.template,t[hr]);else if(t[sh]>0){ZF(t,1);const r=t[Kt].components;null!==r&&eL(t,r,1)}}function eL(t,e,n){for(let i=0;i<e.length;i++)ZX(t,e[i],n)}class gb{get rootNodes(){const e=this._lView,n=e[Kt];return mb(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(e){this._lView[hr]=e}get destroyed(){return 256==(256&this._lView[fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[oi];if(es(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(rs(e,i),yh(n,i))}this._attachedToViewContainer=!1}N_(this._lView[Kt],this._lView)}onDestroy(e){!function vv(t,e){if(256==(256&t[fn]))throw new Mt(911,!1);null===t[oa]&&(t[oa]=[]),t[oa].push(e)}(this._lView,e)}markForCheck(){fb(this._cdRefInjectingView||this._lView)}detach(){this._lView[fn]&=-129}reattach(){this._lView[fn]|=128}detectChanges(){Xx(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function PC(t,e){Ah(t,e,e[Sn],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Mt(902,!1);this._appRef=e}}class QX extends gb{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Xx(e[Kt],e,e[hr],!1)}checkNoChanges(){}get context(){return null}}class tL extends Yt{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Qn(e);return new _b(n,this.ngModule)}}function nL(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class tK{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=zd(i);const r=this.injector.get(e,Ss,i);return r!==Ss||n===Ss?r:this.parentInjector.get(e,n,i)}}class _b extends it{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=nL(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return nL(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function AS(t){return t.map(ES).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=(r=r||this.ngModule)instanceof Hs?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new tK(e,o):e,a=s.get(li,null);if(null===a)throw new Mt(407,!1);const h={rendererFactory:a,sanitizer:s.get(Vo,null),effectManager:s.get(qF,null),afterRenderEventManager:s.get(CT,null)},p=a.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",x=i?function AX(t,e,n,i){const o=i.get(TF,!1)||n===Sr.ShadowDom,s=t.selectRootElement(e,o);return function SX(t){BF(t)}(s),s}(p,i,this.componentDef.encapsulation,s):Up(p,_,function eK(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_)),X=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Q=null;null!==x&&(Q=hb(x,s,!0));const ye=OT(0,null,null,1,0,null,null,null,null,null,null),Te=Wx(null,ye,null,X,null,null,h,p,s,null,Q);let je,Ze;Eo(Te);try{const at=this.componentDef;let mt,pt=null;at.findHostDirectiveDefs?(mt=[],pt=new Map,at.findHostDirectiveDefs(at,mt,pt),mt.push(at)):mt=[at];const gt=function iK(t,e){const n=t[Kt],i=Jn;return t[i]=e,am(n,i,2,"#host",null)}(Te,x),yt=function rK(t,e,n,i,r,o,s){const a=r[Kt];!function oK(t,e,n,i){for(const r of t)e.mergedAttrs=ur(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Yx(e,e.mergedAttrs,!0),null!==n&&V_(i,n,e))}(i,t,e,s);let c=null;null!==e&&(c=hb(e,r[js]));const l=o.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=Wx(r,LF(n),null,d,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&PT(a,t,i.length-1),$x(r,h),r[t.index]=h}(gt,x,at,mt,Te,h,p);Ze=mv(ye,Jn),x&&function aK(t,e,n,i){if(i)Jt(t,n,["ng-version",Ir.full]);else{const{attrs:r,classes:o}=function Xf(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!yo(r))break;r=o}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&Jt(t,n,r),o&&o.length>0&&xx(t,n,o.join(" "))}}(p,at,x,i),void 0!==n&&function cK(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const o=n[r];i.push(null!=o?Array.from(o):null)}}(Ze,this.ngContentSelectors,n),je=function sK(t,e,n,i,r,o){const s=Ri(),a=r[Kt],c=No(s,r);VF(a,r,s,n,null,i);for(let d=0;d<n.length;d++)So(Gl(r,a,s.directiveStart+d,s),r);zF(a,r,s),c&&So(c,r);const l=Gl(r,a,s.directiveStart+s.componentOffset,s);if(t[hr]=r[hr]=l,null!==o)for(const d of o)d(l,e);return IT(a,s,t),l}(yt,at,mt,pt,Te,[lK]),BT(ye,Te,null)}finally{Jc()}return new nK(this.componentType,je,yn(Ze,Te),Te,Ze)}}class nK extends et{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new QX(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;LT(o[Kt],o,r,e,n),this.previousInputValues.set(e,n),fb(ts(this._tNode.index,o))}}get injector(){return new Lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function lK(){const t=Ri();gp(Ct()[Kt],t)}function vn(t){let e=function iL(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(aa(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Mt(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const s=t;s.inputs=Kx(t.inputs),s.inputTransforms=Kx(t.inputTransforms),s.declaredInputs=Kx(t.declaredInputs),s.outputs=Kx(t.outputs);const a=r.hostBindings;a&&fK(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&uK(t,c),l&&hK(t,l),$n(t.inputs,r.inputs),$n(t.declaredInputs,r.declaredInputs),$n(t.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),$n(s.inputTransforms,r.inputTransforms)),aa(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===vn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function dK(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ur(r.hostAttrs,n=ur(n,r.hostAttrs))}}(i)}function Kx(t){return t===ia?{}:t===Ai?[]:t}function uK(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function hK(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,o)=>{e(i,r,o),n(i,r,o)}:e}function fK(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function qx(t){return!!function jT(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function as(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Oi(t,e,n,i){const r=Ct();return as(r,vs(),e)&&(pi(),sl(Bi(),r,t,e,n,i)),Oi}function lm(t,e,n,i){return as(t,vs(),n)?e+Fn(n)+i:Zn}function xn(t,e,n,i,r,o,s,a){const c=Ct(),l=pi(),d=t+Jn,h=l.firstCreatePass?function BK(t,e,n,i,r,o,s,a,c){const l=e.consts,d=am(e,t,4,s||null,qc(l,a));kT(e,n,d,qc(l,c)),gp(e,d);const h=d.tView=OT(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,n,i,r,o,s):l.data[d];ua(h,!1);const p=vL(l,c,h,t);zl()&&Xl(l,c,p,h),So(p,c),$x(c,c[d]=GF(p,c,p,h)),Zf(h)&&DT(l,c,h),null!=s&&RT(c,h,a)}let vL=function xL(t,e,n,i){return Ba(!0),e[Sn].createComment("")};function Ht(t,e,n){const i=Ct();return as(i,vs(),e)&&ga(pi(),Bi(),i,t,e,i[Sn],n,!1),Ht}function WT(t,e,n,i,r){const s=r?"class":"style";LT(t,n,e.inputs[s],s,i)}function Lt(t,e,n,i){const r=Ct(),o=pi(),s=Jn+t,a=r[Sn],c=o.firstCreatePass?function zK(t,e,n,i,r,o){const s=e.consts,c=am(e,t,2,i,qc(s,r));return kT(e,n,c,qc(s,o)),null!==c.attrs&&Yx(c,c.attrs,!1),null!==c.mergedAttrs&&Yx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,n,i):o.data[s],l=wL(o,r,c,a,e,t);r[s]=l;const d=Zf(c);return ua(c,!0),V_(a,l,c),32!=(32&c.flags)&&zl()&&Xl(o,r,l,c),0===function l_(){return Dn.lFrame.elementDepthCount}()&&So(l,r),function si(){Dn.lFrame.elementDepthCount++}(),d&&(DT(o,r,c),IT(o,c,r)),null!==i&&RT(r,c),Lt}function zt(){let t=Ri();Qd()?dp():(t=t.parent,ua(t,!1));const e=t;(function wv(t){return Dn.skipHydrationRootTNode===t})(e)&&function VS(){Dn.skipHydrationRootTNode=null}(),function BS(){Dn.lFrame.elementDepthCount--}();const n=pi();return n.firstCreatePass&&(gp(n,t),Jg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function $S(t){return 0!=(8&t.flags)}(e)&&WT(n,e,Ct(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function _c(t){return 0!=(16&t.flags)}(e)&&WT(n,e,Ct(),e.stylesWithoutHost,!1),zt}function di(t,e,n,i){return Lt(t,e,n,i),zt(),di}let wL=(t,e,n,i,r,o)=>(Ba(!0),Up(i,r,function ph(){return Dn.lFrame.currentNamespace}()));function _m(t){return!!t&&"function"==typeof t.then}function SL(t){return!!t&&"function"==typeof t.subscribe}function Rn(t,e,n,i){const r=Ct(),o=pi(),s=Ri();return function TL(t,e,n,i,r,o,s){const a=Zf(i),l=t.firstCreatePass&&YF(t),d=e[hr],h=$F(e);let p=!0;if(3&i.type||s){const P=No(i,e),F=s?s(P):P,X=h.length,Q=s?Te=>s(Ki(Te[i.index])):i.index;let ye=null;if(!s&&a&&(ye=function XK(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=e[Wd],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(t,e,r,i.index)),null!==ye)(ye.__ngLastListenerFn__||ye).__ngNextListenerFn__=o,ye.__ngLastListenerFn__=o,p=!1;else{o=IL(i,e,d,o,!1);const Te=n.listen(F,r,o);h.push(o,Te),l&&l.push(r,Q,X,X+1)}}else o=IL(i,e,d,o,!1);const _=i.outputs;let x;if(p&&null!==_&&(x=_[r])){const P=x.length;if(P)for(let F=0;F<P;F+=2){const je=e[x[F]][x[F+1]].subscribe(o),Ze=h.length;h.push(o,je),l&&l.push(r,i.index,Ze,-(Ze+1))}}}(o,r,r[Sn],s,t,e,i),Rn}function ML(t,e,n,i){try{return Na(6,e,n),!1!==n(i)}catch(r){return KF(t,r),!1}finally{Na(7,e,n)}}function IL(t,e,n,i,r){return function o(s){if(s===Function)return i;fb(t.componentOffset>-1?ts(t.index,e):e);let c=ML(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=ML(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function On(t=1){return function Mv(t){return(Dn.lFrame.contextLView=function Iv(t,e){for(;t>0;)e=e[fc],t--;return e}(t,Dn.lFrame.contextLView))[hr]}(t)}function KK(t,e){let n=null;const i=function Di(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?nh(t,o,!0):Yf(i,o))return r}else n=r}return n}function Kr(t){const e=Ct()[Xi][ro];if(!e.projection){const i=e.projection=vh(t?t.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=t?KK(o,t):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Pn(t,e=0,n){const i=Ct(),r=pi(),o=am(r,Jn+t,16,null,n||null);null===o.projection&&(o.projection=e),dp(),(!i[ys]||Fa())&&32!=(32&o.flags)&&function UC(t,e,n){yx(e[Sn],0,e,n,L_(t,n,e),gx(n.parent||e[ro],n,e))}(r,i,o)}function tw(t,e,n){return $T(t,"",e,"",n),tw}function $T(t,e,n,i,r){const o=Ct(),s=lm(o,e,n,i);return s!==Zn&&ga(pi(),Bi(),o,t,s,o[Sn],r,!1),$T}function nw(t,e){return t<<17|e<<2}function gu(t){return t>>17&32767}function XT(t){return 2|t}function Lh(t){return(131068&t)>>2}function KT(t,e){return-131069&t|e<<2}function qT(t){return 1|t}function BL(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?gu(o):Lh(o),c=!1;for(;0!==a&&(!1===c||s);){const d=t[a+1];tq(t[a],e)&&(c=!0,t[a+1]=i?qT(d):XT(d)),a=i?gu(d):Lh(d)}c&&(t[n+1]=i?XT(o):qT(o))}function tq(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&du(t,e)>=0}const ao={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jL(t){return t.substring(ao.key,ao.keyEnd)}function UL(t,e){const n=ao.textEnd;return n===e?-1:(e=ao.keyEnd=function oq(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ao.key=e,n),bm(t,e,n))}function bm(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function iw(t,e,n){return Ac(t,e,n,!1),iw}function Kn(t,e){return Ac(t,e,null,!0),Kn}function Wa(t){!function Sc(t,e,n,i){const r=pi(),o=La(2);r.firstUpdatePass&&$L(r,null,o,i);const s=Ct();if(n!==Zn&&as(s,o,n)){const a=r.data[Fo()];if(qL(a,i)&&!WL(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=vr(c,n||"")),WT(r,a,s,n,i)}else!function mq(t,e,n,i,r,o,s,a){r===Zn&&(r=Ai);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const p=c<r.length?r[c+1]:void 0,_=l<o.length?o[l+1]:void 0;let P,x=null;d===h?(c+=2,l+=2,p!==_&&(x=h,P=_)):null===h||null!==d&&d<h?(c+=2,x=d):(l+=2,x=h,P=_),null!==x&&XL(t,e,n,i,x,P,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Sn],s[o+1],s[o+1]=function fq(t,e,n){if(null==n||""===n)return Ai;const i=[],r=Es(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}(pq,cl,t,!0)}function cl(t,e){for(let n=function iq(t){return function zL(t){ao.key=0,ao.keyEnd=0,ao.value=0,ao.valueEnd=0,ao.textEnd=t.length}(t),UL(t,bm(t,0,ao.textEnd))}(e);n>=0;n=UL(e,n))xs(t,jL(e),!0)}function Ac(t,e,n,i){const r=Ct(),o=pi(),s=La(2);o.firstUpdatePass&&$L(o,t,s,i),e!==Zn&&as(r,s,e)&&XL(o,o.data[Fo()],r,r[Sn],t,r[s+1]=function gq(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ri(Es(t)))),t}(e,n),i,s)}function WL(t,e){return e>=t.expandoStartIndex}function $L(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Fo()],s=WL(t,n);qL(o,i)&&null===e&&!s&&(e=!1),e=function lq(t,e,n,i){const r=function fp(t){const e=Dn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Ab(n=JT(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=JT(r,t,e,n,i),null===o){let c=function dq(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Lh(i))return t[gu(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=JT(null,t,e,c[1],i),c=Ab(c,e.attrs,i),function uq(t,e,n,i){t[gu(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else o=function hq(t,e,n){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Ab(i,t[o].hostAttrs,n);return Ab(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function QK(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=gu(s),c=Lh(s);t[i]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||du(n,d)>0)&&(l=!0)):d=n,r)if(0!==c){const p=gu(t[a+1]);t[i+1]=nw(p,a),0!==p&&(t[p+1]=KT(t[p+1],i)),t[a+1]=function JK(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=nw(a,0),0!==a&&(t[a+1]=KT(t[a+1],i)),a=i;else t[i+1]=nw(c,0),0===a?a=i:t[c+1]=KT(t[c+1],i),c=i;l&&(t[i+1]=XT(t[i+1])),BL(t,d,i,!0),BL(t,d,i,!1),function eq(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&du(o,e)>=0&&(n[i+1]=qT(n[i+1]))}(e,d,t,i,o),s=nw(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,n,s,i)}}function JT(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=Ab(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Ab(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),xs(t,s,!!n||e[++o]))}return void 0===t?null:t}function pq(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&xs(t,i,n)}function XL(t,e,n,i,r,o,s,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],d=function ZK(t){return 1==(1&t)}(l)?KL(c,e,n,r,Lh(l),s):void 0;rw(d)||(rw(o)||function qK(t){return 2==(2&t)}(l)&&(o=KL(c,null,n,r,a,s)),function Sh(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:nl.DashCase;null==r?t.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=nl.Important),t.setStyle(n,i,r,o))}}(i,s,ap(Fo(),n),r,o))}function KL(t,e,n,i,r,o){const s=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let p=n[r+1];p===Zn&&(p=h?Ai:void 0);let _=h?v_(p,i):d===i?p:void 0;if(l&&!rw(_)&&(_=v_(c,i)),rw(_)&&(a=_,s))return a;const x=t[r+1];r=s?gu(x):Lh(x)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=v_(c,i))}return a}function rw(t){return void 0!==t}function qL(t,e){return 0!=(t.flags&(e?8:16))}function ki(t,e=""){const n=Ct(),i=pi(),r=t+Jn,o=i.firstCreatePass?am(i,r,1,e,null):i.data[r],s=JL(i,n,o,e,t);n[r]=s,zl()&&Xl(i,n,s,o),ua(o,!1)}let JL=(t,e,n,i,r)=>(Ba(!0),function jp(t,e){return t.createText(e)}(e[Sn],i));function $a(t){return _a("",t,""),$a}function _a(t,e,n){const i=Ct(),r=lm(i,t,e,n);return r!==Zn&&function Zl(t,e,n){const i=ap(e,t);!function fx(t,e,n){t.setValue(e,n)}(t[Sn],i,n)}(i,Fo(),r),_a}function ed(t,e,n){const i=Ct();return as(i,vs(),e)&&ga(pi(),Bi(),i,t,e,i[Sn],n,!0),ed}const vm="en-US";let _B=vm;function tM(t,e,n,i,r){if(t=kn(t),Array.isArray(t))for(let o=0;o<t.length;o++)tM(t[o],e,n,i,r);else{const o=pi(),s=Ct(),a=Ri();let c=ql(t)?t:kn(t.provide);const l=Bx(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(ql(t)||!t.multi){const _=new eu(l,r,Ge),x=iM(c,e,r?d:d+p,h);-1===x?(g_(xp(a,s),o,c),nM(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(_),s.push(_)):(n[x]=_,s[x]=_)}else{const _=iM(c,e,d+p,h),x=iM(c,e,d,d+p),F=x>=0&&n[x];if(r&&!F||!r&&!(_>=0&&n[_])){g_(xp(a,s),o,c);const X=function LJ(t,e,n,i,r){const o=new eu(t,n,Ge);return o.multi=[],o.index=e,o.componentProviders=0,zB(o,r,i&&!n),o}(r?FJ:NJ,n.length,r,i,l);!r&&F&&(n[x].providerFactory=X),nM(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(X),s.push(X)}else nM(o,t,_>-1?_:x,zB(n[r?x:_],l,!r&&i));!r&&i&&F&&n[x].componentProviders++}}}function nM(t,e,n,i){const r=ql(e),o=function hT(t){return!!t.useClass}(e);if(r||o){const c=(o?kn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[i,c]):l[d+1].push(i,c)}else l.push(n,c)}}}function zB(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function iM(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function NJ(t,e,n,i){return rM(this.multi,[])}function FJ(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Gl(n,n[Kt],this.providerFactory.index,i);o=a.slice(0,s),rM(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],rM(r,o);return o}function rM(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function gi(t,e=[]){return n=>{n.providersResolver=(i,r)=>function PJ(t,e,n){const i=pi();if(i.firstCreatePass){const r=aa(t);tM(n,i.data,i.blueprint,r,!0),tM(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class jh{}class HB{}class oM extends jh{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tL(this);const r=function bs(t,e){const n=t[iv]||null;if(!n&&!0===e)throw new Error(`Type ${ri(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Jl(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=wF(e,n,[{provide:jh,useValue:this},{provide:Yt,useValue:this.componentFactoryResolver},...i],ri(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class sM extends HB{constructor(e){super(),this.moduleType=e}create(e){return new oM(this.moduleType,e,[])}}function QB(t,e,n,i,r,o){const s=e+n;return as(t,s,r)?function al(t,e,n){return t[e]=n}(t,s+1,o?i.call(o,r):i(r)):function Db(t,e){const n=t[e];return n===Zn?void 0:n}(t,s+1)}function ba(t,e){const n=pi();let i;const r=t+Jn;n.firstCreatePass?(i=function oZ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=ca(i.type)),a=bo(Ge);try{const c=iu(!1),l=o();return iu(c),function VK(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,Ct(),r,l),l}finally{bo(a)}}function ll(t,e,n){const i=t+Jn,r=Ct(),o=function Kc(t,e){return t[e]}(r,i);return function Rb(t,e){return t[Kt].data[e].pure}(r,i)?QB(r,function so(){const t=Dn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}function cM(t){return e=>{setTimeout(t,void 0,e)}}const tn=class lZ extends Ve{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=cM(o),r&&(r=cM(r)),s&&(s=cM(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof ae&&e.add(a),a}};function dZ(){return this._results[Symbol.iterator]()}class Ob{get changes(){return this._changes||(this._changes=new tn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ob.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=dZ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Vs(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function rC(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function hZ(t,e,n,i=!0){const r=e[Kt];if(function FC(t,e,n,i){const r=oo+i,o=n.length;i>0&&(n[r-1][ra]=e),i<o-oo?(e[ra]=n[r],y_(n,oo+i,e)):(n.push(e),e[ra]=null),e[oi]=n;const s=e[ah];null!==s&&n!==s&&function LC(t,e){const n=t[Xd];e[Xi]!==e[oi][oi][Xi]&&(t[ui]=!0),null===n?t[Xd]=[e]:n.push(e)}(s,e);const a=e[Ra];null!==a&&a.insertView(t),e[fn]|=128}(r,e,t,n),i){const o=Hp(n,t),s=e[Sn],a=Vp(s,t[Oa]);null!==a&&function kC(t,e,n,i,r,o){i[Cr]=r,i[ro]=e,Ah(t,i,n,1,r,o)}(r,t[ro],s,e,a,o)}}let Ya=(()=>{class e{}return e.__NG_ELEMENT_ID__=mZ,e})();const fZ=Ya,pZ=class extends fZ{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function uZ(t,e,n,i){const r=e.tView,a=Wx(t,r,n,4096&t[fn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[ah]=t[e.index];const l=t[Ra];return null!==l&&(a[Ra]=l.createEmbeddedView(r)),BT(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new gb(r)}};function mZ(){return dw(Ri(),Ct())}function dw(t,e){return 4&t.type?new pZ(e,t,yn(t,e)):null}let zo=(()=>{class e{}return e.__NG_ELEMENT_ID__=xZ,e})();function xZ(){return u3(Ri(),Ct())}const wZ=zo,l3=class extends wZ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return yn(this._hostTNode,this._hostLView)}get injector(){return new Lo(this._hostTNode,this._hostLView)}get parentInjector(){const e=_h(this._hostTNode,this._hostLView);if(gh(e)){const n=bn(e,this._hostLView),i=Qc(e);return new Lo(n[Kt].data[i+8],n)}return new Lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=d3(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-oo}createEmbeddedView(e,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,o){const s=e&&!function bh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const P=n||{};a=P.index,i=P.injector,r=P.projectableNodes,o=P.environmentInjector||P.ngModuleRef}const c=s?e:new _b(Qn(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const F=(s?l:this.parentInjector).get(Hs,null);F&&(o=F)}Qn(c.componentType??{});const _=c.create(l,r,null,o);return this.insertImpl(_.hostView,a,false),_}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function cp(t){return es(t[oi])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[oi],d=new l3(l,l[ro],l[oi]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return hZ(a,r,s,!i),e.attachToViewContainerRef(),y_(lM(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=d3(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=rs(this._lContainer,n);i&&(yh(lM(this._lContainer),n),N_(i[Kt],i))}detach(e){const n=this._adjustIndex(e,-1),i=rs(this._lContainer,n);return i&&null!=yh(lM(this._lContainer),n)?new gb(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function d3(t){return t[8]}function lM(t){return t[8]||(t[8]=[])}function u3(t,e){let n;const i=e[t.index];return es(i)?n=i:(n=GF(i,e,null,t),e[t.index]=n,$x(e,n)),h3(n,e,t,i),new l3(n,t,e)}let h3=function f3(t,e,n,i){if(t[Oa])return;let r;r=8&n.type?Ki(i):function EZ(t,e){const n=t[Sn],i=n.createComment(""),r=No(e,t);return zi(n,Vp(n,r),i,function jC(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Oa]=r};class dM{constructor(e){this.queryList=e,this.matches=null}clone(){return new dM(this.queryList)}setDirty(){this.queryList.setDirty()}}class uM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new uM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==b3(e,n).matches&&this.queries[n].setDirty()}}class p3{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class hM{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new hM(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class fM{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new fM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,n,CZ(n,o)),this.matchTNodeWithReadOption(e,n,ou(n,e,o,!1,!1))}else i===Ya?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ou(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ut||r===zo||r===Ya&&4&n.type)this.addMatch(n.index,-2);else{const o=ou(n,e,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function CZ(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function MZ(t,e,n,i){return-1===n?function TZ(t,e){return 11&t.type?yn(t,e):4&t.type?dw(t,e):null}(e,t):-2===n?function IZ(t,e,n){return n===Ut?yn(e,t):n===Ya?dw(e,t):n===zo?u3(e,t):void 0}(t,e,i):Gl(t,t[Kt],n,e)}function m3(t,e,n,i){const r=e[Ra].queries[i];if(null===r.matches){const o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:MZ(e,o[l],s[c+1],n.metadata.read))}r.matches=a}return r.matches}function pM(t,e,n,i){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const s=m3(t,e,r,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=oo;h<d.length;h++){const p=d[h];p[ah]===p[oi]&&pM(p[Kt],p,l,i)}if(null!==d[Xd]){const h=d[Xd];for(let p=0;p<h.length;p++){const _=h[p];pM(_[Kt],_,l,i)}}}}}return i}function Un(t){const e=Ct(),n=pi(),i=h_();f_(i+1);const r=b3(n,i);if(t.dirty&&function gv(t){return 4==(4&t[fn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?pM(n,e,i,[]):m3(n,e,r,i);t.reset(o,Cn),t.notifyOnChanges()}return!0}return!1}function er(t,e,n){const i=pi();i.firstCreatePass&&(_3(i,new p3(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),g3(i,Ct(),e)}function Vn(){return function DZ(t,e){return t[Ra].queries[e].queryList}(Ct(),h_())}function g3(t,e,n){const i=new Ob(4==(4&n));(function MX(t,e,n,i){const r=$F(e);r.push(n),t.firstCreatePass&&YF(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[Ra]&&(e[Ra]=new uM),e[Ra].queries.push(new dM(i))}function _3(t,e,n){null===t.queries&&(t.queries=new hM),t.queries.track(new fM(e,n))}function b3(t,e){return t.queries.getByIndex(e)}const vM=new bt("Application Initializer");let xM=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Gt(vM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const o of this.appInits){const s=o();if(_m(s))i.push(s);else if(SL(s)){const a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const dl=new bt("LocaleId",{providedIn:"root",factory:()=>Gt(dl,Ln.Optional|Ln.SkipSelf)||function ZZ(){return typeof $localize<"u"&&$localize.locale||vm}()});let fw=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Z(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function j3(...t){}class an{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tn(!1),this.onMicrotaskEmpty=new tn(!1),this.onStable=new tn(!1),this.onError=new tn(!1),typeof Zone>"u")throw new Mt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function wQ(){const t="function"==typeof Ti.requestAnimationFrame;let e=Ti[t?"requestAnimationFrame":"setTimeout"],n=Ti[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function SQ(t){const e=()=>{!function AQ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ti,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,SM(t),t.isCheckStableRunning=!0,AM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),SM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return U3(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),V3(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return U3(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),V3(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,SM(t),AM(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!an.isInAngularZone())throw new Mt(909,!1)}static assertNotInAngularZone(){if(an.isInAngularZone())throw new Mt(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,EQ,j3,j3);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const EQ={};function AM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function SM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function U3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function V3(t){t._nesting--,AM(t)}class CQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tn,this.onMicrotaskEmpty=new tn,this.onStable=new tn,this.onError=new tn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const z3=new bt("",{providedIn:"root",factory:H3});function H3(){const t=Gt(an);let e=!0;return go(new B(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new B(r=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{an.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=t.onUnstable.subscribe(()=>{an.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Oe()))}const G3=new bt(""),mw=new bt("");let MM,CM=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,MM||(function TQ(t){MM=t}(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{an.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(an),nt(TM),nt(mw))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),TM=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return MM?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),_u=null;const W3=new bt("AllowMultipleToken"),IM=new bt("PlatformDestroyListeners"),gw=new bt("appBootstrapListener");function X3(t,e,n=[]){const i=`Platform: ${e}`,r=new bt(i);return(o=[])=>{let s=DM();if(!s||s.injector.get(W3,!1)){const a=[...n,...o,{provide:r,useValue:!0}];t?t(a):function DQ(t){if(_u&&!_u.get(W3,!1))throw new Mt(400,!1);(function $3(){!function Pa(t){tp=t}(()=>{throw new Mt(600,!1)})})(),_u=t;const e=t.get(q3);(function Y3(t){t.get(em,null)?.forEach(n=>n())})(t)}(function K3(t=[],e){return wr.create({name:e,providers:[{provide:eb,useValue:"platform"},{provide:IM,useValue:new Set([()=>_u=null])},...t]})}(a,i))}return function OQ(t){const e=DM();if(!e)throw new Mt(401,!1);return e}()}}function DM(){return _u?.get(q3)??null}let q3=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const o=function kQ(t="zone.js",e){return"noop"===t?new CQ:"zone.js"===t?new an(e):t}(r?.ngZone,function J3(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const s=function jJ(t,e,n){return new oM(t,e,n)}(i.moduleType,this.injector,function nj(t){return[{provide:an,useFactory:t},{provide:Mh,multi:!0,useFactory:()=>{const e=Gt(NQ,{optional:!0});return()=>e.initialize()}},{provide:tj,useFactory:PQ},{provide:z3,useFactory:H3}]}(()=>o)),a=s.injector.get(xc,null);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{_w(this._modules,s),c.unsubscribe()})}),function Z3(t,e,n){try{const i=n();return _m(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,o,()=>{const c=s.injector.get(xM);return c.runInitializers(),c.donePromise.then(()=>(function bB(t){Jo(t,"Expected localeId to be defined"),"string"==typeof t&&(_B=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(dl,vm)||vm),this._moduleDoBootstrap(s),s))})})}bootstrapModule(i,r=[]){const o=Q3({},r);return function MQ(t,e,n){const i=new sM(n);return Promise.resolve(i)}(0,0,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){const r=i.injector.get(Uh);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!i.instance.ngDoBootstrap)throw new Mt(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Mt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(IM,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(wr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function Q3(t,e){return Array.isArray(e)?e.reduce(Q3,t):{...t,...e}}let Uh=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Gt(tj),this.zoneIsStable=Gt(z3),this.componentTypes=[],this.components=[],this.isStable=Gt(fw).hasPendingTasks.pipe(qe(i=>i?qt(!1):this.zoneIsStable),ht(),Oe()),this._injector=Gt(Hs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const o=i instanceof it;if(!this._injector.get(xM).done)throw!o&&function Hd(t){const e=Qn(t)||kr(t)||ko(t);return null!==e&&e.standalone}(i),new Mt(405,!1);let a;a=o?i:this._injector.get(Yt).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const c=function IQ(t){return t.isBoundToModule}(a)?void 0:this._injector.get(jh),d=a.create(wr.NULL,[],r||a.selector,c),h=d.location.nativeElement,p=d.injector.get(G3,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),_w(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Mt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;_w(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(gw,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>_w(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Mt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function _w(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const tj=new bt("",{providedIn:"root",factory:()=>Gt(xc).handleError.bind(void 0)});function PQ(){const t=Gt(an),e=Gt(xc);return n=>t.runOutsideAngular(()=>e.handleError(n))}let NQ=(()=>{var t;class e{constructor(){this.zone=Gt(an),this.applicationRef=Gt(Uh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let Jr=(()=>{class e{}return e.__NG_ELEMENT_ID__=LQ,e})();function LQ(t){return function BQ(t,e,n){if(Po(t)&&!n){const i=ts(t.index,e);return new gb(i,i)}return 47&t.type?new gb(e[Xi],e):null}(Ri(),Ct(),16==(16&t))}class sj{constructor(){}supports(e){return qx(e)}create(e){return new GQ(e)}}const HQ=(t,e)=>e;class GQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||HQ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<cj(i,r,o)?n:i,a=cj(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let p=0;p<l;p++){const _=p<o.length?o[p]:o[p]=0,x=_+p;d<=x&&x<l&&(o[p]=_+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!qx(e))throw new Mt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function vK(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new WQ(n,i),o,r),e}_verifyReinsertion(e,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new aj),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aj),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class WQ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $Q{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class aj{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new $Q,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cj(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function dj(){return new vw([new sj])}let vw=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||dj()),deps:[[e,new Tp,new tl]]}}find(i){const r=this.factories.find(o=>o.supports(i));if(null!=r)return r;throw new Mt(901,!1)}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:dj}),e})();const JQ=X3(null,"core",[]);let ZQ=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Uh))},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),e})(),FM=null;function bu(){return FM}class uee{}const zn=new bt("DocumentToken");let yj=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return Gt(hee)},providedIn:"platform"}),e})(),hee=(()=>{var t;class e extends yj{constructor(){super(),this._doc=Gt(zn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bu().getBaseHref(this._doc)}onPopState(i){const r=bu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=bu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function vj(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function xj(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Hh(t){return t&&"?"!==t[0]?"?"+t:t}let Lb=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return Gt(pee)},providedIn:"root"}),e})();const fee=new bt("appBaseHref");let pee=(()=>{var t;class e extends Lb{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Gt(zn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return vj(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+Hh(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){const a=this.prepareExternalUrl(o+Hh(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){const a=this.prepareExternalUrl(o+Hh(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(yj),nt(fee,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Bb=(()=>{var t;class e{constructor(i){this._subject=new tn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function _ee(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(xj(wj(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Hh(r))}normalize(i){return e.stripTrailingSlash(function gee(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,wj(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Hh(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Hh(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}}return(t=e).normalizeQueryParams=Hh,t.joinWithSlash=vj,t.stripTrailingSlash=xj,t.\u0275fac=function(i){return new(i||t)(nt(Lb))},t.\u0275prov=Et({token:t,factory:function(){return function mee(){return new Bb(nt(Lb))}()},providedIn:"root"}),e})();function wj(t){return t.replace(/\/index.html$/,"")}class nte{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gh=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new nte(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,a),Pj(c,o)}});for(let o=0,s=r.length;o<s;o++){const c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{Pj(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(zo),Ge(Ya),Ge(vw))},t.\u0275dir=jt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function Pj(t,e){t.context.$implicit=e.item}let ul=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new ite,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){Nj("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){Nj("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(zo),Ge(Ya))},t.\u0275dir=jt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class ite{constructor(){this.$implicit=null,this.ngIf=null}}function Nj(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ri(e)}'.`)}class ste{createSubscription(e,n){return xo(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){xo(()=>e.unsubscribe())}}class ate{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const cte=new ate,lte=new ste;let Vb=(()=>{var t;class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(_m(i))return cte;if(SL(i))return lte;throw function Tc(t,e){return new Mt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Jr,16))},t.\u0275pipe=Or({name:"async",type:t,pure:!1,standalone:!0}),e})(),Dr=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),e})();const zj="browser";function yu(t){return t===zj}function ZM(t){return"server"===t}class Jte extends uee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tI extends Jte{static makeCurrent(){!function dee(t){FM||(FM=t)}(new tI)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Zte(){return Hb=Hb||document.querySelector("base"),Hb?Hb.getAttribute("href"):null}();return null==n?null:function Qte(t){Nw=Nw||document.createElement("a"),Nw.setAttribute("href",t);const e=Nw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Hb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Rj(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Nw,Hb=null,tne=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const nI=new bt("EventManagerPlugins");let Xj=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new Mt(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(nI),nt(an))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();class Kj{constructor(e){this._doc=e}}const iI="ng-app-id";let qj=(()=>{var t;class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ZM(s),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${iI}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){const o=this.styleRef;if(o.has(i)){const s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(iI),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(iI,this.appId),a}}addStyleToHost(i,r){const o=this.getStyleElement(i,r);i.appendChild(o);const s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn),nt(Dh),nt(sb,8),nt(ma))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const rI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oI=/%COMP%/g,one=new bt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Zj(t,e){return e.map(n=>n.replace(oI,t))}let Qj=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ZM(c),this.defaultRenderer=new sI(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Sr.ShadowDom&&(r={...r,encapsulation:Sr.Emulated});const o=this.getOrCreateRenderer(i,r);return o instanceof t4?o.applyToHost(i):o instanceof aI&&o.applyStyles(),o}getOrCreateRenderer(i,r){const o=this.rendererByCompId;let s=o.get(r.id);if(!s){const a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Sr.Emulated:s=new t4(l,d,r,this.appId,h,a,c,p);break;case Sr.ShadowDom:return new lne(l,d,i,r,a,c,this.nonce,p);default:s=new aI(l,d,r,h,a,c,p)}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Xj),nt(qj),nt(Dh),nt(one),nt(zn),nt(ma),nt(an),nt(sb))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();class sI{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(rI[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(e4(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(e4(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Mt(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const o=rI[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=rI[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(nl.DashCase|nl.Important)?e.style.setProperty(n,i,r&nl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&nl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=bu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function e4(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class lne extends sI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Zj(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class aI extends sI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Zj(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class t4 extends aI{constructor(e,n,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=function sne(t){return"_ngcontent-%COMP%".replace(oI,t)}(l),this.hostAttr=function ane(t){return"_nghost-%COMP%".replace(oI,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let dne=(()=>{var t;class e extends Kj{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const n4=["alt","control","meta","shift"],une={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hne={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let fne=(()=>{var t;class e extends Kj{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,o){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bu().onAndCancel(i,s.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),n4.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=une[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),n4.forEach(a=>{a!==o&&(0,hne[a])(i)&&(s+=a+".")}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const r4=[{provide:ma,useValue:zj},{provide:em,useValue:function pne(){tI.makeCurrent()},multi:!0},{provide:zn,useFactory:function gne(){return function wx(t){z_=t}(document),document},deps:[]}],_ne=X3(JQ,"browser",r4),bne=new bt(""),o4=[{provide:mw,useClass:class ene{addToWindow(e){Ti.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Mt(5103,!1);return o},Ti.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ti.getAllAngularRootElements=()=>e.getAllRootElements(),Ti.frameworkStabilizers||(Ti.frameworkStabilizers=[]),Ti.frameworkStabilizers.push(i=>{const r=Ti.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?bu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:G3,useClass:CM,deps:[an,TM,mw]},{provide:CM,useClass:CM,deps:[an,TM,mw]}],s4=[{provide:eb,useValue:"root"},{provide:xc,useFactory:function mne(){return new xc},deps:[]},{provide:nI,useClass:dne,multi:!0,deps:[zn,an,ma]},{provide:nI,useClass:fne,multi:!0,deps:[zn]},Qj,qj,Xj,{provide:li,useExisting:Qj},{provide:class Hj{},useClass:tne,deps:[]},[]];let yne=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Dh,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(bne,12))},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({providers:[...s4,...o4],imports:[Dr,ZQ]}),e})();typeof window<"u"&&window;let Gb=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(i){let r=null;return r=i?new(i||t):nt(d4),r},providedIn:"root"}),e})(),d4=(()=>{var t;class e extends Gb{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case pr.NONE:return r;case pr.HTML:return Ha(r,"HTML")?Es(r):Mx(this._doc,String(r)).toString();case pr.STYLE:return Ha(r,"Style")?Es(r):r;case pr.SCRIPT:if(Ha(r,"Script"))return Es(r);throw new Mt(5200,!1);case pr.URL:return Ha(r,"URL")?Es(r):pu(String(r));case pr.RESOURCE_URL:if(Ha(r,"ResourceURL"))return Es(r);throw new Mt(5201,!1);default:throw new Mt(5202,!1)}}bypassSecurityTrustHtml(i){return function XC(t){return new GC(t)}(i)}bypassSecurityTrustStyle(i){return function KC(t){return new Ax(t)}(i)}bypassSecurityTrustScript(i){return function qC(t){return new $p(t)}(i)}bypassSecurityTrustUrl(i){return function JC(t){return new WC(t)}(i)}bypassSecurityTrustResourceUrl(i){return function ZC(t){return new $C(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn))},t.\u0275prov=Et({token:t,factory:function(i){let r=null;return r=i?new i:function Sne(t){return new d4(t.get(zn))}(nt(wr)),r},providedIn:"root"}),e})();const lI={now:()=>(lI.delegate||Date).now(),delegate:void 0};class Sm extends Ve{constructor(e=1/0,n=1/0,i=lI){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}const Fw={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return Fw.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return Fw.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let dI;function Pne(t,e,n){let i=n;return function Tne(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,o)=>!("*"===r||!function Ine(t,e){if(!dI){const n=Element.prototype;dI=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&dI.call(t,e)}(t,r)||(i=o,0))),i}class Fne{constructor(e,n){this.componentFactory=n.get(Yt).resolveComponentFactory(e)}create(e){return new Lne(this.componentFactory,e)}}class Lne{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new Sm(1),this.events=this.eventEmitters.pipe(qe(i=>go(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(an),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Fw.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function Dne(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=wr.create({providers:[],parent:this.injector}),i=function kne(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=n.length;o<s;++o){const a=n[o],c=Pne(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Jr),this.implementsOnChanges=function Mne(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Uh).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(de(s=>({name:r,value:s}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Fw.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new fv(o,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Bne extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const Une={initialConfig:{},parse:{},rename:{}};class Vne{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...Une,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,n,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=n.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[s]=a}}let zne=(()=>{var t;class e{constructor(i,r,o={}){this.configState=i,this.cdr=r,this.options=o,this.initialized=!1,this.configManager=new Vne(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return(t=e).\u0275fac=function(i){Nh()},t.\u0275dir=jt({type:t,features:[Pr]}),e})();const Wb_dbOptions={ccfOwlUrl:"https://ccf-api.hubmapconsortium.org/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""};function h4(t,e,n,i,r,o,s){try{var a=t[o](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Bt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function s(c){h4(o,i,r,s,a,"next",c)}function a(c){h4(o,i,r,s,a,"throw",c)}s(void 0)})}}function $b(t){return($b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ve(t,e,n){return(e=function Gne(t){var e=function Hne(t,e){if("object"!==$b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==$b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$b(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f4(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function hl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||f4()}window;const p4=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";hl();class $ne{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ve(this,"storage",void 0),ve(this,"id",void 0),ve(this,"config",void 0),this.storage=function Wne(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function uI(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Lw;var t;function m4(t){return"string"==typeof t?Lw[t.toUpperCase()]||Lw.WHITE:t}function Bw(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=Lw||(Lw={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const xu={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},jw=xu.window||xu.self||xu.global,Yb=xu.process||{};function Cm(){let t;var e,n;if(hl&&"performance"in jw)t=null==jw||null===(e=jw.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Yb){var i;const r=null==Yb||null===(i=Yb.hrtime)||void 0===i?void 0:i.call(Yb);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const Tm={debug:hl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Qne={enabled:!0,level:0};function qa(){}const g4={},_4={once:!0};class hI{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ve(this,"id",void 0),ve(this,"VERSION",p4),ve(this,"_startTs",Cm()),ve(this,"_deltaTs",Cm()),ve(this,"_storage",void 0),ve(this,"userData",{}),ve(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new $ne("__probe-".concat(this.id,"__"),Qne),this.timeStamp("".concat(this.id," started")),function Zne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(o=>r===o)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Cm()-this._startTs).toPrecision(10))}getDelta(){return Number((Cm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Bw(e,n)}warn(e){return this._getLogFunction(0,e,Tm.warn,arguments,_4)}error(e){return this._getLogFunction(0,e,Tm.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Tm.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Tm.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,n,Tm.debug||Tm.info,arguments,_4)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||qa,i&&[i],{tag:iie(n)}):qa}image(e){let{logLevel:n,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(n||i)?hl?function nie(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=uI(o,n,i);console.log(...s)},o.src=e,qa}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...uI(e,n,i)),qa;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...uI(o,n,i)),o.src=e.toDataURL(),qa}return qa}({image:r,message:o,scale:s}):function tie(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),qa}({image:r,message:o,scale:s}):qa}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||qa)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=y4({logLevel:e,message:n,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||qa)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=b4(e)}_getLogFunction(e,n,i,r,o){if(this._shouldLog(e)){o=y4({logLevel:e,message:n,args:r,opts:o}),Bw(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Cm();const s=o.tag||o.message;if(o.once){if(g4[s])return qa;g4[s]=Cm()}return n=function eie(t,e,n){if("string"==typeof e){const i=n.time?function Xne(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Yne(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Jne(t,e,n){return!hl&&"string"==typeof t&&(e&&(e=m4(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=m4(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,o.message,o),i.bind(console,n,...o.args)}return qa}}function b4(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Bw(Number.isFinite(e)&&e>=0),e}function y4(t){const{logLevel:e,message:n}=t;t.logLevel=b4(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return Bw("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function iie(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ve(hI,"VERSION",p4);const bi=new hI({id:"deck"}),Ci={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ci,"IDENTITY",{get:()=>(bi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const fl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Uw={common:0,meters:1,pixels:2},v4={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},dn=new hI({id:"luma.gl"});function Is(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const oie="Requires WebGL2";function Vw(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function hi(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function zw(t){return Is(Vw(t),"Invalid WebGLRenderingContext"),t}function cs(t){return Is(hi(t),oie),t}const Xb={};const Kb=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(Kb.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Wh=function(e){const n=this;this.gl=e,function die(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(Xb[i]=!0)}while(0!==i);for(i in Xb)if(Xb[i])return delete Xb[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const p=h.attribs[o];return p.buffer=n.currentArrayBuffer,p.size=s,p.type=a,p.normalized=c,p.stride=l,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function cie(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Wh.prototype.VERTEX_ARRAY_BINDING_OES=34229,Wh.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new Kb(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Wh.prototype.createVertexArrayOES=function(){const e=new Kb(this);return this.vertexArrayObjects.push(e),e},Wh.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Wh.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Kb&&e.hasBeenBound&&e.ext===this)},Wh.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function lie(t,e){Xb[t]=!0,void 0!==e&&function aie(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const x4="OES_element_index",w4="WEBGL_draw_buffers",E4="WEBGL_debug_renderer_info",ar=t=>hi(t)?void 0:0,xie={3074:t=>hi(t)?void 0:36064,35723:t=>hi(t)?void 0:4352,35977:ar,32937:ar,36795:(t,e)=>{const n=hi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(E4);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(E4);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:ar,35071:ar,37447:ar,36063:(t,e)=>{if(!hi(t)){const n=t.getExtension(w4);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:ar,35374:ar,35377:ar,34852:t=>{if(!hi(t)){const e=t.getExtension(w4);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(x4)?2147483647:65535,33001:t=>t.getExtension(x4)?16777216:65535,33e3:t=>16777216,37157:ar,35373:ar,35657:ar,36183:ar,37137:ar,34045:ar,35978:ar,35979:ar,35968:ar,35376:ar,35375:ar,35659:ar,37154:ar,35371:ar,35658:ar,35076:ar,35077:ar,35380:ar},A4="ANGLE_instanced_arrays",S4={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Is(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[A4]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Is(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Is(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Is(!1)},deleteQuery:()=>{Is(!1)},beginQuery:()=>{Is(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},fI={readBuffer:(t,e,n)=>{hi(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:o}=function Mie(t,e){return{webgl2:hi(t),ext:t.getExtension(e)}}(t,A4);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!hi(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>hi(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function wie(t,e,n){const i=xie[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function kie(t,e){let{extension:n,target:i,target2:r}=e;const o=S4[n];Is(o);const{meta:s={}}=o,{suffix:a=""}=s,c=t.getExtension(n);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function Iie(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function uie(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Wh(this)),this.__OESVertexArrayObject))}}(t),function Die(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function Oie(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&kie(t,{extension:n,target:t.luma,target2:t})}(t,S4),function Rie(t,e){let{target:n,target2:i}=e;Object.keys(fI).forEach(r=>{if("function"==typeof fI[r]){const o=t[r]?t[r].bind(t):()=>{},s=fI[r].bind(null,t,o);n[r]=s,i[r]=s}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const pI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},wu=(t,e,n)=>e?t.enable(n):t.disable(n),C4=(t,e,n)=>t.hint(n,e),va=(t,e,n)=>t.pixelStorei(n,e);function qb(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Fie={3042:wu,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:wu,2885:(t,e)=>t.cullFace(e),2929:wu,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:wu,35723:C4,36006:(t,e)=>{const n=hi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:C4,2849:(t,e)=>t.lineWidth(e),32823:wu,32824:"polygonOffset",10752:"polygonOffset",35977:wu,32938:"sampleCoverage",32939:"sampleCoverage",3089:wu,3088:(t,e)=>t.scissor(...e),2960:wu,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:va,3317:va,37440:va,37441:va,37443:va,3330:va,3332:va,3331:va,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:va,32878:va,3316:va,3315:va,32877:va,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=qb(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=qb(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=qb(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=qb(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=qb(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Lr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const Lie={blendEquation:(t,e,n)=>t.blendEquationSeparate(Lr(32777,e,n),Lr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Lr(32969,e,n),Lr(32968,e,n),Lr(32971,e,n),Lr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Lr(32824,e,n),Lr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Lr(32938,e,n),Lr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Lr(2962,e,n),Lr(2967,e,n),Lr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Lr(34816,e,n),Lr(36003,e,n),Lr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Lr(2964,e,n),Lr(2965,e,n),Lr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Lr(34817,e,n),Lr(34818,e,n),Lr(34819,e,n))},T4={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},pl=(t,e)=>t.isEnabled(e),M4={3042:pl,2884:pl,2929:pl,3024:pl,32823:pl,32926:pl,32928:pl,3089:pl,2960:pl,35977:pl};function I4(t){for(const e in t)return!1;return!0}function Bie(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function D4(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function jie(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Vie{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function Hie(t,e){if("number"==typeof(e=e||pI)){const r=e,o=M4[r];return o?o(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const o=M4[r];i[r]=o?o(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},pI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Is(this.stateStack.length>0),id(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Is(void 0!==o);const s=e[o],a=this.cache[o];Bie(s,a)||(n=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:i}}}function R4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Is(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new Vie(t,{copyState:i}),function Uie(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const o in T4)jie(t,o,T4[o]);D4(t,"getParameter"),D4(t,"isEnabled")}return t.state.enable=n,t}function O4(t){Is(t.state),t.state.pop()}function id(t,e){if(Is(Vw(t),"setParameters requires a WebGL context"),I4(e))return;const n={};for(const r in e){const o=Number(r),s=Fie[r];s&&("string"==typeof s?n[s]=!0:s(t,e[r],o))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,Lie[r])(t,e,i)}function Mc(t,e,n){if(I4(e))return n(t);const{nocatch:i=!0}=e;let r;if(function zie(t){t.state||R4(t,{copyState:!1}),t.state.push()}(t),id(t,e),i)r=n(t),O4(t);else try{r=n(t)}finally{O4(t)}return r}function Mm(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function mI(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function $ie(t,e,n,i,r){const o=k4(t[0],e,n);let s=P4(t[1],e,i,r),a=k4(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=P4(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,Mm(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function k4(t,e,n){return Math.min(Math.round(t*e),n-1)}function P4(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const gI=hl(),Yie=gI&&typeof document<"u",N4={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function F4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Is(gI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},N4,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:o}=t,s=function Jie(t){let o,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(Yie&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:n,onError:i});return r=function qie(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,t),r?(r=_I(r,t),function Zie(t){const e=hi(t)?"WebGL2":"WebGL1",n=function Xie(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";dn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function _I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function Qie(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},N4,e);const{manageState:n,debug:i}=e;return n&&R4(t,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return dn.log(1,...o)()}}),gI&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),dn.level=Math.max(dn.level,1)):dn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function L4(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class B4{constructor(e,n){ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"sampleSize",1),ve(this,"time",void 0),ve(this,"count",void 0),ve(this,"samples",void 0),ve(this,"lastTiming",void 0),ve(this,"lastSampleTime",void 0),ve(this,"lastSampleCount",void 0),ve(this,"_count",0),ve(this,"_time",0),ve(this,"_samples",0),ve(this,"_startTime",0),ve(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=L4(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(L4()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class bI{constructor(e){ve(this,"id",void 0),ve(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof B4?e:new B4(n,i)),this.stats[n]}}const Jb="8.5.21",$h=new class nre{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new bI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==Jb)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Jb));function Xt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function yI(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Xt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Eu(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(hl()&&dn.log(1,"luma.gl ".concat(Jb," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Jb,version:Jb,log:dn,stats:$h,globals:{modules:{},nodeIO:{}}}),globalThis;const vI={};function $s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";vI[t]=vI[t]||1;const e=vI[t]++;return"".concat(t,"-").concat(e)}function j4(t){return Xt("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function Im(t){let e=!0;for(const n in t){e=!1;break}return e}function U4(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(s=>{o.methodName||(o[s]=()=>{throw dn.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const Dm="Resource subclass must define virtual methods";class rd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zw(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||$s(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xt(e=yI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=hi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},o=hi(this.gl),s={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Eu(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=Eu(this.gl,s[h]))}}return s}setParameter(e,n){Xt(e=yI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=hi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=yI(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return U4(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(Dm)}_deleteHandle(){throw new Error(Dm)}_bindHandle(e){throw new Error(Dm)}_getOptsFromHandle(){throw new Error(Dm)}_getParameter(e,n){throw new Error(Dm)}_setParameter(e,n){throw new Error(Dm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=$h.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];$h.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=$h.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=$h.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const ire="Failed to deduce GL constant from typed array";function xI(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ire)}}function Zb(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function ore(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:s,width:r,height:o}}function wI(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";dn.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];dn.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];dn.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const sre={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},are={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ys{static getBytesPerElement(e){return Zb(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Xt(e.size),Zb(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Ys(sre,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ys.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ys.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=wI("Accessor",e,are),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const z4={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},cre={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:z4},lre={removedProps:z4};class qi extends rd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/Ys.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/Ys.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=wI("Buffer",e,cre),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=wI("Buffer",e,lre))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Ys(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Xt(n);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(cs(this.gl),this.gl.bufferSubData(this.target,i,n,r,o)):this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return cs(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cs(this.gl);const o=Zb(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Xt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Xt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Xt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=xI(e);return Xt(o),this.setAccessor(new Ys(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Xt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/Zb(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new Ys(this.accessor,{type:xI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return dn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return dn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return dn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return dn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ys(this.accessor,e),this}}const EI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},H4={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},G4={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},hre=[9729,9728],W4=globalThis.WebGLBuffer||function(){};class Yh extends rd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let o=!0;return i&&(o=o&&function dre(t,e){const n=EI[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=hi(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),o=o&&(!r||function ure(t,e){const n=EI[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,n){const{id:i=$s("texture"),handle:r,target:o}=n;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(Q=>this.initialize(Object.assign({},e,{pixels:Q,data:Q}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:p,dataFormat:_,type:x,compressed:P=!1,mipmaps:F=!0}=e;const{depth:X=0}=e;return({width:h,height:p,compressed:P,dataFormat:_,type:x}=this._deduceParameters({format:o,type:x,dataFormat:_,compressed:P,data:n,width:h,height:p})),this.width=h,this.height=p,this.depth=X,this.format=o,this.type=x,this.dataFormat=_,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),F&&this._isNPOT()&&(dn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),F=!1,this._updateForNPOT(c)),this.mipmaps=F,this.setImageData({data:n,width:h,height:p,depth:X,format:o,type:x,dataFormat:_,border:s,mipmaps:F,parameters:l,compressed:P}),F&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(dn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Mc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:p=this.height,dataFormat:_=this.dataFormat,compressed:x=!1}=e;l||(l=i),({type:d,dataFormat:_,compressed:x,width:h,height:p}=this._deduceParameters({format:o,type:d,dataFormat:_,compressed:x,data:l,width:h,height:p}));const{gl:P}=this;P.bindTexture(this.target,this.handle);let F=null;({data:l,dataType:F}=this._getDataType({data:l,compressed:x}));let X,Q=0;return Mc(this.gl,c,()=>{switch(F){case"null":P.texImage2D(n,r,o,h,p,s,_,d,l);break;case"typed-array":P.texImage2D(n,r,o,h,p,s,_,d,l,a);break;case"buffer":X=cs(P),X.bindBuffer(35052,l.handle||l),X.texImage2D(n,r,o,h,p,s,_,d,a),X.bindBuffer(35052,null);break;case"browser-object":hi(P)?P.texImage2D(n,r,o,h,p,s,_,d,l):P.texImage2D(n,r,o,_,d,l);break;case"compressed":for(const[ye,Te]of l.entries())P.compressedTexImage2D(n,ye,Te.format,Te.width,Te.height,s,Te.data),Q+=Te.levelSize;break;default:Xt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===F?Q:l&&l.byteLength?l.byteLength:this.width*this.height*(H4[this.dataFormat]||4)*(G4[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:_=!1,offset:x=0,border:P=this.border,parameters:F={}}=e;if(({type:h,dataFormat:p,compressed:_,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:p,compressed:_,data:r,width:a,height:c})),Xt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const X=r;r=X.data,a=X.shape[0],c=X.shape[1]}r instanceof qi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Mc(this.gl,F,()=>{if(_)this.gl.compressedTexSubImage2D(n,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,o,s,a,c,p,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,o,s,a,c,p,h,r,x);else if(r instanceof W4){const X=cs(this.gl);X.bindBuffer(35052,r),X.texSubImage2D(n,l,o,s,a,c,p,h,x),X.bindBuffer(35052,null)}else hi(this.gl)?cs(this.gl).texSubImage2D(n,l,o,s,a,c,p,h,r):this.gl.texSubImage2D(n,l,o,s,p,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return dn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof qi?{data:n.handle,dataType:"buffer"}:n instanceof W4?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=EI[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Xt(r,"Could not deduced texture size"),Xt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Xt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Xt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(hi(this.gl)||!this.width||!this.height||j4(this.width)&&j4(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===hre.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function fre(t,e){return Xt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class Ds extends Yh{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Yh.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zw(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:fre(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Xh="EXT_color_buffer_float",$4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Xh,bpp:2},33327:{gl2:Xh,bpp:4},34842:{gl2:Xh,bpp:8},33326:{gl2:Xh,bpp:4},33328:{gl2:Xh,bpp:8},34836:{gl2:Xh,bpp:16},35898:{gl2:Xh,bpp:4}};class Rm extends rd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function pre(t,e,n){const i=n[e];if(!i)return!1;const r=hi(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,$4)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:o=0}=e;return Xt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&hi(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*$4[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const Y4=6144,J4="clear: bad arguments";function SI(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Xt(0!==s,J4),Mc(t,o,()=>{t.clear(s)})}const CI=[34069,34070,34071,34072,34073,34074];let vre=(()=>{class t extends Yh{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zw(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return Bt(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n;const{gl:h}=i,p=s||a,_=yield Promise.all(CI.map(x=>{const P=p[x];return Promise.all(Array.isArray(P)?P:[P])}));i.bind(),CI.forEach((x,P)=>{_[P].length>1&&!1!==i.opts.mipmaps&&dn.warn("".concat(i.id," has mipmap and multiple LODs."))(),_[P].forEach((F,X)=>{r&&o?h.texImage2D(x,X,l,r,o,c,l,d,F):h.texImage2D(x,X,l,l,d,F)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n,{gl:h}=this,p=s||a;return this.bind(),p instanceof Promise?p.then(_=>this.setImageDataForFace(Object.assign({},n,{face:i,data:_,pixels:_}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,p):h.texImage2D(i,0,l,l,d,p),this}}return t.FACES=CI,t})();class xre extends Yh{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return hi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cs(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:p={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Mc(this.gl,p,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,h),h instanceof qi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(H4[this.dataFormat]||4)*(G4[this.type]||1),"Texture"),this.loaded=!0,this}}function Ere(t,e){const{gl:n,width:i,height:r,id:o}=t;return new co(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:t}}))}function Hw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=Qb(t);Xt(d);const{gl:p,handle:_,attachments:x}=d;a=a||d.width,c=c||d.height,36064===o&&null===_&&(o=1028),Xt(x[o]),l=l||x[o].type,s=function Sre(t,e,n,i,r){if(t)return t;const o=Zb(e=e||5121,{clamped:!1}),s=function yre(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Xt(!1),0}}(n);return new o(i*r*s)}(s,l,r,a,c),l=l||xI(s);const P=p.bindFramebuffer(36160,_);return p.readPixels(n,i,a,c,r,l,s),p.bindFramebuffer(36160,P||null),h&&d.delete(),s}function TI(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Hw(t,{sourceAttachment:e}),{width:r,height:o}=t;for(;o>n;)({data:i,width:r,height:o}=ore({data:i,width:r,height:o}));!function rre(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:o}=t;const s=n*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function Qb(t){return t instanceof co?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Ere(t),deleteFramebuffer:!0}}const Z4="Multiple render targets not supported";class co extends rd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new co(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=cs(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=cs(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Xt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const p=r[h];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else r=this._createDefaultAttachments(o,s,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Xt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&dn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Xt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof Rm)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,p=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:p})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function Tre(t){return(co.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&SI(this.gl,{color:n,depth:i,stencil:r}),o.forEach((a,c)=>{!function bre(t){let{framebuffer:e=null,buffer:n=Y4,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cs(t),Mc(t,{framebuffer:e},()=>{switch(n){case Y4:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;t.clearBufferfi(34041,0,o,s);break;default:Xt(!1,J4)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return dn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return dn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return dn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return dn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return dn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return dn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:o,height:s}=e;const a=cs(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Eu(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[n?Eu(this.gl,o):o]=this.getAttachmentParameter(e,o,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const o=Number(r);i[e?Eu(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(TI(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>dn.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=TI(this,{targetMaxHeight:100});return dn.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new Ds(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),n&&i?(s=s||{},s[33306]=new Rm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new Rm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Xt(!1),s}_unattach(e){const n=this.attachments[e];n&&(n instanceof Rm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:cs(s).framebufferTextureLayer(36160,n,i.target,o,r);break;case 34067:const c=function Cre(t){return t<34069?t+34069:t}(r);s.framebufferTexture2D(36160,n,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,o);break;default:Xt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function sie(t){return hi(t)?t:null}(this.gl);n?n.readBuffer(e):Xt(36064===e||1029===e,Z4),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=cs(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Xt(1===e.length&&(36064===e[0]||1029===e[0]),Z4)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function Rre(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Q4)void 0===t.luma.caps[e]&&(t.luma.caps[e]=tU(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}co.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const Q4={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Ire(t){const e=new Ds(t,{format:6408,type:5126,dataFormat:6408}),n=new co(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Dre=2;function MI(t,e){return eU(t,e)}function eU(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>tU(t,n))}function tU(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function Ore(t,e){const n=Q4[e];let i;Xt(n,e);const r=hi(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!t.getExtension(o)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Xt(!1);return i}(t,e)),t.luma.caps[e]||dn.log(Dre,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class II{constructor(e,n){ve(this,"opts",void 0),ve(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=n.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const ey=new class Pre{constructor(e={}){ve(this,"_pool",[]),ve(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=n*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const p=this._allocate(l,d,a,h);return e&&s?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,n,i,r){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,o=n.findIndex(s=>s.byteLength>=r);o<0?n.push(i):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,i),n.length>this.opts.poolSize&&n.shift()}},Nre=1/Math.PI*180,Fre=1/180*Math.PI,Wr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Lre(t,{precision:e=Wr.precision}={}){return t=function zre(t){return Math.round(t/Wr.EPSILON)*Wr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function od(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nU(t){return function jre(t,e){return sd(t,n=>n*Fre,e)}(t)}function Bre(t){return function Ure(t,e){return sd(t,n=>n*Nre,e)}(t)}function Er(t,e,n){return sd(t,i=>Math.max(e,Math.min(n,i)))}function Gw(t,e,n){return od(t)?t.map((i,r)=>Gw(i,e[r],n)):n*e+(1-n)*t}function Au(t,e,n){const i=Wr.EPSILON;n&&(Wr.EPSILON=n);try{if(t===e)return!0;if(od(t)&&od(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Au(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Wr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Wr.EPSILON=i}}function sd(t,e,n){if(od(t)){const i=t;n=n||function Hre(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class Ww extends(function Gre(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:od(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+Lre(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Au(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(n[r]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Wr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function fi(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function ty(t,e,n=""){if(Wr.debug&&!function Wre(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function ny(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class rU extends Ww{get x(){return this[0]}set x(e){this[0]=fi(e)}get y(){return this[1]}set y(e){this[1]=fi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return fi(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return fi(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ny(e>=0&&e<this.ELEMENTS,"index is out of range"),fi(this[e])}setComponent(e,n){return ny(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var ml=1e-6,Xs=typeof Float32Array<"u"?Float32Array:Array;function oU(){var t=new Xs(3);return Xs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function sU(t,e,n){var i=new Xs(3);return i[0]=t,i[1]=e,i[2]=n,i}function aU(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $w(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=r*c-o*a,t[1]=o*s-i*c,t[2]=i*a-r*s,t}function DI(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/(s=s||1),t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function cU(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function lU(t,e,n){var i=n[0],r=n[1],o=n[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,p=i*c-r*a,_=r*p-o*h,x=o*d-i*p,P=i*h-r*d,F=2*n[3];return h*=F,p*=F,x*=2,P*=2,t[0]=a+(d*=F)+(_*=2),t[1]=c+h+x,t[2]=l+p+P,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function dU(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o||1;return t[0]=(n[0]*i+n[4]*r+n[8]*o)/s,t[1]=(n[1]*i+n[5]*r+n[9]*o)/s,t[2]=(n[2]*i+n[6]*r+n[10]*o)/s,t}function uU(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*o,t[1]=n[1]*i+n[4]*r+n[7]*o,t[2]=n[2]*i+n[5]*r+n[8]*o,t[3]=e[3],t}oU();const RI=[0,0,0];let Yw;class nn extends rU{static get ZERO(){return Yw||(Yw=new nn(0,0,0),Object.freeze(Yw)),Yw}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&od(e)?this.copy(e):(Wr.debug&&(fi(e),fi(n),fi(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Wr.debug&&(fi(e.x),fi(e.y),fi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=fi(e)}angle(e){return function eoe(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&aU(t,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return $w(this,this,e),this.check()}rotateX({radians:e,origin:n=RI}){return function Jre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=RI}){return function Zre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=RI}){return function Qre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return DI(this,this,e),this.check()}transformAsVector(e){return dU(this,this,e),this.check()}transformByMatrix3(e){return cU(this,this,e),this.check()}transformByMatrix2(e){return function roe(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return lU(this,this,e),this.check()}}const hU=new nn;function Om(t,e,n,i){hU.set(t,e,n);const r=hU.len();return{distance:i/r,normal:new nn(-t/r,-e/r,-n/r)}}function loe(t){return t-Math.fround(t)}let ry;function OI(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,o=(r-i)/n;ry=ey.allocate(ry,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let c=0;c<n;c++){const l=t[s++];ry[a+c]=l,ry[a+c+n]=loe(l)}a+=2*n}return ry.subarray(0,o*n*2)}function doe(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}function Xw(t){return t.stride||t.size*t.bytesPerElement}function fU(t,e){e.offset&&bi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Xw(t),o=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}class hoe{constructor(e,n,i){ve(this,"gl",void 0),ve(this,"id",void 0),ve(this,"size",void 0),ve(this,"settings",void 0),ve(this,"value",void 0),ve(this,"doublePrecision",void 0),ve(this,"_buffer",void 0),ve(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,o=5130===r;let a,{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&n.isIndexed?e&&MI(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function kre(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new qi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Xw(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ey.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function uoe(t,e){const n=fU(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new II(this,o.high),i["".concat(e,"64Low")]=r?new II(this,o.low):new Float32Array(this.size),i}if(n){const i=fU(this.getAccessor(),n);return{[e]:new II(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,o=i*r;if(n&&o&&n.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=n[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof qi?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),n.constant&&this._areValuesEqual(o,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;n.externalBuffer=o,n.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=Xw(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;n.externalBuffer=null,n.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=Xw(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=OI(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?OI(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,o=ey.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&r&&s.subData({data:r instanceof Float64Array?OI(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&bi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let s=o;for(;--s>=0;)n[i+s]=r[s];return n}switch(o){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)n[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}function Ho(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const pU=[],mU=[];function Kw(t,e=0,n=1/0){let i=pU;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(mU.length=t.length,i=mU):i=pU,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function gU(t){return t&&t[Symbol.asyncIterator]}function kI(t,e=(()=>!0)){return Array.isArray(t)?_U(t,e,[]):e(t)?[t]:[]}function _U(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?_U(r,e,n):e(r)&&n.push(r)}return n}function poe({target:t,source:e,start:n=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=n;s<r;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}const moe=[],qw=[[0,1/0]];function PI(t){const{source:e,target:n,start:i=0,size:r,getData:o}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)n[i+l]=d[h]||0,l++}}const boe={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function bU(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...boe[n],...e,...t,type:n}}function yU(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function vU(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function xU(t){t.push(t.shift())}function NI(t,e){const{doublePrecision:n,settings:i,value:r,size:o}=t,s=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function wU({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,c=n.byteOffset,l=n.startIndices,d=r&&l,h=NI(n,e),p=n.isConstant;if(!d&&i>=h)return;const _=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){const X=o;o=(Q,ye)=>n.normalizeConstant(X(Q,ye))}const x=p?(X,Q)=>o(_,Q):(X,Q)=>o(_.subarray(X,X+a),Q),P=t.getData({length:i}),F=new Float32Array(h);(function _oe({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return PI({source:t,target:e,size:n,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*n,p=o[d]*n;PI({source:t.subarray(s,h),target:e,start:a,end:p,size:n,getData:c}),s=h,a=p}a<e.length&&PI({source:[],target:e,start:a,size:n,getData:c})})({source:P,target:F,sourceStartIndices:r,targetStartIndices:l,size:a,getData:x}),t.byteLength<F.byteLength+c&&t.reallocate(F.byteLength+c),t.subData({data:F,offset:c})}class FI extends hoe{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:qw}),ve(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return bU(Array.isArray(n)?e[n.find(o=>e[o])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function goe(t,e){if(t===qw||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let o=0;o<i;o++){const s=t[o];s[1]<e[0]?(n.push(s),r=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=qw}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=moe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==qw),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:n,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return Ho(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function foe(t,e){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,d=Math.floor((t.length-l)/c);return(h,{index:p,target:_})=>{if(!o){const X=p*c+l;for(let Q=0;Q<n;Q++)_[Q]=t[X+Q];return _}const x=o[p],P=o[p+1]||d;let F;if(s){F=new Array(P-x);for(let X=x;X<P;X++){const Q=X*c+l;_=new Array(n);for(let ye=0;ye<n;ye++)_[ye]=t[Q+ye];F[X-x]=_}}else if(c===n)F=t.subarray(x*n+l,P*n+l);else{F=new t.constructor((P-x)*n);let X=0;for(let Q=x;Q<P;Q++){const ye=Q*c+l;for(let Te=0;Te<n;Te++)F[X++]=t[ye+Te]}}return F}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:p,transform:_}=a,x=c.binaryAccessor||("function"==typeof p?p:o[p]);Ho("function"==typeof x,'accessor "'.concat(p,'" is not a function'));let P=e.getVertexOffset(i);const{iterable:F,objectInfo:X}=Kw(n,i,r);for(const Q of F){X.index++;let ye=x(Q,X);if(_&&(ye=_.call(this,ye)),h){const Te=(X.index<h.length-1?h[X.index+1]:s)-h[X.index];if(ye&&Array.isArray(ye[0])){let je=P;for(const Ze of ye)e._normalizeValue(Ze,l,je),je+=d}else ye&&ye.length>d?l.set(ye,P):(e._normalizeValue(ye,X.target,0),poe({target:l,source:X.target,start:P,count:Te}));P+=Te*d}else e._normalizeValue(ye,l,P),P+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function yoe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function oy(t){let n,e={};return i=>{for(const r in i)if(!yoe(i[r],e[r])){n=t(i),e=i;break}return n}}let LI={};function voe(t){LI=t}function ls(t,e,n,i){bi.level>0&&LI[t]&&LI[t].call(null,e,n,i)}function xa(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const EU="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",woe="#version 300 es\n".concat(EU);function AU(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,o]=n;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function SU(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?woe:e>300?"#version ".concat(e,"\n").concat(EU):"void main() {gl_FragColor = vec4(0);}";const o=function Soe(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return xa(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class CU extends rd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return hi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cs(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Im(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(n);return i<0?(this.unused[e]=r,dn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof qi?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Coe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof qi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Xt(hi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=n[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new CU(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];n[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Xt(i[o]instanceof qi)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new qi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function TU(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const sy="vs",Ioe={[sy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},Jw="__LUMA_INJECT_DECLARATIONS__",MU=/void\s+main\s*\([^)]*\)\s*\{\n?/,IU=/}\n?[^{}]*$/,jI=[];function DU(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===sy;for(const o in n){const s=n[o];s.sort((c,l)=>c.order-l.order),jI.length=s.length;for(let c=0,l=s.length;c<l;++c)jI[c]=s[c].injection;const a="".concat(jI.join("\n"),"\n");switch(o){case"vs:#decl":r&&(t=t.replace(Jw,a));break;case"vs:#main-start":r&&(t=t.replace(MU,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(IU,c=>a+c));break;case"fs:#decl":r||(t=t.replace(Jw,a));break;case"fs:#main-start":r||(t=t.replace(MU,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(IU,c=>a+c));break;default:t=t.replace(o,c=>c+a)}}return t=t.replace(Jw,""),i&&(t=t.replace(/\}\s*$/,o=>o+Ioe[e])),t}function UI(t){const e={};return xa(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}const Doe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Zw="transform_uSize_",RU="transform_position";const Boe={10241:9728,10240:9728,10242:33071,10243:33071};class Uoe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function koe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let o,s;n&&(({width:o,height:s}=i),r["".concat(Zw).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(Zw).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=Hw(n);if(!e)return i;const r=i.constructor,o=function Aoe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return xa(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof Ds)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new qi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new co(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(Boe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function wre(t,e){Xt(t instanceof Ds||t instanceof vre||t instanceof xre);const n=t.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=t;return new n(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function Ooe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,s=Object.keys(n).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),p=h.slice();if(h.forEach((_,x,P)=>{if(s>0){const F=function Loe(t,e){const n={},i=function Poe(t){return AU(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Noe(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(Zw).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(o),d=function Eoe(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return xa(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(_,n);if(F){const{updatedLine:X,inject:Q}=F;p[x]=X,d=UI([d,Q]),Object.assign(c,F.samplerTextureMap),s--}}i&&!a&&(a=function Foe(t,e){const n=AU(t,["varying","out"]);return n&&n.name===e?n.type:null}(_,i))}),i){Xt(r);const _="".concat(Zw).concat(i),x="uniform vec2 ".concat(_,";\n"),P="     vec2 ".concat(RU," = transform_getPos(").concat(_,");\n     gl_Position = vec4(").concat(RU,", 0, 1.);\n");d=UI([d,{"vs:#decl":x,"vs:#main-start":P}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=UI([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||SU({version:TU(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Doe].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const VI={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function zoe(t){let e=OU(t);return"object"===e?t?"type"in t?Object.assign({},t,VI[t.type]):"value"in t?(e=OU(t.value),Object.assign({type:e},t,VI[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},VI[e])}function OU(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class zI{constructor(e){let{name:n,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:p}=e;xa("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||p,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Woe(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),s&&(this.uniforms=function Voe(t){const e={};for(const n in t){const r=zoe(t[n]);e[n]=r}return e}(s))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:xa(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&xa(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=o.value}return n}}function $oe(t){return function kU(t){const e={},n={};return HI({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(PU(t))}function HI(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of e)o.dependencies&&HI({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function PU(t,e){return t.map(n=>(n instanceof zI||(xa("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),xa(n.name,"shader module has no name"),(n=new zI(n)).dependencies=PU(n.dependencies)),n))}const Xoe=7936,Koe=7937,qoe=7938,Joe=35724,GI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Kh={};function ese(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(GI).forEach(t=>{Kh[t]=t});const WI={};function NU(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=GI[e];if(xa(i,e),!function Yoe(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in WI)return WI[e];const o=n.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),WI[e]=c,c}function Qw(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function tse(t,e){const n=GI[e];xa(n,e);const i=function Zoe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return xa(!1===r||!0===r),r}(t,n))}function km(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const FU=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],rse=[...FU,[km("attribute"),"in $1"],[km("varying"),"out $1"]],ose=[...FU,[km("varying"),"in $1"]],LU=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],sse=[...LU,[km("in"),"attribute $1"],[km("out"),"varying $1"]],ase=[...LU,[km("in"),"varying $1"]],$I="gl_FragColor",YI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,cse=/void\s+main\s*\([^)]*\)\s*\{\n?/;function e1(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const hse="\n\n".concat(Jw,"\n\n"),BU={[sy]:"vertex",fs:"fragment"};function jU(t,e){let{id:n,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;xa("string"==typeof i,"shader source must be a string");const p=r===sy,_=i.split("\n");let x=100,P="",F=i;0===_[0].indexOf("#version ")?(x=300,P=_[0],F=_.slice(1).join("\n")):P="#version ".concat(x);const X={};o.forEach(at=>{Object.assign(X,at.getDefines())}),Object.assign(X,s);let Q=d?"".concat(P,"\n").concat(function _se(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(BU[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function gse(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(BU[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function nse(t){switch(function Qoe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Xoe),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Koe);return{gpuVendor:ese(n,i),vendor:n,renderer:i,version:t.getParameter(qoe),shadingLanguageVersion:t.getParameter(Joe)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function ise(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Qw(t,Kh.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Qw(t,Kh.GLSL_DERIVATIVES)&&NU(t,Kh.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),Qw(t,Kh.GLSL_FRAG_DATA)&&NU(t,Kh.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),Qw(t,Kh.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function bse(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(X),"\n").concat(p?"":"precision highp float;\n\n","\n"):"".concat(P,"\n");const ye=function vse(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,o]=n.split(":"),s=n.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),Te={},je={},Ze={};for(const at in c){const mt="string"==typeof c[at]?{injection:c[at],order:0}:c[at],pt=at.match(/^(v|f)s:(#)?([\w-]+)$/);pt?pt[2]?"decl"===pt[3]?je[at]=[mt]:Ze[at]=[mt]:Te[at]=[mt]:Ze[at]=[mt]}for(const at of o){h&&at.checkDeprecations(F,h),Q+=at.getModuleSource(r,x);const pt=at.injections[r];for(const gt in pt){const yt=gt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ft="decl"===yt[2]?je:Ze;ft[gt]=ft[gt]||[],ft[gt].push(pt[gt])}else Te[gt]=Te[gt]||[],Te[gt].push(pt[gt])}}return Q+=hse,Q=DU(Q,r,je),Q+=function yse(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)n+="  ".concat(s.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(ye[r],Te),Q+=F,Q=DU(Q,r,Ze),Q=function lse(t,e,n){switch(e){case 300:return n?e1(t,rse):function dse(t){const e=(t=e1(t,ose)).match(YI);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat($I,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(cse,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat($I,"\\b"),"g"),n)}return t}(t);case 100:return n?e1(t,sse):function use(t){const e=(t=e1(t,ase)).match(YI);if(e){const n=e[1];t=t.replace(YI,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),$I)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(Q,l?100:x,p),Q}function mse(t){return function(n){const i={};for(const r of t){const o=r.getUniforms(n,i);Object.assign(i,o)}return i}}const xse={5126:mr.bind(null,"uniform1fv",wa,1,ds),35664:mr.bind(null,"uniform2fv",wa,2,ds),35665:mr.bind(null,"uniform3fv",wa,3,ds),35666:mr.bind(null,"uniform4fv",wa,4,ds),5124:mr.bind(null,"uniform1iv",Su,1,ds),35667:mr.bind(null,"uniform2iv",Su,2,ds),35668:mr.bind(null,"uniform3iv",Su,3,ds),35669:mr.bind(null,"uniform4iv",Su,4,ds),35670:mr.bind(null,"uniform1iv",Su,1,ds),35671:mr.bind(null,"uniform2iv",Su,2,ds),35672:mr.bind(null,"uniform3iv",Su,3,ds),35673:mr.bind(null,"uniform4iv",Su,4,ds),35674:mr.bind(null,"uniformMatrix2fv",wa,4,ad),35675:mr.bind(null,"uniformMatrix3fv",wa,9,ad),35676:mr.bind(null,"uniformMatrix4fv",wa,16,ad),35678:Go,35680:Go,5125:mr.bind(null,"uniform1uiv",t1,1,ds),36294:mr.bind(null,"uniform2uiv",t1,2,ds),36295:mr.bind(null,"uniform3uiv",t1,3,ds),36296:mr.bind(null,"uniform4uiv",t1,4,ds),35685:mr.bind(null,"uniformMatrix2x3fv",wa,6,ad),35686:mr.bind(null,"uniformMatrix2x4fv",wa,8,ad),35687:mr.bind(null,"uniformMatrix3x2fv",wa,6,ad),35688:mr.bind(null,"uniformMatrix3x4fv",wa,12,ad),35689:mr.bind(null,"uniformMatrix4x2fv",wa,8,ad),35690:mr.bind(null,"uniformMatrix4x3fv",wa,12,ad),35678:Go,35680:Go,35679:Go,35682:Go,36289:Go,36292:Go,36293:Go,36298:Go,36299:Go,36300:Go,36303:Go,36306:Go,36307:Go,36308:Go,36311:Go},wse={},Ese={},Ase={},UU=[0];function XI(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(UU[0]=t,t=UU);const r=t.length;if(r%e&&dn.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=i[r];o||(o=new n(r),i[r]=o);for(let s=0;s<r;s++)o[s]=t[s];return o}function wa(t,e){return XI(t,e,Float32Array,wse)}function Su(t,e){return XI(t,e,Int32Array,Ese)}function t1(t,e){return XI(t,e,Uint32Array,Ase)}function VU(t,e,n){const i=xse[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function Sse(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Tse(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function Ise(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof Yh||t instanceof Rm)||t instanceof co&&!!t.texture}function Mse(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,o=n.length;r<o;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Go(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function mr(t,e,n,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Xt(o===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(l[p]!==r[p]){h=!0;break}}return h&&(i(s,t,a,l),r.set(l)),h}}function ds(t,e,n,i){t[e](n,i)}function ad(t,e,n,i){t[e](n,!1,i)}function n1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function HU(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const o=t[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=GU("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function GU(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class ay extends rd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Xt(!1),"unknown"}}constructor(e,n){zw(e),Xt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:n1(n.source,null)||n.id||$s("unnamed ".concat(ay.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=n1(n,null);i&&(this.id=$s(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(ay.getTypeName(this.shaderType),":").concat(this.id)}getName(){return n1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function zU(t,e,n,i){const r=t.split(/\r?\n/),o={},s={},a=i||n1(e)||"(unnamed)",c="".concat(function Ose(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const p=h.split(":"),_=p[0],x=parseInt(p[2],10);if(isNaN(x))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==_?o[x]=h:s[x]=h}const l=function kse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return GU(a,r-a.length)+n+o})}(e);return{shaderName:c,errors:HU(o,l),warnings:HU(s,l)}}(i,this.source,this.shaderType,this.id);throw dn.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),dn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class KI extends ay{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class qI extends ay{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Nse=5120,Fse=5121,Lse=5122,Bse=5123,lo=5126,cy=5124,ly=5125,JI={[lo]:[lo,1,"float"],35664:[lo,2,"vec2"],35665:[lo,3,"vec3"],35666:[lo,4,"vec4"],[cy]:[cy,1,"int"],35667:[cy,2,"ivec2"],35668:[cy,3,"ivec3"],35669:[cy,4,"ivec4"],[ly]:[ly,1,"uint"],36294:[ly,2,"uvec2"],36295:[ly,3,"uvec3"],36296:[ly,4,"uvec4"],35670:[lo,1,"bool"],35671:[lo,2,"bvec2"],35672:[lo,3,"bvec3"],35673:[lo,4,"bvec4"],35674:[lo,8,"mat2"],35685:[lo,8,"mat2x3"],35686:[lo,8,"mat2x4"],35675:[lo,12,"mat3"],35687:[lo,12,"mat3x2"],35688:[lo,12,"mat3x4"],35676:[lo,16,"mat4"],35689:[lo,16,"mat4x2"],35690:[lo,16,"mat4x3"]};function qU(t){const e=JI[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function JU(t,e){switch(t){case Nse:case Fse:case Lse:case Bse:t=lo}for(const n in JI){const[i,r,o]=JI[n];if(i===t&&r===e)return{glType:n,name:o}}return null}class cae{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!hi(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,n,i,r){const{type:o,components:s}=qU(i),a={type:o,size:r*s};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new Ys(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:o,components:s}=qU(i),c={location:e,name:n,accessor:new Ys({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const lae=35981,dae=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class QU extends rd{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",dae),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:o,bufferMode:s=lae}=e;return this.hash=n||"",this.vs="string"==typeof i?new KI(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new qI(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Xt(this.vs instanceof KI),Xt(this.fs instanceof qI),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(cs(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new cae(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:p=null,transformFeedback:_,framebuffer:x,parameters:P={},uniforms:F,samplers:X}=e;if((F||X)&&(dn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(F||{})),dn.priority>=n){const Q=x?x.id:"default",ye="mode=".concat(Eu(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(Eu(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(Q);dn.log(n,ye)()}return Xt(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(p.bindForDraw(r,d,()=>{if(void 0!==x&&(P=Object.assign({},P,{framebuffer:x})),_){const Q=function KU(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Xt(!1),0}}(i);_.begin(Q)}this._bindTextures(),Mc(this.gl,P,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&hi(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),_&&_.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dn.priority>=2&&function Cse(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!Tse(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let o=i,s=!1;if(o instanceof co&&(o=o.texture),o instanceof Yh)if(s=this.uniforms[n]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[n]=a}else o=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(o)||s)&&Mse(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new KI({handle:r});break;case 35632:i.fs=new qI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=$s(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),dn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),dn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||dn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=Sse(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=VU(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=VU(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class dy{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new dy(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),p=l.map(ye=>this._getHash(ye.name)).sort(),_=s.map(ye=>this._getHash(ye)),x=Object.keys(r).sort(),P=Object.keys(o).sort(),F=[],X=[];for(const ye of x)F.push(this._getHash(ye)),F.push(this._getHash(r[ye]));for(const ye of P)X.push(this._getHash(ye)),X.push(this._getHash(o[ye]));const Q="".concat(d,"/").concat(h,"D").concat(F.join("/"),"M").concat(p.join("/"),"I").concat(X.join("/"),"V").concat(_.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[Q]){const ye=function pse(t,e){const{vs:n,fs:i}=e,r=$oe(e.modules||[]);return{gl:t,vs:jU(t,Object.assign({},e,{source:n,type:sy,modules:r})),fs:jU(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:mse(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[Q]=new QU(this.gl,{hash:Q,vs:ye.vs,fs:ye.fs,varyings:s,bufferMode:a}),this._getUniforms[Q]=ye.getUniforms||(Te=>{}),this._useCounts[Q]=0}return this._useCounts[Q]++,this._programCache[Q]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;n[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let o1=null;const s1=globalThis;function e8(t){if(!t&&!hl())return"Node";if(f4(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":s1.chrome?"Chrome":s1.safari?"Safari":s1.mozInnerScreenX?"Firefox":"Unknown"}class Ea extends rd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||hi(e)||"Chrome"===e8()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ea(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ea.MAX_ATTRIBUTES=Ea.MAX_ATTRIBUTES||e.getParameter(34921),Ea.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ea._setConstantFloatArray(e,n,i);break;case Int32Array:Ea._setConstantIntArray(e,n,i);break;case Uint32Array:Ea._setConstantUintArray(e,n,i);break;default:Xt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ea.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Xt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Xt(hi(h)),p.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Ea.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new qi(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function hae(t,e){const n=function uae(t){return(!o1||o1.byteLength<t)&&(o1=new ArrayBuffer(t)),o1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,o);(function fae(t){let{target:e,source:n,start:i=0,count:r=1}=t;const o=n.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Xt(!1)}}static _setConstantIntArray(e,n,i){switch(Xt(hi(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Xt(!1)}}static _setConstantUintArray(e,n,i){switch(Xt(hi(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Xt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Xt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const gae=/^(.+)__LOCATION_([0-9]+)$/,_ae=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class bae{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ea(e),U4(this,"VertexArray","v6.0",_ae),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,o)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new qi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof qi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof qi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,dn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=Ys.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:p}=d;return Xt(Number.isFinite(h)&&Number.isFinite(p)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=gae.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof qi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof qi)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof qi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,n){if(Ea.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ea.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof qi){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function uy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function yae(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=uy(t[s],e);const o=t.length>n?"...":"]";return"".concat(r).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function t8(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof qi){const p=e,{data:_,changed:x}=p.getDebugData();let P;return d=x?"*":"",h=_,c=p.byteLength,a=c/_.BYTES_PER_ELEMENT/s,n?P="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(Eu(r,o),")"):(l=!0,P="".concat(c," bytes")),{[i]:"".concat(d).concat(uy(h,{size:s,isInteger:l})),"Format ":P}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(uy(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function xae(t,e){const{type:n,size:i}=e,r=JU(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function n8(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Xt(n);const s=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const _ of l)!_.match(".*_.*")&&!_.match(s)&&ZI({table:c,header:e,uniforms:i,uniformName:_,undefinedOnly:r})&&d++;for(const _ of l)_.match(s)&&ZI({table:c,header:e,uniforms:i,uniformName:_,undefinedOnly:r})&&d++;for(const _ of l)c[_]||ZI({table:c,header:e,uniforms:i,uniformName:_,undefinedOnly:r})&&d++;let h=0;const p={};if(!r)for(const _ in i){const x=i[_];c[_]||(h++,p[_]={Type:"NOT USED: ".concat(x),[e]:uy(x)})}return{table:c,count:d,unusedTable:p,unusedCount:h}}function ZI(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:o}=t;const s=i[r],a=function wae(t){return null!=t}(s);return!(o&&a||(e[r]={[n]:a?uy(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function i8(t){const{type:e,size:n}=t.accessor,i=JU(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const Aae={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Cae(t,e){const{attributeMap:n=Aae}=e||{};return n&&n[t]||t}function Tae(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Xt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const r8=()=>{},Dae={};class Lm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=$s("model")}=n;Xt(Vw(e)),this.id=i,this.gl=e,this.id=n.id||$s("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||dy.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Xt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Xt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Xt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function Sae(t,e,n){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=Cae(o,n);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new qi(t,c),l],Tae(o,l)}}if(r){const o=r.value||r;Xt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new qi(t,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Im(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return SI(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(r),dn.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:p=d.indexType,indexOffset:_=d.indexOffset,vertexArrayInstanced:x=d.isInstanced}=this.props;x&&!this.isInstanced&&dn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:P,instanceCount:F}=this,{onBeforeRender:X=r8,onAfterRender:Q=r8}=this.props;X(),this.program.setUniforms(this.uniforms);const ye=this.program.draw(Object.assign(Dae,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:p,isInstanced:P,instanceCount:F,offset:h?_:0}));return Q(),dn.priority>=2&&this._logDrawCallEnd(l,c,i),ye}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,{35977:n})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Xt(n instanceof QU,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new bae(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof qi&&n.delete()}}_setAnimationProps(e){this.animated&&Xt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Im(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new CU(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),dn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:dn.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const o=function vae(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=t8(e,e.elements,null,n));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(xae(s.name,c))),i[a]=t8(e,r[o],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=n8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=n8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&dn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&dn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Eae(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=i8(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=i8(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);dn.table(e,o)(),dn.table(e,s)(),dn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),dn.groupEnd(2)()}}class QI{static isSupported(e){return hi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Xt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Lm(n,Object.assign({},e,{fs:e.fs||SU({version:TU(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function Rae(t){return!(Im(t.feedbackBuffers)&&Im(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new Coe(e,n)),function Oae(t){return!(Im(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new Uoe(e,n)),Xt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}class hy{constructor(e){ve(this,"_inProgress",void 0),ve(this,"_handle",void 0),ve(this,"_timeline",void 0),ve(this,"time",void 0),ve(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Uae={interpolation:class kae{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","interpolation"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.transition=new hy(i),this.attribute=n,this.attributeInTransition=new FI(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function Nae(t,e){const n=vU(e.size);return new QI(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new qi(e,r),new qi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;xU(r);const s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)wU({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=NI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:yU(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let o=r/n;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class Fae{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","spring"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"texture",void 0),ve(this,"framebuffer",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new hy(i),this.attribute=n,this.attributeInTransition=new FI(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function Bae(t){return new Ds(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function jae(t,e){return new co(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function Lae(t,e,n){const i=vU(e.size);return new QI(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new qi(e,r),new qi(e,r),new qi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)wU({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=NI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:yU(0,o)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),xU(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Hw(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Vae{constructor(e,{id:n,timeline:i}){ve(this,"id",void 0),ve(this,"isSupported",void 0),ve(this,"gl",void 0),ve(this,"timeline",void 0),ve(this,"transitions",void 0),ve(this,"needsRedraw",void 0),ve(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=QI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(n);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void bi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=Uae[i.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(bi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const o8="attributeManager.invalidate";class Yae{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"attributes",void 0),ve(this,"updateTriggers",void 0),ve(this,"needsRedraw",void 0),ve(this,"userData",void 0),ve(this,"stats",void 0),ve(this,"attributeTransitionManager",void 0),ve(this,"mergeBoundsMemoized",oy(doe)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new Vae(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);ls(o8,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);ls(o8,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;ls("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=n,o[l]&&bi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&ls("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(i=>{var r;return null===(r=this.attributes[i])||void 0===r?void 0:r.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in n){const s=n[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new FI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:i}=e;ls("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&ls("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,ls("attribute.updateEnd",n,i)))}}function a8(t,e,n,i,r){const o=e-t;return(n-e)*r+-o*i+o+e}function c8(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const Jae={interpolation:class Xae extends hy{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=Gw(n,i,s)}},spring:class qae extends hy{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function Kae(t,e,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=a8(t[s],e[s],n[s],i,r);return o}return a8(t,e,n,i,r)}(o,s,n,i,r);const c=c8(a,n),l=c8(a,s);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=s,this._currValue=a}}};class Zae{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=bU(r)))return;const s=Jae[r.type];if(!s)return void bi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:n,toValue:i}),o.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const a1=Symbol.for("component"),Cu=Symbol.for("propTypes"),eD=Symbol.for("deprecatedProps"),jm=Symbol.for("asyncPropDefaults"),qh=Symbol.for("asyncPropOriginal"),Tu=Symbol.for("asyncPropResolved");function tce(t,e){if(!t.transitions)return!1;const n={},i=t[Cu];let r=!1;for(const o in t.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&tD(t[o],e[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function l8({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=tD(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const s=tD(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function tD(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function rce(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function d8(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},l8({oldProps:r,newProps:i,triggerName:n})}function dce(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function nD(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],p=e[10],_=e[11],x=e[12],P=e[13],F=e[14],X=e[15],Q=n*a-i*s,ye=n*c-r*s,Te=n*l-o*s,je=i*c-r*a,Ze=i*l-o*a,at=r*l-o*c,mt=d*P-h*x,pt=d*F-p*x,gt=d*X-_*x,yt=h*F-p*P,It=h*X-_*P,ft=p*X-_*F,vt=Q*ft-ye*It+Te*yt+je*gt-Ze*pt+at*mt;return vt?(t[0]=(a*ft-c*It+l*yt)*(vt=1/vt),t[1]=(r*It-i*ft-o*yt)*vt,t[2]=(P*at-F*Ze+X*je)*vt,t[3]=(p*Ze-h*at-_*je)*vt,t[4]=(c*gt-s*ft-l*pt)*vt,t[5]=(n*ft-r*gt+o*pt)*vt,t[6]=(F*Te-x*at-X*ye)*vt,t[7]=(d*at-p*Te+_*ye)*vt,t[8]=(s*It-a*gt+l*mt)*vt,t[9]=(i*gt-n*It-o*mt)*vt,t[10]=(x*Ze-P*Te+X*Q)*vt,t[11]=(h*Te-d*Ze-_*Q)*vt,t[12]=(a*pt-s*yt-c*mt)*vt,t[13]=(n*yt-i*pt+r*mt)*vt,t[14]=(P*ye-x*je-F*Q)*vt,t[15]=(d*je-h*ye+p*Q)*vt,t):null}function Jh(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=e[9],_=e[10],x=e[11],P=e[12],F=e[13],X=e[14],Q=e[15],ye=n[0],Te=n[1],je=n[2],Ze=n[3];return t[0]=ye*i+Te*a+je*h+Ze*P,t[1]=ye*r+Te*c+je*p+Ze*F,t[2]=ye*o+Te*l+je*_+Ze*X,t[3]=ye*s+Te*d+je*x+Ze*Q,t[4]=(ye=n[4])*i+(Te=n[5])*a+(je=n[6])*h+(Ze=n[7])*P,t[5]=ye*r+Te*c+je*p+Ze*F,t[6]=ye*o+Te*l+je*_+Ze*X,t[7]=ye*s+Te*d+je*x+Ze*Q,t[8]=(ye=n[8])*i+(Te=n[9])*a+(je=n[10])*h+(Ze=n[11])*P,t[9]=ye*r+Te*c+je*p+Ze*F,t[10]=ye*o+Te*l+je*_+Ze*X,t[11]=ye*s+Te*d+je*x+Ze*Q,t[12]=(ye=n[12])*i+(Te=n[13])*a+(je=n[14])*h+(Ze=n[15])*P,t[13]=ye*r+Te*c+je*p+Ze*F,t[14]=ye*o+Te*l+je*_+Ze*X,t[15]=ye*s+Te*d+je*x+Ze*Q,t}function c1(t,e,n){var s,a,c,l,d,h,p,_,x,P,F,X,i=n[0],r=n[1],o=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],p=e[6],_=e[7],x=e[8],P=e[9],F=e[10],X=e[11],t[0]=s=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=d,t[5]=h,t[6]=p,t[7]=_,t[8]=x,t[9]=P,t[10]=F,t[11]=X,t[12]=s*i+d*r+x*o+e[12],t[13]=a*i+h*r+P*o+e[13],t[14]=c*i+p*r+F*o+e[14],t[15]=l*i+_*r+X*o+e[15]),t}function iD(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u8(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+d*i,t[6]=a*r+h*i,t[7]=c*r+p*i,t[8]=l*r-o*i,t[9]=d*r-s*i,t[10]=h*r-a*i,t[11]=p*r-c*i,t}function h8(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+d*i,t[2]=a*r+h*i,t[3]=c*r+p*i,t[4]=l*r-o*i,t[5]=d*r-s*i,t[6]=h*r-a*i,t[7]=p*r-c*i,t}function p8(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function fy(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}!function Ace(){var t=new Xs(4);Xs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const m8=[0,0,0,0],Bce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],g8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],jce=[0,0,0],_8=[0,0,0],Uce=oy(function Hce({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Vce(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=m8,c=m8,l=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:p}=b8(t,e,n);return p&&(c=t.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=fy([],c,s),o=i||o,s=Jh([],r,o),s=Jh([],s,Bce)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(t,n,i),d=t.getDistanceScales(),h=[t.width*e,t.height*e],p=fy([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,_={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:jce,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:g8,project_uCameraPosition:a};if(l){const x=t.getDistanceScales(l);switch(n){case Ci.METER_OFFSETS:_.project_uCommonUnitsPerWorldUnit=x.unitsPerMeter,_.project_uCommonUnitsPerWorldUnit2=x.unitsPerMeter2;break;case Ci.LNGLAT:case Ci.LNGLAT_OFFSETS:t._pseudoMeters||(_.project_uCommonUnitsPerMeter=x.unitsPerMeter),_.project_uCommonUnitsPerWorldUnit=x.unitsPerDegree,_.project_uCommonUnitsPerWorldUnit2=x.unitsPerDegree2;break;case Ci.CARTESIAN:_.project_uCommonUnitsPerWorldUnit=[1,1,x.unitsPerMeter[2]],_.project_uCommonUnitsPerWorldUnit2=[0,0,x.unitsPerMeter2[2]]}}return _});function b8(t,e,n=_8){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===Ci.LNGLAT_OFFSETS||e===Ci.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case fl.WEB_MERCATOR:(e===Ci.LNGLAT||e===Ci.CARTESIAN)&&(r=[0,0,0],o=!1);break;case fl.WEB_MERCATOR_AUTO_OFFSET:e===Ci.LNGLAT?i=r:e===Ci.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case fl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case fl.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class y8 extends Ww{toString(){let e="[";if(Wr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=fi(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function l1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function v8(t,e){return t[0]=-e[0],t[1]=-e[1],t}function x8(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}!function Gce(){var t=new Xs(2);Xs!=Float32Array&&(t[0]=0,t[1]=0)}();var w8=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(w8||{});const Yce=45*Math.PI/180,Xce=1,rD=.1,oD=500,Kce=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Hn extends y8{static get IDENTITY(){return function Jce(){return u1||(u1=new Hn,Object.freeze(u1)),u1}()}static get ZERO(){return function qce(){return d1||(d1=new Hn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(d1)),d1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return w8}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,o,s,a,c,l,d,h,p,_,x,P,F){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=p,this[12]=_,this[13]=x,this[14]=P,this[15]=F,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l,d,h,p,_,x,P,F){return this[0]=e,this[1]=o,this[2]=l,this[3]=_,this[4]=n,this[5]=s,this[6]=d,this[7]=x,this[8]=i,this[9]=a,this[10]=h,this[11]=P,this[12]=r,this[13]=c,this[14]=p,this[15]=F,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Kce)}fromObject(e){return this.check()}fromQuaternion(e){return function _ce(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,_=r*a,x=r*c,P=o*s,F=o*a,X=o*c;t[0]=1-h-x,t[1]=d+X,t[2]=p-F,t[3]=0,t[4]=d-X,t[5]=1-l-x,t[6]=_+P,t[7]=0,t[8]=p+F,t[9]=_-P,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:o,near:s=rD,far:a=oD}=e;return a===1/0?function Zce(t,e,n,i,r,o){const a=2*o/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),p=-2*o;t[0]=2*o/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this,n,i,r,o,s):function bce(t,e,n,i,r,o,s){var a=1/(n-e),c=1/(r-i),l=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0}(this,n,i,r,o,s,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function Ece(t,e,n,i){var r,o,s,a,c,l,d,h,p,_,x=e[0],P=e[1],F=e[2],X=i[0],Q=i[1],ye=i[2],Te=n[0],je=n[1],Ze=n[2];Math.abs(x-Te)<ml&&Math.abs(P-je)<ml&&Math.abs(F-Ze)<ml?function uce(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(d=x-Te,h=P-je,p=F-Ze,r=Q*(p*=_=1/Math.hypot(d,h,p))-ye*(h*=_),o=ye*(d*=_)-X*p,s=X*h-Q*d,(_=Math.hypot(r,o,s))?(r*=_=1/_,o*=_,s*=_):(r=0,o=0,s=0),a=h*s-p*o,c=p*r-d*s,l=d*o-h*r,(_=Math.hypot(a,c,l))?(a*=_=1/_,c*=_,l*=_):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(r*x+o*P+s*F),t[13]=-(a*x+c*P+l*F),t[14]=-(d*x+h*P+p*F),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:o,near:s=rD,far:a=oD}=e;return function xce(t,e,n,i,r,o,s){var a=1/(e-n),c=1/(i-r),l=1/(o-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(s+o)*l,t[15]=1}(this,n,i,r,o,s,a),this.check()}orthographic(e){const{fovy:n=Yce,aspect:i=Xce,focalDistance:r=1,near:o=rD,far:s=oD}=e;E8(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return E8(n),function yce(t,e,n,i,r){var s,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,o),this.check()}determinant(){return function fce(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],d=t[9],h=t[10],p=t[11],_=t[12],x=t[13],P=t[14],F=t[15];return(e*s-n*o)*(h*F-p*P)-(e*a-i*o)*(d*F-p*x)+(e*c-r*o)*(d*P-h*x)+(n*a-i*s)*(l*F-p*_)-(n*c-r*s)*(l*P-h*_)+(i*c-r*a)*(l*x-d*_)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function hce(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return nD(this,this),this.check()}multiplyLeft(e){return Jh(this,e,this),this.check()}multiplyRight(e){return Jh(this,this,e),this.check()}rotateX(e){return u8(this,this,e),this.check()}rotateY(e){return function mce(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=s*r-d*i,t[2]=a*r-h*i,t[3]=c*r-p*i,t[8]=o*i+l*r,t[9]=s*i+d*r,t[10]=a*i+h*r,t[11]=c*i+p*r}(this,this,e),this.check()}rotateZ(e){return h8(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function pce(t,e,n,i){var c,l,d,h,p,_,x,P,F,X,Q,ye,Te,je,Ze,at,mt,pt,gt,yt,It,ft,vt,kt,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<ml||(r*=a=1/a,o*=a,s*=a,c=Math.sin(n),l=Math.cos(n),p=e[1],_=e[2],x=e[3],F=e[5],X=e[6],Q=e[7],Te=e[9],je=e[10],Ze=e[11],gt=r*o*(d=1-l)-s*c,yt=o*o*d+l,It=s*o*d+r*c,ft=r*s*d+o*c,vt=o*s*d-r*c,kt=s*s*d+l,t[0]=(h=e[0])*(at=r*r*d+l)+(P=e[4])*(mt=o*r*d+s*c)+(ye=e[8])*(pt=s*r*d-o*c),t[1]=p*at+F*mt+Te*pt,t[2]=_*at+X*mt+je*pt,t[3]=x*at+Q*mt+Ze*pt,t[4]=h*gt+P*yt+ye*It,t[5]=p*gt+F*yt+Te*It,t[6]=_*gt+X*yt+je*It,t[7]=x*gt+Q*yt+Ze*It,t[8]=h*ft+P*vt+ye*kt,t[9]=p*ft+F*vt+Te*kt,t[10]=_*ft+X*vt+je*kt,t[11]=x*ft+Q*vt+Ze*kt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return iD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return c1(this,this,e),this.check()}transform(e,n){return 4===e.length?(ty(n=fy(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function $ce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=DI(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return ty(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function ioe(t,e,n){const i=e[0],r=e[1],o=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/o,t[1]=(n[1]*i+n[5]*r)/o,t}(n||[-0,-0],e,this);break;case 3:i=dU(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return ty(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let d1,u1;function E8(t){if(t>2*Math.PI)throw Error("expected radians")}function Um(t,e){const n=fy([],e,t);return p8(n,n,1/n[3]),n}function A8(t,e){const n=t%e;return n<0?e+n:n}function sD(t,e,n){return t<e?e:t>n?n:t}const aD=Math.log2||function ele(t){return Math.log(t)*Math.LOG2E};function cd(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Ic=Math.PI,S8=Ic/4,Ja=Ic/180,cD=180/Ic,Vm=512,h1=4003e4,f1=85.051129,tle=1.5;function p1(t){const[e,n]=t;return cd(Number.isFinite(e)),cd(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[Vm*(e*Ja+Ic)/(2*Ic),Vm*(Ic+Math.log(Math.tan(S8+n*Ja*.5)))/(2*Ic)]}function zm(t){const[e,n]=t,i=e/Vm*(2*Ic)-Ic,r=2*(Math.atan(Math.exp(n/Vm*(2*Ic)-Ic))-S8);return[i*cD,r*cD]}function lD(t){const e=Math.cos(t*Ja);return Vm/h1/e}function dD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;cd(Number.isFinite(e)&&Number.isFinite(n));const r=Vm,o=Math.cos(e*Ja),s=r/360,a=s/o,c=r/h1/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=Ja*Math.tan(e*Ja)/o,p=r/h1*d,_=p/a*c;l.unitsPerDegree2=[0,s*d/2,p],l.unitsPerMeter2=[_,0,_]}return l}function C8(t,e){const[n,i,r]=t,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=dD({longitude:n,latitude:i,highPrecision:!0}),d=p1(t);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=zm(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function m1(t){return 2*Math.atan(.5/t)*cD}function uD(t){return.5/Math.tan(.5*t*Ja)}function M8(t,e){const[n,i,r=0]=t;return cd(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Um(e,[n,i,r,1])}function py(t,e,n=0){const[i,r,o]=t;if(cd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return Um(e,[i,r,o,1]);const s=Um(e,[i,r,0,1]),a=Um(e,[i,r,1,1]),c=s[2],l=a[2];return x8([],s,a,c===l?0:((n||0)-c)/(l-c))}const I8=Math.PI/180;function D8(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Um(i,[e,0,1,1]),o=Um(i,[e,t.height,1,1]),l=zm(x8([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(n),l}const dle=Math.PI/180,ule=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],N8=[0,0,0],hle={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Mu{constructor(e={}){ve(this,"id",void 0),ve(this,"x",void 0),ve(this,"y",void 0),ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"padding",void 0),ve(this,"isGeospatial",void 0),ve(this,"zoom",void 0),ve(this,"focalDistance",void 0),ve(this,"position",void 0),ve(this,"modelMatrix",void 0),ve(this,"distanceScales",void 0),ve(this,"scale",void 0),ve(this,"center",void 0),ve(this,"cameraPosition",void 0),ve(this,"projectionMatrix",void 0),ve(this,"viewMatrix",void 0),ve(this,"viewMatrixUncentered",void 0),ve(this,"viewMatrixInverse",void 0),ve(this,"viewProjectionMatrix",void 0),ve(this,"pixelProjectionMatrix",void 0),ve(this,"pixelUnprojectionMatrix",void 0),ve(this,"resolution",void 0),ve(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||hle,this.focalDistance=e.focalDistance||1,this.position=e.position||N8,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?fl.WEB_MERCATOR:fl.WEB_MERCATOR_AUTO_OFFSET:fl.IDENTITY}equals(e){return e instanceof Mu&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Au(e.projectionMatrix,this.projectionMatrix)&&Au(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=M8(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=n?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,o,s]=e,l=py([r,n?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,p]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,p]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=p1(e);return n[1]=Er(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?zm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?dD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function coe(t){return{left:Om(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Om(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Om(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Om(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Om(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Om(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function ile(t){const{latitude:e}=t;cd(Number.isFinite(e));const n=Math.cos(e*Ja);return function nle(t){return aD(t)}(h1*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||dD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=N8;if(o&&(a=s?new Hn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new nn(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=ule,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new Hn).multiplyRight(n).translate(new nn(this.center).negate()),this.projectionMatrix=i||function fle({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=t/e,l=n?(new Hn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new Hn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:p=0,bottom:_=0}=o,x=Er((d+t-h)/2,0,t)-t/2,P=Er((p+e-_)/2,0,e)-e/2;l[8]-=2*x/t,l[9]+=2*P/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*dle,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Jh(h,h,this.projectionMatrix),Jh(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=nD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function aoe(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];iD(p,p,[this.width/2,-this.height/2,1]),c1(p,p,[1,-1,0]),Jh(_,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=_,this.pixelUnprojectionMatrix=nD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||bi.warn("Pixel project matrix not invertible")()}}ve(Mu,"displayName","Viewport");class Hm extends Mu{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,position:_,padding:x,legacyMeterSizes:P=!1}=e;let{width:F,height:X,altitude:Q=1.5}=e;const ye=Math.pow(2,r);F=F||1,X=X||1;let Te,je=null;if(d)Q=d[5]/2,Te=m1(Q);else{let at;if(e.fovy?(Te=e.fovy,Q=uD(Te)):Te=m1(Q),x){const{top:mt=0,bottom:pt=0}=x;at=[0,Er((mt+X-pt)/2,0,X)-X/2]}je=function T8(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:d=m1(tle)}=t;void 0!==i&&(d=m1(i));const h=d*Ja,p=r*Ja,_=uD(d);let x=_;s&&(x+=s[2]*a/Math.cos(p)/n);const P=h*(.5+(o?o[1]:0)/n),F=Math.sin(P)*x/Math.sin(sD(Math.PI/2-p-P,.01,Math.PI-.01)),X=Math.sin(p)*F+x;return{fov:h,aspect:e/n,focalDistance:_,near:c,far:Math.min(X*l,10*x)}}({width:F,height:X,scale:ye,center:_&&[0,0,_[2]*lD(n)],offset:at,pitch:o,fovy:Te,nearZMultiplier:a,farZMultiplier:c})}let Ze=function rle(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];c1(a,a,[0,0,-r]),u8(a,a,-n*Ja),h8(a,a,i*Ja);const c=o/e;return iD(a,a,[c,c,c]),s&&c1(a,a,function Kre(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:X,pitch:o,bearing:s,scale:ye,altitude:Q});p&&(Ze=(new Hn).translate([512*p,0,0]).multiplyLeft(Ze)),super({...e,width:F,height:X,viewMatrix:Ze,longitude:i,latitude:n,zoom:r,...je,fovy:Te,focalDistance:Q}),ve(this,"longitude",void 0),ve(this,"latitude",void 0),ve(this,"pitch",void 0),ve(this,"bearing",void 0),ve(this,"altitude",void 0),ve(this,"fovy",void 0),ve(this,"orthographic",void 0),ve(this,"_subViewports",void 0),ve(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=Q,this.fovy=Te,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=P,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const o=r?new Hm({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*lD(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/lD(i)]}addMetersToLngLat(e,n){return C8(e,n)}panByPosition(e,n){const i=py(n,this.pixelUnprojectionMatrix),o=l1([],this.projectFlat(e),v8([],i)),s=l1([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const n=function ale(t,e=0){const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let c,l;return(t.fovy?.5*t.fovy*I8:Math.atan(.5/t.altitude))>(90-t.pitch)*I8-.01?(c=D8(t,0,e),l=D8(t,n,e)):(c=r([0,0],o),l=r([n,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=function ole(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,c],[l,d]]=i,h=function sle(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(cd(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),p=p1([a,sD(d,-f1,f1)]),_=p1([l,sD(c,-f1,f1)]),x=[Math.max(Math.abs(_[0]-p[0]),r),Math.max(Math.abs(_[1]-p[1]),r)],P=[e-h.left-h.right-2*Math.abs(s[0]),n-h.top-h.bottom-2*Math.abs(s[1])];cd(P[0]>0&&P[1]>0);const F=P[0]/x[0],X=P[1]/x[1],je=zm([(_[0]+p[0])/2+(h.right-h.left)/2/F,(_[1]+p[1])/2+(h.top-h.bottom)/2/X]),Ze=Math.min(o,aD(Math.abs(Math.min(F,X))));return cd(Number.isFinite(Ze)),{longitude:je[0],latitude:je[1],zoom:Ze}}({width:i,height:r,bounds:e,...n});return new Hm({width:i,height:r,longitude:o,latitude:s,zoom:a})}}ve(Hm,"displayName","WebMercatorViewport");const F8=[0,0,0];function fD(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof Hm){const[r,o,s=0]=t,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function L8(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=t;switch(n&&([s,a,c]=fy([],[s,a,c,1],n)),i){case Ci.LNGLAT:return fD([s,a,c],e,o);case Ci.LNGLAT_OFFSETS:return fD([s+r[0],a+r[1],c+(r[2]||0)],e,o);case Ci.METER_OFFSETS:return fD(C8(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}const gle={10241:9987,10240:9729,10242:33071,10243:33071},pD={};function gl(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!gl(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const o of i)if(!e.hasOwnProperty(o)||!gl(t[o],e[o],n-1))return!1;return!0}return!1}const yle={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||mD(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>gl(t,e,1)},accessor:{validate(t,e){const n=g1(t);return"function"===n||n===g1(e.value)},equal:(t,e,n)=>"function"==typeof e||gl(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||mD(t),equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?gl(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?gl(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{const i=n.context;return i&&i.gl?function _le(t,e,n,i){if(n instanceof Ds)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={10241:n.data.length>1?9985:9729});const o=new Ds(e,{...n,parameters:{...gle,...r,...i}});return pD[o.id]=t,o}(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{!function ble(t,e){!e||!(e instanceof Ds)||pD[e.id]===t&&(e.delete(),delete pD[e.id])}(n.id,t)}}};function xle(t,e){switch(g1(e)){case"object":return my(t,e);case"array":return my(t,{type:"array",value:e,compare:!1});case"boolean":return my(t,{type:"boolean",value:e});case"number":return my(t,{type:"number",value:e});case"function":return my(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function my(t,e){return"type"in e?{name:t,...yle[e.type],...e}:"value"in e?{name:t,type:g1(e.value),...e}:{name:t,type:"object",value:e}}function mD(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function g1(t){return mD(t)?"array":null===t?"null":typeof t}function gD(t,e){let n="_mergedDefaultProps";if(e)for(const r of e){const o=r.constructor;o&&(n+=":".concat(o.extensionName||o.name))}return B8(t,n)||(t[n]=function Ale(t,e){if(!t.prototype)return null;const r=gD(Object.getPrototypeOf(t)),s=function vle(t){const e={},n={},i={};for(const[r,o]of Object.entries(t)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=xle(r,o);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(B8(t,"defaultProps")||{}),a=Object.assign(Object.create(null),r,s.defaultProps),c=Object.assign(Object.create(null),r?.[Cu],s.propTypes),l=Object.assign(Object.create(null),r?.[eD],s.deprecatedProps);for(const d of e){const h=gD(d.constructor);h&&(Object.assign(a,h),Object.assign(c,h[Cu]),Object.assign(l,h[eD]))}return function Sle(t,e){const n=function Ile(t){const e=t.componentName;return e||bi.warn("".concat(t.name,".componentName not specified"))(),e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}(a,t),function Tle(t,e){const n={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(n[s]=a,i[s]=Mle(s))}t[jm]=n,t[qh]={},Object.defineProperties(t,i)}(a,c),function Cle(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const o of e[n])_D(this,o)||(this[o]=i);bi.deprecated(r,e[n].join("/"))()}})}(a,l),a[Cu]=c,a[eD]=l,0===e.length&&!_D(t,"_propTypes")&&(t._propTypes=c),a}(t,e||[]))}function Mle(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||gU(e)?this[qh][t]=e:this[Tu][t]=e},get(){if(this[Tu]){if(t in this[Tu])return this[Tu][t]||this[jm][t];if(t in this[qh]){const e=this[a1]&&this[a1].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[jm][t]}}return this[jm][t]}}}function _D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B8(t,e){return _D(t,e)&&t[e]}let Dle=0;class bD{constructor(...e){ve(this,"id",void 0),ve(this,"props",void 0),ve(this,"count",void 0),this.props=function wle(t,e){let n;for(let o=e.length-1;o>=0;o--){const s=e[o];"extensions"in s&&(n=s.extensions)}const i=gD(t.constructor,n),r=Object.create(i);r[a1]=t,r[qh]={},r[Tu]={};for(let o=0;o<e.length;++o){const s=e[o];for(const a in s)r[a]=s[a]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=Dle++}clone(e){const{props:n}=this,i={};for(const r in n[jm])r in n[Tu]?i[r]=n[Tu][r]:r in n[qh]&&(i[r]=n[qh][r]);return new this.constructor({...n,...i,...e})}}function yD(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new _1(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function _1(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(_1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new _1(t)}ve(bD,"componentName","Component"),ve(bD,"defaultProps",{});const Rle=Object.freeze({});class Ole{constructor(e){ve(this,"component",void 0),ve(this,"onAsyncPropUpdated",void 0),ve(this,"asyncProps",void 0),ve(this,"oldProps",void 0),ve(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Rle}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[a1]||this.component;const n=e[Tu]||{},i=e[qh]||e,r=e[jm]||{};for(const o in n){const s=n[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(gU(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(o=>{this.component&&(o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,n){var i=this;return Bt(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var p,h=yD(n);c=!(p=yield h.next()).done;c=!1){const _=p.value;{if(!i.component)return;const{dataTransform:x}=i.component.props;s=x?x(_,s):s.concat(_),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(_){l=!0,d=_}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Cu];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class kle extends Ole{constructor({attributeManager:e,layer:n}){super(n),ve(this,"attributeManager",void 0),ve(this,"needsRedraw",void 0),ve(this,"needsUpdate",void 0),ve(this,"subLayers",void 0),ve(this,"usesPickingColorCache",void 0),ve(this,"hasPickingBuffer",void 0),ve(this,"changeFlags",void 0),ve(this,"viewport",void 0),ve(this,"uniformTransitions",void 0),ve(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,r=i?.props.fetch;return r?r(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const r=i.props.onDataLoad;"data"===e&&r&&r(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const Dc=t=>"function"==typeof t,Iu=t=>null!==t&&"object"==typeof t,U8=t=>Iu(t)&&t.constructor==={}.constructor,Ple=t=>t&&"function"==typeof t[Symbol.iterator],Nle=t=>t&&"function"==typeof t[Symbol.asyncIterator],Zh=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Qh=t=>typeof Blob<"u"&&t instanceof Blob,Fle=t=>t&&"object"==typeof t&&t.isBuffer,V8=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Iu(t)&&Dc(t.tee)&&Dc(t.cancel)&&Dc(t.getReader))(t)||(t=>Iu(t)&&Dc(t.read)&&Dc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function ld(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function vD(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function xD(t){var e,n;let i;return ld(t,"null loader"),ld(vD(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let wD="";const ED={},zle=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Hle=/^([-\w.]+\/[-\w.+]+)/;function z8(t){const e=zle.exec(t);return e?e[1]:""}const H8=/\?.*/;function AD(t){return t.replace(H8,"")}function b1(t){return Zh(t)?t.url:Qh(t)?t.name||"":"string"==typeof t?t:""}function SD(t){if(Zh(t)){const e=t,n=e.headers.get("content-type")||"",i=AD(e.url);return function Gle(t){const e=Hle.exec(t);return e?e[1]:t}(n)||z8(i)}return Qh(t)?t.type||"":"string"==typeof t?z8(t):""}function G8(t){return CD.apply(this,arguments)}function CD(){return CD=Bt(function*(t){if(Zh(t))return t;const e={},n=function $le(t){return Zh(t)?t.headers["content-length"]||-1:Qh(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const i=b1(t),r=SD(t);r&&(e["content-type"]=r);const o=yield function Kle(t){return ID.apply(this,arguments)}(t);o&&(e["x-first-bytes"]=o),"string"==typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),CD.apply(this,arguments)}function TD(){return TD=Bt(function*(t){if(!t.ok){const e=yield function Xle(t){return MD.apply(this,arguments)}(t);throw new Error(e)}}),TD.apply(this,arguments)}function MD(){return MD=Bt(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),MD.apply(this,arguments)}function ID(){return ID=Bt(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function qle(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),ID.apply(this,arguments)}function W8(t,e){return DD.apply(this,arguments)}function DD(){return DD=Bt(function*(t,e){if("string"==typeof t){t=function Vle(t){for(const e in ED)t.startsWith(e)&&(t=t.replace(e,ED[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(wD).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield G8(t)}),DD.apply(this,arguments)}function Gm(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function Jle(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}()}const $8=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Gm();class Qle{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function Zle(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function RD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let y1;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(y1||(y1={}));function Y8(t){return"string"!=typeof t?t:(t=t.toUpperCase(),y1[t]||y1.WHITE)}function v1(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis.self||globalThis.window||globalThis;const x1=globalThis.window||globalThis.self||globalThis.global,gy=(globalThis,globalThis.process||{});function Wm(){let t;var e,n;if(Gm()&&x1.performance)t=null==x1||null===(e=x1.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in gy){var i;const r=null==gy||null===(i=gy.hrtime)||void 0===i?void 0:i.call(gy);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}globalThis,globalThis;const $m={debug:Gm()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},ade={enabled:!0,level:0};function Za(){}const X8={},K8={once:!0};let q8=(()=>{class t{constructor(){let{id:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=$8,this._startTs=Wm(),this._deltaTs=Wm(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=n,this.userData={},this._storage=new Qle("__probe-".concat(this.id,"__"),ade),this.timeStamp("".concat(this.id," started")),function sde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const o of i){const s=r[o];"function"==typeof s&&(e.find(a=>o===a)||(r[o]=s.bind(t)))}}(this),Object.seal(this)}set level(n){this.setLevel(n)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Wm()-this._startTs).toPrecision(10))}getDelta(){return Number((Wm()-this._deltaTs).toPrecision(10))}set priority(n){this.level=n}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(n){return this._storage.setConfiguration({level:n}),this}get(n){return this._storage.config[n]}set(n,i){this._storage.setConfiguration({[n]:i})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(n,i){v1(n,i)}warn(n){return this._getLogFunction(0,n,$m.warn,arguments,K8)}error(n){return this._getLogFunction(0,n,$m.error,arguments)}deprecated(n,i){return this.warn("`".concat(n,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(n,i){return this.error("`".concat(n,"` has been removed. Use `").concat(i,"` instead"))}probe(n,i){return this._getLogFunction(n,i,$m.log,arguments,{time:!0,once:!0})}log(n,i){return this._getLogFunction(n,i,$m.debug,arguments)}info(n,i){return this._getLogFunction(n,i,console.info,arguments)}once(n,i){return this._getLogFunction(n,i,$m.debug||$m.info,arguments,K8)}table(n,i,r){return i?this._getLogFunction(n,i,console.table||Za,r&&[r],{tag:ude(i)}):Za}image(n){let{logLevel:i,priority:r,image:o,message:s="",scale:a=1}=n;return this._shouldLog(i||r)?Gm()?function dde(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=RD(o,n,i);console.log(...s)},o.src=e,Za}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...RD(e,n,i)),Za;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...RD(o,n,i)),o.src=e.toDataURL(),Za}return Za}({image:o,message:s,scale:a}):function lde(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),Za}({image:o,message:s,scale:a}):Za}time(n,i){return this._getLogFunction(n,i,console.time?console.time:console.info)}timeEnd(n,i){return this._getLogFunction(n,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(n,i){return this._getLogFunction(n,i,console.timeStamp||Za)}group(n,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const o=Z8({logLevel:n,message:i,opts:r}),{collapsed:s}=r;return o.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}groupCollapsed(n,i){return this.group(n,i,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(n){return this._getLogFunction(n,"",console.groupEnd||Za)}withGroup(n,i,r){this.group(n,i)();try{r()}finally{this.groupEnd(n)()}}trace(){console.trace&&console.trace()}_shouldLog(n){return this.isEnabled()&&this.getLevel()>=J8(n)}_getLogFunction(n,i,r,o,s){if(this._shouldLog(n)){s=Z8({logLevel:n,message:i,args:o,opts:s}),v1(r=r||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Wm();const a=s.tag||s.message;if(s.once&&a){if(X8[a])return Za;X8[a]=Wm()}return i=function cde(t,e,n){if("string"==typeof e){const i=n.time?function tde(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function ede(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function ode(t,e,n){if(!Gm&&"string"==typeof t){if(e){const i=Y8(e);t="\x1b[".concat(i,"m").concat(t,"\x1b[39m")}if(n){const i=Y8(n);t="\x1b[".concat(i+10,"m").concat(t,"\x1b[49m")}}return t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),r.bind(console,i,...s.args)}return Za}}return t.VERSION=$8,t})();function J8(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return v1(Number.isFinite(e)&&e>=0),e}function Z8(t){const{logLevel:e,message:n}=t;t.logLevel=J8(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return v1("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function ude(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Q8=new q8({id:"loaders.gl"});class hde{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const w1=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),eV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),tV=(eV&&parseFloat(eV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class fde{constructor(){ve(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:w1,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),pde={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function OD(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const kD=()=>{const t=OD();return t.globalOptions=t.globalOptions||{...tV},t.globalOptions};function mde(t,e,n,i){return n=n||[],function gde(t,e){nV(t,null,tV,pde,e);for(const n of e)nV(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function iV(t,e,n){const r={...t.options||{}};return function bde(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new hde),rV(r,kD()),rV(r,e),r}(e,t,i)}function nV(t,e,n,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const c=!e&&Iu(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)Q8.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=_de(a,r);Q8.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function _de(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(t===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function rV(t,e){for(const n in e)n in e&&(t[n]=U8(e[n])&&U8(t[n])?{...t[n],...e[n]}:e[n])}function oV(t,e){const n=kD(),i=t||n;return"function"==typeof i.fetch?i.fetch:Iu(i.fetch)?r=>W8(r,i):null!=e&&e.fetch?e?.fetch:W8}function bl(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const yde="3.4.11",yl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},xde=yl.global||yl.self||yl.window||{},vl="object"!=typeof process||"[object process]"!==String(process)||process.browser,PD="function"==typeof importScripts,wde=typeof window<"u"&&typeof window.orientation<"u",sV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);sV&&parseFloat(sV[1]);class ND{terminate(){}}const FD=new Map;function aV(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function cV(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t)if(lV(t))i.add(t);else if(lV(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)cV(t[r],e,i);return void 0===n?Array.from(i):[]}function lV(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const LD=()=>{};class BD{static isSupported(){return typeof Worker<"u"&&vl||typeof ND<"u"&&!vl}constructor(e){ve(this,"name",void 0),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"terminated",!1),ve(this,"worker",void 0),ve(this,"onMessage",void 0),ve(this,"onError",void 0),ve(this,"_loadableURL","");const{name:n,source:i,url:r}=e;bl(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=LD,this.onError=o=>console.log(o),this.worker=vl?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=LD,this.onError=LD,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||cV(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function Ede(t){bl(t.source&&!t.url||!t.source&&t.url);let e=FD.get(t.source||t.url);return e||(t.url&&(e=function Ade(t){if(!t.startsWith("http"))return t;const e=function Sde(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return aV(e)}(t.url),FD.set(t.url,e)),t.source&&(e=aV(t.source),FD.set(t.source,e))),bl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new ND(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new ND(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Tde{constructor(e,n){ve(this,"name",void 0),ve(this,"workerThread",void 0),ve(this,"isRunning",!0),ve(this,"result",void 0),ve(this,"_resolve",()=>{}),ve(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){bl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){bl(this.isRunning),this.isRunning=!1,this._reject(e)}}class Mde{static isSupported(){return BD.isSupported()}constructor(e){ve(this,"name","unnamed"),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"maxConcurrency",1),ve(this,"maxMobileConcurrency",1),ve(this,"onDebug",()=>{}),ve(this,"reuseWorkers",!0),ve(this,"props",{}),ve(this,"jobQueue",[]),ve(this,"idleQueue",[]),ve(this,"count",0),ve(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e){var n=arguments,i=this;return Bt(function*(){let r=n.length>1&&void 0!==n[1]?n[1]:(a,c,l)=>a.done(l),o=n.length>2&&void 0!==n[2]?n[2]:(a,c)=>a.error(c);const s=new Promise(a=>(i.jobQueue.push({name:e,onMessage:r,onError:o,onStart:a}),i));return i._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return Bt(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new Tde(i.name,n);n.onMessage=o=>i.onMessage(r,o.type,o.payload),n.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new BD({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return wde?this.maxMobileConcurrency:this.maxConcurrency}}const Ide={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class dd{static isSupported(){return BD.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dd._workerFarm=dd._workerFarm||new dd({}),dd._workerFarm.setProps(e),dd._workerFarm}constructor(e){ve(this,"props",void 0),ve(this,"workerPools",new Map),this.props={...Ide},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let o=this.workerPools.get(n);return o||(o=new Mde({name:n,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ve(dd,"_workerFarm",void 0);const Dde="latest";function jD(){return jD=Bt(function*(t,e,n,i,r){const o=t.id,s=function Rde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let o=t.version;"latest"===o&&(o=Dde);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(i)}return bl(r),r}(t,n),c=dd.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Pde.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),jD.apply(this,arguments)}function Pde(t,e,n,i){return UD.apply(this,arguments)}function UD(){return UD=Bt(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield t(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),UD.apply(this,arguments)}function uV(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function zD(){return zD=Bt(function*(t){const e=[];var r,n=!1,i=!1;try{for(var s,o=yD(t);n=!(s=yield o.next()).done;n=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function Fde(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),r=i.reduce((a,c)=>a+c.byteLength,0),o=new Uint8Array(r);let s=0;for(const a of i)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}),zD.apply(this,arguments)}const Bde=262144,Ude=262144;function hV(t,e){this.v=t,this.k=e}function E1(t){return new hV(t,0)}function _y(t){var e,n;function i(o,s){try{var a=t[o](s),c=a.value,l=c instanceof hV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=t[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(o,s))})},"function"!=typeof t.return&&(this.return=void 0)}function GD(t){return function(){return new _y(t.apply(this,arguments))}}_y.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},_y.prototype.next=function(t){return this._invoke("next",t)},_y.prototype.throw=function(t){return this._invoke("throw",t)},_y.prototype.return=function(t){return this._invoke("return",t)};const zde=1048576;function WD(){return WD=GD(function*(t,e){const n=e?.chunkSize||zde;let i=0;for(;i<t.size;){const r=i+n,o=yield E1(t.slice(i,r).arrayBuffer());i=r,yield o}}),WD.apply(this,arguments)}function fV(t){if(function Gde(t){return t&&"object"==typeof t&&t.isBuffer}(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function pV(t,e){return w1?function Wde(t,e){return $D.apply(this,arguments)}(t,e):function $de(t,e){return YD.apply(this,arguments)}(t,e)}function $D(){return $D=GD(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:o,value:s}=yield E1(r);if(o)return;yield fV(s)}}catch{n.releaseLock()}}),$D.apply(this,arguments)}function YD(){return YD=GD(function*(t,e){var r,n=!1,i=!1;try{for(var s,o=yD(t);n=!(s=yield E1(o.next())).done;n=!1){const a=s.value;yield fV(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield E1(o.return()))}finally{if(i)throw r}}}),YD.apply(this,arguments)}const XD="Cannot convert supplied data type";function KD(){return KD=Bt(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function Xde(t,e,n){if(e.text&&"string"==typeof t)return t;if(Fle(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(XD)}(t,e);if(Qh(t)&&(t=yield G8(t)),Zh(t)){const r=t;return yield function Yle(t){return TD.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(V8(t)&&(t=function Yde(t,e){if("string"==typeof t)return function*jde(t,e){const n=e?.chunkSize||Bde;let i=0;const r=new TextEncoder;for(;i<t.length;){const o=Math.min(t.length-i,n),s=t.slice(i,i+o);i+=o,yield r.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function Vde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Ude}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),o=new ArrayBuffer(r),s=new Uint8Array(t,i,r);new Uint8Array(o).set(s),i+=r,yield o}}()}(t,e);if(Qh(t))return function Hde(t,e){return WD.apply(this,arguments)}(t,e);if(V8(t))return pV(t,e);if(Zh(t))return pV(t.body,e);throw new Error("makeIterator")}(t,n)),Ple(t)||Nle(t))return function Lde(t){return zD.apply(this,arguments)}(t);throw new Error(XD)}),KD.apply(this,arguments)}function mV(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}const tue=new q8({id:"loaders.gl"}),gV=()=>{const t=OD();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function _V(t){const e=gV();t=Array.isArray(t)?t:[t];for(const n of t){const i=xD(n);e.find(r=>i===r)||e.unshift(i)}}const iue=/\.([^.]+)$/;function QD(){return QD=Bt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!yV(t))return null;let r=bV(t,e,{...n,nothrow:!0},i);if(r)return r;if(Qh(t)&&(r=bV(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(vV(t));return r}),QD.apply(this,arguments)}function bV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!yV(t))return null;if(e&&!Array.isArray(e))return xD(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function nue(){return gV()}()),function sue(t){for(const e of t)xD(e)}(r);const o=function oue(t,e,n,i){const r=b1(t),o=SD(t),s=AD(r)||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=eR(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function aue(t,e){const n=e&&iue.exec(e),i=n&&n[1];return i?function cue(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||eR(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function lue(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(due(e,n))return n}else if(ArrayBuffer.isView(e)){if(xV(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&xV(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(wV(t)):""),a=a||eR(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&tue.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(o||null!=n&&n.nothrow))throw new Error(vV(t));return o}function yV(t){return!(t instanceof Response&&204===t.status)}function vV(t){const e=b1(t),n=SD(t);let i="No valid loader found (";i+=e?"".concat(mV(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?wV(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function eR(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function due(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function xV(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function uue(t,e,n,i){if(i instanceof ArrayBuffer)return function Nde(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===tR(t,e,i.length);default:return!1}}(t,e,n,r))}function wV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?tR(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?tR(t,0,e):""}function tR(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function A1(t,e,n,i){return nR.apply(this,arguments)}function nR(){return nR=Bt(function*(t,e,n,i){bl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!vD(e)&&(i=void 0,n=e,e=void 0),n=n||{};const r=b1(t=yield t),s=function eue(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function rue(t){return QD.apply(this,arguments)}(t,s,n);return a?(i=function Qde(t,e,n){if(n)return n;const i={fetch:oV(e,t),...t};if(i.url){const r=AD(i.url);i.baseUrl=r,i.queryString=function Wle(t){const e=t.match(H8);return e&&e[0]}(i.url),i.filename=mV(r),i.baseUrl=function Jde(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(r)}return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:A1,loaders:s},n=mde(n,a,s,r),i||null),yield function hue(t,e,n,i){return iR.apply(this,arguments)}(a,t,n,i)):null}),nR.apply(this,arguments)}function iR(){return iR=Bt(function*(t,e,n,i){if(function vde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yde;bl(t,"no worker provided")}(t),Zh(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function Kde(t,e,n){return KD.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function Ode(t,e){return!(!dd.isSupported()||!(vl||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function kde(t,e,n,i,r){return jD.apply(this,arguments)}(t,e,n,i,A1);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw bl(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),iR.apply(this,arguments)}function yy(t,e,n,i){return rR.apply(this,arguments)}function rR(){return rR=Bt(function*(t,e,n,i){!Array.isArray(e)&&!vD(e)&&(n=e,e=void 0);const r=oV(n);let o=t;return"string"==typeof t&&(o=yield r(t)),Qh(t)&&(o=yield r(t)),yield A1(o,e,n)}),rR.apply(this,arguments)}const bue=Object.freeze([]),yue=oy(({oldViewport:t,viewport:e})=>t.equals(e));let xl=new Uint8ClampedArray(0);const vue={data:{type:"data",value:bue,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(t);return!c&&!r&&(s.add({resourceId:t,data:yy(t,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:l=>{var d;return null===(d=n.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):yy(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Ci.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class ef extends bD{constructor(...e){super(...e),ve(this,"internalState",null),ve(this,"lifecycle","Awaiting state"),ve(this,"context",void 0),ve(this,"state",void 0),ve(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Ho(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=L8(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=M8(i,n.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return Ho(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return Ho(this.internalState),function mle(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function ple(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return r===Ci.DEFAULT&&(r=e.isGeospatial?Ci.LNGLAT:Ci.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:c=!0}=e,{geospatialOrigin:l=F8,shaderCoordinateOrigin:d=F8,offsetMode:h=!1}=c?b8(n,i,r):{},p=L8(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:h});h&&function Xre(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(p,p,n.projectPosition(l||d));return p}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ci.DEFAULT||e===Ci.LNGLAT||e===Ci.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Ho(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function ace(t){if(!function lce(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function cce(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=dce(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const r of i)n.invalidateAll(r);else n.invalidateAll();if(n){const{props:r}=e,o=this.internalState.hasPickingBuffer,s=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(o!==s){this.internalState.hasPickingBuffer=s;const{pickingColors:a,instancePickingColors:c}=n.attributes,l=a||c;l&&(s&&l.constant&&(l.constant=!1,n.invalidate(l.id)),!l.value&&!s&&(l.constant=!0,l.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,o,s;n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!yue({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(xl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&bi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),xl=ey.allocate(xl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(xl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),xl[3*s+0]=o[0],xl[3*s+1]=o[1],xl[3*s+2]=o[2]}e.value=xl.subarray(0,3*n)}_setModelAttributes(e,n){const o=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n))return void this._disablePickingIndex(e);const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,o=i||r,s=o&&n.attributes&&n.attributes[o.id];if(s&&s.value){const a=s.value,c=this.encodePickingColor(e);for(let l=0;l<n.length;l++){const d=o.getVertexOffset(l);a[d]===c[0]&&a[d+1]===c[1]&&a[d+2]===c[2]&&this._disablePickingIndex(l)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==xl.buffer&&(i.value=xl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Ho(!this.internalState),Ho(Number.isFinite(this.props.coordinateSystem)),ls("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new kle({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(bi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Zae(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ls("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(ls("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){ls("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];id(o.gl,{polygonOffset:c}),Mc(o.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=n[r];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}n[r]||(n[r]=e[r],o=!0),o&&ls("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function ece(t,e){const n=l8({newProps:t,oldProps:e,propTypes:t[Cu],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function nce(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function ice(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&d8(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&d8(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:rce(t,e),transitionsChanged:tce(t,e)}}(e,n);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,n[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function Qae(t){const e=t[Cu];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Yae(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);if(n=n||r,n)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ve(ef,"defaultProps",vue),ve(ef,"layerName","Layer");class oR extends ef{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:_,positionFormat:x,modelMatrix:P,extensions:F,fetch:X,operation:Q,_subLayerProps:ye}=this.props,Te={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:_,positionFormat:x,modelMatrix:P,extensions:F,fetch:X,operation:Q},je=ye&&e.id&&ye[e.id],Ze=je&&je.updateTriggers,at=e.id||"sublayer";if(je){const mt=this.props[Cu],pt=e.type?e.type._propTypes:{};for(const gt in je){const yt=pt[gt]||mt[gt];yt&&"accessor"===yt.type&&(je[gt]=this.getSubLayerAccessor(je[gt]))}}Object.assign(Te,e,je),Te.id="".concat(this.props.id,"-").concat(at),Te.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...Ze};for(const mt of F){const pt=mt.getSubLayerProps.call(this,mt);pt&&Object.assign(Te,pt,{updateTriggers:Object.assign(Te.updateTriggers,pt.updateTriggers)})}return Te}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=kI(this.renderLayers(),Boolean),this.internalState.subLayers=i),ls("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}ve(oR,"layerName","CompositeLayer");const wue=/([0-9]+\.?[0-9]*)(%|px)/;function Du(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=wue.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ru(t,e){return t.relative?Math.round(t.position*e):t.position}class sR{constructor(e){ve(this,"id",void 0),ve(this,"viewportInstance",void 0),ve(this,"_x",void 0),ve(this,"_y",void 0),ve(this,"_width",void 0),ve(this,"_height",void 0),ve(this,"_padding",void 0),ve(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};Ho(!c||c instanceof Mu),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Du(i),this._y=Du(r),this._width=Du(o),this._height=Du(s),this._padding=a&&{left:Du(a.left||0),right:Du(a.right||0),top:Du(a.top||0),bottom:Du(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&gl(this.props,e.props,2))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return r.height&&r.width?new this.ViewportType({...i,...this.props,...r}):null}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:Ru(this._x,e),y:Ru(this._y,n),width:Ru(this._width,e),height:Ru(this._height,n)};return this._padding&&(i.padding={left:Ru(this._padding.left,e),top:Ru(this._padding.top,n),right:Ru(this._padding.right,e),bottom:Ru(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Eue=(new Hn).lookAt({eye:[0,0,1]});function Aue({width:t,height:e,near:n,far:i,padding:r}){let o=-t/2,s=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:p=0}=r,_=Er((l+t-d)/2,0,t)-t/2,x=Er((h+e-p)/2,0,e)-e/2;o-=_,s-=_,a+=x,c+=x}return(new Hn).ortho({left:o,right:s,bottom:a,top:c,near:n,far:i})}class Sue extends Mu{constructor(e){const{width:n,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,p=Math.min(d,h),_=Math.pow(2,p);let x;if(d!==h){const P=Math.pow(2,d),F=Math.pow(2,h);x={unitsPerMeter:[P/_,F/_,1],metersPerUnit:[_/P,_/F,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Eue.clone().scale([_,_*(l?-1:1),_]),projectionMatrix:Aue({width:n||1,height:i||1,padding:c,near:r,far:o}),zoom:p,distanceScales:x})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=py(n,this.pixelUnprojectionMatrix),o=l1([],this.projectFlat(e),v8([],i)),s=l1([],this.center,o);return{target:this.unprojectFlat(s)}}}const AV=()=>{},Cue=t=>t;class Mue{constructor(e){ve(this,"getControllerState",void 0),ve(this,"props",void 0),ve(this,"propsInTransition",void 0),ve(this,"transition",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=n,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new hy(e.timeline),this.onViewStateChange=e.onViewStateChange||AV,this.onStateChange=e.onStateChange||AV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:n.transitionEasing||Cue,interpolator:o,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class Iue{constructor(e){ve(this,"_propsToCompare",void 0),ve(this,"_propsToExtract",void 0),ve(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Au(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const o of this._propsToExtract)(o in e||o in n)&&(i[o]=e[o],r[o]=n[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];Ho(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const Due=["longitude","latitude","zoom","bearing","pitch"],Rue=["longitude","latitude","zoom"];class S1 extends Iue{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:Due,required:Rue},super(i.transitionProps),ve(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(n),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const o of this._propsToExtract)r[o]=Gw(e[o]||0,n[o]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...r});Object.assign(r,o.panByPosition(n.aroundPosition,Gw(e.around,n.around,i)))}return r}}const Ou={transitionDuration:0},C1=t=>1-(1-t)*(1-t),Ym_WHEEL=["wheel"],Ym_PAN=["panstart","panmove","panend"],Ym_PINCH=["pinchstart","pinchmove","pinchend"],Ym_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Ym_DOUBLE_TAP=["doubletap"],Ym_KEYBOARD=["keydown"],tf={};class cR{constructor(e){ve(this,"props",void 0),ve(this,"state",{}),ve(this,"transitionManager",void 0),ve(this,"eventManager",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"makeViewport",void 0),ve(this,"_controllerState",void 0),ve(this,"_events",{}),ve(this,"_interactionState",{isDragging:!1}),ve(this,"_customEvents",[]),ve(this,"_eventStartBlocked",null),ve(this,"_panMove",!1),ve(this,"invertPan",!1),ve(this,"dragMode","rotate"),ve(this,"inertia",0),ve(this,"scrollZoom",!0),ve(this,"dragPan",!0),ve(this,"dragRotate",!0),ve(this,"doubleClickZoom",!0),ve(this,"touchZoom",!0),ve(this,"touchRotate",!1),ve(this,"keyboard",!0),this.transitionManager=new Mue({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Ym_WHEEL,d&&i),this.toggleEvents(Ym_PAN,d),this.toggleEvents(Ym_PINCH,d&&(a||c)),this.toggleEvents(Ym_TRIPLE_PAN,d&&c),this.toggleEvents(Ym_DOUBLE_TAP,d&&s),this.toggleEvents(Ym_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Ou,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Ou,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:C1},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ou,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:C1},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Ou,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ou,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:C1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return tf._startPinchRotation=e.rotation,tf._lastPinchEvent=e,this.updateViewport(i,Ou,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:tf._startPinchRotation-i})}return this.updateViewport(n,Ou,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),tf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=tf;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*n/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:C1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return tf._startPinchRotation=null,tf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new S1({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Ou}}class SV{constructor(e,n){ve(this,"_viewportProps",void 0),ve(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class CV extends SV{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:p,startRotatePos:_,startRotationX:x,startRotationOrbit:P,startZoomPosition:F,startZoom:X}=e;super({width:n,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:p,startRotatePos:_,startRotationX:x,startRotationOrbit:P,startZoomPosition:F,startZoom:X}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),Er(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Er(r[0],i,n),Er(r[1],i,n)]:Er(r,i,n),e.rotationX=Er(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function soe(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class kue extends cR{constructor(...e){super(...e),ve(this,"ControllerState",CV),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new S1({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class Pue extends CV{constructor(e){super(e),ve(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=Er(s+o,r,i);break;case"Y":a=Er(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return Er(n+o,r,i)}}class Nue extends cR{constructor(...e){super(...e),ve(this,"ControllerState",Pue),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new S1(["target","zoom"])}),ve(this,"dragMode","pan")}_onPanRotate(){return!1}}class TV extends sR{get ViewportType(){return Sue}get ControllerType(){return Nue}}ve(TV,"displayName","OrthographicView");const lR=Math.PI/180;function Fue({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new Hn).lookAt({eye:a,up:s});c.rotateX(i*lR),"Z"===n?c.rotateZ(r*lR):c.rotateY(r*lR);const l=Math.pow(2,o)/t;return c.scale(l),c}class Lue extends Mu{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:uD(r);super({...e,longitude:void 0,viewMatrix:Fue({height:n||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),ve(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=n?r:this.height-r,[a,c,l]=py([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class MV extends sR{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return Lue}get ControllerType(){return kue}}ve(MV,"displayName","OrbitView");const Bue=[255,255,255],jue=1;let Uue=0;class IV{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","ambient");const{color:n=Bue}=e,{intensity:i=jue}=e;this.id=e.id||"ambient-".concat(Uue++),this.color=n,this.intensity=i}}const Vue=[255,255,255],zue=1,Hue=[0,0,-1];let Gue=0;class DV{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","directional"),ve(this,"direction",void 0),ve(this,"shadow",void 0);const{color:n=Vue}=e,{intensity:i=zue}=e,{direction:r=Hue}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(Gue++),this.color=n,this.intensity=i,this.type="directional",this.direction=new nn(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class Wue{constructor(e,n={id:"pass"}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class dR extends Wue{constructor(...e){super(...e),ve(this,"_lastRenderIndex",-1)}render(e){return id(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function Yue(t,e){id(t,{viewport:[0,0,e?e.width:t.drawingBufferWidth,e?e.height:t.drawingBufferHeight]}),t.clear(16640)}(l,n),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const p=o&&o[h.id];s?.(h);const _=this._getDrawLayerParams(h,e),x=h.subViewports||[h];for(const P of x){const F=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:P,view:p,pass:e.pass,layers:e.layers},_);d.push(F)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:r=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:c},l=!1){const d=[],h=RV(this._lastRenderIndex+1),p={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:s},_={};for(let x=0;x<n.length;x++){const P=n[x],F=this._shouldDrawLayer(P,p,o,_),X={shouldDrawLayer:F};F&&!l&&(X.layerRenderIndex=h(P,F),X.moduleParameters=this._getModuleParameters(P,a,i,c),X.layerParameters=this.getLayerParameters(P,x,e)),d[x]=X}return d}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function $ue(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,o=e&&e.devicePixelRatio||Mm(t);return[i.x*o,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Mc(e,{scissorTest:!0,scissor:l},()=>SI(e,h))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};id(e,{viewport:l});for(let h=0;h<n.length;h++){const p=n[h],{shouldDrawLayer:_,layerRenderIndex:x,moduleParameters:P,layerParameters:F}=c[h];if(_&&p.props.pickable&&d.pickableCount++,p.isComposite)d.compositeCount++;else if(_){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,x),P.viewport=s;try{p._drawLayer({moduleParameters:P,uniforms:{layerIndex:x},parameters:F})}catch(X){p.raiseError(X,"drawing ".concat(p," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Mm(this.gl)});if(n)for(const c of n){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,n),r)}}function RV(t=0,e={}){const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const d=n[c]=n[c]||RV(e[c],e);l=d(r,o),n[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return i}class Xue extends dR{constructor(e,n){super(e,n),ve(this,"shadowMap",void 0),ve(this,"depthBuffer",void 0),ve(this,"fbo",void 0),this.shadowMap=new Ds(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Rm(e,{format:33189,width:1,height:1}),this.fbo=new co(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Mc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Mm(this.gl),o=i.width*r,s=i.height*r;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const OV="#define SMOOTH_EDGE_RADIUS 0.5",Zue={name:"geometry",vs:"\n".concat(OV,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(OV,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Que=Object.keys(Ci).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ci[t],";")).join(""),ehe=Object.keys(fl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(fl[t],";")).join(""),the=Object.keys(Uw).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Uw[t],";")).join(""),nhe="".concat(Que,"\n").concat(ehe,"\n").concat(the,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),ihe={},uR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Zue],vs:nhe,getUniforms:function rhe(t=ihe){return"viewport"in t?function zce({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=Ci.DEFAULT,coordinateOrigin:r=_8,autoWrapLongitude:o=!1}){i===Ci.DEFAULT&&(i=t.isGeospatial?Ci.LNGLAT:Ci.CARTESIAN);const s=Uce({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||g8,s}(t):{}}},ahe=oy(function hhe({viewport:t,center:e}){return new Hn(t.viewProjectionMatrix).invert().transform(e)}),che=oy(function fhe({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,o=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>function uhe(t,e){const[n,i,r]=t,o=py([n,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new nn(t.center).negate()),c=o.map(d=>a.transform(d)),l=(new Hn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(l.multiplyRight(s))}return n}),lhe=[0,0,0,1],dhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],hR={name:"shadow",dependencies:[uR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function phe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||lhe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=ahe({viewport:t.viewport,center:e.project_uCenter}),o=[],s=che({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new nn(t.viewport.center).negate());e.project_uCoordinateSystem===Ci.LNGLAT&&e.project_uProjectionMode===fl.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(dhe),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},mhe={color:[255,255,255],intensity:1},kV=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],ghe=[0,0,0,200/255];class fR{constructor(e={}){ve(this,"id","lighting-effect"),ve(this,"props",void 0),ve(this,"shadowColor",ghe),ve(this,"shadow",void 0),ve(this,"ambientLight",void 0),ve(this,"directionalLights",void 0),ve(this,"pointLights",void 0),ve(this,"shadowPasses",[]),ve(this,"shadowMaps",[]),ve(this,"dummyShadowMap",null),ve(this,"programManager",void 0),ve(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=dy.getDefaultProgramManager(e),hR&&this.programManager.addDefaultModule(hR)),this.dummyShadowMap||(this.dummyShadowMap=new Ds(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(hR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new Hn).lookAt({eye:new nn(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new Xue(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new IV(mhe),this.directionalLights.push(new DV(kV[0]),new DV(kV[1])))}}let _he=1,bhe=1;class PV{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=_he++,a={time:0,delay:n,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=bhe++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class yhe{constructor(e,n,i){ve(this,"id",void 0),ve(this,"context",void 0),ve(this,"isLoaded",void 0),ve(this,"persistent",void 0),ve(this,"_loadCount",0),ve(this,"_subscribers",new Set),ve(this,"_data",void 0),ve(this,"_loader",void 0),ve(this,"_error",void 0),ve(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=yy(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class vhe{constructor({gl:e,protocol:n}){ve(this,"protocol",void 0),ve(this,"_context",void 0),ve(this,"_resources",void 0),ve(this,"_consumers",void 0),ve(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(n,i):(o=new yhe(e,n,this._context),this._resources[e]=o),o.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const xhe=[uR],whe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Ehe(t){const e=dy.getDefaultProgramManager(t);for(const n of xhe)e.addDefaultModule(n);for(const n of whe)e.addShaderHook(n);return e}class Che{constructor(e,{deck:n,stats:i,viewport:r,timeline:o}={}){ve(this,"layers",void 0),ve(this,"context",void 0),ve(this,"resourceManager",void 0),ve(this,"_lastRenderedLayers",[]),ve(this,"_needsRedraw",!1),ve(this,"_needsUpdate",!1),ve(this,"_nextLayers",null),ve(this,"_debug",!1),ve(this,"activateViewport",s=>{ls("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new vhe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Ehe(e),stats:i||new bI({id:"deck.gl"}),viewport:r||new Mu({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new PV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){ls("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=kI(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const s of e)i[s.id]?bi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const o=n[r.id];null===o&&bi.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class The{constructor(e){ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"views",void 0),ve(this,"viewState",void 0),ve(this,"controllers",void 0),ve(this,"timeline",void 0),ve(this,"_viewports",void 0),ve(this,"_viewportMap",void 0),ve(this,"_isUpdating",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_needsUpdate",void 0),ve(this,"_eventManager",void 0),ve(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=kI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!gl(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):bi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const o=e.controller;if(o&&i){const s={...n,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!r||r.constructor!==o.type)&&(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=n[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),a&&this._viewports.unshift(a)}for(const r in n){const o=n[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}class Ihe extends SV{constructor(e){const{width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:_=60,minPitch:x=0,startPanLngLat:P,startZoomLngLat:F,startRotatePos:X,startBearing:Q,startPitch:ye,startZoom:Te,normalize:je=!0}=e;Ho(Number.isFinite(o)),Ho(Number.isFinite(r)),Ho(Number.isFinite(s)),super({width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:p,maxPitch:_,minPitch:x,normalize:je,position:d},{startPanLngLat:P,startZoomLngLat:F,startRotatePos:X,startBearing:Q,startPitch:ye,startZoom:Te}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+n,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Er(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-n.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=Er(r,i,n);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=Er(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function cle(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=t;(r<-180||r>180)&&(r=A8(r+180,360)-180),(a<-180||a>180)&&(a=A8(a+180,360)-180);const c=aD(n/512);if(s<=c)s=c,o=0;else{const l=n/2/Math.pow(2,s),d=zm([0,l])[1];if(o<d)o=d;else{const h=zm([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const o=e[0]-n[0],s=e[1]-n[1],a=e[1],c=n[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let p=0;s>0?Math.abs(d-c)>5&&(p=s/(c-d)*1.2):s<0&&c>5&&(p=1-a/c),p=Er(p,-1,1);const{minPitch:_,maxPitch:x}=this.getViewportProps();let F=i;return p>0?F=i+p*(x-i):p<0&&(F=i-p*(_-i)),{pitch:F,bearing:r+180*h}}}class Dhe extends cR{constructor(...e){super(...e),ve(this,"ControllerState",Ihe),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new S1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ve(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class FV extends sR{get ViewportType(){return Hm}get ControllerType(){return Dhe}}ve(FV,"displayName","MapView");const Rhe=new fR;class khe{constructor(){ve(this,"effects",void 0),ve(this,"_resolvedEffects",[]),ve(this,"_defaultEffects",[]),ve(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(r=>function Ohe(t,e){var n,i;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(i=e.order)&&void 0!==i?i:1/0)}(r,e)>0);i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(gl(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const r of this.effects)n[r.id]=r;const i=[];for(const r of e){const o=n[r.id];o&&o!==r?o.setProps?(o.setProps(r.props),i.push(o)):(o.cleanup(),i.push(r)):i.push(r),delete n[r.id]}for(const r in n)n[r].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(r=>r instanceof fR)||this._resolvedEffects.push(Rhe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Phe extends dR{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const LV={blendFunc:[1,0,32771,0],blendEquation:32774};class BV extends dR{constructor(...e){super(...e),ve(this,"pickZ",void 0),ve(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:p,pass:_="picking",pickZ:x,moduleParameters:P}){const F=this.gl;this.pickZ=x;const X=this._resetColorEncoder(x),Q=Mc(F,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...LV,blend:!x},()=>super.render({target:s,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:p?.filter(Te=>Te.useInPicking),pass:_,isPicking:!0,moduleParameters:P}));return this._colorEncoderState=null,{decodePickingColor:X&&Fhe.bind(null,X),stats:Q}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters},{pickable:o,operation:s}=e.props;return this._colorEncoderState?o&&s.includes("draw")&&(Object.assign(r,LV),r.blend=!0,r.blendColor=function Nhe(t,e,n){const{byLayer:i,byAlpha:r}=t;let o,s=i.get(e);return s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),r[o]=s):(bi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colorEncoderState,e,i)):r.blend=!1,s.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function Fhe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Bhe{constructor(e){ve(this,"gl",void 0),ve(this,"layerFilter",void 0),ve(this,"drawPickingColors",void 0),ve(this,"drawLayersPass",void 0),ve(this,"pickLayersPass",void 0),ve(this,"renderCount",void 0),ve(this,"_needsRedraw",void 0),ve(this,"renderBuffers",void 0),ve(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Phe(e),this.pickLayersPass=new BV(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||co.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,o=n.render({...i,target:r});i.effects&&this._postRender(i.effects,i),this.renderCount++,ls("deckRenderer.renderLayers",this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(this.gl,n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new co(this.gl),new co(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={...n,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){r.target=n.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const jhe={pickedColor:null,pickedObjectIndex:-1};function Uhe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,p=0;for(let _=0;_<l;_++){const x=_+a-i,P=x*x;if(P>d)p+=4*c;else for(let F=0;F<c;F++){if(t[p+3]-1>=0){const Q=F+s-n,ye=Q*Q+P;ye<=d&&(d=ye,h=p)}p+=4}}if(h>=0){const _=t.slice(h,h+4),x=e(_);if(x){const P=Math.floor(h/4/c),F=h/4-P*c;return{...x,pickedColor:_,pickedX:s+F,pickedY:a+P}}bi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return jhe}function jV({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function Hhe(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function zhe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const p=n.layerId,_=s?s.props.id:null;if(_!==p||a!==n.index){if(_!==p){const x=r.find(P=>P.props.id===p);x&&c.unshift(x)}n.layerId=_,n.index=a,n.info=null}}const l=jV(t),d=new Map;return d.set(null,l),c.forEach(h=>{let p={...l};h===s&&(p.color=o,p.index=a,p.picked=!0),p=UV({layer:h,info:p,mode:i});const _=p.layer;h===s&&"hover"===i&&(n.info=p),d.set(_.id,p),"hover"===i&&_.updateAutoHighlight(p)}),d}function UV({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class Ghe{constructor(e){ve(this,"gl",void 0),ve(this,"pickingFBO",void 0),ve(this,"depthFBO",void 0),ve(this,"pickLayersPass",void 0),ve(this,"layerFilter",void 0),ve(this,"lastPickedInfo",void 0),ve(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new BV(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(p=>p.id===s):null,l=a&&r.find(p=>p.id===a)||r[0],d=l&&l.unproject([e-l.x,n-l.y]);return{...o,x:e,y:n,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new co(i),co.isSupported(i,{colorBufferFloat:!0}))){const r=new co(i);r.attach({36064:new Ds(i,{format:hi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const p=this._getPickable(e),_=Mm(this.gl);if(!p)return{result:[],emptyInfo:jV({viewports:i,x:r,y:o,pixelRatio:_})};this._resizeBuffer();const x=mI(this.gl,[r,o],!0),P=[x.x+Math.floor(x.width/2),x.y+Math.floor(x.height/2)],F=Math.round(s*_),{width:X,height:Q}=this.pickingFBO,ye=this._getPickingRect({deviceX:P[0],deviceY:P[1],deviceRadius:F,deviceWidth:X,deviceHeight:Q}),Te={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let je;const Ze=[],at=new Set;for(let mt=0;mt<a;mt++){let pt,gt;if(pt=ye?Uhe({...this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:ye,cullRect:Te,effects:h,pass:"picking:".concat(c)}),deviceX:P[0],deviceY:P[1],deviceRadius:F,deviceRect:ye}):{pickedColor:null,pickedObjectIndex:-1},pt.pickedLayer&&l&&this.depthFBO){const{pickedColors:yt}=this._drawAndSample({layers:[pt.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:pt.pickedX,y:pt.pickedY,width:1,height:1},cullRect:Te,effects:h,pass:"picking:".concat(c,":z")},!0);yt[3]&&(gt=yt[0])}pt.pickedLayer&&mt+1<a&&(at.add(pt.pickedLayer),pt.pickedLayer.disablePickingIndex(pt.pickedObjectIndex)),je=zhe({pickInfo:pt,lastPickedInfo:this.lastPickedInfo,mode:c,layers:p,viewports:i,x:r,y:o,z:gt,pixelRatio:_});for(const yt of je.values())yt.layer&&Ze.push(yt);if(!pt.pickedColor)break}for(const mt of at)mt.restorePickingColors();return{result:Ze,emptyInfo:je.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const p=this._getPickable(e);if(!p)return[];this._resizeBuffer();const _=Mm(this.gl),x=mI(this.gl,[r,o],!0),P=x.x,F=x.y+x.height,X=mI(this.gl,[r+s,o+a],!0),ye=X.y,Ze=function Vhe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){const a=e(o);a?n.set(s,{...a,color:o}):bi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:{x:P,y:ye,width:X.x+X.width-P,height:F-ye},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),at=new Map,mt=Number.isFinite(l);for(let pt=0;pt<Ze.length&&!(mt&&l&&at.size>=l);pt++){const gt=Ze[pt];let yt={color:gt.pickedColor,layer:null,index:gt.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:_};yt=UV({layer:gt.pickedLayer,info:yt,mode:c}),at.has(yt.object)||at.set(yt.object,yt)}return Array.from(at.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l,preRenderStats:{}};for(const Q of a)Q.useInPicking&&(h.preRenderStats[Q.id]=Q.preRender(this.gl,h));const{decodePickingColor:p}=this.pickLayersPass.render(h),{x:_,y:x,width:P,height:F}=o,X=new(l?Float32Array:Uint8Array)(P*F*4);return Hw(d,{sourceX:_,sourceY:x,sourceWidth:P,sourceHeight:F,target:X}),{pickedColors:X,decodePickingColor:p}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,n+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const Whe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class $he{constructor(e){ve(this,"el",null),ve(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Whe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&"object"==typeof e&&"style"in e&&Object.assign(r.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:Xhe}=globalThis,pR=typeof Image<"u",mR=typeof ImageBitmap<"u",gR=!!w1||!!Xhe;function VV(t){const e=function HV(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Jhe=/^data:image\/svg\+xml/,Zhe=/\.svg((\?|#).*)?$/;function _R(t){return t&&(Jhe.test(t)||Zhe.test(t))}function GV(t,e){if(_R(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function WV(t,e,n){return bR.apply(this,arguments)}function bR(){return bR=Bt(function*(t,e,n){const i=function Qhe(t,e){if(_R(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return GV(t,e)}(t,n),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function efe(t,e){return yR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),bR.apply(this,arguments)}function yR(){return yR=Bt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=o=>r(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){r(o)}})}),yR.apply(this,arguments)}const tfe={};let $V=!0;function vR(){return vR=Bt(function*(t,e,n){let i;i=_R(n)?yield WV(t,e,n):GV(t,n);const r=e&&e.imagebitmap;return yield function ife(t){return xR.apply(this,arguments)}(i,r)}),vR.apply(this,arguments)}function xR(){return xR=Bt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function rfe(t){for(const e in t||tfe)return!1;return!0}(e)||!$V)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),$V=!1}return yield createImageBitmap(t)}),xR.apply(this,arguments)}const wl=!1,vy=!0;function wR(t){const e=xy(t);return function ufe(t){const e=xy(t);return e.byteLength>=24&&2303741511===e.getUint32(0,wl)?{mimeType:"image/png",width:e.getUint32(16,wl),height:e.getUint32(20,wl)}:null}(e)||function pfe(t){const e=xy(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,wl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function mfe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,wl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,wl),width:e.getUint16(o+7,wl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,wl)}return null}(e)||function hfe(t){const e=xy(t);return e.byteLength>=10&&1195984440===e.getUint32(0,wl)?{mimeType:"image/gif",width:e.getUint16(6,vy),height:e.getUint16(8,vy)}:null}(e)||function ffe(t){const e=xy(t);return e.byteLength>=14&&16973===e.getUint16(0,wl)&&e.getUint32(2,vy)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,vy),height:e.getUint32(22,vy)}:null}(e)||function dfe(t){const n=function ofe(t){return function lfe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function cfe(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function sfe(t){switch(function afe(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function xy(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function ER(){return ER=Bt(function*(t,e){const{mimeType:n}=wR(t)||{},i=globalThis._parseImageNode;return ld(i),yield i(t,n)}),ER.apply(this,arguments)}function AR(){return AR=Bt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:o}=n||{},s=function bfe(t){switch(t){case"auto":case"data":return function qhe(){if(mR)return"imagebitmap";if(pR)return"image";if(gR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Khe(t){switch(t){case"auto":return mR||pR||gR;case"imagebitmap":return mR;case"image":return pR;case"data":return gR;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(s){case"imagebitmap":a=yield function nfe(t,e,n){return vR.apply(this,arguments)}(t,e,o);break;case"image":a=yield WV(t,e,o);break;case"data":a=yield function gfe(t,e){return ER.apply(this,arguments)}(t,e);break;default:ld(!1)}return"data"===r&&(a=function zV(t){switch(VV(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),AR.apply(this,arguments)}const YV={id:"image",module:"images",name:"Images",version:"3.4.11",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function _fe(t,e,n){return AR.apply(this,arguments)},tests:[t=>!!wR(new DataView(t))],options:{image:{type:"auto",decode:!0}}},vfe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function yfe(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},wfe=function xfe(){const t="8.9.24",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(bi.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:bi,_registerLoggers:voe},_V([vfe,[YV,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();class T1 extends rd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=hi(e),r=eU(e,"TIMER_QUERY");let o=i||r;for(const s of n)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Xt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return T1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const XV=hl()&&typeof document<"u";let Ofe=0;class kfe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(F=>F4(F)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:_=!0,stats:x=$h.get("animation-loop-".concat(Ofe++))}=e;let{useDevicePixels:P=!0}=e;"useDevicePixelRatio"in e&&(dn.deprecated("useDevicePixelRatio","useDevicePixels")(),P=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=x,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:_,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Xt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=T1.isSupported(this.gl,["timers"])?new T1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return Bt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return dn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=XV?new Promise((e,n)=>{XV&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function Rfe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function Dfe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?_I(this.props.gl,e):this.onCreateContext(e),!Vw(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Gie(t){id(t,pI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Kie(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function Wie(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function ere(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(dn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(dn.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*s),t.canvas.height=Math.floor(r*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new co(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var M1=m(7271);const Pfe={mousedown:1,mousemove:2,mouseup:4};(function Ffe(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function Nfe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(M1.PointerEventInput),function Lfe(t){t.prototype.handler=function(n){let i=Pfe[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(M1.MouseInput);const Bfe=M1.Manager,El=M1;class I1{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const jfe=El?[[El.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[El.Rotate,{enable:!1}],[El.Pinch,{enable:!1}],[El.Swipe,{enable:!1}],[El.Pan,{threshold:0,enable:!1}],[El.Press,{enable:!1}],[El.Tap,{event:"doubletap",taps:2,enable:!1}],[El.Tap,{event:"anytap",enable:!1}],[El.Tap,{enable:!1}]]:null,JV={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ufe={doubletap:["tap"]},Vfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},CR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},zfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},ZV={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Hfe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Xm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let TR=!1;try{Xm.addEventListener("test",null,{get passive(){return TR=!0,!0}}),Xm.removeEventListener("test",null)}catch{TR=!1}const Gfe=-1!==Hfe.indexOf("firefox"),{WHEEL_EVENTS:Wfe}=CR,e6=4.000244140625;class Xfe extends I1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;Xm.WheelEvent&&(Gfe&&r.deltaMode===Xm.WheelEvent.DOM_DELTA_PIXEL&&(o/=Xm.devicePixelRatio),r.deltaMode===Xm.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%e6==0&&(o=Math.floor(o/e6)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(Wfe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!TR&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:Kfe}=CR,t6="pointermove",n6="pointerover",i6="pointerout",r6="pointerenter",o6="pointerleave";class qfe extends I1{constructor(e,n,i){super(e,n,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Kfe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===t6&&(this.enableMoveEvent=n),e===n6&&(this.enableOverEvent=n),e===i6&&(this.enableOutEvent=n),e===r6&&(this.enableEnterEvent=n),e===o6&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(n6,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(i6,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(r6,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(o6,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(t6,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Jfe}=CR,s6="keydown";class Zfe extends I1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:s6,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Jfe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===s6&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const c6="contextmenu";class Qfe extends I1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:c6,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===c6&&(this.options.enable=n)}}const epe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function dpe(t){const e=epe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&n),s=!!(4&n),a=!!(2&n)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function upe(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const DR={srcElement:"root",priority:0};class hpe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=DR;"string"==typeof i||i&&i.addEventListener?c={...DR,srcElement:i}:i&&(c={...DR,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===n){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...dpe(e),...upe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const fpe={events:null,recognizers:null,recognizerOptions:{},Manager:Bfe,touchAction:"none",tabIndex:0};class ppe{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:o}=r,s=Vfe[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...fpe,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||jfe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(JV).forEach(r=>{const o=this.manager.get(r);o&&JV[r].forEach(s=>{o.recognizeWith(s)})});for(const r in n.recognizerOptions){const o=this.manager.get(r);if(o){const s=n.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new Xfe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new qfe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Zfe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Qfe(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const o=Ufe[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);n?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,o){if("string"!=typeof e){i=n;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=ZV[e]||e;let l=a.get(c);l||(l=new hpe(this),a.set(c,l),l.recognizerName=zfe[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,n,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(ZV[e]||e);if(o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function nf(){}const l6={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:nf,onResize:nf,onViewStateChange:nf,onInteractionStateChange:nf,onBeforeRender:nf,onAfterRender:nf,onLoad:nf,onError:t=>bi.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class RR{constructor(e){ve(this,"props",void 0),ve(this,"width",0),ve(this,"height",0),ve(this,"userData",{}),ve(this,"canvas",null),ve(this,"viewManager",null),ve(this,"layerManager",null),ve(this,"effectManager",null),ve(this,"deckRenderer",null),ve(this,"deckPicker",null),ve(this,"eventManager",null),ve(this,"tooltip",null),ve(this,"metrics",void 0),ve(this,"animationLoop",void 0),ve(this,"stats",void 0),ve(this,"viewState",void 0),ve(this,"cursorState",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_pickRequest",void 0),ve(this,"_lastPointerDownInfo",null),ve(this,"_metricsCounter",void 0),ve(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),ve(this,"_onEvent",n=>{const i=v4[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,n)),!d&&l&&l(s,n)}),ve(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...l6,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&bi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===e8()&&bi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new bI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&ey.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,o,s,a,c,l;null===(e=this.animationLoop)||void 0===e||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(n=this.layerManager)||void 0===n||n.finalize(),this.layerManager=null,null===(i=this.viewManager)||void 0===i||i.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(o=this.deckRenderer)||void 0===o||o.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(c=this.tooltip)||void 0===c||c.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&bi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&bi.removed("onLayerClick","onClick")(),e.initialViewState&&!gl(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||i||r||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return Ho(this.viewManager),this.viewManager.views}getViewports(e){return Ho(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,i){Ho(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),Ho(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,n;const{canvas:i}=this;if(!i)return;const r=null!==(e=i.clientWidth)&&void 0!==e?e:i.width,o=null!==(n=i.clientHeight)&&void 0!==n?n:i.height;var s,a;r===this.width&&o===this.height||(this.width=r,this.height=o,null===(s=this.viewManager)||void 0===s||s.setProps({width:r,height:o}),null===(a=this.layerManager)||void 0===a||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:o}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new kfe({width:n,height:i,useDevicePixels:d,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:h=>F4({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new FV({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var n;o=a,s=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,_I(e,{enable:!0,copyState:!0})),this.tooltip=new $he(this.canvas),id(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new PV;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new ppe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in v4)this.eventManager.on(r,this._onEvent);this.viewManager=new The({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Che(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new khe,this.deckRenderer=new Bhe(e),this.deckPicker=new Ghe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;id(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),bi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=$h.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ve(RR,"defaultProps",l6),ve(RR,"VERSION",wfe);const R1={name:"project32",dependencies:[uR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},mpe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},O1={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function gpe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mpe;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},d6={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class ku{static get DRAW_MODE(){return d6}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=$s("geometry"),drawMode:i=d6.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Xt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Xt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Xt(Number.isFinite(i)),i}}const u6=()=>{},h6={10241:9987,10240:9729,10242:33071,10243:33071};function xpe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function wpe(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function wy(t){return t&&(t.id||t.url)}function f6(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[wy(r)]={...r,x:o,y:n}}}class Cpe{constructor(e,{onUpdate:n=u6,onError:i=u6}){ve(this,"gl",void 0),ve(this,"onUpdate",void 0),ve(this,"onError",void 0),ve(this,"_loadOptions",null),ve(this,"_texture",null),ve(this,"_externalTexture",null),ve(this,"_mapping",{}),ve(this,"_textureParameters",null),ve(this,"_pendingCount",0),ve(this,"_autoPacking",!1),ve(this,"_xOffset",0),ve(this,"_yOffset",0),ve(this,"_rowHeight",0),ve(this,"_buffer",4),ve(this,"_canvasWidth",1024),ve(this,"_canvasHeight",0),ve(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?wy(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Spe(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=Kw(t);for(const s of r){o.index++;const a=e(s,o),c=wy(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function Ape({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[wy(l)]){const{height:h,width:p}=l;i+p+e>s&&(f6(n,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+p+e,o=Math.max(o,h)}}return a.length>0&&f6(n,a,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:xpe(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new Ds(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||h6})),this._texture.height!==this._canvasHeight&&(this._texture=function Epe(t,e,n,i){const r=t.width,o=t.height,s=new Ds(t.gl,{width:e,height:n,parameters:i});return function Are(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=n;const{framebuffer:p,deleteFramebuffer:_}=Qb(t);Xt(p);const{gl:x,handle:P}=p,F=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const X=x.bindFramebuffer(36160,P);Xt(e);let Q=null;if(e instanceof Yh&&(Q=e,d=Number.isFinite(d)?d:Q.width,h=Number.isFinite(h)?h:Q.height,Q.bind(0),e=Q.target),F)switch(e){case 3553:case 34067:x.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:cs(x).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else x.copyTexImage2D(e,o,s,i,r,d,h,0);Q&&Q.unbind(),x.bindFramebuffer(36160,X||null),_&&p.delete()}(t,s,{targetY:0,width:r,height:o}),t.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||h6)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,yy(i.url,this._loadOptions).then(r=>{const o=wy(i),s=this._mapping[o],{x:a,y:c,width:l,height:d}=s,{data:h,width:p,height:_}=wpe(n,r,l,d);this._texture.setSubImageData({data:h,x:a+(l-p)/2,y:c+(d-_)/2,width:p,height:_}),s.width=p,s.height=_,this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const p6=[0,0,0,255],Tpe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:p6},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class OR extends ef{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[R1,O1]})}initializeState(){this.state={iconManager:new Cpe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:p6},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=n,{iconManager:h}=this.state,p=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!p,iconAtlas:s,iconMapping:p?a:null,textureParameters:d}),p?i.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var _;const{gl:x}=this.context;null===(_=this.state.model)||void 0===_||_.delete(),this.state.model=this._getModel(x),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:Uw[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new Lm(e,{...this.getShaders(),id:this.props.id,geometry:new ku({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):bi.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[n,i,r,o]}}ve(OR,"defaultProps",Tpe),ve(OR,"layerName","IconLayer");const m6=[];class PR extends OR{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&bi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state,s=r?Math.max(i,.75*(1-r)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:.75,outlineBuffer:s,gamma:i,sdf:!!n,outlineColor:o},super.draw(e),n&&r){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:.75}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):m6}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):m6}}ve(PR,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ve(PR,"layerName","MultiIconLayer");const Ey=1e20;class Dpe{constructor({fontSize:e=24,buffer:n=3,radius:i=8,cutoff:r=.25,fontFamily:o="sans-serif",fontWeight:s="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=r,this.radius=i;const c=this.size=e+4*n,l=this._createCanvas(c),d=this.ctx=l.getContext("2d",{willReadFrequently:!0});d.font=`${a} ${s} ${e}px ${o}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(e),a=Math.ceil(i),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),d=Math.min(this.size-this.buffer,a+Math.ceil(r)),h=l+2*this.buffer,p=d+2*this.buffer,_=Math.max(h*p,0),x=new Uint8ClampedArray(_),P={data:x,width:h,height:p,glyphWidth:l,glyphHeight:d,glyphTop:a,glyphLeft:0,glyphAdvance:n};if(0===l||0===d)return P;const{ctx:F,buffer:X,gridInner:Q,gridOuter:ye}=this;F.clearRect(X,X,l,d),F.fillText(e,X,X+a);const Te=F.getImageData(X,X,l,d);ye.fill(Ey,0,_),Q.fill(0,0,_);for(let je=0;je<d;je++)for(let Ze=0;Ze<l;Ze++){const at=Te.data[4*(je*l+Ze)+3]/255;if(0===at)continue;const mt=(je+X)*h+Ze+X;if(1===at)ye[mt]=0,Q[mt]=Ey;else{const pt=.5-at;ye[mt]=pt>0?pt*pt:0,Q[mt]=pt<0?pt*pt:0}}g6(ye,0,0,h,p,h,this.f,this.v,this.z),g6(Q,X,X,l,d,h,this.f,this.v,this.z);for(let je=0;je<_;je++){const Ze=Math.sqrt(ye[je])-Math.sqrt(Q[je]);x[je]=Math.round(255-255*(Ze/this.radius+this.cutoff))}return P}}function g6(t,e,n,i,r,o,s,a,c){for(let l=e;l<e+i;l++)_6(t,n*o+l,o,r,s,a,c);for(let l=n;l<n+r;l++)_6(t,l*o+e,1,i,s,a,c)}function _6(t,e,n,i,r,o,s){o[0]=0,s[0]=-Ey,s[1]=Ey,r[0]=t[e];for(let a=1,c=0,l=0;a<i;a++){r[a]=t[e+a*n];const d=a*a;do{const h=o[c];l=(r[a]-r[h]+d-h*h)/(a-h)/2}while(l<=s[c]&&--c>-1);c++,o[c]=a,s[c]=l,s[c+1]=Ey}for(let a=0,c=0;a<i;a++){for(;s[c+1]<a;)c++;const l=o[c],d=a-l;t[e+a*n]=r[l]+d*d}}const Ope=[];function kpe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function b6(t,e,n,i){let r=0;for(let s=e;s<n;s++){var o;r+=(null===(o=i[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function y6(t,e,n,i,r,o){let s=e,a=0;for(let c=e;c<n;c++){const l=b6(t,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function Fpe(t,e,n,i,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?y6(t,r,o,n,i,s):function Npe(t,e,n,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<n;d++)if((" "===t[d]||" "===t[d+1]||d+1===n)&&(c=d+1),c>a){let h=b6(t,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=y6(t,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(t,r,o,n,i,s),s}function Lpe(t,e,n,i,r,o){let s=0,a=0;for(let c=e;c<n;c++){const l=t[c],d=i[l];d?(a||(a=d.layoutHeight),r[c]=s+d.layoutWidth/2,s+=d.layoutWidth):(bi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=32)}o[0]=s,o[1]=a}class v6{constructor(e=5){ve(this,"limit",void 0),ve(this,"_cache",{}),ve(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const Km={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Upe(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let k1=new v6(3);function zpe(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function S6(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Gpe{constructor(){ve(this,"props",{...Km}),ve(this,"_key",void 0),ve(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(1.2*e+2*n)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=function Vpe(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=k1.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),i=k1.get(this._key);if(i&&0===n.size)return void(this._atlas!==i&&(this._atlas=i));const r=this._generateFontAtlas(n,i);this._atlas=r,k1.set(this._key,r)}_generateFontAtlas(e,n){const{fontFamily:i,fontWeight:r,fontSize:o,buffer:s,sdf:a,radius:c,cutoff:l}=this.props;let d=n&&n.data;d||(d=document.createElement("canvas"),d.width=1024);const h=d.getContext("2d",{willReadFrequently:!0});S6(h,i,o,r);const{mapping:p,canvasHeight:_,xOffset:x,yOffset:P}=function Ppe({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;const d=n+2*i;for(const h of t)if(!o[h]){const p=e(h);l+p+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*d+i,width:p,height:d,layoutWidth:p,layoutHeight:n},l+=p+2*i}return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:kpe(a+(c+1)*d)}}({getFontWidth:F=>h.measureText(F).width,fontHeight:1.2*o,buffer:s,characterSet:e,maxCanvasWidth:1024,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(d.height!==_){const F=h.getImageData(0,0,d.width,d.height);d.height=_,h.putImageData(F,0,0)}if(S6(h,i,o,r),a){const F=new Dpe({fontSize:o,buffer:s,radius:c,cutoff:l,fontFamily:i,fontWeight:"".concat(r)});for(const X of e){const{data:Q,width:ye,height:Te,glyphTop:je}=F.draw(X);p[X].width=ye,p[X].layoutOffsetY=.9*o-je;const Ze=h.createImageData(ye,Te);zpe(Q,Ze),h.putImageData(Ze,p[X].x,p[X].y)}}else for(const F of e)h.fillText(F,p[F].x,p[F].y+s+.9*o);return{xOffset:x,yOffset:P,mapping:p,data:d,width:d.width,height:d.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const Ype={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class NR extends ef{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[R1,O1]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:Uw[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new Lm(e,{...this.getShaders(),id:this.props.id,geometry:new ku({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ve(NR,"defaultProps",Ype),ve(NR,"layerName","TextBackgroundLayer");const C6={start:1,middle:0,end:-1},T6={top:1,center:0,bottom:-1},FR=[0,0,0,255],Kpe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:FR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Km.characterSet},fontFamily:Km.fontFamily,fontWeight:Km.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:FR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:FR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class LR extends oR{constructor(...e){super(...e),ve(this,"state",void 0),ve(this,"getBoundingRect",(n,i)=>{let{size:[r,o]}=this.transformParagraph(n,i);const{fontSize:s}=this.state.fontAtlasManager.props;r/=s,o/=s;const{getTextAnchor:a,getAlignmentBaseline:c}=this.props;return[(C6["function"==typeof a?a(n,i):a]-1)*r/2,(T6["function"==typeof c?c(n,i):c]-1)*o/2,r,o]}),ve(this,"getIconOffsets",(n,i)=>{const{getTextAnchor:r,getAlignmentBaseline:o}=this.props,{x:s,y:a,rowWidth:c,size:[l,d]}=this.transformParagraph(n,i),h=C6["function"==typeof r?r(n,i):r],p=T6["function"==typeof o?o(n,i):o],_=s.length,x=new Array(2*_);let P=0;for(let F=0;F<_;F++)x[P++]=(h-1)*l/2+(1-h)*(l-c[F])/2+s[F],x[P++]=(p-1)*d/2+a[F];return x})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Gpe},this.props.maxWidth>0&&bi.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=n.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function jpe({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,c=i?i/s:0,l=r[e]||Math.ceil((t.length-c)/a),d=o&&new Set,h=new Array(e);let p=t;if(a>1||c>0){p=new(0,t.constructor)(l);for(let x=0;x<l;x++)p[x]=t[x*a+c]}for(let _=0;_<e;_++){const F=p.subarray(r[_],r[_+1]||l);h[_]=String.fromCodePoint.apply(null,F),d&&F.forEach(d.add,d)}if(d)for(const _ of d)o.add(String.fromCodePoint(_));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:s,characterSet:c});a=d,o=(h,{index:p})=>l[p]}else{const{iterable:l,objectInfo:d}=Kw(n);s=[0],a=0;for(const h of l){d.index++;const p=Array.from(o(h,d)||"");c&&p.forEach(c.add,c),a+=p.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}transformParagraph(e,n){const{fontAtlasManager:i}=this.state,r=i.mapping,o=this.state.getText,{wordBreak:s,lineHeight:a,maxWidth:c}=this.props;return function Bpe(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],p=[0,0];let _=0,x=0,P=0;for(let X=0;X<=s;X++){const Q=o[X];if(("\n"===Q||X===s)&&(P=X),P>x){const ye=d?Fpe(o,n,i,r,x,P):Ope;for(let Te=0;Te<=ye.length;Te++){const je=0===Te?x:ye[Te-1],Ze=Te<ye.length?ye[Te]:P;Lpe(o,je,Ze,r,a,p);for(let at=je;at<Ze;at++){var F;const pt=(null===(F=r[o[at]])||void 0===F?void 0:F.layoutOffsetY)||0;c[at]=_+p[1]/2+pt,l[at]=p[0]}_+=p[1]*e,h[0]=Math.max(h[0],p[0])}x=P}"\n"===Q&&(a[x]=0,c[x]=0,l[x]=0,x++)}return h[1]=_,{x:a,y:c,rowWidth:l,size:h}}(o(e,n)||"",a,s,c*i.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:p,getAngle:_,getPixelOffset:x,getBackgroundColor:P,getBorderColor:F,getBorderWidth:X,backgroundPadding:Q,background:ye,billboard:Te,fontSettings:je,outlineWidth:Ze,outlineColor:at,sizeScale:mt,sizeUnits:pt,sizeMinPixels:gt,sizeMaxPixels:yt,transitions:It,updateTriggers:ft}=this.props,vt=this.getSubLayerClass("characters",PR),kt=this.getSubLayerClass("background",NR);return[ye&&new kt({getFillColor:P,getLineColor:F,getLineWidth:X,padding:Q,getPosition:d,getSize:p,getAngle:_,getPixelOffset:x,billboard:Te,sizeScale:mt,sizeUnits:pt,sizeMinPixels:gt,sizeMaxPixels:yt,transitions:It&&{getPosition:It.getPosition,getAngle:It.getAngle,getSize:It.getSize,getFillColor:It.getBackgroundColor,getLineColor:It.getBorderColor,getLineWidth:It.getBorderWidth,getPixelOffset:It.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new vt({sdf:je.sdf,smoothing:Number.isFinite(je.smoothing)?je.smoothing:Km.smoothing,outlineWidth:Ze/(je.radius||Km.radius),outlineColor:at,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:p,getAngle:_,getPixelOffset:x,billboard:Te,sizeScale:mt*r,sizeUnits:pt,sizeMinPixels:gt*r,sizeMaxPixels:yt*r,transitions:It&&{getPosition:It.getPosition,getAngle:It.getAngle,getColor:It.getColor,getSize:It.getSize,getPixelOffset:It.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function Hpe(t){bi.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),k1=new v6(t)}(e)}}ve(LR,"defaultProps",Kpe),ve(LR,"layerName","TextLayer");const M6="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",qpe={lightSources:{}};function BR(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const jR={name:"lights",vs:M6,fs:M6,getUniforms:function I6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qpe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function Jpe(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?BR(e):[0,0,0],n.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=BR(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=BR(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return I6({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Zpe={};const eme={name:"phong-lighting",dependencies:[jR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function R6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zpe;if(!("material"in t))return{};const{material:e}=t;return e?function Qpe(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},UR=Math.PI/180,P1=new Float32Array(16),O6=new Float32Array(12);function k6(t,e,n){const i=e[0]*UR,r=e[1]*UR,o=e[2]*UR,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),p=n[0],_=n[1],x=n[2];t[0]=p*h*d,t[1]=p*c*d,t[2]=p*-a,t[3]=_*(-c*l+h*a*s),t[4]=_*(h*l+c*a*s),t[5]=_*d*s,t[6]=x*(c*s+h*a*l),t[7]=x*(-h*s+c*a*l),t[8]=x*d*l}function P6(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const N6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),p=Array.isArray(s),_=l||!c&&!!a(i[0]);t.constant=_?l:h&&d&&p;const x=t.value;if(t.constant){let P;_?(P1.set(a),P=P6(P1)):(P=O6,k6(P,r,o),P.set(s,9)),t.value=new Float32Array(P)}else{let P=e*t.size;const{iterable:F,objectInfo:X}=Kw(i,e,n);for(const Q of F){let ye;X.index++,_?(P1.set(l?a:a(Q,X)),ye=P6(P1)):(ye=O6,k6(ye,h?r:r(Q,X),d?o:o(Q,X)),ye.set(p?s:s(Q,X),9)),x[P++]=ye[0],x[P++]=ye[1],x[P++]=ye[2],x[P++]=ye[3],x[P++]=ye[4],x[P++]=ye[5],x[P++]=ye[6],x[P++]=ye[7],x[P++]=ye[8],x[P++]=ye[9],x[P++]=ye[10],x[P++]=ye[11]}}}};function F6(t,e){return e===Ci.CARTESIAN||e===Ci.METER_OFFSETS||e===Ci.DEFAULT&&!t.isGeospatial}function L6(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],p=a[l+2];e=d<e?d:e,n=h<n?h:n,i=p<i?p:i,r=d>r?d:r,o=h>o?h:o,s=p>s?p:s}return[[e,n,i],[r,o,s]]}function B6(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),bi.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function j6(t,e){if(t.attributes)return B6(t.attributes,e),t instanceof ku?t:new ku(t);if(t.positions||t.POSITION)return B6(t,e),new ku({attributes:t});throw Error("Invalid mesh")}class VR extends ef{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=!hi(this.context.gl),n={};return MI(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[R1,eme,O1],transpileToGLSL100:e,defines:n})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let n=this.state.positionBounds;if(n)return n;const{mesh:i}=this.props;if(!i)return null;if(n=null===(e=i.header)||void 0===e?void 0:e.boundingBox,!n){const{attributes:r}=j6(i,this.props._useMeshColors);r.POSITION=r.POSITION||r.positions,n=L6(r)}return this.state.positionBounds=n,n}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:N6}),this.setState({emptyTexture:new Ds(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var o;if(this.state.positionBounds=null,null===(o=this.state.model)||void 0===o||o.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const s=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||F6(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new Lm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:j6(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}ve(VR,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}}),ve(VR,"layerName","SimpleMeshLayer");const U6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[jR]};class qm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||$s(this.constructor.name),this.display=!0,this.position=new nn,this.rotation=new nn,this.scale=new nn(1,1,1),this.matrix=new Hn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Xt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Xt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Xt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:o=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Xt(e),n=n||this.matrix;const i=new Hn(e).multiplyRight(n),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class Ay extends qm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;dn.assert(n.every(i=>i instanceof qm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const o=n.getBounds();if(!o)return;const[s,a]=o,c=new nn(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new nn(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new nn(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let p=0;p<3;p++)e[0][p]=Math.min(e[0][p],h[p]),e[1][p]=Math.max(e[1][p],h[p])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Hn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Hn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof Ay?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let N1;class zR extends rU{static get ZERO(){return N1||(N1=new zR(0,0,0,0),Object.freeze(N1)),N1}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),od(e)&&1===arguments.length?this.copy(e):(Wr.debug&&(fi(e),fi(n),fi(i),fi(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Wr.debug&&(fi(e.x),fi(e.y),fi(e.z),fi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=fi(e)}get w(){return this[3]}set w(e){this[3]=fi(e)}transform(e){return DI(this,this,e),this.check()}transformByMatrix3(e){return uU(this,this,e),this.check()}transformByMatrix2(e){return function ooe(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return lU(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function V6(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],_=n[1],x=n[2],P=n[3],F=n[4],X=n[5],Q=n[6],ye=n[7],Te=n[8];return t[0]=p*i+_*s+x*l,t[1]=p*r+_*a+x*d,t[2]=p*o+_*c+x*h,t[3]=P*i+F*s+X*l,t[4]=P*r+F*a+X*d,t[5]=P*o+F*c+X*h,t[6]=Q*i+ye*s+Te*l,t[7]=Q*r+ye*a+Te*d,t[8]=Q*o+ye*c+Te*h,t}function z6(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function H6(){var t=new Xs(4);return Xs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function G6(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function W6(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1],l=n[2],d=n[3];return t[0]=i*d+s*a+r*l-o*c,t[1]=r*d+s*c+o*a-i*l,t[2]=o*d+s*l+i*c-r*a,t[3]=s*d-i*a-r*c-o*l,t}var Y6=p8,Ame=function(){var t=oU(),e=sU(1,0,0),n=sU(0,1,0);return function(i,r,o){var s=aU(r,o);return s<-.999999?($w(t,e,r),function Yre(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&$w(t,n,r),function qre(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),G6(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):($w(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,function Oce(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s,t}(i,i))}}();H6(),H6(),function rme(){var t=new Xs(9);Xs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const Sme=[0,0,0,1];class Sy extends Ww{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function $6(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,t[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return G6(this,e,n),this.check()}identity(){return function ume(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=fi(e)}get y(){return this[1]}set y(e){this[1]=fi(e)}get z(){return this[2]}set z(e){this[2]=fi(e)}get w(){return this[3]}set w(e){this[3]=fi(e)}len(){return function Dce(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function Rce(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function kce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return Ame(this,e,n),this.check()}add(e){return function Ice(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function mme(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function yme(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function bme(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function Pce(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return W6(this,this,e),this.check()}multiplyLeft(e){return W6(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function hme(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+s*a,t[1]=r*c+o*a,t[2]=o*c-r*a,t[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function fme(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-o*a,t[1]=r*c+s*a,t[2]=o*c+i*a,t[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function pme(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=o*c+s*a,t[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return Y6(this,this,e),this.check()}slerp(e,n,i){let r,o,s;switch(arguments.length){case 1:({start:r=Sme,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=n;break;default:r=e,o=n,s=i}return function F1(t,e,n,i){var p,_,x,P,F,r=e[0],o=e[1],s=e[2],a=e[3],c=n[0],l=n[1],d=n[2],h=n[3];return(_=r*c+o*l+s*d+a*h)<0&&(_=-_,c=-c,l=-l,d=-d,h=-h),1-_>ml?(p=Math.acos(_),x=Math.sin(p),P=Math.sin((1-i)*p)/x,F=Math.sin(i*p)/x):(P=1-i,F=i),t[0]=P*r+F*c,t[1]=P*o+F*l,t[2]=P*s+F*d,t[3]=P*a+F*h,t}(this,r,o,s),this.check()}transformVector4(e,n=new zR){return function Nce(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2],l=n[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,_=-s*i-a*r-c*o;t[0]=d*l+_*-s+h*-c-p*-a,t[1]=h*l+_*-a+p*-s-d*-c,t[2]=p*l+_*-c+d*-a-h*-s,t[3]=e[3]}(n,e,this),ty(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Cme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Tme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function q6(t){if(!t._animation){const e=Tme[t.componentType],n=Cme[t.type],i=n*t.count,{buffer:r,byteOffset:o}=t.bufferView.data,s=new e(r,o+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=n)a.push(Array.from(s.slice(c,c+n)));t._animation=a}}return t._animation}const Mme=new Hn,HR=new Sy;class Pme{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function kme(t,e,n,i){let{input:r,interpolation:o,output:s}=e;const c=t%r[r.length-1],l=r.findIndex(_=>_>=c),d=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:dn.warn("Bad animation path ".concat(i))()}Xt(n[i].length===s[d].length);const h=r[d],p=r[l];switch(o){case"STEP":!function Ome(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,s[d]);break;case"LINEAR":p>h&&function Dme(t,e,n,i,r){if("rotation"===e){HR.slerp({start:n,target:i,ratio:r});for(let o=0;o<HR.length;o++)t[e][o]=HR[o]}else for(let o=0;o<n.length;o++)t[e][o]=r*i[o]+(1-r)*n[o]}(n,i,s[d],s[l],(c-h)/(p-h));break;case"CUBICSPLINE":p>h&&function Rme(t,e,n){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const d=r[l]*a,h=o[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:p-h,ratio:(c-h)/(p-h)});break;default:dn.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function Ime(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=Mme.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(s,s._node)})}}class Nme{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),o=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:q6(e.accessors[c]),interpolation:l,output:q6(e.accessors[d])}}),s=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new Pme({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class Fme extends qm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof Lm?(this.model=e,this._setModelNodeProps(n)):this.model=new Lm(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class Lme{constructor(e,n){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},MI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new Ds(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(dn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function J6(t,e){return hi(t)?"#version 300 es\n".concat(e):e}const Vme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zme={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Hme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},zme,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Nme(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new Ay({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new Ay({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new Hn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new Ay({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){dn.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function Ume(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new Lme(t,e);dn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new Fme(t,Object.assign({id:n,drawMode:i,vertexCount:r,modules:[U6],defines:a.defines,parameters:a.parameters,vs:J6(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:J6(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},s));return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),dn.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new qi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new Ys({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:Vme[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var Cy=m(9125);const Yme="3.4.11",GR={};function rf(t){return WR.apply(this,arguments)}function WR(){return WR=Bt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&(t=function Xme(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:vl?n.CDN?(bl(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Yme,"/dist/libs/").concat(t)):PD?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),GR[t]=GR[t]||function Kme(t){return $R.apply(this,arguments)}(t),yield GR[t]}),WR.apply(this,arguments)}function $R(){return $R=Bt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!vl)try{return Cy&&Cy.requireFromFile&&(yield Cy.requireFromFile(t))}catch{return null}return PD?importScripts(t):function qme(t,e){if(!vl)return Cy.requireFromString&&Cy.requireFromString(t,e);if(PD)return eval.call(xde,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),$R.apply(this,arguments)}const Jme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.wasm"),Zme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.js");let YR,qR;function Q6(t){return XR.apply(this,arguments)}function XR(){return XR=Bt(function*(t){const e=t.modules||{};return e.basis?e.basis:(YR=YR||function Qme(t){return KR.apply(this,arguments)}(t),yield YR)}),XR.apply(this,arguments)}function KR(){return KR=Bt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield rf("basis_transcoder.js","textures",t),yield rf("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function ege(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,n)}),KR.apply(this,arguments)}function e5(t){return JR.apply(this,arguments)}function JR(){return JR=Bt(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(qR=qR||function tge(t){return ZR.apply(this,arguments)}(t),yield qR)}),JR.apply(this,arguments)}function ZR(){return ZR=Bt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield rf(Zme,"textures",t),yield rf(Jme,"textures",t)]),e=e||globalThis.BASIS,yield function nge(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,n)}),ZR.apply(this,arguments)}const ige=["","WEBKIT_","MOZ_"],t5={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let L1=null;var QR,B1,e2,j1,r5,t2,o5,s5;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(QR||(QR={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(B1||(B1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(e2||(e2={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(j1||(j1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(r5||(r5={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(t2||(t2={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(o5||(o5={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(s5||(s5={}));const Aa=[171,75,84,88,32,50,48,187,13,10,26,10],lge={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function r2(){return r2=Bt(function*(t,e){if("auto"===e.basis.containerFormat){if(function cge(t){const e=new Uint8Array(t);return!(e.byteLength<Aa.length||e[0]!==Aa[0]||e[1]!==Aa[1]||e[2]!==Aa[2]||e[3]!==Aa[3]||e[4]!==Aa[4]||e[5]!==Aa[5]||e[6]!==Aa[6]||e[7]!==Aa[7]||e[8]!==Aa[8]||e[9]!==Aa[9]||e[10]!==Aa[10]||e[11]!==Aa[11])}(t))return l5((yield e5(e)).KTX2File,t,e);const{BasisFile:n}=yield Q6(e);return o2(n,t,e)}if("encoder"===e.basis.module){const n=yield e5(e);return"ktx2"===e.basis.containerFormat?l5(n.KTX2File,t,e):o2(n.BasisFile,t,e)}{const{BasisFile:i}=yield Q6(e);return o2(i,t,e)}}),r2.apply(this,arguments)}function o2(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(uge(i,s,l,n));o.push(c)}return o}finally{i.close(),i.delete()}}function uge(t,e,n,i){const r=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=d5(i,s),d=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(d);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function l5(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(hge(i,s,n));break}return[o]}finally{i.close(),i.delete()}}function hge(t,e,n){const{alphaFlag:i,height:r,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=d5(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,levelSize:l,hasAlpha:i,format:a}}function d5(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=u5()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),lge[n]}function u5(){const t=function rge(t){if(!L1){t=t||function oge(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,L1=new Set;for(const e of ige)for(const n in t5)t&&t.getExtension("".concat(e).concat(n))&&L1.add(t5[n])}return L1}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const fge={name:"Basis",id:vl?"basis":"basis-nodejs",module:"textures",version:"3.4.11",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function dge(t,e){return r2.apply(this,arguments)}};function h5(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function Sa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function f5(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function My(t,e){return ld(t>=0),ld(e>0),t+(e-1)&~(e-1)}function gge(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+My(i.byteLength,4)}const m5=["SCALAR","VEC2","VEC3","VEC4"],_ge=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],bge=new Map(_ge),yge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vge={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},xge={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function g5(t){return m5[t-1]||m5[0]}function _5(t){const e=bge.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function s2(t,e){const n=xge[t.componentType],i=yge[t.type],o=t.count*i,s=t.count*i*vge[t.componentType];return Sa(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}const wge={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Ks{constructor(e){ve(this,"gltf",void 0),ve(this,"sourceBuffers",void 0),ve(this,"byteLength",void 0),this.gltf=e||{json:{...wge},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Sa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:o,length:s}=s2(e,n);return new o(r,n.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=wR(e),r=n||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Sa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=My(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:g5(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const o={size:n.size,componentType:_5(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=gge(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);n[o]=s}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const o of r)i.min.push(o),i.max.push(o);for(let o=n;o<e.length;o+=n)for(let s=0;s<n;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const Age="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Sge="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Cge=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Tge=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),b5={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Mge={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function d2(){return d2=Bt(function*(t,e,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=yield function V1(){return h2.apply(this,arguments)}();!function z1(t,e,n,i,r,o,s){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(t.exports.memory.buffer);h.set(o,d);const p=e(l,i,r,d,o.length);if(0===p&&s&&s(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}(s,s.exports[Mge[r]],t,e,n,i,s.exports[b5[o||"NONE"]])}),d2.apply(this,arguments)}let u2;function h2(){return h2=Bt(function*(){return u2||(u2=function Dge(){return f2.apply(this,arguments)}()),u2}),h2.apply(this,arguments)}function f2(){return f2=Bt(function*(){let t=Age;WebAssembly.validate(Cge)&&(t=Sge,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function Rge(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Tge[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),f2.apply(this,arguments)}const p2="EXT_meshopt_compression",Oge=p2;function kge(t,e){return m2.apply(this,arguments)}function m2(){return m2=Bt(function*(t,e){var n;const i=new Ks(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const o of t.json.bufferViews||[])r.push(Pge(i,o));yield Promise.all(r),i.removeExtension(p2)}),m2.apply(this,arguments)}function Pge(t,e){return g2.apply(this,arguments)}function g2(){return g2=Bt(function*(t,e){const n=t.getObjectExtension(e,p2);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=n,d=t.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),p=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function Ige(t,e,n,i,r){return d2.apply(this,arguments)}(p,s,o,h,a,c),p}return null}),g2.apply(this,arguments)}const b2={};function Fge(t){if(void 0===b2[t]){const e=w1?function Lge(t){switch(t){case"image/avif":case"image/webp":return function Uge(t){try{return 0===document.createElement("canvas").toDataURL(t).indexOf("data:".concat(t))}catch{return!1}}(t);default:return!0}}(t):function v5(t){const e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:i=e}=globalThis;return!!n&&i.includes(t)}(t);b2[t]=e}return b2[t]}const Zm="EXT_texture_webp",zge=Zm;function Hge(t,e){const n=new Ks(t);if(!Fge("image/webp")){if(n.getRequiredExtensions().includes(Zm))throw new Error("gltf: Required extension ".concat(Zm," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,Zm);o&&(r.source=o.source),n.removeObjectExtension(r,Zm)}n.removeExtension(Zm)}const H1="KHR_texture_basisu",Gge=H1;function Wge(t,e){const n=new Ks(t),{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,H1);o&&(r.source=o.source),n.removeObjectExtension(r,H1)}n.removeExtension(H1)}const w5={name:"Draco",id:vl?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.4.11",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class G1{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"nullable",void 0),ve(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new G1(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let E5,A5,S5,C5,T5,M5,I5,D5,lr=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});class sf{static isNull(e){return e&&e.typeId===lr.Null}static isInt(e){return e&&e.typeId===lr.Int}static isFloat(e){return e&&e.typeId===lr.Float}static isBinary(e){return e&&e.typeId===lr.Binary}static isUtf8(e){return e&&e.typeId===lr.Utf8}static isBool(e){return e&&e.typeId===lr.Bool}static isDecimal(e){return e&&e.typeId===lr.Decimal}static isDate(e){return e&&e.typeId===lr.Date}static isTime(e){return e&&e.typeId===lr.Time}static isTimestamp(e){return e&&e.typeId===lr.Timestamp}static isInterval(e){return e&&e.typeId===lr.Interval}static isList(e){return e&&e.typeId===lr.List}static isStruct(e){return e&&e.typeId===lr.Struct}static isUnion(e){return e&&e.typeId===lr.Union}static isFixedSizeBinary(e){return e&&e.typeId===lr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===lr.FixedSizeList}static isMap(e){return e&&e.typeId===lr.Map}static isDictionary(e){return e&&e.typeId===lr.Dictionary}get typeId(){return lr.NONE}compareTo(e){return this===e}}Symbol,Symbol,E5=Symbol.toStringTag;class Qm extends sf{constructor(e,n){super(),ve(this,"isSigned",void 0),ve(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return lr.Int}get[E5](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class $ge extends Qm{constructor(){super(!0,8)}}class Yge extends Qm{constructor(){super(!0,16)}}class Xge extends Qm{constructor(){super(!0,32)}}class Kge extends Qm{constructor(){super(!1,8)}}class qge extends Qm{constructor(){super(!1,16)}}class Jge extends Qm{constructor(){super(!1,32)}}A5=Symbol.toStringTag;class R5 extends sf{constructor(e){super(),ve(this,"precision",void 0),this.precision=e}get typeId(){return lr.Float}get[A5](){return"Float"}toString(){return"Float".concat(this.precision)}}class Zge extends R5{constructor(){super(32)}}class Qge extends R5{constructor(){super(64)}}Symbol,Symbol,S5=Symbol.toStringTag,C5=Symbol.toStringTag,T5=Symbol.toStringTag,M5=Symbol.toStringTag,I5=Symbol.toStringTag;class e_e extends sf{constructor(e,n){super(),ve(this,"listSize",void 0),ve(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return lr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[I5](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}D5=Symbol.toStringTag;class eg{constructor(e,n){ve(this,"fields",void 0),ve(this,"metadata",void 0),function r_e(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function o_e(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){const e=Object.create(null);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(const s of i)e[s]=!0;const o=this.fields.filter(s=>e[s.name]);return new eg(o,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.map(o=>this.fields[o]).filter(Boolean);return new eg(r,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof eg){const s=e;n=s.fields,i=k5(k5(new Map,this.metadata),s.metadata)}else n=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of n)r[s.name]=s;const o=Object.values(r);return new eg(o,i)}}function k5(t,e){return new Map([...t||new Map,...e||new Map])}function P5(t,e,n){return function O5(t,e,n){const i=function t_e(t){switch(t.constructor){case Int8Array:return new $ge;case Uint8Array:return new Kge;case Int16Array:return new Yge;case Uint16Array:return new qge;case Int32Array:return new Xge;case Uint32Array:return new Jge;case Float32Array:return new Zge;case Float64Array:return new Qge;default:throw new Error("array type not supported")}}(e.value),r=n||function i_e(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new G1(t,new e_e(e.size,new G1("value",i)),!1,r)}(t,e,n?N5(n.metadata):void 0)}function N5(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const F5={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},c_e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class d_e{constructor(e){ve(this,"draco",void 0),ve(this,"decoder",void 0),ve(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const p="DRACO decompression failed: ".concat(s.error_msg());throw new Error(p)}const a=this._getDracoLoaderData(o,r,n),c=this._getMeshData(o,a,n),l=L6(c.attributes),d=function s_e(t,e,n){const i=N5(e.metadata),r=[],o=function a_e(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in t){const c=P5(s,t[s],o[s]);r.push(c)}if(n){const s=P5("indices",n);r.push(s)}return new eg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,n);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,n);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(n,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function f_e(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=c_e[n.data_type],r=n.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function u_e(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[s,a]of Object.entries(n.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in F5)if(this.draco[s]===r)return F5[s];const o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function h_e(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const A2="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),g_e="".concat(A2,"/draco_decoder.js"),__e="".concat(A2,"/draco_wasm_wrapper.js"),b_e="".concat(A2,"/draco_decoder.wasm");let Iy;function S2(){return S2=Bt(function*(t){const e=t.modules||{};return Iy=e.draco3d?Iy||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):Iy||function x_e(t){return T2.apply(this,arguments)}(t),yield Iy}),S2.apply(this,arguments)}function T2(){return T2=Bt(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield rf(g_e,"draco",t):[e,n]=yield Promise.all([yield rf(__e,"draco",t),yield rf(b_e,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function w_e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),T2.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");const I2={...w5,parse:function A_e(t,e){return D2.apply(this,arguments)}};function D2(){return D2=Bt(function*(t,e){const{draco:n}=yield function v_e(t){return S2.apply(this,arguments)}(e),i=new d_e(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),D2.apply(this,arguments)}function L5(t){const{buffer:e,size:n,count:i}=function C_e(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function T_e(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:g5(n),componentType:_5(e)}}const af="KHR_draco_mesh_compression",M_e=af;function I_e(t,e,n){const i=new Ks(t);for(const r of B5(i))i.getObjectExtension(r,af)}function D_e(t,e,n){return R2.apply(this,arguments)}function R2(){return R2=Bt(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new Ks(t),o=[];for(const s of B5(r))r.getObjectExtension(s,af)&&o.push(O_e(r,s,e,n));yield Promise.all(o),r.removeExtension(af)}),R2.apply(this,arguments)}function R_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Ks(t);for(const i of n.json.meshes||[])k_e(i,e),n.addRequiredExtension(af)}function O_e(t,e,n,i){return O2.apply(this,arguments)}function O2(){return O2=Bt(function*(t,e,n,i){const r=t.getObjectExtension(e,af);if(!r)return;const o=t.getTypedArrayForBufferView(r.bufferView),s=uV(o.buffer,o.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(s,I2,c,i),d=function S_e(t){const e={};for(const n in t)if("indices"!==n){const r=L5(t[n]);e[n]=r}return e}(l.attributes);for(const[h,p]of Object.entries(d))if(h in e.attributes){const x=t.getAccessor(e.attributes[h]);null!=x&&x.min&&null!=x&&x.max&&(p.min=x.min,p.max=x.max)}e.attributes=d,l.indices&&(e.indices=L5(l.indices)),function P_e(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),O2.apply(this,arguments)}function k_e(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=r.DracoWriter.encodeSync({attributes:t}),a=null==o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:t}),c=r._addFauxAttributes(a.attributes),l=r.addBufferView(s);return{primitives:[{attributes:c,mode:i,extensions:{[af]:{bufferView:l,attributes:c}}}]}}function*B5(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}var j5=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2",t}(j5||{});const N_e=Object.freeze([1,0,0,0,1,0,0,0,1]);class $o extends y8{static get IDENTITY(){return function L_e(){return $1||($1=new $o,Object.freeze($1)),$1}()}static get ZERO(){return function F_e(){return W1||(W1=new $o([0,0,0,0,0,0,0,0,0]),Object.freeze(W1)),W1}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return j5}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(N_e)}fromObject(e){return this.check()}fromQuaternion(e){return function dme(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,_=r*a,x=r*c,P=o*s,F=o*a,X=o*c;t[0]=1-h-x,t[3]=d-X,t[6]=p+F,t[1]=d+X,t[4]=1-l-x,t[7]=_-P,t[2]=p-F,t[5]=_+P,t[8]=1-l-h}(this,e),this.check()}set(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function ame(t){var r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*o-s*c)+t[1]*(-l*r+s*a)+t[2]*(c*r-o*a)}(this)}transpose(){return function ome(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function sme(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,p=-d*o+a*c,_=l*o-s*c,x=n*h+i*p+r*_;x&&(t[0]=h*(x=1/x),t[1]=(-d*i+r*l)*x,t[2]=(a*i-r*s)*x,t[3]=p*x,t[4]=(d*n-r*c)*x,t[5]=(-a*n+r*o)*x,t[6]=_*x,t[7]=(-l*n+i*c)*x,t[8]=(s*n-i*o)*x)}(this,this),this.check()}multiplyLeft(e){return V6(this,e,this),this.check()}multiplyRight(e){return V6(this,this,e),this.check()}rotate(e){return function lme(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=Math.sin(n),_=Math.cos(n);t[0]=_*i+p*s,t[1]=_*r+p*a,t[2]=_*o+p*c,t[3]=_*s-p*i,t[4]=_*a-p*r,t[5]=_*c-p*o,t[6]=l,t[7]=d,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?z6(this,this,e):z6(this,this,[e,e]),this.check()}translate(e){return function cme(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],_=n[1];t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=p*i+_*s+l,t[7]=p*r+_*a+d,t[8]=p*o+_*c+h}(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=function Wce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:i=cU(n||[-0,-0,-0],e,this);break;case 4:i=uU(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return ty(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let W1,$1;const U5={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},V5={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},k2="KHR_texture_transform",B_e=k2,Y1=new nn,j_e=new $o,U_e=new $o;function V_e(t,e){return P2.apply(this,arguments)}function P2(){return P2=Bt(function*(t,e){if(!new Ks(t).getExtension(k2))return;const r=t.json.materials||[];for(let o=0;o<r.length;o++)z_e(o,t)}),P2.apply(this,arguments)}function z_e(t,e){var n,i,r;const o=[],s=null===(n=e.json.materials)||void 0===n?void 0:n[t],a=null==s||null===(i=s.pbrMetallicRoughness)||void 0===i?void 0:i.baseColorTexture;a&&Ry(e,t,a,o);const c=s?.emissiveTexture;c&&Ry(e,t,c,o);const l=s?.normalTexture;l&&Ry(e,t,l,o);const d=s?.occlusionTexture;d&&Ry(e,t,d,o);const h=null==s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.metallicRoughnessTexture;h&&Ry(e,t,h,o)}function Ry(t,e,n,i){const r=function H_e(t,e){var n;const i=null===(n=t.extensions)||void 0===n?void 0:n[k2],{texCoord:r=0}=t,{texCoord:o=r}=i;if(-1===e.findIndex(a=>{let[c,l]=a;return c===r&&l===o})){const a=function Y_e(t){const{offset:e=[0,0],rotation:n=0,scale:i=[1,1]}=t,r=(new $o).set(1,0,0,0,1,0,e[0],e[1],1),o=j_e.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=U_e.set(i[0],0,0,0,i[1],0,0,0,1);return r.multiplyRight(o).multiplyRight(s)}(i);return r!==o&&(t.texCoord=o),e.push([r,o]),{originalTexCoord:r,texCoord:o,matrix:a}}return null}(n,i);if(!r)return;const o=t.json.meshes||[];for(const s of o)for(const a of s.primitives){const c=a.material;Number.isFinite(c)&&e===c&&G_e(t,a,r)}}function G_e(t,e,n){const{originalTexCoord:i,texCoord:r,matrix:o}=n,s=e.attributes["TEXCOORD_".concat(i)];if(Number.isFinite(s)){var a;const l=null===(a=t.json.accessors)||void 0===a?void 0:a[s];if(l&&l.bufferView){var c;const d=null===(c=t.json.bufferViews)||void 0===c?void 0:c[l.bufferView];if(d){const{arrayBuffer:h,byteOffset:p}=t.buffers[d.buffer],_=(p||0)+(l.byteOffset||0)+(d.byteOffset||0),{ArrayType:x,length:P}=s2(l,d),X=U5[l.type],Q=d.byteStride||V5[l.componentType]*X,ye=new Float32Array(P);for(let Te=0;Te<l.count;Te++){const je=new x(h,_+Te*Q,2);Y1.set(je[0],je[1],1),Y1.transformByMatrix3(o),ye.set([Y1[0],Y1[1]],Te*X)}i===r?function W_e(t,e,n,i){t.componentType=5126,n.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=i.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(l,d,t.buffers,ye):function $_e(t,e,n,i,r){i.buffers.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength});const o=i.json.bufferViews;if(!o)return;o.push({buffer:i.buffers.length-1,byteLength:r.buffer.byteLength,byteOffset:0});const s=i.json.accessors;s&&(s.push({bufferView:o?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=s.length-1)}(r,l,e,t,ye)}}}}const cf="KHR_lights_punctual",X_e=cf;function K_e(t){return N2.apply(this,arguments)}function N2(){return N2=Bt(function*(t){const e=new Ks(t),{json:n}=e,i=e.getExtension(cf);i&&(e.json.lights=i.lights,e.removeExtension(cf));for(const r of n.nodes||[]){const o=e.getObjectExtension(r,cf);o&&(r.light=o.light),e.removeObjectExtension(r,cf)}}),N2.apply(this,arguments)}function q_e(t){return F2.apply(this,arguments)}function F2(){return F2=Bt(function*(t){const e=new Ks(t),{json:n}=e;if(n.lights){const i=e.addExtension(cf);Sa(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,cf,i);delete e.json.lights}}),F2.apply(this,arguments)}const Oy="KHR_materials_unlit",J_e=Oy;function Z_e(t){return L2.apply(this,arguments)}function L2(){return L2=Bt(function*(t){const e=new Ks(t),{json:n}=e;for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,Oy);e.removeExtension(Oy)}),L2.apply(this,arguments)}function Q_e(t){const e=new Ks(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,Oy,{}),e.addExtension(Oy))}const ky="KHR_techniques_webgl",ebe=ky;function tbe(t){return B2.apply(this,arguments)}function B2(){return B2=Bt(function*(t){const e=new Ks(t),{json:n}=e,i=e.getExtension(ky);if(i){const r=function ibe(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),n.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=n[s.program]}),r}(i,e);for(const o of n.materials||[]){const s=e.getObjectExtension(o,ky);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=rbe(o.technique,e)),e.removeObjectExtension(o,ky)}e.removeExtension(ky)}}),B2.apply(this,arguments)}function nbe(t,e){return j2.apply(this,arguments)}function j2(){return(j2=Bt(function*(t,e){})).apply(this,arguments)}function rbe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const z5="EXT_feature_metadata",obe=z5;function sbe(t){return U2.apply(this,arguments)}function U2(){return U2=Bt(function*(t){!function abe(t){var e;const n=t.getExtension(z5),i=null==n||null===(e=n.schema)||void 0===e?void 0:e.classes,r=n?.featureTables;if(n?.featureTextures&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),i&&r)for(const s in i){const a=i[s],c=dbe(r,s);c&&cbe(t,c,a)}}(new Ks(t))}),U2.apply(this,arguments)}function cbe(t,e,n){for(const r in n.properties){var i;const s=null==e||null===(i=e.properties)||void 0===i?void 0:i[r];if(s){const c=lbe(t,n.properties[r],e.count,s);s.data=c}}}function lbe(t,e,n,i){let o=t.getTypedArrayForBufferView(i.bufferView);if("STRING"===e.type)o=function ube(t,e,n){const i=[],r=new TextDecoder("utf8");let o=0;for(let a=0;a<n;a++){const c=e[4*(a+1)]-e[4*a],l=t.subarray(o,c+o),d=r.decode(l);i.push(d),o+=c}return i}(o,t.getTypedArrayForBufferView(i.stringOffsetBufferView),n);return o}function dbe(t,e){for(const n in t){const i=t[n];if(i.class===e)return i}return null}const H5=[E,b,D,A,g,y,M,k,j];function V2(){return V2=Bt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=H5.filter(o=>G5(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,t,e,n)}}),V2.apply(this,arguments)}function G5(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const z2="KHR_binary_glTF",W5={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},mbe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class gbe{constructor(){ve(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),ve(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function pbe(t){const e=new Ks(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,z2);r&&Object.assign(i,r),e.removeObjectExtension(i,z2)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(z2)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in W5)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[n].length;e[n].push(o),this.idToIndexMap[n][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const n in W5)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:o}=n;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,n){const i=mbe[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const o of e.materials){var n,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(n=o.values)||void 0===n?void 0:n.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const bbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ybe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},vbe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},xbe={10240:9729,10241:9986,10242:10497,10243:10497};class Abe{constructor(){ve(this,"baseUri",""),ve(this,"json",{}),ve(this,"buffers",[]),ve(this,"images",[])}postProcess(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Sa(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function wbe(t){return ybe[t]}(e.componentType),e.components=function Ebe(t){return bbe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=s2(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=n+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):xbe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return vbe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const $5=1735152710,H2=12,X1=8,Cbe=1313821514,Tbe=5130562,Mbe=0,Ibe=1,Dbe=0,tg=!0;function G2(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),s=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(s),My(i,4)}function W2(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),My(i,4)}function $2(){return $2=Bt(function*(t,e){var n,i,r,o;let a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;(function Bbe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function Obe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new DataView(t),{magic:r=$5}=n,o=i.getUint32(e,!1);return o===r||o===$5}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function mge(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function pge(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?h5(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?h5(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};n=function kbe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=new DataView(e),o=function Rbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),s=r.getUint32(n+4,tg),a=r.getUint32(n+8,tg);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=H2,t.version){case 1:return function Pbe(t,e,n){ld(t.header.byteLength>H2+X1);const i=e.getUint32(n+0,tg),r=e.getUint32(n+4,tg);return n+=X1,ld(r===Dbe),G2(t,e,n,i),(n+=i)+W2(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function Nbe(t,e,n,i){return ld(t.header.byteLength>H2+X1),function Fbe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,tg),o=e.getUint32(n+4,tg);switch(n+=X1,o){case Cbe:G2(t,e,n,r);break;case Tbe:W2(t,e,n,r);break;case Mbe:i.strict||G2(t,e,n,r);break;case Ibe:i.strict||W2(t,e,n,r)}n+=My(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,i={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(s,e,n,i.glb),Sa("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),t._glb=s,t.json=s.json}else Sa(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a),function _be(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new gbe).normalize(t,e)}(t,{normalize:null==a||null===(n=a.gltf)||void 0===n?void 0:n.normalize}),function hbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=H5.filter(o=>G5(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,t,e,n)}}(t,a,c);const l=[];if(null!=a&&null!==(i=a.gltf)&&void 0!==i&&i.loadBuffers&&t.json.buffers&&(yield function jbe(t,e,n){return Y2.apply(this,arguments)}(t,a,c)),null!=a&&null!==(r=a.gltf)&&void 0!==r&&r.loadImages){const h=function Ube(t,e,n){return X2.apply(this,arguments)}(t,a,c);l.push(h)}const d=function fbe(t){return V2.apply(this,arguments)}(t,a,c);return l.push(d),yield Promise.all(l),null!=a&&null!==(o=a.gltf)&&void 0!==o&&o.postProcess?function Sbe(t,e){return(new Abe).postProcess(t,e)}(t,a):t}),$2.apply(this,arguments)}function Y2(){return Y2=Bt(function*(t,e,n){const i=t.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=n;Sa(c);const l=f5(a.uri,e),d=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);t.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[s]&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),Y2.apply(this,arguments)}function X2(){return X2=Bt(function*(t,e,n){const i=function Vbe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],o=[];for(const s of i)o.push(zbe(t,r[s],s,e,n));return yield Promise.all(o)}),X2.apply(this,arguments)}function zbe(t,e,n,i,r){return K2.apply(this,arguments)}function K2(){return K2=Bt(function*(t,e,n,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=f5(e.uri,i);a=yield(yield o(l)).arrayBuffer(),e.bufferView={data:a}}if(Number.isFinite(e.bufferView)){const l=function p5(t,e,n){const i=t.bufferViews[n];Sa(i);const o=e[i.buffer];return Sa(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=uV(l.buffer,l.byteOffset,l.byteLength)}Sa(a,"glTF image has no data");let c=yield s(a,[YV,fge],{mimeType:e.mimeType,basis:i.basis||{format:u5()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),K2.apply(this,arguments)}const ng={name:"glTF",id:"gltf",module:"gltf",version:"3.4.11",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function Hbe(t){return q2.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function q2(){return q2=Bt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={...ng.options,...e},e.gltf={...ng.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function Lbe(t,e){return $2.apply(this,arguments)}({},t,i,e,n)}),q2.apply(this,arguments)}function J2(){return J2=Bt(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Wbe(t){return Z2.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),J2.apply(this,arguments)}function Z2(){return Z2=Bt(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),Z2.apply(this,arguments)}const Y5=[255,255,255,255],Xbe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Y5},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[ng]};class Q2 extends ef{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=[R1,O1];return"pbr"===this.props._lighting&&e.push(U6),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:Y5,transition:!0},instanceModelMatrix:N6})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof qm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function Gme(t,e,n){const i=new Hme(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function Gbe(t){return J2.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(bi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof qm?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&bi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):bi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):bi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof qm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!hi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:p})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:F6(r,l),sceneModelMatrix:p,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}ve(Q2,"defaultProps",Xbe),ve(Q2,"layerName","ScenegraphLayer");class Kbe extends ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=$s("sphere-geometry")}=e,{indices:i,attributes:r}=function qbe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(n+1);if("number"==typeof i){const X=i;i=(Q,ye,Te,je,Ze)=>X}const h=new Float32Array(3*d),p=new Float32Array(3*d),_=new Float32Array(2*d),P=new(d>65535?Uint32Array:Uint16Array)(e*n*6);for(let X=0;X<=e;X++)for(let Q=0;Q<=n;Q++){const ye=Q/n,Te=X/e,je=Q+X*(n+1),Ze=2*je,at=3*je,mt=l*ye,pt=s*Te,gt=Math.sin(mt),yt=Math.cos(mt),It=Math.sin(pt),vt=yt*It,kt=Math.cos(pt),Dt=gt*It,En=i(vt,kt,Dt,ye,Te);h[at+0]=En*vt,h[at+1]=En*kt,h[at+2]=En*Dt,p[at+0]=vt,p[at+1]=kt,p[at+2]=Dt,_[Ze+0]=ye,_[Ze+1]=1-Te}const F=n+1;for(let X=0;X<n;X++)for(let Q=0;Q<e;Q++){const ye=6*(X*e+Q);P[ye+0]=Q*F+X,P[ye+1]=Q*F+X+1,P[ye+2]=(Q+1)*F+X,P[ye+3]=(Q+1)*F+X,P[ye+4]=Q*F+X+1,P[ye+5]=(Q+1)*F+X+1}return{indices:{size:1,value:P},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:_}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const Jbe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class X5 extends ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=$s("truncated-code-geometry")}=e,{indices:i,attributes:r}=function Zbe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-n,i),p=Math.sin,_=Math.cos,x=Math.PI,P=_(h),F=p(h),X=a?-2:0,Q=o+(c?2:0),ye=r+1,Te=new Uint16Array(r*(o+l)*6),je=Jbe[s],Ze=new Float32Array(3*d),at=new Float32Array(3*d),mt=new Float32Array(2*d);let pt=0,gt=0;for(let yt=X;yt<=Q;yt++){let vt,It=yt/o,ft=i*It;yt<0?(ft=0,It=1,vt=e):yt>o?(ft=i,It=1,vt=n):vt=e+yt/o*(n-e),(-2===yt||yt===o+2)&&(vt=0,It=0),ft-=i/2;for(let kt=0;kt<ye;kt++){const Dt=p(kt*x*2/r),En=_(kt*x*2/r);Ze[pt+je[0]]=Dt*vt,Ze[pt+je[1]]=ft,Ze[pt+je[2]]=En*vt,at[pt+je[0]]=yt<0||yt>o?0:Dt*P,at[pt+je[1]]=yt<0?-1:yt>o?1:F,at[pt+je[2]]=yt<0||yt>o?0:En*P,mt[gt+0]=kt/r,mt[gt+1]=It,gt+=2,pt+=3}}for(let yt=0;yt<o+l;yt++)for(let It=0;It<r;It++){const ft=6*(yt*r+It);Te[ft+0]=ye*(yt+0)+0+It,Te[ft+1]=ye*(yt+0)+1+It,Te[ft+2]=ye*(yt+1)+1+It,Te[ft+3]=ye*(yt+0)+0+It,Te[ft+4]=ye*(yt+1)+1+It,Te[ft+5]=ye*(yt+1)+0+It}return{indices:Te,attributes:{POSITION:{size:3,value:Ze},NORMAL:{size:3,value:at},TEXCOORD_0:{size:2,value:mt}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class Qbe extends X5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=$s("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class eye extends X5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=$s("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const tye=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),nye=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),iye=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),rye=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),oye={POSITION:{size:3,value:new Float32Array(nye)},NORMAL:{size:3,value:new Float32Array(iye)},TEXCOORD_0:{size:2,value:new Float32Array(rye)}};class sye extends ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=$s("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(tye)},attributes:{...oye,...e.attributes}})}}class Rc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new be);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new be);const i=this.elements,r=e.x,o=e.y,s=e.z;return n.x=i[0]*r+i[1]*o+i[2]*s,n.y=i[3]*r+i[4]*o+i[5]*s,n.z=i[6]*r+i[7]*o+i[8]*s,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new Rc);const i=this.elements,r=e.elements,o=n.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],p=i[6],_=i[7],x=i[8],P=r[0],F=r[1],X=r[2],Q=r[3],ye=r[4],Te=r[5],je=r[6],Ze=r[7],at=r[8];return o[0]=s*P+a*Q+c*je,o[1]=s*F+a*ye+c*Ze,o[2]=s*X+a*Te+c*at,o[3]=l*P+d*Q+h*je,o[4]=l*F+d*ye+h*Ze,o[5]=l*X+d*Te+h*at,o[6]=p*P+_*Q+x*je,o[7]=p*F+_*ye+x*Ze,o[8]=p*X+_*Te+x*at,n}scale(e,n){void 0===n&&(n=new Rc);const i=this.elements,r=n.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return n}solve(e,n){void 0===n&&(n=new be);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,p;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{p=4-d,o[p+4*s]+=o[p+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const _=o[s+4*a]/o[s+4*s];d=4;do{p=4-d,o[p+4*a]=p<=s?0:o[p+4*a]-o[p+4*s]*_}while(--d)}}while(--c);if(n.z=o[11]/o[10],n.y=(o[7]-o[6]*n.z)/o[5],n.x=(o[3]-o[2]*n.z-o[1]*n.y)/o[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Rc);const r=aye;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*p}while(--l)}}while(--a);o=2;do{s=o-1;do{const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*p}while(--l)}while(s--)}while(--o);o=2;do{const p=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*p}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,o=e.w,s=n+n,a=i+i,c=r+r,l=n*s,d=n*a,h=n*c,p=i*a,_=i*c,x=r*c,P=o*s,F=o*a,X=o*c,Q=this.elements;return Q[0]=1-(p+x),Q[1]=d-X,Q[2]=h+F,Q[3]=d+X,Q[4]=1-(l+x),Q[5]=_-P,Q[6]=h-F,Q[7]=_+P,Q[8]=1-(l+p),this}transpose(e){void 0===e&&(e=new Rc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const aye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class be{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new be);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return n.x=a*o-c*r,n.y=c*i-s*o,n.z=s*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new be(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new be(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new Rc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new be);const n=this.x,i=this.y,r=this.z;let o=Math.sqrt(n*n+i*i+r*r);return o>0?(o=1/o,e.x=n*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new be);const r=this.y,o=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*o,n}vmul(e,n){return void 0===n&&(n=new be),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new be),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new be),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=cye,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=lye;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*n,i.y=o+(e.y-o)*n,i.z=s+(e.z-s)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(K5),K5.almostEquals(e,n)}clone(){return new be(this.x,this.y,this.z)}}be.ZERO=new be(0,0,0),be.UNIT_X=new be(1,0,0),be.UNIT_Y=new be(0,1,0),be.UNIT_Z=new be(0,0,1);const cye=new be,lye=new be,K5=new be;class nr{constructor(e){void 0===e&&(e={}),this.lowerBound=new be,this.upperBound=new be,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,q5),l=q5),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return n&&(n.vadd(o,o),n.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new nr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||n.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||n.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||n.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return n.x<=r.x&&i.x>=o.x&&n.y<=r.y&&i.y>=o.y&&n.z<=r.z&&i.z>=o.z}getCorners(e,n,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),n.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,n){const i=J5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const _=i[p];e.pointToLocal(_,_)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=J5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const _=i[p];e.pointToWorld(_,_)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,o=1/n.y,s=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,p=(this.upperBound.z-i.z)*s,_=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,p)),x=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,p));return!(x<0||_>x)}}const q5=new be,J5=[new be,new be,new be,new be,new be,new be,new be,new be];class dye{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class Br{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new be),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=uye;e.tangents(i,hye),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Br);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return n.x=i*d+s*a+r*l-o*c,n.y=r*d+s*c+o*a-i*l,n.z=o*d+s*l+i*c-r*a,n.w=s*d-i*a-r*c-o*l,n}inverse(e){void 0===e&&(e=new Br);const n=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(n*n+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new Br),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new be);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,_=-s*i-a*r-c*o;return n.x=d*l+_*-s+h*-c-p*-a,n.y=h*l+_*-a+p*-s-d*-c,n.z=p*l+_*-c+d*-a-h*-s,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,o;void 0===n&&(n="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,_=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*_),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*_)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new Br(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Br);const r=this.x,o=this.y,s=this.z,a=this.w;let p,_,x,P,F,c=e.x,l=e.y,d=e.z,h=e.w;return _=r*c+o*l+s*d+a*h,_<0&&(_=-_,c=-c,l=-l,d=-d,h=-h),1-_>1e-6?(p=Math.acos(_),x=Math.sin(p),P=Math.sin((1-n)*p)/x,F=Math.sin(n*p)/x):(P=1-n,F=n),i.x=P*r+F*c,i.y=P*o+F*l,i.z=P*s+F*d,i.w=P*a+F*h,i}integrate(e,n,i,r){void 0===r&&(r=new Br);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,p=.5*n;return r.x+=p*(o*h+s*d-a*l),r.y+=p*(s*h+a*c-o*d),r.z+=p*(a*h+o*l-s*c),r.w+=p*(-o*c-s*l-a*d),r}}const uye=new be,hye=new be,fye={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let un=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=fye,t})();class Mi{constructor(e){void 0===e&&(e={}),this.position=new be,this.quaternion=new Br,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Mi.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Mi.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new be),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new be),i.vsub(e,r),n.conjugate(Q5),Q5.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new be),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new be),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new be),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const Q5=new Br;class lf extends un{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:un.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new be;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){n[s[c]].vsub(n[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new be;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];lf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const o=new be,s=new be;n.vsub(e,s),i.vsub(n,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,o,s,a,c,l){const d=new be;let h=-1,p=-Number.MAX_VALUE;for(let x=0;x<i.faces.length;x++){d.copy(i.faceNormals[x]),o.vmult(d,d);const P=d.dot(s);P>p&&(p=P,h=x)}const _=[];for(let x=0;x<i.faces[h].length;x++){const P=i.vertices[i.faces[h][x]],F=new be;F.copy(P),o.vmult(F,F),r.vadd(F,F),_.push(F)}h>=0&&this.clipFaceAgainstHull(s,e,n,_,a,c,l)}findSeparatingAxis(e,n,i,r,o,s,a,c){const l=new be,d=new be,h=new be,p=new be,_=new be,x=new be;let P=Number.MAX_VALUE;const F=this;if(F.uniqueAxes)for(let X=0;X!==F.uniqueAxes.length;X++){i.vmult(F.uniqueAxes[X],l);const Q=F.testSepAxis(l,e,n,i,r,o);if(!1===Q)return!1;Q<P&&(P=Q,s.copy(l))}else{const X=a?a.length:F.faces.length;for(let Q=0;Q<X;Q++){l.copy(F.faceNormals[a?a[Q]:Q]),i.vmult(l,l);const Te=F.testSepAxis(l,e,n,i,r,o);if(!1===Te)return!1;Te<P&&(P=Te,s.copy(l))}}if(e.uniqueAxes)for(let X=0;X!==e.uniqueAxes.length;X++){o.vmult(e.uniqueAxes[X],d);const Q=F.testSepAxis(d,e,n,i,r,o);if(!1===Q)return!1;Q<P&&(P=Q,s.copy(d))}else{const X=c?c.length:e.faces.length;for(let Q=0;Q<X;Q++){d.copy(e.faceNormals[c?c[Q]:Q]),o.vmult(d,d);const Te=F.testSepAxis(d,e,n,i,r,o);if(!1===Te)return!1;Te<P&&(P=Te,s.copy(d))}}for(let X=0;X!==F.uniqueEdges.length;X++){i.vmult(F.uniqueEdges[X],p);for(let Q=0;Q!==e.uniqueEdges.length;Q++)if(o.vmult(e.uniqueEdges[Q],_),p.cross(_,x),!x.almostZero()){x.normalize();const ye=F.testSepAxis(x,e,n,i,r,o);if(!1===ye)return!1;ye<P&&(P=ye,s.copy(x))}}return r.vsub(n,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,n,i,r,o,s){lf.project(this,e,i,r,eO),lf.project(n,e,o,s,tO);const c=eO[0],l=eO[1],d=tO[0],h=tO[1];if(c<h||d<l)return!1;const p=c-h,_=d-l;return p<_?p:_}calculateLocalInertia(e,n){const i=new be,r=new be;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*s*2*s+2*a*2*a),n.y=1/12*e*(2*o*2*o+2*a*2*a),n.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,o,s,a){const c=new be,l=new be,d=new be,h=new be,p=new be,_=new be,x=new be,P=new be,F=this,Q=r,ye=[];let Te=-1,je=Number.MAX_VALUE;for(let gt=0;gt<F.faces.length;gt++){c.copy(F.faceNormals[gt]),i.vmult(c,c);const yt=c.dot(e);yt<je&&(je=yt,Te=gt)}if(Te<0)return;const Ze=F.faces[Te];Ze.connectedFaces=[];for(let gt=0;gt<F.faces.length;gt++)for(let yt=0;yt<F.faces[gt].length;yt++)-1!==Ze.indexOf(F.faces[gt][yt])&&gt!==Te&&-1===Ze.connectedFaces.indexOf(gt)&&Ze.connectedFaces.push(gt);const at=Ze.length;for(let gt=0;gt<at;gt++){const yt=F.vertices[Ze[gt]];yt.vsub(F.vertices[Ze[(gt+1)%at]],l),d.copy(l),i.vmult(d,d),n.vadd(d,d),h.copy(this.faceNormals[Te]),i.vmult(h,h),n.vadd(h,h),d.cross(h,p),p.negate(p),_.copy(yt),i.vmult(_,_),n.vadd(_,_);const ft=Ze.connectedFaces[gt];x.copy(this.faceNormals[ft]);const vt=this.getPlaneConstantOfFace(ft);P.copy(x),i.vmult(P,P);const kt=vt-P.dot(n);for(this.clipFaceAgainstPlane(Q,ye,P,kt);Q.length;)Q.shift();for(;ye.length;)Q.push(ye.shift())}x.copy(this.faceNormals[Te]);const mt=this.getPlaneConstantOfFace(Te);P.copy(x),i.vmult(P,P);const pt=mt-P.dot(n);for(let gt=0;gt<Q.length;gt++){let yt=P.dot(Q[gt])+pt;yt<=o&&(console.log(`clamped: depth=${yt} to minDist=${o}`),yt=o),yt<=s&&yt<=1e-6&&a.push({point:Q[gt],normal:P,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let o,s;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new be;h.copy(l),n.push(h)}else{const h=new be;c.lerp(l,o/(o-s),h),n.push(h)}else if(s<0){const h=new be;c.lerp(l,o/(o-s),h),n.push(h),n.push(l)}c=l,o=s}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new be);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)n.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>n.x&&(n.x=o.x),o.y<e.y?e.y=o.y:o.y>n.y&&(n.y=o.y),o.z<e.z?e.z=o.z:o.z>n.z&&(n.z=o.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new be);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==n;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const o=this.vertices;let s,a,c,l,d,h,p=new be;for(let _=0;_<o.length;_++)p.copy(o[_]),n.vmult(p,p),e.vadd(p,p),(void 0===s||p.x<s)&&(s=p.x),(void 0===l||p.x>l)&&(l=p.x),(void 0===a||p.y<a)&&(a=p.y),(void 0===d||p.y>d)&&(d=p.y),(void 0===c||p.z<c)&&(c=p.z),(void 0===h||p.z>h)&&(h=p.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new be);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let o=0;o<i;o++){const s=r[o];n.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];n.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,s=new be;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],d=new be;e.vsub(l,d);const h=c.dot(d),p=new be;s.vsub(l,p);const _=c.dot(p);if(h<0&&_>0||h>0&&_<0)return!1}return-1}static project(e,n,i,r,o){const s=e.vertices.length,a=mye;let c=0,l=0;const d=gye,h=e.vertices;d.setZero(),Mi.vectorToLocalFrame(i,r,n,a),Mi.pointToLocalFrame(i,r,d,d);const p=d.dot(a);l=c=h[0].dot(a);for(let _=1;_<s;_++){const x=h[_].dot(a);x>c&&(c=x),x<l&&(l=x)}if(l-=p,c-=p,l>c){const _=l;l=c,c=_}o[0]=c,o[1]=l}}const eO=[],tO=[],mye=(new be,new be),gye=new be;class K1 extends un{constructor(e){super({type:un.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=be,o=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new lf({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new be),K1.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let o=0;o!==i.length;o++)n.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)Nu.set(o[s][0],o[s][1],o[s][2]),n.vmult(Nu,Nu),e.vadd(Nu,Nu),i(Nu.x,Nu.y,Nu.z)}calculateWorldAABB(e,n,i,r){const o=this.halfExtents;Al[0].set(o.x,o.y,o.z),Al[1].set(-o.x,o.y,o.z),Al[2].set(-o.x,-o.y,o.z),Al[3].set(-o.x,-o.y,-o.z),Al[4].set(o.x,-o.y,-o.z),Al[5].set(o.x,o.y,-o.z),Al[6].set(-o.x,o.y,-o.z),Al[7].set(o.x,-o.y,o.z);const s=Al[0];n.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=Al[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const Nu=new be,Al=[new be,new be,new be,new be,new be,new be,new be,new be];class hn extends dye{constructor(e){void 0===e&&(e={}),super(),this.id=hn.idCounter++,this.index=-1,this.world=null,this.vlambda=new be,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new be,this.previousPosition=new be,this.interpolatedPosition=new be,this.initPosition=new be,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new be,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new be,this.force=new be;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?hn.STATIC:hn.DYNAMIC,typeof e.type==typeof hn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=hn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new be,this.quaternion=new Br,this.initQuaternion=new Br,this.previousQuaternion=new Br,this.interpolatedQuaternion=new Br,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new be,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new be,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new be,this.invInertia=new be,this.invInertiaWorld=new Rc,this.invMassSolve=0,this.invInertiaSolve=new be,this.invInertiaWorldSolve=new Rc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new be(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new be(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new nr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new be,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=hn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===hn.SLEEPING&&this.dispatchEvent(hn.wakeupEvent)}sleep(){this.sleepState=hn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===hn.AWAKE&&i<r?(this.sleepState=hn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(hn.sleepyEvent)):n===hn.SLEEPY&&i>r?this.wakeUp():n===hn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(hn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===hn.SLEEPING||this.type===hn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new be),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new be),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new be),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new be),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new be,o=new Br;return n&&r.copy(n),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=n[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=_ye,s=bye,a=this.quaternion,c=this.aabb,l=yye;for(let d=0;d!==r;d++){const h=e[d];a.vmult(n[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=vye,r=xye;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=Eye;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;const i=Aye,r=Sye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===hn.DYNAMIC&&(this.sleepState===hn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=n,r=Cye;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=Tye;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;const i=Mye,r=Iye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Dye;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),K1.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new be;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==hn.DYNAMIC&&this.type!==hn.KINEMATIC||this.sleepState===hn.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,_=this.invMass*e;r.x+=a.x*_*p.x,r.y+=a.y*_*p.y,r.z+=a.z*_*p.z;const x=h.elements,P=this.angularFactor,F=c.x*P.x,X=c.y*P.y,Q=c.z*P.z;o.x+=e*(x[0]*F+x[1]*X+x[2]*Q),o.y+=e*(x[3]*F+x[4]*X+x[5]*Q),o.z+=e*(x[6]*F+x[7]*X+x[8]*Q),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}hn.idCounter=0,hn.COLLIDE_EVENT_NAME="collide",hn.DYNAMIC=1,hn.STATIC=2,hn.KINEMATIC=4,hn.AWAKE=0,hn.SLEEPY=1,hn.SLEEPING=2,hn.wakeupEvent={type:"wakeup"},hn.sleepyEvent={type:"sleepy"},hn.sleepEvent={type:"sleep"};const _ye=new be,bye=new Br,yye=new nr,vye=new Rc,xye=new Rc,Eye=(new Rc,new be),Aye=new be,Sye=new be,Cye=new be,Tye=new be,Mye=new be,Iye=new be,Dye=new be;new be,new be,new Br,new be,new be,new be,new be;class Py{constructor(){this.rayFromWorld=new be,this.rayToWorld=new be,this.hitNormalWorld=new be,this.hitPointWorld=new be,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let ez,tz,nz,iz,rz,oz,sz;ez=un.types.SPHERE,tz=un.types.PLANE,nz=un.types.BOX,iz=un.types.CYLINDER,rz=un.types.CONVEXPOLYHEDRON,oz=un.types.HEIGHTFIELD,sz=un.types.TRIMESH;class Qr{get[ez](){return this._intersectSphere}get[tz](){return this._intersectPlane}get[nz](){return this._intersectBox}get[iz](){return this._intersectConvex}get[rz](){return this._intersectConvex}get[oz](){return this._intersectHeightfield}get[sz](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new be),void 0===n&&(n=new be),this.from=e.clone(),this.to=n.clone(),this.direction=new be,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Qr.ANY,this.result=new Py,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||Qr.ANY,this.result=n.result||new Py,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(az),oO.length=0,e.broadphase.aabbQuery(e,az,oO),this.intersectBodies(oO),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=Lye,o=Bye;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function e0e(t,e,n){n.vsub(t,df);const i=df.dot(e);return e.scale(i,J1),J1.vadd(t,J1),n.distanceTo(J1)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,o)}_intersectPlane(e,n,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new be(0,0,1);n.vmult(l,l);const d=new be;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const _=l.dot(c);if(Math.abs(_)<this.precision)return;const x=new be,P=new be,F=new be;s.vsub(i,x);const X=-l.dot(x)/_;c.scale(X,P),s.vadd(P,F),this.reportIntersection(l,F,o,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,o=this.from;n.x=Math.min(r.x,o.x),n.y=Math.min(r.y,o.y),n.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,n,i,r,o){const s=jye;s.from.copy(this.from),s.to.copy(this.to),Mi.pointToLocalFrame(i,n,s.from,s.from),Mi.pointToLocalFrame(i,n,s.to,s.to),s.updateDirection();const a=Uye;let c,l,d,h;c=l=0,d=h=e.data.length-1;const p=new nr;s.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let _=c;_<d;_++)for(let x=l;x<h;x++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(_,x,p),p.overlapsRay(s)){if(e.getConvexTrianglePillar(_,x,!1),Mi.pointToWorldFrame(i,n,e.pillarOffset,q1),this._intersectConvex(e.pillarConvex,n,q1,r,o,cz),this.result.shouldStop)return;e.getConvexTrianglePillar(_,x,!0),Mi.pointToWorldFrame(i,n,e.pillarOffset,q1),this._intersectConvex(e.pillarConvex,n,q1,r,o,cz)}}}_intersectSphere(e,n,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),p=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),_=Vye,x=zye;if(!(p<0))if(0===p)s.lerp(a,p,_),_.vsub(i,x),x.normalize(),this.reportIntersection(x,_,o,r,-1);else{const P=(-d-Math.sqrt(p))/(2*l),F=(-d+Math.sqrt(p))/(2*l);if(P>=0&&P<=1&&(s.lerp(a,P,_),_.vsub(i,x),x.normalize(),this.reportIntersection(x,_,o,r,-1)),this.result.shouldStop)return;F>=0&&F<=1&&(s.lerp(a,F,_),_.vsub(i,x),x.normalize(),this.reportIntersection(x,_,o,r,-1))}}_intersectConvex(e,n,i,r,o,s){const a=Hye,c=lz,l=s&&s.faceList||null,d=e.faces,h=e.vertices,p=e.faceNormals,_=this.direction,x=this.from,F=x.distanceTo(this.to),X=l?l.length:d.length,Q=this.result;for(let ye=0;!Q.shouldStop&&ye<X;ye++){const Te=l?l[ye]:ye,je=d[Te],Ze=p[Te],at=n,mt=i;c.copy(h[je[0]]),at.vmult(c,c),c.vadd(mt,c),c.vsub(x,c),at.vmult(Ze,a);const pt=_.dot(a);if(Math.abs(pt)<this.precision)continue;const gt=a.dot(c)/pt;if(!(gt<0)){_.scale(gt,qs),qs.vadd(x,qs),Oc.copy(h[je[0]]),at.vmult(Oc,Oc),mt.vadd(Oc,Oc);for(let yt=1;!Q.shouldStop&&yt<je.length-1;yt++){Sl.copy(h[je[yt]]),Cl.copy(h[je[yt+1]]),at.vmult(Sl,Sl),at.vmult(Cl,Cl),mt.vadd(Sl,Sl),mt.vadd(Cl,Cl);const It=qs.distanceTo(x);!Qr.pointInTriangle(qs,Oc,Sl,Cl)&&!Qr.pointInTriangle(qs,Sl,Oc,Cl)||It>F||this.reportIntersection(a,qs,o,r,Te)}}}}_intersectTrimesh(e,n,i,r,o,s){const a=$ye,c=Zye,l=Qye,d=lz,h=Yye,p=Xye,_=Kye,x=Jye,P=qye,F=e.indices,X=this.from,Q=this.to,ye=this.direction;l.position.copy(i),l.quaternion.copy(n),Mi.vectorToLocalFrame(i,n,ye,h),Mi.pointToLocalFrame(i,n,X,p),Mi.pointToLocalFrame(i,n,Q,_),_.x*=e.scale.x,_.y*=e.scale.y,_.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,_.vsub(p,h),h.normalize();const Te=p.distanceSquared(_);e.tree.rayQuery(this,l,c);for(let je=0,Ze=c.length;!this.result.shouldStop&&je!==Ze;je++){const at=c[je];e.getNormal(at,a),e.getVertex(F[3*at],Oc),Oc.vsub(p,d);const mt=h.dot(a),pt=a.dot(d)/mt;if(pt<0)continue;h.scale(pt,qs),qs.vadd(p,qs),e.getVertex(F[3*at+1],Sl),e.getVertex(F[3*at+2],Cl);const gt=qs.distanceSquared(p);!Qr.pointInTriangle(qs,Sl,Oc,Cl)&&!Qr.pointInTriangle(qs,Oc,Sl,Cl)||gt>Te||(Mi.vectorToWorldFrame(n,a,P),Mi.pointToWorldFrame(i,n,qs,x),this.reportIntersection(P,x,o,r,at))}c.length=0}reportIntersection(e,n,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case Qr.ALL:this.hasHit=!0,l.set(s,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case Qr.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c));break;case Qr.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,df),i.vsub(n,Ny),e.vsub(n,sO);const o=df.dot(df),s=df.dot(Ny),a=df.dot(sO),c=Ny.dot(Ny),l=Ny.dot(sO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}Qr.CLOSEST=1,Qr.ANY=2,Qr.ALL=4;const az=new nr,oO=[],Ny=new be,sO=new be,Lye=new be,Bye=new Br,qs=new be,Oc=new be,Sl=new be,Cl=new be;new be,new Py;const cz={faceList:[0]},q1=new be,jye=new Qr,Uye=[],Vye=new be,zye=new be,Hye=new be,lz=(new be,new be,new be),$ye=new be,Yye=new be,Xye=new be,Kye=new be,qye=new be,Jye=new be;new nr;const Zye=[],Qye=new Mi,df=new be,J1=new be;new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new Qr,new be,new be,new be,new be(1,0,0),new be(0,1,0),new be(0,0,1),new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new nr,new be,new nr,new be,new be,new be,new be,new be,new be,new be,new nr,new be,new Mi,new nr,new be,new be,new be,new be,new be,new Br,new Br,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new nr,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new Br,new be,new be,new be,new be,new be,new be,new be,new be,new be,new nr,new Qr;const uo=globalThis.performance||{};if(!uo.now){let t=Date.now();uo.timing&&uo.timing.navigationStart&&(t=uo.timing.navigationStart),uo.now=()=>Date.now()-t}new be;var pf=m(1979);function sg(t,e,n){e||(e=new Hn(Hn.IDENTITY));const i=new Hn(Hn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const o=new Hn(Hn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(o)}t.scale&&i.scale(t.scale)}const r=new Hn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const o of t.nodes||t.children||[])if(!1===sg(o,r,n))return!1;return!0}function Nz(){_V([w5,ng])}function Fz(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||sg(r,new Hn(Hn.IDENTITY),(o,s)=>o!==n||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function dO(t,e){return uO.apply(this,arguments)}function uO(){return uO=Bt(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(o=>o.blob())):fetch(n);const r=yield A1(i,ng,{DracoLoader:I2,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),Fz(t.scenegraphNode,r)}),uO.apply(this,arguments)}function rwe(t,e){return hO.apply(this,arguments)}function hO(){return hO=Bt(function*(t,e){return Fz(t,yield e)}),hO.apply(this,arguments)}function fO(){return fO=Bt(function*(t){console.log("Starting Collisioning");const e=t.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new Hn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new nr({lowerBound:new be(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new be(...l.map((d,h)=>Math.max(d,c[h])))})}}),n=[];for(const s of t.filter(a=>!!a.scenegraph)){const a=yield yy(s.scenegraph,ng,{DracoLoader:I2,decompress:!0,postProcess:!0});for(const c of a.scenes)sg(c,new Hn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=d.transformAsPoint(h.attributes.POSITION.min,[]),_=d.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new nr({lowerBound:new be(...p.map((x,P)=>Math.min(x,_[P]))),upperBound:new be(..._.map((x,P)=>Math.max(x,p[P])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of n)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),fO.apply(this,arguments)}function pO(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new Kbe;break;case"cone":i=new Qbe;break;case"cylinder":i=new eye;break;default:i=new sye}return new VR({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Ci.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function Lz(t,e,n){if(e&&0!==e.length)return new LR({id:t,pickable:!0,data:e.map(i=>({...i,position:new Hn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}let swe=(()=>{var t;class e extends oR{initializeState(){const{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),Nz()}renderLayers(){const i=this.state,r={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const a of i.data){const c=a.geometry??"cube";a.scenegraph?r.scenegraph.push(a):void 0!==r[c]&&r[c].push(a)}const o={};for(const a of r.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,a.scenegraph)&&(o[a.scenegraph]=dO({scenegraph:a.scenegraph},e.gltfCache));const s=[];for(const[a,c]of Object.entries(r))if("scenegraph"===a)for(const l of c)s.push(new Q2({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?i.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:Ci.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?rwe(l.scenegraphNode,o[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===a?(s.push(Lz("text",c.filter(l=>l.unpickable),{pickable:!1})),s.push(Lz("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===a?s.push(pO(a,c,{wireframe:!0,pickable:!1,geometry:a})):(s.push(pO(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),s.push(pO(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return i.doCollisions&&function owe(t){fO.apply(this,arguments)}(i.data),s.filter(a=>!!a)}getPickingInfo(i){return i.info}}return(t=e).layerName="BodyUILayer",t.gltfCache={},e})();function Bz(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),Bz(n,e);return e}function mO(){return mO=Bt(function*(t,e,n,i){Nz();const r=yield dO({scenegraph:t,scenegraphNode:n},i),o={},s=[];for(const a of r.scenes)sg(a,e=new Hn(e||Hn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Hn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:d["@id"],transformMatrix:new Hn(e||Hn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=l.transformAsPoint(h.attributes.POSITION.min,[]),_=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new nr({lowerBound:new be(...p.map((x,P)=>Math.min(x,_[P]))),upperBound:new be(..._.map((x,P)=>Math.max(x,p[P])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of Bz(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new be(.5,.5,.5)),p=a.center=c.clone().vadd(h);a.transformMatrix=new Hn(Hn.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),mO.apply(this,arguments)}let cwe=(()=>{class t{constructor(n){this.deckProps=n,this.bodyUILayer=new swe({}),this.nodeClickSubject=new Ve,this.nodeHoverStartSubject=new Ve,this.nodeHoverStopSubject=new Ve,this.sceneRotationSubject=new Z([0,0]),this.nodeDragStartSubject=new Ve,this.nodeDragSubject=new Ve,this.nodeDragEndSubject=new Ve,this.nodeClick$=this.nodeClickSubject.pipe(Oe()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Oe()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Oe()),this.sceneRotation$=this.sceneRotationSubject.pipe(Oe()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Oe()),this.nodeDrag$=this.nodeDragSubject.pipe(Oe()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Oe());const i={...n,views:["orthographic"===n.camera?new TV({flipY:!1,near:-1e3}):new MV({orbitAxis:"Y"})],controller:n.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};n.legacyLighting&&(i.effects=[new fR({ambientLight:new IV({color:[255,255,255],intensity:10})})]),this.deck=new RR(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:n.minRotationX??-15,maxRotationX:n.maxRotationX??15,target:n.target??[.5,.5,0],rotationX:0,rotationOrbit:n.rotation??0,zoom:n.zoom??9.5,camera:n.camera}}),n.rotation&&this.sceneRotationSubject.next([n.rotation,0])}initialize(){var n=this;return Bt(function*(){for(;!n.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(n){if(n?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of n)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(n,i):this.bodyUILayer.setState({data:n,zoomOpacity:i})}}debugSceneNodeProcessing(n,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new Hn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function awe(t,e,n,i){return mO.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",n),(n=n.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:n,zoomOpacity:i})})}zoomTo(n){const i=new Hn(n.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:n}})}setRotationX(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:n}})}setZoom(n){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:n}})}setTarget(n){this.deck.setProps({viewState:{...this.deck.props.viewState,target:n}})}setInteractive(n){this.deck.setProps({controller:n})}_onHover(n){const{lastHovered:i}=this;this.cursor=n.picked?"pointer":void 0,n.picked&&n.object?.["@id"]?i!==n.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=n.object,this.nodeHoverStartSubject.next(n.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(n,i){n.picked&&n.object?.["@id"]&&this.nodeClickSubject.next({node:n.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(n){if(n.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(n.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...n.viewState}}),this.sceneRotationSubject.next([n.viewState.rotationOrbit,n.viewState.rotationX])}_onDragStart(n,i){this._dragEvent(n,i,this.nodeDragStartSubject)}_onDrag(n,i){this._dragEvent(n,i,this.nodeDragSubject)}_onDragEnd(n,i){this._dragEvent(n,i,this.nodeDragEndSubject)}_dragEvent(n,i,r){n?.object?.["@id"]&&r.next({node:n.object,info:n,e:i})}}return dt([pf.ak],t.prototype,"_onHover",null),dt([pf.ak],t.prototype,"_onClick",null),dt([pf.ak],t.prototype,"_onViewStateChange",null),dt([pf.ak],t.prototype,"_onDragStart",null),dt([pf.ak],t.prototype,"_onDrag",null),dt([pf.ak],t.prototype,"_onDragEnd",null),t})();const Vy=ce(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});let Uz=(()=>{class t{constructor(){this.bootstrap$=new Sm(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lwe(t,e){return t===e}function _O(t,e=lwe){let n=null,i=null;function r(){return function dwe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let uwe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const Vz=new bt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>uwe.pop()}),zz=new bt("\u0275NGXS_STATE_FACTORY"),Hz=new bt("\u0275NGXS_STATE_CONTEXT_FACTORY"),{isArray:hwe}=Array,{getPrototypeOf:fwe,prototype:pwe,keys:mwe}=Object;function Gz(t){if(1===t.length){const e=t[0];if(hwe(e))return{args:e,keys:null};if(function gwe(t){return t&&"object"==typeof t&&fwe(t)===pwe}(e)){const n=mwe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:_we}=Array;function zy(t){return de(e=>function bwe(t,e){return _we(e)?t(...e):t(e)}(t,e))}function Wz(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Hy(...t){const e=en(t),{args:n,keys:i}=Gz(t),r=new B(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;Ei(n[d]).subscribe(O(o,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?Wz(i,a):a),o.complete())}))}});return e?r.pipe(zy(e)):r}function _d(t,e){const n=U(t)?t:()=>t,i=r=>r.error(n());return new B(e?r=>e.schedule(i,0,r):i)}function mf(t){return!!t&&(t instanceof B||U(t.lift)&&U(t.subscribe))}function xi(t,e){return C((n,i)=>{let r=0;n.subscribe(O(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Rs(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,Oe({connector:()=>new Sm(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function vi(t){return t<=0?()=>$e:C((e,n)=>{let i=0;e.subscribe(O(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function $z(t,e){return e?n=>n.pipe($z((i,r)=>Ei(t(i,r)).pipe(de((o,s)=>e(i,o,r,s))))):C((n,i)=>{let r=0,o=null,s=!1;n.subscribe(O(i,a=>{o||(o=O(i,void 0,()=>{o=null,s&&i.complete()}),Ei(t(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function ag(t){return C((e,n)=>{let i=!1;e.subscribe(O(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function ec(t){return C((e,n)=>{let o,i=null,r=!1;i=e.subscribe(O(n,void 0,void 0,s=>{o=Ei(t(s,ec(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function _r(t){return C((e,n)=>{Ei(t).subscribe(O(n,()=>n.complete(),L)),!n.closed&&e.subscribe(n)})}function br(t,e,n){const i=U(t)||e||n?{next:t,error:e,complete:n}:t;return i?C((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(O(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):rt}function Gy(...t){return function ywe(){return Le(1)}()(Fi(t,gn(t)))}function Ca(...t){const e=gn(t);return C((n,i)=>{(e?Gy(t,n,e):Gy(t,n)).subscribe(i)})}function gf(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const Yz=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?n:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),t),t},bO=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),yO=t=>t&&"object"==typeof t&&!Array.isArray(t),vO=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(yO(t)&&yO(n))for(const i in n)yO(n[i])?(t[i]||Object.assign(t,{[i]:{}}),vO(t[i],n[i])):Object.assign(t,{[i]:n[i]});return vO(t,...e)};let Xz=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return ZM(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return an.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return an.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(nt(an),nt(ma))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Kz=new bt("ROOT_OPTIONS"),qz=new bt("ROOT_STATE_TOKEN"),Jz=new bt("FEATURE_STATE_TOKEN"),Zz=new bt("NGXS_PLUGINS"),bd="NGXS_META",Qz="NGXS_OPTIONS_META",xO="NGXS_SELECTOR_META";let oE=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Xz}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:function(n){let i=null;return n?i=new n:(r=nt(Kz),i=vO(new t,r)),i;var r},providedIn:"root"}),t})();class Mwe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let Iwe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const eH=new bt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),Dwe=new bt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Gt(Kp),e=t.get(eH);return t.get(e||(typeof Ti.Zone<"u"?Xz:Iwe))}});function wO(t){if(!t.hasOwnProperty(bd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,bd,{value:e})}return _f(t)}function _f(t){return t[bd]}function sE(t){return t[xO]}function tH(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function Rwe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function Owe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let o=n;for(;++i<r;)o=o+" && "+(n=n+"."+e[i]);return new Function("store","return "+o+";")}(t)}function Bwe(...t){return function cg(t,e,n=Vwe){const i=function zwe(t){return t.reduce((e,n)=>(e[gf(n)]=!0,e),{})}(t),r=e&&function Hwe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(o){return o.pipe(function jwe(t,e){return xi(n=>{const i=gf(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function Vwe(){return de(t=>t.action)}function aE(t){return e=>new B(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let nH=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(Dwe))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function iH(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const o=e.pop();o&&t(...o)}n=!1}}}class Gwe extends Ve{constructor(){super(...arguments),this._orderedNext=iH(e=>super.next(e))}next(e){this._orderedNext(e)}}class Wwe extends Z{constructor(e){super(e),this._orderedNext=iH(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let rH=(()=>{class t extends Gwe{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Vi(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const oH=t=>(...e)=>t.shift()(...e,(...i)=>oH(t)(...i));let sH=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(xc));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(nt(wr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),AO=(()=>{class t extends Wwe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SO=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(nt(t,12),nt(Zz,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})(),aH=(()=>{class t extends Ve{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Vi(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ywe=(()=>{class t{constructor(n,i,r,o,s,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function $we(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new B(r=>(i=!0,n.pipe(aE(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?qt(this._stateStream.getValue()):Hy(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return oH([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(Rs())}getActionResultStream(n){return this._actionResults.pipe(xi(i=>i.action===n&&"DISPATCHED"!==i.status),vi(1),Rs())}createDispatchObservable(n){return n.pipe($z(i=>{switch(i.status){case"SUCCESSFUL":return qt(this._stateStream.getValue());case"ERRORED":return _d(i.error);default:return $e}})).pipe(Rs())}}return t.\u0275fac=function(n){return new(n||t)(nt(rH),nt(aH),nt(SO),nt(AO),nt(nH),nt(sH))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wy=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(nt(AO),nt(Ywe),nt(oE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),CO=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();function r(c){return bO(c,n.path)}function o(c,l){const d=Yz(c,n.path,l);return i.setState(d),d}function s(c,l){return o(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function Xwe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(c);return s(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?s(l,c):o(l,c)},dispatch:c=>i.dispatch(c)}}}return t.\u0275fac=function(n){return new(n||t)(nt(Wy))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new RegExp("^[a-zA-Z0-9_]+$");class lH{static get type(){return"@@INIT"}}class dH{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new bt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let lg=(()=>{class t{constructor(n,i,r,o,s,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=_O(()=>{const l=this;function d(p){const _=l.statePaths[p];return _?tH(_.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let _=d(p);return _||((...x)=>(_||(_=d(p)),_?_(...x):void 0))},getSelectorOptions:p=>Object.assign(Object.assign({},l._config.selectorOptions),p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(n){let i={};return i=Array.isArray(n)?n.slice():function Lwe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?Object.assign({},n):void 0===n?{}:n,i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function kwe(t){const e=n=>t.find(r=>r===n)[bd].name;return t.reduce((n,i)=>{const{name:r,children:o}=i[bd];return n[r]=(o||[]).map(e),n},{})}(i),o=function Fwe(t){const e=[],n={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),n[r]=!0,t[r].forEach(s=>{n[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),s=function Nwe(t,e={}){const n=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=n(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function Pwe(t){return t.reduce((e,n)=>(e[n[bd].name]=n,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],p=d[bd];this.addRuntimeInfoToMeta(p,h);const _={name:l,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:t.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(_),this.states.push(_)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((s,a)=>Yz(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new Ve;this._actionsSubscription=this._actions.pipe(xi(i=>"DISPATCHED"===i.status),fe(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(de(()=>({action:r,status:"SUCCESSFUL"})),ag({action:r,status:"CANCELED"}),ec(o=>qt({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=gf(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Fi(h)),mf(h)?(h=h.pipe(fe(p=>p instanceof Promise?Fi(p):mf(p)?p:qt(p)),ag({})),l.options.cancelUncompleted&&(h=h.pipe(_r(n.pipe(Bwe(i)))))):h=qt({}).pipe(Rs()),o.push(h)}catch(h){o.push(_d(h))}s=!0}}return o.length||o.push(qt({})),Hy(o)}addToStatesMap(n){const i=[],r=this.statesByName;for(const o of n){const s=_f(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==bO(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(nt(wr),nt(oE),nt(t,12),nt(rH),nt(aH),nt(CO),nt(Vz,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();function uH(t){const e=sE(t)||_f(t);return e&&e.makeRootSelector||(()=>t)}let Tl=(()=>{class t{constructor(n,i,r,o,s,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(aE(this._internalExecutionStrategy),Rs({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(de(i),ec(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?qt(void 0):_d(r)}),ht(),aE(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(vi(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(aE(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return uH(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(s)}}}return t.\u0275fac=function(n){return new(n||t)(nt(AO),nt(Wy),nt(oE),nt(nH),nt(lg),nt(Vz,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cE=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(nt(Tl),nt(oE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hH=(()=>{class t{constructor(n,i,r,o,s){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new Ve}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(xi(()=>!!i),br(()=>this._invokeInitOnStates(i.states)),fe(()=>this._bootstrapper.appBootstrapped$),xi(r=>!!r),ec(r=>(this._internalErrorReporter.reportErrorSafely(r),$e)),_r(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>bO(o,i.path)).pipe(Ca(void 0),C((t,e)=>{let n,i=!1;t.subscribe(O(e,r=>{const o=n;n=r,i&&e.next([o,r]),i=!0}))}),_r(this._destroy$)).subscribe(([o,s])=>{const a=new Mwe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(Tl),nt(sH),nt(Wy),nt(CO),nt(Uz))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),i1e=(()=>{class t{constructor(n,i,r,o,s=[],a){const c=n.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new lH,c)}}return t.\u0275fac=function(n){return new(n||t)(nt(lg),nt(Wy),nt(Tl),nt(cE),nt(qz,8),nt(hH))},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),t})(),r1e=(()=>{class t{constructor(n,i,r,o=[],s){const a=t.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new dH(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(nt(Tl),nt(Wy),nt(lg),nt(Jz,8),nt(hH))},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),t})(),fH=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:i1e,providers:[lg,SO,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:r1e,providers:[lg,SO,...n,{provide:Jz,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:eH,useValue:i.executionStrategy},{provide:qz,useValue:n},{provide:Kz,useValue:i},{provide:gw,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[Uz]},{provide:Hz,useExisting:CO},{provide:zz,useExisting:lg}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),t})();function IO(t,e){return(n,i)=>{const r=wO(n.constructor);Array.isArray(t)||(t=[t]);for(const o of t){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function pH(t){return i=>{const r=i,o=wO(r),s=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[Qz]||{}),t)}(s);(function n(i){const{meta:r,inheritedStateClass:o,optionsWithInheritance:s}=i,{children:a,defaults:c,name:l}=s,d="string"==typeof l?l:l&&l.getName()||null;if(o.hasOwnProperty(bd)){const h=o[bd]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:o,inheritedStateClass:s,optionsWithInheritance:a}),r[Qz]=a}}const o1e=36;function lE(t,...e){return function(n,i){const r=i.toString(),o=`__${r}__selector`,s=function a1e(t,e,n=[]){return e=e||function c1e(t){const e=t.length-1;return t.charCodeAt(e)===o1e?t.slice(0,e):t}(t),"string"==typeof e?tH(n.length?[e,...n]:e.split("."),cE.config):e}(r,t,e);Object.defineProperties(n,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function s1e(t){return cE.store||function Twe(){throw new Error("You have forgotten to import the NGXS module!")}(),cE.store.select(t)}(s))}}})}}const mH="NGXS_SELECTOR_OPTIONS_META",dE={getOptions:t=>t&&t[mH]||{},defineOptions:(t,e)=>{t&&(t[mH]=e)}};function l1e(t,e){const n=function EO(t){return t.hasOwnProperty(xO)||Object.defineProperty(t,xO,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),sE(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function d1e(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},dE.getOptions(t.containerClass)||{}),dE.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function $y(t,e,n){const i=function e1e(t,e){const n=e&&e.containerClass,r=_O(function(...s){const a=t.apply(n,s);return a instanceof Function?_O.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=l1e(e,n);return r.makeRootSelector=function Qwe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function t1e(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),s=function n1e(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&_f(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>uH(a)(t));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,t,i),i}function dg(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,o=$y(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}let ZO;try{ZO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ZO=!1}let Qy,wf,QO,Rr=(()=>{var t;class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?yu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ZO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ma))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function xf(t){return function dEe(){if(null==Qy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qy=!0}))}finally{Qy=Qy||!1}return Qy}()?t:!!t.capture}function uEe(){if(null==wf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return wf=!1,wf;if("scrollBehavior"in document.documentElement.style)wf=!0;else{const t=Element.prototype.scrollTo;wf=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return wf}function AE(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function vd(t){return t.composedPath?t.composedPath()[0]:t.target}function ek(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function kc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class wEe extends ae{constructor(e,n){super()}schedule(e,n=0){return this}}const TE={setInterval(t,e,...n){const{delegate:i}=TE;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=TE;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class ik extends wEe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return TE.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&TE.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,$(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class t0{constructor(e,n=t0.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}t0.now=lI.now;class rk extends t0{constructor(e,n=t0.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const ME=new rk(ik),EEe=ME;function yi(t){return null!=t&&"false"!=`${t}`}function tc(t,e=0){return function AEe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function IE(t){return Array.isArray(t)?t:[t]}function eo(t){return null==t?"":"string"==typeof t?t:`${t}px`}function xd(t){return t instanceof Ut?t.nativeElement:t}function us(...t){const e=gn(t),n=en(t),{args:i,keys:r}=Gz(t);if(0===i.length)return Fi([],e);const o=new B(OG(i,e,r?s=>Wz(r,s):rt));return n?o.pipe(zy(n)):o}function OG(t,e,n=rt){return i=>{kG(e,()=>{const{length:r}=t,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)kG(e,()=>{const l=Fi(t[c],e);let d=!1;l.subscribe(O(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function kG(t,e,n){t?V(n,t,e):e()}let OE=(()=>{var t;class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function NEe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function PEe(t){try{return t.frameElement}catch{return null}}(function HEe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===zG(r)||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=zG(i);return i.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function VEe(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===o?!!i.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function zEe(t){return!function LEe(t){return function jEe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function FEe(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function BEe(t){return function UEe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||VG(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Rr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function VG(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function zG(t){if(!VG(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class GEe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(vi(1)).subscribe(e)}}let uk=(()=>{var t;class e{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new GEe(i,this._checker,this._ngZone,this._document,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(OE),nt(an),nt(zn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function HG(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function GG(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const WEe=new bt("cdk-input-modality-detector-options"),$Ee={ignoreKeys:[18,17,224,91,16]},fg=xf({passive:!0,capture:!0});let YEe=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new Z(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=vd(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(HG(a)?"keyboard":"mouse"),this._mostRecentTarget=vd(a))},this._onTouchstart=a=>{GG(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=vd(a))},this._options={...$Ee,...s},this.modalityDetected=this._modality.pipe(function sk(t){return xi((e,n)=>t<=n)}(1)),this.modalityChanged=this.modalityDetected.pipe(ht()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,fg),o.addEventListener("mousedown",this._onMousedown,fg),o.addEventListener("touchstart",this._onTouchstart,fg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fg),document.removeEventListener("mousedown",this._onMousedown,fg),document.removeEventListener("touchstart",this._onTouchstart,fg))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Rr),nt(an),nt(zn),nt(WEe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const KEe=new bt("cdk-focus-monitor-default-options"),kE=xf({passive:!0,capture:!0});let Af=(()=>{var t;class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ve,this._rootNodeFocusAndBlurListener=c=>{for(let d=vd(c);d;d=d.parentElement)"focus"===c.type?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){const o=xd(i);if(!this._platform.isBrowser||1!==o.nodeType)return qt();const s=function fEe(t){if(function hEe(){if(null==QO){const t=typeof document<"u"?document.head:null;QO=!(!t||!t.createShadowRoot&&!t.attachShadow)}return QO}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new Ve,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){const r=xd(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){const s=xd(i);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const o=this._elementInfo.get(r),s=vd(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,kE),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,kE)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(_r(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kE),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kE),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const s=i.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0;return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(an),nt(Rr),nt(YEe),nt(zn,8),nt(KEe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const qEe=new bt("cdk-dir-doc",{providedIn:"root",factory:function JEe(){return Gt(zn)}}),ZEe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Sf=(()=>{var t;class e{constructor(i){this.value="ltr",this.change=new tn,i&&(this.value=function QEe(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?ZEe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(qEe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function PE(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function mk(t,e=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?tc(n):this.defaultTabIndex}constructor(...n){super(...n),this._tabIndex=e,this.defaultTabIndex=e}}}class uAe{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const QG=xf({passive:!0,capture:!0});class hAe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=vd(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){const o=this._events.get(n);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,QG)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const o=r.get(n);o&&(o.delete(i),0===o.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,QG)))}}const e9={enterDuration:225,exitDuration:150},t9=xf({passive:!0,capture:!0}),n9=["mousedown","touchstart"],i9=["mouseup","mouseleave","touchend","touchcancel"];class pg{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=xd(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...e9,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const s=i.radius||function pAe(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),_=h.transitionDuration,x="none"===h.transitionProperty||"0s"===_||"0s, 0s"===_||0===r.width&&0===r.height,P=new uAe(this,d,i,x);d.style.transform="scale3d(1, 1, 1)",P.state=0,i.persistent||(this._mostRecentTransientRipple=P);let F=null;return!x&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const X=()=>this._finishRippleTransition(P),Q=()=>this._destroyRipple(P);d.addEventListener("transitionend",X),d.addEventListener("transitioncancel",Q),F={onTransitionEnd:X,onTransitionCancel:Q}}),this._activeRipples.set(P,F),(x||!l)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...e9,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=xd(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,n9.forEach(i=>{pg._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{i9.forEach(n=>{this._triggerElement.addEventListener(n,this,t9)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=HG(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!GG(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(n9.forEach(n=>pg._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&i9.forEach(n=>e.removeEventListener(n,this,t9)))}}pg._eventManager=new hAe;const xAe=["addListener","removeListener"],wAe=["addEventListener","removeEventListener"],EAe=["on","off"];function mg(t,e,n,i){if(U(n)&&(i=n,n=void 0),i)return mg(t,e,n).pipe(zy(i));const[r,o]=function CAe(t){return U(t.addEventListener)&&U(t.removeEventListener)}(t)?wAe.map(s=>a=>t[s](e,a,n)):function AAe(t){return U(t.addListener)&&U(t.removeListener)}(t)?xAe.map(f9(t,e)):function SAe(t){return U(t.on)&&U(t.off)}(t)?EAe.map(f9(t,e)):[];if(!r&&Uc(t))return fe(s=>mg(s,e,n))(Ei(t));if(!r)throw new TypeError("Invalid event target");return new B(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function f9(t,e){return n=>i=>t[n](e,i)}const c0={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=c0;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(o=>{n=void 0,t(o)});return new ae(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=c0;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=c0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class MAe extends rk{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class TAe extends ik{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=c0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(c0.cancelAnimationFrame(n),e._scheduled=void 0)}});let bk,DAe=1;const FE={};function p9(t){return t in FE&&(delete FE[t],!0)}const RAe={setImmediate(t){const e=DAe++;return FE[e]=!0,bk||(bk=Promise.resolve()),bk.then(()=>p9(e)&&t()),e},clearImmediate(t){p9(t)}},{setImmediate:OAe,clearImmediate:kAe}=RAe,LE={setImmediate(...t){const{delegate:e}=LE;return(e?.setImmediate||OAe)(...t)},clearImmediate(t){const{delegate:e}=LE;return(e?.clearImmediate||kAe)(t)},delegate:void 0};new class NAe extends rk{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class PAe extends ik{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=LE.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(LE.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function yk(t=0,e,n=EEe){let i=-1;return null!=e&&(Tt(e)?n=e:i=e),new B(r=>{let o=function BAe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function m9(t,e=ME){return function LAe(t){return C((e,n)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,n.next(l)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(O(n,l=>{i=!0,r=l,o||Ei(t(l)).subscribe(o=O(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}(()=>yk(t,e))}let g9=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ve,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new B(r=>{this._globalSubscription||this._addGlobalListener();const o=i>0?this._scrolled.pipe(m9(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(xi(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=xd(r),s=i.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>mg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(an),nt(Rr),nt(zn,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),vk=(()=>{var t;class e{constructor(i,r,o){this._platform=i,this._change=new Ve,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect();return{top:-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(m9(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Rr),nt(an),nt(zn,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class xk{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class jE extends xk{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class UE extends xk{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class VAe extends xk{constructor(e){super(),this.element=e instanceof Ut?e.nativeElement:e}}class wk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof jE?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof UE?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof VAe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class zAe extends wk{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||wr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let VE=(()=>{var t;class e extends wk{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new tn,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Yt),Ge(zo),Ge(zn))},t.\u0275dir=jt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[vn]}),e})();const b9=uEe();class HAe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=eo(-this._previousScrollPosition.left),e.style.top=eo(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),b9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),b9&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class GAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(xi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class y9{enable(){}disable(){}attach(){}}function Ek(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function v9(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class WAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Ek(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $Ae=(()=>{var t;class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new y9,this.close=a=>new GAe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new HAe(this._viewportRuler,this._document),this.reposition=a=>new WAe(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(g9),nt(vk),nt(an),nt(zn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class Ak{constructor(e){if(this.scrollStrategy=new y9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class YAe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let x9=(()=>{var t;class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),XAe=(()=>{var t;class e extends x9{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn),nt(an,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),KAe=(()=>{var t;class e extends x9{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=vd(s)},this._clickListener=s=>{const a=vd(s),c="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn),nt(Rr),nt(an,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),zE=(()=>{var t;class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||ek()){const o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}const r=this._document.createElement("div");r.classList.add(i),ek()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(zn),nt(Rr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class d0{constructor(e,n,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Ve,this._attachments=new Ve,this._detachments=new Ve,this._locationChanges=ae.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Ve,this._outsidePointerEvents=new Ve,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(vi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=eo(this._config.width),e.height=eo(this._config.height),e.minWidth=eo(this._config.minWidth),e.minHeight=eo(this._config.minHeight),e.maxWidth=eo(this._config.maxWidth),e.maxHeight=eo(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=IE(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(_r(go(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const w9="cdk-overlay-connected-position-bounding-box",qAe=/([A-Za-z%]+)$/;class JAe{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ve,this._resizeSubscription=ae.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(w9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(l,n,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(w9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return n.left<0&&(r-=n.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r,o;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,o="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){const o=A9(n);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let p=0-a,_=a+o.height-i.height,x=this._subtractOverflows(o.width,0-s,s+o.width-i.width),P=this._subtractOverflows(o.height,p,_),F=x*P;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:P===o.height,fitsInViewportHorizontally:x==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,o=i.right-n.x,s=E9(this._overlayRef.getConfig().minHeight),a=E9(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=A9(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new YAe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,p;if("top"===n.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const _=Math.min(i.bottom-e.y+i.top,e.y),x=this._lastBoundingBoxSize.height;o=2*_,s=e.y-_,o>x&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-x/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)p=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,d=i.right-e.x;else{const _=Math.min(i.right-e.x+i.left,e.x),x=this._lastBoundingBoxSize.width;d=2*_,h=e.x-_,d>x&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-x/2)}return{top:s,left:h,bottom:a,right:p,width:d,height:o}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=eo(i.height),r.top=eo(i.top),r.bottom=eo(i.bottom),r.width=eo(i.width),r.left=eo(i.left),r.right=eo(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=eo(o)),s&&(r.maxWidth=eo(s))}this._lastBoundingBoxSize=i,Cf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Cf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Cf(i,this._getExactOverlayY(n,e,d)),Cf(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=eo(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=eo(s.maxWidth):o&&(i.maxWidth="")),Cf(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=eo(o.y),r}_getExactOverlayX(e,n,i){let s,r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=eo(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:v9(e,i),isOriginOutsideView:Ek(e,i),isOverlayClipped:v9(n,i),isOverlayOutsideView:Ek(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&IE(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Ut)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function Cf(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function E9(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(qAe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function A9(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const S9="cdk-global-overlay-wrapper";class ZAe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(S9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let _="",x="",P="";c?P="flex-start":"center"===d?(P="center",p?x=h:_=h):p?"left"===d||"end"===d?(P="flex-end",_=h):("right"===d||"start"===d)&&(P="flex-start",x=h):"left"===d||"start"===d?(P="flex-start",_=h):("right"===d||"end"===d)&&(P="flex-end",x=h),e.position=this._cssPosition,e.marginLeft=c?"0":_,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":x,n.justifyContent=P,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(S9),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let QAe=(()=>{var t;class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new ZAe}flexibleConnectedTo(i){return new JAe(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(vk),nt(zn),nt(Rr),nt(zE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),eSe=0,Ml=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d,h,p,_,x){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=_,this._animationsModuleType=x}create(i){const r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new Ak(i);return a.direction=a.direction||this._directionality.value,new d0(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+eSe++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Uh)),new zAe(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt($Ae),nt(zE),nt(Yt),nt(QAe),nt(XAe),nt(wr),nt(an),nt(zn),nt(Sf),nt(Bb),nt(KAe),nt(Xr,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Tf(t,e){return{type:7,name:t,definitions:e,options:{}}}function nc(t,e=null){return{type:4,styles:e,timings:t}}function ho(t){return{type:6,styles:t,offset:null}}function ic(t,e,n){return{type:0,name:t,styles:e,options:n}}function Pc(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function u0(t){return new B(e=>{Ei(t()).subscribe(e)})}function $9(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return de(n=>{let i=n;for(let r=0;r<e;r++){const o=i?.[t[r]];if(!(typeof o<"u"))return;i=o}return i})}m(1563);class WE{}class Il{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Il?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Il;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Il?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class fCe{encodeKey(e){return Y9(e)}encodeValue(e){return Y9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const mCe=/%(\d[a-f0-9])/gi,gCe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Y9(t){return encodeURIComponent(t).replace(mCe,(e,n)=>gCe[n]??e)}function YE(t){return`${t}`}class Bu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new fCe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pCe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(YE):[YE(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Bu({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(YE(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(YE(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class _Ce{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function X9(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function K9(t){return typeof Blob<"u"&&t instanceof Blob}function q9(t){return typeof FormData<"u"&&t instanceof FormData}class f0{constructor(e,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function bCe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Il),this.context||(this.context=new _Ce),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Bu,this.urlWithParams=n}serializeBody(){return null===this.body?null:X9(this.body)||K9(this.body)||q9(this.body)||function yCe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||q9(this.body)?null:K9(this.body)?this.body.type||null:X9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),l)),new f0(n,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var _g=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(_g||{});class Ik{constructor(e,n=200,i="OK"){this.headers=e.headers||new Il,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bg extends Ik{constructor(e={}){super(e),this.type=_g.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new bg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Rk(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let yg=(()=>{var t;class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof f0)s=i;else{let l,d;l=o.headers instanceof Il?o.headers:new Il(o.headers),o.params&&(d=o.params instanceof Bu?o.params:new Bu({fromObject:o.params})),s=new f0(i,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const a=qt(s).pipe(function h0(t,e){return U(e)?fe(t,e,1):fe(t,1)}(l=>this.handler.handle(l)));if(i instanceof f0||"events"===o.observe)return a;const c=a.pipe(xi(l=>l instanceof bg));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(de(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(de(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(de(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(de(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new Bu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,Rk(o,r))}post(i,r,o={}){return this.request("POST",i,Rk(o,r))}put(i,r,o={}){return this.request("PUT",i,Rk(o,r))}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(WE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const zCe=["*"];let KE;function m0(t){return function HCe(){if(void 0===KE&&(KE=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(KE=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return KE}()?.createHTML(t)||t}function l7(t){return Error(`Unable to find icon with the name "${t}"`)}function d7(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function u7(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class If{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let qE=(()=>{var t;class e{constructor(i,r,o,s){this._httpClient=i,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(i,r,o){return this.addSvgIconInNamespace("",i,r,o)}addSvgIconLiteral(i,r,o){return this.addSvgIconLiteralInNamespace("",i,r,o)}addSvgIconInNamespace(i,r,o,s){return this._addSvgIconConfig(i,r,new If(o,null,s))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,o,s){const a=this._sanitizer.sanitize(pr.HTML,o);if(!a)throw u7(o);const c=m0(a);return this._addSvgIconConfig(i,r,new If("",c,s))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,o){return this._addSvgIconSetConfig(i,new If(r,null,o))}addSvgIconSetLiteralInNamespace(i,r,o){const s=this._sanitizer.sanitize(pr.HTML,r);if(!s)throw u7(r);const a=m0(s);return this._addSvgIconSetConfig(i,new If("",a,o))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(pr.RESOURCE_URL,i);if(!r)throw d7(i);const o=this._cachedIconsByUrl.get(r);return o?qt(JE(o)):this._loadSvgIconFromConfig(new If(i,null)).pipe(br(s=>this._cachedIconsByUrl.set(r,s)),de(s=>JE(s)))}getNamedSvgIcon(i,r=""){const o=h7(r,i);let s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,i),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):_d(l7(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?qt(JE(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(de(r=>JE(r)))}_getSvgFromIconSetConfigs(i,r){const o=this._extractIconWithNameFromAnySet(i,r);return o?qt(o):Hy(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(ec(c=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(pr.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),qt(null)})))).pipe(de(()=>{const a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw l7(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.svgText&&s.svgText.toString().indexOf(i)>-1){const a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,i,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(br(r=>i.svgText=r),de(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?qt(null):this._fetchIcon(i).pipe(br(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,o){const s=i.querySelector(`[id="${r}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,o);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),o);const c=this._svgElementFromString(m0("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(i){const r=this._svgElementFromString(m0("<svg></svg>")),o=i.attributes;for(let s=0;s<o.length;s++){const{name:a,value:c}=o[s];"id"!==a&&r.setAttribute(a,c)}for(let s=0;s<i.childNodes.length;s++)i.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:o}=i,s=o?.withCredentials??!1;if(!this._httpClient)throw function GCe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(pr.RESOURCE_URL,r);if(!a)throw d7(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(de(d=>m0(d)),function gg(t){return C((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}(()=>this._inProgressUrlFetches.delete(a)),Oe());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,o){return this._svgIconConfigs.set(h7(i,r),o),this}_addSvgIconSetConfig(i,r){const o=this._iconSetConfigs.get(i);return o?o.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let o=0;o<this._resolvers.length;o++){const s=this._resolvers[o](r,i);if(s)return $Ce(s)?new If(s.url,null,s.options):new If(s,null)}}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(yg,8),nt(Gb),nt(zn,8),nt(xc))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function JE(t){return t.cloneNode(!0)}function h7(t,e){return t+":"+e}function $Ce(t){return!(!t.url||!t.options)}const YCe=PE(class{constructor(t){this._elementRef=t}}),XCe=new bt("MAT_ICON_DEFAULT_OPTIONS"),KCe=new bt("mat-icon-location",{providedIn:"root",factory:function qCe(){const t=Gt(zn),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),f7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],JCe=f7.map(t=>`[${t}]`).join(", "),ZCe=/^url\(['"]?#(.*?)['"]?\)$/;let vg=(()=>{var t;class e extends YCe{get inline(){return this._inline}set inline(i){this._inline=yi(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,o,s,a,c){super(i),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ae.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=i.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>i.classList.remove(o)),r.forEach(o=>i.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(JCe),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)f7.forEach(a=>{const c=r[s],l=c.getAttribute(a),d=l?l.match(ZCe):null;if(d){let h=o.get(c);h||(h=[],o.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,o]=this._splitIconName(i);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(vi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${s.message}`))})}}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Ut),Ge(qE),Ua("aria-hidden"),Ge(KCe),Ge(xc),Ge(XCe,8))},t.\u0275cmp=An({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Oi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Kn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[vn],ngContentSelectors:zCe,decls:1,vars:0,template:function(i,r){1&i&&(Kr(),Pn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})();function STe(t,e){}class ZE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let v7=(()=>{var t;class e extends wk{constructor(i,r,o,s,a,c,l,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const o=AE(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=AE();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=AE())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Ut),Ge(uk),Ge(zn,8),Ge(ZE),Ge(OE),Ge(an),Ge(d0),Ge(Af))},t.\u0275cmp=An({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&er(VE,7),2&i){let o;Un(o=Vn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Oi("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[vn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&xn(0,STe,0,0,"ng-template",0)},dependencies:[VE],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class Pk{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Ve,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!kc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const x7=new bt("DialogScrollStrategy"),CTe=new bt("DialogData"),TTe=new bt("DefaultDialogConfig");let DTe=0,w7=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,s,a,c){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ve,this._afterOpenedAtThisLevel=new Ve,this._ariaHiddenElements=new Map,this.afterAllClosed=u0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ca(void 0))),this._scrollStrategy=c}open(i,r){(r={...this._defaultOptions||new ZE,...r}).id=r.id||"cdk-dialog-"+DTe++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),a=this._overlay.create(s),c=new Pk(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){Nk(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){Nk(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),Nk(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new Ak({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){const s=o.injector||o.viewContainerRef?.injector,a=[{provide:ZE,useValue:o},{provide:Pk,useValue:r},{provide:d0,useValue:i}];let c;o.container?"function"==typeof o.container?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=v7;const l=new jE(c,o.viewContainerRef,wr.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,o,s){if(i instanceof Ya){const a=this._createInjector(s,r,o,void 0);let c={$implicit:s.data,dialogRef:r};s.templateContext&&(c={...c,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),o.attachTemplatePortal(new UE(i,null,c,a))}else{const a=this._createInjector(s,r,o,this._injector),c=o.attachComponentPortal(new jE(i,s.viewContainerRef,a,s.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,o,s){const a=i.injector||i.viewContainerRef?.injector,c=[{provide:CTe,useValue:i.data},{provide:Pk,useValue:r}];return i.providers&&("function"==typeof i.providers?c.push(...i.providers(r,i,o)):c.push(...i.providers)),i.direction&&(!a||!a.get(Sf,null,{optional:!0}))&&c.push({provide:Sf,useValue:{value:i.direction,change:qt()}}),wr.create({parent:a||s,providers:c})}_removeOpenDialog(i,r){const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){const s=r[o];s!==i&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Ml),nt(wr),nt(TTe,8),nt(t,12),nt(zE),nt(x7))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function Nk(t,e){let n=t.length;for(;n--;)e(t[n])}function OTe(t,e){}class QE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Fk="mdc-dialog--open",E7="mdc-dialog--opening",A7="mdc-dialog--closing";let NTe=(()=>{var t;class e extends v7{constructor(i,r,o,s,a,c,l,d){super(i,r,o,s,a,c,l,d),this._animationStateChanged=new tn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Ut),Ge(uk),Ge(zn,8),Ge(QE),Ge(OE),Ge(an),Ge(d0),Ge(Af))},t.\u0275cmp=An({type:t,selectors:[["ng-component"]],features:[vn],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const S7="--mat-dialog-transition-duration";function C7(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?tc(t.substring(0,t.length-2)):t.endsWith("s")?1e3*tc(t.substring(0,t.length-1)):"0"===t?0:null}let FTe=(()=>{var t;class e extends NTe{constructor(i,r,o,s,a,c,l,d,h){super(i,r,o,s,a,c,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?C7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?C7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(S7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(E7,Fk)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Fk),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Fk),this._animationsEnabled?(this._hostElement.style.setProperty(S7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(A7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(E7,A7)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Ut),Ge(uk),Ge(zn,8),Ge(QE),Ge(OE),Ge(an),Ge(d0),Ge(Xr,8),Ge(Af))},t.\u0275cmp=An({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(ed("id",r._config.id),Oi("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Kn("_mat-animation-noopable",!r._animationsEnabled))},features:[vn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Lt(0,"div",0)(1,"div",1),xn(2,OTe,0,0,"ng-template",2),zt()())},dependencies:[VE],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class Lk{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ve,this._beforeClosed=new Ve,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(xi(r=>"opened"===r.state),vi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(xi(r=>"closed"===r.state),vi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),go(this.backdropClick(),this.keydownEvents().pipe(xi(r=>27===r.keyCode&&!this.disableClose&&!kc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function LTe(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(xi(n=>"closing"===n.state),vi(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const T7=new bt("MatMdcDialogData"),BTe=new bt("mat-mdc-dialog-default-options"),M7=new bt("mat-mdc-dialog-scroll-strategy");let VTe=0,zTe=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,s,a,c,l,d,h,p){this._overlay=i,this._defaultOptions=o,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ve,this._afterOpenedAtThisLevel=new Ve,this._idPrefix="mat-dialog-",this.dialogConfigClass=QE,this.afterAllClosed=u0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ca(void 0))),this._scrollStrategy=c,this._dialog=r.get(w7)}open(i,r){let o;(r={...this._defaultOptions||new QE,...r}).id=r.id||`${this._idPrefix}${VTe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:ZE,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(a,c,l)=>(o=new this._dialogRefConstructor(a,r,l),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])});return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}}return(t=e).\u0275fac=function(i){Nh()},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),eA=(()=>{var t;class e extends zTe{constructor(i,r,o,s,a,c,l,d){super(i,r,s,c,l,a,Lk,FTe,T7,d),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Ml),nt(wr),nt(Bb,8),nt(BTe,8),nt(M7),nt(t,12),nt(zE),nt(Xr,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),HTe=0,I7=(()=>{var t;class e{constructor(i,r,o){this._dialogRef=i,this._elementRef=r,this._dialog=o,this.id="mat-mdc-dialog-title-"+HTe++}ngOnInit(){this._dialogRef||(this._dialogRef=function GTe(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const i=this._dialogRef?._containerInstance?._ariaLabelledByQueue;i&&Promise.resolve().then(()=>{const r=i.indexOf(this.id);r>-1&&i.splice(r,1)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Lk,8),Ge(Ut),Ge(eA))},t.\u0275dir=jt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&ed("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),D7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=jt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),e})(),k7=(()=>{var t;class e{constructor(){this._listeners=[]}notify(i,r){for(let o of this._listeners)o(i,r)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(r=>i!==r)}}ngOnDestroy(){this._listeners=[]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const P7=new bt("CdkAccordion");let WTe=0,$Te=(()=>{var t;class e{get expanded(){return this._expanded}set expanded(i){i=yi(i),this._expanded!==i&&(this._expanded=i,this.expandedChange.emit(i),i?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){this._disabled=yi(i)}constructor(i,r,o){this.accordion=i,this._changeDetectorRef=r,this._expansionDispatcher=o,this._openCloseAllSubscription=ae.EMPTY,this.closed=new tn,this.opened=new tn,this.destroyed=new tn,this.expandedChange=new tn,this.id="cdk-accordion-child-"+WTe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((s,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(P7,12),Ge(Jr),Ge(k7))},t.\u0275dir=jt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[gi([{provide:P7,useValue:void 0}])]}),e})();const XTe=["body"];function KTe(t,e){}const qTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],JTe=["mat-expansion-panel-header","*","mat-action-row"];function ZTe(t,e){1&t&&di(0,"span",2),2&t&&Ht("@indicatorRotate",On()._getExpandedState())}const QTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],eMe=["mat-panel-title","mat-panel-description","*"],N7=new bt("MAT_ACCORDION"),F7="225ms cubic-bezier(0.4,0.0,0.2,1)",L7={indicatorRotate:Tf("indicatorRotate",[ic("collapsed, void",ho({transform:"rotate(0deg)"})),ic("expanded",ho({transform:"rotate(180deg)"})),Pc("expanded <=> collapsed, void => collapsed",nc(F7))]),bodyExpansion:Tf("bodyExpansion",[ic("collapsed, void",ho({height:"0px",visibility:"hidden"})),ic("expanded",ho({height:"*",visibility:""})),Pc("expanded <=> collapsed, void => collapsed",nc(F7))])},B7=new bt("MAT_EXPANSION_PANEL");let tMe=(()=>{var t;class e{constructor(i,r){this._template=i,this._expansionPanel=r}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Ya),Ge(B7,8))},t.\u0275dir=jt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),nMe=0;const j7=new bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let U7=(()=>{var t;class e extends $Te{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=yi(i)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,r,o,s,a,c,l){super(i,r,o),this._viewContainerRef=s,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new tn,this.afterCollapse=new tn,this._inputChanges=new Ve,this._headerId="mat-expansion-panel-header-"+nMe++,this._bodyAnimationDone=new Ve,this.accordion=i,this._document=a,this._bodyAnimationDone.pipe(ht((d,h)=>d.fromState===h.fromState&&d.toState===h.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ca(null),xi(()=>this.expanded&&!this._portal),vi(1)).subscribe(()=>{this._portal=new UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const i=this._document.activeElement,r=this._body.nativeElement;return i===r||r.contains(i)}return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(N7,12),Ge(Jr),Ge(k7),Ge(zo),Ge(zn),Ge(Xr,8),Ge(j7,8))},t.\u0275cmp=An({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function qr(t,e,n,i){const r=pi();if(r.firstCreatePass){const o=Ri();_3(r,new p3(e,n,i),o.index),function RZ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}g3(r,Ct(),n)}(o,tMe,5),2&i){let s;Un(s=Vn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&er(XTe,5),2&i){let o;Un(o=Vn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Kn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[gi([{provide:N7,useValue:void 0},{provide:B7,useExisting:t}]),vn,Pr],ngContentSelectors:JTe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(Kr(qTe),Pn(0),Lt(1,"div",0,1),Rn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),Lt(3,"div",2),Pn(4,1),xn(5,KTe,0,0,"ng-template",3),zt(),Pn(6,2),zt()),2&i&&(Wt(1),Ht("@bodyExpansion",r._getExpandedState())("id",r.id),Oi("aria-labelledby",r._headerId),Wt(4),Ht("cdkPortalOutlet",r._portal))},dependencies:[VE],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[L7.bodyExpansion]},changeDetection:0}),e})();class iMe{}const rMe=mk(iMe);let oMe=(()=>{var t;class e extends rMe{constructor(i,r,o,s,a,c,l){super(),this.panel=i,this._element=r,this._focusMonitor=o,this._changeDetectorRef=s,this._animationMode=c,this._parentChangeSubscription=ae.EMPTY;const d=i.accordion?i.accordion._stateChanges.pipe(xi(h=>!(!h.hideToggle&&!h.togglePosition))):$e;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=go(i.opened,i.closed,d,i._inputChanges.pipe(xi(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(xi(()=>i._containsFocus())).subscribe(()=>o.focusVia(r,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:kc(i)||(i.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i))}}focus(i,r){i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(U7,1),Ge(Ut),Ge(Af),Ge(Jr),Ge(j7,8),Ge(Xr,8),Ua("tabindex"))},t.\u0275cmp=An({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&Rn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Oi("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),iw("height",r._getHeaderHeight()),Kn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[vn],ngContentSelectors:eMe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(Kr(QTe),Lt(0,"span",0),Pn(1),Pn(2,1),Pn(3,2),zt(),xn(4,ZTe,1,1,"span",1)),2&i&&(Kn("mat-content-hide-toggle",!r._showToggle()),Wt(4),Ht("ngIf",r._showToggle()))},dependencies:[ul],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[L7.indicatorRotate]},changeDetection:0}),e})();function V7(t,e,n){return n?V7(t,e).pipe(zy(n)):new B(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=t(r);return U(e)?()=>e(r,o):void 0})}class Uk extends B{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,G(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ae;const n=this.getSubject();e.add(this.source.subscribe(O(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ae.EMPTY)}return e}refCount(){return function jk(){return C((t,e)=>{let n=null;t._refCount++;const i=O(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}()(this)}}const cMe={connector:()=>new Ve};function z7(t,e=cMe){const{connector:n}=e;return C((i,r)=>{const o=n();Ei(t(function aMe(t){return new B(e=>t.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}function Vk(...t){const e=en(t);return C((n,i)=>{const r=t.length,o=new Array(r);let s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)Ei(t[c]).subscribe(O(i,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(rt))&&(s=null))},L));n.subscribe(O(i,c=>{if(a){const l=[c,...o];i.next(e?e(...l):l)}}))})}const{isArray:hMe}=Array;function fMe(t){return 1===t.length&&hMe(t[0])?t[0]:t}function G7(...t){const e=en(t);return e?Qe(G7(...t),zy(e)):C((n,i)=>{OG([n,...fMe(t)])(i)})}const mMe=["youtubeContainer"];let Y7=(()=>{var t;class e{get videoId(){return this._videoId.value}set videoId(i){this._videoId.next(i)}get height(){return this._height.value}set height(i){this._height.next(i||390)}get width(){return this._width.value}set width(i){this._width.next(i||640)}set startSeconds(i){this._startSeconds.next(i)}set endSeconds(i){this._endSeconds.next(i)}set suggestedQuality(i){this._suggestedQuality.next(i)}get playerVars(){return this._playerVars.value}set playerVars(i){this._playerVars.next(i)}get disableCookies(){return this._disableCookies.value}set disableCookies(i){this._disableCookies.next(!!i)}constructor(i,r){this._ngZone=i,this._youtubeContainer=new Ve,this._destroyed=new Ve,this._playerChanges=new Z(void 0),this._videoId=new Z(void 0),this._height=new Z(390),this._width=new Z(640),this._startSeconds=new Z(void 0),this._endSeconds=new Z(void 0),this._suggestedQuality=new Z(void 0),this._playerVars=new Z(void 0),this._disableCookies=new Z(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=yu(r)}ngOnInit(){if(!this._isBrowser)return;let i=qt(!0);if(!window.YT||!window.YT.Player){const s=new Ve;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>s.next(!0))},i=s.pipe(vi(1),Ca(!1))}const r=this._disableCookies.pipe(de(s=>s?"https://www.youtube-nocookie.com":void 0)),o=function yMe(t,e,n,i,r,o,s,a){const c=us([e,n,s]).pipe(Vk(us([r,o])),de(([l,d])=>{const[h,p,_]=l,[x,P]=d;if(h||_?.list&&_?.listType)return{videoId:h,playerVars:_,width:x,height:P,host:p}}));return us([t,c,qt(a)]).pipe(function vMe(t){return Qe(G7(t),function pMe(t){return C((e,n)=>{let i=!1,r=0;e.subscribe(O(n,o=>(i||(i=!t(o,r++)))&&n.next(o)))})}(([e,n])=>!n),de(([e])=>e))}(i),function H7(t,e){return C(function uMe(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(O(s,d=>{const h=l++;c=a?t(c,d,h):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}(xMe,void 0),ht())}(this._youtubeContainer,this._videoId,r,i,this._width,this._height,this._playerVars,this._ngZone).pipe(br(s=>{this._playerChanges.next(s)}),function bMe(t){return fe(e=>e?X7(e)?qt(e):new B(n=>{let i=!1,r=!1;const o=s=>{r=!0,i||(s.target.removeEventListener("onReady",o),n.next(s.target))};return e.addEventListener("onReady",o),()=>{i=!0,r||t(e)}}).pipe(vi(1),Ca(void 0)):qt(void 0))}(s=>{X7(s)||s.destroy()}),_r(this._destroyed),function dMe(t){return t?e=>z7(t)(e):e=>function lMe(t,e){const n=U(t)?t:()=>t;return U(e)?z7(e,{connector:n}):i=>new Uk(i,n)}(new Ve)(e)}());o.subscribe(s=>{this._player=s,s&&this._pendingPlayerState&&this._initializePlayer(s,this._pendingPlayerState),this._pendingPlayerState=void 0}),function gMe(t,e,n){us([t,e,n]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(o,this._width,this._height),function _Me(t,e){us([t,e]).subscribe(([n,i])=>n&&i&&n.setPlaybackQuality(i))}(o,this._suggestedQuality),function wMe(t,e,n,i,r,o){const s=us([n,i]).pipe(de(([d,h])=>({startSeconds:d,endSeconds:h}))),a=s.pipe(zk(t,d=>!!d&&!function EMe(t){const e=t.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(zk(t,(d,h)=>!!d&&d.videoId!==h));go(t.pipe(zk(us([e,s]),([d,h],p)=>!(!p||d==p.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(Vk(us([t,e,s,r])),de(([d,h])=>h),_r(o)).subscribe(([d,h,p,_])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:_,...p}))})}(o,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),o.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(i,r){this._player?this._player.seekTo(i,r):this._getPendingState().seek={seconds:i,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(i,r){const{playbackState:o,playbackRate:s,volume:a,muted:c,seek:l}=r;switch(o){case YT.PlayerState.PLAYING:i.playVideo();break;case YT.PlayerState.PAUSED:i.pauseVideo();break;case YT.PlayerState.CUED:i.stopVideo()}null!=s&&i.setPlaybackRate(s),null!=a&&i.setVolume(a),null!=c&&(c?i.mute():i.unMute()),null!=l&&i.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(i){return this._playerChanges.pipe(qe(r=>r?V7(o=>{r.addEventListener(i,o)},o=>{try{r.removeEventListener&&r.removeEventListener(i,o)}catch{}}):qt()),r=>new B(o=>r.subscribe({next:s=>this._ngZone.run(()=>o.next(s)),error:s=>o.error(s),complete:()=>o.complete()})),_r(this._destroyed))}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(an),Ge(ma))},t.\u0275cmp=An({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&er(mMe,5),2&i){let o;Un(o=Vn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&di(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function xMe(t,[e,n,i]){if(t&&n&&(t.playerVars!==n.playerVars||t.host!==n.host))t.destroy();else{if(!n)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(e,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r.host=n.host,r}function X7(t){return"getPlayerStatus"in t}function zk(t,e){return Qe(Vk(t),xi(([n,i])=>e(i,n)),de(([n])=>n))}function K7(t=SMe){return C((e,n)=>{let i=!1;e.subscribe(O(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function SMe(){return new Vy}let Rf={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const J7=/[&<>"']/,TMe=new RegExp(J7.source,"g"),Z7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,MMe=new RegExp(Z7.source,"g"),IMe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Q7=t=>IMe[t];function hs(t,e){if(e){if(J7.test(t))return t.replace(TMe,Q7)}else if(Z7.test(t))return t.replace(MMe,Q7);return t}const DMe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function eW(t){return t.replace(DMe,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const RMe=/(^|[^\[])\^/g;function ir(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r=r.source||r).replace(RMe,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const OMe=/[^\w:]/g,kMe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function tW(t,e,n){if(t){let i;try{i=decodeURIComponent(eW(n)).replace(OMe,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!kMe.test(n)&&(n=function LMe(t,e){tA[" "+t]||(tA[" "+t]=PMe.test(t)?t+"/":iA(t,"/",!0));const n=-1===(t=tA[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(NMe,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(FMe,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const tA={},PMe=/^[^:]+:\/*[^/]*$/,NMe=/^([^:]+:)[\s\S]*$/,FMe=/^([^:]+:\/*[^/]*)[\s\S]*$/,nA={exec:function(){}};function nW(t,e){const i=t.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function iA(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const o=t.charAt(i-r-1);if(o!==e||n){if(o===e||!n)break;r++}else r++}return t.slice(0,i-r)}function iW(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function rW(t,e,n,i){const r=e.href,o=e.title?hs(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:hs(s)}}class Hk{constructor(e){this.options=e||Rf}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:iA(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function UMe(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=iA(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,o,s,a,c,l,d,h,p,_,x,P=n[1].trim();const F=P.length>1,X={type:"list",raw:"",ordered:F,start:F?+P.slice(0,-1):"",loose:!1,items:[]};P=F?`\\d{1,9}\\${P.slice(-1)}`:`\\${P}`,this.options.pedantic&&(P=F?P:"[*+-]");const Q=new RegExp(`^( {0,3}${P})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(x=!1,(n=Q.exec(e))&&!this.rules.block.hr.test(e));){if(i=n[0],e=e.substring(i.length),d=n[2].split("\n",1)[0].replace(/^\t+/,Te=>" ".repeat(3*Te.length)),h=e.split("\n",1)[0],this.options.pedantic?(s=2,_=d.trimLeft()):(s=n[2].search(/[^ ]/),s=s>4?1:s,_=d.slice(s),s+=n[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),x=!0),!x){const Te=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),je=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Ze=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),at=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(p=e.split("\n",1)[0],h=p,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Ze.test(h)||at.test(h)||Te.test(h)||je.test(e)));){if(h.search(/[^ ]/)>=s||!h.trim())_+="\n"+h.slice(s);else{if(c||d.search(/[^ ]/)>=4||Ze.test(d)||at.test(d)||je.test(d))break;_+="\n"+h}!c&&!h.trim()&&(c=!0),i+=p+"\n",e=e.substring(p.length+1),d=h.slice(s)}}X.loose||(l?X.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(_),r&&(o="[ ] "!==r[0],_=_.replace(/^\[[ xX]\] +/,""))),X.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:_}),X.raw+=i}X.items[X.items.length-1].raw=i.trimRight(),X.items[X.items.length-1].text=_.trimRight(),X.raw=X.raw.trimRight();const ye=X.items.length;for(a=0;a<ye;a++)if(this.lexer.state.top=!1,X.items[a].tokens=this.lexer.blockTokens(X.items[a].text,[]),!X.loose){const Te=X.items[a].tokens.filter(Ze=>"space"===Ze.type),je=Te.length>0&&Te.some(Ze=>/\n.*\n/.test(Ze.raw));X.loose=je}if(X.loose)for(a=0;a<ye;a++)X.items[a].loose=!0;return X}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):hs(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:o}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:nW(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];let o,s,a,c,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=nW(i.rows[o],i.header.length).map(l=>({text:l}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:hs(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):hs(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=iA(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function BMe(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}(n[2],"()");if(s>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),rW(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return rW(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+s);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const p=e.slice(0,s+r.index+(r[0].length-a.length)+c);if(Math.min(s,c)%2){const x=p.slice(1,-1);return{type:"em",raw:p,text:x,tokens:this.lexer.inlineTokens(x)}}const _=p.slice(2,-2);return{type:"strong",raw:p,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=hs(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return"@"===i[2]?(r=hs(this.options.mangle?n(i[1]):i[1]),o="mailto:"+r):(r=hs(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if("@"===i[2])r=hs(this.options.mangle?n(i[0]):i[0]),o="mailto:"+r;else{let s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=hs(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):hs(i[0]):i[0]:hs(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Tn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:nA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Tn.def=ir(Tn.def).replace("label",Tn._label).replace("title",Tn._title).getRegex(),Tn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Tn.listItemStart=ir(/^( *)(bull) */).replace("bull",Tn.bullet).getRegex(),Tn.list=ir(Tn.list).replace(/bull/g,Tn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Tn.def.source+")").getRegex(),Tn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Tn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Tn.html=ir(Tn.html,"i").replace("comment",Tn._comment).replace("tag",Tn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Tn.paragraph=ir(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.blockquote=ir(Tn.blockquote).replace("paragraph",Tn.paragraph).getRegex(),Tn.normal={...Tn},Tn.gfm={...Tn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Tn.gfm.table=ir(Tn.gfm.table).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.gfm.paragraph=ir(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Tn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.pedantic={...Tn.normal,html:ir("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Tn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:nA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ir(Tn.normal._paragraph).replace("hr",Tn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Tn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const cn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:nA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:nA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function VMe(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function oW(t){let n,i,e="";const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}cn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",cn.punctuation=ir(cn.punctuation).replace(/punctuation/g,cn._punctuation).getRegex(),cn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,cn.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,cn._comment=ir(Tn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),cn.emStrong.lDelim=ir(cn.emStrong.lDelim).replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimAst=ir(cn.emStrong.rDelimAst,"g").replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimUnd=ir(cn.emStrong.rDelimUnd,"g").replace(/punct/g,cn._punctuation).getRegex(),cn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,cn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,cn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,cn.autolink=ir(cn.autolink).replace("scheme",cn._scheme).replace("email",cn._email).getRegex(),cn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,cn.tag=ir(cn.tag).replace("comment",cn._comment).replace("attribute",cn._attribute).getRegex(),cn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,cn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,cn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,cn.link=ir(cn.link).replace("label",cn._label).replace("href",cn._href).replace("title",cn._title).getRegex(),cn.reflink=ir(cn.reflink).replace("label",cn._label).replace("ref",Tn._label).getRegex(),cn.nolink=ir(cn.nolink).replace("ref",Tn._label).getRegex(),cn.reflinkSearch=ir(cn.reflinkSearch,"g").replace("reflink",cn.reflink).replace("nolink",cn.nolink).getRegex(),cn.normal={...cn},cn.pedantic={...cn.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ir(/^!?\[(label)\]\((.*?)\)/).replace("label",cn._label).getRegex(),reflink:ir(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cn._label).getRegex()},cn.gfm={...cn.normal,escape:ir(cn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},cn.gfm.url=ir(cn.gfm.url,"i").replace("email",cn.gfm._extended_email).getRegex(),cn.breaks={...cn.gfm,br:ir(cn.br).replace("{2,}","*").getRegex(),text:ir(cn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Uu{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rf,this.options.tokenizer=this.options.tokenizer||new Hk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Tn.normal,inline:cn.normal};this.options.pedantic?(n.block=Tn.pedantic,n.inline=cn.pedantic):this.options.gfm&&(n.block=Tn.gfm,n.inline=this.options.breaks?cn.breaks:cn.gfm),this.tokenizer.rules=n}static get rules(){return{block:Tn,inline:cn}}static lex(e,n){return new Uu(n).lex(e)}static lexInline(e,n){return new Uu(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=n[n.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+iW("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+iW("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,oW)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,oW))){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(function(_){p=_.call({lexer:this},h),"number"==typeof p&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,VMe)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return n}}class _0{constructor(e){this.options=e||Rf}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+hs(r)+'">'+(i?e:hs(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:hs(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,n,i,r){return this.options.headerIds?`<h${n} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${n}>\n`:`<h${n}>${e}</h${n}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(null===(e=tW(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(null===(e=tW(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class sW{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class aW{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class Vu{constructor(e){this.options=e||Rf,this.options.renderer=this.options.renderer||new _0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new sW,this.slugger=new aW}static parse(e,n){return new Vu(n).parse(e)}static parseInline(e,n){return new Vu(n).parseInline(e)}parse(e,n=!0){let r,o,s,a,c,l,d,h,p,_,x,P,F,X,Q,ye,Te,je,Ze,i="";const at=e.length;for(r=0;r<at;r++)if(_=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]&&(Ze=this.options.extensions.renderers[_.type].call({parser:this},_),!1!==Ze||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(_.type)))i+=Ze||"";else switch(_.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(_.tokens),_.depth,eW(this.parseInline(_.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(_.text,_.lang,_.escaped);continue;case"table":for(h="",d="",a=_.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(_.header[o].tokens),{header:!0,align:_.align[o]});for(h+=this.renderer.tablerow(d),p="",a=_.rows.length,o=0;o<a;o++){for(l=_.rows[o],d="",c=l.length,s=0;s<c;s++)d+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:_.align[s]});p+=this.renderer.tablerow(d)}i+=this.renderer.table(h,p);continue;case"blockquote":p=this.parse(_.tokens),i+=this.renderer.blockquote(p);continue;case"list":for(x=_.ordered,P=_.start,F=_.loose,a=_.items.length,p="",o=0;o<a;o++)Q=_.items[o],ye=Q.checked,Te=Q.task,X="",Q.task&&(je=this.renderer.checkbox(ye),F?Q.tokens.length>0&&"paragraph"===Q.tokens[0].type?(Q.tokens[0].text=je+" "+Q.tokens[0].text,Q.tokens[0].tokens&&Q.tokens[0].tokens.length>0&&"text"===Q.tokens[0].tokens[0].type&&(Q.tokens[0].tokens[0].text=je+" "+Q.tokens[0].tokens[0].text)):Q.tokens.unshift({type:"text",text:je}):X+=je),X+=this.parse(Q.tokens,F),p+=this.renderer.listitem(X,Te,ye);i+=this.renderer.list(p,x,P);continue;case"html":i+=this.renderer.html(_.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(_.tokens));continue;case"text":for(p=_.tokens?this.parseInline(_.tokens):_.text;r+1<at&&"text"===e[r+1].type;)_=e[++r],p+="\n"+(_.tokens?this.parseInline(_.tokens):_.text);i+=n?this.renderer.paragraph(p):p;continue;default:{const mt='Token with "'+_.type+'" type was not found.';if(this.options.silent)return void console.error(mt);throw new Error(mt)}}return i}parseInline(e,n){n=n||this.renderer;let r,o,s,i="";const a=e.length;for(r=0;r<a;r++)if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=s||"";else switch(o.type){case"escape":case"text":i+=n.text(o.text);break;case"html":i+=n.html(o.text);break;case"link":i+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break;case"image":i+=n.image(o.href,o.title,o.text);break;case"strong":i+=n.strong(this.parseInline(o.tokens,n));break;case"em":i+=n.em(this.parseInline(o.tokens,n));break;case"codespan":i+=n.codespan(o.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(o.tokens,n));break;default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class rA{constructor(e){this.options=e||Rf}preprocess(e){return e}postprocess(e){return e}}function cW(t,e){return(n,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},s=function zMe(t,e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+hs(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):n?void n(null,r):r}if(e)return Promise.reject(i);if(!n)throw i;n(i)}}((i={...Mn.defaults,...o}).silent,i.async,r);if(typeof n>"u"||null===n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function jMe(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(n=i.hooks.preprocess(n)),c=t(n,i)}catch(h){return s(h)}const l=function(h){let p;if(!h)try{i.walkTokens&&Mn.walkTokens(c,i.walkTokens),p=e(c,i),i.hooks&&(p=i.hooks.postprocess(p))}catch(_){h=_}return i.highlight=a,h?s(h):r(null,p)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return Mn.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(p,_){if(p)return l(p);null!=_&&_!==h.text&&(h.text=_,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(Mn.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(n=i.hooks.preprocess(n));const a=t(n,i);i.walkTokens&&Mn.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}function Mn(t,e,n){return cW(Uu.lex,Vu.parse)(t,e,n)}ve(rA,"passThroughHooks",new Set(["preprocess","postprocess"])),Mn.options=Mn.setOptions=function(t){return function CMe(t){Rf=t}(Mn.defaults={...Mn.defaults,...t}),Mn},Mn.getDefaults=function q7(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Mn.defaults=Rf,Mn.use=function(...t){const e=Mn.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i={...n};if(i.async=Mn.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...s){let a=r.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=Mn.defaults.renderer||new _0;for(const o in n.renderer){const s=r[o];r[o]=(...a)=>{let c=n.renderer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.renderer=r}if(n.tokenizer){const r=Mn.defaults.tokenizer||new Hk;for(const o in n.tokenizer){const s=r[o];r[o]=(...a)=>{let c=n.tokenizer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.tokenizer=r}if(n.hooks){const r=Mn.defaults.hooks||new rA;for(const o in n.hooks){const s=r[o];r[o]=rA.passThroughHooks.has(o)?a=>{if(Mn.defaults.async)return Promise.resolve(n.hooks[o].call(r,a)).then(l=>s.call(r,l));const c=n.hooks[o].call(r,a);return s.call(r,c)}:(...a)=>{let c=n.hooks[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.hooks=r}if(n.walkTokens){const r=Mn.defaults.walkTokens;i.walkTokens=function(o){let s=[];return s.push(n.walkTokens.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}Mn.setOptions(i)})},Mn.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(Mn,i)),i.type){case"table":for(const r of i.header)n=n.concat(Mn.walkTokens(r.tokens,e));for(const r of i.rows)for(const o of r)n=n.concat(Mn.walkTokens(o.tokens,e));break;case"list":n=n.concat(Mn.walkTokens(i.items,e));break;default:Mn.defaults.extensions&&Mn.defaults.extensions.childTokens&&Mn.defaults.extensions.childTokens[i.type]?Mn.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(Mn.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(Mn.walkTokens(i.tokens,e)))}return n},Mn.parseInline=cW(Uu.lexInline,Vu.parseInline),Mn.Parser=Vu,Mn.parser=Vu.parse,Mn.Renderer=_0,Mn.TextRenderer=sW,Mn.Lexer=Uu,Mn.lexer=Uu.lex,Mn.Tokenizer=Hk,Mn.Slugger=aW,Mn.Hooks=rA,Mn.parse=Mn;const HMe=["*"];let lW=(()=>{var t;class e{constructor(){this._buttonClick$=new Ve,this.copied$=this._buttonClick$.pipe(qe(()=>go(qt(!0),yk(3e3).pipe(function Mk(t){return de(()=>t)}(!1)))),ht(),Rs(1)),this.copiedText$=this.copied$.pipe(Ca(!1),de(i=>i?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Lt(0,"button",0),Rn("click",function(){return r.onCopyToClipboardClick()}),ba(1,"async"),ki(2),ba(3,"async"),zt()),2&i&&(Kn("copied",ll(1,3,r.copied$)),Wt(2),$a(ll(3,5,r.copiedText$)))},dependencies:[Vb],encapsulation:2,changeDetection:0}),e})();class $Me{}var Gk=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(Gk||{});class XMe{}const dW=new bt("SECURITY_CONTEXT");let Wk=(()=>{var t;class e{get options(){return this._options}set options(i){this._options={...this.DEFAULT_MARKED_OPTIONS,...i}}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,o,s,a,c){this.platform=i,this.securityContext=r,this.http=o,this.clipboardOptions=s,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new _0},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ve,this.reload$=this._reload$.asObservable(),this.options=a}parse(i,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:o,inline:s,emoji:a,mermaid:c,disableSanitizer:l}=r,d={...this.options,...r.markedOptions};c&&(this.renderer=this.extendRenderer(d.renderer||new _0));const h=this.trimIndentation(i),p=o?this.decodeHtml(h):h,_=a?this.parseEmoji(p):p,x=this.parseMarked(_,d,s);return(l?x:this.sanitizer.sanitize(this.securityContext,x))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,o){const{clipboard:s,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=r;s&&this.renderClipboard(i,o,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...a}),c&&this.renderKatex(i,{...this.DEFAULT_KATEX_OPTIONS,...l}),d&&this.renderMermaid(i,{...this.DEFAULT_MERMAID_OPTIONS,...h}),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(i,{responseType:"text"}).pipe(de(r=>this.handleExtension(i,r)))}highlight(i){if(!yu(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);const r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,o=>o.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!yu(this.platform))return i;const r=document.createElement("textarea");return r.innerHTML=i,r.value}extendRenderer(i){const r=i;if(!0===r.\u0275NgxMarkdownRendererExtended)return i;const o=i.code;return i.code=function(s,a,c){return"mermaid"===a?`<div class="mermaid">${s}</div>`:o.call(this,s,a,c)},r.\u0275NgxMarkdownRendererExtended=!0,i}handleExtension(i,r){const o=i.lastIndexOf("://"),s=o>-1?i.substring(o+4):i,a=s.lastIndexOf("/"),c=a>-1?s.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&"md"!==d?"```"+d+"\n"+r+"\n```":r}parseMarked(i,r,o=!1){return o?Mn.parseInline(i,r):Mn.parse(i,r)}parseEmoji(i){if(!yu(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(yu(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(i,r)}}renderClipboard(i,r,o){if(!yu(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:a}=o,c=i.querySelectorAll("pre");for(let l=0;l<c.length;l++){const d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);const p=document.createElement("div");let _,x;p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.opacity="0",p.style.transition="opacity 250ms ease-out",h.insertAdjacentElement("beforeend",p),d.onmouseover=()=>p.style.opacity="1",d.onmouseout=()=>p.style.opacity="0",_=s?r.createComponent(s).hostView:a?r.createEmbeddedView(a):r.createComponent(lW).hostView,_.rootNodes.forEach(P=>{P.onmouseover=()=>p.style.opacity="1",p.appendChild(P),x=new ClipboardJS(P,{text:()=>d.innerText})}),_.onDestroy(()=>x.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!yu(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const o=i.querySelectorAll(".mermaid");0!==o.length&&(mermaid.initialize(r),mermaid.init(o))}trimIndentation(i){if(!i)return"";let r;return i.split("\n").map(o=>{let s=r;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(r)&&(r=s),s?o.substring(s):o}).join("\n")}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(ma),nt(dW),nt(yg,8),nt($Me,8),nt(XMe,8),nt(Gb))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),uW=(()=>{var t;class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(i){this._srcRelativeLink=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,o){this.element=i,this.markdownService=r,this.viewContainerRef=o,this.error=new tn,this.load=new tn,this.ready=new tn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new Ve}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(_r(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){let o;this.src&&this.srcRelativeLink&&(o={baseUrl:new URL(this.src,location.origin).pathname});const a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},c=this.markdownService.parse(i,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:o,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=c,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(i){return null!=i&&"false"!=`${String(i)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i),this.load.emit(i)},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Gk.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Gk.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++){const a=r instanceof Array?r:[r];o.item(s).classList.add(...a)}}setPluginOptions(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(r).forEach(a=>{const c=r[a];if(c){const l=this.toLispCase(a);o.item(s).setAttribute(l,c.toString())}})}toLispCase(i){const r=i.match(/([A-Z])/g);if(!r)return i;let o=i.toString();for(let s=0,a=r.length;s<a;s++)o=o.replace(new RegExp(r[s]),"-"+r[s].toLowerCase());return"-"===o.slice(0,1)&&(o=o.slice(1)),o}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Ut),Ge(Wk),Ge(zo))},t.\u0275cmp=An({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Pr],ngContentSelectors:HMe,decls:1,vars:0,template:function(i,r){1&i&&(Kr(),Pn(0))},encapsulation:2}),e})();var hW;!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(hW||(hW={}));let fW=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=jt({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]}),e})();function xg(t){return!0===t}function Zs(t){return null===t||typeof t>"u"}function fs(t){return!Zs(t)}function $k(t){return!!t}function yW(t){return Zs(t)?t:JSON.parse(JSON.stringify(t))}function vW(t){return fs(t)&&"object"==typeof t&&function Yk(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}const UIe="NGXS_COMPUTED_OPTION",EW="NGXS_DATA_META",Xk="NGXS_META",AW="NGXS_ARGUMENT_REGISTRY_META";let SW=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new Z(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(nt(Tl,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();function y0(t){return t[EW]}let oc=(()=>{class t{constructor(n,i,r){t.store=n.get(Tl),t.ngZone=n.get(an),t.factory=i,t.context=r,t.computed=n.get(SW),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(nt(wr),nt(zz),nt(Hz))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();class $r{constructor(){$r.statesCachedMeta.clear()}static createStateContext(e){return oc.context.createStateContext(e)}static ensureMappedState(e){if(Zs(oc.factory)||Zs(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(fs(e.name)?$r.statesCachedMeta.get(e.name):null)||$r.ensureMeta(e)}static getRepositoryByInstance(e){const i=y0($r.getStateClassByInstance(e))??null;if(Zs(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=$r.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=n?.getPayloadTypeByIndex(o);fs(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=$r.createPayload(n,i),o=function GIe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new o(r)}static ensureMeta(e){const n=fs(e.name)?oc.factory.states?.find(i=>i.name===e.name):null;return fs(n)&&fs(e.name)&&$r.statesCachedMeta.set(e.name,n),n}}$r.statesCachedMeta=new Map,$r.\u0275fac=function(e){return new(e||$r)},$r.\u0275prov=Et({token:$r,factory:$r.\u0275fac}),new class WIe{constructor(){this.subject=new Sm(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function wd(t,e){const n=arguments.length>=2;return i=>i.pipe(t?xi((r,o)=>t(r,o,i)):rt,vi(1),n?ag(e):K7(()=>new Vy))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Sm(1)}};class YIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${fs(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function CW(t){return t.NGXS_OPTIONS_META??{name:""}}function TW(t){const e=CW(t),n=e.children??[],r=yW(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(vW(r))return function XIe(t,e){return e.reduce((n,i)=>{const r=CW(i);if(function b0(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=TW(i),n},t??{})}(r,n);throw new YIe(r)}return r}function MW(){return`__${UIe}__`}function IW(t){return t[MW()]??null}function DW(){return oc?.computed?.sequenceValue??0}function JIe(t){let e=!1;return mf(t)&&(e=!0),e}function Kk(t){return t[AW]}class ZIe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class QIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if($k(this.argumentMap.has(e))||$k(this.payloadMap.has(e)))throw new ZIe(e,n)}}function oDe(t){return{enumerable:!0,configurable:!0,get(){const e=y0(t),n=$r.ensureMappedState(e.stateMeta);return $r.createStateContext(n)}}}const uDe={dataActionSubscribeRequired:!0},hDe=new bt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>uDe});let fDe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[$r,oc,SW,...n]}}}return t.\u0275fac=function(n){return new(n||t)(nt($r,2),nt(oc,2))},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),t})();function RW(){return(t,e,n)=>{!function HIe(t,e){if(!function kIe(t,e){let n=t,i=!1;if(vW(n))for(;null!==n;){if(xg(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const o=function qIe(t){return Zs(IW(t))&&Object.defineProperties(t,{[MW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),IW(t)}(this),s=o?.get(i);if(xg(s?.isObservable))return s?.value;if(Zs(s)||s.sequenceId!==DW()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:DW(),isObservable:JIe(c)}),c}return s?.value},n}}const pDe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function qk(t={}){const e=function mDe(t){const e=oc?.injector?.get(hDe,void 0,Ln.Optional),n={...pDe};return fs(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function zIe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=$r.getRepositoryByInstance(c),h=d.operations;let p=h[s];const _=d.stateMeta,x=Kk(o);if(Zs(p)){const ye=function dDe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),Te=function $Ie(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let o="";for(let s=0;s<n.length;s++)fs(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):fs(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==n.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:_.path,methodName:s,argumentsNames:ye,argumentRegistry:x});p=h[s]={type:Te,options:{cancelUncompleted:e.cancelUncompleted??!1}},fs(p)&&(_.actions[p.type]=[{type:p.type,options:p.options,fn:p.type}])}$r.ensureMappedState(_).instance[p.type]=()=>(xg(e.insideZone)?oc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),mf(l)&&xg(e.subscribeRequired)?qt(null).pipe(de(()=>l)):l);const X=$r.createAction(p,a,x),Q=oc.store.dispatch(X);return mf(l)?function KIe(t,e){return Hy([t,e]).pipe(de(n=>n.pop()))}(Q,l):l},r}}function OW(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function eDe(t,e){const n=t[e];return Zs(Kk(n))&&Object.defineProperties(n,{[AW]:{enumerable:!0,configurable:!0,value:new QIe}}),Kk(n)})(e,n).createPayloadType(r,n,i)}}function _De(){return t=>{const e=function lDe(t){if(function wIe(t){return!$k(t)}(t.hasOwnProperty(Xk))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Xk,{value:e})}return function cDe(t){return t?.[Xk]}(t)}(t);if(Zs(e.name))throw new Error("@StateRepository should be add before decorator @State");!function iDe(t,e){(function nDe(t){const e=y0(t)??null;return(Zs(e)||e?.stateClass!==t)&&function tDe(t){Object.defineProperty(t,EW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),y0(t)}(t)).stateMeta=e}(t,e),function bDe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>yW(n)},context:oDe(t)})}(t,e,TW(t)),function sDe(t){const n=y0(t)?.stateMeta?.name??null;if(fs(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(fs(this[i]))return this[i];if(Zs(oc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=oc.store.select(t).pipe(de(r=>r),Rs({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let yDe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new Ve,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})(),vDe=(()=>{class t extends yDe{get snapshot(){return this.getState()}get ctx(){return function aDe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Vi(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac}),dt([RW(),oe("design:type",Object),oe("design:paramtypes",[])],t.prototype,"snapshot",null),dt([qk(),Vt(0,OW("patchValue")),oe("design:type",Function),oe("design:paramtypes",[Object]),oe("design:returntype",void 0)],t.prototype,"patchState",null),dt([qk(),Vt(0,OW("stateValue")),oe("design:type",Function),oe("design:paramtypes",[Object]),oe("design:returntype",void 0)],t.prototype,"setState",null),dt([qk(),oe("design:type",Function),oe("design:paramtypes",[]),oe("design:returntype",void 0)],t.prototype,"reset",null),t})();const SA=new bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),bP=new bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Gt(zn);if(!t)throw new Error("Window is not available");return t}}),D2e=new bt("ngx-data-layer",{providedIn:"root",factory:()=>function I2e(t){return t?t.dataLayer=t.dataLayer||[]:null}(Gt(bP))}),k$=new bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function R2e(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Gt(bP),Gt(D2e))});let P$=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,o){try{const s=new Map([["page_path",n]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(n,i,r,o,s){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(nt(SA),nt(zn),nt(k$))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new bt("ngx-google-analytics-routing-settings",{factory:()=>({})}),new bt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});class U$ extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class cOe{constructor(){this.cancelUncompleted$=new Ve}cancelPreviousAction(){this.cancelUncompleted$.next()}}const yP="\u0275fac",V$=Symbol("InjectorInstance"),z$=Symbol("FactoryHasBeenDecorated");function H$(t,e){const n=t[V$];return n?n.get(e):null}const uOe={cancelUncompleted:!1};function G$(t=uOe){return(e,n,i)=>{let r;const o=function lOe(t){return t?new cOe:null}(t.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=H$(this,Tl)||function sOe(){throw new U$}(),c=H$(this,an)||function aOe(){throw new U$}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function oOe(t,e,n){return _m(e)?function rOe(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):mf(e)?function iOe(t,e,n){return null!==n&&(e=e.pipe(_r(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,n,{set:a=>r=a,get:()=>s}),function dOe(t){if(z$ in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[yP]&&function vP(t){const e=t[yP];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[V$]=Ge(Kp),r};n&&(n.factory=i),Object.defineProperty(t,yP,{get:()=>i})}(e),t.constructor.prototype[z$]=!0}(e)}}var Pf;const nke=["bodyCanvas"];let ike=(()=>{var t;class e{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new tn,this.nodeDrag=new tn,this.nodeClick=new tn,this.nodeHoverStart=new tn,this.nodeHoverStop=new tn,this.initialized=new tn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,r={x:48,y:48}){if(this.bodyCanvas){const{width:o,height:s}=this.bodyCanvas.nativeElement,a=window.devicePixelRatio,c=Math.min(Math.log2((o-r.x)/a/i.x),Math.log2((s-r.y)/a/i.y));this.zoom=c}}setupBodyUI(){var i=this;return Bt(function*(){const r=i.bodyCanvas.nativeElement,o=new cwe({id:"body-ui",canvas:r,zoom:i.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:i.interactive,camera:i.camera});r.addEventListener("contextmenu",s=>s.preventDefault()),yield o.initialize(),i.bodyUI=o,window.bodyUI=o,i.scene?.length>0&&i.bodyUI.setScene(i.scene),i.bounds&&i.zoomToBounds(i.bounds),i.target&&i.bodyUI.setTarget(i.target),i.subscriptions=[i.bodyUI.sceneRotation$.subscribe(s=>i.rotationChange.next(s)),i.bodyUI.nodeDrag$.subscribe(s=>i.nodeDrag.emit(s)),i.bodyUI.nodeClick$.subscribe(s=>i.nodeClick.emit(s)),i.bodyUI.nodeHoverStart$.subscribe(s=>i.nodeHoverStart.emit(s)),i.bodyUI.nodeHoverStop$.subscribe(s=>i.nodeHoverStop.emit(s))],i.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&er(nke,5,Ut),2&i){let o;Un(o=Vn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Wa(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&di(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),e})(),rke=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({imports:[Dr]}),e})();function Eke(t,e){if(1&t&&(Lt(0,"div",16),di(1,"youtube-player",17),zt()),2&t){const n=On(3);Wt(1),tw("videoId",n.videoID)}}function Ake(t,e){if(1&t&&(Lt(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),ki(3),zt()(),Lt(4,"div",13),di(5,"markdown",14),xn(6,Eke,2,1,"div",15),zt()()),2&t){const n=On(),i=n.index,r=n.$implicit;Ht("expanded",0===i),Wt(3),$a(r.title),Wt(2),Kn("first",0===i),Ht("data",r.content),Wt(1),Ht("ngIf",0===i)}}function Ske(t,e){if(1&t&&(Lt(0,"div",9),xn(1,Ake,7,6,"mat-expansion-panel",10),zt()),2&t){const n=e.$implicit;Wt(1),Ht("ngIf",n)}}new bt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name)).filter(t=>!0!==t.disabled);let oY=(()=>{var t;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.documentationContents=r.content||[],this.infoTitle=r.title||"",this.videoID=r.videoID}ngOnInit(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(Lk),Ge(T7))},t.\u0275cmp=An({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Lt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),ki(5),zt(),Lt(6,"div",5)(7,"mat-icon",6),Rn("click",function(){return r.close()}),ki(8,"clear"),zt()()(),Lt(9,"mat-dialog-content",7),xn(10,Ske,2,1,"div",8),zt()()()()),2&i&&(Wt(5),$a(r.infoTitle),Wt(5),Ht("ngForOf",r.documentationContents))},dependencies:[Gh,ul,I7,D7,vg,U7,oMe,Y7,uW],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e})(),sY=(()=>{var t;class e{constructor(i){this.http=i,this.panelContent=new Z({content:[],infoTitle:"",videoID:""})}updateData(i,r,o){this.http.get(i,{responseType:"text"}).subscribe(s=>{const a={content:this.parseMarkdown(s),infoTitle:o,videoID:r};this.panelContent.next(a)})}parseMarkdown(i){const r=[],o=i.split("# ");for(const s of o)if(s.length){const a=s.includes("\n\n")?"\n\n":"\r\n\r\n",c=s.split(a);r.push({title:c[0],content:c.splice(1).join(a)})}return r}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(yg))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Tke=(()=>{var t;class e{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new tn,this.closeClicked=new tn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Wa(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Lt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),ki(5),zt(),Lt(6,"mat-icon",5),Rn("click",function(){return r.close()}),ki(7,"clear"),zt()(),di(8,"img",6),Lt(9,"mat-dialog-content",7)(10,"div",8),ki(11),zt(),Lt(12,"a",9),Rn("click",function(){return r.onDialogButtonClick()}),zt()()()()()),2&i&&(Wt(5),$a(r.infoTitle),Wt(3),Ht("src",r.imageUrl,K_),Wt(3),_a(" ",r.message,""),Wt(1),Ht("text",r.callToAction))},dependencies:[vg,I7,D7,fW],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),e})(),N0=(()=>{var t;let e=((t=class extends vDe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function xDe(){return xi(t=>null!=t)}(),Rs(1))}setConfig(i){this.setState(i)}patchConfig(i){this.patchState(i)}getProperty(i){return this.config$.pipe($9(...i),ht(),Rs(1))}getOption(...i){const r=this.getPathKey(i);if(this.optionCache.has(r))return this.optionCache.get(r);const o=this.config$.pipe($9(...i),ht(),Rs(1));return this.optionCache.set(r,o),o}getPathKey(i){return`${i.length}:${i.join(".")}`}}).\u0275fac=function(){let n;return function(r){return(n||(n=Vi(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t);return dt([RW()],e.prototype,"config$",null),e=dt([_De(),pH({name:"globalConfig",defaults:null})],e),e})();!function Dke(){const t=localStorage.getItem("ALLOW_TELEMETRY");null===t||t.toLowerCase()}(),new Ve;let wP=(()=>{class e{}return e.type="[CallToAction] Learn More",e})(),EP=(()=>{class e{}return e.type="[CallToAction] Open Dialog",e})(),AP=(()=>{class e{}return e.type="[CallToAction] Close Dialog",e})();var SP;class Sd{get length(){return Sd.storage?.length??0}key(e){return Sd.storage?.key(e)??null}getItem(e,n){return Sd.storage?.getItem(e)??n??null}setItem(e,n){try{return Sd.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){Sd.storage?.removeItem(e)}clear(){Sd.storage?.clear()}}(Pf=Sd).storage=(()=>{let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length?t:void 0}})(),Pf.\u0275fac=function(e){return new(e||Pf)},Pf.\u0275prov=Et({token:Pf,factory:Pf.\u0275fac,providedIn:"root"});const lY="callToActionPopupShown";let Hu=(()=>{var t;let e=(t=class{static ctaDatePassed(i,r=Date.now){return+r()>+new Date(i)}constructor(i,r,o,s,a){this.dialog=i,this.ga=r,this.storage=o,this.infoService=s,this.http=a}ngxsOnInit(i){const{expirationDate:r,popupShown:o}=i.getState(),s=this.storage.getItem(lY,`${o}`),a=SP.ctaDatePassed(r);"true"!==s&&!a&&i.dispatch(new EP)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(de(i=>this.infoService.parseMarkdown(i)))}launchLearnMore(i){this.dialog.open(oY,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:i,videoID:"UfxMpzatowE"}})}learnMore(i){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(br(r=>this.launchLearnMore(r)))}open(i){this.dialog.open(Pke,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(lY,"true"),i.patchState({popupShown:!0})}close(i){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},SP=t,t.\u0275fac=function(i){return new(i||t)(nt(eA),nt(P$),nt(Sd),nt(sY),nt(yg))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t);return dt([IO(wP)],e.prototype,"learnMore",null),dt([IO(EP)],e.prototype,"open",null),dt([IO(AP)],e.prototype,"close",null),e})();Hu=SP=dt([pH({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Hu);let TA=(()=>{class t{static title(n){return n.title}static message(n){return n.message}static callToAction(n){return n.callToAction}static imageUrl(n){return n.imageUrl}static expirationDate(n){return n.expirationDate}static popupShown(n){return n.popupShown}}return dt([dg([Hu])],t,"title",null),dt([dg([Hu])],t,"message",null),dt([dg([Hu])],t,"callToAction",null),dt([dg([Hu])],t,"imageUrl",null),dt([dg([Hu])],t,"expirationDate",null),dt([dg([Hu])],t,"popupShown",null),t})(),Pke=(()=>{var t;class e{constructor(){this.close=()=>new AP,this.learnMore=()=>new wP}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Lt(0,"ccf-call-to-action",0),Rn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),ba(1,"async"),ba(2,"async"),ba(3,"async"),ba(4,"async"),zt()),2&i&&Ht("infoTitle",ll(1,4,r.title$))("message",ll(2,6,r.message$))("callToAction",ll(3,8,r.callToAction$))("imageUrl",ll(4,10,r.imageUrl$))},dependencies:[Tke,Vb],changeDetection:0}),dt([lE(TA.title)],e.prototype,"title$",void 0),dt([lE(TA.message)],e.prototype,"message$",void 0),dt([lE(TA.callToAction)],e.prototype,"callToAction$",void 0),dt([lE(TA.imageUrl)],e.prototype,"imageUrl$",void 0),dt([G$()],e.prototype,"close",void 0),dt([G$()],e.prototype,"learnMore",void 0),e})();const dY="http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity",jke=[173,255,47,229.5];function Qs(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}let CP;function Lc(){return CP||(CP=function Gke(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=Qs(n);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),CP}function Wke(t,e=Lc()){return e("readonly",n=>Qs(n.get(t)))}function $ke(t,e=Lc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),Qs(n.transaction)))}function Yke(t,e=Lc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),Qs(n.transaction)))}var Xke=m(5020),MA=m(4938),Kke=m.t(MA,2),qke=m.n(MA),Jke=m(7991),uY=m(5440),IA=m(7184),F0=m(9689),Zke=m(7661);const L0="http://www.w3.org/1999/02/22-rdf-syntax-ns#",B0="http://www.w3.org/2001/XMLSchema#",MP="http://www.w3.org/2000/10/swap/",ks={xsd:{decimal:`${B0}decimal`,boolean:`${B0}boolean`,double:`${B0}double`,integer:`${B0}integer`,string:`${B0}string`},rdf:{type:`${L0}type`,nil:`${L0}nil`,first:`${L0}first`,rest:`${L0}rest`,langString:`${L0}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${MP}reify#forSome`,forAll:`${MP}reify#forAll`},log:{implies:`${MP}log#implies`}};function IP(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);n[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||ji,i}const{rdf:Qke,xsd:Nf}=ks;let j0,ePe=0;const fY=/^"(.*".*)(?="[^"]*$)/,tPe=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,DP={namedNode:function sPe(t){return new pY(t)},blankNode:function aPe(t){return new nPe(t||"n3-"+ePe++)},variable:function lPe(t){return new iPe(t)},literal:function cPe(t,e){if("string"==typeof e)return new Rg(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=Nf.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?Nf.integer:Nf.double:(n=Nf.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new Rg(""===n||n===Nf.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function dPe(){return j0},quad:mY,triple:mY},ji=DP;class Cd{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Cd?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class pY extends Cd{get termType(){return"NamedNode"}}class Rg extends Cd{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new pY(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?Nf.string:Qke.langString}equals(e){return e instanceof Rg?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class nPe extends Cd{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class iPe extends Cd{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Td(t,e){if(e=e||DP,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===DP)return new Rg(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const i=tPe.exec(t);return e.quad(Td(DA(i[1]),e),Td(DA(i[2]),e),Td(DA(i[3]),e),i[4]&&Td(DA(i[4]),e));default:return e.namedNode(t)}}function Wi(t){if("string"==typeof t)return t;if(t instanceof Cd&&"Quad"!==t.termType)return t.id;if(!t)return j0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Nf.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${RP(Wi(t.subject))} ${RP(Wi(t.predicate))} ${RP(Wi(t.object))}${function hY(t){return!!t&&"DefaultGraph"===t.termType}(t.graph)?"":` ${Wi(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}j0=new class rPe extends Cd{constructor(){return super(""),j0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class oPe extends Cd{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||j0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function RP(t){return t.replace(fY,(e,n)=>`"${n.replace(/"/g,'""')}`)}function DA(t){return t.replace(fY,(e,n)=>`"${n.replace(/""/g,'"')}`)}function mY(t,e,n,i){return new oPe(t,e,n,i)}var uPe=m(3410),hPe=m.n(uPe);const{xsd:RA}=ks,fPe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,gY={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},pPe=/[\x00-\x20<>\\"\{\}\|\^\`]/,mPe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},gPe=/$0^/;class _Pe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in mPe)&&this[n]instanceof RegExp&&(this[n]=gPe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",p="",_="",x=null,P=0,F=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(P=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){F=!0;break}case"<":if(x=this._unescapedIri.exec(i))h="IRI",p=x[1];else if(x=this._iri.exec(i)){if(p=this._unescape(x[1]),null===p||pPe.test(p))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",P=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",P=2,p=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",P=2);break;case"_":((x=this._blank.exec(i))||n&&(x=this._blank.exec(`${i} `)))&&(h="blank",_="_",p=x[1]);break;case'"':if(x=this._simpleQuotedString.exec(i))p=x[1];else if(({value:p,matchLength:P}=this._parseLiteral(i)),null===p)return s(this);(null!==x||0!==P)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(x=this._simpleApostropheString.exec(i))p=x[1];else if(({value:p,matchLength:P}=this._parseLiteral(i)),null===p)return s(this);(null!==x||0!==P)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(x=this._variable.exec(i))&&(h="var",p=x[0]);break;case"@":"literal"===this._previousMarker&&(x=this._langcode.exec(i))?(h="langcode",p=x[1]):(x=this._keyword.exec(i))&&(h=x[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",P=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(x=this._number.exec(i)||n&&(x=this._number.exec(`${i} `)))&&(h="literal",p=x[0],_="string"==typeof x[1]?RA.double:"string"==typeof x[2]?RA.decimal:RA.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(x=this._sparqlKeyword.exec(i))?h=x[0].toUpperCase():F=!0;break;case"f":case"t":(x=this._boolean.exec(i))?(h="literal",p=x[0],_=RA.boolean):F=!0;break;case"a":(x=this._shortPredicates.exec(i))?(h="abbreviation",p="a"):F=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(P=1,p="="):(P=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(P=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",P=2):(h=d,P=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",P=2);break;default:F=!0}if(F&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(x=this._prefix.exec(i))?((x=this._prefixed.exec(i))||n&&(x=this._prefixed.exec(`${i} `)))&&(h="prefixed",_=x[1]||"",p=this._unescape(x[2])):(h="prefix",p=x[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const X=P||x[0].length,Q=o(h,p,_,l,X);this.previousToken=Q,this._previousMarker=h,i=i.substr(X,i.length)}function o(a,c,l,d,h){const p=i?r-i.length:r,x={type:a,value:c,prefix:l,line:d,start:p,end:p+h};return e(null,x),x}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(fPe,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in gY?gY[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}hPe()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}let _Y=0;class bY{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&yY(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),o=/triple/.test(n),s=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new _Pe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){_Y=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:n,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=OP}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<n;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<n&&"/"!==e[o];)r=o;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${_Y++}_`,this._prefixCallback=i||OP,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=n,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=OP):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function OP(){}function yY(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(ks.rdf.first),t.RDF_REST=n(ks.rdf.rest),t.RDF_NIL=n(ks.rdf.nil),t.N3_FORALL=n(ks.r.forAll),t.N3_FORSOME=n(ks.r.forSome),t.ABBREVIATIONS={a:n(ks.rdf.type),"=":n(ks.owl.sameAs),">":n(ks.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}yY(bY.prototype,ji);var kP=m(8905);class PP{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||ji,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const o in n)for(const s in i=n[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const o=e[n]||(e[n]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,n,i,r){const o=e[n],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[n]}*_findInIndex(e,n,i,r,o,s,a,c){let l,d,h;const p=this._entities,_=Td(c,this._factory),x={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const P in e)if(d=e[P]){x[o]=Td(p[P],this._factory),i&&((l=d,d={})[i]=l[i]);for(const F in d)if(h=d[F]){x[s]=Td(p[F],this._factory);const X=r?r in h?[r]:[]:Object.keys(h);for(let Q=0;Q<X.length;Q++)x[a]=Td(p[X[Q]],this._factory),yield this._factory.quad(x.subject,x.predicate,x.object,_)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,o;if(r=e[n])for(o in r)i(o)}_loopByKey1(e,n,i){let r,o;for(r in e)o=e[r],o[n]&&i(r)}_loopBy2Keys(e,n,i,r){let o,s,a;if((o=e[n])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,n,i,r){let s,a,c,o=0;n&&((s=e,e={})[n]=s[n]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Ta(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(Td(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Wi(e),n=Wi(n),i=Wi(i),r=Wi(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),n=s[n]||(s[a[++this._id]=n]=this._id),i=s[i]||(s[a[++this._id]=i]=this._id);const c=this._addToIndex(o.subjects,e,n,i);return this._addToIndex(o.predicates,n,i,e),this._addToIndex(o.objects,i,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Wi(e),n=Wi(n),i=Wi(i),r=Wi(r);const o=this._ids,s=this._graphs;let a,c,l;if(!((e=o[e])&&(n=o[n])&&(i=o[i])&&(a=s[r])&&(c=a.subjects[e])&&(l=c[n])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,n,i),this._removeFromIndex(a.predicates,n,i,e),this._removeFromIndex(a.objects,i,e,n),null!==this._size&&this._size--,a.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const o=new kP.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,n,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){e=e&&Wi(e),n=n&&Wi(n),i=i&&Wi(i),r=r&&Wi(r);const o=this._getGraphs(r),s=this._ids;let a,c,l,d;if(!(Ta(e)&&!(c=s[e])||Ta(n)&&!(l=s[n])||Ta(i)&&!(d=s[i])))for(const h in o)(a=o[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,n,i,r){return new NP(this,e,n,i,r)}countQuads(e,n,i,r){e=e&&Wi(e),n=n&&Wi(n),i=i&&Wi(i),r=r&&Wi(r);const o=this._getGraphs(r),s=this._ids;let c,l,d,h,a=0;if(Ta(e)&&!(l=s[e])||Ta(n)&&!(d=s[n])||Ta(i)&&!(h=s[i]))return 0;for(const p in o)(c=o[p])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):n?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,n,i,r,o){this.some(s=>(e(s),!1),n,i,r,o)}every(e,n,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),n,i,r,o);return s&&a}some(e,n,i,r,o){for(const s of this.readQuads(n,i,r,o))if(e(s))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,n,i),r}forSubjects(e,n,i,r){n=n&&Wi(n),i=i&&Wi(i),r=r&&Wi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ta(n)&&!(c=o[n])||Ta(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,n,i),r}forPredicates(e,n,i,r){n=n&&Wi(n),i=i&&Wi(i),r=r&&Wi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ta(n)&&!(c=o[n])||Ta(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(o=>{r.push(o)},e,n,i),r}forObjects(e,n,i,r){n=n&&Wi(n),i=i&&Wi(i),r=r&&Wi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ta(n)&&!(c=o[n])||Ta(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,n,i),r}forGraphs(e,n,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),n,i,r,o)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,ks.rdf.rest,ks.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const p=a.graph;let _=a.subject;for(;_&&!l;){const x=this.getQuads(null,null,_,null),P=this.getQuads(_,null,null,null);let F,X=null,Q=null,ye=null;for(let Te=0;Te<P.length&&!l;Te++)F=P[Te],F.graph.equals(p)?d?l=r(_,"has non-list arcs out"):F.predicate.value===ks.rdf.first?X?l=r(_,"has multiple rdf:first arcs"):s.push(X=F):F.predicate.value===ks.rdf.rest?Q?l=r(_,"has multiple rdf:rest arcs"):s.push(Q=F):x.length?l=r(_,"can't be subject and object"):(d=F,h="subject"):l=r(_,"not confined to single graph");for(let Te=0;Te<x.length&&!l;++Te)F=x[Te],d?l=r(_,"can't have coreferences"):F.predicate.value===ks.rdf.rest?ye?l=r(_,"has incoming rdf:rest arcs"):ye=F:(d=F,h="object");X?c.unshift(X.object):l=r(_,"has no list head"),_=ye&&ye.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}function Ta(t){return"string"==typeof t||t instanceof String}class NP extends kP.Readable{constructor(e,n,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:o}=this,s=this._filtered=new PP({factory:e._factory});for(const a of e.readQuads(o,r,i,n))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new NP(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var bPe=m(2821);function dr(t,e,n,i,r){return t.readQuads(e,n,i,r)}function vY(t){const e=t.length;let n=0;return new kP.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function FP(t,e){return LP.apply(this,arguments)}function LP(){return LP=Bt(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield Zke.toRDF(n);e.import(vY(i))}return e}),LP.apply(this,arguments)}function BP(){return BP=Bt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new bPe.RdfXmlParser({dataFactory:ji,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(n),i.end(),r}return e}),BP.apply(this,arguments)}function jP(){return jP=Bt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new bY({format:"n3"}).parse(n);e.import(vY(i))}return e}),jP.apply(this,arguments)}function UP(t,e){const n=JSON.parse(t),i=new PP;return Object.assign(i,n,{_factory:e??ji}),i}const $i=IP({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},ji),Zt=($i("rdf"),$i("rdf")("type"),$i("rdfs"),$i("rdfs")("label"),$i("rdfs")("comment"),$i("rdfs")("isDefinedBy"),$i("rdfs")("seeAlso"),$i("ccf")),Md=($i("ccf")("has_registration_location"),$i("rdfs")("label"),$i("rdfs")("comment"),Zt("url"),Zt("sex"),Zt("age"),Zt("bmi"),ji.literal("Male"),ji.literal("Female"),Zt("consortium_name"),Zt("tissue_provider_name"),Zt("tissue_provider_uuid"),Zt("comes_from"),Zt("subdivided_into_sections"),Zt("generates_dataset"),Zt("sample_type"),ji.literal("Tissue Block"),ji.literal("Tissue Section"),ji.literal("Non-standard"),Zt("section_count"),Zt("section_size"),Zt("section_size_unit"),Zt("section_number"),Zt("has_registration_location"),Zt("has_ontology_term"),Zt("has_cell_type_term"),Zt("technology"),Zt("thumbnail"),{x:Zt,base:$i("base"),ontologyNode:{label:Zt("ccf_pref_label"),parent:Zt("ccf_part_of"),children:Zt("ccf_part_of"),rui_rank:Zt("rui_rank"),synonymLabels:ji.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Zt("ccf_part_of"),ct_is_a:Zt("ccf_ct_isa"),located_in:Zt("ccf_located_in"),characterizes:Zt("ccf_characterizes")},spatial:{Female:$i("base")("VHFemale"),Male:$i("base")("VHMale"),BothSexes:$i("base")("VHBothSexes"),FemaleOrgans:$i("base")("VHFemaleOrgans"),MaleOrgans:$i("base")("VHMaleOrgans")},SpatialObjectReference:Zt("spatial_object_reference"),SpatialEntity:Zt("spatial_entity"),SpatialPlacement:Zt("spatial_placement"),spatialObjectReference:{file:Zt("file_url"),file_format:Zt("file_format"),file_subpath:Zt("file_subpath")},extractionSet:{label:$i("rdfs")("label"),rui_rank:Zt("rui_rank")},spatialEntity:{label:$i("rdfs")("label"),description:$i("rdfs")("comment"),creator:$i("dcterms")("creator"),creator_first_name:Zt("creator_first_name"),creator_last_name:Zt("creator_last_name"),creator_orcid:Zt("creator_orcid"),creation_date:$i("dcterms")("created"),updated_date:Zt("updated_date"),ccf_annotations:Zt("collides_with"),representation_of:Zt("representation_of"),reference_organ:Zt("has_reference_organ"),extraction_set_for:Zt("extraction_set_for"),extraction_set:Zt("has_extraction_set"),sex:Zt("organ_owner_sex"),side:Zt("organ_side"),rui_rank:Zt("rui_rank"),slice_thickness:Zt("slice_thickness"),slice_count:Zt("slice_count"),x_dimension:Zt("x_dimension"),y_dimension:Zt("y_dimension"),z_dimension:Zt("z_dimension"),dimension_units:Zt("dimension_unit"),object:Zt("has_object_reference")},spatialPlacement:{source:Zt("placement_for"),target:Zt("placement_relative_to"),placement_date:$i("dcterms")("created"),x_scaling:Zt("x_scaling"),y_scaling:Zt("y_scaling"),z_scaling:Zt("z_scaling"),scaling_units:Zt("scaling_unit"),x_rotation:Zt("x_rotation"),y_rotation:Zt("y_rotation"),z_rotation:Zt("z_rotation"),w_rotation:Zt("theta_rotation"),rotation_order:Zt("rotation_order"),rotation_units:Zt("rotation_unit"),x_translation:Zt("x_translation"),y_translation:Zt("y_translation"),z_translation:Zt("z_translation"),translation_units:Zt("translation_unit")}}),ti={x:$i("uberon"),body:$i("uberon")("0013702")},EPe={x:$i("cl"),cell:$i("cl")("0000000")},U0={x:$i("fma")},xY=($i("lmha"),{body:ti.body,cell:EPe.cell,respiratory_system:ti.x("0001004"),colon:ti.x("0001155"),left_lung:ti.x("0002168"),right_lung:ti.x("0002167"),left_bronchus:ti.x("0002178"),right_bronchus:ti.x("0002177"),kidney:ti.x("0002113"),ureter:ti.x("0000056"),eye:ti.x("0000970"),fallopian_tube:ti.x("0003889"),knee:ti.x("0001465"),ovary:ti.x("0000992"),trachea:ti.x("0003126"),aorta:ti.x("0000947"),blood:ti.x("0000178"),bone_marrow:ti.x("0002371"),male_reproductive_system:ti.x("0000079"),lymph_node:ti.x("0000029"),blood_vasculature:ti.x("0004537"),brain:ti.x("0000955"),eye_left:ti.x("0004548"),eye_right:U0.x("54449"),fallopian_tube_left:ti.x("0001303"),fallopian_tube_right:ti.x("0001302"),heart:ti.x("0000948"),kidney_left:ti.x("0004538"),kidney_right:ti.x("0004539"),knee_left:U0.x("24978"),knee_right:U0.x("24977"),large_intestine:ti.x("0000059"),liver:ti.x("0002107"),lungs:ti.x("0002048"),mesenteric_lymph_node:ti.x("0002509"),ovary_left:U0.x("7214"),ovary_right:U0.x("7213"),pancreas:ti.x("0001264"),pelvis:ti.x("0001270"),prostate_gland:ti.x("0002367"),skin:ti.x("0002097"),small_intestine:ti.x("0002108"),spleen:ti.x("0002106"),thymus:ti.x("0002370"),ureter_left:ti.x("0001223"),ureter_right:ti.x("0001222"),urinary_bladder:ti.x("0001255"),uterus:ti.x("0000995")});function VP(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}VP(Md.spatialObjectReference),VP(Md.spatialEntity),VP(Md.spatialPlacement),qke();var EY=m(6990),TPe=m.n(EY);TPe();var NA=m(6030);new nn,new nn;const z0=new nn,MY=new nn;class KP{constructor(e=[0,0,0],n=0){ve(this,"center",void 0),ve(this,"radius",void 0),this.radius=-0,this.center=new nn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=z0.from(n),this.center=(new nn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new KP(this.center,this.radius)}union(e){const n=this.center,i=this.radius,o=e.radius,s=z0.copy(e.center).subtract(n),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return MY.copy(s).scale((-i+c)/a).add(n),this.center.copy(MY),this.radius=c,this}expand(e){const i=z0.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=function f8(t,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(c,l,d),t}(z0,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=z0.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?-1:o<i?0:1}}const UPe=new nn,VPe=new nn,FA=new nn,LA=new nn,BA=new nn,zPe=new nn,HPe=new nn;class qP{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){ve(this,"center",void 0),ve(this,"halfAxes",void 0),this.center=(new nn).from(e),this.halfAxes=new $o(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new nn(e).len(),new nn(n).len(),new nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new nn(e).normalize(),o=new nn(n).normalize(),s=new nn(i).normalize();return(new Sy).fromMatrix3(new $o([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new Sy(i),o=(new $o).fromQuaternion(r);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=(new nn).from(e),this.halfAxes=o,this}clone(){return new qP(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new KP){const n=this.halfAxes,i=n.getColumn(0,FA),r=n.getColumn(1,LA),o=n.getColumn(2,BA),s=UPe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?-1:l>=c?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=VPe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,FA),o=i.getColumn(1,LA),s=i.getColumn(2,BA),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(n.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(n.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(n.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,FA),l=a.getColumn(1,LA),d=a.getColumn(2,BA),h=zPe.copy(c).add(l).add(d).add(s),p=HPe.copy(h).subtract(e);let _=n.dot(p);return r=Math.min(_,r),o=Math.max(_,o),h.copy(s).add(c).add(l).subtract(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),h.copy(s).add(c).subtract(l).add(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),h.copy(s).add(c).subtract(l).subtract(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),s.copy(h).subtract(c).add(l).add(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),s.copy(h).subtract(c).add(l).subtract(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),s.copy(h).subtract(c).subtract(l).add(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),s.copy(h).subtract(c).subtract(l).subtract(d),p.copy(h).subtract(e),_=n.dot(p),r=Math.min(_,r),o=Math.max(_,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,FA);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,LA);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,BA);return r.transformAsPoint(e),this.halfAxes=new $o([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const IY=new nn,DY=new nn;class H0{constructor(e=[0,0,1],n=0){ve(this,"normal",void 0),ve(this,"distance",void 0),this.normal=new nn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return ny(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=IY.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),ny(Au(this.normal.len(),1)),this.distance=r,this}clone(){return new H0(this.normal,this.distance)}equals(e){return Au(this.distance,e.distance)&&Au(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=DY.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=IY.from(e);const i=this.getPointDistance(e),r=DY.copy(this.normal).scale(i);return e.subtract(r).to(n)}}const RY=[new nn([1,0,0]),new nn([0,1,0]),new nn([0,0,1])],OY=new nn,GPe=new nn;new H0(new nn(1,0,0),0);class Wu{constructor(e=[]){ve(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*RY.length;const n=e.center,i=e.radius;let r=0;for(const o of RY){let s=this.planes[r],a=this.planes[r+1];s||(s=this.planes[r]=new H0),a||(a=this.planes[r+1]=new H0);const c=OY.copy(o).scale(-i).add(n);o.dot(c),s.fromPointNormal(c,o);const d=OY.copy(o).scale(i).add(n),h=GPe.copy(o).negate();h.dot(d),a.fromPointNormal(d,h),r+=2}return this}computeVisibility(e){let n=1;for(const i of this.planes)switch(e.intersectPlane(i)){case-1:return-1;case 0:n=0}return n}computeVisibilityWithPlaneMask(e,n){if(ny(Number.isFinite(n),"parentPlaneMask is required."),n===Wu.MASK_OUTSIDE||n===Wu.MASK_INSIDE)return n;let i=Wu.MASK_INSIDE;const r=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&!(n&s))continue;const c=e.intersectPlane(r[o]);if(-1===c)return Wu.MASK_OUTSIDE;0===c&&(i|=s)}return i}}ve(Wu,"MASK_OUTSIDE",4294967295),ve(Wu,"MASK_INSIDE",0),ve(Wu,"MASK_INDETERMINATE",2147483647),new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,Math,new $o,new $o,new $o,new $o,new $o,new nn,new nn,new nn,new nn,new nn,new $o,new $o,new $o;var NY=m(7659);function PNe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[Md.ontologyNode.label.id]:"label",[n]:"parent",[Md.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of function*wPe(t,e,n){for(const[i,r]of Object.entries(n))for(const o of dr(t,e,i,null,null)){const s="Literal"===o.object.termType?(0,F0.fromRdf)(o.object):o.object.id;yield[r,s]}}(t,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=t.getSubjects(n,e,null).map(o=>o.id),i}function FY(t,e,n,i){const r={root:e,nodes:{}},o=new Set;for(const a of dr(t,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=PNe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const s=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,LY(r),r}function LY(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)LY(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}m.n(NY)()(function NNe(t){const e=FY(t,xY.body.id,"body",Md.asctb.part_of.id);return e.nodes[xY.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");const UY={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"},zA="Unknown Euler angle order",Ng=.99999;var Co=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Co||{});class Yr extends Ww{static get ZYX(){return Co.ZYX}static get YXZ(){return Co.YXZ}static get XZY(){return Co.XZY}static get ZXY(){return Co.ZXY}static get YZX(){return Co.YZX}static get XYZ(){return Co.XYZ}static get RollPitchYaw(){return Co.ZYX}static get DefaultOrder(){return Co.ZYX}static get RotationOrders(){return Co}static rotationOrder(e){return Co[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=Yr.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(n*i+o*r);let l=-2*(n*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const p=Math.atan2(2*(i*r+o*n),-2*(n*n+s)+1),_=Math.asin(l),x=Math.atan2(c,a);return this.set(p,_,x,Yr.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function GNe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=fi(e)}get y(){return this[1]}set y(e){this[1]=fi(e)}get z(){return this[2]}set z(e){this[2]=fi(e)}get alpha(){return this[0]}set alpha(e){this[0]=fi(e)}get beta(){return this[1]}set beta(e){this[1]=fi(e)}get gamma(){return this[2]}set gamma(e){this[2]=fi(e)}get phi(){return this[0]}set phi(e){this[0]=fi(e)}get theta(){return this[1]}set theta(e){this[1]=fi(e)}get psi(){return this[2]}set psi(e){this[2]=fi(e)}get roll(){return this[0]}set roll(e){this[0]=fi(e)}get pitch(){return this[1]}set pitch(e){this[1]=fi(e)}get yaw(){return this[2]}set yaw(e){this[2]=fi(e)}get order(){return this[3]}set order(e){this[3]=function WNe(t){if(t<0&&t>=6)throw new Error(zA);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Co.ZYX)}fromRotationMatrix(e,n=Yr.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new Sy;switch(this[4]){case Co.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Co.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Co.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Co.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Co.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Co.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(zA)}}_fromRotationMatrix(e,n=Yr.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(n=n||this[3]){case Yr.XYZ:this[1]=Math.asin(Er(o,-1,1)),Math.abs(o)<Ng?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case Yr.YXZ:this[0]=Math.asin(-Er(c,-1,1)),Math.abs(c)<Ng?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case Yr.ZXY:this[0]=Math.asin(Er(d,-1,1)),Math.abs(d)<Ng?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case Yr.ZYX:this[1]=Math.asin(-Er(l,-1,1)),Math.abs(l)<Ng?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case Yr.YZX:this[2]=Math.asin(Er(s,-1,1)),Math.abs(s)<Ng?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case Yr.XZY:this[2]=Math.asin(-Er(r,-1,1)),Math.abs(r)<Ng?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(zA)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case Yr.XYZ:{const p=s*c,_=s*h,x=l*c,P=l*h;n[0]=a*c,n[4]=-a*h,n[8]=d,n[1]=_+x*d,n[5]=p-P*d,n[9]=-l*a,n[2]=P-p*d,n[6]=x+_*d,n[10]=s*a;break}case Yr.YXZ:{const p=a*c,_=a*h,x=d*c,P=d*h;n[0]=p+P*l,n[4]=x*l-_,n[8]=s*d,n[1]=s*h,n[5]=s*c,n[9]=-l,n[2]=_*l-x,n[6]=P+p*l,n[10]=s*a;break}case Yr.ZXY:{const p=a*c,_=a*h,x=d*c,P=d*h;n[0]=p-P*l,n[4]=-s*h,n[8]=x+_*l,n[1]=_+x*l,n[5]=s*c,n[9]=P-p*l,n[2]=-s*d,n[6]=l,n[10]=s*a;break}case Yr.ZYX:{const p=s*c,_=s*h,x=l*c,P=l*h;n[0]=a*c,n[4]=x*d-_,n[8]=p*d+P,n[1]=a*h,n[5]=P*d+p,n[9]=_*d-x,n[2]=-d,n[6]=l*a,n[10]=s*a;break}case Yr.YZX:{const p=s*a,_=s*d,x=l*a,P=l*d;n[0]=a*c,n[4]=P-p*h,n[8]=x*h+_,n[1]=h,n[5]=s*c,n[9]=-l*c,n[2]=-d*c,n[6]=_*h+x,n[10]=p-P*h;break}case Yr.XZY:{const p=s*a,_=s*d,x=l*a,P=l*d;n[0]=a*c,n[4]=-h,n[8]=d*c,n[1]=p*h+P,n[5]=s*c,n[9]=_*h-x,n[2]=x*h-_,n[6]=l*c,n[10]=P*h+p;break}default:throw new Error(zA)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new Sy(e*r*o-n*i*s,e*i*s+n*r*o,n*i*o-e*r*s,e*i*o+n*r*s)}}const VY={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let HA;const $Ne=new Uint8Array(16);function YNe(){if(!HA&&(HA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!HA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HA($Ne)}const Ko=[];for(let t=0;t<256;++t)Ko.push((t+256).toString(16).slice(1));const KNe=function XNe(t,e,n){if(VY.randomUUID&&!e&&!t)return VY.randomUUID();const i=(t=t||{}).random||(t.rng||YNe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function zY(t,e=0){return(Ko[t[e+0]]+Ko[t[e+1]]+Ko[t[e+2]]+Ko[t[e+3]]+"-"+Ko[t[e+4]]+Ko[t[e+5]]+"-"+Ko[t[e+6]]+Ko[t[e+7]]+"-"+Ko[t[e+8]]+Ko[t[e+9]]+"-"+Ko[t[e+10]]+Ko[t[e+11]]+Ko[t[e+12]]+Ko[t[e+13]]+Ko[t[e+14]]+Ko[t[e+15]]).toLowerCase()}(i)};function*GA(t,e,n){for(const[i,r]of Object.entries(n))for(const o of dr(t,e,i,null,null)){const s="Literal"===o.object.termType?(0,F0.fromRdf)(o.object):o.object.id;yield[r,s]}}function Ff(t,e,n,i){const r={"@id":e,"@type":n};for(const[o,s]of Object.entries(i))for(const a of dr(t,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,F0.fromRdf)(a.object):a.object.id;r[s]=c}return r}const Yi=IP({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},ji),HY={x:Yi("rdf"),type:Yi("rdf")("type")},qNe_label=(Yi("rdfs"),Yi("rdfs")("label")),Qt=(Yi("rdfs")("comment"),Yi("rdfs")("isDefinedBy"),Yi("rdfs")("seeAlso"),Yi("ccf")),ai={id:Yi("ccf")("has_registration_location"),label:Yi("rdfs")("label"),description:Yi("rdfs")("comment"),link:Qt("url"),sex:Qt("sex"),age:Qt("age"),bmi:Qt("bmi"),Male:ji.literal("Male"),Female:ji.literal("Female"),consortiumName:Qt("consortium_name"),providerName:Qt("tissue_provider_name"),providerUUID:Qt("tissue_provider_uuid"),donor:Qt("comes_from"),sections:Qt("subdivided_into_sections"),datasets:Qt("generates_dataset"),sampleType:Qt("sample_type"),TissueBlock:ji.literal("Tissue Block"),TissueSection:ji.literal("Tissue Section"),NonStandard:ji.literal("Non-standard"),sectionCount:Qt("section_count"),sectionSize:Qt("section_size"),sectionUnits:Qt("section_size_unit"),sectionNumber:Qt("section_number"),spatialEntity:Qt("has_registration_location"),ontologyTerms:Qt("has_ontology_term"),cellTypeTerms:Qt("has_cell_type_term"),technology:Qt("technology"),thumbnail:Qt("thumbnail")},_i={x:Qt,base:Yi("base"),ontologyNode:{label:Qt("ccf_pref_label"),parent:Qt("ccf_part_of"),children:Qt("ccf_part_of"),rui_rank:Qt("rui_rank"),synonymLabels:ji.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Qt("ccf_part_of"),ct_is_a:Qt("ccf_ct_isa"),located_in:Qt("ccf_located_in"),characterizes:Qt("ccf_characterizes")},spatial:{Female:Yi("base")("VHFemale"),Male:Yi("base")("VHMale"),BothSexes:Yi("base")("VHBothSexes"),FemaleOrgans:Yi("base")("VHFemaleOrgans"),MaleOrgans:Yi("base")("VHMaleOrgans")},SpatialObjectReference:Qt("spatial_object_reference"),SpatialEntity:Qt("spatial_entity"),SpatialPlacement:Qt("spatial_placement"),spatialObjectReference:{file:Qt("file_url"),file_format:Qt("file_format"),file_subpath:Qt("file_subpath")},extractionSet:{label:Yi("rdfs")("label"),rui_rank:Qt("rui_rank")},spatialEntity:{label:Yi("rdfs")("label"),description:Yi("rdfs")("comment"),creator:Yi("dcterms")("creator"),creator_first_name:Qt("creator_first_name"),creator_last_name:Qt("creator_last_name"),creator_orcid:Qt("creator_orcid"),creation_date:Yi("dcterms")("created"),updated_date:Qt("updated_date"),ccf_annotations:Qt("collides_with"),representation_of:Qt("representation_of"),reference_organ:Qt("has_reference_organ"),extraction_set_for:Qt("extraction_set_for"),extraction_set:Qt("has_extraction_set"),sex:Qt("organ_owner_sex"),side:Qt("organ_side"),rui_rank:Qt("rui_rank"),slice_thickness:Qt("slice_thickness"),slice_count:Qt("slice_count"),x_dimension:Qt("x_dimension"),y_dimension:Qt("y_dimension"),z_dimension:Qt("z_dimension"),dimension_units:Qt("dimension_unit"),object:Qt("has_object_reference")},spatialPlacement:{source:Qt("placement_for"),target:Qt("placement_relative_to"),placement_date:Yi("dcterms")("created"),x_scaling:Qt("x_scaling"),y_scaling:Qt("y_scaling"),z_scaling:Qt("z_scaling"),scaling_units:Qt("scaling_unit"),x_rotation:Qt("x_rotation"),y_rotation:Qt("y_rotation"),z_rotation:Qt("z_rotation"),w_rotation:Qt("theta_rotation"),rotation_order:Qt("rotation_order"),rotation_units:Qt("rotation_unit"),x_translation:Qt("x_translation"),y_translation:Qt("y_translation"),z_translation:Qt("z_translation"),translation_units:Qt("translation_unit")}},ni={x:Yi("uberon"),body:Yi("uberon")("0013702")},JNe={x:Yi("cl"),cell:Yi("cl")("0000000")},W0={x:Yi("fma")},kl=(Yi("lmha"),{body:ni.body,cell:JNe.cell,respiratory_system:ni.x("0001004"),colon:ni.x("0001155"),left_lung:ni.x("0002168"),right_lung:ni.x("0002167"),left_bronchus:ni.x("0002178"),right_bronchus:ni.x("0002177"),kidney:ni.x("0002113"),ureter:ni.x("0000056"),eye:ni.x("0000970"),fallopian_tube:ni.x("0003889"),knee:ni.x("0001465"),ovary:ni.x("0000992"),trachea:ni.x("0003126"),aorta:ni.x("0000947"),blood:ni.x("0000178"),bone_marrow:ni.x("0002371"),male_reproductive_system:ni.x("0000079"),lymph_node:ni.x("0000029"),blood_vasculature:ni.x("0004537"),brain:ni.x("0000955"),eye_left:ni.x("0004548"),eye_right:W0.x("54449"),fallopian_tube_left:ni.x("0001303"),fallopian_tube_right:ni.x("0001302"),heart:ni.x("0000948"),kidney_left:ni.x("0004538"),kidney_right:ni.x("0004539"),knee_left:W0.x("24978"),knee_right:W0.x("24977"),large_intestine:ni.x("0000059"),liver:ni.x("0002107"),lungs:ni.x("0002048"),mesenteric_lymph_node:ni.x("0002509"),ovary_left:W0.x("7214"),ovary_right:W0.x("7213"),pancreas:ni.x("0001264"),pelvis:ni.x("0001270"),prostate_gland:ni.x("0002367"),skin:ni.x("0002097"),small_intestine:ni.x("0002108"),spleen:ni.x("0002106"),thymus:ni.x("0002370"),ureter_left:ni.x("0001223"),ureter_right:ni.x("0001222"),urinary_bladder:ni.x("0001255"),uterus:ni.x("0000995")});function rN(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const WA={spatialObjectReference:rN(_i.spatialObjectReference),spatialEntity:rN(_i.spatialEntity),spatialPlacement:rN(_i.spatialPlacement)};function GY(t,e){const n=Ff(t,e,"ExtractionSet",WA.spatialEntity);return n.extractionSites=IA(t.getSubjects(_i.spatialEntity.extraction_set,e,null).map(i=>Lf(t,i.id)),["rui_rank"]),n}function Lf(t,e){const n=Ff(t,e,"SpatialEntity",WA.spatialEntity);return n.object&&(n.object=function ZNe(t,e){return Ff(t,e,"SpatialObjectReference",WA.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,_i.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,ai.spatialEntity,e,null),n}function nFe(t,e){const n=Ff(t,e,"SpatialPlacement",WA.spatialPlacement);return n.source&&(n.source=Lf(t,n.source)),n.target&&(n.target=Lf(t,n.target)),n}const rFe=(MA||Kke).DirectedGraph;function WY(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),o=[n.x_rotation,n.y_rotation,n.z_rotation].map(nU),s=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(o).scale(s)}class $Y{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new rFe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},HY.type,_i.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},HY.type,_i.SpatialEntity,null);const n={};for(const i of dr(e,null,_i.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of dr(e,null,_i.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new Hn(Hn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new Hn(Hn.IDENTITY),o=Jke(this.graph,e,n);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&WY(r,nFe(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=uY(e,"placement[0]",uY(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,n),o&&(o=WY(o,r))):i&&(o=this.getTransformationMatrix(i,n)),o){const s=(new Yr).fromRotationMatrix(o,Yr.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(Bre),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${KNe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class YY{constructor(e){this.db=e}getSpatialEntity(e){return Lf(this.db.store,e)}getExtractionSets(e){return function QNe(t,e){return IA(t.getSubjects(_i.spatialEntity.extraction_set_for,e,null).map(n=>GY(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return GY(this.db.store,e)}getAnatomicalStructures(e){return function eFe(t,e){return IA(t.getSubjects(_i.spatialEntity.reference_organ,e,null).map(n=>Lf(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function tFe(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(Lf(t,n.subject.id))},null,_i.spatialEntity.reference_organ,null,null),IA(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=_i.spatial.Male.id;break;case"Female":n=_i.spatial.Female.id;break;default:n=_i.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,n,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(_i.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(_i.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===n?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(s){if(r)s=new Hn(Hn.IDENTITY).rotateX(nU(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const oFe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function $A(t,e=oFe){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:Yu,omit:sFe,set:YA,toNumber:oN}=EY,XA="https://entity.api.hubmapconsortium.org/entities/",XY=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),aFe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Fg={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},sN="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class dFe{constructor(e,n="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(Te=>"Donor"===Te.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,Fg[e.group_uuid]||(Fg[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=Fg[e.group_uuid]||e.group_name,p=e.created_by_user_displayname;this["@id"]=XA+e.uuid,this.label=`Registered ${d}, ${p}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const _={},x=[];this.sections=x;const P=[];this.datasets=P;for(const Te of a.filter(je=>"Sample"===je.entity_type)){const je=this.getSection(Te,e,i);_[Te.submission_id]=je,x.push(je),je.section_number=je.section_number??x.length}for(const Te of a)if("Dataset"===Te.entity_type){const je=this.getDataset(Te,n,i,r),Ze=Yu(Te,["ingest_metadata","metadata","tissue_id"]);_[Ze]?_[Ze].datasets?.push(je):P.push(je)}const F=l??{},X=`${F.x_dimension} x ${F.y_dimension} x ${F.z_dimension} ${F.dimension_units}`;this.section_count=F.slice_count||x.length;const Q=parseFloat((F.slice_thickness||(F.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=Q;const ye=F.dimension_units||"millimeter";this.section_units=ye,this.description=`${X}, ${Q} ${ye}, ${this.section_count} Sections`,x.forEach((Te,je)=>{Te.description=`${F.x_dimension} x ${F.y_dimension} x ${Q} ${ye}, ${Q} ${ye}, ${Te.description}`,Te.section_number=je+1})}getSection(e,n,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":XA+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${Fg[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n="",i="",r){const o=new Date(e.last_modified_timestamp).toLocaleDateString(),s=Fg[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,Yu(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,n,r)??h,{"@id":XA+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${a}, ${s}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,n,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${n}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=Yu(e,"metadata.files",[]).filter(o=>/\.(ome\.tif|ome\.tiff)$/.test(o.rel_path)).filter(o=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(o.rel_path)).filter(o=>XY.has(o.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(o=>`${n}/${e.uuid}/${o.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const o=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(XY.has(o))return`assets/thumbnails/TMC-Vanderbilt/DR1/${o}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=aFe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,n){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const o=i.match(/age ([0-9]+)/);let s,a;o&&(s=oN(o[1]));for(const p of Yu(e,"metadata.organ_donor_data",Yu(e,"metadata.living_donor_data",[])))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?s=oN(p.data_value):"Body mass index"===p.preferred_term&&(a=oN(p.data_value));let c="";r&&s&&(c+=`${r}, Age ${s}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=Fg[e.group_uuid]||e.group_name;return{"@id":XA+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${n}browse/donor/${e.uuid}`,age:s,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=Yu(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?YA(i,["placement","target"],o.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&YA(i,["placement","target"],"Male"===n.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return sFe({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const uFe=1e4,hFe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],fFe={exists:{field:"rui_location"}};function KY(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??fFe,_source:{includes:hFe}})}function aN(t,e){return cN.apply(this,arguments)}function cN(){return cN=Bt(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),cN.apply(this,arguments)}function lN(){return lN=Bt(function*(t,e,n){const i=uFe,r=function pFe(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),o=KY(0,i,n),s=yield aN(t,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(aN(t,{method:"POST",headers:r,body:KY(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),lN.apply(this,arguments)}function dN(){return dN=Bt(function*(t,e,n,i,r="",o=""){let s;if("static"===e?s=yield aN(t):"search-api"===e&&(s=yield function mFe(t,e,n){return lN.apply(this,arguments)}(t,i,n)),s)return function cFe(t,e="",n="",i,r=!1){const s={},a=Yu(t,"hits.hits",[]).map(l=>Yu(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new dFe(l,e,n,i).toJsonLd());for(const l of a){const d=l["@id"];s[d]?s[d].samples.push(l.samples[0]):s[d]=l}const c=Object.values(s);return r&&(function lFe(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,n++)}i.samples=r.filter(o=>!0!==o.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":sN,...l})))),$A(JSON.stringify({"@context":sN,"@graph":c}),sN)}(s,r,o,i);console.warn(`Unable to load ${t} as HuBMAP Data`)}),dN.apply(this,arguments)}function $0(t,e,n){const i=new Set;for(const r of e)for(const o of dr(t,r,n,null,null))i.add(o.object.id);return i}const yFe={[_i.spatialEntity.x_dimension.id]:"x",[_i.spatialEntity.y_dimension.id]:"y",[_i.spatialEntity.z_dimension.id]:"z"};function xFe(t,e,n,i){const r=e.getTransformationMatrix(n,i);let o;if(r){const s=r.getTranslation(),a=function vFe(t,e){const n=Ff(t,e,"Dimensions",yFe);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new Yr).fromRotationMatrix(r,Yr.XYZ).toQuaternion().normalize().calculateW();o=(new qP).fromCenterHalfSizeQuaternion(s,a,c)}return o}function wFe(t,e,n,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of n){const p=xFe(t,e,h,c);p&&p.distanceSquaredTo([r,o,s].map(x=>x/1e3))<=d&&l.add(h)}return l}function KA(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of dr(t,a,ai.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function hN(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of dr(t,a,ai.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function Y0(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function JY(t,e,n){const i=new Set;for(const r of n){const o=ji.namedNode(r);t.forSubjects(Y0(e,i),_i.spatialEntity.ccf_annotations,o,null)}return i}function fN(t,e){const n=function PFe(t,e){const n=new Map;for(const i of t)for(const r of dr(e,i,ai.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id).add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const o=n.get(r);for(const s of dr(e,r,_i.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function BFe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[_i.ontologyNode.label.id]:"label",[n]:"parent",[_i.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of GA(t,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=t.getSubjects(n,e,null).map(o=>o.id),i}function ZY(t,e,n,i){const r={root:e,nodes:{}},o=new Set;for(const a of dr(t,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=BFe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const s=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,QY(r),r}function QY(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)QY(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const eX=NY(function jFe(t){const e=ZY(t,kl.body.id,"body",_i.asctb.part_of.id);return e.nodes[kl.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function pN(t,e,n,i){return{"@id":`https://example.com/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const qA={[ai.label.id]:"label",[ai.description.id]:"description",[ai.link.id]:"link"},zFe={...qA,[ai.providerName.id]:"providerName"},HFe={...qA,[ai.technology.id]:"technology",[ai.thumbnail.id]:"thumbnail"},GFe={...qA,[ai.sampleType.id]:"sampleType",[ai.sectionNumber.id]:"sectionNumber",[ai.datasets.id]:"datasets"},WFe={...qA,[ai.sampleType.id]:"sampleType",[ai.sectionCount.id]:"sectionCount",[ai.sectionSize.id]:"sectionSize",[ai.sectionUnits.id]:"sectionUnits",[ai.donor.id]:"donor",[ai.spatialEntity.id]:"spatialEntityId",[ai.sections.id]:"sections",[ai.datasets.id]:"datasets"};function $Fe(t,e){return Ff(t,e,"Donor",zFe)}function tX(t,e){return Ff(t,e,"Dataset",HFe)}function YFe(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of GA(t,e,GFe))if("datasets"===i){const o=tX(t,r);n[i].push(o)}else n[i]=r;return n}class KFe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const n=Date.now();return this.database.connect().then(function(){var i=Bt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-n})}}function mN(){return mN=Bt(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),mN.apply(this,arguments)}const{delMany:eLe,get:nX,setMany:tLe}=N,nLe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class iLe{constructor(e=nLe){this.options=e,this.store=new PP(void 0,{factory:ji}),this.graph=new $Y(this),this.scene=new YY(this)}connect(e,n=!1){var i=this;return Bt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return Bt(function*(){const n=(new Date).getTime(),i=Xke(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield nX(r).catch(()=>{});let a;s&&n-new Date(+s).getTime()>36e5?yield eLe([o,r]).catch(()=>{}):a=yield nX(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),tLe([[o,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return Bt(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=UP(r,ji);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=UP(o,ji))}else r?.length>0&&i.push(r);i.push(yield function QFe(){return mN.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function qY(t,e,n,i){return dN.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(o=>{if(o)return e.addDataSources([o])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return Bt(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var o=Bt(function*(s){if("string"==typeof s)if((s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")){const a=s;s=$A(s=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield FP(s,r)}else s.endsWith("n3")?yield function vPe(t,e){return jP.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function yPe(t,e){return BP.apply(this,arguments)}(s,r):(s=$A(s),yield FP(s,r));else s=$A(JSON.stringify(s)),yield FP(s,r)});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return Bt(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function qFe(t){const e=eX(t),n=new Map;for(const{subject:i,object:r}of dr(t,null,_i.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;n.set(i.id,[...o].map(a=>ji.namedNode(a)))}for(const{object:i}of dr(t,null,ai.spatialEntity,null,null))for(const{subject:r}of dr(t,null,_i.spatialPlacement.source,i,null))for(const{object:o}of dr(t,r,_i.spatialPlacement.target,null,null))for(const s of n.get(o.id)??[])t.addQuad(ji.namedNode(i.id),_i.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function xPe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return Bt(function*(){n.store=UP(e,ji),n.graph=new $Y(n),n.scene=new YY(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function AFe(t,e,n){let i=function SFe(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),ai.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function OFe(t,e,n=!0){const i=new Set;if(t.forSubjects(Y0(e,i),ai.spatialEntity,null,null),!n){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=KA(t,i,o=>function CFe(t,e,n){const i=new Set;return t.forSubjects(Y0(e,i),ai.sex,ai[n],null),i}(t,o,r))}if(i.size>0&&n.tmc?.length>0&&(i=KA(t,i,r=>function TFe(t,e,n){const i=new Set;for(const r of n){const o=ji.literal(r);t.forSubjects(Y0(e,i),ai.providerName,o,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function EFe(t,e,n){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of dr(t,c,ai.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of dr(t,c,ai.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=n(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function MFe(t,e,n){const i=new Set;for(const r of n){const o=ji.literal(r);t.forSubjects(Y0(e,i),ai.technology,o,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=hN(t,i,r=>function kFe(t,e,n,i){const r=new Set;for(const o of i)wFe(t,e,n,o).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(kl.body.id)&&(i=hN(t,i,o=>JY(t,o,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(kl.cell.id)&&(i=hN(t,i,o=>function IFe(t,e,n){const i=new Set;for(const r of n)t.forObjects(o=>{i.add(o.id)},r,_i.asctb.located_in,null),r===kl.cell.id&&i.add(kl.body.id);return JY(t,e,[...i])}(t,o,r)))}if(i.size>0&&2===n.ageRange?.length&&NA(n.ageRange[0])&&NA(n.ageRange[1])){const r=Math.max(...n.ageRange),o=Math.min(...n.ageRange);1===o&&110===r||(i=KA(t,i,s=>function DFe(t,e,n,i){const r=new Set;for(const o of e)for(const s of dr(t,o,ai.age,null,null)){const a=(0,F0.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}if(i.size>0&&2===n.bmiRange?.length&&NA(n.bmiRange[0])&&NA(n.bmiRange[1])){const r=Math.max(...n.bmiRange),o=Math.min(...n.bmiRange);13===o&&83===r||(i=KA(t,i,s=>function RFe(t,e,n,i){const r=new Set;for(const o of e)for(const s of dr(t,o,ai.bmi,null,null)){const a=(0,F0.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(ji.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function iFe(t,e){const n=t.getObjects(ji.namedNode(e),ai.spatialEntity,null);if(n.length>0)return Lf(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return Bt(function*(){return e.status||(e.status=new KFe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return Bt(function*(){return function _Fe(t){const e=new Set;for(const n of dr(t,null,ai.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return Bt(function*(){return function bFe(t){const e=new Set;for(const n of dr(t,null,ai.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return Bt(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function XFe(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of GA(t,e,WFe))if("sections"===i){const o=YFe(t,r);n[i].push(o)}else if("datasets"===i){const o=tX(t,r);n[i].push(o)}else n[i]="donor"===i?$Fe(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return Bt(function*(){return function gFe(t,e){const n=$0(e,t,ai.donor.id),i=$0(e,n,ai.providerUUID.id),r=new Set;for(const c of t)for(const l of dr(e,c,ai.spatialEntity,null,null))r.add(l.subject.id);const o=$0(e,r,ai.sections.id),s=new Set([...$0(e,r,ai.datasets.id),...$0(e,o,ai.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return Bt(function*(){return function NFe(t,e){const n={};return fN(t,e).forEach((r,o)=>{n[o]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return Bt(function*(){return function LFe(t,e){const n=fN(t,e),i=new Map;for(const o of n.keys()){const s=n.get(o);for(const a of dr(e,null,_i.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[kl.cell.id]=n.get(kl.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return Bt(function*(){return function FFe(t,e){const n=_i.x("ccf_bm_located_in"),i=fN(t,e),r=new Map;for(const s of i.keys()){const a=i.get(s);for(const c of dr(e,null,n,s,null)){const l=c.subject.id;if(r.has(l)){const d=r.get(l);a.forEach(h=>d.add(h))}else r.set(l,new Set(a))}}const o={};return r.forEach((s,a)=>{o[a]=s.size}),o.biomarkers=i.get(kl.body.id)?.size??0,o}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return Bt(function*(){return eX(e.store)})()}getCellTypeTreeModel(){var e=this;return Bt(function*(){return function UFe(t){return ZY(t,kl.cell.id,"cell",_i.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return Bt(function*(){return function VFe(t){const e=_i.x("ccf_biomarker_type"),n={biomarkers:pN("biomarkers","Biomarkers","",[])};for(const i of dr(t,null,e,null,null)){const r=i.object.value,o=i.subject.id;n[r]||(n[r]=pN(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(o);const s=pN(o,"",r,[]),a={[_i.ontologyNode.label.id]:"label",[qNe_label.id]:"synonymLabels"};for(const[c,l]of GA(t,o,a))"synonymLabels"===c?l&&l!==s.label&&s.synonymLabels.push(l):s[c]=l;for(const c of Object.values(n))c.children.length>1&&c.children.sort((l,d)=>n[l]?.label.localeCompare(n[d]?.label));n[o]=s}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return Bt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return Bt(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return Bt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return Bt(function*(){return i.graph.getSpatialPlacement(e,n)})()}}function aLe(t,e){return t===e}let cLe=(()=>{var t;class e{constructor(i,r){this.locator=i,this.globalConfig=r,this.subscriptions=new ae,this.dataSource=r.getOption("data").pipe(de(o=>({...UY,dataSources:o})),xi(o=>Object.keys(o).length>0),de(o=>o),ht(aLe),qe(o=>function sLe(t,e){return new B(n=>{const i=t(),r=e(i);return(r?Ei(r):$e).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),s=>this.connectDataSource(s.source,o))),Rs(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(i){return this.dataSource.pipe(qe(r=>r.getTissueBlockResults(i)),vi(1))}getAggregateResults(i){return this.dataSource.pipe(qe(r=>r.getAggregateResults(i)),vi(1))}getOntologyTermOccurences(i){return this.dataSource.pipe(qe(r=>r.getOntologyTermOccurences(i)),vi(1))}getCellTypeTermOccurences(i){return this.dataSource.pipe(qe(r=>r.getCellTypeTermOccurences(i)),vi(1))}getOntologyTreeModel(){return this.dataSource.pipe(qe(i=>i.getOntologyTreeModel()),vi(1))}getCellTypeTreeModel(){return this.dataSource.pipe(qe(i=>i.getCellTypeTreeModel()),vi(1))}getReferenceOrgans(){return this.dataSource.pipe(qe(i=>i.getReferenceOrgans()),vi(1))}getScene(i){return this.dataSource.pipe(qe(r=>r.getScene(i)),vi(1))}getOrganScene(i,r){return this.dataSource.pipe(qe(o=>o.getReferenceOrganScene(i,r)),vi(1))}createDataSource(){return{source:new iLe,unsubscribe:()=>{}}}connectDataSource(i,r){return Bt(function*(){(new Date).getTime();return yield i.connect(r,!1),i})()}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(Lb),nt(N0))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),lLe=(()=>{var t;class e{constructor(i,r){this.configState=i,this.source=r,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(de(o=>`http://purl.org/ccf/1.5/entity/${o}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(de(o=>`http://purl.org/ccf/1.5/entity/${o}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=us([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(qe(([o,s,a])=>this.chooseScene(o,s))),this.organs$=this.configState.getOption("data").pipe(de(o=>this.selectOrgans(o)),Rs(1)),this.filteredOrgans$=us([this.organs$,this.referenceOrgans$]).pipe(de(([o,s])=>this.getNeededReferenceOrgans(s,o)),Rs(1)),this.filteredScene$=us([this.scene$,this.organs$,this.referenceOrgans$]).pipe(de(([o,s,a])=>this.filterSceneNodes(o,s,a)),function Vke(t,e){const n=t.pipe(Ca(""));return i=>us([i,n]).pipe(de(([r,o])=>r.map(s=>function Uke(t,e,n){return t.entityId!==e?t:{...t,color:n}}(s,o,e))))}(this.highlightID$,jke),function Hke(t){const e=t.pipe(Ca(""));return n=>us([n,e]).pipe(de(([i,r])=>i.map(o=>function zke(t,e){return t.entityId!==e?t:{...t,zoomToOnLoad:!0}}(o,r))))}(this.zoomToID$),Rs(1))}chooseScene(i,r){const o=i?.map(a=>a[dY]?.placement.target)??[];if(new Set(o).size>1)return this.source.getScene();if(r){const a=r.find(c=>c["@id"]===o[0]);if(a)return this.source.getOrganScene(a.representation_of,{ontologyTerms:[a.reference_organ],sex:a.sex})}return qt([])}selectOrgans(i){const o=(i??[]).map(s=>s[dY].placement.target);return new Set(o)}filterSceneNodes(i,r,o){const s=this.getNeededReferenceOrgans(o,r),a=this.getNeededSkins(s),c=new Set([...r,...a]);return i.filter(d=>!d.reference_organ||c.has(d.reference_organ))}getNeededReferenceOrgans(i,r){return i.filter(o=>r.has(o.reference_organ??""))}getNeededSkins(i){if(1===i.length)return[];const r=new Set;return i.forEach(o=>{"Female"===o.sex?r.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===o.sex&&r.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...r]}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(N0),nt(cLe))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const dLe=["bodyUI"];let uLe=(()=>{var t;class e{constructor(i,r,o){this.configState=i,this.sceneSource=r,this.cdr=o,this.onMouseEnter=new tn,this.onMouseLeave=new tn,this.onClick=new tn,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(br(s=>this.reset()))}reset(){var i=this;return Bt(function*(){const{bodyUI:r}=i;yield new Promise(a=>setTimeout(a,200));const o=yield function jz(t,e){const n="object"==typeof e;return new Promise((i,r)=>{let s,o=!1;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):n?i(e.defaultValue):r(new Vy)}})})}(i.organs$.pipe(vi(1))),s=!!r.scene?.find(a=>a.zoomToOnLoad);if(r.rotation=0,r.rotationX=0,!s)if(o&&1===o.length){const{x_dimension:a,y_dimension:c,z_dimension:l}=o[0];r.bounds={x:1.25*a/1e3,y:1.25*c/1e3,z:1.25*l/1e3},r.target=[a/1e3/2,c/1e3/2,l/1e3/2]}else r.bounds={x:2.2,y:2,z:.4},r.target=[0,0,0];i.cdr.detectChanges()})()}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(N0),Ge(lLe),Ge(Jr))},t.\u0275cmp=An({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&er(dLe,7),2&i){let o;Un(o=Vn())&&(r.bodyUI=o.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:4,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(i,r){1&i&&(Lt(0,"ccf-body-ui",0,1),Rn("nodeClick",function(s){return r.onClick.emit(s)})("nodeHoverStart",function(s){return r.onMouseEnter.emit(s)})("nodeHoverStop",function(s){return r.onMouseLeave.emit(s)}),ba(2,"async"),zt()),2&i&&Ht("scene",ll(2,2,r.scene$))("interactive",!0)},dependencies:[ike,Vb],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),e})();function hLe(t,e){if(1&t){const n=function Ql(){return Ct()}();Lt(0,"ccf-root",1),Rn("onMouseEnter",function(r){return Tr(n),Mr(On().onMouseEnter.emit(r))})("onMouseLeave",function(r){return Tr(n),Mr(On().onMouseLeave.emit(r))})("onClick",function(r){return Tr(n),Mr(On().onClick.emit(r))}),zt()}}function fLe(t){return t.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let pLe=(()=>{var t;class e extends zne{constructor(i,r){super(i,r,{initialDelay:10,initialConfig:{...Wb_dbOptions,...globalThis.dbOptions},parse:{data:fLe}}),this.onMouseEnter=new tn,this.onMouseLeave=new tn,this.onClick=new tn}}return(t=e).\u0275fac=function(i){return new(i||t)(Ge(N0),Ge(Jr))},t.\u0275cmp=An({type:t,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[vn],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&xn(0,hLe,1,0,"ccf-root",0),2&i&&Ht("ngIf",r.initialized)},dependencies:[ul,uLe],encapsulation:2,changeDetection:0}),e})();const eS=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class _Le{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=gf(this.action),i=function gLe(t){return eS(t.getHours(),2)+":"+eS(t.getMinutes(),2)+":"+eS(t.getSeconds(),2)+"."+eS(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class bLe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const iX=new bt("NGXS_LOGGER_PLUGIN_OPTIONS");let yLe=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new bLe(this._options),this._store=this._store||this._injector.get(Tl);const o=new _Le(i,this._store,this._logWriter);return o.dispatched(n),r(n,i).pipe(br(s=>{o.completed(s)}),ec(s=>{throw o.errored(s),s}))}}return t.\u0275fac=function(n){return new(n||t)(nt(iX),nt(wr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();const rX=new bt("LOGGER_USER_OPTIONS");function vLe(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let xLe=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:Zz,useClass:yLe,multi:!0},{provide:rX,useValue:n},{provide:iX,useFactory:vLe,deps:[rX]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({}),t})();const wLe=[N0];let ELe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({imports:[fDe.forRoot(),fH.forRoot(wLe,{developmentMode:!1}),xLe.forRoot({disabled:true})]}),e})(),ALe=(()=>{var t;class e{constructor(i){this.injector=i}ngDoBootstrap(){const i=function jne(t,e){const i=function One(t,e){return e.get(Yt).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new Fne(t,e.injector),o=function Rne(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function Cne(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(i);class s extends Bne{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=r.create(this.injector||e.injector);i.forEach(({propName:l,transform:d})=>{if(!this.hasOwnProperty(l))return;const h=this[l];delete this[l],c.setInputValue(l,h,d)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,d,h){const[p,_]=o[c];this.ngElementStrategy.setInputValue(p,d,_)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(o),i.forEach(({propName:a,transform:c})=>{Object.defineProperty(s.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),s}(pLe,{injector:this.injector});customElements.define("ccf-body-ui-wc",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(nt(wr))},t.\u0275mod=ln({type:t}),t.\u0275inj=sn({imports:[yne,ELe,rke]}),e})();_ne().bootstrapModule(ALe).catch(t=>console.error(t))},2323:te=>{te.exports=function(m,E){var b=E.length;if(0!==b){var D=m.length;m.length+=b;for(var A=0;A<b;A++)m[D+A]=E[A]}}},3982:te=>{"use strict";const{AbortController:J,AbortSignal:m}=typeof self<"u"?self:typeof window<"u"?window:void 0;te.exports=J,te.exports.AbortSignal=m,te.exports.default=J},9919:(te,J)=>{"use strict";J.byteLength=function y(R){var $=g(R),Y=$[1];return 3*($[0]+Y)/4-Y},J.toByteArray=function j(R){var $,v,ae=g(R),Y=ae[0],re=ae[1],ne=new b(function M(R,$,ae){return 3*($+ae)/4-ae}(0,Y,re)),W=0,z=re>0?Y-4:Y;for(v=0;v<z;v+=4)$=E[R.charCodeAt(v)]<<18|E[R.charCodeAt(v+1)]<<12|E[R.charCodeAt(v+2)]<<6|E[R.charCodeAt(v+3)],ne[W++]=$>>16&255,ne[W++]=$>>8&255,ne[W++]=255&$;return 2===re&&($=E[R.charCodeAt(v)]<<2|E[R.charCodeAt(v+1)]>>4,ne[W++]=255&$),1===re&&($=E[R.charCodeAt(v)]<<10|E[R.charCodeAt(v+1)]<<4|E[R.charCodeAt(v+2)]>>2,ne[W++]=$>>8&255,ne[W++]=255&$),ne},J.fromByteArray=function ce(R){for(var $,ae=R.length,Y=ae%3,re=[],W=0,z=ae-Y;W<z;W+=16383)re.push(U(R,W,W+16383>z?z:W+16383));return 1===Y?re.push(m[($=R[ae-1])>>2]+m[$<<4&63]+"=="):2===Y&&re.push(m[($=(R[ae-2]<<8)+R[ae-1])>>10]+m[$>>4&63]+m[$<<2&63]+"="),re.join("")};for(var m=[],E=[],b=typeof Uint8Array<"u"?Uint8Array:Array,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0;A<64;++A)m[A]=D[A],E[D.charCodeAt(A)]=A;function g(R){var $=R.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=R.indexOf("=");return-1===ae&&(ae=$),[ae,ae===$?0:4-ae%4]}function N(R){return m[R>>18&63]+m[R>>12&63]+m[R>>6&63]+m[63&R]}function U(R,$,ae){for(var re=[],ne=$;ne<ae;ne+=3)re.push(N((R[ne]<<16&16711680)+(R[ne+1]<<8&65280)+(255&R[ne+2])));return re.join("")}E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63},1979:(te,J)=>{"use strict";var E=function(D){return D.typeOfFunction="function",D.boolTrue=!0,D}(E||{});J.ak=function b(D,A,k){if(!k||typeof k.value!==E.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+A+"> is not a method!");return{configurable:E.boolTrue,get:function(){var g=k.value.bind(this);return Object.defineProperty(this,A,{value:g,configurable:E.boolTrue,writable:E.boolTrue}),g}}}},9007:(te,J,m)=>{"use strict";var E=m(9919),b=m(2601);J.Buffer=g,J.SlowBuffer=function Y(G){return+G!=G&&(G=0),g.alloc(+G)},J.INSPECT_MAX_BYTES=50;var D=2147483647;function k(G){if(G>D)throw new RangeError('The value "'+G+'" is invalid for option "size"');var C=new Uint8Array(G);return C.__proto__=g.prototype,C}function g(G,C,O){if("number"==typeof G){if("string"==typeof C)throw new TypeError('The "string" argument must be of type string. Received type number');return N(G)}return y(G,C,O)}function y(G,C,O){if("string"==typeof G)return function U(G,C){if(("string"!=typeof C||""===C)&&(C="utf8"),!g.isEncoding(C))throw new TypeError("Unknown encoding: "+C);var O=0|re(G,C),ue=k(O),de=ue.write(G,C);return de!==O&&(ue=ue.slice(0,de)),ue}(G,C);if(ArrayBuffer.isView(G))return ce(G);if(null==G)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(pe(G,ArrayBuffer)||G&&pe(G.buffer,ArrayBuffer))return function R(G,C,O){if(C<0||G.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<C+(O||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===C&&void 0===O?new Uint8Array(G):void 0===O?new Uint8Array(G,C):new Uint8Array(G,C,O)).__proto__=g.prototype,ue}(G,C,O);if("number"==typeof G)throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=G.valueOf&&G.valueOf();if(null!=ue&&ue!==G)return g.from(ue,C,O);var de=function $(G){if(g.isBuffer(G)){var C=0|ae(G.length),O=k(C);return 0===O.length||G.copy(O,0,0,C),O}return void 0!==G.length?"number"!=typeof G.length||Z(G.length)?k(0):ce(G):"Buffer"===G.type&&Array.isArray(G.data)?ce(G.data):void 0}(G);if(de)return de;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof G[Symbol.toPrimitive])return g.from(G[Symbol.toPrimitive]("string"),C,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function M(G){if("number"!=typeof G)throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function N(G){return M(G),k(G<0?0:0|ae(G))}function ce(G){for(var C=G.length<0?0:0|ae(G.length),O=k(C),ue=0;ue<C;ue+=1)O[ue]=255&G[ue];return O}function ae(G){if(G>=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D.toString(16)+" bytes");return 0|G}function re(G,C){if(g.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||pe(G,ArrayBuffer))return G.byteLength;if("string"!=typeof G)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var O=G.length,ue=arguments.length>2&&!0===arguments[2];if(!ue&&0===O)return 0;for(var de=!1;;)switch(C){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return I(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*O;case"hex":return O>>>1;case"base64":return Fe(G).length;default:if(de)return ue?-1:I(G).length;C=(""+C).toLowerCase(),de=!0}}function ne(G,C,O){var ue=!1;if((void 0===C||C<0)&&(C=0),C>this.length||((void 0===O||O>this.length)&&(O=this.length),O<=0)||(O>>>=0)<=(C>>>=0))return"";for(G||(G="utf8");;)switch(G){case"hex":return Ne(this,C,O);case"utf8":case"utf-8":return Ie(this,C,O);case"ascii":return Ye(this,C,O);case"latin1":case"binary":return Ae(this,C,O);case"base64":return xe(this,C,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,C,O);default:if(ue)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),ue=!0}}function W(G,C,O){var ue=G[C];G[C]=G[O],G[O]=ue}function z(G,C,O,ue,de){if(0===G.length)return-1;if("string"==typeof O?(ue=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),Z(O=+O)&&(O=de?0:G.length-1),O<0&&(O=G.length+O),O>=G.length){if(de)return-1;O=G.length-1}else if(O<0){if(!de)return-1;O=0}if("string"==typeof C&&(C=g.from(C,ue)),g.isBuffer(C))return 0===C.length?-1:v(G,C,O,ue,de);if("number"==typeof C)return C&=255,"function"==typeof Uint8Array.prototype.indexOf?de?Uint8Array.prototype.indexOf.call(G,C,O):Uint8Array.prototype.lastIndexOf.call(G,C,O):v(G,[C],O,ue,de);throw new TypeError("val must be string, number or Buffer")}function v(G,C,O,ue,de){var dt,He=1,Ke=G.length,ut=C.length;if(void 0!==ue&&("ucs2"===(ue=String(ue).toLowerCase())||"ucs-2"===ue||"utf16le"===ue||"utf-16le"===ue)){if(G.length<2||C.length<2)return-1;He=2,Ke/=2,ut/=2,O/=2}function Rt(q,S){return 1===He?q[S]:q.readUInt16BE(S*He)}if(de){var Vt=-1;for(dt=O;dt<Ke;dt++)if(Rt(G,dt)===Rt(C,-1===Vt?0:dt-Vt)){if(-1===Vt&&(Vt=dt),dt-Vt+1===ut)return Vt*He}else-1!==Vt&&(dt-=dt-Vt),Vt=-1}else for(O+ut>Ke&&(O=Ke-ut),dt=O;dt>=0;dt--){for(var rn=!0,Re=0;Re<ut;Re++)if(Rt(G,dt+Re)!==Rt(C,Re)){rn=!1;break}if(rn)return dt}return-1}function L(G,C,O,ue){O=Number(O)||0;var de=G.length-O;ue?(ue=Number(ue))>de&&(ue=de):ue=de;var He=C.length;ue>He/2&&(ue=He/2);for(var Ke=0;Ke<ue;++Ke){var ut=parseInt(C.substr(2*Ke,2),16);if(Z(ut))return Ke;G[O+Ke]=ut}return Ke}function T(G,C,O,ue){return Ve(I(C,G.length-O),G,O,ue)}function he(G,C,O,ue){return Ve(function se(G){for(var C=[],O=0;O<G.length;++O)C.push(255&G.charCodeAt(O));return C}(C),G,O,ue)}function H(G,C,O,ue){return he(G,C,O,ue)}function Ce(G,C,O,ue){return Ve(Fe(C),G,O,ue)}function le(G,C,O,ue){return Ve(function K(G,C){for(var O,ue,He=[],Ke=0;Ke<G.length&&!((C-=2)<0);++Ke)ue=(O=G.charCodeAt(Ke))>>8,He.push(O%256),He.push(ue);return He}(C,G.length-O),G,O,ue)}function xe(G,C,O){return E.fromByteArray(0===C&&O===G.length?G:G.slice(C,O))}function Ie(G,C,O){O=Math.min(G.length,O);for(var ue=[],de=C;de<O;){var Rt,dt,Vt,rn,He=G[de],Ke=null,ut=He>239?4:He>223?3:He>191?2:1;if(de+ut<=O)switch(ut){case 1:He<128&&(Ke=He);break;case 2:128==(192&(Rt=G[de+1]))&&(rn=(31&He)<<6|63&Rt)>127&&(Ke=rn);break;case 3:dt=G[de+2],128==(192&(Rt=G[de+1]))&&128==(192&dt)&&(rn=(15&He)<<12|(63&Rt)<<6|63&dt)>2047&&(rn<55296||rn>57343)&&(Ke=rn);break;case 4:dt=G[de+2],Vt=G[de+3],128==(192&(Rt=G[de+1]))&&128==(192&dt)&&128==(192&Vt)&&(rn=(15&He)<<18|(63&Rt)<<12|(63&dt)<<6|63&Vt)>65535&&rn<1114112&&(Ke=rn)}null===Ke?(Ke=65533,ut=1):Ke>65535&&(ue.push((Ke-=65536)>>>10&1023|55296),Ke=56320|1023&Ke),ue.push(Ke),de+=ut}return function tt(G){var C=G.length;if(C<=De)return String.fromCharCode.apply(String,G);for(var O="",ue=0;ue<C;)O+=String.fromCharCode.apply(String,G.slice(ue,ue+=De));return O}(ue)}J.kMaxLength=D,!(g.TYPED_ARRAY_SUPPORT=function A(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===G.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),g.poolSize=8192,g.from=function(G,C,O){return y(G,C,O)},g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,g.alloc=function(G,C,O){return function j(G,C,O){return M(G),G<=0?k(G):void 0!==C?"string"==typeof O?k(G).fill(C,O):k(G).fill(C):k(G)}(G,C,O)},g.allocUnsafe=function(G){return N(G)},g.allocUnsafeSlow=function(G){return N(G)},g.isBuffer=function(C){return null!=C&&!0===C._isBuffer&&C!==g.prototype},g.compare=function(C,O){if(pe(C,Uint8Array)&&(C=g.from(C,C.offset,C.byteLength)),pe(O,Uint8Array)&&(O=g.from(O,O.offset,O.byteLength)),!g.isBuffer(C)||!g.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===O)return 0;for(var ue=C.length,de=O.length,He=0,Ke=Math.min(ue,de);He<Ke;++He)if(C[He]!==O[He]){ue=C[He],de=O[He];break}return ue<de?-1:de<ue?1:0},g.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(C,O){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(0===C.length)return g.alloc(0);var ue;if(void 0===O)for(O=0,ue=0;ue<C.length;++ue)O+=C[ue].length;var de=g.allocUnsafe(O),He=0;for(ue=0;ue<C.length;++ue){var Ke=C[ue];if(pe(Ke,Uint8Array)&&(Ke=g.from(Ke)),!g.isBuffer(Ke))throw new TypeError('"list" argument must be an Array of Buffers');Ke.copy(de,He),He+=Ke.length}return de},g.byteLength=re,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<C;O+=2)W(this,O,O+1);return this},g.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<C;O+=4)W(this,O,O+3),W(this,O+1,O+2);return this},g.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<C;O+=8)W(this,O,O+7),W(this,O+1,O+6),W(this,O+2,O+5),W(this,O+3,O+4);return this},g.prototype.toLocaleString=g.prototype.toString=function(){var C=this.length;return 0===C?"":0===arguments.length?Ie(this,0,C):ne.apply(this,arguments)},g.prototype.equals=function(C){if(!g.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||0===g.compare(this,C)},g.prototype.inspect=function(){var C="",O=J.INSPECT_MAX_BYTES;return C=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(C+=" ... "),"<Buffer "+C+">"},g.prototype.compare=function(C,O,ue,de,He){if(pe(C,Uint8Array)&&(C=g.from(C,C.offset,C.byteLength)),!g.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(void 0===O&&(O=0),void 0===ue&&(ue=C?C.length:0),void 0===de&&(de=0),void 0===He&&(He=this.length),O<0||ue>C.length||de<0||He>this.length)throw new RangeError("out of range index");if(de>=He&&O>=ue)return 0;if(de>=He)return-1;if(O>=ue)return 1;if(this===C)return 0;for(var Ke=(He>>>=0)-(de>>>=0),ut=(ue>>>=0)-(O>>>=0),Rt=Math.min(Ke,ut),dt=this.slice(de,He),Vt=C.slice(O,ue),rn=0;rn<Rt;++rn)if(dt[rn]!==Vt[rn]){Ke=dt[rn],ut=Vt[rn];break}return Ke<ut?-1:ut<Ke?1:0},g.prototype.includes=function(C,O,ue){return-1!==this.indexOf(C,O,ue)},g.prototype.indexOf=function(C,O,ue){return z(this,C,O,ue,!0)},g.prototype.lastIndexOf=function(C,O,ue){return z(this,C,O,ue,!1)},g.prototype.write=function(C,O,ue,de){if(void 0===O)de="utf8",ue=this.length,O=0;else if(void 0===ue&&"string"==typeof O)de=O,ue=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(ue)?(ue>>>=0,void 0===de&&(de="utf8")):(de=ue,ue=void 0)}var He=this.length-O;if((void 0===ue||ue>He)&&(ue=He),C.length>0&&(ue<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");for(var Ke=!1;;)switch(de){case"hex":return L(this,C,O,ue);case"utf8":case"utf-8":return T(this,C,O,ue);case"ascii":return he(this,C,O,ue);case"latin1":case"binary":return H(this,C,O,ue);case"base64":return Ce(this,C,O,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,C,O,ue);default:if(Ke)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Ke=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var De=4096;function Ye(G,C,O){var ue="";O=Math.min(G.length,O);for(var de=C;de<O;++de)ue+=String.fromCharCode(127&G[de]);return ue}function Ae(G,C,O){var ue="";O=Math.min(G.length,O);for(var de=C;de<O;++de)ue+=String.fromCharCode(G[de]);return ue}function Ne(G,C,O){var ue=G.length;(!C||C<0)&&(C=0),(!O||O<0||O>ue)&&(O=ue);for(var de="",He=C;He<O;++He)de+=B(G[He]);return de}function ke(G,C,O){for(var ue=G.slice(C,O),de="",He=0;He<ue.length;He+=2)de+=String.fromCharCode(ue[He]+256*ue[He+1]);return de}function ze(G,C,O){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+C>O)throw new RangeError("Trying to access beyond buffer length")}function me(G,C,O,ue,de,He){if(!g.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>de||C<He)throw new RangeError('"value" argument is out of bounds');if(O+ue>G.length)throw new RangeError("Index out of range")}function Se(G,C,O,ue,de,He){if(O+ue>G.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function Xe(G,C,O,ue,de){return C=+C,O>>>=0,de||Se(G,0,O,4),b.write(G,C,O,ue,23,4),O+4}function rt(G,C,O,ue,de){return C=+C,O>>>=0,de||Se(G,0,O,8),b.write(G,C,O,ue,52,8),O+8}g.prototype.slice=function(C,O){var ue=this.length;(C=~~C)<0?(C+=ue)<0&&(C=0):C>ue&&(C=ue),(O=void 0===O?ue:~~O)<0?(O+=ue)<0&&(O=0):O>ue&&(O=ue),O<C&&(O=C);var de=this.subarray(C,O);return de.__proto__=g.prototype,de},g.prototype.readUIntLE=function(C,O,ue){C>>>=0,O>>>=0,ue||ze(C,O,this.length);for(var de=this[C],He=1,Ke=0;++Ke<O&&(He*=256);)de+=this[C+Ke]*He;return de},g.prototype.readUIntBE=function(C,O,ue){C>>>=0,O>>>=0,ue||ze(C,O,this.length);for(var de=this[C+--O],He=1;O>0&&(He*=256);)de+=this[C+--O]*He;return de},g.prototype.readUInt8=function(C,O){return C>>>=0,O||ze(C,1,this.length),this[C]},g.prototype.readUInt16LE=function(C,O){return C>>>=0,O||ze(C,2,this.length),this[C]|this[C+1]<<8},g.prototype.readUInt16BE=function(C,O){return C>>>=0,O||ze(C,2,this.length),this[C]<<8|this[C+1]},g.prototype.readUInt32LE=function(C,O){return C>>>=0,O||ze(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},g.prototype.readUInt32BE=function(C,O){return C>>>=0,O||ze(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},g.prototype.readIntLE=function(C,O,ue){C>>>=0,O>>>=0,ue||ze(C,O,this.length);for(var de=this[C],He=1,Ke=0;++Ke<O&&(He*=256);)de+=this[C+Ke]*He;return de>=(He*=128)&&(de-=Math.pow(2,8*O)),de},g.prototype.readIntBE=function(C,O,ue){C>>>=0,O>>>=0,ue||ze(C,O,this.length);for(var de=O,He=1,Ke=this[C+--de];de>0&&(He*=256);)Ke+=this[C+--de]*He;return Ke>=(He*=128)&&(Ke-=Math.pow(2,8*O)),Ke},g.prototype.readInt8=function(C,O){return C>>>=0,O||ze(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},g.prototype.readInt16LE=function(C,O){C>>>=0,O||ze(C,2,this.length);var ue=this[C]|this[C+1]<<8;return 32768&ue?4294901760|ue:ue},g.prototype.readInt16BE=function(C,O){C>>>=0,O||ze(C,2,this.length);var ue=this[C+1]|this[C]<<8;return 32768&ue?4294901760|ue:ue},g.prototype.readInt32LE=function(C,O){return C>>>=0,O||ze(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},g.prototype.readInt32BE=function(C,O){return C>>>=0,O||ze(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},g.prototype.readFloatLE=function(C,O){return C>>>=0,O||ze(C,4,this.length),b.read(this,C,!0,23,4)},g.prototype.readFloatBE=function(C,O){return C>>>=0,O||ze(C,4,this.length),b.read(this,C,!1,23,4)},g.prototype.readDoubleLE=function(C,O){return C>>>=0,O||ze(C,8,this.length),b.read(this,C,!0,52,8)},g.prototype.readDoubleBE=function(C,O){return C>>>=0,O||ze(C,8,this.length),b.read(this,C,!1,52,8)},g.prototype.writeUIntLE=function(C,O,ue,de){C=+C,O>>>=0,ue>>>=0,de||me(this,C,O,ue,Math.pow(2,8*ue)-1,0);var Ke=1,ut=0;for(this[O]=255&C;++ut<ue&&(Ke*=256);)this[O+ut]=C/Ke&255;return O+ue},g.prototype.writeUIntBE=function(C,O,ue,de){C=+C,O>>>=0,ue>>>=0,de||me(this,C,O,ue,Math.pow(2,8*ue)-1,0);var Ke=ue-1,ut=1;for(this[O+Ke]=255&C;--Ke>=0&&(ut*=256);)this[O+Ke]=C/ut&255;return O+ue},g.prototype.writeUInt8=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,1,255,0),this[O]=255&C,O+1},g.prototype.writeUInt16LE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,2,65535,0),this[O]=255&C,this[O+1]=C>>>8,O+2},g.prototype.writeUInt16BE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,2,65535,0),this[O]=C>>>8,this[O+1]=255&C,O+2},g.prototype.writeUInt32LE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,4,4294967295,0),this[O+3]=C>>>24,this[O+2]=C>>>16,this[O+1]=C>>>8,this[O]=255&C,O+4},g.prototype.writeUInt32BE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,4,4294967295,0),this[O]=C>>>24,this[O+1]=C>>>16,this[O+2]=C>>>8,this[O+3]=255&C,O+4},g.prototype.writeIntLE=function(C,O,ue,de){if(C=+C,O>>>=0,!de){var He=Math.pow(2,8*ue-1);me(this,C,O,ue,He-1,-He)}var Ke=0,ut=1,Rt=0;for(this[O]=255&C;++Ke<ue&&(ut*=256);)C<0&&0===Rt&&0!==this[O+Ke-1]&&(Rt=1),this[O+Ke]=(C/ut>>0)-Rt&255;return O+ue},g.prototype.writeIntBE=function(C,O,ue,de){if(C=+C,O>>>=0,!de){var He=Math.pow(2,8*ue-1);me(this,C,O,ue,He-1,-He)}var Ke=ue-1,ut=1,Rt=0;for(this[O+Ke]=255&C;--Ke>=0&&(ut*=256);)C<0&&0===Rt&&0!==this[O+Ke+1]&&(Rt=1),this[O+Ke]=(C/ut>>0)-Rt&255;return O+ue},g.prototype.writeInt8=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,1,127,-128),C<0&&(C=255+C+1),this[O]=255&C,O+1},g.prototype.writeInt16LE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,2,32767,-32768),this[O]=255&C,this[O+1]=C>>>8,O+2},g.prototype.writeInt16BE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,2,32767,-32768),this[O]=C>>>8,this[O+1]=255&C,O+2},g.prototype.writeInt32LE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,4,2147483647,-2147483648),this[O]=255&C,this[O+1]=C>>>8,this[O+2]=C>>>16,this[O+3]=C>>>24,O+4},g.prototype.writeInt32BE=function(C,O,ue){return C=+C,O>>>=0,ue||me(this,C,O,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[O]=C>>>24,this[O+1]=C>>>16,this[O+2]=C>>>8,this[O+3]=255&C,O+4},g.prototype.writeFloatLE=function(C,O,ue){return Xe(this,C,O,!0,ue)},g.prototype.writeFloatBE=function(C,O,ue){return Xe(this,C,O,!1,ue)},g.prototype.writeDoubleLE=function(C,O,ue){return rt(this,C,O,!0,ue)},g.prototype.writeDoubleBE=function(C,O,ue){return rt(this,C,O,!1,ue)},g.prototype.copy=function(C,O,ue,de){if(!g.isBuffer(C))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!de&&0!==de&&(de=this.length),O>=C.length&&(O=C.length),O||(O=0),de>0&&de<ue&&(de=ue),de===ue||0===C.length||0===this.length)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),C.length-O<de-ue&&(de=C.length-O+ue);var He=de-ue;if(this===C&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(O,ue,de);else if(this===C&&ue<O&&O<de)for(var Ke=He-1;Ke>=0;--Ke)C[Ke+O]=this[Ke+ue];else Uint8Array.prototype.set.call(C,this.subarray(ue,de),O);return He},g.prototype.fill=function(C,O,ue,de){if("string"==typeof C){if("string"==typeof O?(de=O,O=0,ue=this.length):"string"==typeof ue&&(de=ue,ue=this.length),void 0!==de&&"string"!=typeof de)throw new TypeError("encoding must be a string");if("string"==typeof de&&!g.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(1===C.length){var He=C.charCodeAt(0);("utf8"===de&&He<128||"latin1"===de)&&(C=He)}}else"number"==typeof C&&(C&=255);if(O<0||this.length<O||this.length<ue)throw new RangeError("Out of range index");if(ue<=O)return this;var Ke;if(O>>>=0,ue=void 0===ue?this.length:ue>>>0,C||(C=0),"number"==typeof C)for(Ke=O;Ke<ue;++Ke)this[Ke]=C;else{var ut=g.isBuffer(C)?C:g.from(C,de),Rt=ut.length;if(0===Rt)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(Ke=0;Ke<ue-O;++Ke)this[Ke+O]=ut[Ke%Rt]}return this};var Qe=/[^+/0-9A-Za-z-_]/g;function B(G){return G<16?"0"+G.toString(16):G.toString(16)}function I(G,C){C=C||1/0;for(var O,ue=G.length,de=null,He=[],Ke=0;Ke<ue;++Ke){if((O=G.charCodeAt(Ke))>55295&&O<57344){if(!de){if(O>56319){(C-=3)>-1&&He.push(239,191,189);continue}if(Ke+1===ue){(C-=3)>-1&&He.push(239,191,189);continue}de=O;continue}if(O<56320){(C-=3)>-1&&He.push(239,191,189),de=O;continue}O=65536+(de-55296<<10|O-56320)}else de&&(C-=3)>-1&&He.push(239,191,189);if(de=null,O<128){if((C-=1)<0)break;He.push(O)}else if(O<2048){if((C-=2)<0)break;He.push(O>>6|192,63&O|128)}else if(O<65536){if((C-=3)<0)break;He.push(O>>12|224,O>>6&63|128,63&O|128)}else{if(!(O<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;He.push(O>>18|240,O>>12&63|128,O>>6&63|128,63&O|128)}}return He}function Fe(G){return E.toByteArray(function ge(G){if((G=(G=G.split("=")[0]).trim().replace(Qe,"")).length<2)return"";for(;G.length%4!=0;)G+="=";return G}(G))}function Ve(G,C,O,ue){for(var de=0;de<ue&&!(de+O>=C.length||de>=G.length);++de)C[de+O]=G[de];return de}function pe(G,C){return G instanceof C||null!=G&&null!=G.constructor&&null!=G.constructor.name&&G.constructor.name===C.name}function Z(G){return G!=G}},1563:(te,J,m)=>{te.exports={ResizeSensor:m(884),ElementQueries:m(8381)}},8381:function(te,J,m){"use strict";var E,b,D;typeof window<"u"&&window,b=[m(884)],void 0!==(D="function"==typeof(E=function(A){var k=function(){var y,M={},j=[];function N(H){H||(H=document.documentElement);var Ce=window.getComputedStyle(H,null).fontSize;return parseFloat(Ce)||16}function ce(H,Ce){var le=Ce.split(/\d/),xe=le[le.length-1];switch(Ce=parseFloat(Ce),xe){case"px":default:return Ce;case"em":return Ce*N(H);case"rem":return Ce*N();case"vw":return Ce*document.documentElement.clientWidth/100;case"vh":return Ce*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Ie=document.documentElement.clientWidth/100,De=document.documentElement.clientHeight/100;return Ce*(0,Math["vmin"===xe?"min":"max"])(Ie,De)}}function R(H,Ce){this.element=H;var le,xe,Ie,De,tt,Ye,Ae,Ne,ke=["min-width","min-height","max-width","max-height"];this.call=function(){for(le in Ie=function U(H){if(!H.getBoundingClientRect)return{width:H.offsetWidth,height:H.offsetHeight};var Ce=H.getBoundingClientRect();return{width:Math.round(Ce.width),height:Math.round(Ce.height)}}(this.element),Ye={},M[Ce])M[Ce].hasOwnProperty(le)&&(De=ce(this.element,(xe=M[Ce][le]).value),tt="width"===xe.property?Ie.width:Ie.height,Ae="","min"===xe.mode&&tt>=De&&(Ae+=xe.value),"max"===xe.mode&&tt<=De&&(Ae+=xe.value),Ye[Ne=xe.mode+"-"+xe.property]||(Ye[Ne]=""),Ae&&-1===(" "+Ye[Ne]+" ").indexOf(" "+Ae+" ")&&(Ye[Ne]+=" "+Ae));for(var ze in ke)ke.hasOwnProperty(ze)&&(Ye[ke[ze]]?this.element.setAttribute(ke[ze],Ye[ke[ze]].substr(1)):this.element.removeAttribute(ke[ze]))}}function $(H,Ce){H.elementQueriesSetupInformation||(H.elementQueriesSetupInformation=new R(H,Ce)),H.elementQueriesSensor||(H.elementQueriesSensor=new A(H,function(){H.elementQueriesSetupInformation.call()}))}function ae(H,Ce,le,xe){if(typeof M[H]>"u"){M[H]=[];var Ie=j.length;y.innerHTML+="\n"+H+" {animation: 0.1s element-queries;}",y.innerHTML+="\n"+H+" > .resize-sensor {min-width: "+Ie+"px;}",j.push(H)}M[H].push({mode:Ce,property:le,value:xe})}function Y(H){var Ce;if(document.querySelectorAll&&(Ce=H?H.querySelectorAll.bind(H):document.querySelectorAll.bind(document)),!Ce&&typeof $$<"u"&&(Ce=$$),!Ce&&typeof jQuery<"u"&&(Ce=jQuery),!Ce)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Ce}function ne(H){var Ce=[],le=[],xe=[],Ie=0,De=-1,tt=[];for(var Ye in H.children)if(H.children.hasOwnProperty(Ye)&&H.children[Ye].tagName&&"img"===H.children[Ye].tagName.toLowerCase()){Ce.push(H.children[Ye]);var Ae=H.children[Ye].getAttribute("min-width")||H.children[Ye].getAttribute("data-min-width"),Ne=H.children[Ye].getAttribute("data-src")||H.children[Ye].getAttribute("url");xe.push(Ne),le.push({minWidth:Ae}),Ae?H.children[Ye].style.display="none":(Ie=Ce.length-1,H.children[Ye].style.display="block")}function ze(){var Se,me=!1;for(Se in Ce)Ce.hasOwnProperty(Se)&&le[Se].minWidth&&H.offsetWidth>le[Se].minWidth&&(me=Se);if(me||(me=Ie),De!==me)if(tt[me])Ce[De].style.display="none",Ce[me].style.display="block",De=me;else{var Xe=new Image;Xe.onload=function(){Ce[me].src=xe[me],Ce[De].style.display="none",Ce[me].style.display="block",tt[me]=!0,De=me},Xe.src=xe[me]}else Ce[me].src=xe[me]}De=Ie,H.resizeSensorInstance=new A(H,ze),ze()}var z=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,v=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function L(H){var Ce,le,xe,Ie;for(H=H.replace(/'/g,'"');null!==(Ce=z.exec(H));)for(le=Ce[1]+Ce[3],xe=Ce[2];null!==(Ie=v.exec(xe));)ae(le,Ie[1],Ie[2],Ie[3])}function T(H){var Ce="";if(H)if("string"==typeof H)(-1!==(H=H.toLowerCase()).indexOf("min-width")||-1!==H.indexOf("max-width"))&&L(H);else for(var le=0,xe=H.length;le<xe;le++)1===H[le].type?(-1!==(Ce=H[le].selectorText||H[le].cssText).indexOf("min-height")||-1!==Ce.indexOf("max-height")||-1!==Ce.indexOf("min-width")||-1!==Ce.indexOf("max-width"))&&L(Ce):4===H[le].type?T(H[le].cssRules||H[le].rules):3===H[le].type&&H[le].styleSheet.hasOwnProperty("cssRules")&&T(H[le].styleSheet.cssRules)}var he=!1;this.init=function(){var H="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?H="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?H="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(H="oanimationstart"),document.body.addEventListener(H,function(xe){var Ie=xe.target,De=Ie&&window.getComputedStyle(Ie,null),tt=De&&De.getPropertyValue("animation-name");if(tt&&-1!==tt.indexOf("element-queries")){Ie.elementQueriesSensor=new A(Ie,function(){Ie.elementQueriesSetupInformation&&Ie.elementQueriesSetupInformation.call()});var Ne=window.getComputedStyle(Ie.resizeSensor,null).getPropertyValue("min-width");Ne=parseInt(Ne.replace("px","")),$(xe.target,j[Ne])}}),he||((y=document.createElement("style")).type="text/css",y.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",y.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(y),he=!0);for(var Ce=0,le=document.styleSheets.length;Ce<le;Ce++)try{document.styleSheets[Ce].href&&0===document.styleSheets[Ce].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Ce].href),T(document.styleSheets[Ce].cssRules||document.styleSheets[Ce].rules||document.styleSheets[Ce].cssText)}catch{}!function W(){for(var Ce=Y()("[data-responsive-image],[responsive-image]"),le=0,xe=Ce.length;le<xe;le++)ne(Ce[le])}()},this.findElementQueriesElements=function(H){!function re(H){var Ce=Y(H);for(var le in M)if(M.hasOwnProperty(le))for(var xe=Ce(le,H),Ie=0,De=xe.length;Ie<De;Ie++)$(xe[Ie],le)}(H)},this.update=function(){this.init()}};k.update=function(){k.instance.update()},k.detach=function(y){y.elementQueriesSetupInformation?(y.elementQueriesSensor.detach(),delete y.elementQueriesSetupInformation,delete y.elementQueriesSensor):y.resizeSensorInstance&&(y.resizeSensorInstance.detach(),delete y.resizeSensorInstance)},k.init=function(){k.instance||(k.instance=new k),k.instance.init()};return k.findElementQueriesElements=function(y){k.instance.findElementQueriesElements(y)},k.listen=function(){!function(y){if(document.addEventListener)document.addEventListener("DOMContentLoaded",y,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var M=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(y(),clearInterval(M))},10);else window.onload=y}(k.init)},k})?E.apply(J,b):E)&&(te.exports=D)},884:function(te,J,m){"use strict";var E,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(E=function(){if(typeof window>"u")return null;var D=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),A=D.requestAnimationFrame||D.mozRequestAnimationFrame||D.webkitRequestAnimationFrame||function(U){return D.setTimeout(U,20)},k=D.cancelAnimationFrame||D.mozCancelAnimationFrame||D.webkitCancelAnimationFrame||function(U){D.clearTimeout(U)};function g(U,ce){var R=Object.prototype.toString.call(U),$="[object Array]"===R||"[object NodeList]"===R||"[object HTMLCollection]"===R||"[object Object]"===R||typeof jQuery<"u"&&U instanceof jQuery||typeof Elements<"u"&&U instanceof Elements,ae=0,Y=U.length;if($)for(;ae<Y;ae++)ce(U[ae]);else ce(U)}function y(U){if(!U.getBoundingClientRect)return{width:U.offsetWidth,height:U.offsetHeight};var ce=U.getBoundingClientRect();return{width:Math.round(ce.width),height:Math.round(ce.height)}}function M(U,ce){Object.keys(ce).forEach(function(R){U.style[R]=ce[R]})}var j=function(U,ce){var R=0;function $(){var re,ne,Y=[];this.add=function(W){Y.push(W)},this.call=function(W){for(re=0,ne=Y.length;re<ne;re++)Y[re].call(this,W)},this.remove=function(W){var z=[];for(re=0,ne=Y.length;re<ne;re++)Y[re]!==W&&z.push(Y[re]);Y=z},this.length=function(){return Y.length}}function ae(Y,re){if(Y){if(Y.resizedAttached)return void Y.resizedAttached.add(re);Y.resizedAttached=new $,Y.resizedAttached.add(re),Y.resizeSensor=document.createElement("div"),Y.resizeSensor.dir="ltr",Y.resizeSensor.className="resize-sensor";var ne={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},W={position:"absolute",left:"0px",top:"0px",transition:"0s"};M(Y.resizeSensor,ne);var z=document.createElement("div");z.className="resize-sensor-expand",M(z,ne);var v=document.createElement("div");M(v,W),z.appendChild(v);var L=document.createElement("div");L.className="resize-sensor-shrink",M(L,ne);var T=document.createElement("div");M(T,W),M(T,{width:"200%",height:"200%"}),L.appendChild(T),Y.resizeSensor.appendChild(z),Y.resizeSensor.appendChild(L),Y.appendChild(Y.resizeSensor);var he=window.getComputedStyle(Y),H=he?he.getPropertyValue("position"):null;"absolute"!==H&&"relative"!==H&&"fixed"!==H&&"sticky"!==H&&(Y.style.position="relative");var Ce=!1,le=0,xe=y(Y),Ie=0,De=0,tt=!0;R=0;var Ae=function(){if(tt){if(0===Y.offsetWidth&&0===Y.offsetHeight)return void(R||(R=A(function(){R=0,Ae()})));tt=!1}var me,Se;Se=Y.offsetHeight,v.style.width=(me=Y.offsetWidth)+10+"px",v.style.height=Se+10+"px",z.scrollLeft=me+10,z.scrollTop=Se+10,L.scrollLeft=me+10,L.scrollTop=Se+10};Y.resizeSensor.resetSensor=Ae;var Ne=function(){le=0,Ce&&(Ie=xe.width,De=xe.height,Y.resizedAttached&&Y.resizedAttached.call(xe))},ke=function(){xe=y(Y),(Ce=xe.width!==Ie||xe.height!==De)&&!le&&(le=A(Ne)),Ae()},ze=function(me,Se,Xe){me.attachEvent?me.attachEvent("on"+Se,Xe):me.addEventListener(Se,Xe)};ze(z,"scroll",ke),ze(L,"scroll",ke),R=A(function(){R=0,Ae()})}}g(U,function(Y){ae(Y,ce)}),this.detach=function(Y){R||(k(R),R=0),j.detach(U,Y)},this.reset=function(){U.resizeSensor.resetSensor()}};if(j.reset=function(U){g(U,function(ce){ce.resizeSensor.resetSensor()})},j.detach=function(U,ce){g(U,function(R){R&&(R.resizedAttached&&"function"==typeof ce&&(R.resizedAttached.remove(ce),R.resizedAttached.length())||R.resizeSensor&&(R.contains(R.resizeSensor)&&R.removeChild(R.resizeSensor),delete R.resizeSensor,delete R.resizedAttached))})},typeof MutationObserver<"u"){var N=new MutationObserver(function(U){for(var ce in U)if(U.hasOwnProperty(ce))for(var R=U[ce].addedNodes,$=0;$<R.length;$++)R[$].resizeSensor&&j.reset(R[$])});document.addEventListener("DOMContentLoaded",function(U){N.observe(document.body,{childList:!0,subtree:!0})})}return j})?E.call(J,m,J,te):E)&&(te.exports=b)},2016:te=>{"use strict";var E,J="object"==typeof Reflect?Reflect:null,m=J&&"function"==typeof J.apply?J.apply:function(z,v,L){return Function.prototype.apply.call(z,v,L)};E=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var D=Number.isNaN||function(z){return z!=z};function A(){A.init.call(this)}te.exports=A,te.exports.once=function Y(W,z){return new Promise(function(v,L){function T(H){W.removeListener(z,he),L(H)}function he(){"function"==typeof W.removeListener&&W.removeListener("error",T),v([].slice.call(arguments))}ne(W,z,he,{once:!0}),"error"!==z&&function re(W,z,v){"function"==typeof W.on&&ne(W,"error",z,v)}(W,T,{once:!0})})},A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var k=10;function g(W){if("function"!=typeof W)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}function y(W){return void 0===W._maxListeners?A.defaultMaxListeners:W._maxListeners}function M(W,z,v,L){var T,he,H;if(g(v),void 0===(he=W._events)?(he=W._events=Object.create(null),W._eventsCount=0):(void 0!==he.newListener&&(W.emit("newListener",z,v.listener?v.listener:v),he=W._events),H=he[z]),void 0===H)H=he[z]=v,++W._eventsCount;else if("function"==typeof H?H=he[z]=L?[v,H]:[H,v]:L?H.unshift(v):H.push(v),(T=y(W))>0&&H.length>T&&!H.warned){H.warned=!0;var Ce=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ce.name="MaxListenersExceededWarning",Ce.emitter=W,Ce.type=z,Ce.count=H.length,function b(W){console&&console.warn&&console.warn(W)}(Ce)}return W}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(W,z,v){var L={fired:!1,wrapFn:void 0,target:W,type:z,listener:v},T=j.bind(L);return T.listener=v,L.wrapFn=T,T}function U(W,z,v){var L=W._events;if(void 0===L)return[];var T=L[z];return void 0===T?[]:"function"==typeof T?v?[T.listener||T]:[T]:v?function ae(W){for(var z=new Array(W.length),v=0;v<z.length;++v)z[v]=W[v].listener||W[v];return z}(T):R(T,T.length)}function ce(W){var z=this._events;if(void 0!==z){var v=z[W];if("function"==typeof v)return 1;if(void 0!==v)return v.length}return 0}function R(W,z){for(var v=new Array(z),L=0;L<z;++L)v[L]=W[L];return v}function ne(W,z,v,L){if("function"==typeof W.on)L.once?W.once(z,v):W.on(z,v);else{if("function"!=typeof W.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W);W.addEventListener(z,function T(he){L.once&&W.removeEventListener(z,T),v(he)})}}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(W){if("number"!=typeof W||W<0||D(W))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+W+".");k=W}}),A.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(z){if("number"!=typeof z||z<0||D(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},A.prototype.getMaxListeners=function(){return y(this)},A.prototype.emit=function(z){for(var v=[],L=1;L<arguments.length;L++)v.push(arguments[L]);var T="error"===z,he=this._events;if(void 0!==he)T=T&&void 0===he.error;else if(!T)return!1;if(T){var H;if(v.length>0&&(H=v[0]),H instanceof Error)throw H;var Ce=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw Ce.context=H,Ce}var le=he[z];if(void 0===le)return!1;if("function"==typeof le)m(le,this,v);else{var xe=le.length,Ie=R(le,xe);for(L=0;L<xe;++L)m(Ie[L],this,v)}return!0},A.prototype.on=A.prototype.addListener=function(z,v){return M(this,z,v,!1)},A.prototype.prependListener=function(z,v){return M(this,z,v,!0)},A.prototype.once=function(z,v){return g(v),this.on(z,N(this,z,v)),this},A.prototype.prependOnceListener=function(z,v){return g(v),this.prependListener(z,N(this,z,v)),this},A.prototype.off=A.prototype.removeListener=function(z,v){var L,T,he,H,Ce;if(g(v),void 0===(T=this._events))return this;if(void 0===(L=T[z]))return this;if(L===v||L.listener===v)0==--this._eventsCount?this._events=Object.create(null):(delete T[z],T.removeListener&&this.emit("removeListener",z,L.listener||v));else if("function"!=typeof L){for(he=-1,H=L.length-1;H>=0;H--)if(L[H]===v||L[H].listener===v){Ce=L[H].listener,he=H;break}if(he<0)return this;0===he?L.shift():function $(W,z){for(;z+1<W.length;z++)W[z]=W[z+1];W.pop()}(L,he),1===L.length&&(T[z]=L[0]),void 0!==T.removeListener&&this.emit("removeListener",z,Ce||v)}return this},A.prototype.removeAllListeners=function(z){var v,L,T;if(void 0===(L=this._events))return this;if(void 0===L.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==L[z]&&(0==--this._eventsCount?this._events=Object.create(null):delete L[z]),this;if(0===arguments.length){var H,he=Object.keys(L);for(T=0;T<he.length;++T)"removeListener"!==(H=he[T])&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(v=L[z]))this.removeListener(z,v);else if(void 0!==v)for(T=v.length-1;T>=0;T--)this.removeListener(z,v[T]);return this},A.prototype.listeners=function(z){return U(this,z,!0)},A.prototype.rawListeners=function(z){return U(this,z,!1)},A.listenerCount=function(W,z){return"function"==typeof W.listenerCount?W.listenerCount(z):ce.call(W,z)},A.prototype.listenerCount=ce,A.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]}},7991:(te,J,m)=>{var E=m(6943),b=m(9151),D=m(2323);function A(U,ce,R){if(!E(U))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!U.hasNode(ce))throw new Error('graphology-shortest-path: the "'+ce+'" source node does not exist in the given graph.');if(!U.hasNode(R))throw new Error('graphology-shortest-path: the "'+R+'" target node does not exist in the given graph.');if((ce=""+ce)==(R=""+R))return[ce];var $=U.inboundNeighbors.bind(U),ae=U.outboundNeighbors.bind(U),Y={},re={};Y[ce]=null,re[R]=null;var z,v,L,T,he,H,Ce,le,ne=[ce],W=[R],xe=!1;e:for(;ne.length&&W.length;)if(ne.length<=W.length){for(z=ne,ne=[],he=0,Ce=z.length;he<Ce;he++)for(H=0,le=(L=ae(v=z[he])).length;H<le;H++)if((T=L[H])in Y||(ne.push(T),Y[T]=v),T in re){xe=!0;break e}}else for(z=W,W=[],he=0,Ce=z.length;he<Ce;he++)for(v=z[he],L=$(v),H=0,le=L.length;H<le;H++)if(T=L[H],T in re||(W.push(T),re[T]=v),T in Y){xe=!0;break e}if(!xe)return null;for(var Ie=[];T;)Ie.unshift(T),T=Y[T];for(T=re[Ie[Ie.length-1]];T;)Ie.push(T),T=re[T];return Ie.length?Ie:null}function k(U,ce){if(!E(U))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!U.hasNode(ce))throw new Error('graphology-shortest-path: the "'+ce+'" source node does not exist in the given graph.');var ae,Y,re,ne,W,z,R={},$={};for(R[ce=""+ce]=!0,$[ce]=[ce];Object.keys(R).length;)for(re in ae=R,R={},ae)for(W=0,z=(Y=U.outboundNeighbors(re)).length;W<z;W++)$[ne=Y[W]]||($[ne]=$[re].concat(ne),R[ne]=!0);return $}function g(U,ce,R){if(!E(ce))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!ce.hasNode(R))throw new Error('graphology-shortest-path: the "'+R+'" source node does not exist in the given graph.');R=""+R;var $=new Set,ae={},Y=0;ae[R]=0;for(var ne,W,z,re=[R];0!==re.length;){var v=[];for(ne=0,W=re.length;ne<W;ne++)!$.has(z=re[ne])&&($.add(z),D(v,ce[U](z)),ae[z]=Y);Y++,re=v}return ae}var y=g.bind(null,"outboundNeighbors"),M=g.bind(null,"neighbors");function j(U,ce,R){return arguments.length<3?k(U,ce):A(U,ce,R)}j.bidirectional=A,j.singleSource=k,j.singleSourceLength=y,j.undirectedSingleSourceLength=M,j.brandes=function N(U,ce){ce=""+ce;var re,ne,W,z,v,L,T,he,H,R=[],$={},ae={},Y=U.nodes();for(L=0,he=Y.length;L<he;L++)$[z=Y[L]]=[],ae[z]=0;var Ce={};ae[ce]=1,Ce[ce]=0;for(var le=b.of(ce);le.size;)for(z=le.dequeue(),R.push(z),re=Ce[z],ne=ae[z],T=0,H=(W=U.outboundNeighbors(z)).length;T<H;T++)(v=W[T])in Ce||(le.enqueue(v),Ce[v]=re+1),Ce[v]===re+1&&(ae[v]+=ne,$[v].push(z));return[R,$,ae]},te.exports=j},6943:te=>{te.exports=function(m){return null!==m&&"object"==typeof m&&"function"==typeof m.addUndirectedEdgeWithKey&&"function"==typeof m.dropNode&&"boolean"==typeof m.multi}},4938:function(te){te.exports=function(){"use strict";function J(_e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(_e)}function m(_e,Me){_e.prototype=Object.create(Me.prototype),_e.prototype.constructor=_e,b(_e,Me)}function E(_e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(_e)}function b(_e,Me){return(b=Object.setPrototypeOf||function(we,V){return we.__proto__=V,we})(_e,Me)}function A(_e,Me,we){return(A=function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(V,ie,fe){var Le=[null];Le.push.apply(Le,ie);var $e=new(Function.bind.apply(V,Le));return fe&&b($e,fe.prototype),$e}).apply(null,arguments)}function k(_e){var Me="function"==typeof Map?new Map:void 0;return(k=function(we){if(null===we||-1===Function.toString.call(we).indexOf("[native code]"))return we;if("function"!=typeof we)throw new TypeError("Super expression must either be null or a function");if(void 0!==Me){if(Me.has(we))return Me.get(we);Me.set(we,ie)}function ie(){return A(we,arguments,E(this).constructor)}return ie.prototype=Object.create(we.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),b(ie,we)})(_e)}function g(_e){if(void 0===_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}var y=function(){for(var _e=arguments[0],Me=1,we=arguments.length;Me<we;Me++)if(arguments[Me])for(var V in arguments[Me])_e[V]=arguments[Me][V];return _e};function M(_e,Me,we,V){var ie=_e._nodes.get(Me),fe=null;return ie?fe="mixed"===V?ie.out&&ie.out[we]||ie.undirected&&ie.undirected[we]:"directed"===V?ie.out&&ie.out[we]:ie.undirected&&ie.undirected[we]:fe}function N(_e){return"object"===J(_e)&&null!==_e&&_e.constructor===Object}function U(_e){var Me;for(Me in _e)return!1;return!0}function ce(_e,Me,we){Object.defineProperty(_e,Me,{enumerable:!1,configurable:!1,writable:!0,value:we})}function R(_e,Me,we){var V={enumerable:!0,configurable:!0};"function"==typeof we?V.get=we:(V.value=we,V.writable=!1),Object.defineProperty(_e,Me,V)}function $(_e){return!(!N(_e)||_e.attributes&&!Array.isArray(_e.attributes))}"function"==typeof Object.assign&&(y=Object.assign);var ae,Y={exports:{}},re="object"==typeof Reflect?Reflect:null,ne=re&&"function"==typeof re.apply?re.apply:function(_e,Me,we){return Function.prototype.apply.call(_e,Me,we)};ae=re&&"function"==typeof re.ownKeys?re.ownKeys:Object.getOwnPropertySymbols?function(_e){return Object.getOwnPropertyNames(_e).concat(Object.getOwnPropertySymbols(_e))}:function(_e){return Object.getOwnPropertyNames(_e)};var W=Number.isNaN||function(_e){return _e!=_e};function z(){z.init.call(this)}Y.exports=z,Y.exports.once=function(_e,Me){return new Promise(function(we,V){function ie(Le){_e.removeListener(Me,fe),V(Le)}function fe(){"function"==typeof _e.removeListener&&_e.removeListener("error",ie),we([].slice.call(arguments))}var Le;De(_e,Me,fe,{once:!0}),"error"!==Me&&("function"==typeof(Le=_e).on&&De(Le,"error",ie,{once:!0}))})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var v=10;function L(_e){if("function"!=typeof _e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _e)}function T(_e){return void 0===_e._maxListeners?z.defaultMaxListeners:_e._maxListeners}function he(_e,Me,we,V){var ie,fe,Le;if(L(we),void 0===(fe=_e._events)?(fe=_e._events=Object.create(null),_e._eventsCount=0):(void 0!==fe.newListener&&(_e.emit("newListener",Me,we.listener?we.listener:we),fe=_e._events),Le=fe[Me]),void 0===Le)Le=fe[Me]=we,++_e._eventsCount;else if("function"==typeof Le?Le=fe[Me]=V?[we,Le]:[Le,we]:V?Le.unshift(we):Le.push(we),(ie=T(_e))>0&&Le.length>ie&&!Le.warned){Le.warned=!0;var ot=new Error("Possible EventEmitter memory leak detected. "+Le.length+" "+String(Me)+" listeners added. Use emitter.setMaxListeners() to increase limit");ot.name="MaxListenersExceededWarning",ot.emitter=_e,ot.type=Me,ot.count=Le.length,console&&console.warn&&console.warn(ot)}return _e}function H(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ce(_e,Me,we){var V={fired:!1,wrapFn:void 0,target:_e,type:Me,listener:we},ie=H.bind(V);return ie.listener=we,V.wrapFn=ie,ie}function le(_e,Me,we){var V=_e._events;if(void 0===V)return[];var ie=V[Me];return void 0===ie?[]:"function"==typeof ie?we?[ie.listener||ie]:[ie]:we?function(fe){for(var Le=new Array(fe.length),$e=0;$e<Le.length;++$e)Le[$e]=fe[$e].listener||fe[$e];return Le}(ie):Ie(ie,ie.length)}function xe(_e){var Me=this._events;if(void 0!==Me){var we=Me[_e];if("function"==typeof we)return 1;if(void 0!==we)return we.length}return 0}function Ie(_e,Me){for(var we=new Array(Me),V=0;V<Me;++V)we[V]=_e[V];return we}function De(_e,Me,we,V){if("function"==typeof _e.on)V.once?_e.once(Me,we):_e.on(Me,we);else{if("function"!=typeof _e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _e);_e.addEventListener(Me,function ie(fe){V.once&&_e.removeEventListener(Me,ie),we(fe)})}}function tt(_e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:_e}),this.done=!1}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(_e){if("number"!=typeof _e||_e<0||W(_e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_e+".");v=_e}}),z.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(_e){if("number"!=typeof _e||_e<0||W(_e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_e+".");return this._maxListeners=_e,this},z.prototype.getMaxListeners=function(){return T(this)},z.prototype.emit=function(_e){for(var Me=[],we=1;we<arguments.length;we++)Me.push(arguments[we]);var V="error"===_e,ie=this._events;if(void 0!==ie)V=V&&void 0===ie.error;else if(!V)return!1;if(V){var fe;if(Me.length>0&&(fe=Me[0]),fe instanceof Error)throw fe;var Le=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw Le.context=fe,Le}var $e=ie[_e];if(void 0===$e)return!1;if("function"==typeof $e)ne($e,this,Me);else{var ot=$e.length,wt=Ie($e,ot);for(we=0;we<ot;++we)ne(wt[we],this,Me)}return!0},z.prototype.addListener=function(_e,Me){return he(this,_e,Me,!1)},z.prototype.on=z.prototype.addListener,z.prototype.prependListener=function(_e,Me){return he(this,_e,Me,!0)},z.prototype.once=function(_e,Me){return L(Me),this.on(_e,Ce(this,_e,Me)),this},z.prototype.prependOnceListener=function(_e,Me){return L(Me),this.prependListener(_e,Ce(this,_e,Me)),this},z.prototype.removeListener=function(_e,Me){var we,V,ie,fe,Le;if(L(Me),void 0===(V=this._events))return this;if(void 0===(we=V[_e]))return this;if(we===Me||we.listener===Me)0==--this._eventsCount?this._events=Object.create(null):(delete V[_e],V.removeListener&&this.emit("removeListener",_e,we.listener||Me));else if("function"!=typeof we){for(ie=-1,fe=we.length-1;fe>=0;fe--)if(we[fe]===Me||we[fe].listener===Me){Le=we[fe].listener,ie=fe;break}if(ie<0)return this;0===ie?we.shift():function($e,ot){for(;ot+1<$e.length;ot++)$e[ot]=$e[ot+1];$e.pop()}(we,ie),1===we.length&&(V[_e]=we[0]),void 0!==V.removeListener&&this.emit("removeListener",_e,Le||Me)}return this},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(_e){var Me,we,V;if(void 0===(we=this._events))return this;if(void 0===we.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==we[_e]&&(0==--this._eventsCount?this._events=Object.create(null):delete we[_e]),this;if(0===arguments.length){var ie,fe=Object.keys(we);for(V=0;V<fe.length;++V)"removeListener"!==(ie=fe[V])&&this.removeAllListeners(ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Me=we[_e]))this.removeListener(_e,Me);else if(void 0!==Me)for(V=Me.length-1;V>=0;V--)this.removeListener(_e,Me[V]);return this},z.prototype.listeners=function(_e){return le(this,_e,!0)},z.prototype.rawListeners=function(_e){return le(this,_e,!1)},z.listenerCount=function(_e,Me){return"function"==typeof _e.listenerCount?_e.listenerCount(Me):xe.call(_e,Me)},z.prototype.listenerCount=xe,z.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},tt.prototype.next=function(){if(this.done)return{done:!0};var _e=this._next();return _e.done&&(this.done=!0),_e},typeof Symbol<"u"&&(tt.prototype[Symbol.iterator]=function(){return this}),tt.of=function(){var _e=arguments,Me=_e.length,we=0;return new tt(function(){return we>=Me?{done:!0}:{done:!1,value:_e[we++]}})},tt.empty=function(){var _e=new tt(null);return _e.done=!0,_e},tt.is=function(_e){return _e instanceof tt||"object"==typeof _e&&null!==_e&&"function"==typeof _e.next};var Ye=tt,Ae=function(_e,Me){for(var we,V=arguments.length>1?Me:1/0,ie=V!==1/0?new Array(V):[],fe=0;;){if(fe===V)return ie;if((we=_e.next()).done)return fe!==Me?ie.slice(0,fe):ie;ie[fe++]=we.value}},Ne=function(_e){function Me(we,V){var ie;return(ie=_e.call(this)||this).name="GraphError",ie.message=we||"",ie.data=V||{},ie}return m(Me,_e),Me}(k(Error)),ke=function(_e){function Me(we,V){var ie;return(ie=_e.call(this,we,V)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(g(ie),Me.prototype.constructor),ie}return m(Me,_e),Me}(Ne),ze=function(_e){function Me(we,V){var ie;return(ie=_e.call(this,we,V)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(g(ie),Me.prototype.constructor),ie}return m(Me,_e),Me}(Ne),me=function(_e){function Me(we,V){var ie;return(ie=_e.call(this,we,V)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(g(ie),Me.prototype.constructor),ie}return m(Me,_e),Me}(Ne);function Se(_e,Me){this.key=_e,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Xe(_e,Me){this.key=_e,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function rt(_e,Me){this.key=_e,this.attributes=Me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Qe(_e,Me,we,V,ie,fe){this.key=Me,this.attributes=fe,this.undirected=_e,this.source=V,this.target=ie,this.generatedKey=we}function ge(_e,Me,we,V,ie,fe,Le){var $e,ot,wt="out",Tt="in";if(Me&&(wt=Tt="undirected"),_e.multi){if(void 0===(ot=($e=fe[wt])[ie])&&($e[ie]=ot=new Set),ot.add(we),V===ie&&Me)return;void 0===($e=Le[Tt])[V]&&($e[V]=ot)}else{if(fe[wt][ie]=we,V===ie&&Me)return;Le[Tt][V]=we}}Xe.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},rt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var I=[{name:function(_e){return"get".concat(_e,"Attribute")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+V,$e=""+ie;if(ie=arguments[2],!(fe=M(this,Le,$e,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return fe.attributes[ie]}}},{name:function(_e){return"get".concat(_e,"Attributes")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V){var ie;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var fe=""+V,Le=""+arguments[1];if(!(ie=M(this,fe,Le,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(fe,'" - "').concat(Le,'").'))}else if(!(ie=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==we&&ie.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return ie.attributes}}},{name:function(_e){return"has".concat(_e,"Attribute")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+V,$e=""+ie;if(ie=arguments[2],!(fe=M(this,Le,$e,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return fe.attributes.hasOwnProperty(ie)}}},{name:function(_e){return"set".concat(_e,"Attribute")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie,fe){var Le;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+V,ot=""+ie;if(ie=arguments[2],fe=arguments[3],!(Le=M(this,$e,ot,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat($e,'" - "').concat(ot,'").'))}else if(!(Le=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==we&&Le.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return Le.attributes[ie]=fe,this.emit("edgeAttributesUpdated",{key:Le.key,type:"set",attributes:Le.attributes,name:ie}),this}}},{name:function(_e){return"update".concat(_e,"Attribute")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie,fe){var Le;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+V,ot=""+ie;if(ie=arguments[2],fe=arguments[3],!(Le=M(this,$e,ot,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat($e,'" - "').concat(ot,'").'))}else if(!(Le=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("function"!=typeof fe)throw new ke("Graph.".concat(Me,": updater should be a function."));if("mixed"!==we&&Le.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return Le.attributes[ie]=fe(Le.attributes[ie]),this.emit("edgeAttributesUpdated",{key:Le.key,type:"set",attributes:Le.attributes,name:ie}),this}}},{name:function(_e){return"remove".concat(_e,"Attribute")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+V,$e=""+ie;if(ie=arguments[2],!(fe=M(this,Le,$e,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return delete fe.attributes[ie],this.emit("edgeAttributesUpdated",{key:fe.key,type:"remove",attributes:fe.attributes,name:ie}),this}}},{name:function(_e){return"replace".concat(_e,"Attributes")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+V,$e=""+ie;if(ie=arguments[2],!(fe=M(this,Le,$e,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if(!N(ie))throw new ke("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return fe.attributes=ie,this.emit("edgeAttributesUpdated",{key:fe.key,type:"replace",attributes:fe.attributes}),this}}},{name:function(_e){return"merge".concat(_e,"Attributes")},attacher:function(_e,Me,we){_e.prototype[Me]=function(V,ie){var fe;if("mixed"!==this.type&&"mixed"!==we&&we!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+V,$e=""+ie;if(ie=arguments[2],!(fe=M(this,Le,$e,we)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Le,'" - "').concat($e,'").'))}else if(!(fe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if(!N(ie))throw new ke("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==we&&fe.undirected!==("undirected"===we))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(we," edge in the graph."));return y(fe.attributes,ie),this.emit("edgeAttributesUpdated",{key:fe.key,type:"merge",attributes:fe.attributes,data:ie}),this}}}],se=Ye,K=function(){var _e,Me=arguments,we=-1;return new se(function V(){if(!_e){if(++we>=Me.length)return{done:!0};_e=Me[we]}var ie=_e.next();return ie.done?(_e=null,V()):ie})},Fe=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ve(_e,Me){for(var we in Me)_e.push(Me[we].key)}function pe(_e,Me){for(var we in Me)Me[we].forEach(function(V){return _e.push(V.key)})}function Z(_e,Me,we){for(var V in _e)if(V!==we){var ie=_e[V];Me(ie.key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes,ie.undirected,ie.generatedKey)}}function G(_e,Me,we){for(var V in _e)V!==we&&_e[V].forEach(function(ie){return Me(ie.key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes,ie.undirected,ie.generatedKey)})}function C(_e,Me,we){for(var V in _e)if(V!==we){var ie=_e[V];if(Me(ie.key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes,ie.undirected,ie.generatedKey))return!0}return!1}function O(_e,Me,we){var V,ie,fe,Le,$e;for(var ot in _e)if(ot!==we)for(V=_e[ot].values();!0!==(ie=V.next()).done;)if(Le=(fe=ie.value).source,Me(fe.key,fe.attributes,Le.key,($e=fe.target).key,Le.attributes,$e.attributes,fe.undirected,fe.generatedKey))return!0;return!1}function ue(_e,Me){var we=Object.keys(_e),V=we.length,ie=null,fe=0;return new Ye(function Le(){var $e;if(ie){var ot=ie.next();if(ot.done)return ie=null,fe++,Le();$e=ot.value}else{if(fe>=V)return{done:!0};var wt=we[fe];if(wt===Me)return fe++,Le();if(($e=_e[wt])instanceof Set)return ie=$e.values(),Le();fe++}return{done:!1,value:[$e.key,$e.attributes,$e.source.key,$e.target.key,$e.source.attributes,$e.target.attributes]}})}function de(_e,Me,we){var V=Me[we];V&&_e.push(V.key)}function He(_e,Me,we){var V=Me[we];V&&V.forEach(function(ie){return _e.push(ie.key)})}function Ke(_e,Me,we){var V=_e[Me];if(V){var ie=V.source,fe=V.target;we(V.key,V.attributes,ie.key,fe.key,ie.attributes,fe.attributes,V.undirected,V.generatedKey)}}function ut(_e,Me,we){var V=_e[Me];V&&V.forEach(function(ie){return we(ie.key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes,ie.undirected,ie.generatedKey)})}function Rt(_e,Me,we){var V=_e[Me];if(V){var ie=V.source,fe=V.target;return we(V.key,V.attributes,ie.key,fe.key,ie.attributes,fe.attributes,V.undirected,V.generatedKey)}}function dt(_e,Me,we){var V=_e[Me];if(V){for(var ie,fe,Le=V.values();!0!==(ie=Le.next()).done;)if(we((fe=ie.value).key,fe.attributes,fe.source.key,fe.target.key,fe.source.attributes,fe.target.attributes,fe.undirected,fe.generatedKey))return!0;return!1}}function Vt(_e,Me){var we=_e[Me];if(we instanceof Set){var V=we.values();return new Ye(function(){var ie=V.next();if(ie.done)return ie;var fe=ie.value;return{done:!1,value:[fe.key,fe.attributes,fe.source.key,fe.target.key,fe.source.attributes,fe.target.attributes]}})}return Ye.of([we.key,we.attributes,we.source.key,we.target.key,we.source.attributes,we.target.attributes])}var In=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function To(_e,Me){if(void 0!==Me)for(var we in Me)_e.add(we)}function Mo(_e,Me,we){for(var V in Me){var ie=Me[V];ie instanceof Set&&(ie=ie.values().next().value);var fe=ie.source,$e=fe===_e?ie.target:fe;we($e.key,$e.attributes)}}function Zi(_e,Me,we,V){for(var ie in we){var fe=we[ie];fe instanceof Set&&(fe=fe.values().next().value);var Le=fe.source,ot=Le===Me?fe.target:Le;_e.has(ot.key)||(_e.add(ot.key),V(ot.key,ot.attributes))}}function Ur(_e,Me,we){for(var V in Me){var ie=Me[V];ie instanceof Set&&(ie=ie.values().next().value);var fe=ie.source,$e=fe===_e?ie.target:fe;if(we($e.key,$e.attributes))return!0}return!1}function ms(_e,Me,we,V){for(var ie in we){var fe=we[ie];fe instanceof Set&&(fe=fe.values().next().value);var Le=fe.source,ot=Le===Me?fe.target:Le;if(!_e.has(ot.key)&&(_e.add(ot.key),V(ot.key,ot.attributes)))return!0}return!1}function Ns(_e,Me){var we=Object.keys(Me),V=we.length,ie=0;return new Ye(function(){if(ie>=V)return{done:!0};var fe=Me[we[ie++]];fe instanceof Set&&(fe=fe.values().next().value);var Le=fe.source,ot=Le===_e?fe.target:Le;return{done:!1,value:[ot.key,ot.attributes]}})}function Io(_e,Me,we){var V=Object.keys(we),ie=V.length,fe=0;return new Ye(function Le(){if(fe>=ie)return{done:!0};var $e=we[V[fe++]];$e instanceof Set&&($e=$e.values().next().value);var ot=$e.source,Tt=ot===Me?$e.target:ot;return _e.has(Tt.key)?Le():(_e.add(Tt.key),{done:!1,value:[Tt.key,Tt.attributes]})})}function Bc(_e,Me,we){for(var V,ie,fe,Le,$e,ot,wt,Tt=Me._nodes.values(),Ft=Me.type;!0!==(V=Tt.next()).done;){if(ie=V.value,"undirected"!==Ft)for(fe in Le=ie.out)if(ot=($e=Le[fe]).target,wt=we(ie.key,ot.key,ie.attributes,ot.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),_e&&wt)return;if("directed"!==Ft)for(fe in Le=ie.undirected)if((ot=($e=Le[fe]).target).key!==fe&&(ot=$e.source),wt=we(ie.key,ot.key,ie.attributes,ot.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),_e&&wt)return}}function sc(_e,Me,we){for(var V,ie,fe,Le,$e,ot,wt,Tt,Ft,en=Me._nodes.values(),gn=Me.type;!0!==(V=en.next()).done;){if(ie=V.value,"undirected"!==gn)for(fe in ot=ie.out)for(Le=ot[fe].values();!0!==($e=Le.next()).done;)if(Tt=(wt=$e.value).target,Ft=we(ie.key,Tt.key,ie.attributes,Tt.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),_e&&Ft)return;if("directed"!==gn)for(fe in ot=ie.undirected)for(Le=ot[fe].values();!0!==($e=Le.next()).done;)if((Tt=(wt=$e.value).target).key!==fe&&(Tt=wt.source),Ft=we(ie.key,Tt.key,ie.attributes,Tt.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),_e&&Ft)return}}function jc(_e,Me){var we={key:_e};return U(Me.attributes)||(we.attributes=y({},Me.attributes)),we}function qu(_e,Me){var we={source:Me.source.key,target:Me.target.key};return Me.generatedKey||(we.key=_e),U(Me.attributes)||(we.attributes=y({},Me.attributes)),Me.undirected&&(we.undirected=!0),we}var Nd=new Set(["directed","undirected","mixed"]),zc=new Set(["domain","_events","_eventsCount","_maxListeners"]),Fd={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Pl(_e,Me,we){var V=new _e.NodeDataClass(Me,we);return _e._nodes.set(Me,V),_e.emit("nodeAdded",{key:Me,attributes:we}),V}function Nl(_e,Me,we,V,ie,fe,Le,$e){if(!V&&"undirected"===_e.type)throw new me("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===_e.type)throw new me("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e&&!N($e))throw new ke("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat($e,'"'));if(fe=""+fe,Le=""+Le,$e=$e||{},!_e.allowSelfLoops&&fe===Le)throw new me("Graph.".concat(Me,': source & target are the same ("').concat(fe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ot=_e._nodes.get(fe),wt=_e._nodes.get(Le);if(!ot)throw new ze("Graph.".concat(Me,': source node "').concat(fe,'" not found.'));if(!wt)throw new ze("Graph.".concat(Me,': target node "').concat(Le,'" not found.'));var Tt={key:null,undirected:V,source:fe,target:Le,attributes:$e};if(we&&(ie=_e._edgeKeyGenerator(Tt)),_e._edges.has(ie=""+ie))throw new me("Graph.".concat(Me,': the "').concat(ie,'" edge already exists in the graph.'));if(!_e.multi&&(V?void 0!==ot.undirected[Le]:void 0!==ot.out[Le]))throw new me("Graph.".concat(Me,': an edge linking "').concat(fe,'" to "').concat(Le,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Ft=new Qe(V,ie,we,ot,wt,$e);return _e._edges.set(ie,Ft),fe===Le?V?(ot.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(ot.directedSelfLoops++,_e._directedSelfLoopCount++):V?(ot.undirectedDegree++,wt.undirectedDegree++):(ot.outDegree++,wt.inDegree++),ge(_e,V,Ft,fe,Le,ot,wt),V?_e._undirectedSize++:_e._directedSize++,Tt.key=ie,_e.emit("edgeAdded",Tt),ie}function Hc(_e,Me,we,V,ie,fe,Le,$e,ot){if(!V&&"undirected"===_e.type)throw new me("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===_e.type)throw new me("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e)if(ot){if("function"!=typeof $e)throw new ke("Graph.".concat(Me,': invalid updater function. Expecting a function but got "').concat($e,'"'))}else if(!N($e))throw new ke("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat($e,'"'));var wt;if(fe=""+fe,Le=""+Le,ot&&(wt=$e,$e=void 0),!_e.allowSelfLoops&&fe===Le)throw new me("Graph.".concat(Me,': source & target are the same ("').concat(fe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Tt,Ft,en=_e._nodes.get(fe),gn=_e._nodes.get(Le);if(!we&&(Tt=_e._edges.get(ie))){if(Tt.source.key!==fe||Tt.target.key!==Le||V&&(Tt.source.key!==Le||Tt.target.key!==fe))throw new me("Graph.".concat(Me,': inconsistency detected when attempting to merge the "').concat(ie,'" edge with "').concat(fe,'" source & "').concat(Le,'" target vs. ("').concat(Tt.source.key,'", "').concat(Tt.target.key,'").'));Ft=Tt}if(Ft||_e.multi||!en||(Ft=V?en.undirected[Le]:en.out[Le]),Ft)return(ot?wt:$e)?(ot?(Ft.attributes=wt(Ft.attributes),_e.emit("edgeAttributesUpdated",{type:"replace",key:Ft.key,attributes:Ft.attributes})):(y(Ft.attributes,$e),_e.emit("edgeAttributesUpdated",{type:"merge",key:Ft.key,attributes:Ft.attributes,data:$e})),Ft.key):Ft.key;$e=$e||{},ot&&wt&&($e=wt($e));var Ar={key:null,undirected:V,source:fe,target:Le,attributes:$e};if(we&&(ie=_e._edgeKeyGenerator(Ar)),_e._edges.has(ie=""+ie))throw new me("Graph.".concat(Me,': the "').concat(ie,'" edge already exists in the graph.'));return en||(en=Pl(_e,fe,{}),fe===Le&&(gn=en)),gn||(gn=Pl(_e,Le,{})),Tt=new Qe(V,ie,we,en,gn,$e),_e._edges.set(ie,Tt),fe===Le?V?(en.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(en.directedSelfLoops++,_e._directedSelfLoopCount++):V?(en.undirectedDegree++,gn.undirectedDegree++):(en.outDegree++,gn.inDegree++),ge(_e,V,Tt,fe,Le,en,gn),V?_e._undirectedSize++:_e._directedSize++,Ar.key=ie,_e.emit("edgeAdded",Ar),ie}var _e,wi=function(_e){function Me(V){var ie;if(ie=_e.call(this)||this,(V=y({},Fd,V)).edgeKeyGenerator&&"function"!=typeof V.edgeKeyGenerator)throw new ke("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(V.edgeKeyGenerator,'".'));if("boolean"!=typeof V.multi)throw new ke("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(V.multi,'".'));if(!Nd.has(V.type))throw new ke('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(V.type,'".'));if("boolean"!=typeof V.allowSelfLoops)throw new ke("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(V.allowSelfLoops,'".'));var fe,Le="mixed"===V.type?Se:"directed"===V.type?Xe:rt;return ce(g(ie),"NodeDataClass",Le),ce(g(ie),"_attributes",{}),ce(g(ie),"_nodes",new Map),ce(g(ie),"_edges",new Map),ce(g(ie),"_directedSize",0),ce(g(ie),"_undirectedSize",0),ce(g(ie),"_directedSelfLoopCount",0),ce(g(ie),"_undirectedSelfLoopCount",0),ce(g(ie),"_edgeKeyGenerator",V.edgeKeyGenerator||(fe=0,function(){return fe++})),ce(g(ie),"_options",V),zc.forEach(function($e){return ce(g(ie),$e,ie[$e])}),R(g(ie),"order",function(){return ie._nodes.size}),R(g(ie),"size",function(){return ie._edges.size}),R(g(ie),"directedSize",function(){return ie._directedSize}),R(g(ie),"undirectedSize",function(){return ie._undirectedSize}),R(g(ie),"selfLoopCount",function(){return ie._directedSelfLoopCount+ie._undirectedSelfLoopCount}),R(g(ie),"directedSelfLoopCount",function(){return ie._directedSelfLoopCount}),R(g(ie),"undirectedSelfLoopCount",function(){return ie._undirectedSelfLoopCount}),R(g(ie),"multi",ie._options.multi),R(g(ie),"type",ie._options.type),R(g(ie),"allowSelfLoops",ie._options.allowSelfLoops),R(g(ie),"implementation",function(){return"graphology"}),ie}m(Me,_e);var we=Me.prototype;return we.hasNode=function(V){return this._nodes.has(""+V)},we.hasDirectedEdge=function(V,ie){if("undirected"===this.type)return!1;if(1===arguments.length){var Le=this._edges.get(""+V);return!!Le&&!Le.undirected}if(2===arguments.length){ie=""+ie;var $e=this._nodes.get(V=""+V);if(!$e)return!1;var ot=$e.out[ie];return!(!ot||this.multi&&!ot.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},we.hasUndirectedEdge=function(V,ie){if("directed"===this.type)return!1;if(1===arguments.length){var Le=this._edges.get(""+V);return!!Le&&Le.undirected}if(2===arguments.length){ie=""+ie;var $e=this._nodes.get(V=""+V);if(!$e)return!1;var ot=$e.undirected[ie];return!(!ot||this.multi&&!ot.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},we.hasEdge=function(V,ie){if(1===arguments.length)return this._edges.has(""+V);if(2===arguments.length){ie=""+ie;var Le=this._nodes.get(V=""+V);if(!Le)return!1;var $e=void 0!==Le.out&&Le.out[ie];return $e||($e=void 0!==Le.undirected&&Le.undirected[ie]),!(!$e||this.multi&&!$e.size)}throw new ke("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},we.directedEdge=function(V,ie){if("undirected"!==this.type){if(V=""+V,ie=""+ie,this.multi)throw new me("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var fe=this._nodes.get(V);if(!fe)throw new ze('Graph.directedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ie))throw new ze('Graph.directedEdge: could not find the "'.concat(ie,'" target node in the graph.'));var Le=fe.out&&fe.out[ie]||void 0;return Le?Le.key:void 0}},we.undirectedEdge=function(V,ie){if("directed"!==this.type){if(V=""+V,ie=""+ie,this.multi)throw new me("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var fe=this._nodes.get(V);if(!fe)throw new ze('Graph.undirectedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ie))throw new ze('Graph.undirectedEdge: could not find the "'.concat(ie,'" target node in the graph.'));var Le=fe.undirected&&fe.undirected[ie]||void 0;return Le?Le.key:void 0}},we.edge=function(V,ie){if(this.multi)throw new me("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");ie=""+ie;var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.edge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(ie))throw new ze('Graph.edge: could not find the "'.concat(ie,'" target node in the graph.'));var Le=fe.out&&fe.out[ie]||fe.undirected&&fe.undirected[ie]||void 0;if(Le)return Le.key},we.inDegree=function(V){var ie=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ie)throw new ke('Graph.inDegree: Expecting a boolean but got "'.concat(ie,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.inDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:fe.inDegree+(ie?fe.directedSelfLoops:0)},we.outDegree=function(V){var ie=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ie)throw new ke('Graph.outDegree: Expecting a boolean but got "'.concat(ie,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.outDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:fe.outDegree+(ie?fe.directedSelfLoops:0)},we.directedDegree=function(V){var ie=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ie)throw new ke('Graph.directedDegree: Expecting a boolean but got "'.concat(ie,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.directedDegree: could not find the "'.concat(V,'" node in the graph.'));if("undirected"===this.type)return 0;var Le=ie?fe.directedSelfLoops:0;return fe.inDegree+Le+(fe.outDegree+Le)},we.undirectedDegree=function(V){var ie=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ie)throw new ke('Graph.undirectedDegree: Expecting a boolean but got "'.concat(ie,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.undirectedDegree: could not find the "'.concat(V,'" node in the graph.'));return"directed"===this.type?0:fe.undirectedDegree+2*(ie?fe.undirectedSelfLoops:0)},we.degree=function(V){var ie=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof ie)throw new ke('Graph.degree: Expecting a boolean but got "'.concat(ie,'" for the second parameter (allowing self-loops to be counted).'));var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.degree: could not find the "'.concat(V,'" node in the graph.'));var Le=0,$e=0;return"directed"!==this.type&&(ie&&($e=fe.undirectedSelfLoops),Le+=fe.undirectedDegree+2*$e),"undirected"!==this.type&&(ie&&($e=fe.directedSelfLoops),Le+=fe.inDegree+fe.outDegree+2*$e),Le},we.source=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.source: could not find the "'.concat(V,'" edge in the graph.'));return ie.source.key},we.target=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.target: could not find the "'.concat(V,'" edge in the graph.'));return ie.target.key},we.extremities=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.extremities: could not find the "'.concat(V,'" edge in the graph.'));return[ie.source.key,ie.target.key]},we.opposite=function(V,ie){V=""+V;var fe=this._edges.get(ie=""+ie);if(!fe)throw new ze('Graph.opposite: could not find the "'.concat(ie,'" edge in the graph.'));var Le=fe.source.key,$e=fe.target.key;if(V!==Le&&V!==$e)throw new ze('Graph.opposite: the "'.concat(V,'" node is not attached to the "').concat(ie,'" edge (').concat(Le,", ").concat($e,")."));return V===Le?$e:Le},we.hasExtremity=function(V,ie){ie=""+ie;var fe=this._edges.get(V=""+V);if(!fe)throw new ze('Graph.hasExtremity: could not find the "'.concat(V,'" edge in the graph.'));return fe.source.key===ie||fe.target.key===ie},we.isUndirected=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.isUndirected: could not find the "'.concat(V,'" edge in the graph.'));return ie.undirected},we.isDirected=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.isDirected: could not find the "'.concat(V,'" edge in the graph.'));return!ie.undirected},we.isSelfLoop=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.isSelfLoop: could not find the "'.concat(V,'" edge in the graph.'));return ie.source===ie.target},we.hasGeneratedKey=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.hasGeneratedKey: could not find the "'.concat(V,'" edge in the graph.'));return ie.generatedKey},we.addNode=function(V,ie){return function(fe,Le,$e){if($e&&!N($e))throw new ke('Graph.addNode: invalid attributes. Expecting an object but got "'.concat($e,'"'));if($e=$e||{},fe._nodes.has(Le=""+Le))throw new me('Graph.addNode: the "'.concat(Le,'" node already exist in the graph.'));var ot=new fe.NodeDataClass(Le,$e);return fe._nodes.set(Le,ot),fe.emit("nodeAdded",{key:Le,attributes:$e}),ot}(this,V,ie).key},we.mergeNode=function(V,ie){if(ie&&!N(ie))throw new ke('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(ie,'"'));ie=ie||{};var fe=this._nodes.get(V=""+V);return fe?(ie&&(y(fe.attributes,ie),this.emit("nodeAttributesUpdated",{type:"merge",key:V,attributes:fe.attributes,data:ie})),V):(fe=new this.NodeDataClass(V,ie),this._nodes.set(V,fe),this.emit("nodeAdded",{key:V,attributes:ie}),V)},we.updateNode=function(V,ie){if(ie&&"function"!=typeof ie)throw new ke('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(ie,'"'));var fe=this._nodes.get(V=""+V);if(fe)return ie&&(fe.attributes=ie(fe.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:V,attributes:fe.attributes})),V;var $e=ie?ie({}):{};return fe=new this.NodeDataClass(V,$e),this._nodes.set(V,fe),this.emit("nodeAdded",{key:V,attributes:$e}),V},we.dropNode=function(V){var ie=this,fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.dropNode: could not find the "'.concat(V,'" node in the graph.'));this.forEachEdge(V,function(Le){ie.dropEdge(Le)}),this._nodes.delete(V),this.emit("nodeDropped",{key:V,attributes:fe.attributes})},we.dropEdge=function(V){var ie;if(arguments.length>1){var fe=""+arguments[0],Le=""+arguments[1];if(!(ie=M(this,fe,Le,this.type)))throw new ze('Graph.dropEdge: could not find the "'.concat(fe,'" -> "').concat(Le,'" edge in the graph.'))}else if(!(ie=this._edges.get(V=""+V)))throw new ze('Graph.dropEdge: could not find the "'.concat(V,'" edge in the graph.'));this._edges.delete(ie.key);var ot=ie.source,wt=ie.target,Tt=ie.attributes,Ft=ie.undirected;return ot===wt?Ft?(ot.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(ot.directedSelfLoops--,this._directedSelfLoopCount--):Ft?(ot.undirectedDegree--,wt.undirectedDegree--):(ot.outDegree--,wt.inDegree--),function B(_e,Me,we){var V=_e.multi,ie=we.source,fe=we.target,Le=ie.key,$e=fe.key,ot=ie[Me?"undirected":"out"],wt=Me?"undirected":"in";if($e in ot)if(V){var Tt=ot[$e];1===Tt.size?(delete ot[$e],delete fe[wt][Le]):Tt.delete(we)}else delete ot[$e];V||delete fe[wt][Le]}(this,Ft,ie),Ft?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:V,attributes:Tt,source:ot.key,target:wt.key,undirected:Ft}),this},we.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},we.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},we.getAttribute=function(V){return this._attributes[V]},we.getAttributes=function(){return this._attributes},we.hasAttribute=function(V){return this._attributes.hasOwnProperty(V)},we.setAttribute=function(V,ie){return this._attributes[V]=ie,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},we.updateAttribute=function(V,ie){if("function"!=typeof ie)throw new ke("Graph.updateAttribute: updater should be a function.");return this._attributes[V]=ie(this._attributes[V]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},we.removeAttribute=function(V){return delete this._attributes[V],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:V}),this},we.replaceAttributes=function(V){if(!N(V))throw new ke("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=V,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},we.mergeAttributes=function(V){if(!N(V))throw new ke("Graph.mergeAttributes: provided attributes are not a plain object.");return y(this._attributes,V),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:V}),this},we.getNodeAttribute=function(V,ie){var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.getNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return fe.attributes[ie]},we.getNodeAttributes=function(V){var ie=this._nodes.get(V=""+V);if(!ie)throw new ze('Graph.getNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));return ie.attributes},we.hasNodeAttribute=function(V,ie){var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return fe.attributes.hasOwnProperty(ie)},we.setNodeAttribute=function(V,ie,fe){var Le=this._nodes.get(V=""+V);if(!Le)throw new ze('Graph.setNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Le.attributes[ie]=fe,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Le.attributes,name:ie}),this},we.updateNodeAttribute=function(V,ie,fe){var Le=this._nodes.get(V=""+V);if(!Le)throw new ze('Graph.updateNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof fe)throw new ke("Graph.updateAttribute: updater should be a function.");var $e=Le.attributes,ot=fe($e[ie]);return $e[ie]=ot,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Le.attributes,name:ie}),this},we.removeNodeAttribute=function(V,ie){var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return delete fe.attributes[ie],this.emit("nodeAttributesUpdated",{key:V,type:"remove",attributes:fe.attributes,name:ie}),this},we.replaceNodeAttributes=function(V,ie){var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.replaceNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!N(ie))throw new ke("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return fe.attributes=ie,this.emit("nodeAttributesUpdated",{key:V,type:"replace",attributes:fe.attributes}),this},we.mergeNodeAttributes=function(V,ie){var fe=this._nodes.get(V=""+V);if(!fe)throw new ze('Graph.mergeNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!N(ie))throw new ke("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return y(fe.attributes,ie),this.emit("nodeAttributesUpdated",{key:V,type:"merge",attributes:fe.attributes,data:ie}),this},we.updateEachNodeAttributes=function(V,ie){if("function"!=typeof V)throw new ke("Graph.updateEachNodeAttributes: expecting an updater function.");if(ie&&!$(ie))throw new ke("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var fe,Le,$e=this._nodes.values();!0!==(fe=$e.next()).done;)(Le=fe.value).attributes=V(Le.key,Le.attributes);this.emit("eachNodeAttributesUpdated",{hints:ie||null})},we.updateEachEdgeAttributes=function(V,ie){if("function"!=typeof V)throw new ke("Graph.updateEachEdgeAttributes: expecting an updater function.");if(ie&&!$(ie))throw new ke("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var fe,Le,$e=this._edges.values();!0!==(fe=$e.next()).done;)(Le=fe.value).attributes=V(Le.key,Le.attributes);this.emit("eachEdgeAttributesUpdated",{hints:ie||null})},we.forEach=function(V){if("function"!=typeof V)throw new ke("Graph.forEach: expecting a callback.");this.multi?sc(!1,this,V):Bc(!1,this,V)},we.forEachUntil=function(V){if("function"!=typeof V)throw new ke("Graph.forEach: expecting a callback.");this.multi?sc(!0,this,V):Bc(!0,this,V)},we.adjacency=function(){return this.multi?(ot=(V=this)._nodes.values(),wt=V.type,Tt="outer",Ft=null,new Ye(function en(){var gn;if("outer"===Tt)return!0===(gn=ot.next()).done?gn:(ie=gn.value,Tt="directed",en());if("directed"===Tt)return"undirected"===wt?(Tt="undirected",en()):(Le=ie.out,fe=Object.keys(ie.out),$e=0,Tt="inner-directed",en());if("undirected"===Tt){if("directed"===wt)return Tt="outer",en();Le=ie.undirected,fe=Object.keys(ie.undirected),$e=0,Tt="inner-undirected"}if(!Ft&&$e>=fe.length)return Tt="inner-undirected"===Tt?"outer":"undirected",en();if(!Ft){var po=fe[$e++];return Ft=Le[po].values(),en()}if((gn=Ft.next()).done)return Ft=null,en();var Ar=gn.value,mo=Ar.target;return"inner-undirected"===Tt&&mo.key===ie.key&&(mo=Ar.source),{done:!1,value:[ie.key,mo.key,ie.attributes,mo.attributes,Ar.key,Ar.attributes]}})):(Gc=(en=this)._nodes.values(),ta=en.type,Vr="outer",new Ye(function Ro(){var lc;if("outer"===Vr)return!0===(lc=Gc.next()).done?lc:(gn=lc.value,Vr="directed",Ro());if("directed"===Vr)return"undirected"===ta?(Vr="undirected",Ro()):(Ar=gn.out,po=Object.keys(gn.out),mo=0,Vr="inner-directed",Ro());if("undirected"===Vr){if("directed"===ta)return Vr="outer",Ro();Ar=gn.undirected,po=Object.keys(gn.undirected),mo=0,Vr="inner-undirected"}if(mo>=po.length)return Vr="inner-undirected"===Vr?"outer":"undirected",Ro();var Fl=po[mo++],Fs=Ar[Fl],Fi=Fs.target;return"inner-undirected"===Vr&&Fi.key===gn.key&&(Fi=Fs.source),{done:!1,value:[gn.key,Fi.key,gn.attributes,Fi.attributes,Fs.key,Fs.attributes]}}));var en,gn,po,Ar,mo,Gc,ta,Vr,V,ie,fe,Le,$e,ot,wt,Tt,Ft},we.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ae(this._nodes.keys(),this._nodes.size)},we.forEachNode=function(V){if("function"!=typeof V)throw new ke("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(ie,fe){V(fe,ie.attributes)})},we.forEachNodeUntil=function(V){if("function"!=typeof V)throw new ke("Graph.forEachNode: expecting a callback.");for(var ie,fe,Le=this._nodes.values();!0!==(ie=Le.next())&&!V((fe=ie.value).key,fe.attributes););},we.nodeEntries=function(){var V=this._nodes.values();return new Ye(function(){var ie=V.next();if(ie.done)return ie;var fe=ie.value;return{value:[fe.key,fe.attributes],done:!1}})},we.exportNode=function(V){var ie=this._nodes.get(V=""+V);if(!ie)throw new ze('Graph.exportNode: could not find the "'.concat(V,'" node in the graph.'));return jc(V,ie)},we.exportEdge=function(V){var ie=this._edges.get(V=""+V);if(!ie)throw new ze('Graph.exportEdge: could not find the "'.concat(V,'" edge in the graph.'));return qu(V,ie)},we.export=function(){var V=new Array(this._nodes.size),ie=0;this._nodes.forEach(function(Le,$e){V[ie++]=jc($e,Le)});var fe=new Array(this._edges.size);return ie=0,this._edges.forEach(function(Le,$e){fe[ie++]=qu($e,Le)}),{attributes:this.getAttributes(),nodes:V,edges:fe,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},we.importNode=function(V){var ie=arguments.length>1&&void 0!==arguments[1]&&arguments[1],fe=function Uc(_e){return N(_e)?"key"in _e?!("attributes"in _e)||N(_e.attributes)&&null!==_e.attributes?null:"invalid-attributes":"no-key":"not-object"}(V);if(fe){if("not-object"===fe)throw new ke('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===fe)throw new ke("Graph.importNode: no key provided.");if("invalid-attributes"===fe)throw new ke("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Le=V.key,$e=V.attributes,ot=void 0===$e?{}:$e;return ie?this.mergeNode(Le,ot):this.addNode(Le,ot),this},we.importEdge=function(V){var ie=arguments.length>1&&void 0!==arguments[1]&&arguments[1],fe=function Vc(_e){return N(_e)?"source"in _e?"target"in _e?!("attributes"in _e)||N(_e.attributes)&&null!==_e.attributes?"undirected"in _e&&"boolean"!=typeof _e.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(V);if(fe){if("not-object"===fe)throw new ke('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===fe)throw new ke("Graph.importEdge: missing souce.");if("no-target"===fe)throw new ke("Graph.importEdge: missing target.");if("invalid-attributes"===fe)throw new ke("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===fe)throw new ke("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Le=V.source,$e=V.target,ot=V.attributes,wt=void 0===ot?{}:ot,Tt=V.undirected,Ft=void 0!==Tt&&Tt;return"key"in V?(ie?Ft?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ft?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,V.key,Le,$e,wt):(ie?Ft?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ft?this.addUndirectedEdge:this.addDirectedEdge).call(this,Le,$e,wt),this},we.import=function(V){var ie,fe,Le,$e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function j(_e){return null!==_e&&"object"===J(_e)&&"function"==typeof _e.addUndirectedEdgeWithKey&&"function"==typeof _e.dropNode}(V))return this.import(V.export(),$e),this;if(!N(V))throw new ke("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(V.attributes){if(!N(V.attributes))throw new ke("Graph.import: invalid attributes. Expecting a plain object.");$e?this.mergeAttributes(V.attributes):this.replaceAttributes(V.attributes)}if(V.nodes){if(Le=V.nodes,!Array.isArray(Le))throw new ke("Graph.import: invalid nodes. Expecting an array.");for(ie=0,fe=Le.length;ie<fe;ie++)this.importNode(Le[ie],$e)}if(V.edges){if(Le=V.edges,!Array.isArray(Le))throw new ke("Graph.import: invalid edges. Expecting an array.");for(ie=0,fe=Le.length;ie<fe;ie++)this.importEdge(Le[ie],$e)}return this},we.nullCopy=function(V){return new Me(y({},this._options,V))},we.emptyCopy=function(V){var ie=this.nullCopy(V);return this._nodes.forEach(function(fe,Le){var $e=y({},fe.attributes);fe=new ie.NodeDataClass(Le,$e),ie._nodes.set(Le,fe)}),ie},we.copy=function(){var V=new Me(this._options);return V.import(this),V},we.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(V){return V.upgradeToMixed()}),this._options.type="mixed",R(this,"type",this._options.type),ce(this,"NodeDataClass",Se)),this},we.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,R(this,"multi",!0),(V=this)._nodes.forEach(function(ie,fe){if(ie.out)for(var Le in ie.out){var $e=new Set;$e.add(ie.out[Le]),ie.out[Le]=$e,V._nodes.get(Le).in[fe]=$e}if(ie.undirected)for(var ot in ie.undirected)if(!(ot>fe)){var wt=new Set;wt.add(ie.undirected[ot]),ie.undirected[ot]=wt,V._nodes.get(ot).undirected[fe]=wt}})),this;var V},we.clearIndex=function(){return this._nodes.forEach(function(V){void 0!==V.in&&(V.in={},V.out={}),void 0!==V.undirected&&(V.undirected={})}),this},we.toJSON=function(){return this.export()},we.toString=function(){return"[object Graph]"},we.inspect=function(){var V=this,ie={};this._nodes.forEach(function(wt,Tt){ie[Tt]=wt.attributes});var fe={},Le={};this._edges.forEach(function(wt,Tt){var Ft=wt.undirected?"--":"->",en="",gn="(".concat(wt.source.key,")").concat(Ft,"(").concat(wt.target.key,")");wt.generatedKey?V.multi&&(void 0===Le[gn]?Le[gn]=0:Le[gn]++,en+="".concat(Le[gn],". ")):en+="[".concat(Tt,"]: "),fe[en+=gn]=wt.attributes});var $e={};for(var ot in this)this.hasOwnProperty(ot)&&!zc.has(ot)&&"function"!=typeof this[ot]&&($e[ot]=this[ot]);return $e.attributes=this._attributes,$e.nodes=ie,$e.edges=fe,ce($e,"constructor",this.constructor),$e},Me}(Y.exports.EventEmitter);typeof Symbol<"u"&&(wi.prototype[Symbol.for("nodejs.util.inspect.custom")]=wi.prototype.inspect),[{name:function(_e){return"".concat(_e,"Edge")},generateKey:!0},{name:function(_e){return"".concat(_e,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(_e){return"".concat(_e,"EdgeWithKey")}},{name:function(_e){return"".concat(_e,"DirectedEdgeWithKey")},type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(_e){["add","merge","update"].forEach(function(Me){var we=_e.name(Me),V="add"===Me?Nl:Hc;wi.prototype[we]=_e.generateKey?function(ie,fe,Le){return V(this,we,!0,"undirected"===(_e.type||this.type),null,ie,fe,Le,"update"===Me)}:function(ie,fe,Le,$e){return V(this,we,!1,"undirected"===(_e.type||this.type),ie,fe,Le,$e,"update"===Me)}})}),typeof Symbol<"u"&&(wi.prototype[Symbol.iterator]=wi.prototype.adjacency),_e=wi,I.forEach(function(Me){var we=Me.name,V=Me.attacher;V(_e,we("Edge"),"mixed"),V(_e,we("DirectedEdge"),"directed"),V(_e,we("UndirectedEdge"),"undirected")}),function(_e){Fe.forEach(function(Me){var V,ie,fe,Le;fe=(V=Me).type,Le=V.direction,_e.prototype[ie=V.name]=function($e,ot){if("mixed"!==fe&&"mixed"!==this.type&&fe!==this.type)return[];if(!arguments.length)return function rn(_e,Me){if(0===_e.size)return[];if("mixed"===Me||Me===_e.type)return"function"==typeof Array.from?Array.from(_e._edges.keys()):Ae(_e._edges.keys(),_e._edges.size);for(var we,V,fe=new Array("undirected"===Me?_e.undirectedSize:_e.directedSize),Le="undirected"===Me,$e=_e._edges.values(),ot=0;!0!==(we=$e.next()).done;)(V=we.value).undirected===Le&&(fe[ot++]=V.key);return fe}(this,fe);if(1===arguments.length){var wt=this._nodes.get($e=""+$e);if(void 0===wt)throw new ze("Graph.".concat(ie,': could not find the "').concat($e,'" node in the graph.'));return function oe(_e,Me,we,V){var ie=[],fe=_e?pe:Ve;return"undirected"!==Me&&("out"!==we&&fe(ie,V.in),"in"!==we&&fe(ie,V.out),!we&&V.directedSelfLoops>0&&ie.splice(ie.lastIndexOf(V.key),1)),"directed"!==Me&&fe(ie,V.undirected),ie}(this.multi,"mixed"===fe?this.type:fe,Le,wt)}if(2===arguments.length){ot=""+ot;var Tt=this._nodes.get($e=""+$e);if(!Tt)throw new ze("Graph.".concat(ie,':  could not find the "').concat($e,'" source node in the graph.'));if(!this._nodes.has(ot))throw new ze("Graph.".concat(ie,':  could not find the "').concat(ot,'" target node in the graph.'));return function $t(_e,Me,we,V,ie){var fe=Me?He:de,Le=[];return"undirected"!==_e&&(void 0!==V.in&&"out"!==we&&fe(Le,V.in,ie),void 0!==V.out&&"in"!==we&&fe(Le,V.out,ie),!we&&V.directedSelfLoops>0&&Le.splice(Le.lastIndexOf(V.key),1)),"directed"!==_e&&void 0!==V.undirected&&fe(Le,V.undirected,ie),Le}(fe,this.multi,Le,Tt,ot)}throw new ke("Graph.".concat(ie,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(we,V){var ie=V.name,fe=V.type,Le=V.direction,$e="forEach"+ie[0].toUpperCase()+ie.slice(1,-1);we.prototype[$e]=function(ot,wt,Tt){if("mixed"===fe||"mixed"===this.type||fe===this.type){if(1===arguments.length)return function Re(_e,Me,we){if(0!==_e.size)for(var V,ie,fe="mixed"!==Me&&Me!==_e.type,Le="undirected"===Me,$e=_e._edges.values();!0!==(V=$e.next()).done;)if(ie=V.value,!fe||ie.undirected===Le){var Ft=ie.source,en=ie.target;we(ie.key,ie.attributes,Ft.key,en.key,Ft.attributes,en.attributes,ie.undirected,ie.generatedKey)}}(this,fe,Tt=ot);if(2===arguments.length){Tt=wt;var Ft=this._nodes.get(ot=""+ot);if(void 0===Ft)throw new ze("Graph.".concat($e,': could not find the "').concat(ot,'" node in the graph.'));return function We(_e,Me,we,V,ie){var fe=_e?G:Z;"undirected"!==Me&&("out"!==we&&fe(V.in,ie),"in"!==we&&fe(V.out,ie,we?null:V.key)),"directed"!==Me&&fe(V.undirected,ie)}(this.multi,"mixed"===fe?this.type:fe,Le,Ft,Tt)}if(3===arguments.length){wt=""+wt;var en=this._nodes.get(ot=""+ot);if(!en)throw new ze("Graph.".concat($e,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat($e,':  could not find the "').concat(wt,'" target node in the graph.'));return function on(_e,Me,we,V,ie,fe){var Le=Me?ut:Ke;"undirected"!==_e&&(void 0!==V.in&&"out"!==we&&Le(V.in,ie,fe),V.key!==ie&&void 0!==V.out&&"in"!==we&&Le(V.out,ie,fe)),"directed"!==_e&&void 0!==V.undirected&&Le(V.undirected,ie,fe)}(fe,this.multi,Le,en,wt,Tt)}throw new ke("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Me),function(we,V){var ie=V.name,fe=V.type,Le=V.direction,$e="forEach"+ie[0].toUpperCase()+ie.slice(1,-1)+"Until";we.prototype[$e]=function(ot,wt,Tt){if("mixed"===fe||"mixed"===this.type||fe===this.type){if(1===arguments.length)return function q(_e,Me,we){if(0!==_e.size)for(var V,ie,fe="mixed"!==Me&&Me!==_e.type,Le="undirected"===Me,$e=_e._edges.values();!0!==(V=$e.next()).done;)if(ie=V.value,!fe||ie.undirected===Le){var Ft=ie.source,en=ie.target;if(we(ie.key,ie.attributes,Ft.key,en.key,Ft.attributes,en.attributes,ie.undirected,ie.generatedKey))break}}(this,fe,Tt=ot);if(2===arguments.length){Tt=wt;var Ft=this._nodes.get(ot=""+ot);if(void 0===Ft)throw new ze("Graph.".concat($e,': could not find the "').concat(ot,'" node in the graph.'));return function Je(_e,Me,we,V,ie){var fe=_e?O:C;"undirected"!==Me&&("out"!==we&&fe(V.in,ie)||"in"!==we&&fe(V.out,ie,we?null:V.key))||"directed"===Me||fe(V.undirected,ie)}(this.multi,"mixed"===fe?this.type:fe,Le,Ft,Tt)}if(3===arguments.length){wt=""+wt;var en=this._nodes.get(ot=""+ot);if(!en)throw new ze("Graph.".concat($e,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat($e,':  could not find the "').concat(wt,'" target node in the graph.'));return function Gn(_e,Me,we,V,ie,fe){var Le=Me?dt:Rt;"undirected"!==_e&&(void 0!==V.in&&"out"!==we&&Le(V.in,ie,fe)||V.key!==ie&&void 0!==V.out&&"in"!==we&&Le(V.out,ie,fe,we?null:V.key))||"directed"===_e||void 0===V.undirected||Le(V.undirected,ie,fe)}(fe,this.multi,Le,en,wt,Tt)}throw new ke("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Me),function(we,V){var fe=V.type,Le=V.direction,$e=V.name.slice(0,-1)+"Entries";we.prototype[$e]=function(ot,wt){if("mixed"!==fe&&"mixed"!==this.type&&fe!==this.type)return Ye.empty();if(!arguments.length)return function S(_e,Me){if(0===_e.size)return Ye.empty();var we="mixed"!==Me&&Me!==_e.type,V="undirected"===Me,ie=_e._edges.values();return new Ye(function(){for(var fe,Le;;){if((fe=ie.next()).done)return fe;if(Le=fe.value,!we||Le.undirected===V)break}return{value:[Le.key,Le.attributes,Le.source.key,Le.target.key,Le.source.attributes,Le.target.attributes],done:!1}})}(this,fe);if(1===arguments.length){var Tt=this._nodes.get(ot=""+ot);if(!Tt)throw new ze("Graph.".concat($e,': could not find the "').concat(ot,'" node in the graph.'));return function st(_e,Me,we){var V=Ye.empty();return"undirected"!==_e&&("out"!==Me&&void 0!==we.in&&(V=K(V,ue(we.in))),"in"!==Me&&void 0!==we.out&&(V=K(V,ue(we.out,Me?null:we.key)))),"directed"!==_e&&void 0!==we.undirected&&(V=K(V,ue(we.undirected))),V}(fe,Le,Tt)}if(2===arguments.length){wt=""+wt;var Ft=this._nodes.get(ot=""+ot);if(!Ft)throw new ze("Graph.".concat($e,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat($e,':  could not find the "').concat(wt,'" target node in the graph.'));return function Wn(_e,Me,we,V){var ie=Ye.empty();return"undirected"!==_e&&(void 0!==we.in&&"out"!==Me&&V in we.in&&(ie=K(ie,Vt(we.in,V))),void 0!==we.out&&"in"!==Me&&V in we.out&&(ie=K(ie,Vt(we.out,V)))),"directed"!==_e&&void 0!==we.undirected&&V in we.undirected&&(ie=K(ie,Vt(we.undirected,V))),ie}(fe,Le,Ft,wt)}throw new ke("Graph.".concat($e,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(_e,Me)})}(wi),function(_e){In.forEach(function(Me){var V,ie,fe,Le;fe=(V=Me).type,Le=V.direction,_e.prototype[ie=V.name]=function($e){if("mixed"!==fe&&"mixed"!==this.type&&fe!==this.type)return[];if(2===arguments.length){var ot=""+arguments[0],wt=""+arguments[1];if(!this._nodes.has(ot))throw new ze("Graph.".concat(ie,': could not find the "').concat(ot,'" node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat(ie,': could not find the "').concat(wt,'" node in the graph.'));return function fo(_e,Me,we,V,ie){var fe=_e._nodes.get(V);if("undirected"!==Me){if("out"!==we&&void 0!==fe.in)for(var Le in fe.in)if(Le===ie)return!0;if("in"!==we&&void 0!==fe.out)for(var $e in fe.out)if($e===ie)return!0}if("directed"!==Me&&void 0!==fe.undirected)for(var ot in fe.undirected)if(ot===ie)return!0;return!1}(this,fe,Le,ot,wt)}if(1===arguments.length){var Tt=this._nodes.get($e=""+$e);if(void 0===Tt)throw new ze("Graph.".concat(ie,': could not find the "').concat($e,'" node in the graph.'));return function jr(_e,Me,we){if("mixed"!==_e){if("undirected"===_e)return Object.keys(we.undirected);if("string"==typeof Me)return Object.keys(we[Me])}var V=new Set;return"undirected"!==_e&&("out"!==Me&&To(V,we.in),"in"!==Me&&To(V,we.out)),"directed"!==_e&&To(V,we.undirected),Ae(V.values(),V.size)}("mixed"===fe?this.type:fe,Le,Tt)}throw new ke("Graph.".concat(ie,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Pd(_e,Me){var we=Me.name,V=Me.type,ie=Me.direction,fe="forEach"+we[0].toUpperCase()+we.slice(1,-1);_e.prototype[fe]=function(Le,$e){if("mixed"===V||"mixed"===this.type||V===this.type){var ot=this._nodes.get(Le=""+Le);if(void 0===ot)throw new ze("Graph.".concat(fe,': could not find the "').concat(Le,'" node in the graph.'));!function(wt,Tt,Ft,en){if("mixed"!==wt){if("undirected"===wt)return Mo(Ft,Ft.undirected,en);if("string"==typeof Tt)return Mo(Ft,Ft[Tt],en)}var gn=new Set;"undirected"!==wt&&("out"!==Tt&&Zi(gn,Ft,Ft.in,en),"in"!==Tt&&Zi(gn,Ft,Ft.out,en)),"directed"!==wt&&Zi(gn,Ft,Ft.undirected,en)}("mixed"===V?this.type:V,ie,ot,$e)}}}(_e,Me),function Xu(_e,Me){var we=Me.name,V=Me.type,ie=Me.direction,fe="forEach"+we[0].toUpperCase()+we.slice(1,-1)+"Until";_e.prototype[fe]=function(Le,$e){if("mixed"===V||"mixed"===this.type||V===this.type){var ot=this._nodes.get(Le=""+Le);if(void 0===ot)throw new ze("Graph.".concat(fe,': could not find the "').concat(Le,'" node in the graph.'));!function(wt,Tt,Ft,en){if("mixed"!==wt){if("undirected"===wt)return Ur(Ft,Ft.undirected,en);if("string"==typeof Tt)return Ur(Ft,Ft[Tt],en)}var gn=new Set;"undirected"!==wt&&("out"!==Tt&&ms(gn,Ft,Ft.in,en)||"in"!==Tt&&ms(gn,Ft,Ft.out,en))||"directed"===wt||ms(gn,Ft,Ft.undirected,en)}("mixed"===V?this.type:V,ie,ot,$e)}}}(_e,Me),function Ku(_e,Me){var V=Me.type,ie=Me.direction,fe=Me.name.slice(0,-1)+"Entries";_e.prototype[fe]=function(Le){if("mixed"!==V&&"mixed"!==this.type&&V!==this.type)return Ye.empty();var $e=this._nodes.get(Le=""+Le);if(void 0===$e)throw new ze("Graph.".concat(fe,': could not find the "').concat(Le,'" node in the graph.'));return function(ot,wt,Tt){if("mixed"!==ot){if("undirected"===ot)return Ns(Tt,Tt.undirected);if("string"==typeof wt)return Ns(Tt,Tt[wt])}var Ft=Ye.empty(),en=new Set;return"undirected"!==ot&&("out"!==wt&&(Ft=K(Ft,Io(en,Tt,Tt.in))),"in"!==wt&&(Ft=K(Ft,Io(en,Tt,Tt.out)))),"directed"!==ot&&(Ft=K(Ft,Io(en,Tt,Tt.undirected))),Ft}("mixed"===V?this.type:V,ie,$e)}}(_e,Me)})}(wi);var ac=function(_e){function Me(we){var V=y({type:"directed"},we);if("multi"in V&&!1!==V.multi)throw new ke("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==V.type)throw new ke('DirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return _e.call(this,V)||this}return m(Me,_e),Me}(wi),Ei=function(_e){function Me(we){var V=y({type:"undirected"},we);if("multi"in V&&!1!==V.multi)throw new ke("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==V.type)throw new ke('UndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return _e.call(this,V)||this}return m(Me,_e),Me}(wi),Ia=function(_e){function Me(we){var V=y({multi:!0},we);if("multi"in V&&!0!==V.multi)throw new ke("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return _e.call(this,V)||this}return m(Me,_e),Me}(wi),Da=function(_e){function Me(we){var V=y({type:"directed",multi:!0},we);if("multi"in V&&!0!==V.multi)throw new ke("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==V.type)throw new ke('MultiDirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return _e.call(this,V)||this}return m(Me,_e),Me}(wi),cc=function(_e){function Me(we){var V=y({type:"undirected",multi:!0},we);if("multi"in V&&!0!==V.multi)throw new ke("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==V.type)throw new ke('MultiUndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return _e.call(this,V)||this}return m(Me,_e),Me}(wi);function Do(_e){_e.from=function(Me,we){var V=y({},Me.options,we),ie=new _e(V);return ie.import(Me),ie}}return Do(wi),Do(ac),Do(Ei),Do(Ia),Do(Da),Do(cc),wi.Graph=wi,wi.DirectedGraph=ac,wi.UndirectedGraph=Ei,wi.MultiGraph=Ia,wi.MultiDirectedGraph=Da,wi.MultiUndirectedGraph=cc,wi.InvalidArgumentsGraphError=ke,wi.NotFoundGraphError=ze,wi.UsageGraphError=me,wi}()},7271:(te,J,m)=>{var E;!function(b,D,A,k){"use strict";var Y,g=["","webkit","Moz","MS","ms","o"],y=D.createElement("div"),M="function",j=Math.round,N=Math.abs,U=Date.now;function ce(Oe,Ue,qe){return setTimeout(z(Oe,qe),Ue)}function R(Oe,Ue,qe){return!!Array.isArray(Oe)&&($(Oe,qe[Ue],qe),!0)}function $(Oe,Ue,qe){var ht;if(Oe)if(Oe.forEach)Oe.forEach(Ue,qe);else if(Oe.length!==k)for(ht=0;ht<Oe.length;)Ue.call(qe,Oe[ht],ht,Oe),ht++;else for(ht in Oe)Oe.hasOwnProperty(ht)&&Ue.call(qe,Oe[ht],ht,Oe)}function ae(Oe,Ue,qe){var ht="DEPRECATED METHOD: "+Ue+"\n"+qe+" AT \n";return function(){var Pt=new Error("get-stack-trace"),Nt=Pt&&Pt.stack?Pt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",$n=b.console&&(b.console.warn||b.console.log);return $n&&$n.call(b.console,ht,Nt),Oe.apply(this,arguments)}}Y="function"!=typeof Object.assign?function(Ue){if(Ue===k||null===Ue)throw new TypeError("Cannot convert undefined or null to object");for(var qe=Object(Ue),ht=1;ht<arguments.length;ht++){var Pt=arguments[ht];if(Pt!==k&&null!==Pt)for(var Nt in Pt)Pt.hasOwnProperty(Nt)&&(qe[Nt]=Pt[Nt])}return qe}:Object.assign;var re=ae(function(Ue,qe,ht){for(var Pt=Object.keys(qe),Nt=0;Nt<Pt.length;)(!ht||ht&&Ue[Pt[Nt]]===k)&&(Ue[Pt[Nt]]=qe[Pt[Nt]]),Nt++;return Ue},"extend","Use `assign`."),ne=ae(function(Ue,qe){return re(Ue,qe,!0)},"merge","Use `assign`.");function W(Oe,Ue,qe){var Pt,ht=Ue.prototype;(Pt=Oe.prototype=Object.create(ht)).constructor=Oe,Pt._super=ht,qe&&Y(Pt,qe)}function z(Oe,Ue){return function(){return Oe.apply(Ue,arguments)}}function v(Oe,Ue){return typeof Oe==M?Oe.apply(Ue&&Ue[0]||k,Ue):Oe}function L(Oe,Ue){return Oe===k?Ue:Oe}function T(Oe,Ue,qe){$(le(Ue),function(ht){Oe.addEventListener(ht,qe,!1)})}function he(Oe,Ue,qe){$(le(Ue),function(ht){Oe.removeEventListener(ht,qe,!1)})}function H(Oe,Ue){for(;Oe;){if(Oe==Ue)return!0;Oe=Oe.parentNode}return!1}function Ce(Oe,Ue){return Oe.indexOf(Ue)>-1}function le(Oe){return Oe.trim().split(/\s+/g)}function xe(Oe,Ue,qe){if(Oe.indexOf&&!qe)return Oe.indexOf(Ue);for(var ht=0;ht<Oe.length;){if(qe&&Oe[ht][qe]==Ue||!qe&&Oe[ht]===Ue)return ht;ht++}return-1}function Ie(Oe){return Array.prototype.slice.call(Oe,0)}function De(Oe,Ue,qe){for(var ht=[],Pt=[],Nt=0;Nt<Oe.length;){var $n=Ue?Oe[Nt][Ue]:Oe[Nt];xe(Pt,$n)<0&&ht.push(Oe[Nt]),Pt[Nt]=$n,Nt++}return qe&&(ht=Ue?ht.sort(function(vr,no){return vr[Ue]>no[Ue]}):ht.sort()),ht}function tt(Oe,Ue){for(var qe,ht,Pt=Ue[0].toUpperCase()+Ue.slice(1),Nt=0;Nt<g.length;){if((ht=(qe=g[Nt])?qe+Pt:Ue)in Oe)return ht;Nt++}return k}var Ye=1;function Ne(Oe){var Ue=Oe.ownerDocument||Oe;return Ue.defaultView||Ue.parentWindow||b}var ze="ontouchstart"in b,me=tt(b,"PointerEvent")!==k,Se=ze&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Xe="touch",Qe="mouse",B=25,I=1,K=4,Fe=8,Ve=1,pe=2,Z=4,G=8,C=16,O=pe|Z,ue=G|C,de=O|ue,He=["x","y"],Ke=["clientX","clientY"];function ut(Oe,Ue){var qe=this;this.manager=Oe,this.callback=Ue,this.element=Oe.element,this.target=Oe.options.inputTarget,this.domHandler=function(ht){v(Oe.options.enable,[Oe])&&qe.handler(ht)},this.init()}function dt(Oe,Ue,qe){var ht=qe.pointers.length,Pt=qe.changedPointers.length,Nt=Ue&I&&ht-Pt==0,$n=Ue&(K|Fe)&&ht-Pt==0;qe.isFirst=!!Nt,qe.isFinal=!!$n,Nt&&(Oe.session={}),qe.eventType=Ue,function Vt(Oe,Ue){var qe=Oe.session,ht=Ue.pointers,Pt=ht.length;qe.firstInput||(qe.firstInput=q(Ue)),Pt>1&&!qe.firstMultiple?qe.firstMultiple=q(Ue):1===Pt&&(qe.firstMultiple=!1);var Nt=qe.firstInput,$n=qe.firstMultiple,ri=$n?$n.center:Nt.center,vr=Ue.center=S(ht);Ue.timeStamp=U(),Ue.deltaTime=Ue.timeStamp-Nt.timeStamp,Ue.angle=st(ri,vr),Ue.distance=Je(ri,vr),function rn(Oe,Ue){var qe=Ue.center,ht=Oe.offsetDelta||{},Pt=Oe.prevDelta||{},Nt=Oe.prevInput||{};(Ue.eventType===I||Nt.eventType===K)&&(Pt=Oe.prevDelta={x:Nt.deltaX||0,y:Nt.deltaY||0},ht=Oe.offsetDelta={x:qe.x,y:qe.y}),Ue.deltaX=Pt.x+(qe.x-ht.x),Ue.deltaY=Pt.y+(qe.y-ht.y)}(qe,Ue),Ue.offsetDirection=We(Ue.deltaX,Ue.deltaY);var no=oe(Ue.deltaTime,Ue.deltaX,Ue.deltaY);Ue.overallVelocityX=no.x,Ue.overallVelocityY=no.y,Ue.overallVelocity=N(no.x)>N(no.y)?no.x:no.y,Ue.scale=$n?function on(Oe,Ue){return Je(Ue[0],Ue[1],Ke)/Je(Oe[0],Oe[1],Ke)}($n.pointers,ht):1,Ue.rotation=$n?function $t(Oe,Ue){return st(Ue[1],Ue[0],Ke)+st(Oe[1],Oe[0],Ke)}($n.pointers,ht):0,Ue.maxPointers=qe.prevInput?Ue.pointers.length>qe.prevInput.maxPointers?Ue.pointers.length:qe.prevInput.maxPointers:Ue.pointers.length,function Re(Oe,Ue){var Pt,Nt,$n,ri,qe=Oe.lastInterval||Ue,ht=Ue.timeStamp-qe.timeStamp;if(Ue.eventType!=Fe&&(ht>B||qe.velocity===k)){var vr=Ue.deltaX-qe.deltaX,no=Ue.deltaY-qe.deltaY,qn=oe(ht,vr,no);Nt=qn.x,$n=qn.y,Pt=N(qn.x)>N(qn.y)?qn.x:qn.y,ri=We(vr,no),Oe.lastInterval=Ue}else Pt=qe.velocity,Nt=qe.velocityX,$n=qe.velocityY,ri=qe.direction;Ue.velocity=Pt,Ue.velocityX=Nt,Ue.velocityY=$n,Ue.direction=ri}(qe,Ue);var qn=Oe.element;H(Ue.srcEvent.target,qn)&&(qn=Ue.srcEvent.target),Ue.target=qn}(Oe,qe),Oe.emit("hammer.input",qe),Oe.recognize(qe),Oe.session.prevInput=qe}function q(Oe){for(var Ue=[],qe=0;qe<Oe.pointers.length;)Ue[qe]={clientX:j(Oe.pointers[qe].clientX),clientY:j(Oe.pointers[qe].clientY)},qe++;return{timeStamp:U(),pointers:Ue,center:S(Ue),deltaX:Oe.deltaX,deltaY:Oe.deltaY}}function S(Oe){var Ue=Oe.length;if(1===Ue)return{x:j(Oe[0].clientX),y:j(Oe[0].clientY)};for(var qe=0,ht=0,Pt=0;Pt<Ue;)qe+=Oe[Pt].clientX,ht+=Oe[Pt].clientY,Pt++;return{x:j(qe/Ue),y:j(ht/Ue)}}function oe(Oe,Ue,qe){return{x:Ue/Oe||0,y:qe/Oe||0}}function We(Oe,Ue){return Oe===Ue?Ve:N(Oe)>=N(Ue)?Oe<0?pe:Z:Ue<0?G:C}function Je(Oe,Ue,qe){qe||(qe=He);var ht=Ue[qe[0]]-Oe[qe[0]],Pt=Ue[qe[1]]-Oe[qe[1]];return Math.sqrt(ht*ht+Pt*Pt)}function st(Oe,Ue,qe){return qe||(qe=He),180*Math.atan2(Ue[qe[1]]-Oe[qe[1]],Ue[qe[0]]-Oe[qe[0]])/Math.PI}ut.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(Ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&he(this.element,this.evEl,this.domHandler),this.evTarget&&he(this.target,this.evTarget,this.domHandler),this.evWin&&he(Ne(this.element),this.evWin,this.domHandler)}};var Gn={mousedown:I,mousemove:2,mouseup:K},Wn="mousedown",In="mousemove mouseup";function To(){this.evEl=Wn,this.evWin=In,this.pressed=!1,ut.apply(this,arguments)}W(To,ut,{handler:function(Ue){var qe=Gn[Ue.type];qe&I&&0===Ue.button&&(this.pressed=!0),2&qe&&1!==Ue.which&&(qe=K),this.pressed&&(qe&K&&(this.pressed=!1),this.callback(this.manager,qe,{pointers:[Ue],changedPointers:[Ue],pointerType:Qe,srcEvent:Ue}))}});var jr={pointerdown:I,pointermove:2,pointerup:K,pointercancel:Fe,pointerout:Fe},Mo={2:Xe,3:"pen",4:Qe,5:"kinect"},Zi="pointerdown",Ur="pointermove pointerup pointercancel";function ms(){this.evEl=Zi,this.evWin=Ur,ut.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(Zi="MSPointerDown",Ur="MSPointerMove MSPointerUp MSPointerCancel"),W(ms,ut,{handler:function(Ue){var qe=this.store,ht=!1,Pt=Ue.type.toLowerCase().replace("ms",""),Nt=jr[Pt],$n=Mo[Ue.pointerType]||Ue.pointerType,ri=$n==Xe,vr=xe(qe,Ue.pointerId,"pointerId");Nt&I&&(0===Ue.button||ri)?vr<0&&(qe.push(Ue),vr=qe.length-1):Nt&(K|Fe)&&(ht=!0),!(vr<0)&&(qe[vr]=Ue,this.callback(this.manager,Nt,{pointers:qe,changedPointers:[Ue],pointerType:$n,srcEvent:Ue}),ht&&qe.splice(vr,1))}});var Ns={touchstart:I,touchmove:2,touchend:K,touchcancel:Fe};function Pd(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ut.apply(this,arguments)}function Xu(Oe,Ue){var qe=Ie(Oe.touches),ht=Ie(Oe.changedTouches);return Ue&(K|Fe)&&(qe=De(qe.concat(ht),"identifier",!0)),[qe,ht]}W(Pd,ut,{handler:function(Ue){var qe=Ns[Ue.type];if(qe===I&&(this.started=!0),this.started){var ht=Xu.call(this,Ue,qe);qe&(K|Fe)&&ht[0].length-ht[1].length==0&&(this.started=!1),this.callback(this.manager,qe,{pointers:ht[0],changedPointers:ht[1],pointerType:Xe,srcEvent:Ue})}}});var Ku={touchstart:I,touchmove:2,touchend:K,touchcancel:Fe},Bc="touchstart touchmove touchend touchcancel";function sc(){this.evTarget=Bc,this.targetIds={},ut.apply(this,arguments)}function jc(Oe,Ue){var qe=Ie(Oe.touches),ht=this.targetIds;if(Ue&(2|I)&&1===qe.length)return ht[qe[0].identifier]=!0,[qe,qe];var Pt,Nt,$n=Ie(Oe.changedTouches),ri=[],vr=this.target;if(Nt=qe.filter(function(no){return H(no.target,vr)}),Ue===I)for(Pt=0;Pt<Nt.length;)ht[Nt[Pt].identifier]=!0,Pt++;for(Pt=0;Pt<$n.length;)ht[$n[Pt].identifier]&&ri.push($n[Pt]),Ue&(K|Fe)&&delete ht[$n[Pt].identifier],Pt++;return ri.length?[De(Nt.concat(ri),"identifier",!0),ri]:void 0}W(sc,ut,{handler:function(Ue){var qe=Ku[Ue.type],ht=jc.call(this,Ue,qe);ht&&this.callback(this.manager,qe,{pointers:ht[0],changedPointers:ht[1],pointerType:Xe,srcEvent:Ue})}});var qu=2500;function Vc(){ut.apply(this,arguments);var Oe=z(this.handler,this);this.touch=new sc(this.manager,Oe),this.mouse=new To(this.manager,Oe),this.primaryTouch=null,this.lastTouches=[]}function Nd(Oe,Ue){Oe&I?(this.primaryTouch=Ue.changedPointers[0].identifier,zc.call(this,Ue)):Oe&(K|Fe)&&zc.call(this,Ue)}function zc(Oe){var Ue=Oe.changedPointers[0];if(Ue.identifier===this.primaryTouch){var qe={x:Ue.clientX,y:Ue.clientY};this.lastTouches.push(qe);var ht=this.lastTouches;setTimeout(function(){var Nt=ht.indexOf(qe);Nt>-1&&ht.splice(Nt,1)},qu)}}function Fd(Oe){for(var Ue=Oe.srcEvent.clientX,qe=Oe.srcEvent.clientY,ht=0;ht<this.lastTouches.length;ht++){var Pt=this.lastTouches[ht],Nt=Math.abs(Ue-Pt.x),$n=Math.abs(qe-Pt.y);if(Nt<=25&&$n<=25)return!0}return!1}W(Vc,ut,{handler:function(Ue,qe,ht){var Nt=ht.pointerType==Qe;if(!(Nt&&ht.sourceCapabilities&&ht.sourceCapabilities.firesTouchEvents)){if(ht.pointerType==Xe)Nd.call(this,qe,ht);else if(Nt&&Fd.call(this,ht))return;this.callback(Ue,qe,ht)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pl=tt(y.style,"touchAction"),Nl=Pl!==k,Hc="compute",ac="manipulation",Ei="none",Ia="pan-x",Da="pan-y",cc=function Me(){if(!Nl)return!1;var Oe={},Ue=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(qe){Oe[qe]=!Ue||b.CSS.supports("touch-action",qe)}),Oe}();function Do(Oe,Ue){this.manager=Oe,this.set(Ue)}Do.prototype={set:function(Oe){Oe==Hc&&(Oe=this.compute()),Nl&&this.manager.element.style&&cc[Oe]&&(this.manager.element.style[Pl]=Oe),this.actions=Oe.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Oe=[];return $(this.manager.recognizers,function(Ue){v(Ue.options.enable,[Ue])&&(Oe=Oe.concat(Ue.getTouchAction()))}),function _e(Oe){if(Ce(Oe,Ei))return Ei;var Ue=Ce(Oe,Ia),qe=Ce(Oe,Da);return Ue&&qe?Ei:Ue||qe?Ue?Ia:Da:Ce(Oe,ac)?ac:"auto"}(Oe.join(" "))},preventDefaults:function(Oe){var Ue=Oe.srcEvent,qe=Oe.offsetDirection;if(!this.manager.session.prevented){var ht=this.actions,Pt=Ce(ht,Ei)&&!cc[Ei],Nt=Ce(ht,Da)&&!cc[Da],$n=Ce(ht,Ia)&&!cc[Ia];if(Pt&&1===Oe.pointers.length&&Oe.distance<2&&Oe.deltaTime<250)return;return $n&&Nt||!(Pt||Nt&&qe&O||$n&&qe&ue)?void 0:this.preventSrc(Ue)}Ue.preventDefault()},preventSrc:function(Oe){this.manager.session.prevented=!0,Oe.preventDefault()}};var we=1;function wt(Oe){this.options=Y({},this.defaults,Oe||{}),this.id=function Ae(){return Ye++}(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=we,this.simultaneous={},this.requireFail=[]}function Tt(Oe){return 16&Oe?"cancel":8&Oe?"end":4&Oe?"move":2&Oe?"start":""}function Ft(Oe){return Oe==C?"down":Oe==G?"up":Oe==pe?"left":Oe==Z?"right":""}function en(Oe,Ue){var qe=Ue.manager;return qe?qe.get(Oe):Oe}function gn(){wt.apply(this,arguments)}function po(){gn.apply(this,arguments),this.pX=null,this.pY=null}function Ar(){gn.apply(this,arguments)}function mo(){wt.apply(this,arguments),this._timer=null,this._input=null}function Gc(){gn.apply(this,arguments)}function ta(){gn.apply(this,arguments)}function Vr(){wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ro(Oe,Ue){return(Ue=Ue||{}).recognizers=L(Ue.recognizers,Ro.defaults.preset),new Fs(Oe,Ue)}function Fs(Oe,Ue){this.options=Y({},Ro.defaults,Ue||{}),this.options.inputTarget=this.options.inputTarget||Oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Oe,this.input=function Rt(Oe){return new(Oe.options.inputClass||(me?ms:Se?sc:ze?Vc:To))(Oe,dt)}(this),this.touchAction=new Do(this,this.options.touchAction),Fi(this,!0),$(this.options.recognizers,function(qe){var ht=this.add(new qe[0](qe[1]));qe[2]&&ht.recognizeWith(qe[2]),qe[3]&&ht.requireFailure(qe[3])},this)}function Fi(Oe,Ue){var ht,qe=Oe.element;qe.style&&($(Oe.options.cssProps,function(Pt,Nt){ht=tt(qe.style,Nt),Ue?(Oe.oldCssProps[ht]=qe.style[ht],qe.style[ht]=Pt):qe.style[ht]=Oe.oldCssProps[ht]||""}),Ue||(Oe.oldCssProps={}))}wt.prototype={defaults:{},set:function(Oe){return Y(this.options,Oe),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Oe){if(R(Oe,"recognizeWith",this))return this;var Ue=this.simultaneous;return Ue[(Oe=en(Oe,this)).id]||(Ue[Oe.id]=Oe,Oe.recognizeWith(this)),this},dropRecognizeWith:function(Oe){return R(Oe,"dropRecognizeWith",this)||(Oe=en(Oe,this),delete this.simultaneous[Oe.id]),this},requireFailure:function(Oe){if(R(Oe,"requireFailure",this))return this;var Ue=this.requireFail;return-1===xe(Ue,Oe=en(Oe,this))&&(Ue.push(Oe),Oe.requireFailure(this)),this},dropRequireFailure:function(Oe){if(R(Oe,"dropRequireFailure",this))return this;Oe=en(Oe,this);var Ue=xe(this.requireFail,Oe);return Ue>-1&&this.requireFail.splice(Ue,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Oe){return!!this.simultaneous[Oe.id]},emit:function(Oe){var Ue=this,qe=this.state;function ht(Pt){Ue.manager.emit(Pt,Oe)}qe<8&&ht(Ue.options.event+Tt(qe)),ht(Ue.options.event),Oe.additionalEvent&&ht(Oe.additionalEvent),qe>=8&&ht(Ue.options.event+Tt(qe))},tryEmit:function(Oe){if(this.canEmit())return this.emit(Oe);this.state=32},canEmit:function(){for(var Oe=0;Oe<this.requireFail.length;){if(!(this.requireFail[Oe].state&(32|we)))return!1;Oe++}return!0},recognize:function(Oe){var Ue=Y({},Oe);if(!v(this.options.enable,[this,Ue]))return this.reset(),void(this.state=32);56&this.state&&(this.state=we),this.state=this.process(Ue),30&this.state&&this.tryEmit(Ue)},process:function(Oe){},getTouchAction:function(){},reset:function(){}},W(gn,wt,{defaults:{pointers:1},attrTest:function(Oe){var Ue=this.options.pointers;return 0===Ue||Oe.pointers.length===Ue},process:function(Oe){var Ue=this.state,qe=Oe.eventType,ht=6&Ue,Pt=this.attrTest(Oe);return ht&&(qe&Fe||!Pt)?16|Ue:ht||Pt?qe&K?8|Ue:2&Ue?4|Ue:2:32}}),W(po,gn,{defaults:{event:"pan",threshold:10,pointers:1,direction:de},getTouchAction:function(){var Oe=this.options.direction,Ue=[];return Oe&O&&Ue.push(Da),Oe&ue&&Ue.push(Ia),Ue},directionTest:function(Oe){var Ue=this.options,qe=!0,ht=Oe.distance,Pt=Oe.direction,Nt=Oe.deltaX,$n=Oe.deltaY;return Pt&Ue.direction||(Ue.direction&O?(Pt=0===Nt?Ve:Nt<0?pe:Z,qe=Nt!=this.pX,ht=Math.abs(Oe.deltaX)):(Pt=0===$n?Ve:$n<0?G:C,qe=$n!=this.pY,ht=Math.abs(Oe.deltaY))),Oe.direction=Pt,qe&&ht>Ue.threshold&&Pt&Ue.direction},attrTest:function(Oe){return gn.prototype.attrTest.call(this,Oe)&&(2&this.state||!(2&this.state)&&this.directionTest(Oe))},emit:function(Oe){this.pX=Oe.deltaX,this.pY=Oe.deltaY;var Ue=Ft(Oe.direction);Ue&&(Oe.additionalEvent=this.options.event+Ue),this._super.emit.call(this,Oe)}}),W(Ar,gn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ei]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.scale-1)>this.options.threshold||2&this.state)},emit:function(Oe){1!==Oe.scale&&(Oe.additionalEvent=this.options.event+(Oe.scale<1?"in":"out")),this._super.emit.call(this,Oe)}}),W(mo,wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Oe){var Ue=this.options,qe=Oe.pointers.length===Ue.pointers,ht=Oe.distance<Ue.threshold,Pt=Oe.deltaTime>Ue.time;if(this._input=Oe,!ht||!qe||Oe.eventType&(K|Fe)&&!Pt)this.reset();else if(Oe.eventType&I)this.reset(),this._timer=ce(function(){this.state=8,this.tryEmit()},Ue.time,this);else if(Oe.eventType&K)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Oe){8===this.state&&(Oe&&Oe.eventType&K?this.manager.emit(this.options.event+"up",Oe):(this._input.timeStamp=U(),this.manager.emit(this.options.event,this._input)))}}),W(Gc,gn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ei]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.rotation)>this.options.threshold||2&this.state)}}),W(ta,gn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:O|ue,pointers:1},getTouchAction:function(){return po.prototype.getTouchAction.call(this)},attrTest:function(Oe){var qe,Ue=this.options.direction;return Ue&(O|ue)?qe=Oe.overallVelocity:Ue&O?qe=Oe.overallVelocityX:Ue&ue&&(qe=Oe.overallVelocityY),this._super.attrTest.call(this,Oe)&&Ue&Oe.offsetDirection&&Oe.distance>this.options.threshold&&Oe.maxPointers==this.options.pointers&&N(qe)>this.options.velocity&&Oe.eventType&K},emit:function(Oe){var Ue=Ft(Oe.offsetDirection);Ue&&this.manager.emit(this.options.event+Ue,Oe),this.manager.emit(this.options.event,Oe)}}),W(Vr,wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ac]},process:function(Oe){var Ue=this.options,qe=Oe.pointers.length===Ue.pointers,ht=Oe.distance<Ue.threshold,Pt=Oe.deltaTime<Ue.time;if(this.reset(),Oe.eventType&I&&0===this.count)return this.failTimeout();if(ht&&Pt&&qe){if(Oe.eventType!=K)return this.failTimeout();var Nt=!this.pTime||Oe.timeStamp-this.pTime<Ue.interval,$n=!this.pCenter||Je(this.pCenter,Oe.center)<Ue.posThreshold;if(this.pTime=Oe.timeStamp,this.pCenter=Oe.center,$n&&Nt?this.count+=1:this.count=1,this._input=Oe,0==this.count%Ue.taps)return this.hasRequireFailures()?(this._timer=ce(function(){this.state=8,this.tryEmit()},Ue.interval,this),2):8}return 32},failTimeout:function(){return this._timer=ce(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ro.VERSION="2.0.7",Ro.defaults={domEvents:!1,touchAction:Hc,enable:!0,inputTarget:null,inputClass:null,preset:[[Gc,{enable:!1}],[Ar,{enable:!1},["rotate"]],[ta,{direction:O}],[po,{direction:O},["swipe"]],[Vr],[Vr,{event:"doubletap",taps:2},["tap"]],[mo]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Fs.prototype={set:function(Oe){return Y(this.options,Oe),Oe.touchAction&&this.touchAction.update(),Oe.inputTarget&&(this.input.destroy(),this.input.target=Oe.inputTarget,this.input.init()),this},stop:function(Oe){this.session.stopped=Oe?2:1},recognize:function(Oe){var Ue=this.session;if(!Ue.stopped){this.touchAction.preventDefaults(Oe);var qe,ht=this.recognizers,Pt=Ue.curRecognizer;(!Pt||Pt&&8&Pt.state)&&(Pt=Ue.curRecognizer=null);for(var Nt=0;Nt<ht.length;)qe=ht[Nt],2===Ue.stopped||Pt&&qe!=Pt&&!qe.canRecognizeWith(Pt)?qe.reset():qe.recognize(Oe),!Pt&&14&qe.state&&(Pt=Ue.curRecognizer=qe),Nt++}},get:function(Oe){if(Oe instanceof wt)return Oe;for(var Ue=this.recognizers,qe=0;qe<Ue.length;qe++)if(Ue[qe].options.event==Oe)return Ue[qe];return null},add:function(Oe){if(R(Oe,"add",this))return this;var Ue=this.get(Oe.options.event);return Ue&&this.remove(Ue),this.recognizers.push(Oe),Oe.manager=this,this.touchAction.update(),Oe},remove:function(Oe){if(R(Oe,"remove",this))return this;if(Oe=this.get(Oe)){var Ue=this.recognizers,qe=xe(Ue,Oe);-1!==qe&&(Ue.splice(qe,1),this.touchAction.update())}return this},on:function(Oe,Ue){if(Oe!==k&&Ue!==k){var qe=this.handlers;return $(le(Oe),function(ht){qe[ht]=qe[ht]||[],qe[ht].push(Ue)}),this}},off:function(Oe,Ue){if(Oe!==k){var qe=this.handlers;return $(le(Oe),function(ht){Ue?qe[ht]&&qe[ht].splice(xe(qe[ht],Ue),1):delete qe[ht]}),this}},emit:function(Oe,Ue){this.options.domEvents&&function go(Oe,Ue){var qe=D.createEvent("Event");qe.initEvent(Oe,!0,!0),qe.gesture=Ue,Ue.target.dispatchEvent(qe)}(Oe,Ue);var qe=this.handlers[Oe]&&this.handlers[Oe].slice();if(qe&&qe.length){Ue.type=Oe,Ue.preventDefault=function(){Ue.srcEvent.preventDefault()};for(var ht=0;ht<qe.length;)qe[ht](Ue),ht++}},destroy:function(){this.element&&Fi(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Y(Ro,{INPUT_START:I,INPUT_MOVE:2,INPUT_END:K,INPUT_CANCEL:Fe,STATE_POSSIBLE:we,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Ve,DIRECTION_LEFT:pe,DIRECTION_RIGHT:Z,DIRECTION_UP:G,DIRECTION_DOWN:C,DIRECTION_HORIZONTAL:O,DIRECTION_VERTICAL:ue,DIRECTION_ALL:de,Manager:Fs,Input:ut,TouchAction:Do,TouchInput:sc,MouseInput:To,PointerEventInput:ms,TouchMouseInput:Vc,SingleTouchInput:Pd,Recognizer:wt,AttrRecognizer:gn,Tap:Vr,Pan:po,Swipe:ta,Pinch:Ar,Rotate:Gc,Press:mo,on:T,off:he,each:$,merge:ne,extend:re,assign:Y,inherit:W,bindFn:z,prefixed:tt}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=Ro,(E=function(){return Ro}.call(J,m,J,te))!==k&&(te.exports=E)}(window,document)},2601:(te,J)=>{J.read=function(m,E,b,D,A){var k,g,y=8*A-D-1,M=(1<<y)-1,j=M>>1,N=-7,U=b?A-1:0,ce=b?-1:1,R=m[E+U];for(U+=ce,k=R&(1<<-N)-1,R>>=-N,N+=y;N>0;k=256*k+m[E+U],U+=ce,N-=8);for(g=k&(1<<-N)-1,k>>=-N,N+=D;N>0;g=256*g+m[E+U],U+=ce,N-=8);if(0===k)k=1-j;else{if(k===M)return g?NaN:1/0*(R?-1:1);g+=Math.pow(2,D),k-=j}return(R?-1:1)*g*Math.pow(2,k-D)},J.write=function(m,E,b,D,A,k){var g,y,M,j=8*k-A-1,N=(1<<j)-1,U=N>>1,ce=23===A?Math.pow(2,-24)-Math.pow(2,-77):0,R=D?0:k-1,$=D?1:-1,ae=E<0||0===E&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(y=isNaN(E)?1:0,g=N):(g=Math.floor(Math.log(E)/Math.LN2),E*(M=Math.pow(2,-g))<1&&(g--,M*=2),(E+=g+U>=1?ce/M:ce*Math.pow(2,1-U))*M>=2&&(g++,M/=2),g+U>=N?(y=0,g=N):g+U>=1?(y=(E*M-1)*Math.pow(2,A),g+=U):(y=E*Math.pow(2,U-1)*Math.pow(2,A),g=0));A>=8;m[b+R]=255&y,R+=$,y/=256,A-=8);for(g=g<<A|y,j+=A;j>0;m[b+R]=255&g,R+=$,g/=256,j-=8);m[b+R-$]|=128*ae}},6698:te=>{te.exports="function"==typeof Object.create?function(m,E){E&&(m.super_=E,m.prototype=Object.create(E.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:function(m,E){if(E){m.super_=E;var b=function(){};b.prototype=E.prototype,m.prototype=new b,m.prototype.constructor=m}}},4198:(te,J,m)=>{"use strict";var E=m(7156).default;const{isArray:b,isObject:D,isString:A}=m(8254),{asArray:k}=m(3521),{prependBase:g}=m(2651),y=m(1874),M=m(1252);function N(ce){throw new y("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ce})}function U({context:ce,base:R}){if(!ce)return;const $=ce["@context"];if(A($))ce["@context"]=g(R,$);else if(b($))for(let ae=0;ae<$.length;++ae){const Y=$[ae];A(Y)?$[ae]=g(R,Y):D(Y)&&U({context:{"@context":Y},base:R})}else if(D($))for(const ae in $)U({context:$[ae],base:R})}te.exports=class{constructor({sharedCache:R}){this.perOpCache=new Map,this.sharedCache=R}resolve({activeCtx:R,context:$,documentLoader:ae,base:Y,cycles:re=new Set}){var ne=this;return E(function*(){$&&D($)&&$["@context"]&&($=$["@context"]),$=k($);const W=[];for(const z of $){if(A(z)){let T=ne._get(z);T||(T=yield ne._resolveRemoteContext({activeCtx:R,url:z,documentLoader:ae,base:Y,cycles:re})),b(T)?W.push(...T):W.push(T);continue}if(null===z){W.push(new M({document:null}));continue}D(z)||N($);const v=JSON.stringify(z);let L=ne._get(v);L||(L=new M({document:z}),ne._cacheResolvedContext({key:v,resolved:L,tag:"static"})),W.push(L)}return W})()}_get(R){let $=this.perOpCache.get(R);if(!$){const ae=this.sharedCache.get(R);ae&&($=ae.get("static"),$&&this.perOpCache.set(R,$))}return $}_cacheResolvedContext({key:R,resolved:$,tag:ae}){if(this.perOpCache.set(R,$),void 0!==ae){let Y=this.sharedCache.get(R);Y||(Y=new Map,this.sharedCache.set(R,Y)),Y.set(ae,$)}return $}_resolveRemoteContext({activeCtx:R,url:$,documentLoader:ae,base:Y,cycles:re}){var ne=this;return E(function*(){$=g(Y,$);const{context:W,remoteDoc:z}=yield ne._fetchContext({activeCtx:R,url:$,documentLoader:ae,cycles:re});U({context:W,base:Y=z.documentUrl||$});const v=yield ne.resolve({activeCtx:R,context:W,documentLoader:ae,base:Y,cycles:re});return ne._cacheResolvedContext({key:$,resolved:v,tag:z.tag}),v})()}_fetchContext({activeCtx:R,url:$,documentLoader:ae,cycles:Y}){return E(function*(){if(Y.size>10)throw new y("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===R.processingMode?"loading remote context failed":"context overflow",max:10});if(Y.has($))throw new y("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===R.processingMode?"recursive context inclusion":"context overflow",url:$});let re,ne;Y.add($);try{ne=yield ae($),re=ne.document||null,A(re)&&(re=JSON.parse(re))}catch(W){throw new y("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:$,cause:W})}if(!D(re))throw new y("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:$});return re="@context"in re?{"@context":re["@context"]}:{"@context":{}},ne.contextUrl&&(b(re["@context"])||(re["@context"]=[re["@context"]]),re["@context"].push(ne.contextUrl)),{context:re,remoteDoc:ne}})()}}},1874:te=>{"use strict";te.exports=class extends Error{constructor(m="An unspecified JSON-LD error occurred.",E="jsonld.Error",b={}){super(m),this.name=E,this.message=m,this.details=b}}},1828:te=>{"use strict";te.exports=J=>{class m{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(m,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(m.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:m}),m.compact=function(E,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):J.compact(E,b)},m.expand=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):J.expand(E)},m.flatten=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):J.flatten(E)},m}},7260:(te,J,m)=>{"use strict";te.exports=m(1986).NQuads},4044:(te,J,m)=>{"use strict";var E=m(7156).default;te.exports=class{constructor(){this._requests={}}wrapLoader(D){const A=this;return A._loader=D,function(){return A.add.apply(A,arguments)}}add(D){var A=this;return E(function*(){let k=A._requests[D];if(k)return Promise.resolve(k);k=A._requests[D]=A._loader(D);try{return yield k}finally{delete A._requests[D]}})()}}},1252:(te,J,m)=>{"use strict";const E=m(1072);te.exports=class{constructor({document:A}){this.document=A,this.cache=new E({max:10})}getProcessed(A){return this.cache.get(A)}setProcessed(A,k){this.cache.set(A,k)}}},8809:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(1874),{isArray:D,isObject:A,isString:k,isUndefined:g}=m(8254),{isList:y,isValue:M,isGraph:j,isSimpleGraph:N,isSubjectReference:U}=m(543),{expandIri:ce,getContextValue:R,isKeyword:$,process:ae,processingMode:Y}=m(9611),{removeBase:re,prependBase:ne}=m(2651),{REGEX_KEYWORD:W,addValue:z,asArray:v,compareShortestLeast:L}=m(3521),T={};function H(Ce,le,xe){if("@nest"!==ce(Ce,le,{vocab:!0},xe))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}te.exports=T,T.compact=function(){var Ce=E(function*({activeCtx:le,activeProperty:xe=null,element:Ie,options:De={}}){if(D(Ie)){let Ye=[];for(let Ae=0;Ae<Ie.length;++Ae){const Ne=yield T.compact({activeCtx:le,activeProperty:xe,element:Ie[Ae],options:De});null!==Ne&&Ye.push(Ne)}return De.compactArrays&&1===Ye.length&&0===(R(le,xe,"@container")||[]).length&&(Ye=Ye[0]),Ye}const tt=R(le,xe,"@context");if(g(tt)||(le=yield ae({activeCtx:le,localCtx:tt,propagate:!0,overrideProtected:!0,options:De})),A(Ie)){if(De.link&&"@id"in Ie&&De.link.hasOwnProperty(Ie["@id"])){const Xe=De.link[Ie["@id"]];for(let rt=0;rt<Xe.length;++rt)if(Xe[rt].expanded===Ie)return Xe[rt].compacted}if(M(Ie)||U(Ie)){const Xe=T.compactValue({activeCtx:le,activeProperty:xe,value:Ie,options:De});return De.link&&U(Ie)&&(De.link.hasOwnProperty(Ie["@id"])||(De.link[Ie["@id"]]=[]),De.link[Ie["@id"]].push({expanded:Ie,compacted:Xe})),Xe}if(y(Ie)&&(R(le,xe,"@container")||[]).includes("@list"))return T.compact({activeCtx:le,activeProperty:xe,element:Ie["@list"],options:De});const Ye="@reverse"===xe,Ae={},Ne=le;!M(Ie)&&!U(Ie)&&(le=le.revertToPreviousContext());const ke=R(Ne,xe,"@context");g(ke)||(le=yield ae({activeCtx:le,localCtx:ke,propagate:!0,overrideProtected:!0,options:De})),De.link&&"@id"in Ie&&(De.link.hasOwnProperty(Ie["@id"])||(De.link[Ie["@id"]]=[]),De.link[Ie["@id"]].push({expanded:Ie,compacted:Ae}));let ze=Ie["@type"]||[];ze.length>1&&(ze=Array.from(ze).sort());const me=le;for(const Xe of ze){const rt=T.compactIri({activeCtx:me,iri:Xe,relativeTo:{vocab:!0}}),Qe=R(Ne,rt,"@context");g(Qe)||(le=yield ae({activeCtx:le,localCtx:Qe,options:De,propagate:!1}))}const Se=Object.keys(Ie).sort();for(const Xe of Se){const rt=Ie[Xe];if("@id"!==Xe)if("@type"!==Xe)if("@reverse"!==Xe)if("@preserve"!==Xe)if("@index"!==Xe)if("@graph"!==Xe&&"@list"!==Xe&&"@included"!==Xe&&$(Xe)){const Qe=T.compactIri({activeCtx:le,iri:Xe,relativeTo:{vocab:!0}});z(Ae,Qe,rt)}else{if(!D(rt))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===rt.length){const Qe=T.compactIri({activeCtx:le,iri:Xe,value:rt,relativeTo:{vocab:!0},reverse:Ye}),ge=le.mappings.has(Qe)?le.mappings.get(Qe)["@nest"]:null;let B=Ae;ge&&(H(le,ge,De),A(Ae[ge])||(Ae[ge]={}),B=Ae[ge]),z(B,Qe,rt,{propertyIsArray:!0})}for(const Qe of rt){const ge=T.compactIri({activeCtx:le,iri:Xe,value:Qe,relativeTo:{vocab:!0},reverse:Ye}),B=le.mappings.has(ge)?le.mappings.get(ge)["@nest"]:null;let I=Ae;B&&(H(le,B,De),A(Ae[B])||(Ae[B]={}),I=Ae[B]);const se=R(le,ge,"@container")||[],K=j(Qe),Fe=y(Qe);let Ve;Fe?Ve=Qe["@list"]:K&&(Ve=Qe["@graph"]);let pe=yield T.compact({activeCtx:le,activeProperty:ge,element:Fe||K?Ve:Qe,options:De});if(Fe){if(D(pe)||(pe=[pe]),se.includes("@list")){z(I,ge,pe,{valueIsArray:!0,allowDuplicate:!0});continue}pe={[T.compactIri({activeCtx:le,iri:"@list",relativeTo:{vocab:!0}})]:pe},"@index"in Qe&&(pe[T.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=Qe["@index"])}if(K)if(se.includes("@graph")&&(se.includes("@id")||se.includes("@index")&&N(Qe))){let Z;I.hasOwnProperty(ge)?Z=I[ge]:I[ge]=Z={};const G=(se.includes("@id")?Qe["@id"]:Qe["@index"])||T.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}});z(Z,G,pe,{propertyIsArray:!De.compactArrays||se.includes("@set")})}else se.includes("@graph")&&N(Qe)?(D(pe)&&pe.length>1&&(pe={"@included":pe}),z(I,ge,pe,{propertyIsArray:!De.compactArrays||se.includes("@set")})):(D(pe)&&1===pe.length&&De.compactArrays&&(pe=pe[0]),pe={[T.compactIri({activeCtx:le,iri:"@graph",relativeTo:{vocab:!0}})]:pe},"@id"in Qe&&(pe[T.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=Qe["@id"]),"@index"in Qe&&(pe[T.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=Qe["@index"]),z(I,ge,pe,{propertyIsArray:!De.compactArrays||se.includes("@set")}));else if(se.includes("@language")||se.includes("@index")||se.includes("@id")||se.includes("@type")){let Z,G;if(I.hasOwnProperty(ge)?Z=I[ge]:I[ge]=Z={},se.includes("@language"))M(pe)&&(pe=pe["@value"]),G=Qe["@language"];else if(se.includes("@index")){const C=R(le,ge,"@index")||"@index",O=T.compactIri({activeCtx:le,iri:C,relativeTo:{vocab:!0}});if("@index"===C)G=Qe["@index"],delete pe[O];else{let ue;if([G,...ue]=v(pe[C]||[]),k(G))switch(ue.length){case 0:delete pe[C];break;case 1:pe[C]=ue[0];break;default:pe[C]=ue}else G=null}}else if(se.includes("@id")){const C=T.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}});G=pe[C],delete pe[C]}else if(se.includes("@type")){const C=T.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}});let O;switch([G,...O]=v(pe[C]||[]),O.length){case 0:delete pe[C];break;case 1:pe[C]=O[0];break;default:pe[C]=O}1===Object.keys(pe).length&&"@id"in Qe&&(pe=yield T.compact({activeCtx:le,activeProperty:ge,element:{"@id":Qe["@id"]},options:De}))}G||(G=T.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}})),z(Z,G,pe,{propertyIsArray:se.includes("@set")})}else{const Z=!De.compactArrays||se.includes("@set")||se.includes("@list")||D(pe)&&0===pe.length||"@list"===Xe||"@graph"===Xe;z(I,ge,pe,{propertyIsArray:Z})}}}else{if((R(le,xe,"@container")||[]).includes("@index"))continue;const ge=T.compactIri({activeCtx:le,iri:Xe,relativeTo:{vocab:!0}});z(Ae,ge,rt)}else{const Qe=yield T.compact({activeCtx:le,activeProperty:xe,element:rt,options:De});D(Qe)&&0===Qe.length||z(Ae,Xe,Qe)}else{const Qe=yield T.compact({activeCtx:le,activeProperty:"@reverse",element:rt,options:De});for(const ge in Qe)if(le.mappings.has(ge)&&le.mappings.get(ge).reverse){const B=Qe[ge],se=(R(le,ge,"@container")||[]).includes("@set")||!De.compactArrays;z(Ae,ge,B,{propertyIsArray:se}),delete Qe[ge]}if(Object.keys(Qe).length>0){const ge=T.compactIri({activeCtx:le,iri:Xe,relativeTo:{vocab:!0}});z(Ae,ge,Qe)}}else{let Qe=v(rt).map(K=>T.compactIri({activeCtx:Ne,iri:K,relativeTo:{vocab:!0}}));1===Qe.length&&(Qe=Qe[0]);const ge=T.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}}),se=(R(le,ge,"@container")||[]).includes("@set")&&Y(le,1.1)||D(Qe)&&0===rt.length;z(Ae,ge,Qe,{propertyIsArray:se})}else{let Qe=v(rt).map(B=>T.compactIri({activeCtx:le,iri:B,relativeTo:{vocab:!1},base:De.base}));1===Qe.length&&(Qe=Qe[0]),Ae[T.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=Qe}}return Ae}return Ie});return function(le){return Ce.apply(this,arguments)}}(),T.compactIri=({activeCtx:Ce,iri:le,value:xe=null,relativeTo:Ie={vocab:!1},reverse:De=!1,base:tt=null})=>{if(null===le)return le;Ce.isPropertyTermScoped&&Ce.previousContext&&(Ce=Ce.previousContext);const Ye=Ce.getInverse();if($(le)&&le in Ye&&"@none"in Ye[le]&&"@type"in Ye[le]["@none"]&&"@none"in Ye[le]["@none"]["@type"])return Ye[le]["@none"]["@type"]["@none"];if(Ie.vocab&&le in Ye){const me=Ce["@language"]||"@none",Se=[];A(xe)&&"@index"in xe&&!("@graph"in xe)&&Se.push("@index","@index@set"),A(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),j(xe)?("@index"in xe&&Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Se.push("@graph@id","@graph@id@set"),Se.push("@graph","@graph@set","@set"),"@index"in xe||Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Se.push("@graph@id","@graph@id@set")):A(xe)&&!M(xe)&&Se.push("@id","@id@set","@type","@set@type");let Xe="@language",rt="@null";if(De)Xe="@type",rt="@reverse",Se.push("@set");else if(y(xe)){"@index"in xe||Se.push("@list");const ge=xe["@list"];if(0===ge.length)Xe="@any",rt="@none";else{let B=0===ge.length?me:null,I=null;for(let se=0;se<ge.length;++se){const K=ge[se];let Fe="@none",Ve="@none";if(M(K)?"@direction"in K?Fe=`${(K["@language"]||"").toLowerCase()}_${K["@direction"]}`:"@language"in K?Fe=K["@language"].toLowerCase():"@type"in K?Ve=K["@type"]:Fe="@null":Ve="@id",null===B?B=Fe:Fe!==B&&M(K)&&(B="@none"),null===I?I=Ve:Ve!==I&&(I="@none"),"@none"===B&&"@none"===I)break}B=B||"@none",I=I||"@none","@none"!==I?(Xe="@type",rt=I):rt=B}}else{if(M(xe))if("@language"in xe&&!("@index"in xe)){Se.push("@language","@language@set"),rt=xe["@language"];const ge=xe["@direction"];ge&&(rt=`${rt}_${ge}`)}else"@direction"in xe&&!("@index"in xe)?rt=`_${xe["@direction"]}`:"@type"in xe&&(Xe="@type",rt=xe["@type"]);else Xe="@type",rt="@id";Se.push("@set")}Se.push("@none"),A(xe)&&!("@index"in xe)&&Se.push("@index","@index@set"),M(xe)&&1===Object.keys(xe).length&&Se.push("@language","@language@set");const Qe=function he(Ce,le,xe,Ie,De,tt){null===tt&&(tt="@null");const Ye=[];if(("@id"===tt||"@reverse"===tt)&&A(xe)&&"@id"in xe){"@reverse"===tt&&Ye.push("@reverse");const Ne=T.compactIri({activeCtx:Ce,iri:xe["@id"],relativeTo:{vocab:!0}});Ce.mappings.has(Ne)&&Ce.mappings.get(Ne)&&Ce.mappings.get(Ne)["@id"]===xe["@id"]?Ye.push.apply(Ye,["@vocab","@id"]):Ye.push.apply(Ye,["@id","@vocab"])}else{Ye.push(tt);const Ne=Ye.find(ke=>ke.includes("_"));Ne&&Ye.push(Ne.replace(/^[^_]+_/,"_"))}Ye.push("@none");const Ae=Ce.inverse[le];for(const Ne of Ie){if(!(Ne in Ae))continue;const ke=Ae[Ne][De];for(const ze of Ye)if(ze in ke)return ke[ze]}return null}(Ce,le,xe,Se,Xe,rt);if(null!==Qe)return Qe}if(Ie.vocab&&"@vocab"in Ce){const me=Ce["@vocab"];if(0===le.indexOf(me)&&le!==me){const Se=le.substr(me.length);if(!Ce.mappings.has(Se))return Se}}let Ae=null;const Ne=[];let ke=Ce.fastCurieMap;const ze=le.length-1;for(let me=0;me<ze&&le[me]in ke;++me)ke=ke[le[me]],""in ke&&Ne.push(ke[""][0]);for(let me=Ne.length-1;me>=0;--me){const Se=Ne[me],Xe=Se.terms;for(const rt of Xe){const Qe=rt+":"+le.substr(Se.iri.length);Ce.mappings.get(rt)._prefix&&(!Ce.mappings.has(Qe)||null===xe&&Ce.mappings.get(Qe)["@id"]===le)&&(null===Ae||L(Qe,Ae)<0)&&(Ae=Qe)}}if(null!==Ae)return Ae;for(const[me,Se]of Ce.mappings)if(Se&&Se._prefix&&le.startsWith(me+":"))throw new b(`Absolute IRI "${le}" confused with prefix "${me}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Ce});if(!Ie.vocab){if("@base"in Ce){if(Ce["@base"]){const me=re(ne(tt,Ce["@base"]),le);return W.test(me)?`./${me}`:me}return le}return re(tt,le)}return le},T.compactValue=({activeCtx:Ce,activeProperty:le,value:xe,options:Ie})=>{if(M(xe)){const Ae=R(Ce,le,"@type"),Ne=R(Ce,le,"@language"),ke=R(Ce,le,"@direction"),ze=R(Ce,le,"@container")||[],me="@index"in xe&&!ze.includes("@index");if(!me&&"@none"!==Ae&&(xe["@type"]===Ae||"@language"in xe&&xe["@language"]===Ne&&"@direction"in xe&&xe["@direction"]===ke||"@language"in xe&&xe["@language"]===Ne||"@direction"in xe&&xe["@direction"]===ke))return xe["@value"];const Se=Object.keys(xe).length,Xe=1===Se||2===Se&&"@index"in xe&&!me,rt="@language"in Ce,Qe=k(xe["@value"]),ge=Ce.mappings.has(le)&&null===Ce.mappings.get(le)["@language"];if(Xe&&"@none"!==Ae&&(!rt||!Qe||ge))return xe["@value"];const B={};return me&&(B[T.compactIri({activeCtx:Ce,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?B[T.compactIri({activeCtx:Ce,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:Ce,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(B[T.compactIri({activeCtx:Ce,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(B[T.compactIri({activeCtx:Ce,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),B[T.compactIri({activeCtx:Ce,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],B}const De=ce(Ce,le,{vocab:!0},Ie),tt=R(Ce,le,"@type"),Ye=T.compactIri({activeCtx:Ce,iri:xe["@id"],relativeTo:{vocab:"@vocab"===tt},base:Ie.base});return"@id"===tt||"@vocab"===tt||"@graph"===De?Ye:{[T.compactIri({activeCtx:Ce,iri:"@id",relativeTo:{vocab:!0}})]:Ye}}},6982:te=>{"use strict";const J="http://www.w3.org/1999/02/22-rdf-syntax-ns#",m="http://www.w3.org/2001/XMLSchema#";te.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:J,RDF_LIST:J+"List",RDF_FIRST:J+"first",RDF_REST:J+"rest",RDF_NIL:J+"nil",RDF_TYPE:J+"type",RDF_PLAIN_LITERAL:J+"PlainLiteral",RDF_XML_LITERAL:J+"XMLLiteral",RDF_JSON_LITERAL:J+"JSON",RDF_OBJECT:J+"object",RDF_LANGSTRING:J+"langString",XSD:m,XSD_BOOLEAN:m+"boolean",XSD_DOUBLE:m+"double",XSD_INTEGER:m+"integer",XSD_STRING:m+"string"}},9611:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(3521),D=m(1874),{isArray:A,isObject:k,isString:g,isUndefined:y}=m(8254),{isAbsolute:M,isRelative:j,prependBase:N}=m(2651),{handleEvent:U}=m(3855),{REGEX_BCP47:ce,REGEX_KEYWORD:R,asArray:$,compareShortestLeast:ae}=m(3521),Y=new Map,ne={};function W(v,L,T,he,H,Ce){if(null===L||!g(L)||ne.isKeyword(L))return L;if(L.match(R))return null;if(he&&he.hasOwnProperty(L)&&!0!==H.get(L)&&ne.createTermDefinition({activeCtx:v,localCtx:he,term:L,defined:H,options:Ce}),(T=T||{}).vocab){const xe=v.mappings.get(L);if(null===xe)return null;if(k(xe)&&"@id"in xe)return xe["@id"]}const le=L.indexOf(":");if(le>0){const xe=L.substr(0,le),Ie=L.substr(le+1);if("_"===xe||0===Ie.indexOf("//"))return L;he&&he.hasOwnProperty(xe)&&ne.createTermDefinition({activeCtx:v,localCtx:he,term:xe,defined:H,options:Ce});const De=v.mappings.get(xe);if(De&&De._prefix)return De["@id"]+Ie;if(M(L))return L}if(T.vocab&&"@vocab"in v)L=v["@vocab"]+L;else if(T.base){let xe,Ie;"@base"in v?v["@base"]?(Ie=N(Ce.base,v["@base"]),xe=N(Ie,L)):(Ie=v["@base"],xe=L):(Ie=Ce.base,xe=N(Ce.base,L)),L=xe}return L}function z(v,L){if(!v||"object"!=typeof v||!L||"object"!=typeof L)return v===L;const T=Array.isArray(v);if(T!==Array.isArray(L))return!1;if(T){if(v.length!==L.length)return!1;for(let Ce=0;Ce<v.length;++Ce)if(!z(v[Ce],L[Ce]))return!1;return!0}const he=Object.keys(v),H=Object.keys(L);if(he.length!==H.length)return!1;for(const Ce in v){let le=v[Ce],xe=L[Ce];if("@container"===Ce&&Array.isArray(le)&&Array.isArray(xe)&&(le=le.slice().sort(),xe=xe.slice().sort()),!z(le,xe))return!1}return!0}te.exports=ne,ne.process=function(){var v=E(function*({activeCtx:L,localCtx:T,options:he,propagate:H=!0,overrideProtected:Ce=!1,cycles:le=new Set}){if(k(T)&&"@context"in T&&A(T["@context"])&&(T=T["@context"]),0===$(T).length)return L;const Ie=[],De=[({event:Ne,next:ke})=>{Ie.push(Ne),ke()}];he.eventHandler&&De.push(he.eventHandler);const tt=he;he={...he,eventHandler:De};const Ye=yield he.contextResolver.resolve({activeCtx:L,context:T,documentLoader:he.documentLoader,base:he.base});k(Ye[0].document)&&"boolean"==typeof Ye[0].document["@propagate"]&&(H=Ye[0].document["@propagate"]);let Ae=L;!H&&!Ae.previousContext&&(Ae=Ae.clone(),Ae.previousContext=L);for(const Ne of Ye){let{document:ke}=Ne;if(L=Ae,null===ke){if(!Ce&&0!==Object.keys(L.protected).length)throw new D("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ae=L=ne.getInitialContext(he).clone();continue}const ze=Ne.getProcessed(L);if(ze){if(tt.eventHandler)for(const Se of ze.events)U({event:Se,options:tt});Ae=L=ze.context;continue}if(k(ke)&&"@context"in ke&&(ke=ke["@context"]),!k(ke))throw new D("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ke});Ae=Ae.clone();const me=new Map;if("@version"in ke){if(1.1!==ke["@version"])throw new D("Unsupported JSON-LD version: "+ke["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ke});if(L.processingMode&&"json-ld-1.0"===L.processingMode)throw new D("@version: "+ke["@version"]+" not compatible with "+L.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ke});Ae.processingMode="json-ld-1.1",Ae["@version"]=ke["@version"],me.set("@version",!0)}if(Ae.processingMode=Ae.processingMode||L.processingMode,"@base"in ke){let Se=ke["@base"];if(null!==Se&&!M(Se)){if(!j(Se))throw new D('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ke});Se=N(Ae["@base"],Se)}Ae["@base"]=Se,me.set("@base",!0)}if("@vocab"in ke){const Se=ke["@vocab"];if(null===Se)delete Ae["@vocab"];else{if(!g(Se))throw new D('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});if(!M(Se)&&ne.processingMode(Ae,1))throw new D('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});{const Xe=W(Ae,Se,{vocab:!0,base:!0},void 0,void 0,he);M(Xe)||he.eventHandler&&U({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Xe}},options:he}),Ae["@vocab"]=Xe}}me.set("@vocab",!0)}if("@language"in ke){const Se=ke["@language"];if(null===Se)delete Ae["@language"];else{if(!g(Se))throw new D('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ke});Se.match(ce)||he.eventHandler&&U({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Se}},options:he}),Ae["@language"]=Se.toLowerCase()}me.set("@language",!0)}if("@direction"in ke){const Se=ke["@direction"];if("json-ld-1.0"===L.processingMode)throw new D("Invalid JSON-LD syntax; @direction not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ke});if(null===Se)delete Ae["@direction"];else{if("ltr"!==Se&&"rtl"!==Se)throw new D('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ke});Ae["@direction"]=Se}me.set("@direction",!0)}if("@propagate"in ke){const Se=ke["@propagate"];if("json-ld-1.0"===L.processingMode)throw new D("Invalid JSON-LD syntax; @propagate not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if("boolean"!=typeof Se)throw new D("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:T});me.set("@propagate",!0)}if("@import"in ke){const Se=ke["@import"];if("json-ld-1.0"===L.processingMode)throw new D("Invalid JSON-LD syntax; @import not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if(!g(Se))throw new D("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:T});const Xe=yield he.contextResolver.resolve({activeCtx:L,context:Se,documentLoader:he.documentLoader,base:he.base});if(1!==Xe.length)throw new D("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:T});const rt=Xe[0].getProcessed(L);if(rt)ke=rt;else{const Qe=Xe[0].document;if("@import"in Qe)throw new D("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:T});for(const ge in Qe)ke.hasOwnProperty(ge)||(ke[ge]=Qe[ge]);Xe[0].setProcessed(L,ke)}me.set("@import",!0)}me.set("@protected",ke["@protected"]||!1);for(const Se in ke)if(ne.createTermDefinition({activeCtx:Ae,localCtx:ke,term:Se,defined:me,options:he,overrideProtected:Ce}),k(ke[Se])&&"@context"in ke[Se]){const Xe=ke[Se]["@context"];let rt=!0;if(g(Xe)){const Qe=N(he.base,Xe);le.has(Qe)?rt=!1:le.add(Qe)}if(rt)try{yield ne.process({activeCtx:Ae.clone(),localCtx:ke[Se]["@context"],overrideProtected:!0,options:he,cycles:le})}catch{throw new D("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ke[Se]["@context"],term:Se})}}Ne.setProcessed(L,{context:Ae,events:Ie})}return Ae});return function(L){return v.apply(this,arguments)}}(),ne.createTermDefinition=({activeCtx:v,localCtx:L,term:T,defined:he,options:H,overrideProtected:Ce=!1})=>{if(he.has(T)){if(he.get(T))return;throw new D("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:L,term:T})}let le;if(he.set(T,!1),L.hasOwnProperty(T)&&(le=L[T]),"@type"===T&&k(le)&&"@set"===(le["@container"]||"@set")&&ne.processingMode(v,1.1)){const Ne=["@container","@id","@protected"],ke=Object.keys(le);if(0===ke.length||ke.some(ze=>!Ne.includes(ze)))throw new D("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:T})}else{if(ne.isKeyword(T))throw new D("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:T});if(T.match(R))return void(H.eventHandler&&U({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:T}},options:H}));if(""===T)throw new D("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:L})}const xe=v.mappings.get(T);v.mappings.has(T)&&v.mappings.delete(T);let Ie=!1;if((g(le)||null===le)&&(Ie=!0,le={"@id":le}),!k(le))throw new D("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:L});const De={};v.mappings.set(T,De),De.reverse=!1;const tt=["@container","@id","@language","@reverse","@type"];ne.processingMode(v,1.1)&&tt.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ne in le)if(!tt.includes(Ne))throw new D("Invalid JSON-LD syntax; a term definition must not contain "+Ne,"jsonld.SyntaxError",{code:"invalid term definition",context:L});const Ye=T.indexOf(":");if(De._termHasColon=Ye>0,"@reverse"in le){if("@id"in le)throw new D("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});if("@nest"in le)throw new D("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});const Ne=le["@reverse"];if(!g(Ne))throw new D("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(Ne.match(R))return H.eventHandler&&U({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ne}},options:H}),void(xe?v.mappings.set(T,xe):v.mappings.delete(T));const ke=W(v,Ne,{vocab:!0,base:!1},L,he,H);if(!M(ke))throw new D("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});De["@id"]=ke,De.reverse=!0}else if("@id"in le){let Ne=le["@id"];if(Ne&&!g(Ne))throw new D("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(null===Ne)De["@id"]=null;else{if(!ne.isKeyword(Ne)&&Ne.match(R))return H.eventHandler&&U({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ne}},options:H}),void(xe?v.mappings.set(T,xe):v.mappings.delete(T));if(Ne!==T){if(Ne=W(v,Ne,{vocab:!0,base:!1},L,he,H),!M(Ne)&&!ne.isKeyword(Ne))throw new D("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(T.match(/(?::[^:])|\//)&&W(v,T,{vocab:!0,base:!1},L,new Map(he).set(T,!0),H)!==Ne)throw new D("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});De["@id"]=Ne,De._prefix=Ie&&!De._termHasColon&&Ne.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in De))if(De._termHasColon){const Ne=T.substr(0,Ye);if(L.hasOwnProperty(Ne)&&ne.createTermDefinition({activeCtx:v,localCtx:L,term:Ne,defined:he,options:H}),v.mappings.has(Ne)){const ke=T.substr(Ye+1);De["@id"]=v.mappings.get(Ne)["@id"]+ke}else De["@id"]=T}else if("@type"===T)De["@id"]=T;else{if(!("@vocab"in v))throw new D("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L,term:T});De["@id"]=v["@vocab"]+T}if((!0===le["@protected"]||!0===he.get("@protected")&&!1!==le["@protected"])&&(v.protected[T]=!0,De.protected=!0),he.set(T,!0),"@type"in le){let Ne=le["@type"];if(!g(Ne))throw new D("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if("@json"===Ne||"@none"===Ne){if(ne.processingMode(v,1))throw new D(`Invalid JSON-LD syntax; an @context @type value must not be "${Ne}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else if("@id"!==Ne&&"@vocab"!==Ne){if(Ne=W(v,Ne,{vocab:!0,base:!1},L,he,H),!M(Ne))throw new D("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if(0===Ne.indexOf("_:"))throw new D("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}De["@type"]=Ne}if("@container"in le){const Ne=g(le["@container"])?[le["@container"]]:le["@container"]||[],ke=["@list","@set","@index","@language"];let ze=!0;const me=Ne.includes("@set");if(ne.processingMode(v,1.1)){if(ke.push("@graph","@id","@type"),Ne.includes("@list")){if(1!==Ne.length)throw new D("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else if(Ne.includes("@graph")){if(Ne.some(Se=>"@graph"!==Se&&"@id"!==Se&&"@index"!==Se&&"@set"!==Se))throw new D("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else ze&=Ne.length<=(me?2:1);if(Ne.includes("@type")&&(De["@type"]=De["@type"]||"@id",!["@id","@vocab"].includes(De["@type"])))throw new D("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else ze&=!A(le["@container"]),ze&=Ne.length<=1;if(ze&=Ne.every(Se=>ke.includes(Se)),ze&=!(me&&Ne.includes("@list")),!ze)throw new D("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ke.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:L});if(De.reverse&&!Ne.every(Se=>["@index","@set"].includes(Se)))throw new D("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});De["@container"]=Ne}if("@index"in le){if(!("@container"in le)||!De["@container"].includes("@index"))throw new D(`Invalid JSON-LD syntax; @index without @index in @container: "${le["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});if(!g(le["@index"])||0===le["@index"].indexOf("@"))throw new D(`Invalid JSON-LD syntax; @index must expand to an IRI: "${le["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});De["@index"]=le["@index"]}if("@context"in le&&(De["@context"]=le["@context"]),"@language"in le&&!("@type"in le)){let Ne=le["@language"];if(null!==Ne&&!g(Ne))throw new D("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:L});null!==Ne&&(Ne=Ne.toLowerCase()),De["@language"]=Ne}if("@prefix"in le){if(T.match(/:|\//))throw new D("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:L});if(ne.isKeyword(De["@id"]))throw new D("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:L});if("boolean"!=typeof le["@prefix"])throw new D("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:L});De._prefix=!0===le["@prefix"]}if("@direction"in le){const Ne=le["@direction"];if(null!==Ne&&"ltr"!==Ne&&"rtl"!==Ne)throw new D('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:L});De["@direction"]=Ne}if("@nest"in le){const Ne=le["@nest"];if(!g(Ne)||"@nest"!==Ne&&0===Ne.indexOf("@"))throw new D("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:L});De["@nest"]=Ne}const Ae=De["@id"];if("@context"===Ae||"@preserve"===Ae)throw new D("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:L});if(xe&&xe.protected&&!Ce&&(v.protected[T]=!0,De.protected=!0,!z(xe,De)))throw new D("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:L,term:T})},ne.expandIri=(v,L,T,he)=>W(v,L,T,void 0,void 0,he),ne.getInitialContext=v=>{const L=JSON.stringify({processingMode:v.processingMode}),T=Y.get(L);if(T)return T;const he={processingMode:v.processingMode,mappings:new Map,inverse:null,getInverse:function H(){const De=this;if(De.inverse)return De.inverse;const tt=De.inverse={},Ye=De.fastCurieMap={},Ae={},Ne=(De["@language"]||"@none").toLowerCase(),ke=De["@direction"],ze=De.mappings,me=[...ze.keys()].sort(ae);for(const Se of me){const Xe=ze.get(Se);if(null===Xe)continue;let rt=Xe["@container"]||"@none";if(rt=[].concat(rt).sort().join(""),null===Xe["@id"])continue;const Qe=$(Xe["@id"]);for(const ge of Qe){let B=tt[ge];const I=ne.isKeyword(ge);if(B)!I&&!Xe._termHasColon&&Ae[ge].push(Se);else if(tt[ge]=B={},!I&&!Xe._termHasColon){Ae[ge]=[Se];const se={iri:ge,terms:Ae[ge]};ge[0]in Ye?Ye[ge[0]].push(se):Ye[ge[0]]=[se]}if(B[rt]||(B[rt]={"@language":{},"@type":{},"@any":{}}),B=B[rt],le(Se,B["@any"],"@none"),Xe.reverse)le(Se,B["@type"],"@reverse");else if("@none"===Xe["@type"])le(Se,B["@any"],"@none"),le(Se,B["@language"],"@none"),le(Se,B["@type"],"@none");else if("@type"in Xe)le(Se,B["@type"],Xe["@type"]);else if("@language"in Xe&&"@direction"in Xe){const se=Xe["@language"],K=Xe["@direction"];le(Se,B["@language"],se&&K?`${se}_${K}`.toLowerCase():se?se.toLowerCase():K?`_${K}`:"@null")}else"@language"in Xe?le(Se,B["@language"],(Xe["@language"]||"@null").toLowerCase()):"@direction"in Xe?le(Se,B["@language"],Xe["@direction"]?`_${Xe["@direction"]}`:"@none"):ke?(le(Se,B["@language"],`_${ke}`),le(Se,B["@language"],"@none"),le(Se,B["@type"],"@none")):(le(Se,B["@language"],Ne),le(Se,B["@language"],"@none"),le(Se,B["@type"],"@none"))}}for(const Se in Ye)Ce(Ye,Se,1);return tt},clone:function xe(){const De={};return De.mappings=b.clone(this.mappings),De.clone=this.clone,De.inverse=null,De.getInverse=this.getInverse,De.protected=b.clone(this.protected),this.previousContext&&(De.previousContext=this.previousContext.clone()),De.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(De["@base"]=this["@base"]),"@language"in this&&(De["@language"]=this["@language"]),"@vocab"in this&&(De["@vocab"]=this["@vocab"]),De},revertToPreviousContext:function Ie(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Y.size&&Y.clear(),Y.set(L,he),he;function Ce(De,tt,Ye){const Ae=De[tt],Ne=De[tt]={};let ke,ze;for(const me of Ae)ke=me.iri,ze=Ye>=ke.length?"":ke[Ye],ze in Ne?Ne[ze].push(me):Ne[ze]=[me];for(const me in Ne)""!==me&&Ce(Ne,me,Ye+1)}function le(De,tt,Ye){tt.hasOwnProperty(Ye)||(tt[Ye]=De)}},ne.getContextValue=(v,L,T)=>{if(null===L)return"@context"===T?void 0:null;if(v.mappings.has(L)){const he=v.mappings.get(L);if(y(T))return he;if(he.hasOwnProperty(T))return he[T]}return"@language"===T&&T in v||"@direction"===T&&T in v?v[T]:"@context"!==T?null:void 0},ne.processingMode=(v,L)=>L.toString()>="1.1"?!v.processingMode||v.processingMode>="json-ld-"+L.toString():"json-ld-1.0"===v.processingMode,ne.isKeyword=v=>{if(!g(v)||"@"!==v[0])return!1;switch(v){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(te,J,m)=>{"use strict";var E=m(7156).default;const{parseLinkHeader:b,buildHeaders:D}=m(3521),{LINK_HEADER_CONTEXT:A}=m(6982),k=m(1874),g=m(4044),{prependBase:y}=m(2651),M=/(^|(\r\n))link:/i;te.exports=({secure:N,headers:U={},xhr:ce}={headers:{}})=>{return U=D(U),(new g).wrapLoader($);function $(Y){return ae.apply(this,arguments)}function ae(){return ae=E(function*(Y){if(0!==Y.indexOf("http:")&&0!==Y.indexOf("https:"))throw new k('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});if(N&&0!==Y.indexOf("https"))throw new k('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});let re;try{re=yield function j(N,U,ce){const R=new(N=N||XMLHttpRequest);return new Promise(($,ae)=>{R.onload=()=>$(R),R.onerror=Y=>ae(Y),R.open("GET",U,!0);for(const Y in ce)R.setRequestHeader(Y,ce[Y]);R.send()})}(ce,Y,U)}catch(L){throw new k("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Y,cause:L})}if(re.status>=400)throw new k("URL could not be dereferenced: "+re.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:Y,httpStatusCode:re.status});let ne={contextUrl:null,documentUrl:Y,document:re.response},W=null;const z=re.getResponseHeader("Content-Type");let v;if(M.test(re.getAllResponseHeaders())&&(v=re.getResponseHeader("Link")),v&&"application/ld+json"!==z){const L=b(v),T=L[A];if(Array.isArray(T))throw new k("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Y});T&&(ne.contextUrl=T.target),W=L.alternate,W&&"application/ld+json"==W.type&&!(z||"").match(/^application\/(\w*\+)?json$/)&&(ne=yield $(y(Y,W.target)))}return ne}),ae.apply(this,arguments)}}},3855:(te,J,m)=>{"use strict";const E=m(1874),{isArray:b}=m(8254),{asArray:D}=m(3521),A={};function k({event:y,handlers:M}){let j=!0;for(let N=0;j&&N<M.length;++N){j=!1;const U=M[N];if(b(U))j=k({event:y,handlers:U});else if("function"==typeof U)U({event:y,next:()=>{j=!0}});else{if("object"!=typeof U)throw new E("Invalid event handler.","jsonld.InvalidEventHandler",{event:y});y.code in U?U[y.code]({event:y,next:()=>{j=!0}}):j=!0}}return j}te.exports=A,A.defaultEventHandler=null,A.setupEventHandler=({options:y={}})=>{const M=[].concat(y.safe?A.safeEventHandler:[],y.eventHandler?D(y.eventHandler):[],A.defaultEventHandler?A.defaultEventHandler:[]);return 0===M.length?null:M},A.handleEvent=({event:y,options:M})=>{k({event:y,handlers:M.eventHandler})};const g=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);A.safeEventHandler=function({event:M,next:j}){if("warning"===M.level&&g.has(M.code))throw new E("Safe mode validation error.","jsonld.ValidationError",{event:M});j()},A.logEventHandler=function({event:M,next:j}){console.log(`EVENT: ${M.message}`,{event:M}),j()},A.logWarningEventHandler=function({event:M,next:j}){"warning"===M.level&&console.warn(`WARNING: ${M.message}`,{event:M}),j()},A.unhandledEventHandler=function({event:M}){throw new E("No handler for event.","jsonld.UnhandledEvent",{event:M})},A.setDefaultEventHandler=function({eventHandler:y}={}){A.defaultEventHandler=y?D(y):null}},3860:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(1874),{isArray:D,isObject:A,isEmptyObject:k,isString:g,isUndefined:y}=m(8254),{isList:M,isValue:j,isGraph:N,isSubject:U}=m(543),{expandIri:ce,getContextValue:R,isKeyword:$,process:ae,processingMode:Y}=m(9611),{isAbsolute:re}=m(2651),{REGEX_BCP47:ne,REGEX_KEYWORD:W,addValue:z,asArray:v,getValues:L,validateTypeValue:T}=m(3521),{handleEvent:he}=m(3855),H={};function Ce({value:Ae,count:Ne,options:ke}){if(0===Ne||"@value"in Ae||"@list"in Ae||1===Ne&&"@id"in Ae){if(ke.eventHandler){let ze,me;0===Ne?(ze="empty object",me="Dropping empty object."):"@value"in Ae?(ze="object with only @value",me="Dropping object with only @value."):"@list"in Ae?(ze="object with only @list",me="Dropping object with only @list."):1===Ne&&"@id"in Ae&&(ze="object with only @id",me="Dropping object with only @id."),he({event:{type:["JsonLdEvent"],code:ze,level:"warning",message:me,details:{value:Ae}},options:ke})}return null}return Ae}function le(Ae){return xe.apply(this,arguments)}function xe(){return(xe=E(function*({activeCtx:Ae,activeProperty:Ne,expandedActiveProperty:ke,element:ze,expandedParent:me,options:Se={},insideList:Xe,typeKey:rt,typeScopedContext:Qe}){const ge=Object.keys(ze).sort(),B=[];let I;const se=ze[rt]&&"@json"===ce(Ae,D(ze[rt])?ze[rt][0]:ze[rt],{vocab:!0},{...Se,typeExpansion:!0});for(const K of ge){let Ve,Fe=ze[K];if("@context"===K)continue;const pe=ce(Ae,K,{vocab:!0},Se);if(null===pe||!re(pe)&&!$(pe)){Se.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:K,expandedProperty:pe}},options:Se});continue}if($(pe)){if("@reverse"===ke)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Fe});if(pe in me&&"@included"!==pe&&"@type"!==pe)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:pe})}if("@id"===pe){if(!g(Fe)){if(!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(A(Fe)){if(!k(Fe))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}else{if(!D(Fe))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(!Fe.every(O=>g(O)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}}z(me,"@id",v(Fe).map(O=>{if(g(O)){const ue=ce(Ae,O,{base:!0},Se);return Se.eventHandler&&(null===ue?he(null===O?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:O}},options:Se}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:O}},options:Se}):re(ue)||he({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:O,expandedId:ue}},options:Se})),ue}return O}),{propertyIsArray:Se.isFrame});continue}if("@type"===pe){A(Fe)&&(Fe=Object.fromEntries(Object.entries(Fe).map(([O,ue])=>[ce(Qe,O,{vocab:!0}),v(ue).map(de=>ce(Qe,de,{base:!0,vocab:!0},{...Se,typeExpansion:!0}))]))),T(Fe,Se.isFrame),z(me,"@type",v(Fe).map(O=>{if(g(O)){const ue=ce(Qe,O,{base:!0,vocab:!0},{...Se,typeExpansion:!0});return"@json"!==ue&&!re(ue)&&Se.eventHandler&&he({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:O}},options:Se}),ue}return O}),{propertyIsArray:!!Se.isFrame});continue}if("@included"===pe&&Y(Ae,1.1)){const O=v(yield H.expand({activeCtx:Ae,activeProperty:Ne,element:Fe,options:Se}));if(!O.every(ue=>U(ue)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Fe});z(me,"@included",O,{propertyIsArray:!0});continue}if("@graph"===pe&&!A(Fe)&&!D(Fe))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Fe});if("@value"===pe){I=Fe,se&&Y(Ae,1.1)?me["@value"]=Fe:z(me,"@value",Fe,{propertyIsArray:Se.isFrame});continue}if("@language"===pe){if(null===Fe)continue;if(!g(Fe)&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Fe});Fe=v(Fe).map(O=>g(O)?O.toLowerCase():O);for(const O of Fe)g(O)&&!O.match(ne)&&Se.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:O}},options:Se});z(me,"@language",Fe,{propertyIsArray:Se.isFrame});continue}if("@direction"===pe){if(!g(Fe)&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});Fe=v(Fe);for(const O of Fe)if(g(O)&&"ltr"!==O&&"rtl"!==O)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});z(me,"@direction",Fe,{propertyIsArray:Se.isFrame});continue}if("@index"===pe){if(!g(Fe))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Fe});z(me,"@index",Fe);continue}if("@reverse"===pe){if(!A(Fe))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Fe});if(Ve=yield H.expand({activeCtx:Ae,activeProperty:"@reverse",element:Fe,options:Se}),"@reverse"in Ve)for(const ue in Ve["@reverse"])z(me,ue,Ve["@reverse"][ue],{propertyIsArray:!0});let O=me["@reverse"]||null;for(const ue in Ve){if("@reverse"===ue)continue;null===O&&(O=me["@reverse"]={}),z(O,ue,[],{propertyIsArray:!0});const de=Ve[ue];for(let He=0;He<de.length;++He){const Ke=de[He];if(j(Ke)||M(Ke))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ve});z(O,ue,Ke,{propertyIsArray:!0})}}continue}if("@nest"===pe){B.push(K);continue}let Z=Ae;const G=R(Ae,K,"@context");y(G)||(Z=yield ae({activeCtx:Ae,localCtx:G,propagate:!0,overrideProtected:!0,options:Se}));const C=R(Z,K,"@container")||[];if(C.includes("@language")&&A(Fe))Ve=De(Z,Fe,R(Z,K,"@direction"),Se);else if(C.includes("@index")&&A(Fe)){const O=C.includes("@graph"),ue=R(Z,K,"@index")||"@index",de="@index"!==ue&&ce(Ae,ue,{vocab:!0},Se);Ve=yield tt({activeCtx:Z,options:Se,activeProperty:K,value:Fe,asGraph:O,indexKey:ue,propertyIndex:de})}else if(C.includes("@id")&&A(Fe)){const O=C.includes("@graph");Ve=yield tt({activeCtx:Z,options:Se,activeProperty:K,value:Fe,asGraph:O,indexKey:"@id"})}else if(C.includes("@type")&&A(Fe))Ve=yield tt({activeCtx:Z.revertToPreviousContext(),options:Se,activeProperty:K,value:Fe,asGraph:!1,indexKey:"@type"});else{const O="@list"===pe;if(O||"@set"===pe){let ue=Ne;O&&"@graph"===ke&&(ue=null),Ve=yield H.expand({activeCtx:Z,activeProperty:ue,element:Fe,options:Se,insideList:O})}else Ve="@json"===R(Ae,K,"@type")?{"@type":"@json","@value":Fe}:yield H.expand({activeCtx:Z,activeProperty:K,element:Fe,options:Se,insideList:!1})}if(null!==Ve||"@value"===pe){if("@list"!==pe&&!M(Ve)&&C.includes("@list")&&(Ve={"@list":v(Ve)}),C.includes("@graph")&&!C.some(O=>"@id"===O||"@index"===O)){Ve=v(Ve);const O=Object.keys(Ve[0]).length;if(!Se.isFrame&&null===Ce({value:Ve[0],count:O,options:Se}))continue;Ve=Ve.map(ue=>({"@graph":v(ue)}))}if(Z.mappings.has(K)&&Z.mappings.get(K).reverse){const O=me["@reverse"]=me["@reverse"]||{};Ve=v(Ve);for(let ue=0;ue<Ve.length;++ue){const de=Ve[ue];if(j(de)||M(de))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ve});z(O,pe,de,{propertyIsArray:!0})}continue}z(me,pe,Ve,{propertyIsArray:!0})}}if("@value"in me&&("@json"!==me["@type"]||!Y(Ae,1.1))&&(A(I)||D(I))&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:I});for(const K of B){const Fe=D(ze[K])?ze[K]:[ze[K]];for(const Ve of Fe){if(!A(Ve)||Object.keys(Ve).some(pe=>"@value"===ce(Ae,pe,{vocab:!0},Se)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Ve});yield le({activeCtx:Ae,activeProperty:Ne,expandedActiveProperty:ke,element:Ve,expandedParent:me,options:Se,insideList:Xe,typeScopedContext:Qe,typeKey:rt})}}})).apply(this,arguments)}function Ie({activeCtx:Ae,activeProperty:Ne,value:ke,options:ze}){if(null==ke)return null;const me=ce(Ae,Ne,{vocab:!0},ze);if("@id"===me)return ce(Ae,ke,{base:!0},ze);if("@type"===me)return ce(Ae,ke,{vocab:!0,base:!0},{...ze,typeExpansion:!0});const Se=R(Ae,Ne,"@type");if(("@id"===Se||"@graph"===me)&&g(ke)){const rt=ce(Ae,ke,{base:!0},ze);return null===rt&&ke.match(W)&&ze.eventHandler&&he({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ne}},options:ze}),{"@id":rt}}if("@vocab"===Se&&g(ke))return{"@id":ce(Ae,ke,{vocab:!0,base:!0},ze)};if($(me))return ke;const Xe={};if(Se&&!["@id","@vocab","@none"].includes(Se))Xe["@type"]=Se;else if(g(ke)){const rt=R(Ae,Ne,"@language");null!==rt&&(Xe["@language"]=rt);const Qe=R(Ae,Ne,"@direction");null!==Qe&&(Xe["@direction"]=Qe)}return["boolean","number","string"].includes(typeof ke)||(ke=ke.toString()),Xe["@value"]=ke,Xe}function De(Ae,Ne,ke,ze){const me=[],Se=Object.keys(Ne).sort();for(const Xe of Se){const rt=ce(Ae,Xe,{vocab:!0},ze);let Qe=Ne[Xe];D(Qe)||(Qe=[Qe]);for(const ge of Qe){if(null===ge)continue;if(!g(ge))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});const B={"@value":ge};"@none"!==rt&&(Xe.match(ne)||ze.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Xe}},options:ze}),B["@language"]=Xe.toLowerCase()),ke&&(B["@direction"]=ke),me.push(B)}}return me}function tt(Ae){return Ye.apply(this,arguments)}function Ye(){return(Ye=E(function*({activeCtx:Ae,options:Ne,activeProperty:ke,value:ze,asGraph:me,indexKey:Se,propertyIndex:Xe}){const rt=[],Qe=Object.keys(ze).sort(),ge="@type"===Se;for(let B of Qe){if(ge){const K=R(Ae,B,"@context");y(K)||(Ae=yield ae({activeCtx:Ae,localCtx:K,propagate:!1,options:Ne}))}let se,I=ze[B];D(I)||(I=[I]),I=yield H.expand({activeCtx:Ae,activeProperty:ke,element:I,options:Ne,insideList:!1,insideIndex:!0}),se=Xe?"@none"===B?"@none":Ie({activeCtx:Ae,activeProperty:Se,value:B,options:Ne}):ce(Ae,B,{vocab:!0},Ne),"@id"===Se?B=ce(Ae,B,{base:!0},Ne):ge&&(B=se);for(let K of I){if(me&&!N(K)&&(K={"@graph":[K]}),"@type"===Se)"@none"===se||(K["@type"]=K["@type"]?[B].concat(K["@type"]):[B]);else{if(j(K)&&!["@language","@type","@index"].includes(Se))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Se}".`,"jsonld.SyntaxError",{code:"invalid value object",value:K});Xe?"@none"!==se&&z(K,Xe,se,{propertyIsArray:!0,prependValue:!0}):"@none"!==se&&!(Se in K)&&(K[Se]=B)}rt.push(K)}}return rt})).apply(this,arguments)}te.exports=H,H.expand=function(){var Ae=E(function*({activeCtx:Ne,activeProperty:ke=null,element:ze,options:me={},insideList:Se=!1,insideIndex:Xe=!1,typeScopedContext:rt=null}){if(null==ze)return null;if("@default"===ke&&(me=Object.assign({},me,{isFrame:!1})),!D(ze)&&!A(ze))return Se||null!==ke&&"@graph"!==ce(Ne,ke,{vocab:!0},me)?Ie({activeCtx:Ne,activeProperty:ke,value:ze,options:me}):(me.eventHandler&&he({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:ze}},options:me}),null);if(D(ze)){let Ve=[];const pe=R(Ne,ke,"@container")||[];Se=Se||pe.includes("@list");for(let Z=0;Z<ze.length;++Z){let G=yield H.expand({activeCtx:Ne,activeProperty:ke,element:ze[Z],options:me,insideIndex:Xe,typeScopedContext:rt});Se&&D(G)&&(G={"@list":G}),null!==G&&(D(G)?Ve=Ve.concat(G):Ve.push(G))}return Ve}const Qe=ce(Ne,ke,{vocab:!0},me),ge=R(Ne,ke,"@context");rt=rt||(Ne.previousContext?Ne:null);let B=Object.keys(ze).sort(),I=!Xe;if(I&&rt&&B.length<=2&&!B.includes("@context"))for(const Ve of B){const pe=ce(rt,Ve,{vocab:!0},me);if("@value"===pe){I=!1,Ne=rt;break}if("@id"===pe&&1===B.length){I=!1;break}}I&&(Ne=Ne.revertToPreviousContext()),y(ge)||(Ne=yield ae({activeCtx:Ne,localCtx:ge,propagate:!0,overrideProtected:!0,options:me})),"@context"in ze&&(Ne=yield ae({activeCtx:Ne,localCtx:ze["@context"],options:me})),rt=Ne;let se=null;for(const Ve of B)if("@type"===ce(Ne,Ve,{vocab:!0},me)){se=se||Ve;const Z=ze[Ve],G=Array.isArray(Z)?Z.length>1?Z.slice().sort():Z:[Z];for(const C of G){const O=R(rt,C,"@context");y(O)||(Ne=yield ae({activeCtx:Ne,localCtx:O,options:me,propagate:!1}))}}let K={};yield le({activeCtx:Ne,activeProperty:ke,expandedActiveProperty:Qe,element:ze,expandedParent:K,options:me,insideList:Se,typeKey:se,typeScopedContext:rt}),B=Object.keys(K);let Fe=B.length;if("@value"in K){if("@type"in K&&("@language"in K||"@direction"in K))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:K});let Ve=Fe-1;if("@type"in K&&(Ve-=1),"@index"in K&&(Ve-=1),"@language"in K&&(Ve-=1),"@direction"in K&&(Ve-=1),0!==Ve)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:K});const pe=null===K["@value"]?[]:v(K["@value"]),Z=L(K,"@type");if(!Y(Ne,1.1)||!Z.includes("@json")||1!==Z.length)if(0===pe.length)me.eventHandler&&he({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:K}},options:me}),K=null;else{if(!pe.every(G=>g(G)||k(G))&&"@language"in K)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:K});if(!Z.every(G=>re(G)&&!(g(G)&&0===G.indexOf("_:"))||k(G)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:K})}}else if("@type"in K&&!D(K["@type"]))K["@type"]=[K["@type"]];else if("@set"in K||"@list"in K){if(Fe>1&&(2!==Fe||!("@index"in K)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:K});"@set"in K&&(K=K["@set"],B=Object.keys(K),Fe=B.length)}else 1===Fe&&"@language"in K&&(me.eventHandler&&he({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:K}},options:me}),K=null);return A(K)&&!me.keepFreeFloatingNodes&&!Se&&(null===ke||"@graph"===Qe||(R(Ne,ke,"@container")||[]).includes("@graph"))&&(K=Ce({value:K,count:Fe,options:me})),K});return function(Ne){return Ae.apply(this,arguments)}}()},8295:(te,J,m)=>{"use strict";const{isSubjectReference:E}=m(543),{createMergedNodeMap:b}=m(9783),D={};te.exports=D,D.flatten=A=>{const k=b(A),g=[],y=Object.keys(k).sort();for(let M=0;M<y.length;++M){const j=k[y[M]];E(j)||g.push(j)}return g}},9193:(te,J,m)=>{"use strict";const{isKeyword:E}=m(9611),b=m(543),D=m(8254),A=m(3521),k=m(2651),g=m(1874),{createNodeMap:y,mergeNodeMapGraphs:M}=m(9783),j={};function N(v){const L={};for(const T in v)void 0!==v[T]&&(L["@"+T]=[v[T]]);return[L]}function U(v,L,T){for(let he=T.length-1;he>=0;--he){const H=T[he];if(H.graph===L&&H.subject["@id"]===v["@id"])return!0}return!1}function ce(v,L,T){const he="@"+T;let H=he in v?v[he][0]:L[T];if("embed"===T)if(!0===H)H="@once";else if(!1===H)H="@never";else if("@always"!==H&&"@never"!==H&&"@link"!==H&&"@first"!==H&&"@last"!==H&&"@once"!==H)throw new g("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:v});return H}function R(v){if(!D.isArray(v)||1!==v.length||!D.isObject(v[0]))throw new g("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:v});if("@id"in v[0])for(const L of A.asArray(v[0]["@id"]))if(!D.isObject(L)&&!k.isAbsolute(L)||D.isString(L)&&0===L.indexOf("_:"))throw new g("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v});if("@type"in v[0])for(const L of A.asArray(v[0]["@type"]))if(!D.isObject(L)&&!k.isAbsolute(L)&&"@json"!==L||D.isString(L)&&0===L.indexOf("_:"))throw new g("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v})}function ae(v,L,T,he){let H=!0,Ce=!1;for(const le in T){let xe=!1;const Ie=A.getValues(L,le),De=0===A.getValues(T,le).length;if("@id"===le){if(D.isEmptyObject(T["@id"][0]||{})?xe=!0:T["@id"].length>=0&&(xe=T["@id"].includes(Ie[0])),!he.requireAll)return xe}else if("@type"===le){if(H=!1,De){if(Ie.length>0)return!1;xe=!0}else if(1===T["@type"].length&&D.isEmptyObject(T["@type"][0]))xe=Ie.length>0;else for(const tt of T["@type"])xe=!(!D.isObject(tt)||!("@default"in tt))||xe||Ie.some(Ye=>Ye===tt);if(!he.requireAll)return xe}else{if(E(le))continue;{const tt=A.getValues(T,le)[0];let Ye=!1;if(tt&&(R([tt]),Ye="@default"in tt),H=!1,0===Ie.length&&Ye)continue;if(Ie.length>0&&De)return!1;if(void 0===tt){if(Ie.length>0)return!1;xe=!0}else if(b.isList(tt)){const Ae=tt["@list"][0];if(b.isList(Ie[0])){const Ne=Ie[0]["@list"];b.isValue(Ae)?xe=Ne.some(ke=>z(Ae,ke)):(b.isSubject(Ae)||b.isSubjectReference(Ae))&&(xe=Ne.some(ke=>W(v,Ae,ke,he)))}}else xe=b.isValue(tt)?Ie.some(Ae=>z(tt,Ae)):b.isSubjectReference(tt)?Ie.some(Ae=>W(v,tt,Ae,he)):!!D.isObject(tt)&&Ie.length>0}}if(!xe&&he.requireAll)return!1;Ce=Ce||xe}return H||Ce}function Y(v,L){const T=v.uniqueEmbeds[v.graph],he=T[L],H=he.parent,Ce=he.property,le={"@id":L};if(D.isArray(H)){for(let Ie=0;Ie<H.length;++Ie)if(A.compareValues(H[Ie],le)){H[Ie]=le;break}}else{const Ie=D.isArray(H[Ce]);A.removeValue(H,Ce,le,{propertyIsArray:Ie}),A.addValue(H,Ce,le,{propertyIsArray:Ie})}const xe=Ie=>{const De=Object.keys(T);for(const tt of De)tt in T&&D.isObject(T[tt].parent)&&T[tt].parent["@id"]===Ie&&(delete T[tt],xe(tt))};xe(L)}function re(v,L){if(D.isArray(v))return v.map(T=>re(T,L));if(D.isObject(v)){if("@preserve"in v)return v["@preserve"][0];if(b.isValue(v))return v;if(b.isList(v))return v["@list"]=re(v["@list"],L),v;if("@id"in v){const T=v["@id"];if(L.link.hasOwnProperty(T)){const he=L.link[T].indexOf(v);if(-1!==he)return L.link[T][he];L.link[T].push(v)}else L.link[T]=[v]}for(const T in v)"@id"===T&&L.bnodesToClear.includes(v[T])?delete v["@id"]:v[T]=re(v[T],L)}return v}function ne(v,L,T){D.isObject(v)?A.addValue(v,L,T,{propertyIsArray:!0}):v.push(T)}function W(v,L,T,he){if(!("@id"in T))return!1;const H=v.subjects[T["@id"]];return H&&ae(v,H,L,he)}function z(v,L){const T=L["@value"],he=L["@type"],H=L["@language"],Ce=v["@value"]?D.isArray(v["@value"])?v["@value"]:[v["@value"]]:[],le=v["@type"]?D.isArray(v["@type"])?v["@type"]:[v["@type"]]:[],xe=v["@language"]?D.isArray(v["@language"])?v["@language"]:[v["@language"]]:[];return 0===Ce.length&&0===le.length&&0===xe.length||!(!Ce.includes(T)&&!D.isEmptyObject(Ce[0])||!(!he&&0===le.length||le.includes(he)||he&&D.isEmptyObject(le[0]))||!(!H&&0===xe.length||xe.includes(H)||H&&D.isEmptyObject(xe[0])))}te.exports=j,j.frameMergedOrDefault=(v,L,T)=>{const he={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},H=new A.IdentifierIssuer("_:b");y(v,he.graphMap,"@default",H),T.merged&&(he.graphMap["@merged"]=M(he.graphMap),he.graph="@merged"),he.subjects=he.graphMap[he.graph];const Ce=[];return j.frame(he,Object.keys(he.subjects).sort(),L,Ce),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(he.bnodeMap).filter(le=>1===he.bnodeMap[le].length)),T.link={},re(Ce,T)},j.frame=(v,L,T,he,H=null)=>{R(T);const Ce=v.options,le={embed:ce(T=T[0],Ce,"embed"),explicit:ce(T,Ce,"explicit"),requireAll:ce(T,Ce,"requireAll")};v.link.hasOwnProperty(v.graph)||(v.link[v.graph]={});const xe=v.link[v.graph],Ie=function $(v,L,T,he){const H={};for(const Ce of L){const le=v.graphMap[v.graph][Ce];ae(v,le,T,he)&&(H[Ce]=le)}return H}(v,L,T,le),De=Object.keys(Ie).sort();for(const tt of De){const Ye=Ie[tt];if(null===H?v.uniqueEmbeds={[v.graph]:{}}:v.uniqueEmbeds[v.graph]=v.uniqueEmbeds[v.graph]||{},"@link"===le.embed&&tt in xe){ne(he,H,xe[tt]);continue}const Ae={"@id":tt};if(0===tt.indexOf("_:")&&A.addValue(v.bnodeMap,tt,Ae,{propertyIsArray:!0}),xe[tt]=Ae,("@first"===le.embed||"@last"===le.embed)&&v.is11)throw new g("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(v.embedded||!v.uniqueEmbeds[v.graph].hasOwnProperty(tt)){if(v.embedded&&("@never"===le.embed||U(Ye,v.graph,v.subjectStack))){ne(he,H,Ae);continue}if(v.embedded&&("@first"==le.embed||"@once"==le.embed)&&v.uniqueEmbeds[v.graph].hasOwnProperty(tt)){ne(he,H,Ae);continue}if("@last"===le.embed&&tt in v.uniqueEmbeds[v.graph]&&Y(v,tt),v.uniqueEmbeds[v.graph][tt]={parent:he,property:H},v.subjectStack.push({subject:Ye,graph:v.graph}),tt in v.graphMap){let Ne=!1,ke=null;"@graph"in T?(ke=T["@graph"][0],Ne=!("@merged"===tt||"@default"===tt),D.isObject(ke)||(ke={})):(Ne="@merged"!==v.graph,ke={}),Ne&&j.frame({...v,graph:tt,embedded:!1},Object.keys(v.graphMap[tt]).sort(),[ke],Ae,"@graph")}"@included"in T&&j.frame({...v,embedded:!1},L,T["@included"],Ae,"@included");for(const Ne of Object.keys(Ye).sort())if(E(Ne)){if(Ae[Ne]=A.clone(Ye[Ne]),"@type"===Ne)for(const ke of Ye["@type"])0===ke.indexOf("_:")&&A.addValue(v.bnodeMap,ke,Ae,{propertyIsArray:!0})}else if(!le.explicit||Ne in T)for(const ke of Ye[Ne]){const ze=Ne in T?T[Ne]:N(le);if(b.isList(ke)){const me=T[Ne]&&T[Ne][0]&&T[Ne][0]["@list"]?T[Ne][0]["@list"]:N(le),Se={"@list":[]};ne(Ae,Ne,Se);const Xe=ke["@list"];for(const rt of Xe)b.isSubjectReference(rt)?j.frame({...v,embedded:!0},[rt["@id"]],me,Se,"@list"):ne(Se,"@list",A.clone(rt))}else b.isSubjectReference(ke)?j.frame({...v,embedded:!0},[ke["@id"]],ze,Ae,Ne):z(ze[0],ke)&&ne(Ae,Ne,A.clone(ke))}for(const Ne of Object.keys(T).sort()){if("@type"===Ne){if(!D.isObject(T[Ne][0])||!("@default"in T[Ne][0]))continue}else if(E(Ne))continue;const ke=T[Ne][0]||{};if(!ce(ke,Ce,"omitDefault")&&!(Ne in Ae)){let me="@null";"@default"in ke&&(me=A.clone(ke["@default"])),D.isArray(me)||(me=[me]),Ae[Ne]=[{"@preserve":me}]}}for(const Ne of Object.keys(T["@reverse"]||{}).sort()){const ke=T["@reverse"][Ne];for(const ze of Object.keys(v.subjects))A.getValues(v.subjects[ze],Ne).some(Se=>Se["@id"]===tt)&&(Ae["@reverse"]=Ae["@reverse"]||{},A.addValue(Ae["@reverse"],Ne,[],{propertyIsArray:!0}),j.frame({...v,embedded:!0},[ze],ke,Ae["@reverse"][Ne],H))}ne(he,H,Ae),v.subjectStack.pop()}}},j.cleanupNull=(v,L)=>{if(D.isArray(v))return v.map(he=>j.cleanupNull(he,L)).filter(he=>he);if("@null"===v)return null;if(D.isObject(v)){if("@id"in v){const T=v["@id"];if(L.link.hasOwnProperty(T)){const he=L.link[T].indexOf(v);if(-1!==he)return L.link[T][he];L.link[T].push(v)}else L.link[T]=[v]}for(const T in v)v[T]=j.cleanupNull(v[T],L)}return v}},9767:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(1874),D=m(543),A=m(8254),{REGEX_BCP47:k,addValue:g}=m(3521),{handleEvent:y}=m(3855),{RDF_LIST:M,RDF_FIRST:j,RDF_REST:N,RDF_NIL:U,RDF_TYPE:ce,RDF_JSON_LITERAL:R,XSD_BOOLEAN:$,XSD_DOUBLE:ae,XSD_INTEGER:Y,XSD_STRING:re}=m(6982),ne={};function W(z,v,L,T){if(z.termType.endsWith("Node"))return{"@id":z.value};const he={"@value":z.value};if(z.language)z.language.match(k)||T.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:z.language}},options:T}),he["@language"]=z.language;else{let H=z.datatype.value;if(H||(H=re),H===R){H="@json";try{he["@value"]=JSON.parse(he["@value"])}catch(Ce){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:he["@value"],cause:Ce})}}if(v){if(H===$)"true"===he["@value"]?he["@value"]=!0:"false"===he["@value"]&&(he["@value"]=!1);else if(A.isNumeric(he["@value"]))if(H===Y){const Ce=parseInt(he["@value"],10);Ce.toFixed(0)===he["@value"]&&(he["@value"]=Ce)}else H===ae&&(he["@value"]=parseFloat(he["@value"]));[$,Y,ae,re].includes(H)||(he["@type"]=H)}else if("i18n-datatype"===L&&H.startsWith("https://www.w3.org/ns/i18n#")){const[,Ce,le]=H.split(/[#_]/);Ce.length>0&&(he["@language"]=Ce,Ce.match(k)||T.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ce}},options:T})),he["@direction"]=le}else H!==re&&(he["@type"]=H)}return he}te.exports=ne,ne.fromRDF=function(){var z=E(function*(v,L){const T={},he={"@default":T},H={},{useRdfType:Ce=!1,useNativeTypes:le=!1,rdfDirection:xe=null}=L;for(const tt of v){const Ye="DefaultGraph"===tt.graph.termType?"@default":tt.graph.value;Ye in he||(he[Ye]={}),"@default"!==Ye&&!(Ye in T)&&(T[Ye]={"@id":Ye});const Ae=he[Ye],Ne=tt.subject.value,ke=tt.predicate.value,ze=tt.object;Ne in Ae||(Ae[Ne]={"@id":Ne});const me=Ae[Ne],Se=ze.termType.endsWith("Node");if(Se&&!(ze.value in Ae)&&(Ae[ze.value]={"@id":ze.value}),ke===ce&&!Ce&&Se){g(me,"@type",ze.value,{propertyIsArray:!0});continue}const Xe=W(ze,le,xe,L);if(g(me,ke,Xe,{propertyIsArray:!0}),Se)if(ze.value===U){const rt=Ae[ze.value];"usages"in rt||(rt.usages=[]),rt.usages.push({node:me,property:ke,value:Xe})}else H[ze.value]=!(ze.value in H)&&{node:me,property:ke,value:Xe}}for(const tt in he){const Ye=he[tt];if(!(U in Ye))continue;const Ae=Ye[U];if(Ae.usages){for(let Ne of Ae.usages){let ke=Ne.node,ze=Ne.property,me=Ne.value;const Se=[],Xe=[];let rt=Object.keys(ke).length;for(;ze===N&&A.isObject(H[ke["@id"]])&&A.isArray(ke[j])&&1===ke[j].length&&A.isArray(ke[N])&&1===ke[N].length&&(3===rt||4===rt&&A.isArray(ke["@type"])&&1===ke["@type"].length&&ke["@type"][0]===M)&&(Se.push(ke[j][0]),Xe.push(ke["@id"]),Ne=H[ke["@id"]],ke=Ne.node,ze=Ne.property,me=Ne.value,rt=Object.keys(ke).length,D.isBlankNode(ke)););delete me["@id"],me["@list"]=Se.reverse();for(const Qe of Xe)delete Ye[Qe]}delete Ae.usages}}const Ie=[],De=Object.keys(T).sort();for(const tt of De){const Ye=T[tt];if(tt in he){const Ae=Ye["@graph"]=[],Ne=he[tt],ke=Object.keys(Ne).sort();for(const ze of ke){const me=Ne[ze];D.isSubjectReference(me)||Ae.push(me)}}D.isSubjectReference(Ye)||Ie.push(Ye)}return Ie});return function(v,L){return z.apply(this,arguments)}}()},543:(te,J,m)=>{"use strict";const E=m(8254),b={};te.exports=b,b.isSubject=D=>!(!E.isObject(D)||"@value"in D||"@set"in D||"@list"in D)&&(Object.keys(D).length>1||!("@id"in D)),b.isSubjectReference=D=>E.isObject(D)&&1===Object.keys(D).length&&"@id"in D,b.isValue=D=>E.isObject(D)&&"@value"in D,b.isList=D=>E.isObject(D)&&"@list"in D,b.isGraph=D=>E.isObject(D)&&"@graph"in D&&1===Object.keys(D).filter(A=>"@id"!==A&&"@index"!==A).length,b.isSimpleGraph=D=>b.isGraph(D)&&!("@id"in D),b.isBlankNode=D=>{if(E.isObject(D)){if("@id"in D){const A=D["@id"];return!E.isString(A)||0===A.indexOf("_:")}return 0===Object.keys(D).length||!("@value"in D||"@set"in D||"@list"in D)}return!1}},7661:(te,J,m)=>{var E=m(7156).default;const b=m(1986),D=m(8924),A=m(3521),k=m(4198),g=A.IdentifierIssuer,y=m(1874),M=m(1072),j=m(7260),{expand:N}=m(3860),{flatten:U}=m(8295),{fromRDF:ce}=m(9767),{toRDF:R}=m(240),{frameMergedOrDefault:$,cleanupNull:ae}=m(9193),{isArray:Y,isObject:re,isString:ne}=m(8254),{isSubjectReference:W}=m(543),{expandIri:z,getInitialContext:v,process:L,processingMode:T}=m(9611),{compact:he,compactIri:H}=m(8809),{createNodeMap:Ce,createMergedNodeMap:le,mergeNodeMaps:xe}=m(9783),{logEventHandler:Ie,logWarningEventHandler:De,safeEventHandler:tt,setDefaultEventHandler:Ye,setupEventHandler:Ae,strictEventHandler:Ne,unhandledEventHandler:ke}=m(3855),ze=function(Se){const Xe={},Qe=new M({max:100});function ge(B,{documentLoader:I=Se.documentLoader,...se}){if(B&&"compactionMap"in B)throw new y('"compactionMap" not supported.',"jsonld.OptionsError");if(B&&"expansionMap"in B)throw new y('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:I},se,B,{eventHandler:Ae({options:B})})}return Se.compact=function(){var B=E(function*(I,se,K){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===se)throw new y("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===I)return null;let Fe;(K=ge(K,{base:ne(I)?I:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new g("_:b"),contextResolver:new k({sharedCache:Qe})})).link&&(K.skipExpansion=!0),K.compactToRelative||delete K.base,Fe=K.skipExpansion?I:yield Se.expand(I,K);const Ve=yield Se.processContext(v(K),se,K);let pe=yield he({activeCtx:Ve,element:Fe,options:K});K.compactArrays&&!K.graph&&Y(pe)?1===pe.length?pe=pe[0]:0===pe.length&&(pe={}):K.graph&&re(pe)&&(pe=[pe]),re(se)&&"@context"in se&&(se=se["@context"]),se=A.clone(se),Y(se)||(se=[se]);const Z=se;se=[];for(let C=0;C<Z.length;++C)(!re(Z[C])||Object.keys(Z[C]).length>0)&&se.push(Z[C]);const G=se.length>0;if(1===se.length&&(se=se[0]),Y(pe)){const C=H({activeCtx:Ve,iri:"@graph",relativeTo:{vocab:!0}}),O=pe;pe={},G&&(pe["@context"]=se),pe[C]=O}else if(re(pe)&&G){const C=pe;pe={"@context":se};for(const O in C)pe[O]=C[O]}return pe});return function(I,se,K){return B.apply(this,arguments)}}(),Se.expand=function(){var B=E(function*(I,se){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const K={},Fe=[];if("expandContext"in(se=ge(se,{keepFreeFloatingNodes:!1,contextResolver:new k({sharedCache:Qe})}))){const G=A.clone(se.expandContext);K.expandContext=re(G)&&"@context"in G?G:{"@context":G},Fe.push(K.expandContext)}let Ve;if(ne(I)){const G=yield Se.get(I,se);Ve=G.documentUrl,K.input=G.document,G.contextUrl&&(K.remoteContext={"@context":G.contextUrl},Fe.push(K.remoteContext))}else K.input=A.clone(I);"base"in se||(se.base=Ve||"");let pe=v(se);for(const G of Fe)pe=yield L({activeCtx:pe,localCtx:G,options:se});let Z=yield N({activeCtx:pe,element:K.input,options:se});return re(Z)&&"@graph"in Z&&1===Object.keys(Z).length?Z=Z["@graph"]:null===Z&&(Z=[]),Y(Z)||(Z=[Z]),Z});return function(I,se){return B.apply(this,arguments)}}(),Se.flatten=function(){var B=E(function*(I,se,K){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");se="function"==typeof se?null:se||null,K=ge(K,{base:ne(I)?I:"",contextResolver:new k({sharedCache:Qe})});const Fe=yield Se.expand(I,K),Ve=U(Fe);return null===se?Ve:(K.graph=!0,K.skipExpansion=!0,yield Se.compact(Ve,se,K))});return function(I,se,K){return B.apply(this,arguments)}}(),Se.frame=function(){var B=E(function*(I,se,K){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(K=ge(K,{base:ne(I)?I:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new k({sharedCache:Qe})}),ne(se)){const de=yield Se.get(se,K);if(se=de.document,de.contextUrl){let He=se["@context"];He?Y(He)?He.push(de.contextUrl):He=[He,de.contextUrl]:He=de.contextUrl,se["@context"]=He}}const Fe=se&&se["@context"]||{},Ve=yield Se.processContext(v(K),Fe,K);K.hasOwnProperty("omitGraph")||(K.omitGraph=T(Ve,1.1)),K.hasOwnProperty("pruneBlankNodeIdentifiers")||(K.pruneBlankNodeIdentifiers=T(Ve,1.1));const pe=yield Se.expand(I,K),Z={...K};Z.isFrame=!0,Z.keepFreeFloatingNodes=!0;const G=yield Se.expand(se,Z),C=Object.keys(se).map(de=>z(Ve,de,{vocab:!0}));Z.merged=!C.includes("@graph"),Z.is11=T(Ve,1.1);const O=$(pe,G,Z);Z.graph=!K.omitGraph,Z.skipExpansion=!0,Z.link={},Z.framing=!0;let ue=yield Se.compact(O,Fe,Z);return Z.link={},ue=ae(ue,Z),ue});return function(I,se,K){return B.apply(this,arguments)}}(),Se.link=function(){var B=E(function*(I,se,K){const Fe={};return se&&(Fe["@context"]=se),Fe["@embed"]="@link",Se.frame(I,Fe,K)});return function(I,se,K){return B.apply(this,arguments)}}(),Se.normalize=Se.canonize=function(){var B=E(function*(I,se){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(se=ge(se,{base:ne(I)?I:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new k({sharedCache:Qe})}))){if("application/n-quads"!==se.inputFormat&&"application/nquads"!==se.inputFormat)throw new y("Unknown canonicalization input format.","jsonld.CanonizeError");const Ve=j.parse(I);return b.canonize(Ve,se)}const K={...se};delete K.format,K.produceGeneralizedRdf=!1;const Fe=yield Se.toRDF(I,K);return b.canonize(Fe,se)});return function(I,se){return B.apply(this,arguments)}}(),Se.fromRDF=function(){var B=E(function*(I,se){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");se=ge(se,{format:ne(I)?"application/n-quads":void 0});const{format:K}=se;let{rdfParser:Fe}=se;if(K){if(Fe=Fe||Xe[K],!Fe)throw new y("Unknown input format.","jsonld.UnknownFormat",{format:K})}else Fe=()=>I;const Ve=yield Fe(I);return ce(Ve,se)});return function(I,se){return B.apply(this,arguments)}}(),Se.toRDF=function(){var B=E(function*(I,se){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let K;K=(se=ge(se,{base:ne(I)?I:"",skipExpansion:!1,contextResolver:new k({sharedCache:Qe})})).skipExpansion?I:yield Se.expand(I,se);const Fe=R(K,se);if(se.format){if("application/n-quads"===se.format||"application/nquads"===se.format)return j.serialize(Fe);throw new y("Unknown output format.","jsonld.UnknownFormat",{format:se.format})}return Fe});return function(I,se){return B.apply(this,arguments)}}(),Se.createNodeMap=function(){var B=E(function*(I,se){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");se=ge(se,{base:ne(I)?I:"",contextResolver:new k({sharedCache:Qe})});const K=yield Se.expand(I,se);return le(K,se)});return function(I,se){return B.apply(this,arguments)}}(),Se.merge=function(){var B=E(function*(I,se,K){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Y(I))throw new TypeError('Could not merge, "docs" must be an array.');se="function"==typeof se?null:se||null,K=ge(K,{contextResolver:new k({sharedCache:Qe})});const Fe=yield Promise.all(I.map(de=>{const He={...K};return Se.expand(de,He)}));let Ve=!0;"mergeNodes"in K&&(Ve=K.mergeNodes);const pe=K.issuer||new g("_:b"),Z={"@default":{}};for(let de=0;de<Fe.length;++de){const He=A.relabelBlankNodes(Fe[de],{issuer:new g("_:b"+de+"-")}),Ke=Ve||0===de?Z:{"@default":{}};if(Ce(He,Ke,"@default",pe),Ke!==Z)for(const ut in Ke){const Rt=Ke[ut];if(!(ut in Z)){Z[ut]=Rt;continue}const dt=Z[ut];for(const Vt in Rt)Vt in dt||(dt[Vt]=Rt[Vt])}}const G=xe(Z),C=[],O=Object.keys(G).sort();for(let de=0;de<O.length;++de){const He=G[O[de]];W(He)||C.push(He)}return null===se?C:(K.graph=!0,K.skipExpansion=!0,yield Se.compact(C,se,K))});return function(I,se,K){return B.apply(this,arguments)}}(),Object.defineProperty(Se,"documentLoader",{get:()=>Se._documentLoader,set:B=>Se._documentLoader=B}),Se.documentLoader=function(){var B=E(function*(I){throw new y("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:I})});return function(I){return B.apply(this,arguments)}}(),Se.get=function(){var B=E(function*(I,se){let K;K="function"==typeof se.documentLoader?se.documentLoader:Se.documentLoader;const Fe=yield K(I);try{if(!Fe.document)throw new y("No remote document found at the given URL.","jsonld.NullRemoteDocument");ne(Fe.document)&&(Fe.document=JSON.parse(Fe.document))}catch(Ve){throw new y("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ve,remoteDoc:Fe})}return Fe});return function(I,se){return B.apply(this,arguments)}}(),Se.processContext=function(){var B=E(function*(I,se,K){return K=ge(K,{base:"",contextResolver:new k({sharedCache:Qe})}),null===se?v(K):(se=A.clone(se),re(se)&&"@context"in se||(se={"@context":se}),L({activeCtx:I,localCtx:se,options:K}))});return function(I,se,K){return B.apply(this,arguments)}}(),Se.getContextValue=m(9611).getContextValue,Se.documentLoaders={},Se.useDocumentLoader=function(B){if(!(B in Se.documentLoaders))throw new y('Unknown document loader type: "'+B+'"',"jsonld.UnknownDocumentLoader",{type:B});Se.documentLoader=Se.documentLoaders[B].apply(Se,Array.prototype.slice.call(arguments,1))},Se.registerRDFParser=function(B,I){Xe[B]=I},Se.unregisterRDFParser=function(B){delete Xe[B]},Se.registerRDFParser("application/n-quads",j.parse),Se.registerRDFParser("application/nquads",j.parse),Se.url=m(2651),Se.logEventHandler=Ie,Se.logWarningEventHandler=De,Se.safeEventHandler=tt,Se.setDefaultEventHandler=Ye,Se.strictEventHandler=Ne,Se.unhandledEventHandler=ke,Se.util=A,Object.assign(Se,A),Se.promises=Se,Se.RequestQueue=m(4044),Se.JsonLdProcessor=m(1828)(Se),D.setupGlobals(Se),D.setupDocumentLoaders(Se),Se},me=function(){return ze(function(){return me()})};ze(me),te.exports=me},9783:(te,J,m)=>{"use strict";const{isKeyword:E}=m(9611),b=m(543),D=m(8254),A=m(3521),k=m(1874),g={};te.exports=g,g.createMergedNodeMap=(y,M)=>{const j=(M=M||{}).issuer||new A.IdentifierIssuer("_:b"),N={"@default":{}};return g.createNodeMap(y,N,"@default",j),g.mergeNodeMaps(N)},g.createNodeMap=(y,M,j,N,U,ce)=>{if(D.isArray(y)){for(const Y of y)g.createNodeMap(Y,M,j,N,void 0,ce);return}if(!D.isObject(y))return void(ce&&ce.push(y));if(b.isValue(y)){if("@type"in y){let Y=y["@type"];0===Y.indexOf("_:")&&(y["@type"]=Y=N.getId(Y))}return void(ce&&ce.push(y))}if(ce&&b.isList(y)){const Y=[];return g.createNodeMap(y["@list"],M,j,N,U,Y),void ce.push({"@list":Y})}if("@type"in y){const Y=y["@type"];for(const re of Y)0===re.indexOf("_:")&&N.getId(re)}D.isUndefined(U)&&(U=b.isBlankNode(y)?N.getId(y["@id"]):y["@id"]),ce&&ce.push({"@id":U});const R=M[j],$=R[U]=R[U]||{};$["@id"]=U;const ae=Object.keys(y).sort();for(let Y of ae){if("@id"===Y)continue;if("@reverse"===Y){const ne={"@id":U},W=y["@reverse"];for(const z in W){const v=W[z];for(const L of v){let T=L["@id"];b.isBlankNode(L)&&(T=N.getId(T)),g.createNodeMap(L,M,j,N,T),A.addValue(R[T],z,ne,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===Y){U in M||(M[U]={}),g.createNodeMap(y[Y],M,U,N);continue}if("@included"===Y){g.createNodeMap(y[Y],M,j,N);continue}if("@type"!==Y&&E(Y)){if("@index"===Y&&Y in $&&(y[Y]!==$[Y]||y[Y]["@id"]!==$[Y]["@id"]))throw new k("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:$});$[Y]=y[Y];continue}const re=y[Y];if(0===Y.indexOf("_:")&&(Y=N.getId(Y)),0!==re.length)for(let ne of re)if("@type"===Y&&(ne=0===ne.indexOf("_:")?N.getId(ne):ne),b.isSubject(ne)||b.isSubjectReference(ne)){if("@id"in ne&&!ne["@id"])continue;const W=b.isBlankNode(ne)?N.getId(ne["@id"]):ne["@id"];A.addValue($,Y,{"@id":W},{propertyIsArray:!0,allowDuplicate:!1}),g.createNodeMap(ne,M,j,N,W)}else if(b.isValue(ne))A.addValue($,Y,ne,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(ne)){const W=[];g.createNodeMap(ne["@list"],M,j,N,U,W),ne={"@list":W},A.addValue($,Y,ne,{propertyIsArray:!0,allowDuplicate:!1})}else g.createNodeMap(ne,M,j,N,U),A.addValue($,Y,ne,{propertyIsArray:!0,allowDuplicate:!1});else A.addValue($,Y,[],{propertyIsArray:!0})}},g.mergeNodeMapGraphs=y=>{const M={};for(const j of Object.keys(y).sort())for(const N of Object.keys(y[j]).sort()){const U=y[j][N];N in M||(M[N]={"@id":N});const ce=M[N];for(const R of Object.keys(U).sort())if(E(R)&&"@type"!==R)ce[R]=A.clone(U[R]);else for(const $ of U[R])A.addValue(ce,R,A.clone($),{propertyIsArray:!0,allowDuplicate:!1})}return M},g.mergeNodeMaps=y=>{const M=y["@default"],j=Object.keys(y).sort();for(const N of j){if("@default"===N)continue;const U=y[N];let ce=M[N];ce?"@graph"in ce||(ce["@graph"]=[]):M[N]=ce={"@id":N,"@graph":[]};const R=ce["@graph"];for(const $ of Object.keys(U).sort()){const ae=U[$];b.isSubjectReference(ae)||R.push(ae)}}return M}},8924:(te,J,m)=>{"use strict";const E=m(627),b={};te.exports=b,b.setupDocumentLoaders=function(D){typeof XMLHttpRequest<"u"&&(D.documentLoaders.xhr=E,D.useDocumentLoader("xhr"))},b.setupGlobals=function(D){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:D.JsonLdProcessor})}},240:(te,J,m)=>{"use strict";const{createNodeMap:E}=m(9783),{isKeyword:b}=m(9611),D=m(543),A=m(5041),k=m(8254),g=m(3521),{handleEvent:y}=m(3855),{RDF_FIRST:M,RDF_REST:j,RDF_NIL:N,RDF_TYPE:U,RDF_JSON_LITERAL:ce,RDF_LANGSTRING:R,XSD_BOOLEAN:$,XSD_DOUBLE:ae,XSD_INTEGER:Y,XSD_STRING:re}=m(6982),{isAbsolute:ne}=m(2651),W={};function z(T,he,H,Ce,le){const xe=Object.keys(he).sort();for(const Ie of xe){const De=he[Ie],tt=Object.keys(De).sort();for(let Ye of tt){const Ae=De[Ye];if("@type"===Ye)Ye=U;else if(b(Ye))continue;for(const Ne of Ae){const ke={termType:Ie.startsWith("_:")?"BlankNode":"NamedNode",value:Ie};if(!ne(Ie)){le.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ie}},options:le});continue}const ze={termType:Ye.startsWith("_:")?"BlankNode":"NamedNode",value:Ye};if(!ne(Ye)){le.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ye}},options:le});continue}if("BlankNode"===ze.termType&&!le.produceGeneralizedRdf){le.eventHandler&&y({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Ce.getOldIds().find(Se=>Ce.getId(Se)===Ye)}},options:le});continue}const me=L(Ne,Ce,T,H,le.rdfDirection,le);me&&T.push({subject:ke,predicate:ze,object:me,graph:H})}}}}function L(T,he,H,Ce,le,xe){const Ie={};if(D.isValue(T)){Ie.termType="Literal",Ie.value=void 0,Ie.datatype={termType:"NamedNode"};let De=T["@value"];const tt=T["@type"]||null;"@json"===tt?(Ie.value=A(De),Ie.datatype.value=ce):k.isBoolean(De)?(Ie.value=De.toString(),Ie.datatype.value=tt||$):k.isDouble(De)||tt===ae?(k.isDouble(De)||(De=parseFloat(De)),Ie.value=De.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ie.datatype.value=tt||ae):k.isNumber(De)?(Ie.value=De.toFixed(0),Ie.datatype.value=tt||Y):"i18n-datatype"===le&&"@direction"in T?(Ie.datatype.value="https://www.w3.org/ns/i18n#"+(T["@language"]||"")+`_${T["@direction"]}`,Ie.value=De):"@language"in T?(Ie.value=De,Ie.datatype.value=tt||R,Ie.language=T["@language"]):(Ie.value=De,Ie.datatype.value=tt||re)}else if(D.isList(T)){const De=function v(T,he,H,Ce,le,xe){const Ie={termType:"NamedNode",value:M},De={termType:"NamedNode",value:j},tt={termType:"NamedNode",value:N},Ye=T.pop(),Ae=Ye?{termType:"BlankNode",value:he.getId()}:tt;let Ne=Ae;for(const ke of T){const ze=L(ke,he,H,Ce,le,xe),me={termType:"BlankNode",value:he.getId()};H.push({subject:Ne,predicate:Ie,object:ze,graph:Ce}),H.push({subject:Ne,predicate:De,object:me,graph:Ce}),Ne=me}if(Ye){const ke=L(Ye,he,H,Ce,le,xe);H.push({subject:Ne,predicate:Ie,object:ke,graph:Ce}),H.push({subject:Ne,predicate:De,object:tt,graph:Ce})}return Ae}(T["@list"],he,H,Ce,le,xe);Ie.termType=De.termType,Ie.value=De.value}else{const De=k.isObject(T)?T["@id"]:T;Ie.termType=De.startsWith("_:")?"BlankNode":"NamedNode",Ie.value=De}return"NamedNode"!==Ie.termType||ne(Ie.value)?Ie:(xe.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ie.value}},options:xe}),null)}te.exports=W,W.toRDF=(T,he)=>{const H=new g.IdentifierIssuer("_:b"),Ce={"@default":{}};E(T,Ce,"@default",H);const le=[],xe=Object.keys(Ce).sort();for(const Ie of xe){let De;if("@default"===Ie)De={termType:"DefaultGraph",value:""};else{if(!ne(Ie)){he.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ie}},options:he});continue}De=Ie.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},De.value=Ie}z(le,Ce[Ie],De,H,he)}return le}},8254:te=>{"use strict";const J={};te.exports=J,J.isArray=Array.isArray,J.isBoolean=m=>"boolean"==typeof m||"[object Boolean]"===Object.prototype.toString.call(m),J.isDouble=m=>J.isNumber(m)&&(-1!==String(m).indexOf(".")||Math.abs(m)>=1e21),J.isEmptyObject=m=>J.isObject(m)&&0===Object.keys(m).length,J.isNumber=m=>"number"==typeof m||"[object Number]"===Object.prototype.toString.call(m),J.isNumeric=m=>!isNaN(parseFloat(m))&&isFinite(m),J.isObject=m=>"[object Object]"===Object.prototype.toString.call(m),J.isString=m=>"string"==typeof m||"[object String]"===Object.prototype.toString.call(m),J.isUndefined=m=>typeof m>"u"},2651:(te,J,m)=>{"use strict";const E=m(8254),b={};te.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(A,k)=>{const g={},y=b.parsers[k||"full"],M=y.regex.exec(A);let j=y.keys.length;for(;j--;)g[y.keys[j]]=void 0===M[j]?null:M[j];return("https"===g.scheme&&"443"===g.port||"http"===g.scheme&&"80"===g.port)&&(g.href=g.href.replace(":"+g.port,""),g.authority=g.authority.replace(":"+g.port,""),g.port=null),g.normalizedPath=b.removeDotSegments(g.path),g},b.prependBase=(A,k)=>{if(null===A||b.isAbsolute(k))return k;(!A||E.isString(A))&&(A=b.parse(A||""));const g=b.parse(k),y={protocol:A.protocol||""};if(null!==g.authority)y.authority=g.authority,y.path=g.path,y.query=g.query;else if(y.authority=A.authority,""===g.path)y.path=A.path,y.query=null!==g.query?g.query:A.query;else{if(0===g.path.indexOf("/"))y.path=g.path;else{let j=A.path;j=j.substr(0,j.lastIndexOf("/")+1),(j.length>0||A.authority)&&"/"!==j.substr(-1)&&(j+="/"),j+=g.path,y.path=j}y.query=g.query}""!==g.path&&(y.path=b.removeDotSegments(y.path));let M=y.protocol;return null!==y.authority&&(M+="//"+y.authority),M+=y.path,null!==y.query&&(M+="?"+y.query),null!==g.fragment&&(M+="#"+g.fragment),""===M&&(M="./"),M},b.removeBase=(A,k)=>{if(null===A)return k;(!A||E.isString(A))&&(A=b.parse(A||""));let g="";if(""!==A.href?g+=(A.protocol||"")+"//"+(A.authority||""):k.indexOf("//")&&(g+="//"),0!==k.indexOf(g))return k;const y=b.parse(k.substr(g.length)),M=A.normalizedPath.split("/"),j=y.normalizedPath.split("/"),N=y.fragment||y.query?0:1;for(;M.length>0&&j.length>N&&M[0]===j[0];)M.shift(),j.shift();let U="";if(M.length>0){M.pop();for(let ce=0;ce<M.length;++ce)U+="../"}return U+=j.join("/"),null!==y.query&&(U+="?"+y.query),null!==y.fragment&&(U+="#"+y.fragment),""===U&&(U="./"),U},b.removeDotSegments=A=>{if(0===A.length)return"";const k=A.split("/"),g=[];for(;k.length>0;){const y=k.shift(),M=0===k.length;"."!==y?".."!==y?g.push(y):(g.pop(),M&&g.push("")):M&&g.push("")}return"/"===A[0]&&g.length>0&&""!==g[0]&&g.unshift(""),1===g.length&&""===g[0]?"/":g.join("/")};const D=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=A=>E.isString(A)&&D.test(A),b.isRelative=A=>E.isString(A)},3521:(te,J,m)=>{"use strict";const E=m(543),b=m(8254),D=m(1986).IdentifierIssuer,A=m(1874),g=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,y=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,M=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,N_headers_accept="application/ld+json, application/json",U={};function ce(R,$){if(b.isArray($))for(let ae=0;ae<$.length;++ae)$[ae]=ce(R,$[ae]);else if(E.isList($))$["@list"]=ce(R,$["@list"]);else if(b.isObject($)){E.isBlankNode($)&&($["@id"]=R.getId($["@id"]));const ae=Object.keys($).sort();for(let Y=0;Y<ae.length;++Y){const re=ae[Y];"@id"!==re&&($[re]=ce(R,$[re]))}}return $}te.exports=U,U.IdentifierIssuer=D,U.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,U.REGEX_KEYWORD=/^@[a-zA-Z]+$/,U.clone=function(R){if(R&&"object"==typeof R){let $;if(b.isArray(R)){$=[];for(let ae=0;ae<R.length;++ae)$[ae]=U.clone(R[ae])}else if(R instanceof Map){$=new Map;for(const[ae,Y]of R)$.set(ae,U.clone(Y))}else if(R instanceof Set){$=new Set;for(const ae of R)$.add(U.clone(ae))}else if(b.isObject(R)){$={};for(const ae in R)$[ae]=U.clone(R[ae])}else $=R.toString();return $}return R},U.asArray=function(R){return Array.isArray(R)?R:[R]},U.buildHeaders=(R={})=>{if(Object.keys(R).some(ae=>"accept"===ae.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+N_headers_accept+'" is supported.');return Object.assign({Accept:N_headers_accept},R)},U.parseLinkHeader=R=>{const $={},ae=R.match(g);for(let Y=0;Y<ae.length;++Y){let re=ae[Y].match(y);if(!re)continue;const ne={target:re[1]},W=re[2];for(;re=M.exec(W);)ne[re[1]]=void 0===re[2]?re[3]:re[2];const z=ne.rel||"";Array.isArray($[z])?$[z].push(ne):$[z]=$.hasOwnProperty(z)?[$[z],ne]:ne}return $},U.validateTypeValue=(R,$)=>{if(!(b.isString(R)||b.isArray(R)&&R.every(ae=>b.isString(ae)))){if($&&b.isObject(R))switch(Object.keys(R).length){case 0:return;case 1:if("@default"in R&&U.asArray(R["@default"]).every(ae=>b.isString(ae)))return}throw new A('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:R})}},U.hasProperty=(R,$)=>{if(R.hasOwnProperty($)){const ae=R[$];return!b.isArray(ae)||ae.length>0}return!1},U.hasValue=(R,$,ae)=>{if(U.hasProperty(R,$)){let Y=R[$];const re=E.isList(Y);if(b.isArray(Y)||re){re&&(Y=Y["@list"]);for(let ne=0;ne<Y.length;++ne)if(U.compareValues(ae,Y[ne]))return!0}else if(!b.isArray(ae))return U.compareValues(ae,Y)}return!1},U.addValue=(R,$,ae,Y)=>{if("propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1),"valueIsArray"in Y||(Y.valueIsArray=!1),"allowDuplicate"in Y||(Y.allowDuplicate=!0),"prependValue"in Y||(Y.prependValue=!1),Y.valueIsArray)R[$]=ae;else if(b.isArray(ae)){0===ae.length&&Y.propertyIsArray&&!R.hasOwnProperty($)&&(R[$]=[]),Y.prependValue&&(ae=ae.concat(R[$]),R[$]=[]);for(let re=0;re<ae.length;++re)U.addValue(R,$,ae[re],Y)}else if(R.hasOwnProperty($)){const re=!Y.allowDuplicate&&U.hasValue(R,$,ae);!b.isArray(R[$])&&(!re||Y.propertyIsArray)&&(R[$]=[R[$]]),re||(Y.prependValue?R[$].unshift(ae):R[$].push(ae))}else R[$]=Y.propertyIsArray?[ae]:ae},U.getValues=(R,$)=>[].concat(R[$]||[]),U.removeProperty=(R,$)=>{delete R[$]},U.removeValue=(R,$,ae,Y)=>{"propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1);const re=U.getValues(R,$).filter(ne=>!U.compareValues(ne,ae));0===re.length?U.removeProperty(R,$):R[$]=1!==re.length||Y.propertyIsArray?re:re[0]},U.relabelBlankNodes=(R,$)=>ce(($=$||{}).issuer||new D("_:b"),R),U.compareValues=(R,$)=>!!(R===$||E.isValue(R)&&E.isValue($)&&R["@value"]===$["@value"]&&R["@type"]===$["@type"]&&R["@language"]===$["@language"]&&R["@index"]===$["@index"])||!!(b.isObject(R)&&"@id"in R&&b.isObject($)&&"@id"in $)&&R["@id"]===$["@id"],U.compareShortestLeast=(R,$)=>R.length<$.length?-1:$.length<R.length?1:R===$?0:R<$?-1:1},5041:te=>{"use strict";te.exports=function J(m){return null===m||"object"!=typeof m||null!=m.toJSON?JSON.stringify(m):Array.isArray(m)?"["+m.reduce((E,b,D)=>E+(0===D?"":",")+J(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(m).sort().reduce((E,b,D)=>void 0===m[b]||"symbol"==typeof m[b]?E:E+(0===E.length?"":",")+J(b)+":"+J(m[b]),"")+"}"}},1072:(te,J,m)=>{"use strict";const E=m(4439),b=Symbol("max"),D=Symbol("length"),A=Symbol("lengthCalculator"),k=Symbol("allowStale"),g=Symbol("maxAge"),y=Symbol("dispose"),M=Symbol("noDisposeOnSet"),j=Symbol("lruList"),N=Symbol("cache"),U=Symbol("updateAgeOnGet"),ce=()=>1,$=(z,v,L)=>{const T=z[N].get(v);if(T){const he=T.value;if(ae(z,he)){if(re(z,T),!z[k])return}else L&&(z[U]&&(T.value.now=Date.now()),z[j].unshiftNode(T));return he.value}},ae=(z,v)=>{if(!v||!v.maxAge&&!z[g])return!1;const L=Date.now()-v.now;return v.maxAge?L>v.maxAge:z[g]&&L>z[g]},Y=z=>{if(z[D]>z[b])for(let v=z[j].tail;z[D]>z[b]&&null!==v;){const L=v.prev;re(z,v),v=L}},re=(z,v)=>{if(v){const L=v.value;z[y]&&z[y](L.key,L.value),z[D]-=L.length,z[N].delete(L.key),z[j].removeNode(v)}};class ne{constructor(v,L,T,he,H){this.key=v,this.value=L,this.length=T,this.now=he,this.maxAge=H||0}}const W=(z,v,L,T)=>{let he=L.value;ae(z,he)&&(re(z,L),z[k]||(he=void 0)),he&&v.call(T,he.value,he.key,z)};te.exports=class R{constructor(v){if("number"==typeof v&&(v={max:v}),v||(v={}),v.max&&("number"!=typeof v.max||v.max<0))throw new TypeError("max must be a non-negative number");this[b]=v.max||1/0;const T=v.length||ce;if(this[A]="function"!=typeof T?ce:T,this[k]=v.stale||!1,v.maxAge&&"number"!=typeof v.maxAge)throw new TypeError("maxAge must be a number");this[g]=v.maxAge||0,this[y]=v.dispose,this[M]=v.noDisposeOnSet||!1,this[U]=v.updateAgeOnGet||!1,this.reset()}set max(v){if("number"!=typeof v||v<0)throw new TypeError("max must be a non-negative number");this[b]=v||1/0,Y(this)}get max(){return this[b]}set allowStale(v){this[k]=!!v}get allowStale(){return this[k]}set maxAge(v){if("number"!=typeof v)throw new TypeError("maxAge must be a non-negative number");this[g]=v,Y(this)}get maxAge(){return this[g]}set lengthCalculator(v){"function"!=typeof v&&(v=ce),v!==this[A]&&(this[A]=v,this[D]=0,this[j].forEach(L=>{L.length=this[A](L.value,L.key),this[D]+=L.length})),Y(this)}get lengthCalculator(){return this[A]}get length(){return this[D]}get itemCount(){return this[j].length}rforEach(v,L){L=L||this;for(let T=this[j].tail;null!==T;){const he=T.prev;W(this,v,T,L),T=he}}forEach(v,L){L=L||this;for(let T=this[j].head;null!==T;){const he=T.next;W(this,v,T,L),T=he}}keys(){return this[j].toArray().map(v=>v.key)}values(){return this[j].toArray().map(v=>v.value)}reset(){this[y]&&this[j]&&this[j].length&&this[j].forEach(v=>this[y](v.key,v.value)),this[N]=new Map,this[j]=new E,this[D]=0}dump(){return this[j].map(v=>!ae(this,v)&&{k:v.key,v:v.value,e:v.now+(v.maxAge||0)}).toArray().filter(v=>v)}dumpLru(){return this[j]}set(v,L,T){if((T=T||this[g])&&"number"!=typeof T)throw new TypeError("maxAge must be a number");const he=T?Date.now():0,H=this[A](L,v);if(this[N].has(v)){if(H>this[b])return re(this,this[N].get(v)),!1;const xe=this[N].get(v).value;return this[y]&&(this[M]||this[y](v,xe.value)),xe.now=he,xe.maxAge=T,xe.value=L,this[D]+=H-xe.length,xe.length=H,this.get(v),Y(this),!0}const Ce=new ne(v,L,H,he,T);return Ce.length>this[b]?(this[y]&&this[y](v,L),!1):(this[D]+=Ce.length,this[j].unshift(Ce),this[N].set(v,this[j].head),Y(this),!0)}has(v){if(!this[N].has(v))return!1;const L=this[N].get(v).value;return!ae(this,L)}get(v){return $(this,v,!0)}peek(v){return $(this,v,!1)}pop(){const v=this[j].tail;return v?(re(this,v),v.value):null}del(v){re(this,this[N].get(v))}load(v){this.reset();const L=Date.now();for(let T=v.length-1;T>=0;T--){const he=v[T],H=he.e||0;if(0===H)this.set(he.k,he.v);else{const Ce=H-L;Ce>0&&this.set(he.k,he.v,Ce)}}}prune(){this[N].forEach((v,L)=>$(this,L,!1))}}},6506:(te,J,m)=>{var D=m(8745)(m(8492),"DataView");te.exports=D},9618:(te,J,m)=>{var E=m(5602),b=m(1499),D=m(2990),A=m(480),k=m(4469);function g(y){var M=-1,j=null==y?0:y.length;for(this.clear();++M<j;){var N=y[M];this.set(N[0],N[1])}}g.prototype.clear=E,g.prototype.delete=b,g.prototype.get=D,g.prototype.has=A,g.prototype.set=k,te.exports=g},3597:(te,J,m)=>{var E=m(9365),b=m(9343),D=m(4779),A=m(1509),k=m(7137);function g(y){var M=-1,j=null==y?0:y.length;for(this.clear();++M<j;){var N=y[M];this.set(N[0],N[1])}}g.prototype.clear=E,g.prototype.delete=b,g.prototype.get=D,g.prototype.has=A,g.prototype.set=k,te.exports=g},1136:(te,J,m)=>{var D=m(8745)(m(8492),"Map");te.exports=D},1811:(te,J,m)=>{var E=m(3413),b=m(5419),D=m(7253),A=m(1115),k=m(6648);function g(y){var M=-1,j=null==y?0:y.length;for(this.clear();++M<j;){var N=y[M];this.set(N[0],N[1])}}g.prototype.clear=E,g.prototype.delete=b,g.prototype.get=D,g.prototype.has=A,g.prototype.set=k,te.exports=g},641:(te,J,m)=>{var D=m(8745)(m(8492),"Promise");te.exports=D},1732:(te,J,m)=>{var D=m(8745)(m(8492),"Set");te.exports=D},5960:(te,J,m)=>{var E=m(1811),b=m(6151),D=m(2154);function A(k){var g=-1,y=null==k?0:k.length;for(this.__data__=new E;++g<y;)this.add(k[g])}A.prototype.add=A.prototype.push=b,A.prototype.has=D,te.exports=A},1339:(te,J,m)=>{var E=m(3597),b=m(9488),D=m(5943),A=m(5456),k=m(4793),g=m(8689);function y(M){var j=this.__data__=new E(M);this.size=j.size}y.prototype.clear=b,y.prototype.delete=D,y.prototype.get=A,y.prototype.has=k,y.prototype.set=g,te.exports=y},1763:(te,J,m)=>{var E=m(8492);te.exports=E.Symbol},2760:(te,J,m)=>{var E=m(8492);te.exports=E.Uint8Array},6413:(te,J,m)=>{var D=m(8745)(m(8492),"WeakMap");te.exports=D},7910:te=>{te.exports=function J(m,E,b){switch(b.length){case 0:return m.call(E);case 1:return m.call(E,b[0]);case 2:return m.call(E,b[0],b[1]);case 3:return m.call(E,b[0],b[1],b[2])}return m.apply(E,b)}},2134:te=>{te.exports=function J(m,E){for(var b=-1,D=null==m?0:m.length,A=0,k=[];++b<D;){var g=m[b];E(g,b,m)&&(k[A++]=g)}return k}},1384:(te,J,m)=>{var E=m(5025),b=m(1955),D=m(2261),A=m(7525),k=m(5188),g=m(4868),M=Object.prototype.hasOwnProperty;te.exports=function j(N,U){var ce=D(N),R=!ce&&b(N),$=!ce&&!R&&A(N),ae=!ce&&!R&&!$&&g(N),Y=ce||R||$||ae,re=Y?E(N.length,String):[],ne=re.length;for(var W in N)(U||M.call(N,W))&&(!Y||!("length"==W||$&&("offset"==W||"parent"==W)||ae&&("buffer"==W||"byteLength"==W||"byteOffset"==W)||k(W,ne)))&&re.push(W);return re}},3880:te=>{te.exports=function J(m,E){for(var b=-1,D=null==m?0:m.length,A=Array(D);++b<D;)A[b]=E(m[b],b,m);return A}},7853:te=>{te.exports=function J(m,E){for(var b=-1,D=E.length,A=m.length;++b<D;)m[A+b]=E[b];return m}},5916:te=>{te.exports=function J(m,E){for(var b=-1,D=null==m?0:m.length;++b<D;)if(E(m[b],b,m))return!0;return!1}},4056:(te,J,m)=>{var E=m(7826);te.exports=function b(D,A){for(var k=D.length;k--;)if(E(D[k][0],A))return k;return-1}},5103:(te,J,m)=>{var E=m(7794),D=m(9386)(E);te.exports=D},1883:(te,J,m)=>{var E=m(7853),b=m(2241);te.exports=function D(A,k,g,y,M){var j=-1,N=A.length;for(g||(g=b),M||(M=[]);++j<N;){var U=A[j];k>0&&g(U)?k>1?D(U,k-1,g,y,M):E(M,U):y||(M[M.length]=U)}return M}},6483:(te,J,m)=>{var b=m(2086)();te.exports=b},7794:(te,J,m)=>{var E=m(6483),b=m(4614);te.exports=function D(A,k){return A&&E(A,k,b)}},2202:(te,J,m)=>{var E=m(4826),b=m(8916);te.exports=function D(A,k){for(var g=0,y=(k=E(k,A)).length;null!=A&&g<y;)A=A[b(k[g++])];return g&&g==y?A:void 0}},7427:(te,J,m)=>{var E=m(7853),b=m(2261);te.exports=function D(A,k,g){var y=k(A);return b(A)?y:E(y,g(A))}},4590:(te,J,m)=>{var E=m(1763),b=m(5933),D=m(9243),g=E?E.toStringTag:void 0;te.exports=function y(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":g&&g in Object(M)?b(M):D(M)}},3274:te=>{te.exports=function J(m,E){return null!=m&&E in Object(m)}},3022:(te,J,m)=>{var E=m(4590),b=m(3714);te.exports=function A(k){return b(k)&&"[object Arguments]"==E(k)}},7108:(te,J,m)=>{var E=m(7946),b=m(3714);te.exports=function D(A,k,g,y,M){return A===k||(null==A||null==k||!b(A)&&!b(k)?A!=A&&k!=k:E(A,k,g,y,D,M))}},7946:(te,J,m)=>{var E=m(1339),b=m(7469),D=m(1642),A=m(9462),k=m(2472),g=m(2261),y=m(7525),M=m(4868),N="[object Arguments]",U="[object Array]",ce="[object Object]",$=Object.prototype.hasOwnProperty;te.exports=function ae(Y,re,ne,W,z,v){var L=g(Y),T=g(re),he=L?U:k(Y),H=T?U:k(re),Ce=(he=he==N?ce:he)==ce,le=(H=H==N?ce:H)==ce,xe=he==H;if(xe&&y(Y)){if(!y(re))return!1;L=!0,Ce=!1}if(xe&&!Ce)return v||(v=new E),L||M(Y)?b(Y,re,ne,W,z,v):D(Y,re,he,ne,W,z,v);if(!(1&ne)){var Ie=Ce&&$.call(Y,"__wrapped__"),De=le&&$.call(re,"__wrapped__");if(Ie||De){var tt=Ie?Y.value():Y,Ye=De?re.value():re;return v||(v=new E),z(tt,Ye,ne,W,v)}}return!!xe&&(v||(v=new E),A(Y,re,ne,W,z,v))}},2527:(te,J,m)=>{var E=m(1339),b=m(7108);te.exports=function k(g,y,M,j){var N=M.length,U=N,ce=!j;if(null==g)return!U;for(g=Object(g);N--;){var R=M[N];if(ce&&R[2]?R[1]!==g[R[0]]:!(R[0]in g))return!1}for(;++N<U;){var $=(R=M[N])[0],ae=g[$],Y=R[1];if(ce&&R[2]){if(void 0===ae&&!($ in g))return!1}else{var re=new E;if(j)var ne=j(ae,Y,$,g,y,re);if(!(void 0===ne?b(Y,ae,3,j,re):ne))return!1}}return!0}},1082:(te,J,m)=>{var E=m(6861),b=m(9950),D=m(9794),A=m(7075),g=/^\[object .+?Constructor\]$/,U=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");te.exports=function ce(R){return!(!D(R)||b(R))&&(E(R)?U:g).test(A(R))}},8902:(te,J,m)=>{var E=m(4590),b=m(7765),D=m(3714),xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object Boolean]"]=xe["[object DataView]"]=xe["[object Date]"]=xe["[object Error]"]=xe["[object Function]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object WeakMap]"]=!1,te.exports=function Ie(De){return D(De)&&b(De.length)&&!!xe[E(De)]}},1627:(te,J,m)=>{var E=m(2924),b=m(8526),D=m(5657),A=m(2261),k=m(2692);te.exports=function g(y){return"function"==typeof y?y:null==y?D:"object"==typeof y?A(y)?b(y[0],y[1]):E(y):k(y)}},190:(te,J,m)=>{var E=m(6587),b=m(366),A=Object.prototype.hasOwnProperty;te.exports=function k(g){if(!E(g))return b(g);var y=[];for(var M in Object(g))A.call(g,M)&&"constructor"!=M&&y.push(M);return y}},2839:(te,J,m)=>{var E=m(5103),b=m(2447);te.exports=function D(A,k){var g=-1,y=b(A)?Array(A.length):[];return E(A,function(M,j,N){y[++g]=k(M,j,N)}),y}},2924:(te,J,m)=>{var E=m(2527),b=m(7895),D=m(2265);te.exports=function A(k){var g=b(k);return 1==g.length&&g[0][2]?D(g[0][0],g[0][1]):function(y){return y===k||E(y,k,g)}}},8526:(te,J,m)=>{var E=m(7108),b=m(5440),D=m(2494),A=m(6300),k=m(3921),g=m(2265),y=m(8916);te.exports=function N(U,ce){return A(U)&&k(ce)?g(y(U),ce):function(R){var $=b(R,U);return void 0===$&&$===ce?D(R,U):E(ce,$,3)}}},252:(te,J,m)=>{var E=m(3880),b=m(2202),D=m(1627),A=m(2839),k=m(6389),g=m(1156),y=m(9664),M=m(5657),j=m(2261);te.exports=function N(U,ce,R){ce=ce.length?E(ce,function(Y){return j(Y)?function(re){return b(re,1===Y.length?Y[0]:Y)}:Y}):[M];var $=-1;ce=E(ce,g(D));var ae=A(U,function(Y,re,ne){return{criteria:E(ce,function(z){return z(Y)}),index:++$,value:Y}});return k(ae,function(Y,re){return y(Y,re,R)})}},3400:te=>{te.exports=function J(m){return function(E){return E?.[m]}}},6443:(te,J,m)=>{var E=m(2202);te.exports=function b(D){return function(A){return E(A,D)}}},8951:(te,J,m)=>{var E=m(5657),b=m(2394),D=m(6814);te.exports=function A(k,g){return D(b(k,g,E),k+"")}},8235:(te,J,m)=>{var E=m(1075),b=m(9383),D=m(5657);te.exports=b?function(k,g){return b(k,"toString",{configurable:!0,enumerable:!1,value:E(g),writable:!0})}:D},6389:te=>{te.exports=function J(m,E){var b=m.length;for(m.sort(E);b--;)m[b]=m[b].value;return m}},5025:te=>{te.exports=function J(m,E){for(var b=-1,D=Array(m);++b<m;)D[b]=E(b);return D}},7002:(te,J,m)=>{var E=m(1763),b=m(3880),D=m(2261),A=m(3423),g=E?E.prototype:void 0,y=g?g.toString:void 0;te.exports=function M(j){if("string"==typeof j)return j;if(D(j))return b(j,M)+"";if(A(j))return y?y.call(j):"";var N=j+"";return"0"==N&&1/j==-1/0?"-0":N}},1156:te=>{te.exports=function J(m){return function(E){return m(E)}}},4795:te=>{te.exports=function J(m,E){return m.has(E)}},4826:(te,J,m)=>{var E=m(2261),b=m(6300),D=m(163),A=m(2674);te.exports=function k(g,y){return E(g)?g:b(g,y)?[g]:D(A(g))}},5400:(te,J,m)=>{var E=m(3423);te.exports=function b(D,A){if(D!==A){var k=void 0!==D,g=null===D,y=D==D,M=E(D),j=void 0!==A,N=null===A,U=A==A,ce=E(A);if(!N&&!ce&&!M&&D>A||M&&j&&U&&!N&&!ce||g&&j&&U||!k&&U||!y)return 1;if(!g&&!M&&!ce&&D<A||ce&&k&&y&&!g&&!M||N&&k&&y||!j&&y||!U)return-1}return 0}},9664:(te,J,m)=>{var E=m(5400);te.exports=function b(D,A,k){for(var g=-1,y=D.criteria,M=A.criteria,j=y.length,N=k.length;++g<j;){var U=E(y[g],M[g]);if(U)return g>=N?U:U*("desc"==k[g]?-1:1)}return D.index-A.index}},6189:(te,J,m)=>{var E=m(8492);te.exports=E["__core-js_shared__"]},9386:(te,J,m)=>{var E=m(2447);te.exports=function b(D,A){return function(k,g){if(null==k)return k;if(!E(k))return D(k,g);for(var y=k.length,M=A?y:-1,j=Object(k);(A?M--:++M<y)&&!1!==g(j[M],M,j););return k}}},2086:te=>{te.exports=function J(m){return function(E,b,D){for(var A=-1,k=Object(E),g=D(E),y=g.length;y--;){var M=g[m?y:++A];if(!1===b(k[M],M,k))break}return E}}},9383:(te,J,m)=>{var E=m(8745),b=function(){try{var D=E(Object,"defineProperty");return D({},"",{}),D}catch{}}();te.exports=b},7469:(te,J,m)=>{var E=m(5960),b=m(5916),D=m(4795);te.exports=function g(y,M,j,N,U,ce){var R=1&j,$=y.length,ae=M.length;if($!=ae&&!(R&&ae>$))return!1;var Y=ce.get(y),re=ce.get(M);if(Y&&re)return Y==M&&re==y;var ne=-1,W=!0,z=2&j?new E:void 0;for(ce.set(y,M),ce.set(M,y);++ne<$;){var v=y[ne],L=M[ne];if(N)var T=R?N(L,v,ne,M,y,ce):N(v,L,ne,y,M,ce);if(void 0!==T){if(T)continue;W=!1;break}if(z){if(!b(M,function(he,H){if(!D(z,H)&&(v===he||U(v,he,j,N,ce)))return z.push(H)})){W=!1;break}}else if(v!==L&&!U(v,L,j,N,ce)){W=!1;break}}return ce.delete(y),ce.delete(M),W}},1642:(te,J,m)=>{var E=m(1763),b=m(2760),D=m(7826),A=m(7469),k=m(1575),g=m(8e3),z=E?E.prototype:void 0,v=z?z.valueOf:void 0;te.exports=function L(T,he,H,Ce,le,xe,Ie){switch(H){case"[object DataView]":if(T.byteLength!=he.byteLength||T.byteOffset!=he.byteOffset)return!1;T=T.buffer,he=he.buffer;case"[object ArrayBuffer]":return!(T.byteLength!=he.byteLength||!xe(new b(T),new b(he)));case"[object Boolean]":case"[object Date]":case"[object Number]":return D(+T,+he);case"[object Error]":return T.name==he.name&&T.message==he.message;case"[object RegExp]":case"[object String]":return T==he+"";case"[object Map]":var De=k;case"[object Set]":if(De||(De=g),T.size!=he.size&&!(1&Ce))return!1;var Ye=Ie.get(T);if(Ye)return Ye==he;Ce|=2,Ie.set(T,he);var Ae=A(De(T),De(he),Ce,le,xe,Ie);return Ie.delete(T),Ae;case"[object Symbol]":if(v)return v.call(T)==v.call(he)}return!1}},9462:(te,J,m)=>{var E=m(6131),A=Object.prototype.hasOwnProperty;te.exports=function k(g,y,M,j,N,U){var ce=1&M,R=E(g),$=R.length;if($!=E(y).length&&!ce)return!1;for(var re=$;re--;){var ne=R[re];if(!(ce?ne in y:A.call(y,ne)))return!1}var W=U.get(g),z=U.get(y);if(W&&z)return W==y&&z==g;var v=!0;U.set(g,y),U.set(y,g);for(var L=ce;++re<$;){var T=g[ne=R[re]],he=y[ne];if(j)var H=ce?j(he,T,ne,y,g,U):j(T,he,ne,g,y,U);if(!(void 0===H?T===he||N(T,he,M,j,U):H)){v=!1;break}L||(L="constructor"==ne)}if(v&&!L){var Ce=g.constructor,le=y.constructor;Ce!=le&&"constructor"in g&&"constructor"in y&&!("function"==typeof Ce&&Ce instanceof Ce&&"function"==typeof le&&le instanceof le)&&(v=!1)}return U.delete(g),U.delete(y),v}},248:te=>{var J="object"==typeof global&&global&&global.Object===Object&&global;te.exports=J},6131:(te,J,m)=>{var E=m(7427),b=m(771),D=m(4614);te.exports=function A(k){return E(k,D,b)}},4113:(te,J,m)=>{var E=m(29);te.exports=function b(D,A){var k=D.__data__;return E(A)?k["string"==typeof A?"string":"hash"]:k.map}},7895:(te,J,m)=>{var E=m(3921),b=m(4614);te.exports=function D(A){for(var k=b(A),g=k.length;g--;){var y=k[g],M=A[y];k[g]=[y,M,E(M)]}return k}},8745:(te,J,m)=>{var E=m(1082),b=m(1015);te.exports=function D(A,k){var g=b(A,k);return E(g)?g:void 0}},5933:(te,J,m)=>{var E=m(1763),b=Object.prototype,D=b.hasOwnProperty,A=b.toString,k=E?E.toStringTag:void 0;te.exports=function g(y){var M=D.call(y,k),j=y[k];try{y[k]=void 0;var N=!0}catch{}var U=A.call(y);return N&&(M?y[k]=j:delete y[k]),U}},771:(te,J,m)=>{var E=m(2134),b=m(1315),A=Object.prototype.propertyIsEnumerable,k=Object.getOwnPropertySymbols;te.exports=k?function(y){return null==y?[]:(y=Object(y),E(k(y),function(M){return A.call(y,M)}))}:b},2472:(te,J,m)=>{var E=m(6506),b=m(1136),D=m(641),A=m(1732),k=m(6413),g=m(4590),y=m(7075),M="[object Map]",N="[object Promise]",U="[object Set]",ce="[object WeakMap]",R="[object DataView]",$=y(E),ae=y(b),Y=y(D),re=y(A),ne=y(k),W=g;(E&&W(new E(new ArrayBuffer(1)))!=R||b&&W(new b)!=M||D&&W(D.resolve())!=N||A&&W(new A)!=U||k&&W(new k)!=ce)&&(W=function(z){var v=g(z),L="[object Object]"==v?z.constructor:void 0,T=L?y(L):"";if(T)switch(T){case $:return R;case ae:return M;case Y:return N;case re:return U;case ne:return ce}return v}),te.exports=W},1015:te=>{te.exports=function J(m,E){return m?.[E]}},4583:(te,J,m)=>{var E=m(4826),b=m(1955),D=m(2261),A=m(5188),k=m(7765),g=m(8916);te.exports=function y(M,j,N){for(var U=-1,ce=(j=E(j,M)).length,R=!1;++U<ce;){var $=g(j[U]);if(!(R=null!=M&&N(M,$)))break;M=M[$]}return R||++U!=ce?R:!!(ce=null==M?0:M.length)&&k(ce)&&A($,ce)&&(D(M)||b(M))}},5602:(te,J,m)=>{var E=m(893);te.exports=function b(){this.__data__=E?E(null):{},this.size=0}},1499:te=>{te.exports=function J(m){var E=this.has(m)&&delete this.__data__[m];return this.size-=E?1:0,E}},2990:(te,J,m)=>{var E=m(893),A=Object.prototype.hasOwnProperty;te.exports=function k(g){var y=this.__data__;if(E){var M=y[g];return"__lodash_hash_undefined__"===M?void 0:M}return A.call(y,g)?y[g]:void 0}},480:(te,J,m)=>{var E=m(893),D=Object.prototype.hasOwnProperty;te.exports=function A(k){var g=this.__data__;return E?void 0!==g[k]:D.call(g,k)}},4469:(te,J,m)=>{var E=m(893);te.exports=function D(A,k){var g=this.__data__;return this.size+=this.has(A)?0:1,g[A]=E&&void 0===k?"__lodash_hash_undefined__":k,this}},2241:(te,J,m)=>{var E=m(1763),b=m(1955),D=m(2261),A=E?E.isConcatSpreadable:void 0;te.exports=function k(g){return D(g)||b(g)||!!(A&&g&&g[A])}},5188:te=>{var m=/^(?:0|[1-9]\d*)$/;te.exports=function E(b,D){var A=typeof b;return!!(D=D??9007199254740991)&&("number"==A||"symbol"!=A&&m.test(b))&&b>-1&&b%1==0&&b<D}},3817:(te,J,m)=>{var E=m(7826),b=m(2447),D=m(5188),A=m(9794);te.exports=function k(g,y,M){if(!A(M))return!1;var j=typeof y;return!!("number"==j?b(M)&&D(y,M.length):"string"==j&&y in M)&&E(M[y],g)}},6300:(te,J,m)=>{var E=m(2261),b=m(3423),D=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;te.exports=function k(g,y){if(E(g))return!1;var M=typeof g;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=g&&!b(g))||A.test(g)||!D.test(g)||null!=y&&g in Object(y)}},29:te=>{te.exports=function J(m){var E=typeof m;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==m:null===m}},9950:(te,J,m)=>{var A,E=m(6189),b=(A=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";te.exports=function D(A){return!!b&&b in A}},6587:te=>{var J=Object.prototype;te.exports=function m(E){var b=E&&E.constructor;return E===("function"==typeof b&&b.prototype||J)}},3921:(te,J,m)=>{var E=m(9794);te.exports=function b(D){return D==D&&!E(D)}},9365:te=>{te.exports=function J(){this.__data__=[],this.size=0}},9343:(te,J,m)=>{var E=m(4056),D=Array.prototype.splice;te.exports=function A(k){var g=this.__data__,y=E(g,k);return!(y<0||(y==g.length-1?g.pop():D.call(g,y,1),--this.size,0))}},4779:(te,J,m)=>{var E=m(4056);te.exports=function b(D){var A=this.__data__,k=E(A,D);return k<0?void 0:A[k][1]}},1509:(te,J,m)=>{var E=m(4056);te.exports=function b(D){return E(this.__data__,D)>-1}},7137:(te,J,m)=>{var E=m(4056);te.exports=function b(D,A){var k=this.__data__,g=E(k,D);return g<0?(++this.size,k.push([D,A])):k[g][1]=A,this}},3413:(te,J,m)=>{var E=m(9618),b=m(3597),D=m(1136);te.exports=function A(){this.size=0,this.__data__={hash:new E,map:new(D||b),string:new E}}},5419:(te,J,m)=>{var E=m(4113);te.exports=function b(D){var A=E(this,D).delete(D);return this.size-=A?1:0,A}},7253:(te,J,m)=>{var E=m(4113);te.exports=function b(D){return E(this,D).get(D)}},1115:(te,J,m)=>{var E=m(4113);te.exports=function b(D){return E(this,D).has(D)}},6648:(te,J,m)=>{var E=m(4113);te.exports=function b(D,A){var k=E(this,D),g=k.size;return k.set(D,A),this.size+=k.size==g?0:1,this}},1575:te=>{te.exports=function J(m){var E=-1,b=Array(m.size);return m.forEach(function(D,A){b[++E]=[A,D]}),b}},2265:te=>{te.exports=function J(m,E){return function(b){return null!=b&&b[m]===E&&(void 0!==E||m in Object(b))}}},7371:(te,J,m)=>{var E=m(7659);te.exports=function D(A){var k=E(A,function(y){return 500===g.size&&g.clear(),y}),g=k.cache;return k}},893:(te,J,m)=>{var b=m(8745)(Object,"create");te.exports=b},366:(te,J,m)=>{var b=m(3106)(Object.keys,Object);te.exports=b},8849:(te,J,m)=>{te=m.nmd(te);var E=m(248),b=J&&!J.nodeType&&J,D=b&&te&&!te.nodeType&&te,k=D&&D.exports===b&&E.process,g=function(){try{return D&&D.require&&D.require("util").types||k&&k.binding&&k.binding("util")}catch{}}();te.exports=g},9243:te=>{var m=Object.prototype.toString;te.exports=function E(b){return m.call(b)}},3106:te=>{te.exports=function J(m,E){return function(b){return m(E(b))}}},2394:(te,J,m)=>{var E=m(7910),b=Math.max;te.exports=function D(A,k,g){return k=b(void 0===k?A.length-1:k,0),function(){for(var y=arguments,M=-1,j=b(y.length-k,0),N=Array(j);++M<j;)N[M]=y[k+M];M=-1;for(var U=Array(k+1);++M<k;)U[M]=y[M];return U[k]=g(N),E(A,this,U)}}},8492:(te,J,m)=>{var E=m(248),b="object"==typeof self&&self&&self.Object===Object&&self,D=E||b||Function("return this")();te.exports=D},6151:te=>{te.exports=function m(E){return this.__data__.set(E,"__lodash_hash_undefined__"),this}},2154:te=>{te.exports=function J(m){return this.__data__.has(m)}},8e3:te=>{te.exports=function J(m){var E=-1,b=Array(m.size);return m.forEach(function(D){b[++E]=D}),b}},6814:(te,J,m)=>{var E=m(8235),D=m(9531)(E);te.exports=D},9531:te=>{var E=Date.now;te.exports=function b(D){var A=0,k=0;return function(){var g=E(),y=16-(g-k);if(k=g,y>0){if(++A>=800)return arguments[0]}else A=0;return D.apply(void 0,arguments)}}},9488:(te,J,m)=>{var E=m(3597);te.exports=function b(){this.__data__=new E,this.size=0}},5943:te=>{te.exports=function J(m){var E=this.__data__,b=E.delete(m);return this.size=E.size,b}},5456:te=>{te.exports=function J(m){return this.__data__.get(m)}},4793:te=>{te.exports=function J(m){return this.__data__.has(m)}},8689:(te,J,m)=>{var E=m(3597),b=m(1136),D=m(1811);te.exports=function k(g,y){var M=this.__data__;if(M instanceof E){var j=M.__data__;if(!b||j.length<199)return j.push([g,y]),this.size=++M.size,this;M=this.__data__=new D(j)}return M.set(g,y),this.size=M.size,this}},163:(te,J,m)=>{var E=m(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D=/\\(\\)?/g,A=E(function(k){var g=[];return 46===k.charCodeAt(0)&&g.push(""),k.replace(b,function(y,M,j,N){g.push(j?N.replace(D,"$1"):M||y)}),g});te.exports=A},8916:(te,J,m)=>{var E=m(3423);te.exports=function D(A){if("string"==typeof A||E(A))return A;var k=A+"";return"0"==k&&1/A==-1/0?"-0":k}},7075:te=>{var m=Function.prototype.toString;te.exports=function E(b){if(null!=b){try{return m.call(b)}catch{}try{return b+""}catch{}}return""}},1075:te=>{te.exports=function J(m){return function(){return m}}},7826:te=>{te.exports=function J(m,E){return m===E||m!=m&&E!=E}},5440:(te,J,m)=>{var E=m(2202);te.exports=function b(D,A,k){var g=null==D?void 0:E(D,A);return void 0===g?k:g}},2494:(te,J,m)=>{var E=m(3274),b=m(4583);te.exports=function D(A,k){return null!=A&&b(A,k,E)}},5657:te=>{te.exports=function J(m){return m}},1955:(te,J,m)=>{var E=m(3022),b=m(3714),D=Object.prototype,A=D.hasOwnProperty,k=D.propertyIsEnumerable,g=E(function(){return arguments}())?E:function(y){return b(y)&&A.call(y,"callee")&&!k.call(y,"callee")};te.exports=g},2261:te=>{te.exports=Array.isArray},2447:(te,J,m)=>{var E=m(6861),b=m(7765);te.exports=function D(A){return null!=A&&b(A.length)&&!E(A)}},7525:(te,J,m)=>{te=m.nmd(te);var E=m(8492),b=m(5706),D=J&&!J.nodeType&&J,A=D&&te&&!te.nodeType&&te,g=A&&A.exports===D?E.Buffer:void 0;te.exports=(g?g.isBuffer:void 0)||b},6030:(te,J,m)=>{var b=m(8492).isFinite;te.exports=function D(A){return"number"==typeof A&&b(A)}},6861:(te,J,m)=>{var E=m(4590),b=m(9794);te.exports=function y(M){if(!b(M))return!1;var j=E(M);return"[object Function]"==j||"[object GeneratorFunction]"==j||"[object AsyncFunction]"==j||"[object Proxy]"==j}},7765:te=>{te.exports=function m(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},9794:te=>{te.exports=function J(m){var E=typeof m;return null!=m&&("object"==E||"function"==E)}},3714:te=>{te.exports=function J(m){return null!=m&&"object"==typeof m}},3423:(te,J,m)=>{var E=m(4590),b=m(3714);te.exports=function A(k){return"symbol"==typeof k||b(k)&&"[object Symbol]"==E(k)}},4868:(te,J,m)=>{var E=m(8902),b=m(1156),D=m(8849),A=D&&D.isTypedArray,k=A?b(A):E;te.exports=k},4614:(te,J,m)=>{var E=m(1384),b=m(190),D=m(2447);te.exports=function A(k){return D(k)?E(k):b(k)}},6990:function(te,J,m){var E;te=m.nmd(te),function(){var b,g="Expected a function",M="__lodash_hash_undefined__",N="__lodash_placeholder__",v=32,T=128,Ae=1/0,Ne=9007199254740991,me=4294967295,rt=[["ary",T],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",v],["partialRight",64],["rearg",256]],Qe="[object Arguments]",ge="[object Array]",I="[object Boolean]",se="[object Date]",Fe="[object Error]",Ve="[object Function]",pe="[object GeneratorFunction]",Z="[object Map]",G="[object Number]",O="[object Object]",ue="[object Promise]",He="[object RegExp]",Ke="[object Set]",ut="[object String]",Rt="[object Symbol]",Vt="[object WeakMap]",Re="[object ArrayBuffer]",q="[object DataView]",S="[object Float32Array]",oe="[object Float64Array]",We="[object Int8Array]",Je="[object Int16Array]",st="[object Int32Array]",$t="[object Uint8Array]",on="[object Uint8ClampedArray]",Gn="[object Uint16Array]",Wn="[object Uint32Array]",In=/\b__p \+= '';/g,To=/\b(__p \+=) '' \+/g,jr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mo=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,Ur=RegExp(Mo.source),ms=RegExp(Zi.source),Ns=/<%-([\s\S]+?)%>/g,Io=/<%([\s\S]+?)%>/g,fo=/<%=([\s\S]+?)%>/g,Pd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xu=/^\w*$/,Ku=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bc=/[\\^$.*+?()[\]{}|]/g,sc=RegExp(Bc.source),jc=/^\s+/,qu=/\s/,Uc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vc=/\{\n\/\* \[wrapped with (.+)\] \*/,Nd=/,? & /,zc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fd=/[()=,{}\[\]\/\s]/,Pl=/\\(\\)?/g,Nl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hc=/\w*$/,wi=/^[-+]0x[0-9a-f]+$/i,ac=/^0b[01]+$/i,Ei=/^\[object .+?Constructor\]$/,Ia=/^0o[0-7]+$/i,Da=/^(?:0|[1-9]\d*)$/,cc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Do=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Le="\\u2700-\\u27bf",$e="a-z\\xdf-\\xf6\\xf8-\\xff",en="A-Z\\xc0-\\xd6\\xd8-\\xde",gn="\\ufe0e\\ufe0f",po="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mo="["+Me+"]",Gc="["+po+"]",ta="["+fe+"]",Vr="\\d+",Ro="["+Le+"]",lc="["+$e+"]",Fl="[^"+Me+po+Vr+Le+$e+en+"]",Fs="\\ud83c[\\udffb-\\udfff]",go="[^"+Me+"]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+en+"]",ht="(?:"+lc+"|"+Fl+")",Pt="(?:"+Ue+"|"+Fl+")",Nt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$n="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ri="(?:"+ta+"|"+Fs+")?",vr="["+gn+"]?",Bf=vr+ri+"(?:\\u200d(?:"+[go,qt,Oe].join("|")+")"+vr+ri+")*",Hg="(?:"+[Ro,qt,Oe].join("|")+")"+Bf,gN="(?:"+[go+ta+"?",ta,qt,Oe,mo].join("|")+")",X0=RegExp("['\u2019]","g"),Mt=RegExp(ta,"g"),Ld=RegExp(Fs+"(?="+Fs+")|"+gN+Bf,"g"),Fn=RegExp([Ue+"?"+lc+"+"+Nt+"(?="+[Gc,Ue,"$"].join("|")+")",Pt+"+"+$n+"(?="+[Gc,Ue+ht,"$"].join("|")+")",Ue+"?"+ht+"+"+Nt,Ue+"+"+$n,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vr,Hg].join("|"),"g"),Ii=RegExp("[\\u200d"+Me+fe+gn+"]"),nS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_N=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],iS=-1,Ui={};Ui[S]=Ui[oe]=Ui[We]=Ui[Je]=Ui[st]=Ui[$t]=Ui[on]=Ui[Gn]=Ui[Wn]=!0,Ui[Qe]=Ui[ge]=Ui[Re]=Ui[I]=Ui[q]=Ui[se]=Ui[Fe]=Ui[Ve]=Ui[Z]=Ui[G]=Ui[O]=Ui[He]=Ui[Ke]=Ui[ut]=Ui[Vt]=!1;var ci={};ci[Qe]=ci[ge]=ci[Re]=ci[q]=ci[I]=ci[se]=ci[S]=ci[oe]=ci[We]=ci[Je]=ci[st]=ci[Z]=ci[G]=ci[O]=ci[He]=ci[Ke]=ci[ut]=ci[Rt]=ci[$t]=ci[on]=ci[Gn]=ci[Wn]=!0,ci[Fe]=ci[Ve]=ci[Vt]=!1;var Ll={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vN=parseFloat,xN=parseInt,oS="object"==typeof global&&global&&global.Object===Object&&global,wN="object"==typeof self&&self&&self.Object===Object&&self,io=oS||wN||Function("return this")(),sS=J&&!J.nodeType&&J,Ju=sS&&te&&!te.nodeType&&te,aS=Ju&&Ju.exports===sS,Jo=aS&&oS.process,mn=function(){try{return Ju&&Ju.require&&Ju.require("util").types||Jo&&Jo.binding&&Jo.binding("util")}catch{}}(),cS=mn&&mn.isArrayBuffer,lS=mn&&mn.isDate,dS=mn&&mn.isMap,Et=mn&&mn.isRegExp,uS=mn&&mn.isSet,sn=mn&&mn.isTypedArray;function _o(ct,xt,_t){switch(_t.length){case 0:return ct.call(xt);case 1:return ct.call(xt,_t[0]);case 2:return ct.call(xt,_t[0],_t[1]);case 3:return ct.call(xt,_t[0],_t[1],_t[2])}return ct.apply(xt,_t)}function hS(ct,xt,_t,Jt){for(var Bn=-1,Si=null==ct?0:ct.length;++Bn<Si;){var ur=ct[Bn];xt(Jt,ur,_t(ur),ct)}return Jt}function gs(ct,xt){for(var _t=-1,Jt=null==ct?0:ct.length;++_t<Jt&&!1!==xt(ct[_t],_t,ct););return ct}function fS(ct,xt){for(var _t=null==ct?0:ct.length;_t--&&!1!==xt(ct[_t],_t,ct););return ct}function Zu(ct,xt){for(var _t=-1,Jt=null==ct?0:ct.length;++_t<Jt;)if(!xt(ct[_t],_t,ct))return!1;return!0}function na(ct,xt){for(var _t=-1,Jt=null==ct?0:ct.length,Bn=0,Si=[];++_t<Jt;){var ur=ct[_t];xt(ur,_t,ct)&&(Si[Bn++]=ur)}return Si}function Bd(ct,xt){return!(null==ct||!ct.length)&&Wc(ct,xt,0)>-1}function jf(ct,xt,_t){for(var Jt=-1,Bn=null==ct?0:ct.length;++Jt<Bn;)if(_t(xt,ct[Jt]))return!0;return!1}function rr(ct,xt){for(var _t=-1,Jt=null==ct?0:ct.length,Bn=Array(Jt);++_t<Jt;)Bn[_t]=xt(ct[_t],_t,ct);return Bn}function Ln(ct,xt){for(var _t=-1,Jt=xt.length,Bn=ct.length;++_t<Jt;)ct[Bn+_t]=xt[_t];return ct}function Qu(ct,xt,_t,Jt){var Bn=-1,Si=null==ct?0:ct.length;for(Jt&&Si&&(_t=ct[++Bn]);++Bn<Si;)_t=xt(_t,ct[Bn],Bn,ct);return _t}function K0(ct,xt,_t,Jt){var Bn=null==ct?0:ct.length;for(Jt&&Bn&&(_t=ct[--Bn]);Bn--;)_t=xt(_t,ct[Bn],Bn,ct);return _t}function bo(ct,xt){for(var _t=-1,Jt=null==ct?0:ct.length;++_t<Jt;)if(xt(ct[_t],_t,ct))return!0;return!1}var q0=Yg("length");function pS(ct,xt,_t){var Jt;return _t(ct,function(Bn,Si,ur){if(xt(Bn,Si,ur))return Jt=Si,!1}),Jt}function Gg(ct,xt,_t,Jt){for(var Bn=ct.length,Si=_t+(Jt?1:-1);Jt?Si--:++Si<Bn;)if(xt(ct[Si],Si,ct))return Si;return-1}function Wc(ct,xt,_t){return xt==xt?function yS(ct,xt,_t){for(var Jt=_t-1,Bn=ct.length;++Jt<Bn;)if(ct[Jt]===xt)return Jt;return-1}(ct,xt,_t):Gg(ct,$g,_t)}function Wg(ct,xt,_t,Jt){for(var Bn=_t-1,Si=ct.length;++Bn<Si;)if(Jt(ct[Bn],xt))return Bn;return-1}function $g(ct){return ct!=ct}function Uf(ct,xt){var _t=null==ct?0:ct.length;return _t?J0(ct,xt)/_t:NaN}function Yg(ct){return function(xt){return null==xt?b:xt[ct]}}function eh(ct){return function(xt){return null==ct?b:ct[xt]}}function mS(ct,xt,_t,Jt,Bn){return Bn(ct,function(Si,ur,Li){_t=Jt?(Jt=!1,Si):xt(_t,Si,ur,Li)}),_t}function J0(ct,xt){for(var _t,Jt=-1,Bn=ct.length;++Jt<Bn;){var Si=xt(ct[Jt]);Si!==b&&(_t=_t===b?Si:_t+Si)}return _t}function Z0(ct,xt){for(var _t=-1,Jt=Array(ct);++_t<ct;)Jt[_t]=xt(_t);return Jt}function jd(ct){return ct&&ct.slice(0,ia(ct)+1).replace(jc,"")}function Oo(ct){return function(xt){return ct(xt)}}function Ud(ct,xt){return rr(xt,function(_t){return ct[_t]})}function th(ct,xt){return ct.has(xt)}function Q0(ct,xt){for(var _t=-1,Jt=ct.length;++_t<Jt&&Wc(xt,ct[_t],0)>-1;);return _t}function ev(ct,xt){for(var _t=ct.length;_t--&&Wc(xt,ct[_t],0)>-1;);return _t}var Vd=eh({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),gS=eh({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $c(ct){return"\\"+Ll[ct]}function nt(ct){return Ii.test(ct)}function zd(ct){var xt=-1,_t=Array(ct.size);return ct.forEach(function(Jt,Bn){_t[++xt]=[Bn,Jt]}),_t}function Vf(ct,xt){return function(_t){return ct(xt(_t))}}function Ls(ct,xt){for(var _t=-1,Jt=ct.length,Bn=0,Si=[];++_t<Jt;){var ur=ct[_t];(ur===xt||ur===N)&&(ct[_t]=N,Si[Bn++]=_t)}return Si}function zf(ct){var xt=-1,_t=Array(ct.size);return ct.forEach(function(Jt){_t[++xt]=Jt}),_t}function uc(ct){return nt(ct)?function Hf(ct){for(var xt=Ld.lastIndex=0;Ld.test(ct);)++xt;return xt}(ct):q0(ct)}function Sr(ct){return nt(ct)?function Xg(ct){return ct.match(Ld)||[]}(ct):function EN(ct){return ct.split("")}(ct)}function ia(ct){for(var xt=ct.length;xt--&&qu.test(ct.charAt(xt)););return xt}var Ai=eh({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Bs=function ct(xt){var u,_t=(xt=null==xt?io:Bs.defaults(io.Object(),xt,Bs.pick(io,_N))).Array,Jt=xt.Date,Bn=xt.Error,Si=xt.Function,ur=xt.Math,Li=xt.Object,Gf=xt.RegExp,vS=xt.String,_s=xt.TypeError,Wf=_t.prototype,yo=Li.prototype,$f=xt["__core-js_shared__"],nh=Si.prototype.toString,Di=yo.hasOwnProperty,wS=0,rv=(u=/[^.]+$/.exec($f&&$f.keys&&$f.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Yf=yo.toString,ov=nh.call(Li),ES=io._,AS=Gf("^"+nh.call(Di).replace(Bc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xf=aS?xt.Buffer:b,An=xt.Symbol,Kf=xt.Uint8Array,sv=Xf?Xf.allocUnsafe:b,qf=Vf(Li.getPrototypeOf,Li),ln=Li.create,av=yo.propertyIsEnumerable,ih=Wf.splice,jt=An?An.isConcatSpreadable:b,Or=An?An.iterator:b,Qn=An?An.toStringTag:b,kr=function(){try{var u=ru(Li,"defineProperty");return u({},"",{}),u}catch{}}(),ko=xt.clearTimeout!==io.clearTimeout&&xt.clearTimeout,Hd=Jt&&Jt.now!==io.Date.now&&Jt.now,bs=xt.setTimeout!==io.setTimeout&&xt.setTimeout,rh=ur.ceil,oh=ur.floor,Gd=Li.getOwnPropertySymbols,SS=Xf?Xf.isBuffer:b,cv=xt.isFinite,Cr=Wf.join,Kt=Vf(Li.keys,Li),fn=ur.max,oi=ur.min,ra=Jt.now,sh=xt.parseInt,ro=ur.random,Wd=Wf.reverse,hr=ru(xt,"DataView"),js=ru(xt,"Map"),Yc=ru(xt,"Promise"),Sn=ru(xt,"Set"),hc=ru(xt,"WeakMap"),$d=ru(Li,"create"),fc=hc&&new hc,Xi={},ah=cu(hr),Yd=cu(js),Ra=cu(Yc),ch=cu(Sn),lv=cu(hc),oa=An?An.prototype:b,ys=oa?oa.valueOf:b,lh=oa?oa.toString:b;function Pe(u){if(fr(u)&&!Yn(u)&&!(u instanceof ui)){if(u instanceof Zo)return u;if(Di.call(u,"__wrapped__"))return eC(u)}return new Zo(u)}var Jn=function(){function u(){}return function(f){if(!Hi(f))return{};if(ln)return ln(f);u.prototype=f;var w=new u;return u.prototype=b,w}}();function qg(){}function Zo(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=b}function ui(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function sa(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var ee=u[f];this.set(ee[0],ee[1])}}function Po(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var ee=u[f];this.set(ee[0],ee[1])}}function Xc(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var ee=u[f];this.set(ee[0],ee[1])}}function Kd(u){var f=-1,w=null==u?0:u.length;for(this.__data__=new Xc;++f<w;)this.add(u[f])}function ka(u){var f=this.__data__=new Po(u);this.size=f.size}function Qg(u,f){var w=Yn(u),ee=!w&&Yl(u),Ee=!w&&!ee&&yc(u),Be=!w&&!ee&&!Ee&&pa(u),et=w||ee||Ee||Be,it=et?Z0(u.length,vS):[],lt=it.length;for(var At in u)(f||Di.call(u,At))&&(!et||!("length"==At||Ee&&("offset"==At||"parent"==At)||Be&&("buffer"==At||"byteLength"==At||"byteOffset"==At)||ja(At,lt)))&&it.push(At);return it}function e_(u){var f=u.length;return f?u[lp(0,f-1)]:b}function LN(u,f){return bc(Eo(u),Bl(f,0,u.length))}function BN(u){return bc(Eo(u))}function dv(u,f,w){(w!==b&&!rs(u[f],w)||w===b&&!(f in u))&&pc(u,f,w)}function ca(u,f,w){var ee=u[f];(!Di.call(u,f)||!rs(ee,w)||w===b&&!(f in u))&&pc(u,f,w)}function dh(u,f){for(var w=u.length;w--;)if(rs(u[w][0],f))return w;return-1}function jN(u,f,w,ee){return mc(u,function(Ee,Be,et){f(ee,Ee,w(Ee),et)}),ee}function Qf(u,f){return u&&ha(f,Hr(f),u)}function pc(u,f,w){"__proto__"==f&&kr?kr(u,f,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[f]=w}function t_(u,f){for(var w=-1,ee=f.length,Ee=_t(ee),Be=null==u;++w<ee;)Ee[w]=Be?b:G_(u,f[w]);return Ee}function Bl(u,f,w){return u==u&&(w!==b&&(u=u<=w?u:w),f!==b&&(u=u>=f?u:f)),u}function la(u,f,w,ee,Ee,Be){var et,it=1&f,lt=2&f,At=4&f;if(w&&(et=Ee?w(u,ee,Ee,Be):w(u)),et!==b)return et;if(!Hi(u))return u;var St=Yn(u);if(St){if(et=function Bv(u){var f=u.length,w=new u.constructor(f);return f&&"string"==typeof u[0]&&Di.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!it)return Eo(u,et)}else{var Ot=Qi(u),Yt=Ot==Ve||Ot==pe;if(yc(u))return Av(u,it);if(Ot==O||Ot==Qe||Yt&&!Ee){if(et=lt||Yt?{}:_h(u),!it)return lt?function Tv(u,f){return ha(u,Lv(u),f)}(u,function uv(u,f){return u&&ha(f,Uo(f),u)}(et,u)):function Cv(u,f){return ha(u,vp(u),f)}(u,Qf(et,u))}else{if(!ci[Ot])return Ee?u:{};et=function g_(u,f,w){var ee=u.constructor;switch(f){case Re:return hp(u);case I:case se:return new ee(+u);case q:return function HS(u,f){var w=f?hp(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case S:case oe:case We:case Je:case st:case $t:case on:case Gn:case Wn:return fp(u,w);case Z:return new ee;case G:case ut:return new ee(u);case He:return function GS(u){var f=new u.constructor(u.source,Hc.exec(u));return f.lastIndex=u.lastIndex,f}(u);case Ke:return new ee;case Rt:return function u_(u){return ys?Li(ys.call(u)):{}}(u)}}(u,Ot,it)}}Be||(Be=new ka);var pn=Be.get(u);if(pn)return pn;Be.set(u,et),V_(u)?u.forEach(function(Cn){et.add(la(Cn,f,w,Cn,u,Be))}):Hp(u)&&u.forEach(function(Cn,li){et.set(li,la(Cn,f,w,li,u,Be))});var Ut=St?b:(At?lt?Nv:Pv:lt?Uo:Hr)(u);return gs(Ut||u,function(Cn,li){Ut&&(Cn=u[li=Cn]),ca(et,li,la(Cn,f,w,li,u,Be))}),et}function da(u,f,w){var ee=w.length;if(null==u)return!ee;for(u=Li(u);ee--;){var Ee=w[ee],et=u[Ee];if(et===b&&!(Ee in u)||!(0,f[Ee])(et))return!1}return!0}function uh(u,f,w){if("function"!=typeof u)throw new _s(g);return Va(function(){u.apply(b,w)},f)}function xr(u,f,w,ee){var Ee=-1,Be=Bd,et=!0,it=u.length,lt=[],At=f.length;if(!it)return lt;w&&(f=rr(f,Oo(w))),ee?(Be=jf,et=!1):f.length>=200&&(Be=th,et=!1,f=new Kd(f));e:for(;++Ee<it;){var St=u[Ee],Ot=null==w?St:w(St);if(St=ee||0!==St?St:0,et&&Ot==Ot){for(var Yt=At;Yt--;)if(f[Yt]===Ot)continue e;lt.push(St)}else Be(f,Ot,ee)||lt.push(St)}return lt}Pe.templateSettings={escape:Ns,evaluate:Io,interpolate:fo,variable:"",imports:{_:Pe}},(Pe.prototype=qg.prototype).constructor=Pe,(Zo.prototype=Jn(qg.prototype)).constructor=Zo,(ui.prototype=Jn(qg.prototype)).constructor=ui,sa.prototype.clear=function oo(){this.__data__=$d?$d(null):{},this.size=0},sa.prototype.delete=function CN(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},sa.prototype.get=function Qo(u){var f=this.__data__;if($d){var w=f[u];return w===M?b:w}return Di.call(f,u)?f[u]:b},sa.prototype.has=function es(u){var f=this.__data__;return $d?f[u]!==b:Di.call(f,u)},sa.prototype.set=function Jg(u,f){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=$d&&f===b?M:f,this},Po.prototype.clear=function Zf(){this.__data__=[],this.size=0},Po.prototype.delete=function aa(u){var f=this.__data__,w=dh(f,u);return!(w<0||(w==f.length-1?f.pop():ih.call(f,w,1),--this.size,0))},Po.prototype.get=function Zg(u){var f=this.__data__,w=dh(f,u);return w<0?b:f[w][1]},Po.prototype.has=function CS(u){return dh(this.__data__,u)>-1},Po.prototype.set=function TS(u,f){var w=this.__data__,ee=dh(w,u);return ee<0?(++this.size,w.push([u,f])):w[ee][1]=f,this},Xc.prototype.clear=function MS(){this.size=0,this.__data__={hash:new sa,map:new(js||Po),string:new sa}},Xc.prototype.delete=function IS(u){var f=nu(this,u).delete(u);return this.size-=f?1:0,f},Xc.prototype.get=function TN(u){return nu(this,u).get(u)},Xc.prototype.has=function MN(u){return nu(this,u).has(u)},Xc.prototype.set=function IN(u,f){var w=nu(this,u),ee=w.size;return w.set(u,f),this.size+=w.size==ee?0:1,this},Kd.prototype.add=Kd.prototype.push=function DN(u){return this.__data__.set(u,M),this},Kd.prototype.has=function RN(u){return this.__data__.has(u)},ka.prototype.clear=function ON(){this.__data__=new Po,this.size=0},ka.prototype.delete=function kN(u){var f=this.__data__,w=f.delete(u);return this.size=f.size,w},ka.prototype.get=function PN(u){return this.__data__.get(u)},ka.prototype.has=function NN(u){return this.__data__.has(u)},ka.prototype.set=function FN(u,f){var w=this.__data__;if(w instanceof Po){var ee=w.__data__;if(!js||ee.length<199)return ee.push([u,f]),this.size=++w.size,this;w=this.__data__=new Xc(ee)}return w.set(u,f),this.size=w.size,this};var mc=Mv(Pa),RS=Mv(Jd,!0);function n_(u,f){var w=!0;return mc(u,function(ee,Ee,Be){return w=!!f(ee,Ee,Be)}),w}function qd(u,f,w){for(var ee=-1,Ee=u.length;++ee<Ee;){var Be=u[ee],et=f(Be);if(null!=et&&(it===b?et==et&&!jo(et):w(et,it)))var it=et,lt=Be}return lt}function hv(u,f){var w=[];return mc(u,function(ee,Ee,Be){f(ee,Ee,Be)&&w.push(ee)}),w}function vo(u,f,w,ee,Ee){var Be=-1,et=u.length;for(w||(w=jv),Ee||(Ee=[]);++Be<et;){var it=u[Be];f>0&&w(it)?f>1?vo(it,f-1,w,ee,Ee):Ln(Ee,it):ee||(Ee[Ee.length]=it)}return Ee}var tp=Iv(),np=Iv(!0);function Pa(u,f){return u&&tp(u,f,Hr)}function Jd(u,f){return u&&np(u,f,Hr)}function ip(u,f){return na(f,function(w){return fa(u[w])})}function Zd(u,f){for(var w=0,ee=(f=wo(f,u)).length;null!=u&&w<ee;)u=u[za(f[w++])];return w&&w==ee?u:b}function OS(u,f,w){var ee=f(u);return Yn(u)?ee:Ln(ee,w(u))}function xo(u){return null==u?u===b?"[object Undefined]":"[object Null]":Qn&&Qn in Li(u)?function Fv(u){var f=Di.call(u,Qn),w=u[Qn];try{u[Qn]=b;var ee=!0}catch{}var Ee=Yf.call(u);return ee&&(f?u[Qn]=w:delete u[Qn]),Ee}(u):function Vi(u){return Yf.call(u)}(u)}function rp(u,f){return u>f}function kS(u,f){return null!=u&&Di.call(u,f)}function fv(u,f){return null!=u&&f in Li(u)}function op(u,f,w){for(var ee=w?jf:Bd,Ee=u[0].length,Be=u.length,et=Be,it=_t(Be),lt=1/0,At=[];et--;){var St=u[et];et&&f&&(St=rr(St,Oo(f))),lt=oi(St.length,lt),it[et]=!w&&(f||Ee>=120&&St.length>=120)?new Kd(et&&St):b}St=u[0];var Ot=-1,Yt=it[0];e:for(;++Ot<Ee&&At.length<lt;){var pn=St[Ot],yn=f?f(pn):pn;if(pn=w||0!==pn?pn:0,!(Yt?th(Yt,yn):ee(At,yn,w))){for(et=Be;--et;){var Ut=it[et];if(!(Ut?th(Ut,yn):ee(u[et],yn,w)))continue e}Yt&&Yt.push(yn),At.push(pn)}}return At}function hh(u,f,w){var ee=null==(u=Uv(u,f=wo(f,u)))?u:u[za(zs(f))];return null==ee?b:_o(ee,u,w)}function i_(u){return fr(u)&&xo(u)==Qe}function jl(u,f,w,ee,Ee){return u===f||(null==u||null==f||!fr(u)&&!fr(f)?u!=u&&f!=f:function FS(u,f,w,ee,Ee,Be){var et=Yn(u),it=Yn(f),lt=et?ge:Qi(u),At=it?ge:Qi(f),St=(lt=lt==Qe?O:lt)==O,Ot=(At=At==Qe?O:At)==O,Yt=lt==At;if(Yt&&yc(u)){if(!yc(f))return!1;et=!0,St=!1}if(Yt&&!St)return Be||(Be=new ka),et||pa(u)?yp(u,f,w,ee,Ee,Be):function zN(u,f,w,ee,Ee,Be,et){switch(w){case q:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Re:return!(u.byteLength!=f.byteLength||!Be(new Kf(u),new Kf(f)));case I:case se:case G:return rs(+u,+f);case Fe:return u.name==f.name&&u.message==f.message;case He:case ut:return u==f+"";case Z:var it=zd;case Ke:if(it||(it=zf),u.size!=f.size&&!(1&ee))return!1;var At=et.get(u);if(At)return At==f;ee|=2,et.set(u,f);var St=yp(it(u),it(f),ee,Ee,Be,et);return et.delete(u),St;case Rt:if(ys)return ys.call(u)==ys.call(f)}return!1}(u,f,lt,w,ee,Ee,Be);if(!(1&w)){var pn=St&&Di.call(u,"__wrapped__"),yn=Ot&&Di.call(f,"__wrapped__");if(pn||yn){var Ut=pn?u.value():u,Cn=yn?f.value():f;return Be||(Be=new ka),Ee(Ut,Cn,w,ee,Be)}}return!!Yt&&(Be||(Be=new ka),function $S(u,f,w,ee,Ee,Be){var et=1&w,it=Pv(u),lt=it.length;if(lt!=Pv(f).length&&!et)return!1;for(var Ot=lt;Ot--;){var Yt=it[Ot];if(!(et?Yt in f:Di.call(f,Yt)))return!1}var pn=Be.get(u),yn=Be.get(f);if(pn&&yn)return pn==f&&yn==u;var Ut=!0;Be.set(u,f),Be.set(f,u);for(var Cn=et;++Ot<lt;){var li=u[Yt=it[Ot]],Xn=f[Yt];if(ee)var As=et?ee(Xn,li,Yt,f,u,Be):ee(li,Xn,Yt,u,f,Be);if(!(As===b?li===Xn||Ee(li,Xn,w,ee,Be):As)){Ut=!1;break}Cn||(Cn="constructor"==Yt)}if(Ut&&!Cn){var Vo=u.constructor,Nr=f.constructor;Vo!=Nr&&"constructor"in u&&"constructor"in f&&!("function"==typeof Vo&&Vo instanceof Vo&&"function"==typeof Nr&&Nr instanceof Nr)&&(Ut=!1)}return Be.delete(u),Be.delete(f),Ut}(u,f,w,ee,Ee,Be))}(u,f,w,ee,jl,Ee))}function sp(u,f,w,ee){var Ee=w.length,Be=Ee,et=!ee;if(null==u)return!Be;for(u=Li(u);Ee--;){var it=w[Ee];if(et&&it[2]?it[1]!==u[it[0]]:!(it[0]in u))return!1}for(;++Ee<Be;){var lt=(it=w[Ee])[0],At=u[lt],St=it[1];if(et&&it[2]){if(At===b&&!(lt in u))return!1}else{var Ot=new ka;if(ee)var Yt=ee(At,St,lt,u,f,Ot);if(!(Yt===b?jl(St,At,3,ee,Ot):Yt))return!1}}return!0}function r_(u){return!(!Hi(u)||function Gl(u){return!!rv&&rv in u}(u))&&(fa(u)?AS:Ei).test(cu(u))}function No(u){return"function"==typeof u?u:null==u?ss:"object"==typeof u?Yn(u)?_v(u[0],u[1]):gv(u):_T(u)}function o_(u){if(!su(u))return Kt(u);var f=[];for(var w in Li(u))Di.call(u,w)&&"constructor"!=w&&f.push(w);return f}function Kc(u,f){return u<f}function ts(u,f){var w=-1,ee=Bo(u)?_t(u.length):[];return mc(u,function(Ee,Be,et){ee[++w]=f(Ee,Be,et)}),ee}function gv(u){var f=iu(u);return 1==f.length&&f[0][2]?au(f[0][0],f[0][1]):function(w){return w===u||sp(w,u,f)}}function _v(u,f){return Ep(u)&&__(f)?au(za(u),f):function(w){var ee=G_(w,u);return ee===b&&ee===f?pu(w,u):jl(f,ee,3)}}function cp(u,f,w,ee,Ee){u!==f&&tp(f,function(Be,et){if(Ee||(Ee=new ka),Hi(Be))!function qc(u,f,w,ee,Ee,Be,et){var it=Ua(u,w),lt=Ua(f,w),At=et.get(lt);if(At)dv(u,w,At);else{var St=Be?Be(it,lt,w+"",u,f,et):b,Ot=St===b;if(Ot){var Yt=Yn(lt),pn=!Yt&&yc(lt),yn=!Yt&&!pn&&pa(lt);St=lt,Yt||pn||yn?Yn(it)?St=it:zi(it)?St=Eo(it):pn?(Ot=!1,St=Av(lt,!0)):yn?(Ot=!1,St=fp(lt,!0)):St=[]:Sh(lt)||Yl(lt)?(St=it,Yl(it)?St=H_(it):(!Hi(it)||fa(it))&&(St=_h(lt))):Ot=!1}Ot&&(et.set(lt,St),Ee(St,lt,ee,Be,et),et.delete(lt)),dv(u,w,St)}}(u,f,et,w,cp,ee,Ee);else{var it=ee?ee(Ua(u,et),Be,et+"",u,f,Ee):b;it===b&&(it=Be),dv(u,et,it)}},Uo)}function s_(u,f){var w=u.length;if(w)return ja(f+=f<0?w:0,w)?u[f]:b}function bv(u,f,w){f=f.length?rr(f,function(Be){return Yn(Be)?function(et){return Zd(et,1===Be.length?Be[0]:Be)}:Be}):[ss];var ee=-1;return f=rr(f,Oo(bn())),function AN(ct,xt){var _t=ct.length;for(ct.sort(xt);_t--;)ct[_t]=ct[_t].value;return ct}(ts(u,function(Be,et,it){return{criteria:rr(f,function(At){return At(Be)}),index:++ee,value:Be}}),function(Be,et){return function f_(u,f,w){for(var ee=-1,Ee=u.criteria,Be=f.criteria,et=Ee.length,it=w.length;++ee<et;){var lt=h_(Ee[ee],Be[ee]);if(lt)return ee>=it?lt:lt*("desc"==w[ee]?-1:1)}return u.index-f.index}(Be,et,w)})}function a_(u,f,w){for(var ee=-1,Ee=f.length,Be={};++ee<Ee;){var et=f[ee],it=Zd(u,et);w(it,et)&&Fa(Be,wo(et,u),it)}return Be}function c_(u,f,w,ee){var Ee=ee?Wg:Wc,Be=-1,et=f.length,it=u;for(u===f&&(f=Eo(f)),w&&(it=rr(u,Oo(w)));++Be<et;)for(var lt=0,At=f[Be],St=w?w(At):At;(lt=Ee(it,St,lt,ee))>-1;)it!==u&&ih.call(it,lt,1),ih.call(u,lt,1);return u}function Dn(u,f){for(var w=u?f.length:0,ee=w-1;w--;){var Ee=f[w];if(w==ee||Ee!==Be){var Be=Ee;ja(Ee)?ih.call(u,Ee,1):Ul(u,Ee)}}return u}function lp(u,f){return u+oh(ro()*(f-u+1))}function l_(u,f){var w="";if(!u||f<1||f>Ne)return w;do{f%2&&(w+=u),(f=oh(f/2))&&(u+=u)}while(f);return w}function si(u,f){return el(Ap(u,f,ss),u+"")}function BS(u){return e_(pr(u))}function xv(u,f){var w=pr(u);return bc(w,Bl(f,0,w.length))}function Fa(u,f,w,ee){if(!Hi(u))return u;for(var Ee=-1,Be=(f=wo(f,u)).length,et=Be-1,it=u;null!=it&&++Ee<Be;){var lt=za(f[Ee]),At=w;if("__proto__"===lt||"constructor"===lt||"prototype"===lt)return u;if(Ee!=et){var St=it[lt];(At=ee?ee(St,lt,it):b)===b&&(At=Hi(St)?St:ja(f[Ee+1])?[]:{})}ca(it,lt,At),it=it[lt]}return u}var wv=fc?function(u,f){return fc.set(u,f),u}:ss,jS=kr?function(u,f){return kr(u,"toString",{configurable:!0,enumerable:!1,value:ib(f),writable:!0})}:ss;function US(u){return bc(pr(u))}function Us(u,f,w){var ee=-1,Ee=u.length;f<0&&(f=-f>Ee?0:Ee+f),(w=w>Ee?Ee:w)<0&&(w+=Ee),Ee=f>w?0:w-f>>>0,f>>>=0;for(var Be=_t(Ee);++ee<Ee;)Be[ee]=u[ee+f];return Be}function VS(u,f){var w;return mc(u,function(ee,Ee,Be){return!(w=f(ee,Ee,Be))}),!!w}function Ct(u,f,w){var ee=0,Ee=null==u?ee:u.length;if("number"==typeof f&&f==f&&Ee<=2147483647){for(;ee<Ee;){var Be=ee+Ee>>>1,et=u[Be];null!==et&&!jo(et)&&(w?et<=f:et<f)?ee=Be+1:Ee=Be}return Ee}return pi(u,f,ss,w)}function pi(u,f,w,ee){var Ee=0,Be=null==u?0:u.length;if(0===Be)return 0;for(var et=(f=w(f))!=f,it=null===f,lt=jo(f),At=f===b;Ee<Be;){var St=oh((Ee+Be)/2),Ot=w(u[St]),Yt=Ot!==b,pn=null===Ot,yn=Ot==Ot,Ut=jo(Ot);if(et)var Cn=ee||yn;else Cn=At?yn&&(ee||Yt):it?yn&&Yt&&(ee||!pn):lt?yn&&Yt&&!pn&&(ee||!Ut):!pn&&!Ut&&(ee?Ot<=f:Ot<f);Cn?Ee=St+1:Be=St}return oi(Be,4294967294)}function Tr(u,f){for(var w=-1,ee=u.length,Ee=0,Be=[];++w<ee;){var et=u[w],it=f?f(et):et;if(!w||!rs(it,lt)){var lt=it;Be[Ee++]=0===et?0:et}}return Be}function Mr(u){return"number"==typeof u?u:jo(u)?NaN:+u}function Ri(u){if("string"==typeof u)return u;if(Yn(u))return rr(u,Ri)+"";if(jo(u))return lh?lh.call(u):"";var f=u+"";return"0"==f&&1/u==-Ae?"-0":f}function gc(u,f,w){var ee=-1,Ee=Bd,Be=u.length,et=!0,it=[],lt=it;if(w)et=!1,Ee=jf;else if(Be>=200){var At=f?null:Rv(u);if(At)return zf(At);et=!1,Ee=th,lt=new Kd}else lt=f?[]:it;e:for(;++ee<Be;){var St=u[ee],Ot=f?f(St):St;if(St=w||0!==St?St:0,et&&Ot==Ot){for(var Yt=lt.length;Yt--;)if(lt[Yt]===Ot)continue e;f&&lt.push(Ot),it.push(St)}else Ee(lt,Ot,w)||(lt!==it&&lt.push(Ot),it.push(St))}return it}function Ul(u,f){return null==(u=Uv(u,f=wo(f,u)))||delete u[za(zs(f))]}function ua(u,f,w,ee){return Fa(u,f,w(Zd(u,f)),ee)}function Qd(u,f,w,ee){for(var Ee=u.length,Be=ee?Ee:-1;(ee?Be--:++Be<Ee)&&f(u[Be],Be,u););return w?Us(u,ee?0:Be,ee?Be+1:Ee):Us(u,ee?Be+1:0,ee?Ee:Be)}function dp(u,f){var w=u;return w instanceof ui&&(w=w.value()),Qu(f,function(ee,Ee){return Ee.func.apply(Ee.thisArg,Ln([ee],Ee.args))},w)}function d_(u,f,w){var ee=u.length;if(ee<2)return ee?gc(u[0]):[];for(var Ee=-1,Be=_t(ee);++Ee<ee;)for(var et=u[Ee],it=-1;++it<ee;)it!=Ee&&(Be[Ee]=xr(Be[Ee]||et,u[it],f,w));return gc(vo(Be,1),f,w)}function zS(u,f,w){for(var ee=-1,Ee=u.length,Be=f.length,et={};++ee<Ee;)w(et,u[ee],ee<Be?f[ee]:b);return et}function up(u){return zi(u)?u:[]}function so(u){return"function"==typeof u?u:ss}function wo(u,f){return Yn(u)?u:Ep(u,f)?[u]:QS(mi(u))}var Ev=si;function vs(u,f,w){var ee=u.length;return w=w===b?ee:w,!f&&w>=ee?u:Us(u,f,w)}var La=ko||function(u){return io.clearTimeout(u)};function Av(u,f){if(f)return u.slice();var w=u.length,ee=sv?sv(w):new u.constructor(w);return u.copy(ee),ee}function hp(u){var f=new u.constructor(u.byteLength);return new Kf(f).set(new Kf(u)),f}function fp(u,f){var w=f?hp(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function h_(u,f){if(u!==f){var w=u!==b,ee=null===u,Ee=u==u,Be=jo(u),et=f!==b,it=null===f,lt=f==f,At=jo(f);if(!it&&!At&&!Be&&u>f||Be&&et&&lt&&!it&&!At||ee&&et&&lt||!w&&lt||!Ee)return 1;if(!ee&&!Be&&!At&&u<f||At&&w&&Ee&&!ee&&!Be||it&&w&&Ee||!et&&Ee||!lt)return-1}return 0}function Sv(u,f,w,ee){for(var Ee=-1,Be=u.length,et=w.length,it=-1,lt=f.length,At=fn(Be-et,0),St=_t(lt+At),Ot=!ee;++it<lt;)St[it]=f[it];for(;++Ee<et;)(Ot||Ee<Be)&&(St[w[Ee]]=u[Ee]);for(;At--;)St[it++]=u[Ee++];return St}function p_(u,f,w,ee){for(var Ee=-1,Be=u.length,et=-1,it=w.length,lt=-1,At=f.length,St=fn(Be-it,0),Ot=_t(St+At),Yt=!ee;++Ee<St;)Ot[Ee]=u[Ee];for(var pn=Ee;++lt<At;)Ot[pn+lt]=f[lt];for(;++et<it;)(Yt||Ee<Be)&&(Ot[pn+w[et]]=u[Ee++]);return Ot}function Eo(u,f){var w=-1,ee=u.length;for(f||(f=_t(ee));++w<ee;)f[w]=u[w];return f}function ha(u,f,w,ee){var Ee=!w;w||(w={});for(var Be=-1,et=f.length;++Be<et;){var it=f[Be],lt=ee?ee(w[it],u[it],it,w,u):b;lt===b&&(lt=u[it]),Ee?pc(w,it,lt):ca(w,it,lt)}return w}function fh(u,f){return function(w,ee){var Ee=Yn(w)?hS:jN,Be=f?f():{};return Ee(w,u,bn(ee,2),Be)}}function Jc(u){return si(function(f,w){var ee=-1,Ee=w.length,Be=Ee>1?w[Ee-1]:b,et=Ee>2?w[2]:b;for(Be=u.length>3&&"function"==typeof Be?(Ee--,Be):b,et&&Ao(w[0],w[1],et)&&(Be=Ee<3?b:Be,Ee=1),f=Li(f);++ee<Ee;){var it=w[ee];it&&u(f,it,ee,Be)}return f})}function Mv(u,f){return function(w,ee){if(null==w)return w;if(!Bo(w))return u(w,ee);for(var Ee=w.length,Be=f?Ee:-1,et=Li(w);(f?Be--:++Be<Ee)&&!1!==ee(et[Be],Be,et););return w}}function Iv(u){return function(f,w,ee){for(var Ee=-1,Be=Li(f),et=ee(f),it=et.length;it--;){var lt=et[u?it:++Ee];if(!1===w(Be[lt],lt,Be))break}return f}}function Zc(u){return function(f){var w=nt(f=mi(f))?Sr(f):b,ee=w?w[0]:f.charAt(0),Ee=w?vs(w,1).join(""):f.slice(1);return ee[u]()+Ee}}function Bi(u){return function(f){return Qu(Zp(Rx(f).replace(X0,"")),u,"")}}function Vl(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var w=Jn(u.prototype),ee=u.apply(w,f);return Hi(ee)?ee:w}}function pp(u){return function(f,w,ee){var Ee=Li(f);if(!Bo(f)){var Be=bn(w,3);f=Hr(f),w=function(it){return Be(Ee[it],it,Ee)}}var et=u(f,w,ee);return et>-1?Ee[Be?f[et]:et]:b}}function Dv(u){return _c(function(f){var w=f.length,ee=w,Ee=Zo.prototype.thru;for(u&&f.reverse();ee--;){var Be=f[ee];if("function"!=typeof Be)throw new _s(g);if(Ee&&!et&&"wrapper"==Qc(Be))var et=new Zo([],!0)}for(ee=et?ee:w;++ee<w;){var it=Qc(Be=f[ee]),lt="wrapper"==it?gh(Be):b;et=lt&&ou(lt[0])&&424==lt[1]&&!lt[4].length&&1==lt[9]?et[Qc(lt[0])].apply(et,lt[3]):1==Be.length&&ou(Be)?et[it]():et.thru(Be)}return function(){var At=arguments,St=At[0];if(et&&1==At.length&&Yn(St))return et.plant(St).value();for(var Ot=0,Yt=w?f[Ot].apply(this,At):St;++Ot<w;)Yt=f[Ot].call(this,Yt);return Yt}})}function ph(u,f,w,ee,Ee,Be,et,it,lt,At){var St=f&T,Ot=1&f,Yt=2&f,pn=24&f,yn=512&f,Ut=Yt?b:Vl(u);return function Cn(){for(var li=arguments.length,Xn=_t(li),As=li;As--;)Xn[As]=arguments[As];if(pn)var Vo=tu(Cn),Nr=function tv(ct,xt){for(var _t=ct.length,Jt=0;_t--;)ct[_t]===xt&&++Jt;return Jt}(Xn,Vo);if(ee&&(Xn=Sv(Xn,ee,Ee,pn)),Be&&(Xn=p_(Xn,Be,et,pn)),li-=Nr,pn&&li<At){var Ir=Ls(Xn,Vo);return _p(u,f,ph,Cn.placeholder,w,Xn,Ir,it,lt,At-li)}var Ss=Ot?w:this,ol=Yt?Ss[u]:u;return li=Xn.length,it?Xn=function Vv(u,f){for(var w=u.length,ee=oi(f.length,w),Ee=Eo(u);ee--;){var Be=f[ee];u[ee]=ja(Be,w)?Ee[Be]:b}return u}(Xn,it):yn&&li>1&&Xn.reverse(),St&&lt<li&&(Xn.length=lt),this&&this!==io&&this instanceof Cn&&(ol=Ut||Vl(ol)),ol.apply(Ss,Xn)}}function m_(u,f){return function(w,ee){return function PS(u,f,w,ee){return Pa(u,function(Ee,Be,et){f(ee,w(Ee),Be,et)}),ee}(w,u,f(ee),{})}}function zl(u,f){return function(w,ee){var Ee;if(w===b&&ee===b)return f;if(w!==b&&(Ee=w),ee!==b){if(Ee===b)return ee;"string"==typeof w||"string"==typeof ee?(w=Ri(w),ee=Ri(ee)):(w=Mr(w),ee=Mr(ee)),Ee=u(w,ee)}return Ee}}function Ba(u){return _c(function(f){return f=rr(f,Oo(bn())),si(function(w){var ee=this;return u(f,function(Ee){return _o(Ee,ee,w)})})})}function mp(u,f){var w=(f=f===b?" ":Ri(f)).length;if(w<2)return w?l_(f,u):f;var ee=l_(f,rh(u/uc(f)));return nt(f)?vs(Sr(ee),0,u).join(""):ee.slice(0,u)}function mh(u){return function(f,w,ee){return ee&&"number"!=typeof ee&&Ao(f,w,ee)&&(w=ee=b),f=os(f),w===b?(w=f,f=0):w=os(w),function UN(u,f,w,ee){for(var Ee=-1,Be=fn(rh((f-u)/(w||1)),0),et=_t(Be);Be--;)et[ee?Be:++Ee]=u,u+=w;return et}(f,w,ee=ee===b?f<w?1:-1:os(ee),u)}}function Hl(u){return function(f,w){return"string"==typeof f&&"string"==typeof w||(f=ws(f),w=ws(w)),u(f,w)}}function _p(u,f,w,ee,Ee,Be,et,it,lt,At){var St=8&f;f|=St?v:64,4&(f&=~(St?64:v))||(f&=-4);var Ut=[u,f,Ee,St?Be:b,St?et:b,St?b:Be,St?b:et,it,lt,At],Cn=w.apply(b,Ut);return ou(u)&&Wl(Cn,Ut),Cn.placeholder=ee,b_(Cn,u,f)}function bp(u){var f=ur[u];return function(w,ee){if(w=ws(w),(ee=null==ee?0:oi(jn(ee),292))&&cv(w)){var Ee=(mi(w)+"e").split("e");return+((Ee=(mi(f(Ee[0]+"e"+(+Ee[1]+ee)))+"e").split("e"))[0]+"e"+(+Ee[1]-ee))}return f(w)}}var Rv=Sn&&1/zf(new Sn([,-0]))[1]==Ae?function(u){return new Sn(u)}:jx;function Ov(u){return function(f){var w=Qi(f);return w==Z?zd(f):w==Ke?function bS(ct){var xt=-1,_t=Array(ct.size);return ct.forEach(function(Jt){_t[++xt]=[Jt,Jt]}),_t}(f):function SN(ct,xt){return rr(xt,function(_t){return[_t,ct[_t]]})}(f,u(f))}}function ns(u,f,w,ee,Ee,Be,et,it){var lt=2&f;if(!lt&&"function"!=typeof u)throw new _s(g);var At=ee?ee.length:0;if(At||(f&=-97,ee=Ee=b),et=et===b?et:fn(jn(et),0),it=it===b?it:jn(it),At-=Ee?Ee.length:0,64&f){var St=ee,Ot=Ee;ee=Ee=b}var Yt=lt?b:gh(u),pn=[u,f,w,ee,Ee,St,Ot,Be,et,it];if(Yt&&function Lo(u,f){var w=u[1],ee=f[1],Ee=w|ee;if(!(Ee<131)&&!(ee==T&&8==w||ee==T&&256==w&&u[7].length<=f[8]||384==ee&&f[7].length<=f[8]&&8==w))return u;1&ee&&(u[2]=f[2],Ee|=1&w?0:4);var it=f[3];if(it){var lt=u[3];u[3]=lt?Sv(lt,it,f[4]):it,u[4]=lt?Ls(u[3],N):f[4]}(it=f[5])&&(u[5]=(lt=u[5])?p_(lt,it,f[6]):it,u[6]=lt?Ls(u[5],N):f[6]),(it=f[7])&&(u[7]=it),ee&T&&(u[8]=null==u[8]?f[8]:oi(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=Ee}(pn,Yt),u=pn[0],f=pn[1],w=pn[2],ee=pn[3],Ee=pn[4],!(it=pn[9]=pn[9]===b?lt?0:u.length:fn(pn[9]-At,0))&&24&f&&(f&=-25),f&&1!=f)yn=8==f||16==f?function WS(u,f,w){var ee=Vl(u);return function Ee(){for(var Be=arguments.length,et=_t(Be),it=Be,lt=tu(Ee);it--;)et[it]=arguments[it];var At=Be<3&&et[0]!==lt&&et[Be-1]!==lt?[]:Ls(et,lt);return(Be-=At.length)<w?_p(u,f,ph,Ee.placeholder,b,et,At,b,b,w-Be):_o(this&&this!==io&&this instanceof Ee?ee:u,this,et)}}(u,f,it):f!=v&&33!=f||Ee.length?ph.apply(b,pn):function gp(u,f,w,ee){var Ee=1&f,Be=Vl(u);return function et(){for(var it=-1,lt=arguments.length,At=-1,St=ee.length,Ot=_t(St+lt),Yt=this&&this!==io&&this instanceof et?Be:u;++At<St;)Ot[At]=ee[At];for(;lt--;)Ot[At++]=arguments[++it];return _o(Yt,Ee?w:this,Ot)}}(u,f,w,ee);else var yn=function Fo(u,f,w){var ee=1&f,Ee=Vl(u);return function Be(){return(this&&this!==io&&this instanceof Be?Ee:u).apply(ee?w:this,arguments)}}(u,f,w);return b_((Yt?wv:Wl)(yn,pn),u,f)}function eu(u,f,w,ee){return u===b||rs(u,yo[w])&&!Di.call(ee,w)?f:u}function kv(u,f,w,ee,Ee,Be){return Hi(u)&&Hi(f)&&(Be.set(f,u),cp(u,f,b,kv,Be),Be.delete(f)),u}function VN(u){return Sh(u)?b:u}function yp(u,f,w,ee,Ee,Be){var et=1&w,it=u.length,lt=f.length;if(it!=lt&&!(et&&lt>it))return!1;var At=Be.get(u),St=Be.get(f);if(At&&St)return At==f&&St==u;var Ot=-1,Yt=!0,pn=2&w?new Kd:b;for(Be.set(u,f),Be.set(f,u);++Ot<it;){var yn=u[Ot],Ut=f[Ot];if(ee)var Cn=et?ee(Ut,yn,Ot,f,u,Be):ee(yn,Ut,Ot,u,f,Be);if(Cn!==b){if(Cn)continue;Yt=!1;break}if(pn){if(!bo(f,function(li,Xn){if(!th(pn,Xn)&&(yn===li||Ee(yn,li,w,ee,Be)))return pn.push(Xn)})){Yt=!1;break}}else if(yn!==Ut&&!Ee(yn,Ut,w,ee,Be)){Yt=!1;break}}return Be.delete(u),Be.delete(f),Yt}function _c(u){return el(Ap(u,b,yh),u+"")}function Pv(u){return OS(u,Hr,vp)}function Nv(u){return OS(u,Uo,Lv)}var gh=fc?function(u){return fc.get(u)}:jx;function Qc(u){for(var f=u.name+"",w=Xi[f],ee=Di.call(Xi,f)?w.length:0;ee--;){var Ee=w[ee],Be=Ee.func;if(null==Be||Be==u)return Ee.name}return f}function tu(u){return(Di.call(Pe,"placeholder")?Pe:u).placeholder}function bn(){var u=Pe.iteratee||rb;return u=u===rb?No:u,arguments.length?u(arguments[0],arguments[1]):u}function nu(u,f){var w=u.__data__;return function KS(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?w["string"==typeof f?"string":"hash"]:w.map}function iu(u){for(var f=Hr(u),w=f.length;w--;){var ee=f[w],Ee=u[ee];f[w]=[ee,Ee,__(Ee)]}return f}function ru(u,f){var w=function _S(ct,xt){return null==ct?b:ct[xt]}(u,f);return r_(w)?w:b}var vp=Gd?function(u){return null==u?[]:(u=Li(u),na(Gd(u),function(f){return av.call(u,f)}))}:Rh,Lv=Gd?function(u){for(var f=[];u;)Ln(f,vp(u)),u=qf(u);return f}:Rh,Qi=xo;function wp(u,f,w){for(var ee=-1,Ee=(f=wo(f,u)).length,Be=!1;++ee<Ee;){var et=za(f[ee]);if(!(Be=null!=u&&w(u,et)))break;u=u[et]}return Be||++ee!=Ee?Be:!!(Ee=null==u?0:u.length)&&Xl(Ee)&&ja(et,Ee)&&(Yn(u)||Yl(u))}function _h(u){return"function"!=typeof u.constructor||su(u)?{}:Jn(qf(u))}function jv(u){return Yn(u)||Yl(u)||!!(jt&&u&&u[jt])}function ja(u,f){var w=typeof u;return!!(f=f??Ne)&&("number"==w||"symbol"!=w&&Da.test(u))&&u>-1&&u%1==0&&u<f}function Ao(u,f,w){if(!Hi(w))return!1;var ee=typeof f;return!!("number"==ee?Bo(w)&&ja(f,w.length):"string"==ee&&f in w)&&rs(w[f],u)}function Ep(u,f){if(Yn(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!jo(u))||Xu.test(u)||!Pd.test(u)||null!=f&&u in Li(f)}function ou(u){var f=Qc(u),w=Pe[f];if("function"!=typeof w||!(f in ui.prototype))return!1;if(u===w)return!0;var ee=gh(w);return!!ee&&u===ee[0]}(hr&&Qi(new hr(new ArrayBuffer(1)))!=q||js&&Qi(new js)!=Z||Yc&&Qi(Yc.resolve())!=ue||Sn&&Qi(new Sn)!=Ke||hc&&Qi(new hc)!=Vt)&&(Qi=function(u){var f=xo(u),w=f==O?u.constructor:b,ee=w?cu(w):"";if(ee)switch(ee){case ah:return q;case Yd:return Z;case Ra:return ue;case ch:return Ke;case lv:return Vt}return f});var qS=$f?fa:rl;function su(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||yo)}function __(u){return u==u&&!Hi(u)}function au(u,f){return function(w){return null!=w&&w[u]===f&&(f!==b||u in Li(w))}}function Ap(u,f,w){return f=fn(f===b?u.length-1:f,0),function(){for(var ee=arguments,Ee=-1,Be=fn(ee.length-f,0),et=_t(Be);++Ee<Be;)et[Ee]=ee[f+Ee];Ee=-1;for(var it=_t(f+1);++Ee<f;)it[Ee]=ee[Ee];return it[f]=w(et),_o(u,this,it)}}function Uv(u,f){return f.length<2?u:Zd(u,Us(f,0,-1))}function Ua(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var Wl=Sp(wv),Va=bs||function(u,f){return io.setTimeout(u,f)},el=Sp(jS);function b_(u,f,w){var ee=f+"";return el(u,function XS(u,f){var w=f.length;if(!w)return u;var ee=w-1;return f[ee]=(w>1?"& ":"")+f[ee],f=f.join(w>2?", ":" "),u.replace(Uc,"{\n/* [wrapped with "+f+"] */\n")}(ee,function HN(u,f){return gs(rt,function(w){var ee="_."+w[0];f&w[1]&&!Bd(u,ee)&&u.push(ee)}),u.sort()}(function xp(u){var f=u.match(Vc);return f?f[1].split(Nd):[]}(ee),w)))}function Sp(u){var f=0,w=0;return function(){var ee=ra(),Ee=16-(ee-w);if(w=ee,Ee>0){if(++f>=800)return arguments[0]}else f=0;return u.apply(b,arguments)}}function bc(u,f){var w=-1,ee=u.length,Ee=ee-1;for(f=f===b?ee:f;++w<f;){var Be=lp(w,Ee),et=u[Be];u[Be]=u[w],u[w]=et}return u.length=f,u}var QS=function JS(u){var f=il(u,function(ee){return 500===w.size&&w.clear(),ee}),w=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(Ku,function(w,ee,Ee,Be){f.push(Ee?Be.replace(Pl,"$1"):ee||w)}),f});function za(u){if("string"==typeof u||jo(u))return u;var f=u+"";return"0"==f&&1/u==-Ae?"-0":f}function cu(u){if(null!=u){try{return nh.call(u)}catch{}try{return u+""}catch{}}return""}function eC(u){if(u instanceof ui)return u.clone();var f=new Zo(u.__wrapped__,u.__chain__);return f.__actions__=Eo(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var lu=si(function(u,f){return zi(u)?xr(u,vo(f,1,zi,!0)):[]}),tC=si(function(u,f){var w=zs(f);return zi(w)&&(w=b),zi(u)?xr(u,vo(f,1,zi,!0),bn(w,2)):[]}),nC=si(function(u,f){var w=zs(f);return zi(w)&&(w=b),zi(u)?xr(u,vo(f,1,zi,!0),b,w):[]});function $l(u,f,w){var ee=null==u?0:u.length;if(!ee)return-1;var Ee=null==w?0:jn(w);return Ee<0&&(Ee=fn(ee+Ee,0)),Gg(u,bn(f,3),Ee)}function y_(u,f,w){var ee=null==u?0:u.length;if(!ee)return-1;var Ee=ee-1;return w!==b&&(Ee=jn(w),Ee=w<0?fn(ee+Ee,0):oi(Ee,ee-1)),Gg(u,bn(f,3),Ee,!0)}function yh(u){return null!=u&&u.length?vo(u,1):[]}function zv(u){return u&&u.length?u[0]:b}var v_=si(function(u){var f=rr(u,up);return f.length&&f[0]===u[0]?op(f):[]}),du=si(function(u){var f=zs(u),w=rr(u,up);return f===zs(w)?f=b:w.pop(),w.length&&w[0]===u[0]?op(w,bn(f,2)):[]}),KN=si(function(u){var f=zs(u),w=rr(u,up);return(f="function"==typeof f?f:b)&&w.pop(),w.length&&w[0]===u[0]?op(w,b,f):[]});function zs(u){var f=null==u?0:u.length;return f?u[f-1]:b}var cC=si(Gv);function Gv(u,f){return u&&u.length&&f&&f.length?c_(u,f):u}var Cp=_c(function(u,f){var w=null==u?0:u.length,ee=t_(u,f);return Dn(u,rr(f,function(Ee){return ja(Ee,w)?+Ee:Ee}).sort(h_)),ee});function tl(u){return null==u?u:Wd.call(u)}var gC=si(function(u){return gc(vo(u,1,zi,!0))}),JN=si(function(u){var f=zs(u);return zi(f)&&(f=b),gc(vo(u,1,zi,!0),bn(f,2))}),_C=si(function(u){var f=zs(u);return f="function"==typeof f?f:b,gc(vo(u,1,zi,!0),b,f)});function Dp(u){if(!u||!u.length)return[];var f=0;return u=na(u,function(w){if(zi(w))return f=fn(w.length,f),!0}),Z0(f,function(w){return rr(u,Yg(w))})}function Xv(u,f){if(!u||!u.length)return[];var w=Dp(u);return null==f?w:rr(w,function(ee){return _o(f,b,ee)})}var Kv=si(function(u,f){return zi(u)?xr(u,f):[]}),ZN=si(function(u){return d_(na(u,zi))}),qv=si(function(u){var f=zs(u);return zi(f)&&(f=b),d_(na(u,zi),bn(f,2))}),QN=si(function(u){var f=zs(u);return f="function"==typeof f?f:b,d_(na(u,zi),b,f)}),vC=si(Dp),eF=si(function(u){var f=u.length,w=f>1?u[f-1]:b;return w="function"==typeof w?(u.pop(),w):b,Xv(u,w)});function wC(u){var f=Pe(u);return f.__chain__=!0,f}function S_(u,f){return f(u)}var tF=_c(function(u){var f=u.length,w=f?u[0]:0,ee=this.__wrapped__,Ee=function(Be){return t_(Be,u)};return!(f>1||this.__actions__.length)&&ee instanceof ui&&ja(w)?((ee=ee.slice(w,+w+(f?1:0))).__actions__.push({func:S_,args:[Ee],thisArg:b}),new Zo(ee,this.__chain__).thru(function(Be){return f&&!Be.length&&Be.push(b),Be})):this.thru(Ee)}),Zv=fh(function(u,f,w){Di.call(u,w)?++u[w]:pc(u,w,1)}),ex=pp($l),tx=pp(y_);function nx(u,f){return(Yn(u)?gs:mc)(u,bn(f,3))}function ix(u,f){return(Yn(u)?fS:RS)(u,bn(f,3))}var AC=fh(function(u,f,w){Di.call(u,w)?u[w].push(f):pc(u,w,[f])}),C_=si(function(u,f,w){var ee=-1,Ee="function"==typeof f,Be=Bo(u)?_t(u.length):[];return mc(u,function(et){Be[++ee]=Ee?_o(f,et,w):hh(et,f,w)}),Be}),SC=fh(function(u,f,w){pc(u,w,f)});function Np(u,f){return(Yn(u)?rr:ts)(u,bn(f,3))}var ox=fh(function(u,f,w){u[w?0:1].push(f)},function(){return[[],[]]}),ax=si(function(u,f){if(null==u)return[];var w=f.length;return w>1&&Ao(u,f[0],f[1])?f=[]:w>2&&Ao(f[0],f[1],f[2])&&(f=[f[0]]),bv(u,vo(f,1),[])}),Eh=Hd||function(){return io.Date.now()};function I_(u,f,w){return f=w?b:f,ns(u,T,b,b,b,b,f=u&&null==f?u.length:f)}function cx(u,f){var w;if("function"!=typeof f)throw new _s(g);return u=jn(u),function(){return--u>0&&(w=f.apply(this,arguments)),u<=1&&(f=b),w}}var Fp=si(function(u,f,w){var ee=1;if(w.length){var Ee=Ls(w,tu(Fp));ee|=v}return ns(u,ee,f,w,Ee)}),lx=si(function(u,f,w){var ee=3;if(w.length){var Ee=Ls(w,tu(lx));ee|=v}return ns(f,ee,u,w,Ee)});function ux(u,f,w){var ee,Ee,Be,et,it,lt,At=0,St=!1,Ot=!1,Yt=!0;if("function"!=typeof u)throw new _s(g);function pn(Ir){var Ss=ee,ol=Ee;return ee=Ee=b,At=Ir,et=u.apply(ol,Ss)}function Cn(Ir){var Ss=Ir-lt;return lt===b||Ss>=f||Ss<0||Ot&&Ir-At>=Be}function li(){var Ir=Eh();if(Cn(Ir))return Xn(Ir);it=Va(li,function Ut(Ir){var rm=f-(Ir-lt);return Ot?oi(rm,Be-(Ir-At)):rm}(Ir))}function Xn(Ir){return it=b,Yt&&ee?pn(Ir):(ee=Ee=b,et)}function Nr(){var Ir=Eh(),Ss=Cn(Ir);if(ee=arguments,Ee=this,lt=Ir,Ss){if(it===b)return function yn(Ir){return At=Ir,it=Va(li,f),St?pn(Ir):et}(lt);if(Ot)return La(it),it=Va(li,f),pn(lt)}return it===b&&(it=Va(li,f)),et}return f=ws(f)||0,Hi(w)&&(St=!!w.leading,Be=(Ot="maxWait"in w)?fn(ws(w.maxWait)||0,f):Be,Yt="trailing"in w?!!w.trailing:Yt),Nr.cancel=function As(){it!==b&&La(it),At=0,ee=lt=Ee=it=b},Nr.flush=function Vo(){return it===b?et:Xn(Eh())},Nr}var R_=si(function(u,f){return uh(u,1,f)}),O_=si(function(u,f,w){return uh(u,ws(f)||0,w)});function il(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new _s(g);var w=function(){var ee=arguments,Ee=f?f.apply(this,ee):ee[0],Be=w.cache;if(Be.has(Ee))return Be.get(Ee);var et=u.apply(this,ee);return w.cache=Be.set(Ee,et)||Be,et};return w.cache=new(il.Cache||Xc),w}function Lp(u){if("function"!=typeof u)throw new _s(g);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}il.Cache=Xc;var hx=Ev(function(u,f){var w=(f=1==f.length&&Yn(f[0])?rr(f[0],Oo(bn())):rr(vo(f,1),Oo(bn()))).length;return si(function(ee){for(var Ee=-1,Be=oi(ee.length,w);++Ee<Be;)ee[Ee]=f[Ee].call(this,ee[Ee]);return _o(u,this,ee)})}),Bp=si(function(u,f){var w=Ls(f,tu(Bp));return ns(u,v,b,f,w)}),k_=si(function(u,f){var w=Ls(f,tu(k_));return ns(u,64,b,f,w)}),fu=_c(function(u,f){return ns(u,256,b,b,b,f)});function rs(u,f){return u===f||u!=u&&f!=f}var N_=Hl(rp),F_=Hl(function(u,f){return u>=f}),Yl=i_(function(){return arguments}())?i_:function(u){return fr(u)&&Di.call(u,"callee")&&!av.call(u,"callee")},Yn=_t.isArray,L_=cS?Oo(cS):function pv(u){return fr(u)&&xo(u)==Re};function Bo(u){return null!=u&&Xl(u.length)&&!fa(u)}function zi(u){return fr(u)&&Bo(u)}var yc=SS||rl,BC=lS?Oo(lS):function NS(u){return fr(u)&&xo(u)==se};function zp(u){if(!fr(u))return!1;var f=xo(u);return f==Fe||"[object DOMException]"==f||"string"==typeof u.message&&"string"==typeof u.name&&!Sh(u)}function fa(u){if(!Hi(u))return!1;var f=xo(u);return f==Ve||f==pe||"[object AsyncFunction]"==f||"[object Proxy]"==f}function B_(u){return"number"==typeof u&&u==jn(u)}function Xl(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Ne}function Hi(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function fr(u){return null!=u&&"object"==typeof u}var Hp=dS?Oo(dS):function Na(u){return fr(u)&&Qi(u)==Z};function vx(u){return"number"==typeof u||fr(u)&&xo(u)==G}function Sh(u){if(!fr(u)||xo(u)!=O)return!1;var f=qf(u);if(null===f)return!0;var w=Di.call(f,"constructor")&&f.constructor;return"function"==typeof w&&w instanceof w&&nh.call(w)==ov}var U_=Et?Oo(Et):function Ki(u){return fr(u)&&xo(u)==He},V_=uS?Oo(uS):function LS(u){return fr(u)&&Qi(u)==Ke};function Kl(u){return"string"==typeof u||!Yn(u)&&fr(u)&&xo(u)==ut}function jo(u){return"symbol"==typeof u||fr(u)&&xo(u)==Rt}var pa=sn?Oo(sn):function ap(u){return fr(u)&&Xl(u.length)&&!!Ui[xo(u)]},HC=Hl(Kc),z_=Hl(function(u,f){return u<=f});function wx(u){if(!u)return[];if(Bo(u))return Kl(u)?Sr(u):Eo(u);if(Or&&u[Or])return function Gt(ct){for(var xt,_t=[];!(xt=ct.next()).done;)_t.push(xt.value);return _t}(u[Or]());var f=Qi(u);return(f==Z?zd:f==Ke?zf:pr)(u)}function os(u){return u?(u=ws(u))===Ae||u===-Ae?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function jn(u){var f=os(u),w=f%1;return f==f?w?f-w:f:0}function Wp(u){return u?Bl(jn(u),0,me):0}function ws(u){if("number"==typeof u)return u;if(jo(u))return NaN;if(Hi(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=Hi(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=jd(u);var w=ac.test(u);return w||Ia.test(u)?xN(u.slice(2),w?2:8):wi.test(u)?NaN:+u}function H_(u){return ha(u,Uo(u))}function mi(u){return null==u?"":Ri(u)}var GC=Jc(function(u,f){if(su(f)||Bo(f))ha(f,Hr(f),u);else for(var w in f)Di.call(f,w)&&ca(u,w,f[w])}),Ax=Jc(function(u,f){ha(f,Uo(f),u)}),$p=Jc(function(u,f,w,ee){ha(f,Uo(f),u,ee)}),WC=Jc(function(u,f,w,ee){ha(f,Hr(f),u,ee)}),$C=_c(t_),Ha=si(function(u,f){u=Li(u);var w=-1,ee=f.length,Ee=ee>2?f[2]:b;for(Ee&&Ao(f[0],f[1],Ee)&&(ee=1);++w<ee;)for(var Be=f[w],et=Uo(Be),it=-1,lt=et.length;++it<lt;){var At=et[it],St=u[At];(St===b||rs(St,yo[At])&&!Di.call(u,At))&&(u[At]=Be[At])}return u}),YC=si(function(u){return u.push(b,kv),_o(Yp,b,u)});function G_(u,f,w){var ee=null==u?b:Zd(u,f);return ee===b?w:ee}function pu(u,f){return null!=u&&wp(u,f,fv)}var vc=m_(function(u,f,w){null!=f&&"function"!=typeof f.toString&&(f=Yf.call(f)),u[f]=w},ib(ss)),Ch=m_(function(u,f,w){null!=f&&"function"!=typeof f.toString&&(f=Yf.call(f)),Di.call(u,f)?u[f].push(w):u[f]=[w]},bn),Cx=si(hh);function Hr(u){return Bo(u)?Qg(u):o_(u)}function Uo(u){return Bo(u)?Qg(u,!0):function mv(u){if(!Hi(u))return function ZS(u){var f=[];if(null!=u)for(var w in Li(u))f.push(w);return f}(u);var f=su(u),w=[];for(var ee in u)"constructor"==ee&&(f||!Di.call(u,ee))||w.push(ee);return w}(u)}var lF=Jc(function(u,f,w){cp(u,f,w)}),Yp=Jc(function(u,f,w,ee){cp(u,f,w,ee)}),W_=_c(function(u,f){var w={};if(null==u)return w;var ee=!1;f=rr(f,function(Be){return Be=wo(Be,u),ee||(ee=Be.length>1),Be}),ha(u,Nv(u),w),ee&&(w=la(w,7,VN));for(var Ee=f.length;Ee--;)Ul(w,f[Ee]);return w}),uF=_c(function(u,f){return null==u?{}:function yv(u,f){return a_(u,f,function(w,ee){return pu(u,ee)})}(u,f)});function $_(u,f){if(null==u)return{};var w=rr(Nv(u),function(ee){return[ee]});return f=bn(f),a_(u,w,function(ee,Ee){return f(ee,Ee[0])})}var Tx=Ov(Hr),Y_=Ov(Uo);function pr(u){return null==u?[]:Ud(u,Hr(u))}var cT=Bi(function(u,f,w){return f=f.toLowerCase(),u+(w?Dx(f):f)});function Dx(u){return tb(mi(u).toLowerCase())}function Rx(u){return(u=mi(u))&&u.replace(cc,Vd).replace(Mt,"")}var fF=Bi(function(u,f,w){return u+(w?"-":"")+f.toLowerCase()}),Th=Bi(function(u,f,w){return u+(w?" ":"")+f.toLowerCase()}),bt=Zc("toLowerCase"),Px=Bi(function(u,f,w){return u+(w?"_":"")+f.toLowerCase()}),qp=Bi(function(u,f,w){return u+(w?" ":"")+tb(f)}),Jp=Bi(function(u,f,w){return u+(w?" ":"")+f.toUpperCase()}),tb=Zc("toUpperCase");function Zp(u,f,w){return u=mi(u),(f=w?b:f)===b?function nv(ct){return nS.test(ct)}(u)?function Kg(ct){return ct.match(Fn)||[]}(u):function Ti(ct){return ct.match(zc)||[]}(u):u.match(f)||[]}var Ih=si(function(u,f){try{return _o(u,b,f)}catch(w){return zp(w)?w:new Bn(w)}}),Hs=_c(function(u,f){return gs(f,function(w){w=za(w),pc(u,w,Fp(u[w],u))}),u});function ib(u){return function(){return u}}var Bx=Dv(),mu=Dv(!0);function ss(u){return u}function rb(u){return No("function"==typeof u?u:la(u,1))}var Dh=si(function(u,f){return function(w){return hh(w,u,f)}}),mT=si(function(u,f){return function(w){return hh(u,w,f)}});function em(u,f,w){var ee=Hr(f),Ee=ip(f,ee);null==w&&(!Hi(f)||!Ee.length&&ee.length)&&(w=f,f=u,u=this,Ee=ip(f,Hr(f)));var Be=!(Hi(w)&&"chain"in w&&!w.chain),et=fa(u);return gs(Ee,function(it){var lt=f[it];u[it]=lt,et&&(u.prototype[it]=function(){var At=this.__chain__;if(Be||At){var St=u(this.__wrapped__);return(St.__actions__=Eo(this.__actions__)).push({func:lt,args:arguments,thisArg:u}),St.__chain__=At,St}return lt.apply(u,Ln([this.value()],arguments))})}),u}function jx(){}var sb=Ba(rr),gT=Ba(Zu),mF=Ba(bo);function _T(u){return Ep(u)?Yg(za(u)):function vv(u){return function(f){return Zd(f,u)}}(u)}var bT=mh(),ab=mh(!0);function Rh(){return[]}function rl(){return!1}var db=zl(function(u,f){return u+f},0),im=bp("ceil"),gF=zl(function(u,f){return u/f},1),ub=bp("floor"),zx=zl(function(u,f){return u*f},1),wT=bp("round"),ET=zl(function(u,f){return u-f},0);return Pe.after=function IC(u,f){if("function"!=typeof f)throw new _s(g);return u=jn(u),function(){if(--u<1)return f.apply(this,arguments)}},Pe.ary=I_,Pe.assign=GC,Pe.assignIn=Ax,Pe.assignInWith=$p,Pe.assignWith=WC,Pe.at=$C,Pe.before=cx,Pe.bind=Fp,Pe.bindAll=Hs,Pe.bindKey=lx,Pe.castArray=function kC(){if(!arguments.length)return[];var u=arguments[0];return Yn(u)?u:[u]},Pe.chain=wC,Pe.chunk=function GN(u,f,w){f=(w?Ao(u,f,w):f===b)?1:fn(jn(f),0);var ee=null==u?0:u.length;if(!ee||f<1)return[];for(var Ee=0,Be=0,et=_t(rh(ee/f));Ee<ee;)et[Be++]=Us(u,Ee,Ee+=f);return et},Pe.compact=function WN(u){for(var f=-1,w=null==u?0:u.length,ee=0,Ee=[];++f<w;){var Be=u[f];Be&&(Ee[ee++]=Be)}return Ee},Pe.concat=function $N(){var u=arguments.length;if(!u)return[];for(var f=_t(u-1),w=arguments[0],ee=u;ee--;)f[ee-1]=arguments[ee];return Ln(Yn(w)?Eo(w):[w],vo(f,1))},Pe.cond=function Qp(u){var f=null==u?0:u.length,w=bn();return u=f?rr(u,function(ee){if("function"!=typeof ee[1])throw new _s(g);return[w(ee[0]),ee[1]]}):[],si(function(ee){for(var Ee=-1;++Ee<f;){var Be=u[Ee];if(_o(Be[0],this,ee))return _o(Be[1],this,ee)}})},Pe.conforms=function nb(u){return function DS(u){var f=Hr(u);return function(w){return da(w,u,f)}}(la(u,1))},Pe.constant=ib,Pe.countBy=Zv,Pe.create=function Es(u,f){var w=Jn(u);return null==f?w:Qf(w,f)},Pe.curry=function D_(u,f,w){var ee=ns(u,8,b,b,b,b,b,f=w?b:f);return ee.placeholder=D_.placeholder,ee},Pe.curryRight=function dx(u,f,w){var ee=ns(u,16,b,b,b,b,b,f=w?b:f);return ee.placeholder=dx.placeholder,ee},Pe.debounce=ux,Pe.defaults=Ha,Pe.defaultsDeep=YC,Pe.defer=R_,Pe.delay=O_,Pe.difference=lu,Pe.differenceBy=tC,Pe.differenceWith=nC,Pe.drop=function zr(u,f,w){var ee=null==u?0:u.length;return ee?Us(u,(f=w||f===b?1:jn(f))<0?0:f,ee):[]},Pe.dropRight=function iC(u,f,w){var ee=null==u?0:u.length;return ee?Us(u,0,(f=ee-(f=w||f===b?1:jn(f)))<0?0:f):[]},Pe.dropRightWhile=function bh(u,f){return u&&u.length?Qd(u,bn(f,3),!0,!0):[]},Pe.dropWhile=function rC(u,f){return u&&u.length?Qd(u,bn(f,3),!0):[]},Pe.fill=function Vs(u,f,w,ee){var Ee=null==u?0:u.length;return Ee?(w&&"number"!=typeof w&&Ao(u,f,w)&&(w=0,ee=Ee),function ep(u,f,w,ee){var Ee=u.length;for((w=jn(w))<0&&(w=-w>Ee?0:Ee+w),(ee=ee===b||ee>Ee?Ee:jn(ee))<0&&(ee+=Ee),ee=w>ee?0:Wp(ee);w<ee;)u[w++]=f;return u}(u,f,w,ee)):[]},Pe.filter=function hu(u,f){return(Yn(u)?na:hv)(u,bn(f,3))},Pe.flatMap=function kp(u,f){return vo(Np(u,f),1)},Pe.flatMapDeep=function Pp(u,f){return vo(Np(u,f),Ae)},Pe.flatMapDepth=function nl(u,f,w){return w=w===b?1:jn(w),vo(Np(u,f),w)},Pe.flatten=yh,Pe.flattenDeep=function vh(u){return null!=u&&u.length?vo(u,Ae):[]},Pe.flattenDepth=function oC(u,f){return null!=u&&u.length?vo(u,f=f===b?1:jn(f)):[]},Pe.flip=function DC(u){return ns(u,512)},Pe.flow=Bx,Pe.flowRight=mu,Pe.fromPairs=function YN(u){for(var f=-1,w=null==u?0:u.length,ee={};++f<w;){var Ee=u[f];ee[Ee[0]]=Ee[1]}return ee},Pe.functions=function QC(u){return null==u?[]:ip(u,Hr(u))},Pe.functionsIn=function eT(u){return null==u?[]:ip(u,Uo(u))},Pe.groupBy=AC,Pe.initial=function xs(u){return null!=u&&u.length?Us(u,0,-1):[]},Pe.intersection=v_,Pe.intersectionBy=du,Pe.intersectionWith=KN,Pe.invert=vc,Pe.invertBy=Ch,Pe.invokeMap=C_,Pe.iteratee=rb,Pe.keyBy=SC,Pe.keys=Hr,Pe.keysIn=Uo,Pe.map=Np,Pe.mapKeys=function aF(u,f){var w={};return f=bn(f,3),Pa(u,function(ee,Ee,Be){pc(w,f(ee,Ee,Be),ee)}),w},Pe.mapValues=function cF(u,f){var w={};return f=bn(f,3),Pa(u,function(ee,Ee,Be){pc(w,Ee,f(ee,Ee,Be))}),w},Pe.matches=function pT(u){return gv(la(u,1))},Pe.matchesProperty=function ob(u,f){return _v(u,la(f,1))},Pe.memoize=il,Pe.merge=lF,Pe.mergeWith=Yp,Pe.method=Dh,Pe.methodOf=mT,Pe.mixin=em,Pe.negate=Lp,Pe.nthArg=function Xr(u){return u=jn(u),si(function(f){return s_(f,u)})},Pe.omit=W_,Pe.omitBy=function dF(u,f){return $_(u,Lp(bn(f)))},Pe.once=function RC(u){return cx(2,u)},Pe.orderBy=function CC(u,f,w,ee){return null==u?[]:(Yn(f)||(f=null==f?[]:[f]),Yn(w=ee?b:w)||(w=null==w?[]:[w]),bv(u,f,w))},Pe.over=sb,Pe.overArgs=hx,Pe.overEvery=gT,Pe.overSome=mF,Pe.partial=Bp,Pe.partialRight=k_,Pe.partition=ox,Pe.pick=uF,Pe.pickBy=$_,Pe.property=_T,Pe.propertyOf=function tm(u){return function(f){return null==u?b:Zd(u,f)}},Pe.pull=cC,Pe.pullAll=Gv,Pe.pullAllBy=function lC(u,f,w){return u&&u.length&&f&&f.length?c_(u,f,bn(w,2)):u},Pe.pullAllWith=function x_(u,f,w){return u&&u.length&&f&&f.length?c_(u,f,b,w):u},Pe.pullAt=Cp,Pe.range=bT,Pe.rangeRight=ab,Pe.rearg=fu,Pe.reject=function is(u,f){return(Yn(u)?na:hv)(u,Lp(bn(f,3)))},Pe.remove=function dC(u,f){var w=[];if(!u||!u.length)return w;var ee=-1,Ee=[],Be=u.length;for(f=bn(f,3);++ee<Be;){var et=u[ee];f(et,ee,u)&&(w.push(et),Ee.push(ee))}return Dn(u,Ee),w},Pe.rest=function jp(u,f){if("function"!=typeof u)throw new _s(g);return si(u,f=f===b?f:jn(f))},Pe.reverse=tl,Pe.sampleSize=function sx(u,f,w){return f=(w?Ao(u,f,w):f===b)?1:jn(f),(Yn(u)?LN:xv)(u,f)},Pe.set=function iT(u,f,w){return null==u?u:Fa(u,f,w)},Pe.setWith=function rT(u,f,w,ee){return ee="function"==typeof ee?ee:b,null==u?u:Fa(u,f,w,ee)},Pe.shuffle=function M_(u){return(Yn(u)?BN:US)(u)},Pe.slice=function uC(u,f,w){var ee=null==u?0:u.length;return ee?(w&&"number"!=typeof w&&Ao(u,f,w)?(f=0,w=ee):(f=null==f?0:jn(f),w=w===b?ee:jn(w)),Us(u,f,w)):[]},Pe.sortBy=ax,Pe.sortedUniq=function fC(u){return u&&u.length?Tr(u):[]},Pe.sortedUniqBy=function pC(u,f){return u&&u.length?Tr(u,bn(f,2)):[]},Pe.split=function Nx(u,f,w){return w&&"number"!=typeof w&&Ao(u,f,w)&&(f=w=b),(w=w===b?me:w>>>0)?(u=mi(u))&&("string"==typeof f||null!=f&&!U_(f))&&!(f=Ri(f))&&nt(u)?vs(Sr(u),0,w):u.split(f,w):[]},Pe.spread=function fx(u,f){if("function"!=typeof u)throw new _s(g);return f=null==f?0:fn(jn(f),0),si(function(w){var ee=w[f],Ee=vs(w,0,f);return ee&&Ln(Ee,ee),_o(u,this,Ee)})},Pe.tail=function uu(u){var f=null==u?0:u.length;return f?Us(u,1,f):[]},Pe.take=function xh(u,f,w){return u&&u.length?Us(u,0,(f=w||f===b?1:jn(f))<0?0:f):[]},Pe.takeRight=function mC(u,f,w){var ee=null==u?0:u.length;return ee?Us(u,(f=ee-(f=w||f===b?1:jn(f)))<0?0:f,ee):[]},Pe.takeRightWhile=function qN(u,f){return u&&u.length?Qd(u,bn(f,3),!1,!0):[]},Pe.takeWhile=function Yv(u,f){return u&&u.length?Qd(u,bn(f,3)):[]},Pe.tap=function A_(u,f){return f(u),u},Pe.throttle=function P_(u,f,w){var ee=!0,Ee=!0;if("function"!=typeof u)throw new _s(g);return Hi(w)&&(ee="leading"in w?!!w.leading:ee,Ee="trailing"in w?!!w.trailing:Ee),ux(u,f,{leading:ee,maxWait:f,trailing:Ee})},Pe.thru=S_,Pe.toArray=wx,Pe.toPairs=Tx,Pe.toPairsIn=Y_,Pe.toPath=function kh(u){return Yn(u)?rr(u,za):jo(u)?[u]:Eo(QS(mi(u)))},Pe.toPlainObject=H_,Pe.transform=function Xp(u,f,w){var ee=Yn(u),Ee=ee||yc(u)||pa(u);if(f=bn(f,4),null==w){var Be=u&&u.constructor;w=Ee?ee?new Be:[]:Hi(u)&&fa(Be)?Jn(qf(u)):{}}return(Ee?gs:Pa)(u,function(et,it,lt){return f(w,et,it,lt)}),w},Pe.unary=function Up(u){return I_(u,1)},Pe.union=gC,Pe.unionBy=JN,Pe.unionWith=_C,Pe.uniq=function bC(u){return u&&u.length?gc(u):[]},Pe.uniqBy=function yC(u,f){return u&&u.length?gc(u,bn(f,2)):[]},Pe.uniqWith=function Ip(u,f){return f="function"==typeof f?f:b,u&&u.length?gc(u,b,f):[]},Pe.unset=function Mx(u,f){return null==u||Ul(u,f)},Pe.unzip=Dp,Pe.unzipWith=Xv,Pe.update=function X_(u,f,w){return null==u?u:ua(u,f,so(w))},Pe.updateWith=function oT(u,f,w,ee){return ee="function"==typeof ee?ee:b,null==u?u:ua(u,f,so(w),ee)},Pe.values=pr,Pe.valuesIn=function sT(u){return null==u?[]:Ud(u,Uo(u))},Pe.without=Kv,Pe.words=Zp,Pe.wrap=function OC(u,f){return Bp(so(f),u)},Pe.xor=ZN,Pe.xorBy=qv,Pe.xorWith=QN,Pe.zip=vC,Pe.zipObject=function xC(u,f){return zS(u||[],f||[],ca)},Pe.zipObjectDeep=function E_(u,f){return zS(u||[],f||[],Fa)},Pe.zipWith=eF,Pe.entries=Tx,Pe.entriesIn=Y_,Pe.extend=Ax,Pe.extendWith=$p,em(Pe,Pe),Pe.add=db,Pe.attempt=Ih,Pe.camelCase=cT,Pe.capitalize=Dx,Pe.ceil=im,Pe.clamp=function aT(u,f,w){return w===b&&(w=f,f=b),w!==b&&(w=(w=ws(w))==w?w:0),f!==b&&(f=(f=ws(f))==f?f:0),Bl(ws(u),f,w)},Pe.clone=function PC(u){return la(u,4)},Pe.cloneDeep=function FC(u){return la(u,5)},Pe.cloneDeepWith=function LC(u,f){return la(u,5,f="function"==typeof f?f:b)},Pe.cloneWith=function NC(u,f){return la(u,4,f="function"==typeof f?f:b)},Pe.conformsTo=function px(u,f){return null==f||da(u,f,Hr(f))},Pe.deburr=Rx,Pe.defaultTo=function fT(u,f){return null==u||u!=u?f:u},Pe.divide=gF,Pe.endsWith=function lT(u,f,w){u=mi(u),f=Ri(f);var ee=u.length,Ee=w=w===b?ee:Bl(jn(w),0,ee);return(w-=f.length)>=0&&u.slice(w,Ee)==f},Pe.eq=rs,Pe.escape=function Ox(u){return(u=mi(u))&&ms.test(u)?u.replace(Zi,gS):u},Pe.escapeRegExp=function hF(u){return(u=mi(u))&&sc.test(u)?u.replace(Bc,"\\$&"):u},Pe.every=function Qv(u,f,w){var ee=Yn(u)?Zu:n_;return w&&Ao(u,f,w)&&(f=b),ee(u,bn(f,3))},Pe.find=ex,Pe.findIndex=$l,Pe.findKey=function XC(u,f){return pS(u,bn(f,3),Pa)},Pe.findLast=tx,Pe.findLastIndex=y_,Pe.findLastKey=function KC(u,f){return pS(u,bn(f,3),Jd)},Pe.floor=ub,Pe.forEach=nx,Pe.forEachRight=ix,Pe.forIn=function qC(u,f){return null==u?u:tp(u,bn(f,3),Uo)},Pe.forInRight=function JC(u,f){return null==u?u:np(u,bn(f,3),Uo)},Pe.forOwn=function ZC(u,f){return u&&Pa(u,bn(f,3))},Pe.forOwnRight=function Sx(u,f){return u&&Jd(u,bn(f,3))},Pe.get=G_,Pe.gt=N_,Pe.gte=F_,Pe.has=function tT(u,f){return null!=u&&wp(u,f,kS)},Pe.hasIn=pu,Pe.head=zv,Pe.identity=ss,Pe.includes=function rx(u,f,w,ee){u=Bo(u)?u:pr(u),w=w&&!ee?jn(w):0;var Ee=u.length;return w<0&&(w=fn(Ee+w,0)),Kl(u)?w<=Ee&&u.indexOf(f,w)>-1:!!Ee&&Wc(u,f,w)>-1},Pe.indexOf=function XN(u,f,w){var ee=null==u?0:u.length;if(!ee)return-1;var Ee=null==w?0:jn(w);return Ee<0&&(Ee=fn(ee+Ee,0)),Wc(u,f,Ee)},Pe.inRange=function K_(u,f,w){return f=os(f),w===b?(w=f,f=0):w=os(w),function Pr(u,f,w){return u>=oi(f,w)&&u<fn(f,w)}(u=ws(u),f,w)},Pe.invoke=Cx,Pe.isArguments=Yl,Pe.isArray=Yn,Pe.isArrayBuffer=L_,Pe.isArrayLike=Bo,Pe.isArrayLikeObject=zi,Pe.isBoolean=function mx(u){return!0===u||!1===u||fr(u)&&xo(u)==I},Pe.isBuffer=yc,Pe.isDate=BC,Pe.isElement=function oF(u){return fr(u)&&1===u.nodeType&&!Sh(u)},Pe.isEmpty=function Vp(u){if(null==u)return!0;if(Bo(u)&&(Yn(u)||"string"==typeof u||"function"==typeof u.splice||yc(u)||pa(u)||Yl(u)))return!u.length;var f=Qi(u);if(f==Z||f==Ke)return!u.size;if(su(u))return!o_(u).length;for(var w in u)if(Di.call(u,w))return!1;return!0},Pe.isEqual=function jC(u,f){return jl(u,f)},Pe.isEqualWith=function gx(u,f,w){var ee=(w="function"==typeof w?w:b)?w(u,f):b;return ee===b?jl(u,f,b,w):!!ee},Pe.isError=zp,Pe.isFinite=function _x(u){return"number"==typeof u&&cv(u)},Pe.isFunction=fa,Pe.isInteger=B_,Pe.isLength=Xl,Pe.isMap=Hp,Pe.isMatch=function Gp(u,f){return u===f||sp(u,f,iu(f))},Pe.isMatchWith=function bx(u,f,w){return w="function"==typeof w?w:b,sp(u,f,iu(f),w)},Pe.isNaN=function j_(u){return vx(u)&&u!=+u},Pe.isNative=function Ah(u){if(qS(u))throw new Bn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r_(u)},Pe.isNil=function yx(u){return null==u},Pe.isNull=function UC(u){return null===u},Pe.isNumber=vx,Pe.isObject=Hi,Pe.isObjectLike=fr,Pe.isPlainObject=Sh,Pe.isRegExp=U_,Pe.isSafeInteger=function xx(u){return B_(u)&&u>=-Ne&&u<=Ne},Pe.isSet=V_,Pe.isString=Kl,Pe.isSymbol=jo,Pe.isTypedArray=pa,Pe.isUndefined=function VC(u){return u===b},Pe.isWeakMap=function zC(u){return fr(u)&&Qi(u)==Vt},Pe.isWeakSet=function sF(u){return fr(u)&&"[object WeakSet]"==xo(u)},Pe.join=function Hv(u,f){return null==u?"":Cr.call(u,f)},Pe.kebabCase=fF,Pe.last=zs,Pe.lastIndexOf=function sC(u,f,w){var ee=null==u?0:u.length;if(!ee)return-1;var Ee=ee;return w!==b&&(Ee=(Ee=jn(w))<0?fn(ee+Ee,0):oi(Ee,ee-1)),f==f?function dc(ct,xt,_t){for(var Jt=_t+1;Jt--;)if(ct[Jt]===xt)return Jt;return Jt}(u,f,Ee):Gg(u,$g,Ee,!0)},Pe.lowerCase=Th,Pe.lowerFirst=bt,Pe.lt=HC,Pe.lte=z_,Pe.max=function Ph(u){return u&&u.length?qd(u,ss,rp):b},Pe.maxBy=function yT(u,f){return u&&u.length?qd(u,bn(f,2),rp):b},Pe.mean=function Vx(u){return Uf(u,ss)},Pe.meanBy=function vT(u,f){return Uf(u,bn(f,2))},Pe.min=function xT(u){return u&&u.length?qd(u,ss,Kc):b},Pe.minBy=function hb(u,f){return u&&u.length?qd(u,bn(f,2),Kc):b},Pe.stubArray=Rh,Pe.stubFalse=rl,Pe.stubObject=function cb(){return{}},Pe.stubString=function lb(){return""},Pe.stubTrue=function Oh(){return!0},Pe.multiply=zx,Pe.nth=function aC(u,f){return u&&u.length?s_(u,jn(f)):b},Pe.noConflict=function ma(){return io._===this&&(io._=ES),this},Pe.noop=jx,Pe.now=Eh,Pe.pad=function Mh(u,f,w){u=mi(u);var ee=(f=jn(f))?uc(u):0;if(!f||ee>=f)return u;var Ee=(f-ee)/2;return mp(oh(Ee),w)+u+mp(rh(Ee),w)},Pe.padEnd=function Kp(u,f,w){u=mi(u);var ee=(f=jn(f))?uc(u):0;return f&&ee<f?u+mp(f-ee,w):u},Pe.padStart=function kx(u,f,w){u=mi(u);var ee=(f=jn(f))?uc(u):0;return f&&ee<f?mp(f-ee,w)+u:u},Pe.parseInt=function q_(u,f,w){return w||null==f?f=0:f&&(f=+f),sh(mi(u).replace(jc,""),f||0)},Pe.random=function Ix(u,f,w){if(w&&"boolean"!=typeof w&&Ao(u,f,w)&&(f=w=b),w===b&&("boolean"==typeof f?(w=f,f=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&f===b?(u=0,f=1):(u=os(u),f===b?(f=u,u=0):f=os(f)),u>f){var ee=u;u=f,f=ee}if(w||u%1||f%1){var Ee=ro();return oi(u+Ee*(f-u+vN("1e-"+((Ee+"").length-1))),f)}return lp(u,f)},Pe.reduce=function TC(u,f,w){var ee=Yn(u)?Qu:mS,Ee=arguments.length<3;return ee(u,bn(f,4),w,Ee,mc)},Pe.reduceRight=function MC(u,f,w){var ee=Yn(u)?K0:mS,Ee=arguments.length<3;return ee(u,bn(f,4),w,Ee,RS)},Pe.repeat=function J_(u,f,w){return f=(w?Ao(u,f,w):f===b)?1:jn(f),l_(mi(u),f)},Pe.replace=function dT(){var u=arguments,f=mi(u[0]);return u.length<3?f:f.replace(u[1],u[2])},Pe.result=function nT(u,f,w){var ee=-1,Ee=(f=wo(f,u)).length;for(Ee||(Ee=1,u=b);++ee<Ee;){var Be=null==u?b:u[za(f[ee])];Be===b&&(ee=Ee,Be=w),u=fa(Be)?Be.call(u):Be}return u},Pe.round=wT,Pe.runInContext=ct,Pe.sample=function T_(u){return(Yn(u)?e_:BS)(u)},Pe.size=function So(u){if(null==u)return 0;if(Bo(u))return Kl(u)?uc(u):u.length;var f=Qi(u);return f==Z||f==Ke?u.size:o_(u).length},Pe.snakeCase=Px,Pe.some=function wh(u,f,w){var ee=Yn(u)?bo:VS;return w&&Ao(u,f,w)&&(f=b),ee(u,bn(f,3))},Pe.sortedIndex=function Tp(u,f){return Ct(u,f)},Pe.sortedIndexBy=function hC(u,f,w){return pi(u,f,bn(w,2))},Pe.sortedIndexOf=function Wv(u,f){var w=null==u?0:u.length;if(w){var ee=Ct(u,f);if(ee<w&&rs(u[ee],f))return ee}return-1},Pe.sortedLastIndex=function w_(u,f){return Ct(u,f,!0)},Pe.sortedLastIndexBy=function Mp(u,f,w){return pi(u,f,bn(w,2),!0)},Pe.sortedLastIndexOf=function $v(u,f){if(null!=u&&u.length){var ee=Ct(u,f,!0)-1;if(rs(u[ee],f))return ee}return-1},Pe.startCase=qp,Pe.startsWith=function pF(u,f,w){return u=mi(u),w=null==w?0:Bl(jn(w),0,u.length),f=Ri(f),u.slice(w,w+f.length)==f},Pe.subtract=ET,Pe.sum=function _F(u){return u&&u.length?J0(u,ss):0},Pe.sumBy=function AT(u,f){return u&&u.length?J0(u,bn(f,2)):0},Pe.template=function Z_(u,f,w){var ee=Pe.templateSettings;w&&Ao(u,f,w)&&(f=b),u=mi(u),f=$p({},f,ee,eu);var it,lt,Ee=$p({},f.imports,ee.imports,eu),Be=Hr(Ee),et=Ud(Ee,Be),At=0,St=f.interpolate||Do,Ot="__p += '",Yt=Gf((f.escape||Do).source+"|"+St.source+"|"+(St===fo?Nl:Do).source+"|"+(f.evaluate||Do).source+"|$","g"),pn="//# sourceURL="+(Di.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++iS+"]")+"\n";u.replace(Yt,function(Cn,li,Xn,As,Vo,Nr){return Xn||(Xn=As),Ot+=u.slice(At,Nr).replace(_e,$c),li&&(it=!0,Ot+="' +\n__e("+li+") +\n'"),Vo&&(lt=!0,Ot+="';\n"+Vo+";\n__p += '"),Xn&&(Ot+="' +\n((__t = ("+Xn+")) == null ? '' : __t) +\n'"),At=Nr+Cn.length,Cn}),Ot+="';\n";var yn=Di.call(f,"variable")&&f.variable;if(yn){if(Fd.test(yn))throw new Bn("Invalid `variable` option passed into `_.template`")}else Ot="with (obj) {\n"+Ot+"\n}\n";Ot=(lt?Ot.replace(In,""):Ot).replace(To,"$1").replace(jr,"$1;"),Ot="function("+(yn||"obj")+") {\n"+(yn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(it?", __e = _.escape":"")+(lt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ot+"return __p\n}";var Ut=Ih(function(){return Si(Be,pn+"return "+Ot).apply(b,et)});if(Ut.source=Ot,zp(Ut))throw Ut;return Ut},Pe.times=function nm(u,f){if((u=jn(u))<1||u>Ne)return[];var w=me,ee=oi(u,me);f=bn(f),u-=me;for(var Ee=Z0(ee,f);++w<u;)f(w);return Ee},Pe.toFinite=os,Pe.toInteger=jn,Pe.toLength=Wp,Pe.toLower=function uT(u){return mi(u).toLowerCase()},Pe.toNumber=ws,Pe.toSafeInteger=function Ex(u){return u?Bl(jn(u),-Ne,Ne):0===u?u:0},Pe.toString=mi,Pe.toUpper=function Q_(u){return mi(u).toUpperCase()},Pe.trim=function Fx(u,f,w){if((u=mi(u))&&(w||f===b))return jd(u);if(!u||!(f=Ri(f)))return u;var ee=Sr(u),Ee=Sr(f);return vs(ee,Q0(ee,Ee),ev(ee,Ee)+1).join("")},Pe.trimEnd=function Lx(u,f,w){if((u=mi(u))&&(w||f===b))return u.slice(0,ia(u)+1);if(!u||!(f=Ri(f)))return u;var ee=Sr(u);return vs(ee,0,ev(ee,Sr(f))+1).join("")},Pe.trimStart=function ql(u,f,w){if((u=mi(u))&&(w||f===b))return u.replace(jc,"");if(!u||!(f=Ri(f)))return u;var ee=Sr(u);return vs(ee,Q0(ee,Sr(f))).join("")},Pe.truncate=function hT(u,f){var w=30,ee="...";if(Hi(f)){var Ee="separator"in f?f.separator:Ee;w="length"in f?jn(f.length):w,ee="omission"in f?Ri(f.omission):ee}var Be=(u=mi(u)).length;if(nt(u)){var et=Sr(u);Be=et.length}if(w>=Be)return u;var it=w-uc(ee);if(it<1)return ee;var lt=et?vs(et,0,it).join(""):u.slice(0,it);if(Ee===b)return lt+ee;if(et&&(it+=lt.length-it),U_(Ee)){if(u.slice(it).search(Ee)){var At,St=lt;for(Ee.global||(Ee=Gf(Ee.source,mi(Hc.exec(Ee))+"g")),Ee.lastIndex=0;At=Ee.exec(St);)var Ot=At.index;lt=lt.slice(0,Ot===b?it:Ot)}}else if(u.indexOf(Ri(Ee),it)!=it){var Yt=lt.lastIndexOf(Ee);Yt>-1&&(lt=lt.slice(0,Yt))}return lt+ee},Pe.unescape=function eb(u){return(u=mi(u))&&Ur.test(u)?u.replace(Mo,Ai):u},Pe.uniqueId=function Ux(u){var f=++wS;return mi(u)+f},Pe.upperCase=Jp,Pe.upperFirst=tb,Pe.each=nx,Pe.eachRight=ix,Pe.first=zv,em(Pe,function(){var u={};return Pa(Pe,function(f,w){Di.call(Pe.prototype,w)||(u[w]=f)}),u}(),{chain:!1}),Pe.VERSION="4.17.21",gs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Pe[u].placeholder=Pe}),gs(["drop","take"],function(u,f){ui.prototype[u]=function(w){w=w===b?1:fn(jn(w),0);var ee=this.__filtered__&&!f?new ui(this):this.clone();return ee.__filtered__?ee.__takeCount__=oi(w,ee.__takeCount__):ee.__views__.push({size:oi(w,me),type:u+(ee.__dir__<0?"Right":"")}),ee},ui.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),gs(["filter","map","takeWhile"],function(u,f){var w=f+1,ee=1==w||3==w;ui.prototype[u]=function(Ee){var Be=this.clone();return Be.__iteratees__.push({iteratee:bn(Ee,3),type:w}),Be.__filtered__=Be.__filtered__||ee,Be}}),gs(["head","last"],function(u,f){var w="take"+(f?"Right":"");ui.prototype[u]=function(){return this[w](1).value()[0]}}),gs(["initial","tail"],function(u,f){var w="drop"+(f?"":"Right");ui.prototype[u]=function(){return this.__filtered__?new ui(this):this[w](1)}}),ui.prototype.compact=function(){return this.filter(ss)},ui.prototype.find=function(u){return this.filter(u).head()},ui.prototype.findLast=function(u){return this.reverse().find(u)},ui.prototype.invokeMap=si(function(u,f){return"function"==typeof u?new ui(this):this.map(function(w){return hh(w,u,f)})}),ui.prototype.reject=function(u){return this.filter(Lp(bn(u)))},ui.prototype.slice=function(u,f){u=jn(u);var w=this;return w.__filtered__&&(u>0||f<0)?new ui(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),f!==b&&(w=(f=jn(f))<0?w.dropRight(-f):w.take(f-u)),w)},ui.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ui.prototype.toArray=function(){return this.take(me)},Pa(ui.prototype,function(u,f){var w=/^(?:filter|find|map|reject)|While$/.test(f),ee=/^(?:head|last)$/.test(f),Ee=Pe[ee?"take"+("last"==f?"Right":""):f],Be=ee||/^find/.test(f);Ee&&(Pe.prototype[f]=function(){var et=this.__wrapped__,it=ee?[1]:arguments,lt=et instanceof ui,At=it[0],St=lt||Yn(et),Ot=function(li){var Xn=Ee.apply(Pe,Ln([li],it));return ee&&Yt?Xn[0]:Xn};St&&w&&"function"==typeof At&&1!=At.length&&(lt=St=!1);var Yt=this.__chain__,yn=Be&&!Yt,Ut=lt&&!this.__actions__.length;if(!Be&&St){et=Ut?et:new ui(this);var Cn=u.apply(et,it);return Cn.__actions__.push({func:S_,args:[Ot],thisArg:b}),new Zo(Cn,Yt)}return yn&&Ut?u.apply(this,it):(Cn=this.thru(Ot),yn?ee?Cn.value()[0]:Cn.value():Cn)})}),gs(["pop","push","shift","sort","splice","unshift"],function(u){var f=Wf[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",ee=/^(?:pop|shift)$/.test(u);Pe.prototype[u]=function(){var Ee=arguments;if(ee&&!this.__chain__){var Be=this.value();return f.apply(Yn(Be)?Be:[],Ee)}return this[w](function(et){return f.apply(Yn(et)?et:[],Ee)})}}),Pa(ui.prototype,function(u,f){var w=Pe[f];if(w){var ee=w.name+"";Di.call(Xi,ee)||(Xi[ee]=[]),Xi[ee].push({name:f,func:w})}}),Xi[ph(b,2).name]=[{name:"wrapper",func:b}],ui.prototype.clone=function Oa(){var u=new ui(this.__wrapped__);return u.__actions__=Eo(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Eo(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Eo(this.__views__),u},ui.prototype.reverse=function Jf(){if(this.__filtered__){var u=new ui(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},ui.prototype.value=function Xd(){var u=this.__wrapped__.value(),f=this.__dir__,w=Yn(u),ee=f<0,Ee=w?u.length:0,Be=function YS(u,f,w){for(var ee=-1,Ee=w.length;++ee<Ee;){var Be=w[ee],et=Be.size;switch(Be.type){case"drop":u+=et;break;case"dropRight":f-=et;break;case"take":f=oi(f,u+et);break;case"takeRight":u=fn(u,f-et)}}return{start:u,end:f}}(0,Ee,this.__views__),et=Be.start,it=Be.end,lt=it-et,At=ee?it:et-1,St=this.__iteratees__,Ot=St.length,Yt=0,pn=oi(lt,this.__takeCount__);if(!w||!ee&&Ee==lt&&pn==lt)return dp(u,this.__actions__);var yn=[];e:for(;lt--&&Yt<pn;){for(var Ut=-1,Cn=u[At+=f];++Ut<Ot;){var li=St[Ut],As=li.type,Vo=(0,li.iteratee)(Cn);if(2==As)Cn=Vo;else if(!Vo){if(1==As)continue e;break e}}yn[Yt++]=Cn}return yn},Pe.prototype.at=tF,Pe.prototype.chain=function nF(){return wC(this)},Pe.prototype.commit=function iF(){return new Zo(this.value(),this.__chain__)},Pe.prototype.next=function rF(){this.__values__===b&&(this.__values__=wx(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Pe.prototype.plant=function Rp(u){for(var f,w=this;w instanceof qg;){var ee=eC(w);ee.__index__=0,ee.__values__=b,f?Ee.__wrapped__=ee:f=ee;var Ee=ee;w=w.__wrapped__}return Ee.__wrapped__=u,f},Pe.prototype.reverse=function Op(){var u=this.__wrapped__;if(u instanceof ui){var f=u;return this.__actions__.length&&(f=new ui(this)),(f=f.reverse()).__actions__.push({func:S_,args:[tl],thisArg:b}),new Zo(f,this.__chain__)}return this.thru(tl)},Pe.prototype.toJSON=Pe.prototype.valueOf=Pe.prototype.value=function Jv(){return dp(this.__wrapped__,this.__actions__)},Pe.prototype.first=Pe.prototype.head,Or&&(Pe.prototype[Or]=function EC(){return this}),Pe}();io._=Bs,(E=function(){return Bs}.call(J,m,J,te))!==b&&(te.exports=E)}.call(this)},7659:(te,J,m)=>{var E=m(1811);function D(A,k){if("function"!=typeof A||null!=k&&"function"!=typeof k)throw new TypeError("Expected a function");var g=function(){var y=arguments,M=k?k.apply(this,y):y[0],j=g.cache;if(j.has(M))return j.get(M);var N=A.apply(this,y);return g.cache=j.set(M,N)||j,N};return g.cache=new(D.Cache||E),g}D.Cache=E,te.exports=D},2692:(te,J,m)=>{var E=m(3400),b=m(6443),D=m(6300),A=m(8916);te.exports=function k(g){return D(g)?E(A(g)):b(g)}},7184:(te,J,m)=>{var E=m(1883),b=m(252),D=m(8951),A=m(3817),k=D(function(g,y){if(null==g)return[];var M=y.length;return M>1&&A(g,y[0],y[1])?y=[]:M>2&&A(y[0],y[1],y[2])&&(y=[y[0]]),b(g,E(y,1),[])});te.exports=k},1315:te=>{te.exports=function J(){return[]}},5706:te=>{te.exports=function J(){return!1}},2674:(te,J,m)=>{var E=m(7002);te.exports=function b(D){return null==D?"":E(D)}},5249:(te,J,m)=>{var E=m(549),b=E.ARRAY_BUFFER_SUPPORT,D=E.SYMBOL_SUPPORT;te.exports=function(k,g){var y,M,j,N,U;if(!k)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof g)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(k)||b&&ArrayBuffer.isView(k)||"string"==typeof k||"[object Arguments]"===k.toString())for(j=0,N=k.length;j<N;j++)g(k[j],j);else if("function"!=typeof k.forEach)if(D&&Symbol.iterator in k&&"function"!=typeof k.next&&(k=k[Symbol.iterator]()),"function"!=typeof k.next)for(M in k)k.hasOwnProperty(M)&&g(k[M],M);else for(y=k,j=0;!0!==(U=y.next()).done;)g(U.value,j),j++;else k.forEach(g)}},2508:te=>{function J(m){if("function"!=typeof m)throw new Error("obliterator/iterator: expecting a function!");this.next=m}typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=function(){return this}),J.of=function(){var m=arguments,E=m.length,b=0;return new J(function(){return b>=E?{done:!0}:{done:!1,value:m[b++]}})},J.empty=function(){return new J(function(){return{done:!0}})},J.fromSequence=function(m){var E=0,b=m.length;return new J(function(){return E>=b?{done:!0}:{done:!1,value:m[E++]}})},J.is=function(m){return m instanceof J||"object"==typeof m&&null!==m&&"function"==typeof m.next},te.exports=J},549:(te,J)=>{J.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",J.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(te,J,m)=>{var E=m(2508),b=m(5249);function D(){this.clear()}D.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},D.prototype.enqueue=function(A){return this.items.push(A),++this.size},D.prototype.dequeue=function(){if(this.size){var A=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,A}},D.prototype.peek=function(){if(this.size)return this.items[this.offset]},D.prototype.forEach=function(A,k){k=arguments.length>1?k:this;for(var g=this.offset,y=0,M=this.items.length;g<M;g++,y++)A.call(k,this.items[g],y,this)},D.prototype.toArray=function(){return this.items.slice(this.offset)},D.prototype.values=function(){var A=this.items,k=this.offset;return new E(function(){if(k>=A.length)return{done:!0};var g=A[k];return k++,{value:g,done:!1}})},D.prototype.entries=function(){var A=this.items,k=this.offset,g=0;return new E(function(){if(k>=A.length)return{done:!0};var y=A[k];return k++,{value:[g++,y],done:!1}})},typeof Symbol<"u"&&(D.prototype[Symbol.iterator]=D.prototype.values),D.prototype.toString=function(){return this.toArray().join(",")},D.prototype.toJSON=function(){return this.toArray()},D.prototype.inspect=function(){var A=this.toArray();return Object.defineProperty(A,"constructor",{value:D,enumerable:!1}),A},typeof Symbol<"u"&&(D.prototype[Symbol.for("nodejs.util.inspect.custom")]=D.prototype.inspect),D.from=function(A){var k=new D;return b(A,function(g){k.enqueue(g)}),k},D.of=function(){return D.from(arguments)},te.exports=D},5020:te=>{te.exports=function J(m,E,b){function D(g,y){if(!E[g]){if(!m[g]){if(A)return A(g,!0);throw new Error("Cannot find module '"+g+"'")}y=E[g]={exports:{}},m[g][0].call(y.exports,function(j){return D(m[g][1][j]||j)},y,y.exports,J,m,E,b)}return E[g].exports}for(var A=void 0,k=0;k<b.length;k++)D(b[k]);return D}({1:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){"use strict";var U=J("crypto");function ce(W,z){var v;return void 0===(v="passthrough"!==(z=ae(W,z)).algorithm?U.createHash(z.algorithm):new ne).write&&(v.write=v.update,v.end=v.update),re(z,v).dispatch(W),v.update||v.end(""),v.digest?v.digest("buffer"===z.encoding?void 0:z.encoding):(W=v.read(),"buffer"!==z.encoding?W.toString(z.encoding):W)}(E=m.exports=ce).sha1=function(W){return ce(W)},E.keys=function(W){return ce(W,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},E.MD5=function(W){return ce(W,{algorithm:"md5",encoding:"hex"})},E.keysMD5=function(W){return ce(W,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var R=U.getHashes?U.getHashes().slice():["sha1","md5"],$=(R.push("passthrough"),["buffer","hex","binary","base64"]);function ae(W,z){var v={};if(v.algorithm=(z=z||{}).algorithm||"sha1",v.encoding=z.encoding||"hex",v.excludeValues=!!z.excludeValues,v.algorithm=v.algorithm.toLowerCase(),v.encoding=v.encoding.toLowerCase(),v.ignoreUnknown=!0===z.ignoreUnknown,v.respectType=!1!==z.respectType,v.respectFunctionNames=!1!==z.respectFunctionNames,v.respectFunctionProperties=!1!==z.respectFunctionProperties,v.unorderedArrays=!0===z.unorderedArrays,v.unorderedSets=!1!==z.unorderedSets,v.unorderedObjects=!1!==z.unorderedObjects,v.replacer=z.replacer||void 0,v.excludeKeys=z.excludeKeys||void 0,void 0===W)throw new Error("Object argument required.");for(var L=0;L<R.length;++L)R[L].toLowerCase()===v.algorithm.toLowerCase()&&(v.algorithm=R[L]);if(-1===R.indexOf(v.algorithm))throw new Error('Algorithm "'+v.algorithm+'"  not supported. supported values: '+R.join(", "));if(-1===$.indexOf(v.encoding)&&"passthrough"!==v.algorithm)throw new Error('Encoding "'+v.encoding+'"  not supported. supported values: '+$.join(", "));return v}function Y(W){if("function"==typeof W)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(W))}function re(W,z,v){function L(T){return z.update?z.update(T,"utf8"):z.write(T,"utf8")}return v=v||[],{dispatch:function(T){return this["_"+(null===(T=W.replacer?W.replacer(T):T)?"null":typeof T)](T)},_object:function(T){var he,H=Object.prototype.toString.call(T),Ce=/\[object (.*)\]/i.exec(H);if(Ce=(Ce=Ce?Ce[1]:"unknown:["+H+"]").toLowerCase(),0<=(H=v.indexOf(T)))return this.dispatch("[CIRCULAR:"+H+"]");if(v.push(T),void 0!==A&&A.isBuffer&&A.isBuffer(T))return L("buffer:"),L(T);if("object"===Ce||"function"===Ce||"asyncfunction"===Ce)return H=Object.keys(T),W.unorderedObjects&&(H=H.sort()),!1===W.respectType||Y(T)||H.splice(0,0,"prototype","__proto__","constructor"),W.excludeKeys&&(H=H.filter(function(le){return!W.excludeKeys(le)})),L("object:"+H.length+":"),he=this,H.forEach(function(le){he.dispatch(le),L(":"),W.excludeValues||he.dispatch(T[le]),L(",")});if(!this["_"+Ce]){if(W.ignoreUnknown)return L("["+Ce+"]");throw new Error('Unknown object type "'+Ce+'"')}this["_"+Ce](T)},_array:function(T,le){le=void 0!==le?le:!1!==W.unorderedArrays;var H=this;if(L("array:"+T.length+":"),!le||T.length<=1)return T.forEach(function(xe){return H.dispatch(xe)});var Ce=[];return le=T.map(function(xe){var Ie=new ne,De=v.slice();return re(W,Ie,De).dispatch(xe),Ce=Ce.concat(De.slice(v.length)),Ie.read().toString()}),v=v.concat(Ce),le.sort(),this._array(le,!1)},_date:function(T){return L("date:"+T.toJSON())},_symbol:function(T){return L("symbol:"+T.toString())},_error:function(T){return L("error:"+T.toString())},_boolean:function(T){return L("bool:"+T.toString())},_string:function(T){L("string:"+T.length+":"),L(T.toString())},_function:function(T){L("fn:"),Y(T)?this.dispatch("[native]"):this.dispatch(T.toString()),!1!==W.respectFunctionNames&&this.dispatch("function-name:"+String(T.name)),W.respectFunctionProperties&&this._object(T)},_number:function(T){return L("number:"+T.toString())},_xml:function(T){return L("xml:"+T.toString())},_null:function(){return L("Null")},_undefined:function(){return L("Undefined")},_regexp:function(T){return L("regex:"+T.toString())},_uint8array:function(T){return L("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return L("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return L("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return L("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return L("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return L("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return L("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return L("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return L("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return L("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return L("url:"+T.toString())},_map:function(T){return L("map:"),T=Array.from(T),this._array(T,!1!==W.unorderedSets)},_set:function(T){return L("set:"),T=Array.from(T),this._array(T,!1!==W.unorderedSets)},_file:function(T){return L("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(W.ignoreUnknown)return L("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return L("domwindow")},_bigint:function(T){return L("bigint:"+T.toString())},_process:function(){return L("process")},_timer:function(){return L("timer")},_pipe:function(){return L("pipe")},_tcp:function(){return L("tcp")},_udp:function(){return L("udp")},_tty:function(){return L("tty")},_statwatcher:function(){return L("statwatcher")},_securecontext:function(){return L("securecontext")},_connection:function(){return L("connection")},_zlib:function(){return L("zlib")},_context:function(){return L("context")},_nodescript:function(){return L("nodescript")},_httpparser:function(){return L("httpparser")},_dataview:function(){return L("dataview")},_signal:function(){return L("signal")},_fsevent:function(){return L("fsevent")},_tlswrap:function(){return L("tlswrap")}}}function ne(){return{buf:"",write:function(W){this.buf+=W},end:function(W){this.buf+=W},read:function(){return this.buf}}}E.writeToStream=function(W,z,v){return void 0===v&&(v=z,z={}),re(z=ae(W,z),v).dispatch(W)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){!function(U){"use strict";var ce=typeof Uint8Array<"u"?Uint8Array:Array,R="+".charCodeAt(0),$="/".charCodeAt(0),ae="0".charCodeAt(0),Y="a".charCodeAt(0),re="A".charCodeAt(0),ne="-".charCodeAt(0),W="_".charCodeAt(0);function z(v){return(v=v.charCodeAt(0))===R||v===ne?62:v===$||v===W?63:v<ae?-1:v<ae+10?v-ae+26+26:v<re+26?v-re:v<Y+26?v-Y+26:void 0}U.toByteArray=function(v){var L,T;if(0<v.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var he="="===v.charAt((he=v.length)-2)?2:"="===v.charAt(he-1)?1:0,H=new ce(3*v.length/4-he),Ce=0<he?v.length-4:v.length,le=0;function xe(Ie){H[le++]=Ie}for(L=0;L<Ce;L+=4,0)xe((16711680&(T=z(v.charAt(L))<<18|z(v.charAt(L+1))<<12|z(v.charAt(L+2))<<6|z(v.charAt(L+3))))>>16),xe((65280&T)>>8),xe(255&T);return 2==he?xe(255&(T=z(v.charAt(L))<<2|z(v.charAt(L+1))>>4)):1==he&&(xe((T=z(v.charAt(L))<<10|z(v.charAt(L+1))<<4|z(v.charAt(L+2))>>2)>>8&255),xe(255&T)),H},U.fromByteArray=function(v){var L,T,he,H,Ce=v.length%3,le="";function xe(Ie){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ie)}for(L=0,he=v.length-Ce;L<he;L+=3)le+=xe((H=T=(v[L]<<16)+(v[L+1]<<8)+v[L+2])>>18&63)+xe(H>>12&63)+xe(H>>6&63)+xe(63&H);switch(Ce){case 1:le=(le+=xe((T=v[v.length-1])>>2))+xe(T<<4&63)+"==";break;case 2:le=(le=(le+=xe((T=(v[v.length-2]<<8)+v[v.length-1])>>10))+xe(T>>4&63))+xe(T<<2&63)+"="}return le}}(void 0===E?this.base64js={}:E)}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(J,m,E){(function(b,D,R,k,g,y,M,j,N){var U=J("base64-js"),ce=J("ieee754");function R(ge,B,I){if(!(this instanceof R))return new R(ge,B,I);var se,K,Fe,Ve,pe=typeof ge;if("base64"===B&&"string"==pe)for(ge=(Ve=ge).trim?Ve.trim():Ve.replace(/^\s+|\s+$/g,"");ge.length%4!=0;)ge+="=";if("number"==pe)se=tt(ge);else if("string"==pe)se=R.byteLength(ge,B);else{if("object"!=pe)throw new Error("First argument needs to be a number, array or string.");se=tt(ge.length)}if(R._useTypedArrays?K=R._augment(new Uint8Array(se)):((K=this).length=se,K._isBuffer=!0),R._useTypedArrays&&"number"==typeof ge.byteLength)K._set(ge);else if(Ye(Ve=ge)||R.isBuffer(Ve)||Ve&&"object"==typeof Ve&&"number"==typeof Ve.length)for(Fe=0;Fe<se;Fe++)K[Fe]=R.isBuffer(ge)?ge.readUInt8(Fe):ge[Fe];else if("string"==pe)K.write(ge,0,B);else if("number"==pe&&!R._useTypedArrays&&!I)for(Fe=0;Fe<se;Fe++)K[Fe]=0;return K}function re(ge,B,I,Fe){var K;if(Fe||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+1<ge.length,"Trying to read beyond buffer length")),!((Fe=ge.length)<=B))return I?(K=ge[B],B+1<Fe&&(K|=ge[B+1]<<8)):(K=ge[B]<<8,B+1<Fe&&(K|=ge[B+1])),K}function ne(ge,B,I,Fe){var K;if(Fe||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+3<ge.length,"Trying to read beyond buffer length")),!((Fe=ge.length)<=B))return I?(B+2<Fe&&(K=ge[B+2]<<16),B+1<Fe&&(K|=ge[B+1]<<8),K|=ge[B],B+3<Fe&&(K+=ge[B+3]<<24>>>0)):(B+1<Fe&&(K=ge[B+1]<<16),B+2<Fe&&(K|=ge[B+2]<<8),B+3<Fe&&(K|=ge[B+3]),K+=ge[B]<<24>>>0),K}function W(ge,B,I,se){if(se||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+1<ge.length,"Trying to read beyond buffer length")),!(ge.length<=B))return 32768&(se=re(ge,B,I,!0))?-1*(65535-se+1):se}function z(ge,B,I,se){if(se||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+3<ge.length,"Trying to read beyond buffer length")),!(ge.length<=B))return 2147483648&(se=ne(ge,B,I,!0))?-1*(4294967295-se+1):se}function v(ge,B,I,se){return se||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(B+3<ge.length,"Trying to read beyond buffer length")),ce.read(ge,B,I,23,4)}function L(ge,B,I,se){return se||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(B+7<ge.length,"Trying to read beyond buffer length")),ce.read(ge,B,I,52,8)}function T(ge,B,I,se,K){if(K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof se,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+1<ge.length,"trying to write beyond buffer length"),Se(B,65535)),!((K=ge.length)<=I))for(var Fe=0,Ve=Math.min(K-I,2);Fe<Ve;Fe++)ge[I+Fe]=(B&255<<8*(se?Fe:1-Fe))>>>8*(se?Fe:1-Fe)}function he(ge,B,I,se,K){if(K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof se,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+3<ge.length,"trying to write beyond buffer length"),Se(B,4294967295)),!((K=ge.length)<=I))for(var Fe=0,Ve=Math.min(K-I,4);Fe<Ve;Fe++)ge[I+Fe]=B>>>8*(se?Fe:3-Fe)&255}function H(ge,B,I,se,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof se,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+1<ge.length,"Trying to write beyond buffer length"),Xe(B,32767,-32768)),ge.length<=I||T(ge,0<=B?B:65535+B+1,I,se,K)}function Ce(ge,B,I,se,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof se,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+3<ge.length,"Trying to write beyond buffer length"),Xe(B,2147483647,-2147483648)),ge.length<=I||he(ge,0<=B?B:4294967295+B+1,I,se,K)}function le(ge,B,I,se,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof se,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+3<ge.length,"Trying to write beyond buffer length"),rt(B,34028234663852886e22,-34028234663852886e22)),ge.length<=I||ce.write(ge,B,I,se,23,4)}function xe(ge,B,I,se,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof se,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+7<ge.length,"Trying to write beyond buffer length"),rt(B,17976931348623157e292,-17976931348623157e292)),ge.length<=I||ce.write(ge,B,I,se,52,8)}E.Buffer=R,E.SlowBuffer=R,E.INSPECT_MAX_BYTES=50,R.poolSize=8192,R._useTypedArrays=function(){try{var ge=new ArrayBuffer(0),B=new Uint8Array(ge);return B.foo=function(){return 42},42===B.foo()&&"function"==typeof B.subarray}catch{return!1}}(),R.isEncoding=function(ge){switch(String(ge).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},R.isBuffer=function(ge){return!(null==ge||!ge._isBuffer)},R.byteLength=function(ge,B){var I;switch(ge+="",B||"utf8"){case"hex":I=ge.length/2;break;case"utf8":case"utf-8":I=Ne(ge).length;break;case"ascii":case"binary":case"raw":I=ge.length;break;case"base64":I=ke(ge).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":I=2*ge.length;break;default:throw new Error("Unknown encoding")}return I},R.concat=function(ge,B){if(Qe(Ye(ge),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===ge.length)return new R(0);if(1===ge.length)return ge[0];if("number"!=typeof B)for(K=B=0;K<ge.length;K++)B+=ge[K].length;for(var I=new R(B),se=0,K=0;K<ge.length;K++){var Fe=ge[K];Fe.copy(I,se),se+=Fe.length}return I},R.prototype.write=function(ge,B,I,se){isFinite(B)?isFinite(I)||(se=I,I=void 0):(Z=se,se=B,B=I,I=Z),B=Number(B)||0;var K,Fe,Ve,pe,Z=this.length-B;switch((!I||Z<(I=Number(I)))&&(I=Z),se=String(se||"utf8").toLowerCase()){case"hex":K=function(G,C,O,ue){O=Number(O)||0;var de=G.length-O;(!ue||de<(ue=Number(ue)))&&(ue=de),Qe((de=C.length)%2==0,"Invalid hex string"),de/2<ue&&(ue=de/2);for(var He=0;He<ue;He++){var Ke=parseInt(C.substr(2*He,2),16);Qe(!isNaN(Ke),"Invalid hex string"),G[O+He]=Ke}return R._charsWritten=2*He,He}(this,ge,B,I);break;case"utf8":case"utf-8":Fe=this,Ve=B,pe=I,K=R._charsWritten=ze(Ne(ge),Fe,Ve,pe);break;case"ascii":case"binary":K=function $(ge,B,I,se){return R._charsWritten=ze(function(K){for(var Fe=[],Ve=0;Ve<K.length;Ve++)Fe.push(255&K.charCodeAt(Ve));return Fe}(B),ge,I,se)}(this,ge,B,I);break;case"base64":Fe=this,Ve=B,pe=I,K=R._charsWritten=ze(ke(ge),Fe,Ve,pe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":K=function ae(ge,B,I,se){return R._charsWritten=ze(function(K){for(var Fe,Ve,pe=[],Z=0;Z<K.length;Z++)Fe=(Ve=K.charCodeAt(Z))>>8,pe.push(Ve%=256),pe.push(Fe);return pe}(B),ge,I,se)}(this,ge,B,I);break;default:throw new Error("Unknown encoding")}return K},R.prototype.toString=function(ge,B,I){var se,K,Fe,Ve,pe=this;if(ge=String(ge||"utf8").toLowerCase(),B=Number(B)||0,(I=void 0!==I?Number(I):pe.length)===B)return"";switch(ge){case"hex":se=function(Z,G,C){var O=Z.length;(!G||G<0)&&(G=0),(!C||C<0||O<C)&&(C=O);for(var ue="",de=G;de<C;de++)ue+=Ae(Z[de]);return ue}(pe,B,I);break;case"utf8":case"utf-8":se=function(Z,G,C){var O="",ue="";C=Math.min(Z.length,C);for(var de=G;de<C;de++)Z[de]<=127?(O+=me(ue)+String.fromCharCode(Z[de]),ue=""):ue+="%"+Z[de].toString(16);return O+me(ue)}(pe,B,I);break;case"ascii":case"binary":se=function Y(ge,B,I){var se="";I=Math.min(ge.length,I);for(var K=B;K<I;K++)se+=String.fromCharCode(ge[K]);return se}(pe,B,I);break;case"base64":K=pe,Ve=I,se=0===(Fe=B)&&Ve===K.length?U.fromByteArray(K):U.fromByteArray(K.slice(Fe,Ve));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":se=function(Z,G,C){for(var O=Z.slice(G,C),ue="",de=0;de<O.length;de+=2)ue+=String.fromCharCode(O[de]+256*O[de+1]);return ue}(pe,B,I);break;default:throw new Error("Unknown encoding")}return se},R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},R.prototype.copy=function(ge,B,I,se){if(B=B||0,(se=se||0===se?se:this.length)!==(I=I||0)&&0!==ge.length&&0!==this.length){Qe(I<=se,"sourceEnd < sourceStart"),Qe(0<=B&&B<ge.length,"targetStart out of bounds"),Qe(0<=I&&I<this.length,"sourceStart out of bounds"),Qe(0<=se&&se<=this.length,"sourceEnd out of bounds"),se>this.length&&(se=this.length);var K=(se=ge.length-B<se-I?ge.length-B+I:se)-I;if(K<100||!R._useTypedArrays)for(var Fe=0;Fe<K;Fe++)ge[Fe+B]=this[Fe+I];else ge._set(this.subarray(I,I+K),B)}},R.prototype.slice=function(ge,B){var I=this.length;if(ge=De(ge,I,0),B=De(B,I,I),R._useTypedArrays)return R._augment(this.subarray(ge,B));for(var se=B-ge,K=new R(se,void 0,!0),Fe=0;Fe<se;Fe++)K[Fe]=this[Fe+ge];return K},R.prototype.get=function(ge){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(ge)},R.prototype.set=function(ge,B){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(ge,B)},R.prototype.readUInt8=function(ge,B){if(B||(Qe(null!=ge,"missing offset"),Qe(ge<this.length,"Trying to read beyond buffer length")),!(ge>=this.length))return this[ge]},R.prototype.readUInt16LE=function(ge,B){return re(this,ge,!0,B)},R.prototype.readUInt16BE=function(ge,B){return re(this,ge,!1,B)},R.prototype.readUInt32LE=function(ge,B){return ne(this,ge,!0,B)},R.prototype.readUInt32BE=function(ge,B){return ne(this,ge,!1,B)},R.prototype.readInt8=function(ge,B){if(B||(Qe(null!=ge,"missing offset"),Qe(ge<this.length,"Trying to read beyond buffer length")),!(ge>=this.length))return 128&this[ge]?-1*(255-this[ge]+1):this[ge]},R.prototype.readInt16LE=function(ge,B){return W(this,ge,!0,B)},R.prototype.readInt16BE=function(ge,B){return W(this,ge,!1,B)},R.prototype.readInt32LE=function(ge,B){return z(this,ge,!0,B)},R.prototype.readInt32BE=function(ge,B){return z(this,ge,!1,B)},R.prototype.readFloatLE=function(ge,B){return v(this,ge,!0,B)},R.prototype.readFloatBE=function(ge,B){return v(this,ge,!1,B)},R.prototype.readDoubleLE=function(ge,B){return L(this,ge,!0,B)},R.prototype.readDoubleBE=function(ge,B){return L(this,ge,!1,B)},R.prototype.writeUInt8=function(ge,B,I){I||(Qe(null!=ge,"missing value"),Qe(null!=B,"missing offset"),Qe(B<this.length,"trying to write beyond buffer length"),Se(ge,255)),B>=this.length||(this[B]=ge)},R.prototype.writeUInt16LE=function(ge,B,I){T(this,ge,B,!0,I)},R.prototype.writeUInt16BE=function(ge,B,I){T(this,ge,B,!1,I)},R.prototype.writeUInt32LE=function(ge,B,I){he(this,ge,B,!0,I)},R.prototype.writeUInt32BE=function(ge,B,I){he(this,ge,B,!1,I)},R.prototype.writeInt8=function(ge,B,I){I||(Qe(null!=ge,"missing value"),Qe(null!=B,"missing offset"),Qe(B<this.length,"Trying to write beyond buffer length"),Xe(ge,127,-128)),B>=this.length||this.writeUInt8(0<=ge?ge:255+ge+1,B,I)},R.prototype.writeInt16LE=function(ge,B,I){H(this,ge,B,!0,I)},R.prototype.writeInt16BE=function(ge,B,I){H(this,ge,B,!1,I)},R.prototype.writeInt32LE=function(ge,B,I){Ce(this,ge,B,!0,I)},R.prototype.writeInt32BE=function(ge,B,I){Ce(this,ge,B,!1,I)},R.prototype.writeFloatLE=function(ge,B,I){le(this,ge,B,!0,I)},R.prototype.writeFloatBE=function(ge,B,I){le(this,ge,B,!1,I)},R.prototype.writeDoubleLE=function(ge,B,I){xe(this,ge,B,!0,I)},R.prototype.writeDoubleBE=function(ge,B,I){xe(this,ge,B,!1,I)},R.prototype.fill=function(ge,B,I){if(B=B||0,I=I||this.length,Qe("number"==typeof(ge="string"==typeof(ge=ge||0)?ge.charCodeAt(0):ge)&&!isNaN(ge),"value is not a number"),Qe(B<=I,"end < start"),I!==B&&0!==this.length){Qe(0<=B&&B<this.length,"start out of bounds"),Qe(0<=I&&I<=this.length,"end out of bounds");for(var se=B;se<I;se++)this[se]=ge}},R.prototype.inspect=function(){for(var ge=[],B=this.length,I=0;I<B;I++)if(ge[I]=Ae(this[I]),I===E.INSPECT_MAX_BYTES){ge[I+1]="...";break}return"<Buffer "+ge.join(" ")+">"},R.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(R._useTypedArrays)return new R(this).buffer;for(var ge=new Uint8Array(this.length),B=0,I=ge.length;B<I;B+=1)ge[B]=this[B];return ge.buffer};var Ie=R.prototype;function De(ge,B,I){return"number"!=typeof ge?I:B<=(ge=~~ge)?B:0<=ge||0<=(ge+=B)?ge:0}function tt(ge){return(ge=~~Math.ceil(+ge))<0?0:ge}function Ye(ge){return(Array.isArray||function(B){return"[object Array]"===Object.prototype.toString.call(B)})(ge)}function Ae(ge){return ge<16?"0"+ge.toString(16):ge.toString(16)}function Ne(ge){for(var B=[],I=0;I<ge.length;I++){var se=ge.charCodeAt(I);if(se<=127)B.push(ge.charCodeAt(I));else for(var K=I,Fe=(55296<=se&&se<=57343&&I++,encodeURIComponent(ge.slice(K,I+1)).substr(1).split("%")),Ve=0;Ve<Fe.length;Ve++)B.push(parseInt(Fe[Ve],16))}return B}function ke(ge){return U.toByteArray(ge)}function ze(ge,B,I,se){for(var K=0;K<se&&!(K+I>=B.length||K>=ge.length);K++)B[K+I]=ge[K];return K}function me(ge){try{return decodeURIComponent(ge)}catch{return String.fromCharCode(65533)}}function Se(ge,B){Qe("number"==typeof ge,"cannot write a non-number as a number"),Qe(0<=ge,"specified a negative value for writing an unsigned value"),Qe(ge<=B,"value is larger than maximum value for type"),Qe(Math.floor(ge)===ge,"value has a fractional component")}function Xe(ge,B,I){Qe("number"==typeof ge,"cannot write a non-number as a number"),Qe(ge<=B,"value larger than maximum allowed value"),Qe(I<=ge,"value smaller than minimum allowed value"),Qe(Math.floor(ge)===ge,"value has a fractional component")}function rt(ge,B,I){Qe("number"==typeof ge,"cannot write a non-number as a number"),Qe(ge<=B,"value larger than maximum allowed value"),Qe(I<=ge,"value smaller than minimum allowed value")}function Qe(ge,B){if(!ge)throw new Error(B||"Failed assertion")}R._augment=function(ge){return ge._isBuffer=!0,ge._get=ge.get,ge._set=ge.set,ge.get=Ie.get,ge.set=Ie.set,ge.write=Ie.write,ge.toString=Ie.toString,ge.toLocaleString=Ie.toString,ge.toJSON=Ie.toJSON,ge.copy=Ie.copy,ge.slice=Ie.slice,ge.readUInt8=Ie.readUInt8,ge.readUInt16LE=Ie.readUInt16LE,ge.readUInt16BE=Ie.readUInt16BE,ge.readUInt32LE=Ie.readUInt32LE,ge.readUInt32BE=Ie.readUInt32BE,ge.readInt8=Ie.readInt8,ge.readInt16LE=Ie.readInt16LE,ge.readInt16BE=Ie.readInt16BE,ge.readInt32LE=Ie.readInt32LE,ge.readInt32BE=Ie.readInt32BE,ge.readFloatLE=Ie.readFloatLE,ge.readFloatBE=Ie.readFloatBE,ge.readDoubleLE=Ie.readDoubleLE,ge.readDoubleBE=Ie.readDoubleBE,ge.writeUInt8=Ie.writeUInt8,ge.writeUInt16LE=Ie.writeUInt16LE,ge.writeUInt16BE=Ie.writeUInt16BE,ge.writeUInt32LE=Ie.writeUInt32LE,ge.writeUInt32BE=Ie.writeUInt32BE,ge.writeInt8=Ie.writeInt8,ge.writeInt16LE=Ie.writeInt16LE,ge.writeInt16BE=Ie.writeInt16BE,ge.writeInt32LE=Ie.writeInt32LE,ge.writeInt32BE=Ie.writeInt32BE,ge.writeFloatLE=Ie.writeFloatLE,ge.writeFloatBE=Ie.writeFloatBE,ge.writeDoubleLE=Ie.writeDoubleLE,ge.writeDoubleBE=Ie.writeDoubleBE,ge.fill=Ie.fill,ge.inspect=Ie.inspect,ge.toArrayBuffer=Ie.toArrayBuffer,ge}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(J,m,E){(function(b,D,U,k,g,y,M,j,N){U=J("buffer").Buffer;var R=new U(4);R.fill(0),m.exports={hash:function($,ae,Y,re){for(var ne=ae(function(T,he){T.length%4!=0&&(T=U.concat([T,R],T.length+(4-T.length%4)));for(var Ce=[],le=he?T.readInt32BE:T.readInt32LE,xe=0;xe<T.length;xe+=4)Ce.push(le.call(T,xe));return Ce}($=U.isBuffer($)?$:new U($),re),8*$.length),W=(ae=re,new U(Y)),z=ae?W.writeInt32BE:W.writeInt32LE,v=0;v<ne.length;v++)z.call(W,ne[v],4*v,!0);return W}}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(J,m,E){(function(b,D,U,k,g,y,M,j,N){U=J("buffer").Buffer;var ce=J("./sha"),R=J("./sha256"),$=J("./rng"),ae={sha1:ce,sha256:R,md5:J("./md5")},Y=64,re=new U(Y);function ne(T,he){var H=ae[T=T||"sha1"],Ce=[];return H||W("algorithm:",T,"is not yet supported"),{update:function(le){return U.isBuffer(le)||(le=new U(le)),Ce.push(le),this},digest:function(le){var xe=U.concat(Ce);return xe=he?function(Ie,De,tt){U.isBuffer(De)||(De=new U(De)),U.isBuffer(tt)||(tt=new U(tt)),De.length>Y?De=Ie(De):De.length<Y&&(De=U.concat([De,re],Y));for(var Ye=new U(Y),Ae=new U(Y),Ne=0;Ne<Y;Ne++)Ye[Ne]=54^De[Ne],Ae[Ne]=92^De[Ne];return tt=Ie(U.concat([Ye,tt])),Ie(U.concat([Ae,tt]))}(H,he,xe):H(xe),Ce=null,le?xe.toString(le):xe}}}function W(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}re.fill(0),E.createHash=function(T){return ne(T)},E.createHmac=ne,E.randomBytes=function(T,he){if(!he||!he.call)return new U($(T));try{he.call(this,void 0,new U($(T)))}catch(H){he(H)}};var z,v=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],L=function(T){E[T]=function(){W("sorry,",T,"is not implemented yet")}};for(z in v)L(v[z])}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){var U=J("./helpers");function ce(W,z){W[z>>5]|=128<<z%32,W[14+(z+64>>>9<<4)]=z;for(var v=1732584193,L=-271733879,T=-1732584194,he=271733878,H=0;H<W.length;H+=16){var Ce=v,le=L,xe=T,Ie=he;v=$(v,L,T,he,W[H+0],7,-680876936),he=$(he,v,L,T,W[H+1],12,-389564586),T=$(T,he,v,L,W[H+2],17,606105819),L=$(L,T,he,v,W[H+3],22,-1044525330),v=$(v,L,T,he,W[H+4],7,-176418897),he=$(he,v,L,T,W[H+5],12,1200080426),T=$(T,he,v,L,W[H+6],17,-1473231341),L=$(L,T,he,v,W[H+7],22,-45705983),v=$(v,L,T,he,W[H+8],7,1770035416),he=$(he,v,L,T,W[H+9],12,-1958414417),T=$(T,he,v,L,W[H+10],17,-42063),L=$(L,T,he,v,W[H+11],22,-1990404162),v=$(v,L,T,he,W[H+12],7,1804603682),he=$(he,v,L,T,W[H+13],12,-40341101),T=$(T,he,v,L,W[H+14],17,-1502002290),v=ae(v,L=$(L,T,he,v,W[H+15],22,1236535329),T,he,W[H+1],5,-165796510),he=ae(he,v,L,T,W[H+6],9,-1069501632),T=ae(T,he,v,L,W[H+11],14,643717713),L=ae(L,T,he,v,W[H+0],20,-373897302),v=ae(v,L,T,he,W[H+5],5,-701558691),he=ae(he,v,L,T,W[H+10],9,38016083),T=ae(T,he,v,L,W[H+15],14,-660478335),L=ae(L,T,he,v,W[H+4],20,-405537848),v=ae(v,L,T,he,W[H+9],5,568446438),he=ae(he,v,L,T,W[H+14],9,-1019803690),T=ae(T,he,v,L,W[H+3],14,-187363961),L=ae(L,T,he,v,W[H+8],20,1163531501),v=ae(v,L,T,he,W[H+13],5,-1444681467),he=ae(he,v,L,T,W[H+2],9,-51403784),T=ae(T,he,v,L,W[H+7],14,1735328473),v=Y(v,L=ae(L,T,he,v,W[H+12],20,-1926607734),T,he,W[H+5],4,-378558),he=Y(he,v,L,T,W[H+8],11,-2022574463),T=Y(T,he,v,L,W[H+11],16,1839030562),L=Y(L,T,he,v,W[H+14],23,-35309556),v=Y(v,L,T,he,W[H+1],4,-1530992060),he=Y(he,v,L,T,W[H+4],11,1272893353),T=Y(T,he,v,L,W[H+7],16,-155497632),L=Y(L,T,he,v,W[H+10],23,-1094730640),v=Y(v,L,T,he,W[H+13],4,681279174),he=Y(he,v,L,T,W[H+0],11,-358537222),T=Y(T,he,v,L,W[H+3],16,-722521979),L=Y(L,T,he,v,W[H+6],23,76029189),v=Y(v,L,T,he,W[H+9],4,-640364487),he=Y(he,v,L,T,W[H+12],11,-421815835),T=Y(T,he,v,L,W[H+15],16,530742520),v=re(v,L=Y(L,T,he,v,W[H+2],23,-995338651),T,he,W[H+0],6,-198630844),he=re(he,v,L,T,W[H+7],10,1126891415),T=re(T,he,v,L,W[H+14],15,-1416354905),L=re(L,T,he,v,W[H+5],21,-57434055),v=re(v,L,T,he,W[H+12],6,1700485571),he=re(he,v,L,T,W[H+3],10,-1894986606),T=re(T,he,v,L,W[H+10],15,-1051523),L=re(L,T,he,v,W[H+1],21,-2054922799),v=re(v,L,T,he,W[H+8],6,1873313359),he=re(he,v,L,T,W[H+15],10,-30611744),T=re(T,he,v,L,W[H+6],15,-1560198380),L=re(L,T,he,v,W[H+13],21,1309151649),v=re(v,L,T,he,W[H+4],6,-145523070),he=re(he,v,L,T,W[H+11],10,-1120210379),T=re(T,he,v,L,W[H+2],15,718787259),L=re(L,T,he,v,W[H+9],21,-343485551),v=ne(v,Ce),L=ne(L,le),T=ne(T,xe),he=ne(he,Ie)}return Array(v,L,T,he)}function R(W,z,v,L,T,he){return ne((z=ne(ne(z,W),ne(L,he)))<<T|z>>>32-T,v)}function $(W,z,v,L,T,he,H){return R(z&v|~z&L,W,z,T,he,H)}function ae(W,z,v,L,T,he,H){return R(z&L|v&~L,W,z,T,he,H)}function Y(W,z,v,L,T,he,H){return R(z^v^L,W,z,T,he,H)}function re(W,z,v,L,T,he,H){return R(v^(z|~L),W,z,T,he,H)}function ne(W,z){var v=(65535&W)+(65535&z);return(W>>16)+(z>>16)+(v>>16)<<16|65535&v}m.exports=function(W){return U.hash(W,ce,16)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){m.exports=function(ce){for(var R,$=new Array(ce),ae=0;ae<ce;ae++)!(3&ae)&&(R=4294967296*Math.random()),$[ae]=R>>>((3&ae)<<3)&255;return $}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){var U=J("./helpers");function ce(ae,Y){ae[Y>>5]|=128<<24-Y%32,ae[15+(Y+64>>9<<4)]=Y;for(var re,ne,W,z=Array(80),v=1732584193,L=-271733879,T=-1732584194,he=271733878,H=-1009589776,Ce=0;Ce<ae.length;Ce+=16){for(var le=v,xe=L,Ie=T,De=he,tt=H,Ye=0;Ye<80;Ye++){z[Ye]=Ye<16?ae[Ce+Ye]:$(z[Ye-3]^z[Ye-8]^z[Ye-14]^z[Ye-16],1);var Ae=R(R($(v,5),(Ae=L,ne=T,W=he,(re=Ye)<20?Ae&ne|~Ae&W:!(re<40)&&re<60?Ae&ne|Ae&W|ne&W:Ae^ne^W)),R(R(H,z[Ye]),(re=Ye)<20?1518500249:re<40?1859775393:re<60?-1894007588:-899497514));H=he,he=T,T=$(L,30),L=v,v=Ae}v=R(v,le),L=R(L,xe),T=R(T,Ie),he=R(he,De),H=R(H,tt)}return Array(v,L,T,he,H)}function R(ae,Y){var re=(65535&ae)+(65535&Y);return(ae>>16)+(Y>>16)+(re>>16)<<16|65535&re}function $(ae,Y){return ae<<Y|ae>>>32-Y}m.exports=function(ae){return U.hash(ae,ce,20,!0)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){function U(Y,re){var ne=(65535&Y)+(65535&re);return(Y>>16)+(re>>16)+(ne>>16)<<16|65535&ne}function ce(Y,re){var ne,W=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),z=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),v=new Array(64);Y[re>>5]|=128<<24-re%32,Y[15+(re+64>>9<<4)]=re;for(var L,T,he=0;he<Y.length;he+=16){for(var H=z[0],Ce=z[1],le=z[2],xe=z[3],Ie=z[4],De=z[5],tt=z[6],Ye=z[7],Ae=0;Ae<64;Ae++)v[Ae]=Ae<16?Y[Ae+he]:U(U(U($(T=v[Ae-2],17)^$(T,19)^ae(T,10),v[Ae-7]),$(T=v[Ae-15],7)^$(T,18)^ae(T,3)),v[Ae-16]),ne=U(U(U(U(Ye,$(T=Ie,6)^$(T,11)^$(T,25)),Ie&De^~Ie&tt),W[Ae]),v[Ae]),L=U($(L=H,2)^$(L,13)^$(L,22),H&Ce^H&le^Ce&le),Ye=tt,tt=De,De=Ie,Ie=U(xe,ne),xe=le,le=Ce,Ce=H,H=U(ne,L);z[0]=U(H,z[0]),z[1]=U(Ce,z[1]),z[2]=U(le,z[2]),z[3]=U(xe,z[3]),z[4]=U(Ie,z[4]),z[5]=U(De,z[5]),z[6]=U(tt,z[6]),z[7]=U(Ye,z[7])}return z}var R=J("./helpers"),$=function(Y,re){return Y>>>re|Y<<32-re},ae=function(Y,re){return Y>>>re};m.exports=function(Y){return R.hash(Y,ce,32,!0)}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){E.read=function(U,ce,R,$,he){var Y,re,ne=8*he-$-1,W=(1<<ne)-1,z=W>>1,v=-7,L=R?he-1:0,T=R?-1:1;for(he=U[ce+L],L+=T,Y=he&(1<<-v)-1,he>>=-v,v+=ne;0<v;Y=256*Y+U[ce+L],L+=T,v-=8);for(re=Y&(1<<-v)-1,Y>>=-v,v+=$;0<v;re=256*re+U[ce+L],L+=T,v-=8);if(0===Y)Y=1-z;else{if(Y===W)return re?NaN:1/0*(he?-1:1);re+=Math.pow(2,$),Y-=z}return(he?-1:1)*re*Math.pow(2,Y-$)},E.write=function(U,ce,R,$,ae,H){var re,ne,W=8*H-ae-1,z=(1<<W)-1,v=z>>1,L=23===ae?Math.pow(2,-24)-Math.pow(2,-77):0,T=$?0:H-1,he=$?1:-1;for(H=ce<0||0===ce&&1/ce<0?1:0,ce=Math.abs(ce),isNaN(ce)||ce===1/0?(ne=isNaN(ce)?1:0,re=z):(re=Math.floor(Math.log(ce)/Math.LN2),ce*($=Math.pow(2,-re))<1&&(re--,$*=2),2<=(ce+=1<=re+v?L/$:L*Math.pow(2,1-v))*$&&(re++,$/=2),z<=re+v?(ne=0,re=z):1<=re+v?(ne=(ce*$-1)*Math.pow(2,ae),re+=v):(ne=ce*Math.pow(2,v-1)*Math.pow(2,ae),re=0));8<=ae;U[R+T]=255&ne,T+=he,ne/=256,ae-=8);for(re=re<<ae|ne,W+=ae;0<W;U[R+T]=255&re,T+=he,re/=256,W-=8);U[R+T-he]|=128*H}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(J,m,E){(function(b,D,A,k,g,y,M,j,N){var U,ce,R;function $(){}(b=m.exports={}).nextTick=(ce=typeof window<"u"&&window.setImmediate,R=typeof window<"u"&&window.postMessage&&window.addEventListener,ce?function(ae){return window.setImmediate(ae)}:R?(U=[],window.addEventListener("message",function(ae){var Y=ae.source;Y!==window&&null!==Y||"process-tick"!==ae.data||(ae.stopPropagation(),0<U.length&&U.shift()())},!0),function(ae){U.push(ae),window.postMessage("process-tick","*")}):function(ae){setTimeout(ae,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=$,b.addListener=$,b.once=$,b.off=$,b.removeListener=$,b.removeAllListeners=$,b.emit=$,b.binding=function(ae){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(ae){throw new Error("process.chdir is not supported")}}).call(this,J("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:te=>{var m,E,J=te.exports={};function b(){throw new Error("setTimeout has not been defined")}function D(){throw new Error("clearTimeout has not been defined")}function A($){if(m===setTimeout)return setTimeout($,0);if((m===b||!m)&&setTimeout)return m=setTimeout,setTimeout($,0);try{return m($,0)}catch{try{return m.call(null,$,0)}catch{return m.call(this,$,0)}}}!function(){try{m="function"==typeof setTimeout?setTimeout:b}catch{m=b}try{E="function"==typeof clearTimeout?clearTimeout:D}catch{E=D}}();var M,g=[],y=!1,j=-1;function N(){!y||!M||(y=!1,M.length?g=M.concat(g):j=-1,g.length&&U())}function U(){if(!y){var $=A(N);y=!0;for(var ae=g.length;ae;){for(M=g,g=[];++j<ae;)M&&M[j].run();j=-1,ae=g.length}M=null,y=!1,function k($){if(E===clearTimeout)return clearTimeout($);if((E===D||!E)&&clearTimeout)return E=clearTimeout,clearTimeout($);try{return E($)}catch{try{return E.call(null,$)}catch{return E.call(this,$)}}}($)}}function ce($,ae){this.fun=$,this.array=ae}function R(){}J.nextTick=function($){var ae=new Array(arguments.length-1);if(arguments.length>1)for(var Y=1;Y<arguments.length;Y++)ae[Y-1]=arguments[Y];g.push(new ce($,ae)),1===g.length&&!y&&A(U)},ce.prototype.run=function(){this.fun.apply(null,this.array)},J.title="browser",J.browser=!0,J.env={},J.argv=[],J.version="",J.versions={},J.on=R,J.addListener=R,J.once=R,J.off=R,J.removeListener=R,J.removeAllListeners=R,J.emit=R,J.prependListener=R,J.prependOnceListener=R,J.listeners=function($){return[]},J.binding=function($){throw new Error("process.binding is not supported")},J.cwd=function(){return"/"},J.chdir=function($){throw new Error("process.chdir is not supported")},J.umask=function(){return 0}},3410:te=>{let J;te.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):m=>(J||(J=Promise.resolve())).then(m).catch(E=>setTimeout(()=>{throw E},0))},1986:(te,J,m)=>{te.exports=m(7842)},5327:te=>{"use strict";te.exports=class sX{constructor(m,E=new Map,b=0){this.prefix=m,this._existing=E,this.counter=b}clone(){const{prefix:m,_existing:E,counter:b}=this;return new sX(m,new Map(E),b)}getId(m){const E=m&&this._existing.get(m);if(E)return E;const b=this.prefix+this.counter;return this.counter++,m&&this._existing.set(m,b),b}hasId(m){return this._existing.has(m)}getOldIds(){return[...this._existing.keys()]}}},7475:(te,J,m)=>{"use strict";var E=m(7156).default;m(8280);const b=self.crypto||self.msCrypto;te.exports=class{constructor(A){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===A)this.algorithm={name:"SHA-256"};else{if("sha1"!==A)throw new Error(`Unsupported algorithm "${A}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(A){this._content+=A}digest(){var A=this;return E(function*(){const k=(new TextEncoder).encode(A._content),g=new Uint8Array(yield b.subtle.digest(A.algorithm,k));let y="";for(let M=0;M<g.length;++M)y+=g[M].toString(16).padStart(2,"0");return y})()}}},8003:te=>{"use strict";const E="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",D="NamedNode",A="BlankNode",k="Literal",g="DefaultGraph",y={};function M(R,$){return R.subject.termType===$.subject.termType&&R.object.termType===$.object.termType&&R.subject.value===$.subject.value&&R.predicate.value===$.predicate.value&&R.object.value===$.object.value&&(R.object.termType!==k||R.object.datatype.termType===$.object.datatype.termType&&R.object.language===$.object.language&&R.object.datatype.value===$.object.datatype.value)}(()=>{const R="(?:<([^:]+:[^>]*)>)",ae="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",Y=ae+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ne="(_:(?:["+ae+"0-9])(?:(?:["+Y+".])*(?:["+Y+"]))?)",T="[ \\t]+",he="[ \\t]*",H="(?:"+R+"|"+ne+")"+T,Ce=R+T,le="(?:"+R+"|"+ne+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+R+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+he,xe="(?:\\.|(?:(?:"+R+"|"+ne+")"+he+"\\.))";y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp("^"+he+H+Ce+le+xe+he+"$")})(),te.exports=class tS{static parse($){const ae=[],Y={},re=$.split(y.eoln);let ne=0;for(const W of re){if(ne++,y.empty.test(W))continue;const z=W.match(y.quad);if(null===z)throw new Error("N-Quads parse error on line "+ne+".");const v={subject:null,predicate:null,object:null,graph:null};if(v.subject=void 0!==z[1]?{termType:D,value:z[1]}:{termType:A,value:z[2]},v.predicate={termType:D,value:z[3]},void 0!==z[4]?v.object={termType:D,value:z[4]}:void 0!==z[5]?v.object={termType:A,value:z[5]}:(v.object={termType:k,value:void 0,datatype:{termType:D}},void 0!==z[7]?v.object.datatype.value=z[7]:void 0!==z[8]?(v.object.datatype.value=E,v.object.language=z[8]):v.object.datatype.value=b,v.object.value=z[6].replace(U,function($,ae,Y,re){if(ae)switch(ae){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(Y)return String.fromCharCode(parseInt(Y,16));if(re)throw new Error("Unsupported U escape")})),v.graph=void 0!==z[9]?{termType:D,value:z[9]}:void 0!==z[10]?{termType:A,value:z[10]}:{termType:g,value:""},v.graph.value in Y){let L=!0;const T=Y[v.graph.value];for(const he of T)if(M(he,v)){L=!1;break}L&&(T.push(v),ae.push(v))}else Y[v.graph.value]=[v],ae.push(v)}return ae}static serialize($){Array.isArray($)||($=tS.legacyDatasetToQuads($));const ae=[];for(const Y of $)ae.push(tS.serializeQuad(Y));return ae.sort().join("")}static serializeQuadComponents($,ae,Y,re){let ne="";return ne+=$.termType===D?`<${$.value}>`:`${$.value}`,ne+=` <${ae.value}> `,Y.termType===D?ne+=`<${Y.value}>`:Y.termType===A?ne+=Y.value:(ne+=`"${function N(R){return R.replace(j,function($){switch($){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(Y.value)}"`,Y.datatype.value===E?Y.language&&(ne+=`@${Y.language}`):Y.datatype.value!==b&&(ne+=`^^<${Y.datatype.value}>`)),re.termType===D?ne+=` <${re.value}>`:re.termType===A&&(ne+=` ${re.value}`),ne+=" .\n",ne}static serializeQuad($){return tS.serializeQuadComponents($.subject,$.predicate,$.object,$.graph)}static legacyDatasetToQuads($){const ae=[],Y={"blank node":A,IRI:D,literal:k};for(const re in $)$[re].forEach(W=>{const z={};for(const v in W){const L=W[v],T={termType:Y[L.type],value:L.value};T.termType===k&&(T.datatype={termType:D},"datatype"in L&&(T.datatype.value=L.datatype),"language"in L?("datatype"in L||(T.datatype.value=E),T.language=L.language):"datatype"in L||(T.datatype.value=b)),z[v]=T}z.graph="@default"===re?{termType:g,value:""}:{termType:re.startsWith("_:")?A:D,value:re},ae.push(z)});return ae}};const j=/["\\\n\r]/g,U=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:te=>{"use strict";te.exports=class{constructor(m){this.current=m.sort(),this.done=!1,this.dir=new Map;for(let E=0;E<m.length;++E)this.dir.set(m[E],!0)}hasNext(){return!this.done}next(){const{current:m,dir:E}=this,b=m.slice();let D=null,A=0;const k=m.length;for(let g=0;g<k;++g){const y=m[g],M=E.get(y);(null===D||y>D)&&(M&&g>0&&y>m[g-1]||!M&&g<k-1&&y>m[g+1])&&(D=y,A=g)}if(null===D)this.done=!0;else{const g=E.get(D)?A-1:A+1;m[A]=m[g],m[g]=D;for(const y of m)y>D&&E.set(y,!E.get(y))}return b}}},7218:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(5327),D=m(7475),A=m(7790),k=m(8003);function g(y,M){return y.hash<M.hash?-1:y.hash>M.hash?1:0}te.exports=class{constructor({createMessageDigest:M=(()=>new D("sha256")),canonicalIdMap:j=new Map,maxDeepIterations:N=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",j),this.createMessageDigest=M,this.maxDeepIterations=N,this.quads=null,this.deepIterations=null}main(M){var j=this;return E(function*(){j.deepIterations=new Map,j.quads=M;for(const Y of M)j._addBlankNodeQuadInfo({quad:Y,component:Y.subject}),j._addBlankNodeQuadInfo({quad:Y,component:Y.object}),j._addBlankNodeQuadInfo({quad:Y,component:Y.graph});const N=new Map,U=[...j.blankNodeInfo.keys()];let ce=0;for(const Y of U)++ce%100==0&&(yield j._yield()),yield j._hashAndTrackBlankNode({id:Y,hashToBlankNodes:N});const R=[...N.keys()].sort(),$=[];for(const Y of R){const re=N.get(Y);re.length>1?$.push(re):j.canonicalIssuer.getId(re[0])}for(const Y of $){const re=[];for(const ne of Y){if(j.canonicalIssuer.hasId(ne))continue;const W=new b("_:b");W.getId(ne);const z=yield j.hashNDegreeQuads(ne,W);re.push(z)}re.sort(g);for(const ne of re){const W=ne.issuer.getOldIds();for(const z of W)j.canonicalIssuer.getId(z)}}const ae=[];for(const Y of j.quads){const re=k.serializeQuadComponents(j._componentWithCanonicalId(Y.subject),Y.predicate,j._componentWithCanonicalId(Y.object),j._componentWithCanonicalId(Y.graph));ae.push(re)}return ae.sort(),ae.join("")})()}hashFirstDegreeQuads(M){var j=this;return E(function*(){const N=[],U=j.blankNodeInfo.get(M),ce=U.quads;for(const $ of ce){const ae={subject:null,predicate:$.predicate,object:null,graph:null};ae.subject=j.modifyFirstDegreeComponent(M,$.subject,"subject"),ae.object=j.modifyFirstDegreeComponent(M,$.object,"object"),ae.graph=j.modifyFirstDegreeComponent(M,$.graph,"graph"),N.push(k.serializeQuad(ae))}N.sort();const R=j.createMessageDigest();for(const $ of N)R.update($);return U.hash=yield R.digest(),U.hash})()}hashRelatedBlankNode(M,j,N,U){var ce=this;return E(function*(){let R;R=ce.canonicalIssuer.hasId(M)?ce.canonicalIssuer.getId(M):N.hasId(M)?N.getId(M):ce.blankNodeInfo.get(M).hash;const $=ce.createMessageDigest();return $.update(U),"g"!==U&&$.update(ce.getRelatedPredicate(j)),$.update(R),$.digest()})()}hashNDegreeQuads(M,j){var N=this;return E(function*(){const U=N.deepIterations.get(M)||0;if(U>N.maxDeepIterations)throw new Error(`Maximum deep iterations (${N.maxDeepIterations}) exceeded.`);N.deepIterations.set(M,U+1);const ce=N.createMessageDigest(),R=yield N.createHashToRelated(M,j),$=[...R.keys()].sort();for(const ae of $){ce.update(ae);let re,Y="";const ne=new A(R.get(ae));let W=0;for(;ne.hasNext();){const z=ne.next();++W%3==0&&(yield N._yield());let v=j.clone(),L="";const T=[];let he=!1;for(const H of z)if(N.canonicalIssuer.hasId(H)?L+=N.canonicalIssuer.getId(H):(v.hasId(H)||T.push(H),L+=v.getId(H)),0!==Y.length&&L>Y){he=!0;break}if(!he){for(const H of T){const Ce=yield N.hashNDegreeQuads(H,v);if(L+=v.getId(H),L+=`<${Ce.hash}>`,v=Ce.issuer,0!==Y.length&&L>Y){he=!0;break}}he||(0===Y.length||L<Y)&&(Y=L,re=v)}}ce.update(Y),j=re}return{hash:yield ce.digest(),issuer:j}})()}modifyFirstDegreeComponent(M,j){return"BlankNode"!==j.termType?j:{termType:"BlankNode",value:j.value===M?"_:a":"_:z"}}getRelatedPredicate(M){return`<${M.predicate.value}>`}createHashToRelated(M,j){var N=this;return E(function*(){const U=new Map,ce=N.blankNodeInfo.get(M).quads;let R=0;for(const $ of ce)++R%100==0&&(yield N._yield()),yield Promise.all([N._addRelatedBlankNodeHash({quad:$,component:$.subject,position:"s",id:M,issuer:j,hashToRelated:U}),N._addRelatedBlankNodeHash({quad:$,component:$.object,position:"o",id:M,issuer:j,hashToRelated:U}),N._addRelatedBlankNodeHash({quad:$,component:$.graph,position:"g",id:M,issuer:j,hashToRelated:U})]);return U})()}_hashAndTrackBlankNode({id:M,hashToBlankNodes:j}){var N=this;return E(function*(){const U=yield N.hashFirstDegreeQuads(M),ce=j.get(U);ce?ce.push(M):j.set(U,[M])})()}_addBlankNodeQuadInfo({quad:M,component:j}){if("BlankNode"!==j.termType)return;const N=j.value,U=this.blankNodeInfo.get(N);U?U.quads.add(M):this.blankNodeInfo.set(N,{quads:new Set([M]),hash:null})}_addRelatedBlankNodeHash({quad:M,component:j,position:N,id:U,issuer:ce,hashToRelated:R}){var $=this;return E(function*(){if("BlankNode"!==j.termType||j.value===U)return;const ae=j.value,Y=yield $.hashRelatedBlankNode(ae,M,ce,N),re=R.get(Y);re?re.push(ae):R.set(Y,[ae])})()}_componentWithCanonicalId(M){return"BlankNode"!==M.termType||M.value.startsWith(this.canonicalIssuer.prefix)?M:{termType:"BlankNode",value:this.canonicalIssuer.getId(M.value)}}_yield(){return E(function*(){return new Promise(M=>setImmediate(M))})()}}},9123:(te,J,m)=>{"use strict";const E=m(5327),b=m(7475),D=m(7790),A=m(8003);function k(g,y){return g.hash<y.hash?-1:g.hash>y.hash?1:0}te.exports=class{constructor({createMessageDigest:y=(()=>new b("sha256")),canonicalIdMap:M=new Map,maxDeepIterations:j=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new E("_:c14n",M),this.createMessageDigest=y,this.maxDeepIterations=j,this.quads=null,this.deepIterations=null}main(y){this.deepIterations=new Map,this.quads=y;for(const R of y)this._addBlankNodeQuadInfo({quad:R,component:R.subject}),this._addBlankNodeQuadInfo({quad:R,component:R.object}),this._addBlankNodeQuadInfo({quad:R,component:R.graph});const M=new Map,j=[...this.blankNodeInfo.keys()];for(const R of j)this._hashAndTrackBlankNode({id:R,hashToBlankNodes:M});const N=[...M.keys()].sort(),U=[];for(const R of N){const $=M.get(R);$.length>1?U.push($):this.canonicalIssuer.getId($[0])}for(const R of U){const $=[];for(const ae of R){if(this.canonicalIssuer.hasId(ae))continue;const Y=new E("_:b");Y.getId(ae);const re=this.hashNDegreeQuads(ae,Y);$.push(re)}$.sort(k);for(const ae of $){const Y=ae.issuer.getOldIds();for(const re of Y)this.canonicalIssuer.getId(re)}}const ce=[];for(const R of this.quads){const $=A.serializeQuadComponents(this._componentWithCanonicalId({component:R.subject}),R.predicate,this._componentWithCanonicalId({component:R.object}),this._componentWithCanonicalId({component:R.graph}));ce.push($)}return ce.sort(),ce.join("")}hashFirstDegreeQuads(y){const M=[],j=this.blankNodeInfo.get(y),N=j.quads;for(const ce of N){const R={subject:null,predicate:ce.predicate,object:null,graph:null};R.subject=this.modifyFirstDegreeComponent(y,ce.subject,"subject"),R.object=this.modifyFirstDegreeComponent(y,ce.object,"object"),R.graph=this.modifyFirstDegreeComponent(y,ce.graph,"graph"),M.push(A.serializeQuad(R))}M.sort();const U=this.createMessageDigest();for(const ce of M)U.update(ce);return j.hash=U.digest(),j.hash}hashRelatedBlankNode(y,M,j,N){let U;U=this.canonicalIssuer.hasId(y)?this.canonicalIssuer.getId(y):j.hasId(y)?j.getId(y):this.blankNodeInfo.get(y).hash;const ce=this.createMessageDigest();return ce.update(N),"g"!==N&&ce.update(this.getRelatedPredicate(M)),ce.update(U),ce.digest()}hashNDegreeQuads(y,M){const j=this.deepIterations.get(y)||0;if(j>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(y,j+1);const N=this.createMessageDigest(),U=this.createHashToRelated(y,M),ce=[...U.keys()].sort();for(const R of ce){N.update(R);let ae,$="";const Y=new D(U.get(R));for(;Y.hasNext();){const re=Y.next();let ne=M.clone(),W="";const z=[];let v=!1;for(const L of re)if(this.canonicalIssuer.hasId(L)?W+=this.canonicalIssuer.getId(L):(ne.hasId(L)||z.push(L),W+=ne.getId(L)),0!==$.length&&W>$){v=!0;break}if(!v){for(const L of z){const T=this.hashNDegreeQuads(L,ne);if(W+=ne.getId(L),W+=`<${T.hash}>`,ne=T.issuer,0!==$.length&&W>$){v=!0;break}}v||(0===$.length||W<$)&&($=W,ae=ne)}}N.update($),M=ae}return{hash:N.digest(),issuer:M}}modifyFirstDegreeComponent(y,M){return"BlankNode"!==M.termType?M:{termType:"BlankNode",value:M.value===y?"_:a":"_:z"}}getRelatedPredicate(y){return`<${y.predicate.value}>`}createHashToRelated(y,M){const j=new Map,N=this.blankNodeInfo.get(y).quads;for(const U of N)this._addRelatedBlankNodeHash({quad:U,component:U.subject,position:"s",id:y,issuer:M,hashToRelated:j}),this._addRelatedBlankNodeHash({quad:U,component:U.object,position:"o",id:y,issuer:M,hashToRelated:j}),this._addRelatedBlankNodeHash({quad:U,component:U.graph,position:"g",id:y,issuer:M,hashToRelated:j});return j}_hashAndTrackBlankNode({id:y,hashToBlankNodes:M}){const j=this.hashFirstDegreeQuads(y),N=M.get(j);N?N.push(y):M.set(j,[y])}_addBlankNodeQuadInfo({quad:y,component:M}){if("BlankNode"!==M.termType)return;const j=M.value,N=this.blankNodeInfo.get(j);N?N.quads.add(y):this.blankNodeInfo.set(j,{quads:new Set([y]),hash:null})}_addRelatedBlankNodeHash({quad:y,component:M,position:j,id:N,issuer:U,hashToRelated:ce}){if("BlankNode"!==M.termType||M.value===N)return;const R=M.value,$=this.hashRelatedBlankNode(R,y,U,j),ae=ce.get($);ae?ae.push(R):ce.set($,[R])}_componentWithCanonicalId({component:y}){return"BlankNode"!==y.termType||y.value.startsWith(this.canonicalIssuer.prefix)?y:{termType:"BlankNode",value:this.canonicalIssuer.getId(y.value)}}}},1326:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(7475),D=m(7218);te.exports=class extends D{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(k,g,y){return"BlankNode"!==g.termType?g:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:g.value===k?"_:a":"_:z"}}getRelatedPredicate(k){return k.predicate.value}createHashToRelated(k,g){var y=this;return E(function*(){const M=new Map,j=y.blankNodeInfo.get(k).quads;let N=0;for(const U of j){let ce,R;if("BlankNode"===U.subject.termType&&U.subject.value!==k)R=U.subject.value,ce="p";else{if("BlankNode"!==U.object.termType||U.object.value===k)continue;R=U.object.value,ce="r"}++N%100==0&&(yield y._yield());const $=yield y.hashRelatedBlankNode(R,U,g,ce),ae=M.get($);ae?ae.push(R):M.set($,[R])}return M})()}}},9869:(te,J,m)=>{"use strict";const E=m(7475),b=m(9123);te.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new E("sha1")}modifyFirstDegreeComponent(A,k,g){return"BlankNode"!==k.termType?k:"graph"===g?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:k.value===A?"_:a":"_:z"}}getRelatedPredicate(A){return A.predicate.value}createHashToRelated(A,k){const g=new Map,y=this.blankNodeInfo.get(A).quads;for(const M of y){let j,N;if("BlankNode"===M.subject.termType&&M.subject.value!==A)N=M.subject.value,j="p";else{if("BlankNode"!==M.object.termType||M.object.value===A)continue;N=M.object.value,j="r"}const U=this.hashRelatedBlankNode(N,M,k,j),ce=g.get(U);ce?ce.push(N):g.set(U,[N])}return g}}},7842:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(7218),D=m(1326),A=m(9123),k=m(9869);let g;try{g=m(7670)}catch{}function y(M){return Array.isArray(M)?M:J.NQuads.legacyDatasetToQuads(M)}J.NQuads=m(8003),J.IdentifierIssuer=m(5327),J._rdfCanonizeNative=function(M){return M&&(g=M),g},J.canonize=function(){var M=E(function*(j,N){const U=y(j);if(N.useNative){if(!g)throw new Error("rdf-canonize-native not available");if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((ce,R)=>g.canonize(U,N,($,ae)=>$?R($):ce(ae)))}if("URDNA2015"===N.algorithm)return new b(N).main(U);if("URGNA2012"===N.algorithm){if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new D(N).main(U)}throw"algorithm"in N?new Error("Invalid RDF Dataset Canonicalization algorithm: "+N.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(j,N){return M.apply(this,arguments)}}(),J._canonizeSync=function(M,j){const N=y(M);if(j.useNative){if(!g)throw new Error("rdf-canonize-native not available");if(j.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return g.canonizeSync(N,j)}if("URDNA2015"===j.algorithm)return new A(j).main(N);if("URGNA2012"===j.algorithm){if(j.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new k(j).main(N)}throw"algorithm"in j?new Error("Invalid RDF Dataset Canonicalization algorithm: "+j.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(te,J,m){"use strict";var E=this&&this.__createBinding||(Object.create?function(D,A,k,g){void 0===g&&(g=k),Object.defineProperty(D,g,{enumerable:!0,get:function(){return A[k]}})}:function(D,A,k,g){void 0===g&&(g=k),D[g]=A[k]}),b=this&&this.__exportStar||function(D,A){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(A,k)&&E(A,D,k)};Object.defineProperty(J,"__esModule",{value:!0}),b(m(4740),J),b(m(3613),J),b(m(9379),J),b(m(5565),J),b(m(3283),J),b(m(3905),J),b(m(2234),J)},4740:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.BlankNode=void 0,J.BlankNode=class m{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.DataFactory=void 0;const E=m(4740),b=m(9379),D=m(5565),A=m(3283),k=m(3905),g=m(2234);let y=0;J.DataFactory=class M{constructor(N){this.blankNodeCounter=0,this.blankNodePrefix=(N=N||{}).blankNodePrefix||`df_${y++}_`}namedNode(N){return new A.NamedNode(N)}blankNode(N){return new E.BlankNode(N||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(N,U){return new D.Literal(N,U)}variable(N){return new g.Variable(N)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(N,U,ce,R){return new k.Quad(N,U,ce,R||this.defaultGraph())}fromTerm(N){switch(N.termType){case"NamedNode":return this.namedNode(N.value);case"BlankNode":return this.blankNode(N.value);case"Literal":return N.language?this.literal(N.value,N.language):N.datatype.equals(D.Literal.XSD_STRING)?this.literal(N.value):this.literal(N.value,this.fromTerm(N.datatype));case"Variable":return this.variable(N.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(N.subject),this.fromTerm(N.predicate),this.fromTerm(N.object),this.fromTerm(N.graph))}}fromQuad(N){return this.fromTerm(N)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.DefaultGraph=void 0;class m{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}J.DefaultGraph=m,m.INSTANCE=new m},5565:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Literal=void 0;const E=m(3283);class b{constructor(A,k){this.termType="Literal",this.value=A,"string"==typeof k?(this.language=k,this.datatype=b.RDF_LANGUAGE_STRING):k?(this.language="",this.datatype=k):(this.language="",this.datatype=b.XSD_STRING)}equals(A){return!!A&&"Literal"===A.termType&&A.value===this.value&&A.language===this.language&&this.datatype.equals(A.datatype)}}J.Literal=b,b.RDF_LANGUAGE_STRING=new E.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new E.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.NamedNode=void 0,J.NamedNode=class m{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Quad=void 0,J.Quad=class m{constructor(b,D,A,k){this.termType="Quad",this.value="",this.subject=b,this.predicate=D,this.object=A,this.graph=k}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Variable=void 0,J.Variable=class m{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(te,J,m){"use strict";var E=this&&this.__createBinding||(Object.create?function(R,$,ae,Y){void 0===Y&&(Y=ae),Object.defineProperty(R,Y,{enumerable:!0,get:function(){return $[ae]}})}:function(R,$,ae,Y){void 0===Y&&(Y=ae),R[Y]=$[ae]}),b=this&&this.__exportStar||function(R,$){for(var ae in R)"default"!==ae&&!Object.prototype.hasOwnProperty.call($,ae)&&E($,R,ae)};Object.defineProperty(J,"__esModule",{value:!0}),J.getSupportedJavaScriptPrimitives=J.getSupportedRdfDatatypes=J.getTermRaw=J.toRdf=J.fromRdf=void 0;const D=m(2633),A=m(2538),k=m(6374);b(m(2538),J),b(m(1815),J),b(m(6374),J);const g=new D.DataFactory,y=new k.Translator;function M(R,$){return y.fromRdf(R,$)}y.registerHandler(new A.TypeHandlerString,A.TypeHandlerString.TYPES.map(R=>g.namedNode(R)),["string"]),y.registerHandler(new A.TypeHandlerBoolean,[A.TypeHandlerBoolean.TYPE].map(R=>g.namedNode(R)),["boolean"]),y.registerHandler(new A.TypeHandlerNumberDouble,A.TypeHandlerNumberDouble.TYPES.map(R=>g.namedNode(R)),["number"]),y.registerHandler(new A.TypeHandlerNumberInteger,A.TypeHandlerNumberInteger.TYPES.map(R=>g.namedNode(R)),["number"]),y.registerHandler(new A.TypeHandlerDate,A.TypeHandlerDate.TYPES.map(R=>g.namedNode(R)),["object"]),J.fromRdf=M,J.toRdf=function j(R,$){return $&&"namedNode"in $&&($={dataFactory:$}),($=$||{})&&!$.dataFactory&&($.dataFactory=g),y.toRdf(R,$)},J.getTermRaw=function N(R,$){return"Literal"===R.termType?M(R,$):R.value},J.getSupportedRdfDatatypes=function U(){return y.getSupportedRdfDatatypes()},J.getSupportedJavaScriptPrimitives=function ce(){return y.getSupportedJavaScriptPrimitives()}},1815:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0})},6374:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.Translator=void 0,J.Translator=class m{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,D,A){for(const k of D)this.supportedRdfDatatypes.push(k),this.fromRdfHandlers[k.value]=b;for(const k of A){let g=this.toRdfHandlers[k];g||(this.toRdfHandlers[k]=g=[]),g.push(b)}}fromRdf(b,D){const A=this.fromRdfHandlers[b.datatype.value];return A?A.fromRdf(b,D):b.value}toRdf(b,D){const A=this.toRdfHandlers[typeof b];if(A)for(const k of A){const g=k.toRdf(b,D);if(g)return g}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerBoolean=void 0;const E=m(6374);class b{fromRdf(A,k){switch(A.value){case"true":case"1":return!0;case"false":case"0":return!1}return k&&E.Translator.incorrectRdfDataType(A),!1}toRdf(A,{datatype:k,dataFactory:g}){return g.literal(A?"true":"false",k||g.namedNode(b.TYPE))}}J.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerDate=void 0;const E=m(6374);class b{fromRdf(A,k){switch(k&&!A.value.match(b.VALIDATORS[A.datatype.value.substr(33,A.datatype.value.length)])&&E.Translator.incorrectRdfDataType(A),A.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(A.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const g=A.value.split("-");return new Date(0,parseInt(g[0],10)-1,parseInt(g[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(A.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(A.value+"-01");default:return new Date(A.value)}}toRdf(A,{datatype:k,dataFactory:g}){if(k=k||g.namedNode(b.TYPES[0]),!(A instanceof Date))return null;const y=A;let M;switch(k.value){case"http://www.w3.org/2001/XMLSchema#gDay":M=String(y.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":M=y.getUTCMonth()+1+"-"+y.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":M=String(y.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":M=y.getUTCFullYear()+"-"+(y.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":M=y.toISOString().replace(/T.*$/,"");break;default:M=y.toISOString()}return g.literal(M,k)}}J.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerNumberDouble=void 0;const E=m(6374);class b{fromRdf(A,k){const g=parseFloat(A.value);return k&&isNaN(g)&&E.Translator.incorrectRdfDataType(A),g}toRdf(A,{datatype:k,dataFactory:g}){return k=k||g.namedNode(b.TYPES[0]),isNaN(A)?g.literal("NaN",k):isFinite(A)?A%1==0?null:g.literal(A.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),k):g.literal(A>0?"INF":"-INF",k)}}J.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerNumberInteger=void 0;const E=m(6374);class b{fromRdf(A,k){const g=parseInt(A.value,10);return k&&(isNaN(g)||A.value.indexOf(".")>=0)&&E.Translator.incorrectRdfDataType(A),g}toRdf(A,{datatype:k,dataFactory:g}){return g.literal(String(A),k||g.namedNode(A<=b.MAX_INT&&A>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}J.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.TypeHandlerString=void 0;class m{fromRdf(b){return b.value}toRdf(b,{datatype:D,dataFactory:A}){return A.literal(b,D)}}J.TypeHandlerString=m,m.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(te,J,m){"use strict";var E=this&&this.__createBinding||(Object.create?function(D,A,k,g){void 0===g&&(g=k),Object.defineProperty(D,g,{enumerable:!0,get:function(){return A[k]}})}:function(D,A,k,g){void 0===g&&(g=k),D[g]=A[k]}),b=this&&this.__exportStar||function(D,A){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(A,k)&&E(A,D,k)};Object.defineProperty(J,"__esModule",{value:!0}),b(m(88),J),b(m(1600),J),b(m(1511),J),b(m(9199),J),b(m(2210),J)},2821:function(te,J,m){"use strict";var E=this&&this.__createBinding||(Object.create?function(D,A,k,g){void 0===g&&(g=k),Object.defineProperty(D,g,{enumerable:!0,get:function(){return A[k]}})}:function(D,A,k,g){void 0===g&&(g=k),D[g]=A[k]}),b=this&&this.__exportStar||function(D,A){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(A,k)&&E(A,D,k)};Object.defineProperty(J,"__esModule",{value:!0}),b(m(5664),J)},758:(te,J)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.ParseError=void 0;class m extends Error{constructor(b,D){const A=b.saxStream._parser;super(b.trackPosition?`Line ${A.line+1} column ${A.column+1}: ${D}`:D)}}J.ParseError=m},5664:(te,J,m)=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.ParseType=J.RdfXmlParser=void 0;const E=m(7054),b=m(9528),D=m(1793),A=m(758),k=m(2633);class g extends D.Transform{constructor(j){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},j&&(Object.assign(this,j),this.options=j),this.dataFactory||(this.dataFactory=new k.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(j,N){const U={};let ce=!1;for(const $ in j.attributes)$.startsWith("xmlns")&&(5===$.length?(ce=!0,U[""]=j.attributes[$]):":"===$.charAt(5)&&(ce=!0,U[$.substr(6)]=j.attributes[$]));const R=N&&N.ns?N.ns:[g.DEFAULT_NS];return ce?R.concat([U]):R}static expandPrefixedTerm(j,N,U){const ce=j.indexOf(":");let R,$;ce>=0?(R=j.substr(0,ce),$=j.substr(ce+1)):(R="",$=j);let ae=null,Y=null;for(let re=N.length-1;re>=0;re--){const ne=N[re][R];if(ne){ae=ne;break}Y||(Y=N[re][""])}if(!ae){if(R&&"xmlns"!==R)throw new A.ParseError(U,`The prefix '${R}' in term '${j}' was not bound.`);ae=Y||""}return{prefix:R,local:$,uri:ae}}static isValidIri(j){return g.IRI_REGEX.test(j)}import(j){const N=new D.PassThrough({readableObjectMode:!0});j.on("error",ce=>U.emit("error",ce)),j.on("data",ce=>N.push(ce)),j.on("end",()=>N.push(null));const U=N.pipe(new g(this.options));return U}_transform(j,N,U){try{this.saxStream.write(j,N)}catch(ce){return U(ce)}U()}newParseError(j){return new A.ParseError(this,j)}valueToUri(j,N){return this.uriToNamedNode(E.resolve(j,N.baseIRI))}uriToNamedNode(j){if(!g.isValidIri(j))throw this.newParseError(`Invalid URI: ${j}`);return this.dataFactory.namedNode(j)}validateNcname(j){if(!g.NCNAME_MATCHER.test(j))throw this.newParseError(`Not a valid NCName: ${j}`)}attachSaxListeners(){this.saxStream.on("error",j=>this.emit("error",j)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(j){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let U=y.RESOURCE;if(N&&(N.hadChildren=!0,U=N.childrenParseType),N&&N.childrenStringTags){const R=j.name;let $="";for(const ne in j.attributes)$+=` ${ne}="${j.attributes[ne]}"`;N.childrenStringTags.push(`<${R}${$}>`);const re={childrenStringTags:N.childrenStringTags};return re.childrenStringEmitClosingTag=`</${R}>`,void this.activeTagStack.push(re)}const ce={};N?(ce.language=N.language,ce.baseIRI=N.baseIRI):ce.baseIRI=this.baseIRI,this.activeTagStack.push(ce),ce.ns=g.parseNamespace(j,N),U===y.RESOURCE?this.onTagResource(j,ce,N,!N):this.onTagProperty(j,ce,N)}onTagResource(j,N,U,ce){const R=g.expandPrefixedTerm(j.name,N.ns,this);N.childrenParseType=y.PROPERTY;let $=!0;if(R.uri===g.RDF){if(!ce&&g.FORBIDDEN_NODE_ELEMENTS.indexOf(R.local)>=0)throw this.newParseError(`Illegal node element name: ${R.local}`);switch(R.local){case"RDF":N.childrenParseType=y.RESOURCE;case"Description":$=!1}}const ae=[],Y=[];let re=null,ne=!1,W=!1,z=null;for(const v in j.attributes){const L=j.attributes[v],T=g.expandPrefixedTerm(v,N.ns,this);if(U&&T.uri===g.RDF)switch(T.local){case"about":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${L} and ${re} where found.`);re=L;continue;case"ID":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${L} and ${re} where found.`);this.validateNcname(L),re="#"+L,ne=!0;continue;case"nodeID":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${L} and ${re} where found.`);this.validateNcname(L),re=L,W=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":z=L;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===g.XML){if("lang"===T.local){N.language=""===L?null:L.toLowerCase();continue}if("base"===T.local){N.baseIRI=E.resolve(L,N.baseIRI);continue}}"xml"!==T.prefix&&T.uri&&(ae.push(this.uriToNamedNode(T.uri+T.local)),Y.push(L))}if(null!==re&&(N.subject=W?this.dataFactory.blankNode(re):this.valueToUri(re,N),ne&&this.claimNodeId(N.subject)),N.subject||(N.subject=this.dataFactory.blankNode()),$){const v=this.uriToNamedNode(R.uri+R.local);this.emitTriple(N.subject,this.dataFactory.namedNode(g.RDF+"type"),v,U?U.reifiedStatementId:null)}if(U){if(U.predicate)if(U.childrenCollectionSubject){const v=this.dataFactory.blankNode();this.emitTriple(U.childrenCollectionSubject,U.childrenCollectionPredicate,v,U.reifiedStatementId),this.emitTriple(v,this.dataFactory.namedNode(g.RDF+"first"),N.subject,N.reifiedStatementId),U.childrenCollectionSubject=v,U.childrenCollectionPredicate=this.dataFactory.namedNode(g.RDF+"rest")}else{this.emitTriple(U.subject,U.predicate,N.subject,U.reifiedStatementId);for(let v=0;v<U.predicateSubPredicates.length;v++)this.emitTriple(N.subject,U.predicateSubPredicates[v],U.predicateSubObjects[v],null);U.predicateSubPredicates=[],U.predicateSubObjects=[],U.predicateEmitted=!0}for(let v=0;v<ae.length;v++){const L=this.dataFactory.literal(Y[v],N.datatype||N.language);this.emitTriple(N.subject,ae[v],L,U.reifiedStatementId)}z&&this.emitTriple(N.subject,this.dataFactory.namedNode(g.RDF+"type"),this.uriToNamedNode(z),null)}}onTagProperty(j,N,U){const ce=g.expandPrefixedTerm(j.name,N.ns,this);if(N.childrenParseType=y.RESOURCE,N.subject=U.subject,ce.uri===g.RDF&&"li"===ce.local?(U.listItemCounter||(U.listItemCounter=1),N.predicate=this.uriToNamedNode(ce.uri+"_"+U.listItemCounter++)):N.predicate=this.uriToNamedNode(ce.uri+ce.local),ce.uri===g.RDF&&g.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(ce.local)>=0)throw this.newParseError(`Illegal property element name: ${ce.local}`);N.predicateSubPredicates=[],N.predicateSubObjects=[];let R=!1,$=!1,ae=null,Y=!0;const re=[],ne=[];for(const W in j.attributes){const z=j.attributes[W],v=g.expandPrefixedTerm(W,N.ns,this);if(v.uri===g.RDF)switch(v.local){case"resource":if(ae)throw this.newParseError(`Found both rdf:resource (${z}) and rdf:nodeID (${ae}).`);if(R)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${z})`);N.hadChildren=!0,ae=z,Y=!1;continue;case"datatype":if($)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${z}).`);if(R)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${z})`);N.datatype=this.valueToUri(z,N);continue;case"nodeID":if($)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${z}).`);if(N.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${z}).`);if(R)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${z})`);this.validateNcname(z),N.hadChildren=!0,ae=z,Y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if($)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(N.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${N.datatype.value})`);if(ae)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ae})`);if("Resource"===z){R=!0,N.childrenParseType=y.PROPERTY;const L=this.dataFactory.blankNode();this.emitTriple(N.subject,N.predicate,L,N.reifiedStatementId),N.subject=L,N.predicate=null}else"Collection"===z?(R=!0,N.hadChildren=!0,N.childrenCollectionSubject=N.subject,N.childrenCollectionPredicate=N.predicate,Y=!1):"Literal"===z&&(R=!0,N.childrenTagsToString=!0,N.childrenStringTags=[]);continue;case"ID":this.validateNcname(z),N.reifiedStatementId=this.valueToUri("#"+z,N),this.claimNodeId(N.reifiedStatementId);continue}else if(v.uri===g.XML&&"lang"===v.local){N.language=""===z?null:z.toLowerCase();continue}if("xml"!==v.prefix&&"xmlns"!==v.prefix&&v.uri){if(R||N.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${z}`);N.hadChildren=!0,$=!0,re.push(this.uriToNamedNode(v.uri+v.local)),ne.push(this.dataFactory.literal(z,N.datatype||N.language))}}if(null!==ae){const W=N.subject;N.subject=Y?this.dataFactory.blankNode(ae):this.valueToUri(ae,N),this.emitTriple(W,N.predicate,N.subject,N.reifiedStatementId);for(let z=0;z<re.length;z++)this.emitTriple(N.subject,re[z],ne[z],null);N.predicateEmitted=!0}else Y&&(N.predicateSubPredicates=re,N.predicateSubObjects=ne,N.predicateEmitted=!1)}emitTriple(j,N,U,ce){this.push(this.dataFactory.quad(j,N,U,this.defaultGraph)),ce&&(this.push(this.dataFactory.quad(ce,this.dataFactory.namedNode(g.RDF+"type"),this.dataFactory.namedNode(g.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(ce,this.dataFactory.namedNode(g.RDF+"subject"),j,this.defaultGraph)),this.push(this.dataFactory.quad(ce,this.dataFactory.namedNode(g.RDF+"predicate"),N,this.defaultGraph)),this.push(this.dataFactory.quad(ce,this.dataFactory.namedNode(g.RDF+"object"),U,this.defaultGraph)))}claimNodeId(j){if(!this.allowDuplicateRdfIds){if(this.nodeIds[j.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${j.value}'.`);this.nodeIds[j.value]=!0}}onText(j){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;N&&(N.childrenStringTags?N.childrenStringTags.push(j):N.predicate&&(N.text=j))}onCloseTag(){const j=this.activeTagStack.pop();if(j.childrenStringEmitClosingTag&&j.childrenStringTags.push(j.childrenStringEmitClosingTag),j.childrenTagsToString&&(j.datatype=this.dataFactory.namedNode(g.RDF+"XMLLiteral"),j.text=j.childrenStringTags.join(""),j.hadChildren=!1),j.childrenCollectionSubject)this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,this.dataFactory.namedNode(g.RDF+"nil"),j.reifiedStatementId);else if(j.predicate)if(j.hadChildren||j.childrenParseType===y.PROPERTY){if(!j.predicateEmitted){const N=this.dataFactory.blankNode();this.emitTriple(j.subject,j.predicate,N,j.reifiedStatementId);for(let U=0;U<j.predicateSubPredicates.length;U++)this.emitTriple(N,j.predicateSubPredicates[U],j.predicateSubObjects[U],null)}}else this.emitTriple(j.subject,j.predicate,this.dataFactory.literal(j.text||"",j.datatype||j.language),j.reifiedStatementId)}onDoctype(j){j.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(N,U,ce)=>(this.saxStream._parser.ENTITIES[U]=ce,""))}}var y,M;J.RdfXmlParser=g,g.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,g.MIME_TYPE="application/rdf+xml",g.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g.XML="http://www.w3.org/XML/1998/namespace",g.XMLNS="http://www.w3.org/2000/xmlns/",g.DEFAULT_NS={xml:g.XML},g.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],g.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],g.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(M=y=J.ParseType||(J.ParseType={}))[M.RESOURCE=0]="RESOURCE",M[M.PROPERTY=1]="PROPERTY"},9987:(te,J,m)=>{"use strict";const{AbortError:E,codes:b}=m(4370),{isNodeStream:D,isWebStream:A,kControllerErrorFunction:k}=m(5428),g=m(4618),{ERR_INVALID_ARG_TYPE:y}=b;te.exports.addAbortSignal=function(N,U){if(((j,N)=>{if("object"!=typeof j||!("aborted"in j))throw new y("signal","AbortSignal",j)})(N),!D(U)&&!A(U))throw new y("stream",["ReadableStream","WritableStream","Stream"],U);return te.exports.addAbortSignalNoValidate(N,U)},te.exports.addAbortSignalNoValidate=function(j,N){if("object"!=typeof j||!("aborted"in j))return N;const U=D(N)?()=>{N.destroy(new E(void 0,{cause:j.reason}))}:()=>{N[k](new E(void 0,{cause:j.reason}))};return j.aborted?U():(j.addEventListener("abort",U),g(N,()=>j.removeEventListener("abort",U))),N}},2960:(te,J,m)=>{"use strict";const{StringPrototypeSlice:E,SymbolIterator:b,TypedArrayPrototypeSet:D,Uint8Array:A}=m(6305),{Buffer:k}=m(1657),{inspect:g}=m(2656);te.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(M){const j={data:M,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length}unshift(M){const j={data:M,next:this.head};0===this.length&&(this.tail=j),this.head=j,++this.length}shift(){if(0===this.length)return;const M=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,M}clear(){this.head=this.tail=null,this.length=0}join(M){if(0===this.length)return"";let j=this.head,N=""+j.data;for(;null!==(j=j.next);)N+=M+j.data;return N}concat(M){if(0===this.length)return k.alloc(0);const j=k.allocUnsafe(M>>>0);let N=this.head,U=0;for(;N;)D(j,N.data,U),U+=N.data.length,N=N.next;return j}consume(M,j){const N=this.head.data;if(M<N.length){const U=N.slice(0,M);return this.head.data=N.slice(M),U}return M===N.length?this.shift():j?this._getString(M):this._getBuffer(M)}first(){return this.head.data}*[b](){for(let M=this.head;M;M=M.next)yield M.data}_getString(M){let j="",N=this.head,U=0;do{const ce=N.data;if(!(M>ce.length)){M===ce.length?(j+=ce,++U,this.head=N.next?N.next:this.tail=null):(j+=E(ce,0,M),this.head=N,N.data=E(ce,M));break}j+=ce,M-=ce.length,++U}while(null!==(N=N.next));return this.length-=U,j}_getBuffer(M){const j=k.allocUnsafe(M),N=M;let U=this.head,ce=0;do{const R=U.data;if(!(M>R.length)){M===R.length?(D(j,R,N-M),++ce,this.head=U.next?U.next:this.tail=null):(D(j,new A(R.buffer,R.byteOffset,M),N-M),this.head=U,U.data=R.slice(M));break}D(j,R,N-M),M-=R.length,++ce}while(null!==(U=U.next));return this.length-=ce,j}[Symbol.for("nodejs.util.inspect.custom")](M,j){return g(this,{...j,depth:0,customInspect:!1})}}},7721:(te,J,m)=>{"use strict";var E=m(7156).default;const{pipeline:b}=m(4514),D=m(5931),{destroyer:A}=m(5601),{isNodeStream:k,isReadable:g,isWritable:y,isWebStream:M,isTransformStream:j,isWritableStream:N,isReadableStream:U}=m(5428),{AbortError:ce,codes:{ERR_INVALID_ARG_VALUE:R,ERR_MISSING_ARGS:$}}=m(4370),ae=m(4618);te.exports=function(...re){if(0===re.length)throw new $("streams");if(1===re.length)return D.from(re[0]);const ne=[...re];if("function"==typeof re[0]&&(re[0]=D.from(re[0])),"function"==typeof re[re.length-1]){const Ie=re.length-1;re[Ie]=D.from(re[Ie])}for(let Ie=0;Ie<re.length;++Ie)if(k(re[Ie])||M(re[Ie])){if(Ie<re.length-1&&!(g(re[Ie])||U(re[Ie])||j(re[Ie])))throw new R(`streams[${Ie}]`,ne[Ie],"must be readable");if(Ie>0&&!(y(re[Ie])||N(re[Ie])||j(re[Ie])))throw new R(`streams[${Ie}]`,ne[Ie],"must be writable")}let W,z,v,L,T;const H=re[0],Ce=b(re,function he(Ie){const De=L;L=null,De?De(Ie):Ie?T.destroy(Ie):!xe&&!le&&T.destroy()}),le=!!(y(H)||N(H)||j(H)),xe=!!(g(Ce)||U(Ce)||j(Ce));if(T=new D({writableObjectMode:!(null==H||!H.writableObjectMode),readableObjectMode:!(null==Ce||!Ce.writableObjectMode),writable:le,readable:xe}),le){if(k(H))T._write=function(De,tt,Ye){H.write(De,tt)?Ye():W=Ye},T._final=function(De){H.end(),z=De},H.on("drain",function(){if(W){const De=W;W=null,De()}});else if(M(H)){const tt=(j(H)?H.writable:H).getWriter();T._write=function(){var Ye=E(function*(Ae,Ne,ke){try{yield tt.ready,tt.write(Ae).catch(()=>{}),ke()}catch(ze){ke(ze)}});return function(Ae,Ne,ke){return Ye.apply(this,arguments)}}(),T._final=function(){var Ye=E(function*(Ae){try{yield tt.ready,tt.close().catch(()=>{}),z=Ae}catch(Ne){Ae(Ne)}});return function(Ae){return Ye.apply(this,arguments)}}()}const Ie=j(Ce)?Ce.readable:Ce;ae(Ie,()=>{if(z){const De=z;z=null,De()}})}if(xe)if(k(Ce))Ce.on("readable",function(){if(v){const Ie=v;v=null,Ie()}}),Ce.on("end",function(){T.push(null)}),T._read=function(){for(;;){const Ie=Ce.read();if(null===Ie)return void(v=T._read);if(!T.push(Ie))return}};else if(M(Ce)){const De=(j(Ce)?Ce.readable:Ce).getReader();T._read=E(function*(){for(;;)try{const{value:tt,done:Ye}=yield De.read();if(!T.push(tt))return;if(Ye)return void T.push(null)}catch{return}})}return T._destroy=function(Ie,De){!Ie&&null!==L&&(Ie=new ce),v=null,W=null,z=null,null===L?De(Ie):(L=De,k(Ce)&&A(Ce,Ie))},T}},5601:(te,J,m)=>{"use strict";const E=m(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:D},AbortError:A}=m(4370),{Symbol:k}=m(6305),{kDestroyed:g,isDestroyed:y,isFinished:M,isServerRequest:j}=m(5428),N=k("kDestroy"),U=k("kConstruct");function ce(le,xe,Ie){le&&(xe&&!xe.errored&&(xe.errored=le),Ie&&!Ie.errored&&(Ie.errored=le))}function $(le,xe,Ie){let De=!1;function tt(Ye){if(De)return;De=!0;const Ae=le._readableState,Ne=le._writableState;ce(Ye,Ne,Ae),Ne&&(Ne.closed=!0),Ae&&(Ae.closed=!0),"function"==typeof Ie&&Ie(Ye),Ye?E.nextTick(ae,le,Ye):E.nextTick(Y,le)}try{le._destroy(xe||null,tt)}catch(Ye){tt(Ye)}}function ae(le,xe){re(le,xe),Y(le)}function Y(le){const xe=le._readableState,Ie=le._writableState;Ie&&(Ie.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Ie&&Ie.emitClose||null!=xe&&xe.emitClose)&&le.emit("close")}function re(le,xe){const Ie=le._readableState,De=le._writableState;null!=De&&De.errorEmitted||null!=Ie&&Ie.errorEmitted||(De&&(De.errorEmitted=!0),Ie&&(Ie.errorEmitted=!0),le.emit("error",xe))}function W(le,xe,Ie){const De=le._readableState,tt=le._writableState;if(null!=tt&&tt.destroyed||null!=De&&De.destroyed)return this;null!=De&&De.autoDestroy||null!=tt&&tt.autoDestroy?le.destroy(xe):xe&&(tt&&!tt.errored&&(tt.errored=xe),De&&!De.errored&&(De.errored=xe),Ie?E.nextTick(re,le,xe):re(le,xe))}function v(le){let xe=!1;function Ie(De){if(xe)return void W(le,De??new D);xe=!0;const tt=le._readableState,Ye=le._writableState,Ae=Ye||tt;tt&&(tt.constructed=!0),Ye&&(Ye.constructed=!0),Ae.destroyed?le.emit(N,De):De?W(le,De,!0):E.nextTick(L,le)}try{le._construct(De=>{E.nextTick(Ie,De)})}catch(De){E.nextTick(Ie,De)}}function L(le){le.emit(U)}function T(le){return le?.setHeader&&"function"==typeof le.abort}function he(le){le.emit("close")}function H(le,xe){le.emit("error",xe),E.nextTick(he,le)}te.exports={construct:function z(le,xe){if("function"!=typeof le._construct)return;const Ie=le._readableState,De=le._writableState;Ie&&(Ie.constructed=!1),De&&(De.constructed=!1),le.once(U,xe),!(le.listenerCount(U)>1)&&E.nextTick(v,le)},destroyer:function Ce(le,xe){!le||y(le)||(!xe&&!M(le)&&(xe=new A),j(le)?(le.socket=null,le.destroy(xe)):T(le)?le.abort():T(le.req)?le.req.abort():"function"==typeof le.destroy?le.destroy(xe):"function"==typeof le.close?le.close():xe?E.nextTick(H,le,xe):E.nextTick(he,le),le.destroyed||(le[g]=!0))},destroy:function R(le,xe){const Ie=this._readableState,De=this._writableState,tt=De||Ie;return null!=De&&De.destroyed||null!=Ie&&Ie.destroyed?("function"==typeof xe&&xe(),this):(ce(le,De,Ie),De&&(De.destroyed=!0),Ie&&(Ie.destroyed=!0),tt.constructed?$(this,le,xe):this.once(N,function(Ye){$(this,b(Ye,le),xe)}),this)},undestroy:function ne(){const le=this._readableState,xe=this._writableState;le&&(le.constructed=!0,le.closed=!1,le.closeEmitted=!1,le.destroyed=!1,le.errored=null,le.errorEmitted=!1,le.reading=!1,le.ended=!1===le.readable,le.endEmitted=!1===le.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:W}},5931:(te,J,m)=>{"use strict";const{ObjectDefineProperties:E,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:D,ObjectSetPrototypeOf:A}=m(6305);te.exports=y;const k=m(8383),g=m(9764);A(y.prototype,k.prototype),A(y,k);{const U=D(g.prototype);for(let ce=0;ce<U.length;ce++){const R=U[ce];y.prototype[R]||(y.prototype[R]=g.prototype[R])}}function y(U){if(!(this instanceof y))return new y(U);k.call(this,U),g.call(this,U),U?(this.allowHalfOpen=!1!==U.allowHalfOpen,!1===U.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===U.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let M,N;function j(){return void 0===M&&(M={}),M}E(y.prototype,{writable:{__proto__:null,...b(g.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(g.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(g.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(g.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(g.prototype,"writableLength")},writableFinished:{__proto__:null,...b(g.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(g.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(g.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(g.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(U){this._readableState&&this._writableState&&(this._readableState.destroyed=U,this._writableState.destroyed=U)}}}),y.fromWeb=function(U,ce){return j().newStreamDuplexFromReadableWritablePair(U,ce)},y.toWeb=function(U){return j().newReadableWritablePairFromDuplex(U)},y.from=function(U){return N||(N=m(8078)),N(U,"body")}},8078:(te,J,m)=>{var E=m(7156).default,b=m(6737).default,D=m(8186).default;const A=m(42),k=m(1657),{isReadable:g,isWritable:y,isIterable:M,isNodeStream:j,isReadableNodeStream:N,isWritableNodeStream:U,isDuplexNodeStream:ce}=m(5428),R=m(4618),{AbortError:$,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_INVALID_RETURN_VALUE:Y}}=m(4370),{destroyer:re}=m(5601),ne=m(5931),W=m(8383),{createDeferredPromise:z}=m(2656),v=m(55),L=globalThis.Blob||k.Blob,T=typeof L<"u"?function(De){return De instanceof L}:function(De){return!1},he=globalThis.AbortController||m(3982).AbortController,{FunctionPrototypeCall:H}=m(6305);class Ce extends ne{constructor(De){super(De),!1===De?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===De?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function xe(Ie){const De=Ie.readable&&"function"!=typeof Ie.readable.read?W.wrap(Ie.readable):Ie.readable,tt=Ie.writable;let Ne,ke,ze,me,Se,Ye=!!g(De),Ae=!!y(tt);function Xe(rt){const Qe=me;me=null,Qe?Qe(rt):rt&&Se.destroy(rt)}return Se=new Ce({readableObjectMode:!(null==De||!De.readableObjectMode),writableObjectMode:!(null==tt||!tt.writableObjectMode),readable:Ye,writable:Ae}),Ae&&(R(tt,rt=>{Ae=!1,rt&&re(De,rt),Xe(rt)}),Se._write=function(rt,Qe,ge){tt.write(rt,Qe)?ge():Ne=ge},Se._final=function(rt){tt.end(),ke=rt},tt.on("drain",function(){if(Ne){const rt=Ne;Ne=null,rt()}}),tt.on("finish",function(){if(ke){const rt=ke;ke=null,rt()}})),Ye&&(R(De,rt=>{Ye=!1,rt&&re(De,rt),Xe(rt)}),De.on("readable",function(){if(ze){const rt=ze;ze=null,rt()}}),De.on("end",function(){Se.push(null)}),Se._read=function(){for(;;){const rt=De.read();if(null===rt)return void(ze=Se._read);if(!Se.push(rt))return}}),Se._destroy=function(rt,Qe){!rt&&null!==me&&(rt=new $),ze=null,Ne=null,ke=null,null===me?Qe(rt):(me=Qe,re(tt,rt),re(De,rt))},Se}te.exports=function Ie(De,tt){if(ce(De))return De;if(N(De))return xe({readable:De});if(U(De))return xe({writable:De});if(j(De))return xe({writable:!1,readable:!1});if("function"==typeof De){const{value:Ae,write:Ne,final:ke,destroy:ze}=function le(Ie){let{promise:De,resolve:tt}=z();const Ye=new he,Ae=Ye.signal;return{value:Ie(D(function*(){for(;;){const ke=De;De=null;const{chunk:ze,done:me,cb:Se}=yield b(ke);if(A.nextTick(Se),me)return;if(Ae.aborted)throw new $(void 0,{cause:Ae.reason});({promise:De,resolve:tt}=z()),yield ze}})(),{signal:Ae}),write(ke,ze,me){const Se=tt;tt=null,Se({chunk:ke,done:!1,cb:me})},final(ke){const ze=tt;tt=null,ze({done:!0,cb:ke})},destroy(ke,ze){Ye.abort(),ze(ke)}}}(De);if(M(Ae))return v(Ce,Ae,{objectMode:!0,write:Ne,final:ke,destroy:ze});const me=Ae?.then;if("function"==typeof me){let Se;const Xe=H(me,Ae,rt=>{if(null!=rt)throw new Y("nully","body",rt)},rt=>{re(Se,rt)});return Se=new Ce({objectMode:!0,readable:!1,write:Ne,final(rt){ke(E(function*(){try{yield Xe,A.nextTick(rt,null)}catch(Qe){A.nextTick(rt,Qe)}}))},destroy:ze})}throw new Y("Iterable, AsyncIterable or AsyncFunction",tt,Ae)}if(T(De))return Ie(De.arrayBuffer());if(M(De))return v(Ce,De,{objectMode:!0,writable:!1});if("object"==typeof De?.writable||"object"==typeof De?.readable)return xe({readable:null!=De&&De.readable?N(De?.readable)?De?.readable:Ie(De.readable):void 0,writable:null!=De&&De.writable?U(De?.writable)?De?.writable:Ie(De.writable):void 0});const Ye=De?.then;if("function"==typeof Ye){let Ae;return H(Ye,De,Ne=>{null!=Ne&&Ae.push(Ne),Ae.push(null)},Ne=>{re(Ae,Ne)}),Ae=new Ce({objectMode:!0,writable:!1,read(){}})}throw new ae(tt,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],De)}},4618:(te,J,m)=>{const E=m(42),{AbortError:b,codes:D}=m(4370),{ERR_INVALID_ARG_TYPE:A,ERR_STREAM_PREMATURE_CLOSE:k}=D,{kEmptyObject:g,once:y}=m(2656),{validateAbortSignal:M,validateFunction:j,validateObject:N,validateBoolean:U}=m(2120),{Promise:ce,PromisePrototypeThen:R}=m(6305),{isClosed:$,isReadable:ae,isReadableNodeStream:Y,isReadableStream:re,isReadableFinished:ne,isReadableErrored:W,isWritable:z,isWritableNodeStream:v,isWritableStream:L,isWritableFinished:T,isWritableErrored:he,isNodeStream:H,willEmitClose:Ce,kIsClosedPromise:le}=m(5428),Ie=()=>{};function De(Ae,Ne,ke){var ze,me;if(2===arguments.length?(ke=Ne,Ne=g):null==Ne?Ne=g:N(Ne,"options"),j(ke,"callback"),M(Ne.signal,"options.signal"),ke=y(ke),re(Ae)||L(Ae))return function tt(Ae,Ne,ke){let ze=!1,me=Ie;if(Ne.signal)if(me=()=>{ze=!0,ke.call(Ae,new b(void 0,{cause:Ne.signal.reason}))},Ne.signal.aborted)E.nextTick(me);else{const Xe=ke;ke=y((...rt)=>{Ne.signal.removeEventListener("abort",me),Xe.apply(Ae,rt)}),Ne.signal.addEventListener("abort",me)}const Se=(...Xe)=>{ze||E.nextTick(()=>ke.apply(Ae,Xe))};return R(Ae[le].promise,Se,Se),Ie}(Ae,Ne,ke);if(!H(Ae))throw new A("stream",["ReadableStream","WritableStream","Stream"],Ae);const Se=null!==(ze=Ne.readable)&&void 0!==ze?ze:Y(Ae),Xe=null!==(me=Ne.writable)&&void 0!==me?me:v(Ae),rt=Ae._writableState,Qe=Ae._readableState,ge=()=>{Ae.writable||se()};let B=Ce(Ae)&&Y(Ae)===Se&&v(Ae)===Xe,I=T(Ae,!1);const se=()=>{I=!0,Ae.destroyed&&(B=!1),(!B||Ae.readable&&!Se)&&(!Se||K)&&ke.call(Ae)};let K=ne(Ae,!1);const Fe=()=>{K=!0,Ae.destroyed&&(B=!1),(!B||Ae.writable&&!Xe)&&(!Xe||I)&&ke.call(Ae)},Ve=ue=>{ke.call(Ae,ue)};let pe=$(Ae);const Z=()=>{pe=!0;const ue=he(Ae)||W(Ae);return ue&&"boolean"!=typeof ue?ke.call(Ae,ue):Se&&!K&&Y(Ae,!0)&&!ne(Ae,!1)?ke.call(Ae,new k):!Xe||I||T(Ae,!1)?void ke.call(Ae):ke.call(Ae,new k)},G=()=>{pe=!0;const ue=he(Ae)||W(Ae);if(ue&&"boolean"!=typeof ue)return ke.call(Ae,ue);ke.call(Ae)},C=()=>{Ae.req.on("finish",se)};!function xe(Ae){return Ae.setHeader&&"function"==typeof Ae.abort}(Ae)?Xe&&!rt&&(Ae.on("end",ge),Ae.on("close",ge)):(Ae.on("complete",se),B||Ae.on("abort",Z),Ae.req?C():Ae.on("request",C)),!B&&"boolean"==typeof Ae.aborted&&Ae.on("aborted",Z),Ae.on("end",Fe),Ae.on("finish",se),!1!==Ne.error&&Ae.on("error",Ve),Ae.on("close",Z),pe?E.nextTick(Z):null!=rt&&rt.errorEmitted||null!=Qe&&Qe.errorEmitted?B||E.nextTick(G):(!Se&&(!B||ae(Ae))&&(I||!1===z(Ae))||!Xe&&(!B||z(Ae))&&(K||!1===ae(Ae))||Qe&&Ae.req&&Ae.aborted)&&E.nextTick(G);const O=()=>{ke=Ie,Ae.removeListener("aborted",Z),Ae.removeListener("complete",se),Ae.removeListener("abort",Z),Ae.removeListener("request",C),Ae.req&&Ae.req.removeListener("finish",se),Ae.removeListener("end",ge),Ae.removeListener("close",ge),Ae.removeListener("finish",se),Ae.removeListener("end",Fe),Ae.removeListener("error",Ve),Ae.removeListener("close",Z)};if(Ne.signal&&!pe){const ue=()=>{const de=ke;O(),de.call(Ae,new b(void 0,{cause:Ne.signal.reason}))};if(Ne.signal.aborted)E.nextTick(ue);else{const de=ke;ke=y((...He)=>{Ne.signal.removeEventListener("abort",ue),de.apply(Ae,He)}),Ne.signal.addEventListener("abort",ue)}}return O}te.exports=De,te.exports.finished=function Ye(Ae,Ne){var ke;let ze=!1;return null===Ne&&(Ne=g),null!==(ke=Ne)&&void 0!==ke&&ke.cleanup&&(U(Ne.cleanup,"cleanup"),ze=Ne.cleanup),new ce((me,Se)=>{const Xe=De(Ae,Ne,rt=>{ze&&Xe(),rt?Se(rt):me()})})}},55:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(42),{PromisePrototypeThen:D,SymbolAsyncIterator:A,SymbolIterator:k}=m(6305),{Buffer:g}=m(1657),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:M}=m(4370).codes;te.exports=function j(N,U,ce){let R,$;if("string"==typeof U||U instanceof g)return new N({objectMode:!0,...ce,read(){this.push(U),this.push(null)}});if(U&&U[A])$=!0,R=U[A]();else{if(!U||!U[k])throw new y("iterable",["Iterable"],U);$=!1,R=U[k]()}const ae=new N({objectMode:!0,highWaterMark:1,...ce});let Y=!1;function ne(){return(ne=E(function*(v){if(null!=v&&"function"==typeof R.throw){const{value:he,done:H}=yield R.throw(v);if(yield he,H)return}if("function"==typeof R.return){const{value:he}=yield R.return();yield he}})).apply(this,arguments)}function z(){return(z=E(function*(){for(;;){try{const{value:v,done:L}=$?yield R.next():R.next();if(L)ae.push(null);else{const T=v&&"function"==typeof v.then?yield v:v;if(null===T)throw Y=!1,new M;if(ae.push(T))continue;Y=!1}}catch(v){ae.destroy(v)}break}})).apply(this,arguments)}return ae._read=function(){Y||(Y=!0,function W(){z.apply(this,arguments)}())},ae._destroy=function(v,L){D(function re(v){return ne.apply(this,arguments)}(v),()=>b.nextTick(L,v),T=>b.nextTick(L,T||v))},ae}},900:(te,J,m)=>{"use strict";const{ArrayIsArray:E,ObjectSetPrototypeOf:b}=m(6305),{EventEmitter:D}=m(2016);function A(g){D.call(this,g)}function k(g,y,M){if("function"==typeof g.prependListener)return g.prependListener(y,M);g._events&&g._events[y]?E(g._events[y])?g._events[y].unshift(M):g._events[y]=[M,g._events[y]]:g.on(y,M)}b(A.prototype,D.prototype),b(A,D),A.prototype.pipe=function(g,y){const M=this;function j(Y){g.writable&&!1===g.write(Y)&&M.pause&&M.pause()}function N(){M.readable&&M.resume&&M.resume()}M.on("data",j),g.on("drain",N),!g._isStdio&&(!y||!1!==y.end)&&(M.on("end",ce),M.on("close",R));let U=!1;function ce(){U||(U=!0,g.end())}function R(){U||(U=!0,"function"==typeof g.destroy&&g.destroy())}function $(Y){ae(),0===D.listenerCount(this,"error")&&this.emit("error",Y)}function ae(){M.removeListener("data",j),g.removeListener("drain",N),M.removeListener("end",ce),M.removeListener("close",R),M.removeListener("error",$),g.removeListener("error",$),M.removeListener("end",ae),M.removeListener("close",ae),g.removeListener("close",ae)}return k(M,"error",$),k(g,"error",$),M.on("end",ae),M.on("close",ae),g.on("close",ae),g.emit("pipe",M),g},te.exports={Stream:A,prependListener:k}},7624:(te,J,m)=>{"use strict";var E=m(7156).default,b=m(8131).default,D=m(8237).default,A=m(6737).default,k=m(8186).default;const g=globalThis.AbortController||m(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:y,ERR_INVALID_ARG_TYPE:M,ERR_MISSING_ARGS:j,ERR_OUT_OF_RANGE:N},AbortError:U}=m(4370),{validateAbortSignal:ce,validateInteger:R,validateObject:$}=m(2120),ae=m(6305).Symbol("kWeak"),{finished:Y}=m(4618),re=m(7721),{addAbortSignalNoValidate:ne}=m(9987),{isWritable:W,isNodeStream:z}=m(5428),{ArrayPrototypePush:v,MathFloor:L,Number:T,NumberIsNaN:he,Promise:H,PromiseReject:Ce,PromisePrototypeThen:le,Symbol:xe}=m(6305),Ie=xe("kEmpty"),De=xe("kEof");function Ye(C,O){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);null!=O&&$(O,"options"),null!=O?.signal&&ce(O.signal,"options.signal");let ue=1;return null!=O?.concurrency&&(ue=L(O.concurrency)),R(ue,"concurrency",1),function(){var de=k(function*(){var Ke,ut;const Rt=new g,dt=this,Vt=[],rn=Rt.signal,Re={signal:rn},q=()=>Rt.abort();null!=O&&null!==(Ke=O.signal)&&void 0!==Ke&&Ke.aborted&&q(),null==O||null===(ut=O.signal)||void 0===ut||ut.addEventListener("abort",q);let S,oe,We=!1;function Je(){We=!0}function $t(){return($t=E(function*(){try{var Wn,on=!1,Gn=!1;try{for(var To,In=D(dt);on=!(To=yield In.next()).done;on=!1){let Zi=To.value;var jr;if(We)return;if(rn.aborted)throw new U;try{Zi=C(Zi,Re)}catch(Ur){Zi=Ce(Ur)}Zi!==Ie&&("function"==typeof(null===(jr=Zi)||void 0===jr?void 0:jr.catch)&&Zi.catch(Je),Vt.push(Zi),S&&(S(),S=null),!We&&Vt.length&&Vt.length>=ue&&(yield new H(Ur=>{oe=Ur})))}}catch(Zi){Gn=!0,Wn=Zi}finally{try{on&&null!=In.return&&(yield In.return())}finally{if(Gn)throw Wn}}Vt.push(De)}catch(Zi){const Ur=Ce(Zi);le(Ur,void 0,Je),Vt.push(Ur)}finally{var Mo;We=!0,S&&(S(),S=null),null==O||null===(Mo=O.signal)||void 0===Mo||Mo.removeEventListener("abort",q)}})).apply(this,arguments)}!function st(){$t.apply(this,arguments)}();try{for(;;){for(;Vt.length>0;){const on=yield A(Vt[0]);if(on===De)return;if(rn.aborted)throw new U;on!==Ie&&(yield on),Vt.shift(),oe&&(oe(),oe=null)}yield A(new H(on=>{S=on}))}}finally{Rt.abort(),We=!0,oe&&(oe(),oe=null)}});return function He(){return de.apply(this,arguments)}}().call(this)}function Ne(C){return ke.apply(this,arguments)}function ke(){return(ke=E(function*(C,O=void 0){var He,ue=!1,de=!1;try{for(var Ke=D(ge.call(this,C,O));ue=!(yield Ke.next()).done;ue=!1)return!0}catch(Rt){de=!0,He=Rt}finally{try{ue&&null!=Ke.return&&(yield Ke.return())}finally{if(de)throw He}}return!1})).apply(this,arguments)}function me(){return(me=E(function*(C,O=void 0){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);return!(yield Ne.call(this,E(function*(...ue){return!(yield C(...ue))}),O))})).apply(this,arguments)}function Xe(){return(Xe=E(function*(C,O){var He,ue=!1,de=!1;try{for(var ut,Ke=D(ge.call(this,C,O));ue=!(ut=yield Ke.next()).done;ue=!1)return ut.value}catch(Rt){de=!0,He=Rt}finally{try{ue&&null!=Ke.return&&(yield Ke.return())}finally{if(de)throw He}}})).apply(this,arguments)}function Qe(){return Qe=E(function*(C,O){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);function de(){return(de=E(function*(Vt,rn){return yield C(Vt,rn),Ie})).apply(this,arguments)}var ut,He=!1,Ke=!1;try{for(var Rt=D(Ye.call(this,function ue(Vt,rn){return de.apply(this,arguments)},O));He=!(yield Rt.next()).done;He=!1);}catch(Vt){Ke=!0,ut=Vt}finally{try{He&&null!=Rt.return&&(yield Rt.return())}finally{if(Ke)throw ut}}}),Qe.apply(this,arguments)}function ge(C,O){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);function de(){return(de=E(function*(He,Ke){return(yield C(He,Ke))?He:Ie})).apply(this,arguments)}return Ye.call(this,function ue(He,Ke){return de.apply(this,arguments)},O)}class B extends j{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function se(){return se=E(function*(C,O,ue){var de;if("function"!=typeof C)throw new M("reducer",["Function","AsyncFunction"],C);null!=ue&&$(ue,"options"),null!=ue?.signal&&ce(ue.signal,"options.signal");let He=arguments.length>1;if(null!=ue&&null!==(de=ue.signal)&&void 0!==de&&de.aborted){const oe=new U(void 0,{cause:ue.signal.reason});throw this.once("error",()=>{}),yield Y(this.destroy(oe)),oe}const Ke=new g,ut=Ke.signal;null!=ue&&ue.signal&&ue.signal.addEventListener("abort",()=>Ke.abort(),{once:!0,[ae]:this});let Rt=!1;try{var rn,dt=!1,Vt=!1;try{for(var q,Re=D(this);dt=!(q=yield Re.next()).done;dt=!1){const oe=q.value;var S;if(Rt=!0,null!=ue&&null!==(S=ue.signal)&&void 0!==S&&S.aborted)throw new U;He?O=yield C(O,oe,{signal:ut}):(O=oe,He=!0)}}catch(oe){Vt=!0,rn=oe}finally{try{dt&&null!=Re.return&&(yield Re.return())}finally{if(Vt)throw rn}}if(!Rt&&!He)throw new B}finally{Ke.abort()}return O}),se.apply(this,arguments)}function Fe(){return(Fe=E(function*(C){null!=C&&$(C,"options"),null!=C?.signal&&ce(C.signal,"options.signal");const O=[];var He,ue=!1,de=!1;try{for(var ut,Ke=D(this);ue=!(ut=yield Ke.next()).done;ue=!1){const dt=ut.value;var Rt;if(null!=C&&null!==(Rt=C.signal)&&void 0!==Rt&&Rt.aborted)throw new U(void 0,{cause:C.signal.reason});v(O,dt)}}catch(dt){de=!0,He=dt}finally{try{ue&&null!=Ke.return&&(yield Ke.return())}finally{if(de)throw He}}return O})).apply(this,arguments)}function pe(C){if(C=T(C),he(C))return 0;if(C<0)throw new N("number",">= 0",C);return C}te.exports.streamReturningOperators={asIndexedPairs:function Ae(C=void 0){return null!=C&&$(C,"options"),null!=C?.signal&&ce(C.signal,"options.signal"),function(){var O=k(function*(){let de=0;var ut,He=!1,Ke=!1;try{for(var dt,Rt=D(this);He=!(dt=yield A(Rt.next())).done;He=!1){const rn=dt.value;var Vt;if(null!=C&&null!==(Vt=C.signal)&&void 0!==Vt&&Vt.aborted)throw new U({cause:C.signal.reason});yield[de++,rn]}}catch(rn){Ke=!0,ut=rn}finally{try{He&&null!=Rt.return&&(yield A(Rt.return()))}finally{if(Ke)throw ut}}});return function ue(){return O.apply(this,arguments)}}().call(this)},drop:function Z(C,O=void 0){return null!=O&&$(O,"options"),null!=O?.signal&&ce(O.signal,"options.signal"),C=pe(C),function(){var ue=k(function*(){var He;if(null!=O&&null!==(He=O.signal)&&void 0!==He&&He.aborted)throw new U;var Rt,Ke=!1,ut=!1;try{for(var Vt,dt=D(this);Ke=!(Vt=yield A(dt.next())).done;Ke=!1){const Re=Vt.value;var rn;if(null!=O&&null!==(rn=O.signal)&&void 0!==rn&&rn.aborted)throw new U;C--<=0&&(yield Re)}}catch(Re){ut=!0,Rt=Re}finally{try{Ke&&null!=dt.return&&(yield A(dt.return()))}finally{if(ut)throw Rt}}});return function de(){return ue.apply(this,arguments)}}().call(this)},filter:ge,flatMap:function Ve(C,O){const ue=Ye.call(this,C,O);return function(){var de=k(function*(){var Rt,Ke=!1,ut=!1;try{for(var Vt,dt=D(ue);Ke=!(Vt=yield A(dt.next())).done;Ke=!1){const rn=Vt.value;yield*b(D(rn),A)}}catch(rn){ut=!0,Rt=rn}finally{try{Ke&&null!=dt.return&&(yield A(dt.return()))}finally{if(ut)throw Rt}}});return function He(){return de.apply(this,arguments)}}().call(this)},map:Ye,take:function G(C,O=void 0){return null!=O&&$(O,"options"),null!=O?.signal&&ce(O.signal,"options.signal"),C=pe(C),function(){var ue=k(function*(){var He;if(null!=O&&null!==(He=O.signal)&&void 0!==He&&He.aborted)throw new U;var Rt,Ke=!1,ut=!1;try{for(var Vt,dt=D(this);Ke=!(Vt=yield A(dt.next())).done;Ke=!1){const Re=Vt.value;var rn;if(null!=O&&null!==(rn=O.signal)&&void 0!==rn&&rn.aborted)throw new U;if(!(C-- >0))return;yield Re}}catch(Re){ut=!0,Rt=Re}finally{try{Ke&&null!=dt.return&&(yield A(dt.return()))}finally{if(ut)throw Rt}}});return function de(){return ue.apply(this,arguments)}}().call(this)},compose:function tt(C,O){if(null!=O&&$(O,"options"),null!=O?.signal&&ce(O.signal,"options.signal"),z(C)&&!W(C))throw new y("stream",C,"must be writable");const ue=re(this,C);return null!=O&&O.signal&&ne(O.signal,ue),ue}},te.exports.promiseReturningOperators={every:function ze(C){return me.apply(this,arguments)},forEach:function rt(C,O){return Qe.apply(this,arguments)},reduce:function I(C,O,ue){return se.apply(this,arguments)},toArray:function K(C){return Fe.apply(this,arguments)},some:Ne,find:function Se(C,O){return Xe.apply(this,arguments)}}},6973:(te,J,m)=>{"use strict";const{ObjectSetPrototypeOf:E}=m(6305);te.exports=D;const b=m(123);function D(A){if(!(this instanceof D))return new D(A);b.call(this,A)}E(D.prototype,b.prototype),E(D,b),D.prototype._transform=function(A,k,g){g(null,A)}},4514:(te,J,m)=>{var E=m(7156).default,b=m(8186).default,D=m(6737).default,A=m(8131).default,k=m(8237).default;const g=m(42),{ArrayIsArray:y,Promise:M,SymbolAsyncIterator:j}=m(6305),N=m(4618),{once:U}=m(2656),ce=m(5601),R=m(5931),{aggregateTwoErrors:$,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_INVALID_RETURN_VALUE:Y,ERR_MISSING_ARGS:re,ERR_STREAM_DESTROYED:ne,ERR_STREAM_PREMATURE_CLOSE:W},AbortError:z}=m(4370),{validateFunction:v,validateAbortSignal:L}=m(2120),{isIterable:T,isReadable:he,isReadableNodeStream:H,isNodeStream:Ce,isTransformStream:le,isWebStream:xe,isReadableStream:Ie,isReadableEnded:De}=m(5428),tt=globalThis.AbortController||m(3982).AbortController;let Ye,Ae;function Ne(K,Fe,Ve){let pe=!1;return K.on("close",()=>{pe=!0}),{destroy:G=>{pe||(pe=!0,ce.destroyer(K,G||new ne("pipe")))},cleanup:N(K,{readable:Fe,writable:Ve},G=>{pe=!G})}}function ze(K){if(T(K))return K;if(H(K))return function me(K){return Se.apply(this,arguments)}(K);throw new ae("val",["Readable","Iterable","AsyncIterable"],K)}function Se(){return(Se=b(function*(K){Ae||(Ae=m(8383)),yield*A(k(Ae.prototype[j].call(K)),D)})).apply(this,arguments)}function Xe(K,Fe,Ve,pe){return rt.apply(this,arguments)}function rt(){return(rt=E(function*(K,Fe,Ve,{end:pe}){let Z,G=null;const C=dt=>{if(dt&&(Z=dt),G){const Vt=G;G=null,Vt()}},O=()=>new M((dt,Vt)=>{Z?Vt(Z):G=()=>{Z?Vt(Z):dt()}});Fe.on("drain",C);const ue=N(Fe,{readable:!1},C);try{Fe.writableNeedDrain&&(yield O());var Ke,de=!1,He=!1;try{for(var Rt,ut=k(K);de=!(Rt=yield ut.next()).done;de=!1)Fe.write(Rt.value)||(yield O())}catch(dt){He=!0,Ke=dt}finally{try{de&&null!=ut.return&&(yield ut.return())}finally{if(He)throw Ke}}pe&&Fe.end(),yield O(),Ve()}catch(dt){Ve(Z!==dt?$(Z,dt):dt)}finally{ue(),Fe.off("drain",C)}})).apply(this,arguments)}function Qe(K,Fe,Ve,pe){return ge.apply(this,arguments)}function ge(){return(ge=E(function*(K,Fe,Ve,{end:pe}){le(Fe)&&(Fe=Fe.writable);const Z=Fe.getWriter();try{var O,G=!1,C=!1;try{for(var de,ue=k(K);G=!(de=yield ue.next()).done;G=!1){const He=de.value;yield Z.ready,Z.write(He).catch(()=>{})}}catch(He){C=!0,O=He}finally{try{G&&null!=ue.return&&(yield ue.return())}finally{if(C)throw O}}yield Z.ready,pe&&(yield Z.close()),Ve()}catch(He){try{yield Z.abort(He),Ve(He)}catch(Ke){Ve(Ke)}}})).apply(this,arguments)}function I(K,Fe,Ve){if(1===K.length&&y(K[0])&&(K=K[0]),K.length<2)throw new re("streams");const pe=new tt,Z=pe.signal,G=Ve?.signal,C=[];function O(){Rt(new z)}let ue,de;L(G,"options.signal"),G?.addEventListener("abort",O);const He=[];let dt,Ke=0;function ut(q){Rt(q,0==--Ke)}function Rt(q,S){if(q&&(!ue||"ERR_STREAM_PREMATURE_CLOSE"===ue.code)&&(ue=q),ue||S){for(;He.length;)He.shift()(ue);G?.removeEventListener("abort",O),pe.abort(),S&&(ue||C.forEach(oe=>oe()),g.nextTick(Fe,ue,de))}}for(let q=0;q<K.length;q++){const S=K[q],oe=q<K.length-1,We=q>0,Je=oe||!1!==Ve?.end,st=q===K.length-1;if(Ce(S)){let $t=function(on){on&&"AbortError"!==on.name&&"ERR_STREAM_PREMATURE_CLOSE"!==on.code&&ut(on)};if(Je){const{destroy:on,cleanup:Gn}=Ne(S,oe,We);He.push(on),he(S)&&st&&C.push(Gn)}S.on("error",$t),he(S)&&st&&C.push(()=>{S.removeListener("error",$t)})}if(0===q)if("function"==typeof S){if(dt=S({signal:Z}),!T(dt))throw new Y("Iterable, AsyncIterable or Stream","source",dt)}else dt=T(S)||H(S)||le(S)?S:R.from(S);else if("function"==typeof S){var Vt;if(dt=le(dt)?ze(null===(Vt=dt)||void 0===Vt?void 0:Vt.readable):ze(dt),dt=S(dt,{signal:Z}),oe){if(!T(dt,!0))throw new Y("AsyncIterable",`transform[${q-1}]`,dt)}else{var rn;Ye||(Ye=m(6973));const $t=new Ye({objectMode:!0}),on=null===(rn=dt)||void 0===rn?void 0:rn.then;if("function"==typeof on)Ke++,on.call(dt,In=>{de=In,null!=In&&$t.write(In),Je&&$t.end(),g.nextTick(ut)},In=>{$t.destroy(In),g.nextTick(ut,In)});else if(T(dt,!0))Ke++,Xe(dt,$t,ut,{end:Je});else{if(!Ie(dt)&&!le(dt))throw new Y("AsyncIterable or Promise","destination",dt);Ke++,Xe(dt.readable||dt,$t,ut,{end:Je})}dt=$t;const{destroy:Gn,cleanup:Wn}=Ne(dt,!1,!0);He.push(Gn),st&&C.push(Wn)}}else if(Ce(S)){if(H(dt)){Ke+=2;const $t=se(dt,S,ut,{end:Je});he(S)&&st&&C.push($t)}else if(le(dt)||Ie(dt))Ke++,Xe(dt.readable||dt,S,ut,{end:Je});else{if(!T(dt))throw new ae("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],dt);Ke++,Xe(dt,S,ut,{end:Je})}dt=S}else if(xe(S)){if(H(dt))Ke++,Qe(ze(dt),S,ut,{end:Je});else if(Ie(dt)||T(dt))Ke++,Qe(dt,S,ut,{end:Je});else{if(!le(dt))throw new ae("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],dt);Ke++,Qe(dt.readable,S,ut,{end:Je})}dt=S}else dt=R.from(S)}return(null!=Z&&Z.aborted||null!=G&&G.aborted)&&g.nextTick(O),dt}function se(K,Fe,Ve,{end:pe}){let Z=!1;if(Fe.on("close",()=>{Z||Ve(new W)}),K.pipe(Fe,{end:!1}),pe){let C=function(){Z=!0,Fe.end()};De(K)?g.nextTick(C):K.once("end",C)}else Ve();return N(K,{readable:!0,writable:!1},C=>{const O=K._readableState;C&&"ERR_STREAM_PREMATURE_CLOSE"===C.code&&O&&O.ended&&!O.errored&&!O.errorEmitted?K.once("end",Ve).once("error",Ve):Ve(C)}),N(Fe,{readable:!1,writable:!0},Ve)}te.exports={pipelineImpl:I,pipeline:function B(...K){return I(K,U(function ke(K){return v(K[K.length-1],"streams[stream.length - 1]"),K.pop()}(K)))}}},8383:(te,J,m)=>{var E=m(6737).default,b=m(8186).default;const D=m(42),{ArrayPrototypeIndexOf:A,NumberIsInteger:k,NumberIsNaN:g,NumberParseInt:y,ObjectDefineProperties:M,ObjectKeys:j,ObjectSetPrototypeOf:N,Promise:U,SafeSet:ce,SymbolAsyncIterator:R,Symbol:$}=m(6305);te.exports=Xe,Xe.ReadableState=Se;const{EventEmitter:ae}=m(2016),{Stream:Y,prependListener:re}=m(900),{Buffer:ne}=m(1657),{addAbortSignal:W}=m(9987),z=m(4618);let v=m(2656).debuglog("stream",S=>{v=S});const L=m(2960),T=m(5601),{getHighWaterMark:he,getDefaultHighWaterMark:H}=m(8782),{aggregateTwoErrors:Ce,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:xe,ERR_OUT_OF_RANGE:Ie,ERR_STREAM_PUSH_AFTER_EOF:De,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:tt}}=m(4370),{validateObject:Ye}=m(2120),Ae=$("kPaused"),{StringDecoder:Ne}=m(2024),ke=m(55);N(Xe.prototype,Y.prototype),N(Xe,Y);const ze=()=>{},{errorOrDestroy:me}=T;function Se(S,oe,We){"boolean"!=typeof We&&(We=oe instanceof m(5931)),this.objectMode=!(!S||!S.objectMode),We&&(this.objectMode=this.objectMode||!(!S||!S.readableObjectMode)),this.highWaterMark=S?he(this,S,"readableHighWaterMark",We):H(!1),this.buffer=new L,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ae]=null,this.errorEmitted=!1,this.emitClose=!S||!1!==S.emitClose,this.autoDestroy=!S||!1!==S.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,S&&S.encoding&&(this.decoder=new Ne(S.encoding),this.encoding=S.encoding)}function Xe(S){if(!(this instanceof Xe))return new Xe(S);const oe=this instanceof m(5931);this._readableState=new Se(S,this,oe),S&&("function"==typeof S.read&&(this._read=S.read),"function"==typeof S.destroy&&(this._destroy=S.destroy),"function"==typeof S.construct&&(this._construct=S.construct),S.signal&&!oe&&W(S.signal,this)),Y.call(this,S),T.construct(this,()=>{this._readableState.needReadable&&Ve(this,this._readableState)})}function rt(S,oe,We,Je){v("readableAddChunk",oe);const st=S._readableState;let $t;if(st.objectMode||("string"==typeof oe?st.encoding!==(We=We||st.defaultEncoding)&&(Je&&st.encoding?oe=ne.from(oe,We).toString(st.encoding):(oe=ne.from(oe,We),We="")):oe instanceof ne?We="":Y._isUint8Array(oe)?(oe=Y._uint8ArrayToBuffer(oe),We=""):null!=oe&&($t=new le("chunk",["string","Buffer","Uint8Array"],oe))),$t)me(S,$t);else if(null===oe)st.reading=!1,function se(S,oe){if(v("onEofChunk"),!oe.ended){if(oe.decoder){const We=oe.decoder.end();We&&We.length&&(oe.buffer.push(We),oe.length+=oe.objectMode?1:We.length)}oe.ended=!0,oe.sync?K(S):(oe.needReadable=!1,oe.emittedReadable=!0,Fe(S))}}(S,st);else if(st.objectMode||oe&&oe.length>0)if(Je)if(st.endEmitted)me(S,new tt);else{if(st.destroyed||st.errored)return!1;Qe(S,st,oe,!0)}else if(st.ended)me(S,new De);else{if(st.destroyed||st.errored)return!1;st.reading=!1,st.decoder&&!We?(oe=st.decoder.write(oe),st.objectMode||0!==oe.length?Qe(S,st,oe,!1):Ve(S,st)):Qe(S,st,oe,!1)}else Je||(st.reading=!1,Ve(S,st));return!st.ended&&(st.length<st.highWaterMark||0===st.length)}function Qe(S,oe,We,Je){oe.flowing&&0===oe.length&&!oe.sync&&S.listenerCount("data")>0?(oe.multiAwaitDrain?oe.awaitDrainWriters.clear():oe.awaitDrainWriters=null,oe.dataEmitted=!0,S.emit("data",We)):(oe.length+=oe.objectMode?1:We.length,Je?oe.buffer.unshift(We):oe.buffer.push(We),oe.needReadable&&K(S)),Ve(S,oe)}function I(S,oe){return S<=0||0===oe.length&&oe.ended?0:oe.objectMode?1:g(S)?oe.flowing&&oe.length?oe.buffer.first().length:oe.length:S<=oe.length?S:oe.ended?oe.length:0}function K(S){const oe=S._readableState;v("emitReadable",oe.needReadable,oe.emittedReadable),oe.needReadable=!1,oe.emittedReadable||(v("emitReadable",oe.flowing),oe.emittedReadable=!0,D.nextTick(Fe,S))}function Fe(S){const oe=S._readableState;v("emitReadable_",oe.destroyed,oe.length,oe.ended),!oe.destroyed&&!oe.errored&&(oe.length||oe.ended)&&(S.emit("readable"),oe.emittedReadable=!1),oe.needReadable=!oe.flowing&&!oe.ended&&oe.length<=oe.highWaterMark,de(S)}function Ve(S,oe){!oe.readingMore&&oe.constructed&&(oe.readingMore=!0,D.nextTick(pe,S,oe))}function pe(S,oe){for(;!oe.reading&&!oe.ended&&(oe.length<oe.highWaterMark||oe.flowing&&0===oe.length);){const We=oe.length;if(v("maybeReadMore read 0"),S.read(0),We===oe.length)break}oe.readingMore=!1}function G(S){const oe=S._readableState;oe.readableListening=S.listenerCount("readable")>0,oe.resumeScheduled&&!1===oe[Ae]?oe.flowing=!0:S.listenerCount("data")>0?S.resume():oe.readableListening||(oe.flowing=null)}function C(S){v("readable nexttick read 0"),S.read(0)}function ue(S,oe){v("resume",oe.reading),oe.reading||S.read(0),oe.resumeScheduled=!1,S.emit("resume"),de(S),oe.flowing&&!oe.reading&&S.read(0)}function de(S){const oe=S._readableState;for(v("flow",oe.flowing);oe.flowing&&null!==S.read(););}function He(S,oe){"function"!=typeof S.read&&(S=Xe.wrap(S,{objectMode:!0}));const We=function Ke(S,oe){return ut.apply(this,arguments)}(S,oe);return We.stream=S,We}function ut(){return(ut=b(function*(S,oe){let st,We=ze;function Je(on){this===S?(We(),We=ze):We=on}S.on("readable",Je);const $t=z(S,{writable:!1},on=>{st=on?Ce(st,on):null,We(),We=ze});try{for(;;){const on=S.destroyed?null:S.read();if(null!==on)yield on;else{if(st)throw st;if(null===st)return;yield E(new U(Je))}}}catch(on){throw st=Ce(st,on),st}finally{!st&&!1===oe?.destroyOnReturn||void 0!==st&&!S._readableState.autoDestroy?(S.off("readable",Je),$t()):T.destroyer(S,null)}})).apply(this,arguments)}function Rt(S,oe){if(0===oe.length)return null;let We;return oe.objectMode?We=oe.buffer.shift():!S||S>=oe.length?(We=oe.decoder?oe.buffer.join(""):1===oe.buffer.length?oe.buffer.first():oe.buffer.concat(oe.length),oe.buffer.clear()):We=oe.buffer.consume(S,oe.decoder),We}function dt(S){const oe=S._readableState;v("endReadable",oe.endEmitted),oe.endEmitted||(oe.ended=!0,D.nextTick(Vt,oe,S))}function Vt(S,oe){if(v("endReadableNT",S.endEmitted,S.length),!S.errored&&!S.closeEmitted&&!S.endEmitted&&0===S.length)if(S.endEmitted=!0,oe.emit("end"),oe.writable&&!1===oe.allowHalfOpen)D.nextTick(rn,oe);else if(S.autoDestroy){const We=oe._writableState;(!We||We.autoDestroy&&(We.finished||!1===We.writable))&&oe.destroy()}}function rn(S){S.writable&&!S.writableEnded&&!S.destroyed&&S.end()}let Re;function q(){return void 0===Re&&(Re={}),Re}Xe.prototype.destroy=T.destroy,Xe.prototype._undestroy=T.undestroy,Xe.prototype._destroy=function(S,oe){oe(S)},Xe.prototype[ae.captureRejectionSymbol]=function(S){this.destroy(S)},Xe.prototype.push=function(S,oe){return rt(this,S,oe,!1)},Xe.prototype.unshift=function(S,oe){return rt(this,S,oe,!0)},Xe.prototype.isPaused=function(){const S=this._readableState;return!0===S[Ae]||!1===S.flowing},Xe.prototype.setEncoding=function(S){const oe=new Ne(S);this._readableState.decoder=oe,this._readableState.encoding=this._readableState.decoder.encoding;const We=this._readableState.buffer;let Je="";for(const st of We)Je+=oe.write(st);return We.clear(),""!==Je&&We.push(Je),this._readableState.length=Je.length,this},Xe.prototype.read=function(S){v("read",S),void 0===S?S=NaN:k(S)||(S=y(S,10));const oe=this._readableState,We=S;if(S>oe.highWaterMark&&(oe.highWaterMark=function B(S){if(S>1073741824)throw new Ie("size","<= 1GiB",S);return S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,++S}(S)),0!==S&&(oe.emittedReadable=!1),0===S&&oe.needReadable&&((0!==oe.highWaterMark?oe.length>=oe.highWaterMark:oe.length>0)||oe.ended))return v("read: emitReadable",oe.length,oe.ended),0===oe.length&&oe.ended?dt(this):K(this),null;if(0===(S=I(S,oe))&&oe.ended)return 0===oe.length&&dt(this),null;let st,Je=oe.needReadable;if(v("need readable",Je),(0===oe.length||oe.length-S<oe.highWaterMark)&&(Je=!0,v("length less than watermark",Je)),oe.ended||oe.reading||oe.destroyed||oe.errored||!oe.constructed)Je=!1,v("reading, ended or constructing",Je);else if(Je){v("do read"),oe.reading=!0,oe.sync=!0,0===oe.length&&(oe.needReadable=!0);try{this._read(oe.highWaterMark)}catch($t){me(this,$t)}oe.sync=!1,oe.reading||(S=I(We,oe))}return st=S>0?Rt(S,oe):null,null===st?(oe.needReadable=oe.length<=oe.highWaterMark,S=0):(oe.length-=S,oe.multiAwaitDrain?oe.awaitDrainWriters.clear():oe.awaitDrainWriters=null),0===oe.length&&(oe.ended||(oe.needReadable=!0),We!==S&&oe.ended&&dt(this)),null!==st&&!oe.errorEmitted&&!oe.closeEmitted&&(oe.dataEmitted=!0,this.emit("data",st)),st},Xe.prototype._read=function(S){throw new xe("_read()")},Xe.prototype.pipe=function(S,oe){const We=this,Je=this._readableState;1===Je.pipes.length&&(Je.multiAwaitDrain||(Je.multiAwaitDrain=!0,Je.awaitDrainWriters=new ce(Je.awaitDrainWriters?[Je.awaitDrainWriters]:[]))),Je.pipes.push(S),v("pipe count=%d opts=%j",Je.pipes.length,oe);const $t=oe&&!1===oe.end||S===D.stdout||S===D.stderr?Ns:Gn;function Gn(){v("onend"),S.end()}Je.endEmitted?D.nextTick($t):We.once("end",$t),S.on("unpipe",function on(Io,fo){v("onunpipe"),Io===We&&fo&&!1===fo.hasUnpiped&&(fo.hasUnpiped=!0,function To(){v("cleanup"),S.removeListener("close",Ur),S.removeListener("finish",ms),Wn&&S.removeListener("drain",Wn),S.removeListener("error",Zi),S.removeListener("unpipe",on),We.removeListener("end",Gn),We.removeListener("end",Ns),We.removeListener("data",Mo),In=!0,Wn&&Je.awaitDrainWriters&&(!S._writableState||S._writableState.needDrain)&&Wn()}())});let Wn,In=!1;function jr(){In||(1===Je.pipes.length&&Je.pipes[0]===S?(v("false write response, pause",0),Je.awaitDrainWriters=S,Je.multiAwaitDrain=!1):Je.pipes.length>1&&Je.pipes.includes(S)&&(v("false write response, pause",Je.awaitDrainWriters.size),Je.awaitDrainWriters.add(S)),We.pause()),Wn||(Wn=function Z(S,oe){return function(){const Je=S._readableState;Je.awaitDrainWriters===oe?(v("pipeOnDrain",1),Je.awaitDrainWriters=null):Je.multiAwaitDrain&&(v("pipeOnDrain",Je.awaitDrainWriters.size),Je.awaitDrainWriters.delete(oe)),(!Je.awaitDrainWriters||0===Je.awaitDrainWriters.size)&&S.listenerCount("data")&&S.resume()}}(We,S),S.on("drain",Wn))}function Mo(Io){v("ondata");const fo=S.write(Io);v("dest.write",fo),!1===fo&&jr()}function Zi(Io){if(v("onerror",Io),Ns(),S.removeListener("error",Zi),0===S.listenerCount("error")){const fo=S._writableState||S._readableState;fo&&!fo.errorEmitted?me(S,Io):S.emit("error",Io)}}function Ur(){S.removeListener("finish",ms),Ns()}function ms(){v("onfinish"),S.removeListener("close",Ur),Ns()}function Ns(){v("unpipe"),We.unpipe(S)}return We.on("data",Mo),re(S,"error",Zi),S.once("close",Ur),S.once("finish",ms),S.emit("pipe",We),!0===S.writableNeedDrain?Je.flowing&&jr():Je.flowing||(v("pipe resume"),We.resume()),S},Xe.prototype.unpipe=function(S){const oe=this._readableState;if(0===oe.pipes.length)return this;if(!S){const st=oe.pipes;oe.pipes=[],this.pause();for(let $t=0;$t<st.length;$t++)st[$t].emit("unpipe",this,{hasUnpiped:!1});return this}const Je=A(oe.pipes,S);return-1===Je||(oe.pipes.splice(Je,1),0===oe.pipes.length&&this.pause(),S.emit("unpipe",this,{hasUnpiped:!1})),this},Xe.prototype.addListener=Xe.prototype.on=function(S,oe){const We=Y.prototype.on.call(this,S,oe),Je=this._readableState;return"data"===S?(Je.readableListening=this.listenerCount("readable")>0,!1!==Je.flowing&&this.resume()):"readable"===S&&!Je.endEmitted&&!Je.readableListening&&(Je.readableListening=Je.needReadable=!0,Je.flowing=!1,Je.emittedReadable=!1,v("on readable",Je.length,Je.reading),Je.length?K(this):Je.reading||D.nextTick(C,this)),We},Xe.prototype.off=Xe.prototype.removeListener=function(S,oe){const We=Y.prototype.removeListener.call(this,S,oe);return"readable"===S&&D.nextTick(G,this),We},Xe.prototype.removeAllListeners=function(S){const oe=Y.prototype.removeAllListeners.apply(this,arguments);return("readable"===S||void 0===S)&&D.nextTick(G,this),oe},Xe.prototype.resume=function(){const S=this._readableState;return S.flowing||(v("resume"),S.flowing=!S.readableListening,function O(S,oe){oe.resumeScheduled||(oe.resumeScheduled=!0,D.nextTick(ue,S,oe))}(this,S)),S[Ae]=!1,this},Xe.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ae]=!0,this},Xe.prototype.wrap=function(S){let oe=!1;S.on("data",Je=>{!this.push(Je)&&S.pause&&(oe=!0,S.pause())}),S.on("end",()=>{this.push(null)}),S.on("error",Je=>{me(this,Je)}),S.on("close",()=>{this.destroy()}),S.on("destroy",()=>{this.destroy()}),this._read=()=>{oe&&S.resume&&(oe=!1,S.resume())};const We=j(S);for(let Je=1;Je<We.length;Je++){const st=We[Je];void 0===this[st]&&"function"==typeof S[st]&&(this[st]=S[st].bind(S))}return this},Xe.prototype[R]=function(){return He(this)},Xe.prototype.iterator=function(S){return void 0!==S&&Ye(S,"options"),He(this,S)},M(Xe.prototype,{readable:{__proto__:null,get(){const S=this._readableState;return!(!S||!1===S.readable||S.destroyed||S.errorEmitted||S.endEmitted)},set(S){this._readableState&&(this._readableState.readable=!!S)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(S){this._readableState&&(this._readableState.flowing=S)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(S){this._readableState&&(this._readableState.destroyed=S)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),M(Se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ae]},set(S){this[Ae]=!!S}}}),Xe._fromList=Rt,Xe.from=function(S,oe){return ke(Xe,S,oe)},Xe.fromWeb=function(S,oe){return q().newStreamReadableFromReadableStream(S,oe)},Xe.toWeb=function(S,oe){return q().newReadableStreamFromStreamReadable(S,oe)},Xe.wrap=function(S,oe){var We,Je;return new Xe({objectMode:null===(We=null!==(Je=S.readableObjectMode)&&void 0!==Je?Je:S.objectMode)||void 0===We||We,...oe,destroy(st,$t){T.destroyer(S,st),$t(st)}}).wrap(S)}},8782:(te,J,m)=>{"use strict";const{MathFloor:E,NumberIsInteger:b}=m(6305),{ERR_INVALID_ARG_VALUE:D}=m(4370).codes;function k(y){return y?16:16384}te.exports={getHighWaterMark:function g(y,M,j,N){const U=function A(y,M,j){return null!=y.highWaterMark?y.highWaterMark:M?y[j]:null}(M,N,j);if(null!=U){if(!b(U)||U<0)throw new D(N?`options.${j}`:"options.highWaterMark",U);return E(U)}return k(y.objectMode)},getDefaultHighWaterMark:k}},123:(te,J,m)=>{"use strict";const{ObjectSetPrototypeOf:E,Symbol:b}=m(6305);te.exports=y;const{ERR_METHOD_NOT_IMPLEMENTED:D}=m(4370).codes,A=m(5931),{getHighWaterMark:k}=m(8782);E(y.prototype,A.prototype),E(y,A);const g=b("kCallback");function y(N){if(!(this instanceof y))return new y(N);const U=N?k(this,N,"readableHighWaterMark",!0):null;0===U&&(N={...N,highWaterMark:null,readableHighWaterMark:U,writableHighWaterMark:N.writableHighWaterMark||0}),A.call(this,N),this._readableState.sync=!1,this[g]=null,N&&("function"==typeof N.transform&&(this._transform=N.transform),"function"==typeof N.flush&&(this._flush=N.flush)),this.on("prefinish",j)}function M(N){"function"!=typeof this._flush||this.destroyed?(this.push(null),N&&N()):this._flush((U,ce)=>{U?N?N(U):this.destroy(U):(null!=ce&&this.push(ce),this.push(null),N&&N())})}function j(){this._final!==M&&M.call(this)}y.prototype._final=M,y.prototype._transform=function(N,U,ce){throw new D("_transform()")},y.prototype._write=function(N,U,ce){const R=this._readableState,$=this._writableState,ae=R.length;this._transform(N,U,(Y,re)=>{Y?ce(Y):(null!=re&&this.push(re),$.ended||ae===R.length||R.length<R.highWaterMark?ce():this[g]=ce)})},y.prototype._read=function(){if(this[g]){const N=this[g];this[g]=null,N()}}},5428:(te,J,m)=>{"use strict";const{Symbol:E,SymbolAsyncIterator:b,SymbolIterator:D,SymbolFor:A}=m(6305),k=E("kDestroyed"),g=E("kIsErrored"),y=E("kIsReadable"),M=E("kIsDisturbed"),j=A("nodejs.webstream.isClosedPromise"),N=A("nodejs.webstream.controllerErrorFunction");function U(me,Se=!1){var Xe;return!(!me||"function"!=typeof me.pipe||"function"!=typeof me.on||Se&&("function"!=typeof me.pause||"function"!=typeof me.resume)||me._writableState&&!1===(null===(Xe=me._readableState)||void 0===Xe?void 0:Xe.readable)||me._writableState&&!me._readableState)}function ce(me){var Se;return!(!me||"function"!=typeof me.write||"function"!=typeof me.on||me._readableState&&!1===(null===(Se=me._writableState)||void 0===Se?void 0:Se.writable))}function $(me){return me&&(me._readableState||me._writableState||"function"==typeof me.write&&"function"==typeof me.on||"function"==typeof me.pipe&&"function"==typeof me.on)}function ae(me){return!(!me||$(me)||"function"!=typeof me.pipeThrough||"function"!=typeof me.getReader||"function"!=typeof me.cancel)}function Y(me){return!(!me||$(me)||"function"!=typeof me.getWriter||"function"!=typeof me.abort)}function re(me){return!(!me||$(me)||"object"!=typeof me.readable||"object"!=typeof me.writable)}function z(me){if(!$(me))return null;const rt=me._writableState||me._readableState;return!!(me.destroyed||me[k]||null!=rt&&rt.destroyed)}function v(me){if(!ce(me))return null;if(!0===me.writableEnded)return!0;const Se=me._writableState;return(null==Se||!Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)}function he(me,Se){if(!U(me))return null;const Xe=me._readableState;return(null==Xe||!Xe.errored)&&("boolean"!=typeof Xe?.endEmitted?null:!!(Xe.endEmitted||!1===Se&&!0===Xe.ended&&0===Xe.length))}function H(me){return me&&null!=me[y]?me[y]:"boolean"!=typeof me?.readable?null:!z(me)&&U(me)&&me.readable&&!he(me)}function Ce(me){return"boolean"!=typeof me?.writable?null:!z(me)&&ce(me)&&me.writable&&!v(me)}function tt(me){return"boolean"==typeof me._closed&&"boolean"==typeof me._defaultKeepAlive&&"boolean"==typeof me._removedConnection&&"boolean"==typeof me._removedContLen}function Ye(me){return"boolean"==typeof me._sent100&&tt(me)}te.exports={kDestroyed:k,isDisturbed:function ke(me){var Se;return!(!me||!(null!==(Se=me[M])&&void 0!==Se?Se:me.readableDidRead||me.readableAborted))},kIsDisturbed:M,isErrored:function ze(me){var Se,Xe,rt,Qe,ge,B,I,se,K,Fe;return!(!me||!(null!==(Se=null!==(Xe=null!==(rt=null!==(Qe=null!==(ge=null!==(B=me[g])&&void 0!==B?B:me.readableErrored)&&void 0!==ge?ge:me.writableErrored)&&void 0!==Qe?Qe:null===(I=me._readableState)||void 0===I?void 0:I.errorEmitted)&&void 0!==rt?rt:null===(se=me._writableState)||void 0===se?void 0:se.errorEmitted)&&void 0!==Xe?Xe:null===(K=me._readableState)||void 0===K?void 0:K.errored)&&void 0!==Se?Se:null!==(Fe=me._writableState)&&void 0!==Fe&&Fe.errored))},kIsErrored:g,isReadable:H,kIsReadable:y,kIsClosedPromise:j,kControllerErrorFunction:N,isClosed:function De(me){if(!$(me))return null;if("boolean"==typeof me.closed)return me.closed;const Se=me._writableState,Xe=me._readableState;return"boolean"==typeof Se?.closed||"boolean"==typeof Xe?.closed?Se?.closed||Xe?.closed:"boolean"==typeof me._closed&&tt(me)?me._closed:null},isDestroyed:z,isDuplexNodeStream:function R(me){return!(!me||"function"!=typeof me.pipe||!me._readableState||"function"!=typeof me.on||"function"!=typeof me.write)},isFinished:function le(me,Se){return $(me)?!!z(me)||!(!1!==Se?.readable&&H(me)||!1!==Se?.writable&&Ce(me)):null},isIterable:function W(me,Se){return null!=me&&(!0===Se?"function"==typeof me[b]:!1===Se?"function"==typeof me[D]:"function"==typeof me[b]||"function"==typeof me[D])},isReadableNodeStream:U,isReadableStream:ae,isReadableEnded:function T(me){if(!U(me))return null;if(!0===me.readableEnded)return!0;const Se=me._readableState;return!(!Se||Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)},isReadableFinished:he,isReadableErrored:function Ie(me){var Se,Xe;return $(me)?me.readableErrored?me.readableErrored:null!==(Se=null===(Xe=me._readableState)||void 0===Xe?void 0:Xe.errored)&&void 0!==Se?Se:null:null},isNodeStream:$,isWebStream:function ne(me){return ae(me)||Y(me)||re(me)},isWritable:Ce,isWritableNodeStream:ce,isWritableStream:Y,isWritableEnded:v,isWritableFinished:function L(me,Se){if(!ce(me))return null;if(!0===me.writableFinished)return!0;const Xe=me._writableState;return(null==Xe||!Xe.errored)&&("boolean"!=typeof Xe?.finished?null:!!(Xe.finished||!1===Se&&!0===Xe.ended&&0===Xe.length))},isWritableErrored:function xe(me){var Se,Xe;return $(me)?me.writableErrored?me.writableErrored:null!==(Se=null===(Xe=me._writableState)||void 0===Xe?void 0:Xe.errored)&&void 0!==Se?Se:null:null},isServerRequest:function Ae(me){var Se;return"boolean"==typeof me._consuming&&"boolean"==typeof me._dumped&&void 0===(null===(Se=me.req)||void 0===Se?void 0:Se.upgradeOrConnect)},isServerResponse:Ye,willEmitClose:function Ne(me){if(!$(me))return null;const rt=me._writableState||me._readableState;return!rt&&Ye(me)||!!(rt&&rt.autoDestroy&&rt.emitClose&&!1===rt.closed)},isTransformStream:re}},9764:(te,J,m)=>{const E=m(42),{ArrayPrototypeSlice:b,Error:D,FunctionPrototypeSymbolHasInstance:A,ObjectDefineProperty:k,ObjectDefineProperties:g,ObjectSetPrototypeOf:y,StringPrototypeToLowerCase:M,Symbol:j,SymbolHasInstance:N}=m(6305);te.exports=Ye,Ye.WritableState=De;const{EventEmitter:U}=m(2016),ce=m(900).Stream,{Buffer:R}=m(1657),$=m(5601),{addAbortSignal:ae}=m(9987),{getHighWaterMark:Y,getDefaultHighWaterMark:re}=m(8782),{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_MULTIPLE_CALLBACK:z,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:H,ERR_UNKNOWN_ENCODING:Ce}=m(4370).codes,{errorOrDestroy:le}=$;function xe(){}y(Ye.prototype,ce.prototype),y(Ye,ce);const Ie=j("kOnFinished");function De(Z,G,C){"boolean"!=typeof C&&(C=G instanceof m(5931)),this.objectMode=!(!Z||!Z.objectMode),C&&(this.objectMode=this.objectMode||!(!Z||!Z.writableObjectMode)),this.highWaterMark=Z?Y(this,Z,"writableHighWaterMark",C):re(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Z&&!1===Z.decodeStrings),this.defaultEncoding=Z&&Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=me.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,tt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Z||!1!==Z.emitClose,this.autoDestroy=!Z||!1!==Z.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ie]=[]}function tt(Z){Z.buffered=[],Z.bufferedIndex=0,Z.allBuffers=!0,Z.allNoop=!0}function Ye(Z){const G=this instanceof m(5931);if(!G&&!A(Ye,this))return new Ye(Z);this._writableState=new De(Z,this,G),Z&&("function"==typeof Z.write&&(this._write=Z.write),"function"==typeof Z.writev&&(this._writev=Z.writev),"function"==typeof Z.destroy&&(this._destroy=Z.destroy),"function"==typeof Z.final&&(this._final=Z.final),"function"==typeof Z.construct&&(this._construct=Z.construct),Z.signal&&ae(Z.signal,this)),ce.call(this,Z),$.construct(this,()=>{const C=this._writableState;C.writing||Qe(this,C),se(this,C)})}function Ae(Z,G,C,O){const ue=Z._writableState;if("function"==typeof C)O=C,C=ue.defaultEncoding;else{if(C){if("buffer"!==C&&!R.isEncoding(C))throw new Ce(C)}else C=ue.defaultEncoding;"function"!=typeof O&&(O=xe)}if(null===G)throw new he;if(!ue.objectMode)if("string"==typeof G)!1!==ue.decodeStrings&&(G=R.from(G,C),C="buffer");else if(G instanceof R)C="buffer";else{if(!ce._isUint8Array(G))throw new ne("chunk",["string","Buffer","Uint8Array"],G);G=ce._uint8ArrayToBuffer(G),C="buffer"}let de;return ue.ending?de=new H:ue.destroyed&&(de=new L("write")),de?(E.nextTick(O,de),le(Z,de,!0),de):(ue.pendingcb++,function Ne(Z,G,C,O,ue){const de=G.objectMode?1:C.length;G.length+=de;const He=G.length<G.highWaterMark;return He||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:C,encoding:O,callback:ue}),G.allBuffers&&"buffer"!==O&&(G.allBuffers=!1),G.allNoop&&ue!==xe&&(G.allNoop=!1)):(G.writelen=de,G.writecb=ue,G.writing=!0,G.sync=!0,Z._write(C,O,G.onwrite),G.sync=!1),He&&!G.errored&&!G.destroyed}(Z,ue,G,C,O))}function ke(Z,G,C,O,ue,de,He){G.writelen=O,G.writecb=He,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new L("write")):C?Z._writev(ue,G.onwrite):Z._write(ue,de,G.onwrite),G.sync=!1}function ze(Z,G,C,O){--G.pendingcb,O(C),rt(G),le(Z,C)}function me(Z,G){const C=Z._writableState,O=C.sync,ue=C.writecb;"function"==typeof ue?(C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0,G?(C.errored||(C.errored=G),Z._readableState&&!Z._readableState.errored&&(Z._readableState.errored=G),O?E.nextTick(ze,Z,C,G,ue):ze(Z,C,G,ue)):(C.buffered.length>C.bufferedIndex&&Qe(Z,C),O?null!==C.afterWriteTickInfo&&C.afterWriteTickInfo.cb===ue?C.afterWriteTickInfo.count++:(C.afterWriteTickInfo={count:1,cb:ue,stream:Z,state:C},E.nextTick(Se,C.afterWriteTickInfo)):Xe(Z,C,1,ue))):le(Z,new z)}function Se({stream:Z,state:G,count:C,cb:O}){return G.afterWriteTickInfo=null,Xe(Z,G,C,O)}function Xe(Z,G,C,O){for(!G.ending&&!Z.destroyed&&0===G.length&&G.needDrain&&(G.needDrain=!1,Z.emit("drain"));C-- >0;)G.pendingcb--,O();G.destroyed&&rt(G),se(Z,G)}function rt(Z){if(Z.writing)return;for(let ue=Z.bufferedIndex;ue<Z.buffered.length;++ue){var G;const{chunk:de,callback:He}=Z.buffered[ue];Z.length-=Z.objectMode?1:de.length,He(null!==(G=Z.errored)&&void 0!==G?G:new L("write"))}const C=Z[Ie].splice(0);for(let ue=0;ue<C.length;ue++){var O;C[ue](null!==(O=Z.errored)&&void 0!==O?O:new L("end"))}tt(Z)}function Qe(Z,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;const{buffered:C,bufferedIndex:O,objectMode:ue}=G,de=C.length-O;if(!de)return;let He=O;if(G.bufferProcessing=!0,de>1&&Z._writev){G.pendingcb-=de-1;const Ke=G.allNoop?xe:Rt=>{for(let dt=He;dt<C.length;++dt)C[dt].callback(Rt)},ut=G.allNoop&&0===He?C:b(C,He);ut.allBuffers=G.allBuffers,ke(Z,G,!0,G.length,ut,"",Ke),tt(G)}else{do{const{chunk:Ke,encoding:ut,callback:Rt}=C[He];C[He++]=null,ke(Z,G,!1,ue?1:Ke.length,Ke,ut,Rt)}while(He<C.length&&!G.writing);He===C.length?tt(G):He>256?(C.splice(0,He),G.bufferedIndex=0):G.bufferedIndex=He}G.bufferProcessing=!1}function ge(Z){return Z.ending&&!Z.destroyed&&Z.constructed&&0===Z.length&&!Z.errored&&0===Z.buffered.length&&!Z.finished&&!Z.writing&&!Z.errorEmitted&&!Z.closeEmitted}function se(Z,G,C){ge(G)&&(function I(Z,G){!G.prefinished&&!G.finalCalled&&("function"!=typeof Z._final||G.destroyed?(G.prefinished=!0,Z.emit("prefinish")):(G.finalCalled=!0,function B(Z,G){let C=!1;function O(ue){if(C)le(Z,ue??z());else if(C=!0,G.pendingcb--,ue){const de=G[Ie].splice(0);for(let He=0;He<de.length;He++)de[He](ue);le(Z,ue,G.sync)}else ge(G)&&(G.prefinished=!0,Z.emit("prefinish"),G.pendingcb++,E.nextTick(K,Z,G))}G.sync=!0,G.pendingcb++;try{Z._final(O)}catch(ue){O(ue)}G.sync=!1}(Z,G)))}(Z,G),0===G.pendingcb&&(C?(G.pendingcb++,E.nextTick((O,ue)=>{ge(ue)?K(O,ue):ue.pendingcb--},Z,G)):ge(G)&&(G.pendingcb++,K(Z,G))))}function K(Z,G){G.pendingcb--,G.finished=!0;const C=G[Ie].splice(0);for(let O=0;O<C.length;O++)C[O]();if(Z.emit("finish"),G.autoDestroy){const O=Z._readableState;(!O||O.autoDestroy&&(O.endEmitted||!1===O.readable))&&Z.destroy()}}De.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},k(De.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),k(Ye,N,{__proto__:null,value:function(Z){return!!A(this,Z)||this===Ye&&Z&&Z._writableState instanceof De}}),Ye.prototype.pipe=function(){le(this,new v)},Ye.prototype.write=function(Z,G,C){return!0===Ae(this,Z,G,C)},Ye.prototype.cork=function(){this._writableState.corked++},Ye.prototype.uncork=function(){const Z=this._writableState;Z.corked&&(Z.corked--,Z.writing||Qe(this,Z))},Ye.prototype.setDefaultEncoding=function(G){if("string"==typeof G&&(G=M(G)),!R.isEncoding(G))throw new Ce(G);return this._writableState.defaultEncoding=G,this},Ye.prototype._write=function(Z,G,C){if(!this._writev)throw new W("_write()");this._writev([{chunk:Z,encoding:G}],C)},Ye.prototype._writev=null,Ye.prototype.end=function(Z,G,C){const O=this._writableState;let ue;if("function"==typeof Z?(C=Z,Z=null,G=null):"function"==typeof G&&(C=G,G=null),null!=Z){const de=Ae(this,Z,G);de instanceof D&&(ue=de)}return O.corked&&(O.corked=1,this.uncork()),ue||(O.errored||O.ending?O.finished?ue=new T("end"):O.destroyed&&(ue=new L("end")):(O.ending=!0,se(this,O,!0),O.ended=!0)),"function"==typeof C&&(ue||O.finished?E.nextTick(C,ue):O[Ie].push(C)),this},g(Ye.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Z){this._writableState&&(this._writableState.destroyed=Z)}},writable:{__proto__:null,get(){const Z=this._writableState;return!(!Z||!1===Z.writable||Z.destroyed||Z.errored||Z.ending||Z.ended)},set(Z){this._writableState&&(this._writableState.writable=!!Z)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Z=this._writableState;return!!Z&&!Z.destroyed&&!Z.ending&&Z.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Fe=$.destroy;let Ve;function pe(){return void 0===Ve&&(Ve={}),Ve}Ye.prototype.destroy=function(Z,G){const C=this._writableState;return!C.destroyed&&(C.bufferedIndex<C.buffered.length||C[Ie].length)&&E.nextTick(rt,C),Fe.call(this,Z,G),this},Ye.prototype._undestroy=$.undestroy,Ye.prototype._destroy=function(Z,G){G(Z)},Ye.prototype[U.captureRejectionSymbol]=function(Z){this.destroy(Z)},Ye.fromWeb=function(Z,G){return pe().newStreamWritableFromWritableStream(Z,G)},Ye.toWeb=function(Z){return pe().newWritableStreamFromStreamWritable(Z)}},2120:(te,J,m)=>{"use strict";const{ArrayIsArray:E,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:D,ArrayPrototypeMap:A,NumberIsInteger:k,NumberIsNaN:g,NumberMAX_SAFE_INTEGER:y,NumberMIN_SAFE_INTEGER:M,NumberParseInt:j,ObjectPrototypeHasOwnProperty:N,RegExpPrototypeExec:U,String:ce,StringPrototypeToUpperCase:R,StringPrototypeTrim:$}=m(6305),{hideStackFrames:ae,codes:{ERR_SOCKET_BAD_PORT:Y,ERR_INVALID_ARG_TYPE:re,ERR_INVALID_ARG_VALUE:ne,ERR_OUT_OF_RANGE:W,ERR_UNKNOWN_SIGNAL:z}}=m(4370),{normalizeEncoding:v}=m(2656),{isAsyncFunction:L,isArrayBufferView:T}=m(2656).types,he={},le=/^[0-7]+$/,De=ae((de,He,Ke=M,ut=y)=>{if("number"!=typeof de)throw new re(He,"number",de);if(!k(de))throw new W(He,"an integer",de);if(de<Ke||de>ut)throw new W(He,`>= ${Ke} && <= ${ut}`,de)}),tt=ae((de,He,Ke=-2147483648,ut=2147483647)=>{if("number"!=typeof de)throw new re(He,"number",de);if(!k(de))throw new W(He,"an integer",de);if(de<Ke||de>ut)throw new W(He,`>= ${Ke} && <= ${ut}`,de)}),Ye=ae((de,He,Ke=!1)=>{if("number"!=typeof de)throw new re(He,"number",de);if(!k(de))throw new W(He,"an integer",de);const ut=Ke?1:0,Rt=4294967295;if(de<ut||de>Rt)throw new W(He,`>= ${ut} && <= ${Rt}`,de)});function Ae(de,He){if("string"!=typeof de)throw new re(He,"string",de)}const ke=ae((de,He,Ke)=>{if(!b(Ke,de)){const Rt="must be one of: "+D(A(Ke,dt=>"string"==typeof dt?`'${dt}'`:ce(dt)),", ");throw new ne(He,de,Rt)}});function ze(de,He){if("boolean"!=typeof de)throw new re(He,"boolean",de)}function me(de,He,Ke){return null!=de&&N(de,He)?de[He]:Ke}const Se=ae((de,He,Ke=null)=>{const ut=me(Ke,"allowArray",!1),Rt=me(Ke,"allowFunction",!1);if(!me(Ke,"nullable",!1)&&null===de||!ut&&E(de)||"object"!=typeof de&&(!Rt||"function"!=typeof de))throw new re(He,"Object",de)}),Xe=ae((de,He)=>{if(null!=de&&"object"!=typeof de&&"function"!=typeof de)throw new re(He,"a dictionary",de)}),rt=ae((de,He,Ke=0)=>{if(!E(de))throw new re(He,"Array",de);if(de.length<Ke)throw new ne(He,de,`must be longer than ${Ke}`)}),I=ae((de,He="buffer")=>{if(!T(de))throw new re(He,["Buffer","TypedArray","DataView"],de)}),Fe=ae((de,He)=>{if(void 0!==de&&(null===de||"object"!=typeof de||!("aborted"in de)))throw new re(He,"AbortSignal",de)}),Ve=ae((de,He)=>{if("function"!=typeof de)throw new re(He,"Function",de)}),pe=ae((de,He)=>{if("function"!=typeof de||L(de))throw new re(He,"Function",de)}),Z=ae((de,He)=>{if(void 0!==de)throw new re(He,"undefined",de)}),C=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function O(de,He){if(typeof de>"u"||!U(C,de))throw new ne(He,de,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}te.exports={isInt32:function H(de){return de===(0|de)},isUint32:function Ce(de){return de===de>>>0},parseFileMode:function Ie(de,He,Ke){if(typeof de>"u"&&(de=Ke),"string"==typeof de){if(null===U(le,de))throw new ne(He,de,"must be a 32-bit unsigned integer or an octal string");de=j(de,8)}return Ye(de,He),de},validateArray:rt,validateStringArray:function Qe(de,He){rt(de,He);for(let Ke=0;Ke<de.length;Ke++)Ae(de[Ke],`${He}[${Ke}]`)},validateBooleanArray:function ge(de,He){rt(de,He);for(let Ke=0;Ke<de.length;Ke++)ze(de[Ke],`${He}[${Ke}]`)},validateBoolean:ze,validateBuffer:I,validateDictionary:Xe,validateEncoding:function se(de,He){const Ke=v(He),ut=de.length;if("hex"===Ke&&ut%2!=0)throw new ne("encoding",He,`is invalid for data of length ${ut}`)},validateFunction:Ve,validateInt32:tt,validateInteger:De,validateNumber:function Ne(de,He,Ke=void 0,ut){if("number"!=typeof de)throw new re(He,"number",de);if(null!=Ke&&de<Ke||null!=ut&&de>ut||(null!=Ke||null!=ut)&&g(de))throw new W(He,`${null!=Ke?`>= ${Ke}`:""}${null!=Ke&&null!=ut?" && ":""}${null!=ut?`<= ${ut}`:""}`,de)},validateObject:Se,validateOneOf:ke,validatePlainFunction:pe,validatePort:function K(de,He="Port",Ke=!0){if("number"!=typeof de&&"string"!=typeof de||"string"==typeof de&&0===$(de).length||+de!=+de>>>0||de>65535||0===de&&!Ke)throw new Y(He,de,Ke);return 0|de},validateSignalName:function B(de,He="signal"){if(Ae(de,He),void 0===he[de])throw void 0!==he[R(de)]?new z(de+" (signals must use all capital letters)"):new z(de)},validateString:Ae,validateUint32:Ye,validateUndefined:Z,validateUnion:function G(de,He,Ke){if(!b(Ke,de))throw new re(He,`('${D(Ke,"|")}')`,de)},validateAbortSignal:Fe,validateLinkHeaderValue:function ue(de){if("string"==typeof de)return O(de,"hints"),de;if(E(de)){const He=de.length;let Ke="";if(0===He)return Ke;for(let ut=0;ut<He;ut++){const Rt=de[ut];O(Rt,"hints"),Ke+=Rt,ut!==He-1&&(Ke+=", ")}return Ke}throw new ne("hints",de,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(te,J,m)=>{"use strict";const E=m(8110),b=m(16),D=E.Readable.destroy;te.exports=E.Readable,te.exports._uint8ArrayToBuffer=E._uint8ArrayToBuffer,te.exports._isUint8Array=E._isUint8Array,te.exports.isDisturbed=E.isDisturbed,te.exports.isErrored=E.isErrored,te.exports.isReadable=E.isReadable,te.exports.Readable=E.Readable,te.exports.Writable=E.Writable,te.exports.Duplex=E.Duplex,te.exports.Transform=E.Transform,te.exports.PassThrough=E.PassThrough,te.exports.addAbortSignal=E.addAbortSignal,te.exports.finished=E.finished,te.exports.destroy=E.destroy,te.exports.destroy=D,te.exports.pipeline=E.pipeline,te.exports.compose=E.compose,Object.defineProperty(E,"promises",{configurable:!0,enumerable:!0,get:()=>b}),te.exports.Stream=E.Stream,te.exports.default=te.exports},4370:(te,J,m)=>{"use strict";const{format:E,inspect:b,AggregateError:D}=m(2656),A=globalThis.AggregateError||D,k=Symbol("kIsNodeError"),g=["string","function","number","object","Function","Object","boolean","bigint","symbol"],y=/^([A-Z][a-z0-9]*)+$/,j={};function N(re,ne){if(!re)throw new j.ERR_INTERNAL_ASSERTION(ne)}function U(re){let ne="",W=re.length;const z="-"===re[0]?1:0;for(;W>=z+4;W-=3)ne=`_${re.slice(W-3,W)}${ne}`;return`${re.slice(0,W)}${ne}`}function R(re,ne,W){W||(W=Error);class z extends W{constructor(...L){super(function ce(re,ne,W){if("function"==typeof ne)return N(ne.length<=W.length,`Code: ${re}; The provided arguments length (${W.length}) does not match the required ones (${ne.length}).`),ne(...W);const z=(ne.match(/%[dfijoOs]/g)||[]).length;return N(z===W.length,`Code: ${re}; The provided arguments length (${W.length}) does not match the required ones (${z}).`),0===W.length?ne:E(ne,...W)}(re,ne,L))}toString(){return`${this.name} [${re}]: ${this.message}`}}Object.defineProperties(z.prototype,{name:{value:W.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${re}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),z.prototype.code=re,z.prototype[k]=!0,j[re]=z}function $(re){return Object.defineProperty(re,"name",{value:"__node_internal_"+re.name}),re}class Y extends Error{constructor(ne="The operation was aborted",W=void 0){if(void 0!==W&&"object"!=typeof W)throw new j.ERR_INVALID_ARG_TYPE("options","Object",W);super(ne,W),this.code="ABORT_ERR",this.name="AbortError"}}R("ERR_ASSERTION","%s",Error),R("ERR_INVALID_ARG_TYPE",(re,ne,W)=>{N("string"==typeof re,"'name' must be a string"),Array.isArray(ne)||(ne=[ne]);let z="The ";re.endsWith(" argument")?z+=`${re} `:z+=`"${re}" ${re.includes(".")?"property":"argument"} `,z+="must be ";const v=[],L=[],T=[];for(const H of ne)N("string"==typeof H,"All expected entries have to be of type string"),g.includes(H)?v.push(H.toLowerCase()):y.test(H)?L.push(H):(N("object"!==H,'The value "object" should be written as "Object"'),T.push(H));if(L.length>0){const H=v.indexOf("object");-1!==H&&(v.splice(v,H,1),L.push("Object"))}if(v.length>0){switch(v.length){case 1:z+=`of type ${v[0]}`;break;case 2:z+=`one of type ${v[0]} or ${v[1]}`;break;default:{const H=v.pop();z+=`one of type ${v.join(", ")}, or ${H}`}}(L.length>0||T.length>0)&&(z+=" or ")}if(L.length>0){switch(L.length){case 1:z+=`an instance of ${L[0]}`;break;case 2:z+=`an instance of ${L[0]} or ${L[1]}`;break;default:{const H=L.pop();z+=`an instance of ${L.join(", ")}, or ${H}`}}T.length>0&&(z+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(z+="an "),z+=`${T[0]}`;break;case 2:z+=`one of ${T[0]} or ${T[1]}`;break;default:{const H=T.pop();z+=`one of ${T.join(", ")}, or ${H}`}}if(null==W)z+=`. Received ${W}`;else if("function"==typeof W&&W.name)z+=`. Received function ${W.name}`;else if("object"==typeof W){var he;null!==(he=W.constructor)&&void 0!==he&&he.name?z+=`. Received an instance of ${W.constructor.name}`:z+=`. Received ${b(W,{depth:-1})}`}else{let H=b(W,{colors:!1});H.length>25&&(H=`${H.slice(0,25)}...`),z+=`. Received type ${typeof W} (${H})`}return z},TypeError),R("ERR_INVALID_ARG_VALUE",(re,ne,W="is invalid")=>{let z=b(ne);return z.length>128&&(z=z.slice(0,128)+"..."),`The ${re.includes(".")?"property":"argument"} '${re}' ${W}. Received ${z}`},TypeError),R("ERR_INVALID_RETURN_VALUE",(re,ne,W)=>{var z;return`Expected ${re} to be returned from the "${ne}" function but got ${null!=W&&null!==(z=W.constructor)&&void 0!==z&&z.name?`instance of ${W.constructor.name}`:"type "+typeof W}.`},TypeError),R("ERR_MISSING_ARGS",(...re)=>{let ne;N(re.length>0,"At least one arg needs to be specified");const W=re.length;switch(re=(Array.isArray(re)?re:[re]).map(z=>`"${z}"`).join(" or "),W){case 1:ne+=`The ${re[0]} argument`;break;case 2:ne+=`The ${re[0]} and ${re[1]} arguments`;break;default:{const z=re.pop();ne+=`The ${re.join(", ")}, and ${z} arguments`}}return`${ne} must be specified`},TypeError),R("ERR_OUT_OF_RANGE",(re,ne,W)=>{let z;return N(ne,'Missing "range" argument'),Number.isInteger(W)&&Math.abs(W)>2**32?z=U(String(W)):"bigint"==typeof W?(z=String(W),(W>2n**32n||W<-(2n**32n))&&(z=U(z)),z+="n"):z=b(W),`The value of "${re}" is out of range. It must be ${ne}. Received ${z}`},RangeError),R("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),R("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),R("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),R("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),R("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),R("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),R("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),R("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),R("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),R("ERR_STREAM_WRITE_AFTER_END","write after end",Error),R("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),te.exports={AbortError:Y,aggregateTwoErrors:$(function ae(re,ne){if(re&&ne&&re!==ne){if(Array.isArray(ne.errors))return ne.errors.push(re),ne;const W=new A([ne,re],ne.message);return W.code=ne.code,W}return re||ne}),hideStackFrames:$,codes:j}},6305:te=>{"use strict";te.exports={ArrayIsArray:J=>Array.isArray(J),ArrayPrototypeIncludes:(J,m)=>J.includes(m),ArrayPrototypeIndexOf:(J,m)=>J.indexOf(m),ArrayPrototypeJoin:(J,m)=>J.join(m),ArrayPrototypeMap:(J,m)=>J.map(m),ArrayPrototypePop:(J,m)=>J.pop(m),ArrayPrototypePush:(J,m)=>J.push(m),ArrayPrototypeSlice:(J,m,E)=>J.slice(m,E),Error,FunctionPrototypeCall:(J,m,...E)=>J.call(m,...E),FunctionPrototypeSymbolHasInstance:(J,m)=>Function.prototype[Symbol.hasInstance].call(J,m),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(J,m)=>Object.defineProperties(J,m),ObjectDefineProperty:(J,m,E)=>Object.defineProperty(J,m,E),ObjectGetOwnPropertyDescriptor:(J,m)=>Object.getOwnPropertyDescriptor(J,m),ObjectKeys:J=>Object.keys(J),ObjectSetPrototypeOf:(J,m)=>Object.setPrototypeOf(J,m),Promise,PromisePrototypeCatch:(J,m)=>J.catch(m),PromisePrototypeThen:(J,m,E)=>J.then(m,E),PromiseReject:J=>Promise.reject(J),ReflectApply:Reflect.apply,RegExpPrototypeTest:(J,m)=>J.test(m),SafeSet:Set,String,StringPrototypeSlice:(J,m,E)=>J.slice(m,E),StringPrototypeToLowerCase:J=>J.toLowerCase(),StringPrototypeToUpperCase:J=>J.toUpperCase(),StringPrototypeTrim:J=>J.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(J,m,E)=>J.set(m,E),Uint8Array}},2656:(te,J,m)=>{"use strict";var E=m(7156).default;const b=m(1657),D=Object.getPrototypeOf(E(function*(){})).constructor,A=globalThis.Blob||b.Blob,k=typeof A<"u"?function(M){return M instanceof A}:function(M){return!1};class g extends Error{constructor(M){if(!Array.isArray(M))throw new TypeError("Expected input to be an Array, got "+typeof M);let j="";for(let N=0;N<M.length;N++)j+=`    ${M[N].stack}\n`;super(j),this.name="AggregateError",this.errors=M}}te.exports={AggregateError:g,kEmptyObject:Object.freeze({}),once(y){let M=!1;return function(...j){M||(M=!0,y.apply(this,j))}},createDeferredPromise:function(){let y,M;return{promise:new Promise((N,U)=>{y=N,M=U}),resolve:y,reject:M}},promisify:y=>new Promise((M,j)=>{y((N,...U)=>N?j(N):M(...U))}),debuglog:()=>function(){},format:(y,...M)=>y.replace(/%([sdifj])/g,function(...[j,N]){const U=M.shift();return"f"===N?U.toFixed(6):"j"===N?JSON.stringify(U):"s"===N&&"object"==typeof U?`${U.constructor!==Object?U.constructor.name:""} {}`.trim():U.toString()}),inspect(y){switch(typeof y){case"string":if(y.includes("'")){if(!y.includes('"'))return`"${y}"`;if(!y.includes("`")&&!y.includes("${"))return`\`${y}\``}return`'${y}'`;case"number":return isNaN(y)?"NaN":Object.is(y,-0)?String(y):y;case"bigint":return`${String(y)}n`;case"boolean":case"undefined":return String(y);case"object":return"{}"}},types:{isAsyncFunction:y=>y instanceof D,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:k},te.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(te,J,m)=>{const{Buffer:E}=m(1657),{ObjectDefineProperty:b,ObjectKeys:D,ReflectApply:A}=m(6305),{promisify:{custom:k}}=m(2656),{streamReturningOperators:g,promiseReturningOperators:y}=m(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:M}}=m(4370),j=m(7721),{pipeline:N}=m(4514),{destroyer:U}=m(5601),ce=m(4618),$=m(16),ae=m(5428),Y=te.exports=m(900).Stream;Y.isDisturbed=ae.isDisturbed,Y.isErrored=ae.isErrored,Y.isReadable=ae.isReadable,Y.Readable=m(8383);for(const W of D(g)){let v=function(...L){if(new.target)throw M();return Y.Readable.from(A(z,this,L))};const z=g[W];b(v,"name",{__proto__:null,value:z.name}),b(v,"length",{__proto__:null,value:z.length}),b(Y.Readable.prototype,W,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const W of D(y)){let v=function(...T){if(new.target)throw M();return A(z,this,T)};const z=y[W];b(v,"name",{__proto__:null,value:z.name}),b(v,"length",{__proto__:null,value:z.length}),b(Y.Readable.prototype,W,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}Y.Writable=m(9764),Y.Duplex=m(5931),Y.Transform=m(123),Y.PassThrough=m(6973),Y.pipeline=N;const{addAbortSignal:re}=m(9987);Y.addAbortSignal=re,Y.finished=ce,Y.destroy=U,Y.compose=j,b(Y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>$}),b(N,k,{__proto__:null,enumerable:!0,get:()=>$.pipeline}),b(ce,k,{__proto__:null,enumerable:!0,get:()=>$.finished}),Y.Stream=Y,Y._isUint8Array=function(z){return z instanceof Uint8Array},Y._uint8ArrayToBuffer=function(z){return E.from(z.buffer,z.byteOffset,z.byteLength)}},16:(te,J,m)=>{"use strict";const{ArrayPrototypePop:E,Promise:b}=m(6305),{isIterable:D,isNodeStream:A,isWebStream:k}=m(5428),{pipelineImpl:g}=m(4514),{finished:y}=m(4618);m(8110),te.exports={finished:y,pipeline:function M(...j){return new b((N,U)=>{let ce,R;const $=j[j.length-1];if($&&"object"==typeof $&&!A($)&&!D($)&&!k($)){const ae=E(j);ce=ae.signal,R=ae.end}g(j,(ae,Y)=>{ae?U(ae):N(Y)},{signal:ce,end:R})})}}},1657:(te,J,m)=>{"use strict";const E=m(9919),b=m(2601),D="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;J.Buffer=y,J.SlowBuffer=function ne(Re){return+Re!=Re&&(Re=0),y.alloc(+Re)},J.INSPECT_MAX_BYTES=50;const A=2147483647;function g(Re){if(Re>A)throw new RangeError('The value "'+Re+'" is invalid for option "size"');const q=new Uint8Array(Re);return Object.setPrototypeOf(q,y.prototype),q}function y(Re,q,S){if("number"==typeof Re){if("string"==typeof q)throw new TypeError('The "string" argument must be of type string. Received type number');return U(Re)}return M(Re,q,S)}function M(Re,q,S){if("string"==typeof Re)return function ce(Re,q){if(("string"!=typeof q||""===q)&&(q="utf8"),!y.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const S=0|W(Re,q);let oe=g(S);const We=oe.write(Re,q);return We!==S&&(oe=oe.slice(0,We)),oe}(Re,q);if(ArrayBuffer.isView(Re))return function $(Re){if(ut(Re,Uint8Array)){const q=new Uint8Array(Re);return ae(q.buffer,q.byteOffset,q.byteLength)}return R(Re)}(Re);if(null==Re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re);if(ut(Re,ArrayBuffer)||Re&&ut(Re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ut(Re,SharedArrayBuffer)||Re&&ut(Re.buffer,SharedArrayBuffer)))return ae(Re,q,S);if("number"==typeof Re)throw new TypeError('The "value" argument must not be of type number. Received type number');const oe=Re.valueOf&&Re.valueOf();if(null!=oe&&oe!==Re)return y.from(oe,q,S);const We=function Y(Re){if(y.isBuffer(Re)){const q=0|re(Re.length),S=g(q);return 0===S.length||Re.copy(S,0,0,q),S}return void 0!==Re.length?"number"!=typeof Re.length||Rt(Re.length)?g(0):R(Re):"Buffer"===Re.type&&Array.isArray(Re.data)?R(Re.data):void 0}(Re);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Re[Symbol.toPrimitive])return y.from(Re[Symbol.toPrimitive]("string"),q,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re)}function j(Re){if("number"!=typeof Re)throw new TypeError('"size" argument must be of type number');if(Re<0)throw new RangeError('The value "'+Re+'" is invalid for option "size"')}function U(Re){return j(Re),g(Re<0?0:0|re(Re))}function R(Re){const q=Re.length<0?0:0|re(Re.length),S=g(q);for(let oe=0;oe<q;oe+=1)S[oe]=255&Re[oe];return S}function ae(Re,q,S){if(q<0||Re.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(Re.byteLength<q+(S||0))throw new RangeError('"length" is outside of buffer bounds');let oe;return oe=void 0===q&&void 0===S?new Uint8Array(Re):void 0===S?new Uint8Array(Re,q):new Uint8Array(Re,q,S),Object.setPrototypeOf(oe,y.prototype),oe}function re(Re){if(Re>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return 0|Re}function W(Re,q){if(y.isBuffer(Re))return Re.length;if(ArrayBuffer.isView(Re)||ut(Re,ArrayBuffer))return Re.byteLength;if("string"!=typeof Re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Re);const S=Re.length,oe=arguments.length>2&&!0===arguments[2];if(!oe&&0===S)return 0;let We=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return O(Re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return He(Re).length;default:if(We)return oe?-1:O(Re).length;q=(""+q).toLowerCase(),We=!0}}function z(Re,q,S){let oe=!1;if((void 0===q||q<0)&&(q=0),q>this.length||((void 0===S||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(q>>>=0))return"";for(Re||(Re="utf8");;)switch(Re){case"hex":return ke(this,q,S);case"utf8":case"utf-8":return De(this,q,S);case"ascii":return Ae(this,q,S);case"latin1":case"binary":return Ne(this,q,S);case"base64":return Ie(this,q,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,q,S);default:if(oe)throw new TypeError("Unknown encoding: "+Re);Re=(Re+"").toLowerCase(),oe=!0}}function v(Re,q,S){const oe=Re[q];Re[q]=Re[S],Re[S]=oe}function L(Re,q,S,oe,We){if(0===Re.length)return-1;if("string"==typeof S?(oe=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),Rt(S=+S)&&(S=We?0:Re.length-1),S<0&&(S=Re.length+S),S>=Re.length){if(We)return-1;S=Re.length-1}else if(S<0){if(!We)return-1;S=0}if("string"==typeof q&&(q=y.from(q,oe)),y.isBuffer(q))return 0===q.length?-1:T(Re,q,S,oe,We);if("number"==typeof q)return q&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(Re,q,S):Uint8Array.prototype.lastIndexOf.call(Re,q,S):T(Re,[q],S,oe,We);throw new TypeError("val must be string, number or Buffer")}function T(Re,q,S,oe,We){let Gn,Je=1,st=Re.length,$t=q.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(Re.length<2||q.length<2)return-1;Je=2,st/=2,$t/=2,S/=2}function on(Wn,In){return 1===Je?Wn[In]:Wn.readUInt16BE(In*Je)}if(We){let Wn=-1;for(Gn=S;Gn<st;Gn++)if(on(Re,Gn)===on(q,-1===Wn?0:Gn-Wn)){if(-1===Wn&&(Wn=Gn),Gn-Wn+1===$t)return Wn*Je}else-1!==Wn&&(Gn-=Gn-Wn),Wn=-1}else for(S+$t>st&&(S=st-$t),Gn=S;Gn>=0;Gn--){let Wn=!0;for(let In=0;In<$t;In++)if(on(Re,Gn+In)!==on(q,In)){Wn=!1;break}if(Wn)return Gn}return-1}function he(Re,q,S,oe){S=Number(S)||0;const We=Re.length-S;oe?(oe=Number(oe))>We&&(oe=We):oe=We;const Je=q.length;let st;for(oe>Je/2&&(oe=Je/2),st=0;st<oe;++st){const $t=parseInt(q.substr(2*st,2),16);if(Rt($t))return st;Re[S+st]=$t}return st}function H(Re,q,S,oe){return Ke(O(q,Re.length-S),Re,S,oe)}function Ce(Re,q,S,oe){return Ke(function ue(Re){const q=[];for(let S=0;S<Re.length;++S)q.push(255&Re.charCodeAt(S));return q}(q),Re,S,oe)}function le(Re,q,S,oe){return Ke(He(q),Re,S,oe)}function xe(Re,q,S,oe){return Ke(function de(Re,q){let S,oe,We;const Je=[];for(let st=0;st<Re.length&&!((q-=2)<0);++st)S=Re.charCodeAt(st),oe=S>>8,We=S%256,Je.push(We),Je.push(oe);return Je}(q,Re.length-S),Re,S,oe)}function Ie(Re,q,S){return E.fromByteArray(0===q&&S===Re.length?Re:Re.slice(q,S))}function De(Re,q,S){S=Math.min(Re.length,S);const oe=[];let We=q;for(;We<S;){const Je=Re[We];let st=null,$t=Je>239?4:Je>223?3:Je>191?2:1;if(We+$t<=S){let on,Gn,Wn,In;switch($t){case 1:Je<128&&(st=Je);break;case 2:on=Re[We+1],128==(192&on)&&(In=(31&Je)<<6|63&on,In>127&&(st=In));break;case 3:on=Re[We+1],Gn=Re[We+2],128==(192&on)&&128==(192&Gn)&&(In=(15&Je)<<12|(63&on)<<6|63&Gn,In>2047&&(In<55296||In>57343)&&(st=In));break;case 4:on=Re[We+1],Gn=Re[We+2],Wn=Re[We+3],128==(192&on)&&128==(192&Gn)&&128==(192&Wn)&&(In=(15&Je)<<18|(63&on)<<12|(63&Gn)<<6|63&Wn,In>65535&&In<1114112&&(st=In))}}null===st?(st=65533,$t=1):st>65535&&(st-=65536,oe.push(st>>>10&1023|55296),st=56320|1023&st),oe.push(st),We+=$t}return function Ye(Re){const q=Re.length;if(q<=tt)return String.fromCharCode.apply(String,Re);let S="",oe=0;for(;oe<q;)S+=String.fromCharCode.apply(String,Re.slice(oe,oe+=tt));return S}(oe)}J.kMaxLength=A,!(y.TYPED_ARRAY_SUPPORT=function k(){try{const Re=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(Re,q),42===Re.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(Re,q,S){return M(Re,q,S)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(Re,q,S){return function N(Re,q,S){return j(Re),Re<=0?g(Re):void 0!==q?"string"==typeof S?g(Re).fill(q,S):g(Re).fill(q):g(Re)}(Re,q,S)},y.allocUnsafe=function(Re){return U(Re)},y.allocUnsafeSlow=function(Re){return U(Re)},y.isBuffer=function(q){return null!=q&&!0===q._isBuffer&&q!==y.prototype},y.compare=function(q,S){if(ut(q,Uint8Array)&&(q=y.from(q,q.offset,q.byteLength)),ut(S,Uint8Array)&&(S=y.from(S,S.offset,S.byteLength)),!y.isBuffer(q)||!y.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===S)return 0;let oe=q.length,We=S.length;for(let Je=0,st=Math.min(oe,We);Je<st;++Je)if(q[Je]!==S[Je]){oe=q[Je],We=S[Je];break}return oe<We?-1:We<oe?1:0},y.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(q,S){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===q.length)return y.alloc(0);let oe;if(void 0===S)for(S=0,oe=0;oe<q.length;++oe)S+=q[oe].length;const We=y.allocUnsafe(S);let Je=0;for(oe=0;oe<q.length;++oe){let st=q[oe];if(ut(st,Uint8Array))Je+st.length>We.length?(y.isBuffer(st)||(st=y.from(st)),st.copy(We,Je)):Uint8Array.prototype.set.call(We,st,Je);else{if(!y.isBuffer(st))throw new TypeError('"list" argument must be an Array of Buffers');st.copy(We,Je)}Je+=st.length}return We},y.byteLength=W,y.prototype._isBuffer=!0,y.prototype.swap16=function(){const q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<q;S+=2)v(this,S,S+1);return this},y.prototype.swap32=function(){const q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<q;S+=4)v(this,S,S+3),v(this,S+1,S+2);return this},y.prototype.swap64=function(){const q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<q;S+=8)v(this,S,S+7),v(this,S+1,S+6),v(this,S+2,S+5),v(this,S+3,S+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){const q=this.length;return 0===q?"":0===arguments.length?De(this,0,q):z.apply(this,arguments)},y.prototype.equals=function(q){if(!y.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||0===y.compare(this,q)},y.prototype.inspect=function(){let q="";const S=J.INSPECT_MAX_BYTES;return q=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(q+=" ... "),"<Buffer "+q+">"},D&&(y.prototype[D]=y.prototype.inspect),y.prototype.compare=function(q,S,oe,We,Je){if(ut(q,Uint8Array)&&(q=y.from(q,q.offset,q.byteLength)),!y.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(void 0===S&&(S=0),void 0===oe&&(oe=q?q.length:0),void 0===We&&(We=0),void 0===Je&&(Je=this.length),S<0||oe>q.length||We<0||Je>this.length)throw new RangeError("out of range index");if(We>=Je&&S>=oe)return 0;if(We>=Je)return-1;if(S>=oe)return 1;if(this===q)return 0;let st=(Je>>>=0)-(We>>>=0),$t=(oe>>>=0)-(S>>>=0);const on=Math.min(st,$t),Gn=this.slice(We,Je),Wn=q.slice(S,oe);for(let In=0;In<on;++In)if(Gn[In]!==Wn[In]){st=Gn[In],$t=Wn[In];break}return st<$t?-1:$t<st?1:0},y.prototype.includes=function(q,S,oe){return-1!==this.indexOf(q,S,oe)},y.prototype.indexOf=function(q,S,oe){return L(this,q,S,oe,!0)},y.prototype.lastIndexOf=function(q,S,oe){return L(this,q,S,oe,!1)},y.prototype.write=function(q,S,oe,We){if(void 0===S)We="utf8",oe=this.length,S=0;else if(void 0===oe&&"string"==typeof S)We=S,oe=this.length,S=0;else{if(!isFinite(S))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");S>>>=0,isFinite(oe)?(oe>>>=0,void 0===We&&(We="utf8")):(We=oe,oe=void 0)}const Je=this.length-S;if((void 0===oe||oe>Je)&&(oe=Je),q.length>0&&(oe<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let st=!1;for(;;)switch(We){case"hex":return he(this,q,S,oe);case"utf8":case"utf-8":return H(this,q,S,oe);case"ascii":case"latin1":case"binary":return Ce(this,q,S,oe);case"base64":return le(this,q,S,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,q,S,oe);default:if(st)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),st=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const tt=4096;function Ae(Re,q,S){let oe="";S=Math.min(Re.length,S);for(let We=q;We<S;++We)oe+=String.fromCharCode(127&Re[We]);return oe}function Ne(Re,q,S){let oe="";S=Math.min(Re.length,S);for(let We=q;We<S;++We)oe+=String.fromCharCode(Re[We]);return oe}function ke(Re,q,S){const oe=Re.length;(!q||q<0)&&(q=0),(!S||S<0||S>oe)&&(S=oe);let We="";for(let Je=q;Je<S;++Je)We+=dt[Re[Je]];return We}function ze(Re,q,S){const oe=Re.slice(q,S);let We="";for(let Je=0;Je<oe.length-1;Je+=2)We+=String.fromCharCode(oe[Je]+256*oe[Je+1]);return We}function me(Re,q,S){if(Re%1!=0||Re<0)throw new RangeError("offset is not uint");if(Re+q>S)throw new RangeError("Trying to access beyond buffer length")}function Se(Re,q,S,oe,We,Je){if(!y.isBuffer(Re))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>We||q<Je)throw new RangeError('"value" argument is out of bounds');if(S+oe>Re.length)throw new RangeError("Index out of range")}function Xe(Re,q,S,oe,We){Ve(q,oe,We,Re,S,7);let Je=Number(q&BigInt(4294967295));Re[S++]=Je,Je>>=8,Re[S++]=Je,Je>>=8,Re[S++]=Je,Je>>=8,Re[S++]=Je;let st=Number(q>>BigInt(32)&BigInt(4294967295));return Re[S++]=st,st>>=8,Re[S++]=st,st>>=8,Re[S++]=st,st>>=8,Re[S++]=st,S}function rt(Re,q,S,oe,We){Ve(q,oe,We,Re,S,7);let Je=Number(q&BigInt(4294967295));Re[S+7]=Je,Je>>=8,Re[S+6]=Je,Je>>=8,Re[S+5]=Je,Je>>=8,Re[S+4]=Je;let st=Number(q>>BigInt(32)&BigInt(4294967295));return Re[S+3]=st,st>>=8,Re[S+2]=st,st>>=8,Re[S+1]=st,st>>=8,Re[S]=st,S+8}function Qe(Re,q,S,oe,We,Je){if(S+oe>Re.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function ge(Re,q,S,oe,We){return q=+q,S>>>=0,We||Qe(Re,0,S,4),b.write(Re,q,S,oe,23,4),S+4}function B(Re,q,S,oe,We){return q=+q,S>>>=0,We||Qe(Re,0,S,8),b.write(Re,q,S,oe,52,8),S+8}y.prototype.slice=function(q,S){const oe=this.length;(q=~~q)<0?(q+=oe)<0&&(q=0):q>oe&&(q=oe),(S=void 0===S?oe:~~S)<0?(S+=oe)<0&&(S=0):S>oe&&(S=oe),S<q&&(S=q);const We=this.subarray(q,S);return Object.setPrototypeOf(We,y.prototype),We},y.prototype.readUintLE=y.prototype.readUIntLE=function(q,S,oe){q>>>=0,S>>>=0,oe||me(q,S,this.length);let We=this[q],Je=1,st=0;for(;++st<S&&(Je*=256);)We+=this[q+st]*Je;return We},y.prototype.readUintBE=y.prototype.readUIntBE=function(q,S,oe){q>>>=0,S>>>=0,oe||me(q,S,this.length);let We=this[q+--S],Je=1;for(;S>0&&(Je*=256);)We+=this[q+--S]*Je;return We},y.prototype.readUint8=y.prototype.readUInt8=function(q,S){return q>>>=0,S||me(q,1,this.length),this[q]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(q,S){return q>>>=0,S||me(q,2,this.length),this[q]|this[q+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(q,S){return q>>>=0,S||me(q,2,this.length),this[q]<<8|this[q+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(q,S){return q>>>=0,S||me(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(q,S){return q>>>=0,S||me(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},y.prototype.readBigUInt64LE=Vt(function(q){pe(q>>>=0,"offset");const S=this[q],oe=this[q+7];(void 0===S||void 0===oe)&&Z(q,this.length-8);const We=S+256*this[++q]+65536*this[++q]+this[++q]*2**24,Je=this[++q]+256*this[++q]+65536*this[++q]+oe*2**24;return BigInt(We)+(BigInt(Je)<<BigInt(32))}),y.prototype.readBigUInt64BE=Vt(function(q){pe(q>>>=0,"offset");const S=this[q],oe=this[q+7];(void 0===S||void 0===oe)&&Z(q,this.length-8);const We=S*2**24+65536*this[++q]+256*this[++q]+this[++q],Je=this[++q]*2**24+65536*this[++q]+256*this[++q]+oe;return(BigInt(We)<<BigInt(32))+BigInt(Je)}),y.prototype.readIntLE=function(q,S,oe){q>>>=0,S>>>=0,oe||me(q,S,this.length);let We=this[q],Je=1,st=0;for(;++st<S&&(Je*=256);)We+=this[q+st]*Je;return Je*=128,We>=Je&&(We-=Math.pow(2,8*S)),We},y.prototype.readIntBE=function(q,S,oe){q>>>=0,S>>>=0,oe||me(q,S,this.length);let We=S,Je=1,st=this[q+--We];for(;We>0&&(Je*=256);)st+=this[q+--We]*Je;return Je*=128,st>=Je&&(st-=Math.pow(2,8*S)),st},y.prototype.readInt8=function(q,S){return q>>>=0,S||me(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},y.prototype.readInt16LE=function(q,S){q>>>=0,S||me(q,2,this.length);const oe=this[q]|this[q+1]<<8;return 32768&oe?4294901760|oe:oe},y.prototype.readInt16BE=function(q,S){q>>>=0,S||me(q,2,this.length);const oe=this[q+1]|this[q]<<8;return 32768&oe?4294901760|oe:oe},y.prototype.readInt32LE=function(q,S){return q>>>=0,S||me(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},y.prototype.readInt32BE=function(q,S){return q>>>=0,S||me(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},y.prototype.readBigInt64LE=Vt(function(q){pe(q>>>=0,"offset");const S=this[q],oe=this[q+7];return(void 0===S||void 0===oe)&&Z(q,this.length-8),(BigInt(this[q+4]+256*this[q+5]+65536*this[q+6]+(oe<<24))<<BigInt(32))+BigInt(S+256*this[++q]+65536*this[++q]+this[++q]*2**24)}),y.prototype.readBigInt64BE=Vt(function(q){pe(q>>>=0,"offset");const S=this[q],oe=this[q+7];(void 0===S||void 0===oe)&&Z(q,this.length-8);const We=(S<<24)+65536*this[++q]+256*this[++q]+this[++q];return(BigInt(We)<<BigInt(32))+BigInt(this[++q]*2**24+65536*this[++q]+256*this[++q]+oe)}),y.prototype.readFloatLE=function(q,S){return q>>>=0,S||me(q,4,this.length),b.read(this,q,!0,23,4)},y.prototype.readFloatBE=function(q,S){return q>>>=0,S||me(q,4,this.length),b.read(this,q,!1,23,4)},y.prototype.readDoubleLE=function(q,S){return q>>>=0,S||me(q,8,this.length),b.read(this,q,!0,52,8)},y.prototype.readDoubleBE=function(q,S){return q>>>=0,S||me(q,8,this.length),b.read(this,q,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(q,S,oe,We){q=+q,S>>>=0,oe>>>=0,We||Se(this,q,S,oe,Math.pow(2,8*oe)-1,0);let Je=1,st=0;for(this[S]=255&q;++st<oe&&(Je*=256);)this[S+st]=q/Je&255;return S+oe},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(q,S,oe,We){q=+q,S>>>=0,oe>>>=0,We||Se(this,q,S,oe,Math.pow(2,8*oe)-1,0);let Je=oe-1,st=1;for(this[S+Je]=255&q;--Je>=0&&(st*=256);)this[S+Je]=q/st&255;return S+oe},y.prototype.writeUint8=y.prototype.writeUInt8=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,1,255,0),this[S]=255&q,S+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,2,65535,0),this[S]=255&q,this[S+1]=q>>>8,S+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,2,65535,0),this[S]=q>>>8,this[S+1]=255&q,S+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,4,4294967295,0),this[S+3]=q>>>24,this[S+2]=q>>>16,this[S+1]=q>>>8,this[S]=255&q,S+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,4,4294967295,0),this[S]=q>>>24,this[S+1]=q>>>16,this[S+2]=q>>>8,this[S+3]=255&q,S+4},y.prototype.writeBigUInt64LE=Vt(function(q,S=0){return Xe(this,q,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=Vt(function(q,S=0){return rt(this,q,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(q,S,oe,We){if(q=+q,S>>>=0,!We){const on=Math.pow(2,8*oe-1);Se(this,q,S,oe,on-1,-on)}let Je=0,st=1,$t=0;for(this[S]=255&q;++Je<oe&&(st*=256);)q<0&&0===$t&&0!==this[S+Je-1]&&($t=1),this[S+Je]=(q/st>>0)-$t&255;return S+oe},y.prototype.writeIntBE=function(q,S,oe,We){if(q=+q,S>>>=0,!We){const on=Math.pow(2,8*oe-1);Se(this,q,S,oe,on-1,-on)}let Je=oe-1,st=1,$t=0;for(this[S+Je]=255&q;--Je>=0&&(st*=256);)q<0&&0===$t&&0!==this[S+Je+1]&&($t=1),this[S+Je]=(q/st>>0)-$t&255;return S+oe},y.prototype.writeInt8=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,1,127,-128),q<0&&(q=255+q+1),this[S]=255&q,S+1},y.prototype.writeInt16LE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,2,32767,-32768),this[S]=255&q,this[S+1]=q>>>8,S+2},y.prototype.writeInt16BE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,2,32767,-32768),this[S]=q>>>8,this[S+1]=255&q,S+2},y.prototype.writeInt32LE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,4,2147483647,-2147483648),this[S]=255&q,this[S+1]=q>>>8,this[S+2]=q>>>16,this[S+3]=q>>>24,S+4},y.prototype.writeInt32BE=function(q,S,oe){return q=+q,S>>>=0,oe||Se(this,q,S,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[S]=q>>>24,this[S+1]=q>>>16,this[S+2]=q>>>8,this[S+3]=255&q,S+4},y.prototype.writeBigInt64LE=Vt(function(q,S=0){return Xe(this,q,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=Vt(function(q,S=0){return rt(this,q,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeFloatLE=function(q,S,oe){return ge(this,q,S,!0,oe)},y.prototype.writeFloatBE=function(q,S,oe){return ge(this,q,S,!1,oe)},y.prototype.writeDoubleLE=function(q,S,oe){return B(this,q,S,!0,oe)},y.prototype.writeDoubleBE=function(q,S,oe){return B(this,q,S,!1,oe)},y.prototype.copy=function(q,S,oe,We){if(!y.isBuffer(q))throw new TypeError("argument should be a Buffer");if(oe||(oe=0),!We&&0!==We&&(We=this.length),S>=q.length&&(S=q.length),S||(S=0),We>0&&We<oe&&(We=oe),We===oe||0===q.length||0===this.length)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(oe<0||oe>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),q.length-S<We-oe&&(We=q.length-S+oe);const Je=We-oe;return this===q&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(S,oe,We):Uint8Array.prototype.set.call(q,this.subarray(oe,We),S),Je},y.prototype.fill=function(q,S,oe,We){if("string"==typeof q){if("string"==typeof S?(We=S,S=0,oe=this.length):"string"==typeof oe&&(We=oe,oe=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!y.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===q.length){const st=q.charCodeAt(0);("utf8"===We&&st<128||"latin1"===We)&&(q=st)}}else"number"==typeof q?q&=255:"boolean"==typeof q&&(q=Number(q));if(S<0||this.length<S||this.length<oe)throw new RangeError("Out of range index");if(oe<=S)return this;let Je;if(S>>>=0,oe=void 0===oe?this.length:oe>>>0,q||(q=0),"number"==typeof q)for(Je=S;Je<oe;++Je)this[Je]=q;else{const st=y.isBuffer(q)?q:y.from(q,We),$t=st.length;if(0===$t)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(Je=0;Je<oe-S;++Je)this[Je+S]=st[Je%$t]}return this};const I={};function se(Re,q,S){I[Re]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Re}]`,delete this.name}get code(){return Re}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${Re}]: ${this.message}`}}}function K(Re){let q="",S=Re.length;const oe="-"===Re[0]?1:0;for(;S>=oe+4;S-=3)q=`_${Re.slice(S-3,S)}${q}`;return`${Re.slice(0,S)}${q}`}function Ve(Re,q,S,oe,We,Je){if(Re>S||Re<q){const st="bigint"==typeof q?"n":"";let $t;throw $t=Je>3?0===q||q===BigInt(0)?`>= 0${st} and < 2${st} ** ${8*(Je+1)}${st}`:`>= -(2${st} ** ${8*(Je+1)-1}${st}) and < 2 ** ${8*(Je+1)-1}${st}`:`>= ${q}${st} and <= ${S}${st}`,new I.ERR_OUT_OF_RANGE("value",$t,Re)}!function Fe(Re,q,S){pe(q,"offset"),(void 0===Re[q]||void 0===Re[q+S])&&Z(q,Re.length-(S+1))}(oe,We,Je)}function pe(Re,q){if("number"!=typeof Re)throw new I.ERR_INVALID_ARG_TYPE(q,"number",Re)}function Z(Re,q,S){throw Math.floor(Re)!==Re?(pe(Re,S),new I.ERR_OUT_OF_RANGE(S||"offset","an integer",Re)):q<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${q}`,Re)}se("ERR_BUFFER_OUT_OF_BOUNDS",function(Re){return Re?`${Re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(Re,q){return`The "${Re}" argument must be of type number. Received type ${typeof q}`},TypeError),se("ERR_OUT_OF_RANGE",function(Re,q,S){let oe=`The value of "${Re}" is out of range.`,We=S;return Number.isInteger(S)&&Math.abs(S)>2**32?We=K(String(S)):"bigint"==typeof S&&(We=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(We=K(We)),We+="n"),oe+=` It must be ${q}. Received ${We}`,oe},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function O(Re,q){let S;q=q||1/0;const oe=Re.length;let We=null;const Je=[];for(let st=0;st<oe;++st){if(S=Re.charCodeAt(st),S>55295&&S<57344){if(!We){if(S>56319){(q-=3)>-1&&Je.push(239,191,189);continue}if(st+1===oe){(q-=3)>-1&&Je.push(239,191,189);continue}We=S;continue}if(S<56320){(q-=3)>-1&&Je.push(239,191,189),We=S;continue}S=65536+(We-55296<<10|S-56320)}else We&&(q-=3)>-1&&Je.push(239,191,189);if(We=null,S<128){if((q-=1)<0)break;Je.push(S)}else if(S<2048){if((q-=2)<0)break;Je.push(S>>6|192,63&S|128)}else if(S<65536){if((q-=3)<0)break;Je.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;Je.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return Je}function He(Re){return E.toByteArray(function C(Re){if((Re=(Re=Re.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;Re.length%4!=0;)Re+="=";return Re}(Re))}function Ke(Re,q,S,oe){let We;for(We=0;We<oe&&!(We+S>=q.length||We>=Re.length);++We)q[We+S]=Re[We];return We}function ut(Re,q){return Re instanceof q||null!=Re&&null!=Re.constructor&&null!=Re.constructor.name&&Re.constructor.name===q.name}function Rt(Re){return Re!=Re}const dt=function(){const Re="0123456789abcdef",q=new Array(256);for(let S=0;S<16;++S){const oe=16*S;for(let We=0;We<16;++We)q[oe+We]=Re[S]+Re[We]}return q}();function Vt(Re){return typeof BigInt>"u"?rn:Re}function rn(){throw new Error("BigInt not supported")}},7054:function(te,J,m){"use strict";var E=this&&this.__createBinding||(Object.create?function(D,A,k,g){void 0===g&&(g=k),Object.defineProperty(D,g,{enumerable:!0,get:function(){return A[k]}})}:function(D,A,k,g){void 0===g&&(g=k),D[g]=A[k]}),b=this&&this.__exportStar||function(D,A){for(var k in D)"default"!==k&&!Object.prototype.hasOwnProperty.call(A,k)&&E(A,D,k)};Object.defineProperty(J,"__esModule",{value:!0}),b(m(361),J)},361:(te,J)=>{"use strict";function E(A){const k=[];let g=0;for(;g<A.length;)switch(A[g]){case"/":if("."===A[g+1])if("."===A[g+2]){if(!D(A[g+3])){k.push([]),g++;break}k.pop(),A[g+3]||k.push([]),g+=3}else{if(!D(A[g+2])){k.push([]),g++;break}A[g+2]||k.push([]),g+=2}else k.push([]),g++;break;case"#":case"?":k.length||k.push([]),k[k.length-1].push(A.substr(g)),g=A.length;break;default:k.length||k.push([]),k[k.length-1].push(A[g]),g++}return"/"+k.map(y=>y.join("")).join("/")}function b(A,k){let g=k+1;k>=0?"/"===A[k+1]&&"/"===A[k+2]&&(g=k+3):"/"===A[0]&&"/"===A[1]&&(g=2);const y=A.indexOf("/",g);return y<0?A:A.substr(0,y)+E(A.substr(y))}function D(A){return!A||"#"===A||"?"===A||"/"===A}Object.defineProperty(J,"__esModule",{value:!0}),J.removeDotSegmentsOfPath=J.removeDotSegments=J.resolve=void 0,J.resolve=function m(A,k){const g=(k=k||"").indexOf("#");if(g>0&&(k=k.substr(0,g)),!A.length){if(k.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${k}' for value '${A}'`);return k}if(A.startsWith("?")){const R=k.indexOf("?");return R>0&&(k=k.substr(0,R)),k+A}if(A.startsWith("#"))return k+A;if(!k.length){const R=A.indexOf(":");if(R<0)throw new Error(`Found invalid relative IRI '${A}' for a missing baseIRI`);return b(A,R)}const y=A.indexOf(":");if(y>=0)return b(A,y);const M=k.indexOf(":");if(M<0)throw new Error(`Found invalid baseIRI '${k}' for value '${A}'`);const j=k.substr(0,M+1);if(0===A.indexOf("//"))return j+b(A,y);let N;if(k.indexOf("//",M)===M+1){if(N=k.indexOf("/",M+3),N<0)return k.length>M+3?k+"/"+b(A,y):j+b(A,y)}else if(N=k.indexOf("/",M+1),N<0)return j+b(A,y);if(0===A.indexOf("/"))return k.substr(0,N)+E(A);let U=k.substr(N);const ce=U.lastIndexOf("/");return ce>=0&&ce<U.length-1&&(U=U.substr(0,ce+1),"."===A[0]&&"."!==A[1]&&"/"!==A[1]&&A[2]&&(A=A.substr(1))),A=E(A=U+A),k.substr(0,N)+A},J.removeDotSegments=E,J.removeDotSegmentsOfPath=b},9528:(te,J,m)=>{!function(E){E.parser=function(B,I){return new D(B,I)},E.SAXParser=D,E.SAXStream=N,E.createStream=function j(B,I){return new N(B,I)},E.MAX_BUFFER_LENGTH=65536;var y,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function D(B,I){if(!(this instanceof D))return new D(B,I);var se=this;(function k(B){for(var I=0,se=b.length;I<se;I++)B[b[I]]=""})(se),se.q=se.c="",se.bufferCheckPosition=E.MAX_BUFFER_LENGTH,se.opt=I||{},se.opt.lowercase=se.opt.lowercase||se.opt.lowercasetags,se.looseCase=se.opt.lowercase?"toLowerCase":"toUpperCase",se.tags=[],se.closed=se.closedRoot=se.sawRoot=!1,se.tag=se.error=null,se.strict=!!B,se.noscript=!(!B&&!se.opt.noscript),se.state=H.BEGIN,se.strictEntities=se.opt.strictEntities,se.ENTITIES=Object.create(se.strictEntities?E.XML_ENTITIES:E.ENTITIES),se.attribList=[],se.opt.xmlns&&(se.ns=Object.create(ae)),se.trackPosition=!1!==se.opt.position,se.trackPosition&&(se.position=se.line=se.column=0),le(se,"onready")}E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(B){function I(){}return I.prototype=B,new I}),Object.keys||(Object.keys=function(B){var I=[];for(var se in B)B.hasOwnProperty(se)&&I.push(se);return I}),D.prototype={end:function(){Ye(this)},write:function ge(B){var I=this;if(this.error)throw this.error;if(I.closed)return tt(I,"Cannot write after close. Assign an onready handler.");if(null===B)return Ye(I);"object"==typeof B&&(B=B.toString());for(var se=0,K="";K=Qe(B,se++),I.c=K,K;)switch(I.trackPosition&&(I.position++,"\n"===K?(I.line++,I.column=0):I.column++),I.state){case H.BEGIN:if(I.state=H.BEGIN_WHITESPACE,"\ufeff"===K)continue;rt(I,K);continue;case H.BEGIN_WHITESPACE:rt(I,K);continue;case H.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Fe=se-1;K&&"<"!==K&&"&"!==K;)(K=Qe(B,se++))&&I.trackPosition&&(I.position++,"\n"===K?(I.line++,I.column=0):I.column++);I.textNode+=B.substring(Fe,se-1)}"<"!==K||I.sawRoot&&I.closedRoot&&!I.strict?(!z(K)&&(!I.sawRoot||I.closedRoot)&&Ae(I,"Text data outside of root node."),"&"===K?I.state=H.TEXT_ENTITY:I.textNode+=K):(I.state=H.OPEN_WAKA,I.startTagPosition=I.position);continue;case H.SCRIPT:"<"===K?I.state=H.SCRIPT_ENDING:I.script+=K;continue;case H.SCRIPT_ENDING:"/"===K?I.state=H.CLOSE_TAG:(I.script+="<"+K,I.state=H.SCRIPT);continue;case H.OPEN_WAKA:"!"===K?(I.state=H.SGML_DECL,I.sgmlDecl=""):z(K)||(T(Y,K)?(I.state=H.OPEN_TAG,I.tagName=K):"/"===K?(I.state=H.CLOSE_TAG,I.tagName=""):"?"===K?(I.state=H.PROC_INST,I.procInstName=I.procInstBody=""):(Ae(I,"Unencoded <"),I.startTagPosition+1<I.position&&(K=new Array(I.position-I.startTagPosition).join(" ")+K),I.textNode+="<"+K,I.state=H.TEXT));continue;case H.SGML_DECL:(I.sgmlDecl+K).toUpperCase()===U?(xe(I,"onopencdata"),I.state=H.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+K==="--"?(I.state=H.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+K).toUpperCase()===ce?(I.state=H.DOCTYPE,(I.doctype||I.sawRoot)&&Ae(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===K?(xe(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=H.TEXT):(v(K)&&(I.state=H.SGML_DECL_QUOTED),I.sgmlDecl+=K);continue;case H.SGML_DECL_QUOTED:K===I.q&&(I.state=H.SGML_DECL,I.q=""),I.sgmlDecl+=K;continue;case H.DOCTYPE:">"===K?(I.state=H.TEXT,xe(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=K,"["===K?I.state=H.DOCTYPE_DTD:v(K)&&(I.state=H.DOCTYPE_QUOTED,I.q=K));continue;case H.DOCTYPE_QUOTED:I.doctype+=K,K===I.q&&(I.q="",I.state=H.DOCTYPE);continue;case H.DOCTYPE_DTD:I.doctype+=K,"]"===K?I.state=H.DOCTYPE:v(K)&&(I.state=H.DOCTYPE_DTD_QUOTED,I.q=K);continue;case H.DOCTYPE_DTD_QUOTED:I.doctype+=K,K===I.q&&(I.state=H.DOCTYPE_DTD,I.q="");continue;case H.COMMENT:"-"===K?I.state=H.COMMENT_ENDING:I.comment+=K;continue;case H.COMMENT_ENDING:"-"===K?(I.state=H.COMMENT_ENDED,I.comment=De(I.opt,I.comment),I.comment&&xe(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+K,I.state=H.COMMENT);continue;case H.COMMENT_ENDED:">"!==K?(Ae(I,"Malformed comment"),I.comment+="--"+K,I.state=H.COMMENT):I.state=H.TEXT;continue;case H.CDATA:"]"===K?I.state=H.CDATA_ENDING:I.cdata+=K;continue;case H.CDATA_ENDING:"]"===K?I.state=H.CDATA_ENDING_2:(I.cdata+="]"+K,I.state=H.CDATA);continue;case H.CDATA_ENDING_2:">"===K?(I.cdata&&xe(I,"oncdata",I.cdata),xe(I,"onclosecdata"),I.cdata="",I.state=H.TEXT):"]"===K?I.cdata+="]":(I.cdata+="]]"+K,I.state=H.CDATA);continue;case H.PROC_INST:"?"===K?I.state=H.PROC_INST_ENDING:z(K)?I.state=H.PROC_INST_BODY:I.procInstName+=K;continue;case H.PROC_INST_BODY:if(!I.procInstBody&&z(K))continue;"?"===K?I.state=H.PROC_INST_ENDING:I.procInstBody+=K;continue;case H.PROC_INST_ENDING:">"===K?(xe(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=H.TEXT):(I.procInstBody+="?"+K,I.state=H.PROC_INST_BODY);continue;case H.OPEN_TAG:T(re,K)?I.tagName+=K:(Ne(I),">"===K?me(I):"/"===K?I.state=H.OPEN_TAG_SLASH:(z(K)||Ae(I,"Invalid character in tag name"),I.state=H.ATTRIB));continue;case H.OPEN_TAG_SLASH:">"===K?(me(I,!0),Se(I)):(Ae(I,"Forward-slash in opening tag not followed by >"),I.state=H.ATTRIB);continue;case H.ATTRIB:if(z(K))continue;">"===K?me(I):"/"===K?I.state=H.OPEN_TAG_SLASH:T(Y,K)?(I.attribName=K,I.attribValue="",I.state=H.ATTRIB_NAME):Ae(I,"Invalid attribute name");continue;case H.ATTRIB_NAME:"="===K?I.state=H.ATTRIB_VALUE:">"===K?(Ae(I,"Attribute without value"),I.attribValue=I.attribName,ze(I),me(I)):z(K)?I.state=H.ATTRIB_NAME_SAW_WHITE:T(re,K)?I.attribName+=K:Ae(I,"Invalid attribute name");continue;case H.ATTRIB_NAME_SAW_WHITE:if("="===K)I.state=H.ATTRIB_VALUE;else{if(z(K))continue;Ae(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",xe(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===K?me(I):T(Y,K)?(I.attribName=K,I.state=H.ATTRIB_NAME):(Ae(I,"Invalid attribute name"),I.state=H.ATTRIB)}continue;case H.ATTRIB_VALUE:if(z(K))continue;v(K)?(I.q=K,I.state=H.ATTRIB_VALUE_QUOTED):(Ae(I,"Unquoted attribute value"),I.state=H.ATTRIB_VALUE_UNQUOTED,I.attribValue=K);continue;case H.ATTRIB_VALUE_QUOTED:if(K!==I.q){"&"===K?I.state=H.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=K;continue}ze(I),I.q="",I.state=H.ATTRIB_VALUE_CLOSED;continue;case H.ATTRIB_VALUE_CLOSED:z(K)?I.state=H.ATTRIB:">"===K?me(I):"/"===K?I.state=H.OPEN_TAG_SLASH:T(Y,K)?(Ae(I,"No whitespace between attributes"),I.attribName=K,I.attribValue="",I.state=H.ATTRIB_NAME):Ae(I,"Invalid attribute name");continue;case H.ATTRIB_VALUE_UNQUOTED:if(!L(K)){"&"===K?I.state=H.ATTRIB_VALUE_ENTITY_U:I.attribValue+=K;continue}ze(I),">"===K?me(I):I.state=H.ATTRIB;continue;case H.CLOSE_TAG:if(I.tagName)">"===K?Se(I):T(re,K)?I.tagName+=K:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=H.SCRIPT):(z(K)||Ae(I,"Invalid tagname in closing tag"),I.state=H.CLOSE_TAG_SAW_WHITE);else{if(z(K))continue;he(Y,K)?I.script?(I.script+="</"+K,I.state=H.SCRIPT):Ae(I,"Invalid tagname in closing tag."):I.tagName=K}continue;case H.CLOSE_TAG_SAW_WHITE:if(z(K))continue;">"===K?Se(I):Ae(I,"Invalid characters in closing tag");continue;case H.TEXT_ENTITY:case H.ATTRIB_VALUE_ENTITY_Q:case H.ATTRIB_VALUE_ENTITY_U:var pe,Z;switch(I.state){case H.TEXT_ENTITY:pe=H.TEXT,Z="textNode";break;case H.ATTRIB_VALUE_ENTITY_Q:pe=H.ATTRIB_VALUE_QUOTED,Z="attribValue";break;case H.ATTRIB_VALUE_ENTITY_U:pe=H.ATTRIB_VALUE_UNQUOTED,Z="attribValue"}";"===K?(I[Z]+=Xe(I),I.entity="",I.state=pe):T(I.entity.length?W:ne,K)?I.entity+=K:(Ae(I,"Invalid character in entity name"),I[Z]+="&"+I.entity+K,I.entity="",I.state=pe);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function A(B){for(var I=Math.max(E.MAX_BUFFER_LENGTH,10),se=0,K=0,Fe=b.length;K<Fe;K++){var Ve=B[b[K]].length;if(Ve>I)switch(b[K]){case"textNode":Ie(B);break;case"cdata":xe(B,"oncdata",B.cdata),B.cdata="";break;case"script":xe(B,"onscript",B.script),B.script="";break;default:tt(B,"Max buffer length exceeded: "+b[K])}se=Math.max(se,Ve)}B.bufferCheckPosition=E.MAX_BUFFER_LENGTH-se+B.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function g(B){Ie(B),""!==B.cdata&&(xe(B,"oncdata",B.cdata),B.cdata=""),""!==B.script&&(xe(B,"onscript",B.script),B.script="")}(this)}};try{y=m(1793).Stream}catch{y=function(){}}var M=E.EVENTS.filter(function(B){return"error"!==B&&"end"!==B});function N(B,I){if(!(this instanceof N))return new N(B,I);y.apply(this),this._parser=new D(B,I),this.writable=!0,this.readable=!0;var se=this;this._parser.onend=function(){se.emit("end")},this._parser.onerror=function(K){se.emit("error",K),se._parser.error=null},this._decoder=null,M.forEach(function(K){Object.defineProperty(se,"on"+K,{get:function(){return se._parser["on"+K]},set:function(Fe){if(!Fe)return se.removeAllListeners(K),se._parser["on"+K]=Fe,Fe;se.on(K,Fe)},enumerable:!0,configurable:!1})})}(N.prototype=Object.create(y.prototype,{constructor:{value:N}})).write=function(B){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(B)){if(!this._decoder){var I=m(2024).StringDecoder;this._decoder=new I("utf8")}B=this._decoder.write(B)}return this._parser.write(B.toString()),this.emit("data",B),!0},N.prototype.end=function(B){return B&&B.length&&this.write(B),this._parser.end(),!0},N.prototype.on=function(B,I){var se=this;return!se._parser["on"+B]&&-1!==M.indexOf(B)&&(se._parser["on"+B]=function(){var K=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,B),se.emit.apply(se,K)}),y.prototype.on.call(se,B,I)};var U="[CDATA[",ce="DOCTYPE",R="http://www.w3.org/XML/1998/namespace",$="http://www.w3.org/2000/xmlns/",ae={xml:R,xmlns:$},Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function z(B){return" "===B||"\n"===B||"\r"===B||"\t"===B}function v(B){return'"'===B||"'"===B}function L(B){return">"===B||z(B)}function T(B,I){return B.test(I)}function he(B,I){return!T(B,I)}var B,I,se,H=0;for(var Ce in E.STATE={BEGIN:H++,BEGIN_WHITESPACE:H++,TEXT:H++,TEXT_ENTITY:H++,OPEN_WAKA:H++,SGML_DECL:H++,SGML_DECL_QUOTED:H++,DOCTYPE:H++,DOCTYPE_QUOTED:H++,DOCTYPE_DTD:H++,DOCTYPE_DTD_QUOTED:H++,COMMENT_STARTING:H++,COMMENT:H++,COMMENT_ENDING:H++,COMMENT_ENDED:H++,CDATA:H++,CDATA_ENDING:H++,CDATA_ENDING_2:H++,PROC_INST:H++,PROC_INST_BODY:H++,PROC_INST_ENDING:H++,OPEN_TAG:H++,OPEN_TAG_SLASH:H++,ATTRIB:H++,ATTRIB_NAME:H++,ATTRIB_NAME_SAW_WHITE:H++,ATTRIB_VALUE:H++,ATTRIB_VALUE_QUOTED:H++,ATTRIB_VALUE_CLOSED:H++,ATTRIB_VALUE_UNQUOTED:H++,ATTRIB_VALUE_ENTITY_Q:H++,ATTRIB_VALUE_ENTITY_U:H++,CLOSE_TAG:H++,CLOSE_TAG_SAW_WHITE:H++,SCRIPT:H++,SCRIPT_ENDING:H++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(B){var I=E.ENTITIES[B],se="number"==typeof I?String.fromCharCode(I):I;E.ENTITIES[B]=se}),E.STATE)E.STATE[E.STATE[Ce]]=Ce;function le(B,I,se){B[I]&&B[I](se)}function xe(B,I,se){B.textNode&&Ie(B),le(B,I,se)}function Ie(B){B.textNode=De(B.opt,B.textNode),B.textNode&&le(B,"ontext",B.textNode),B.textNode=""}function De(B,I){return B.trim&&(I=I.trim()),B.normalize&&(I=I.replace(/\s+/g," ")),I}function tt(B,I){return Ie(B),B.trackPosition&&(I+="\nLine: "+B.line+"\nColumn: "+B.column+"\nChar: "+B.c),I=new Error(I),B.error=I,le(B,"onerror",I),B}function Ye(B){return B.sawRoot&&!B.closedRoot&&Ae(B,"Unclosed root tag"),B.state!==H.BEGIN&&B.state!==H.BEGIN_WHITESPACE&&B.state!==H.TEXT&&tt(B,"Unexpected end"),Ie(B),B.c="",B.closed=!0,le(B,"onend"),D.call(B,B.strict,B.opt),B}function Ae(B,I){if("object"!=typeof B||!(B instanceof D))throw new Error("bad call to strictFail");B.strict&&tt(B,I)}function Ne(B){B.strict||(B.tagName=B.tagName[B.looseCase]());var I=B.tags[B.tags.length-1]||B,se=B.tag={name:B.tagName,attributes:{}};B.opt.xmlns&&(se.ns=I.ns),B.attribList.length=0,xe(B,"onopentagstart",se)}function ke(B,I){var K=B.indexOf(":")<0?["",B]:B.split(":"),Fe=K[0],Ve=K[1];return I&&"xmlns"===B&&(Fe="xmlns",Ve=""),{prefix:Fe,local:Ve}}function ze(B){if(B.strict||(B.attribName=B.attribName[B.looseCase]()),-1!==B.attribList.indexOf(B.attribName)||B.tag.attributes.hasOwnProperty(B.attribName))B.attribName=B.attribValue="";else{if(B.opt.xmlns){var I=ke(B.attribName,!0),K=I.local;if("xmlns"===I.prefix)if("xml"===K&&B.attribValue!==R)Ae(B,"xml: prefix must be bound to "+R+"\nActual: "+B.attribValue);else if("xmlns"===K&&B.attribValue!==$)Ae(B,"xmlns: prefix must be bound to "+$+"\nActual: "+B.attribValue);else{var Fe=B.tag,Ve=B.tags[B.tags.length-1]||B;Fe.ns===Ve.ns&&(Fe.ns=Object.create(Ve.ns)),Fe.ns[K]=B.attribValue}B.attribList.push([B.attribName,B.attribValue])}else B.tag.attributes[B.attribName]=B.attribValue,xe(B,"onattribute",{name:B.attribName,value:B.attribValue});B.attribName=B.attribValue=""}}function me(B,I){if(B.opt.xmlns){var se=B.tag,K=ke(B.tagName);se.prefix=K.prefix,se.local=K.local,se.uri=se.ns[K.prefix]||"",se.prefix&&!se.uri&&(Ae(B,"Unbound namespace prefix: "+JSON.stringify(B.tagName)),se.uri=K.prefix),se.ns&&(B.tags[B.tags.length-1]||B).ns!==se.ns&&Object.keys(se.ns).forEach(function(ut){xe(B,"onopennamespace",{prefix:ut,uri:se.ns[ut]})});for(var Ve=0,pe=B.attribList.length;Ve<pe;Ve++){var Z=B.attribList[Ve],G=Z[0],C=Z[1],O=ke(G,!0),ue=O.prefix,He=""===ue?"":se.ns[ue]||"",Ke={name:G,value:C,prefix:ue,local:O.local,uri:He};ue&&"xmlns"!==ue&&!He&&(Ae(B,"Unbound namespace prefix: "+JSON.stringify(ue)),Ke.uri=ue),B.tag.attributes[G]=Ke,xe(B,"onattribute",Ke)}B.attribList.length=0}B.tag.isSelfClosing=!!I,B.sawRoot=!0,B.tags.push(B.tag),xe(B,"onopentag",B.tag),I||(B.state=B.noscript||"script"!==B.tagName.toLowerCase()?H.TEXT:H.SCRIPT,B.tag=null,B.tagName=""),B.attribName=B.attribValue="",B.attribList.length=0}function Se(B){if(!B.tagName)return Ae(B,"Weird empty close tag."),B.textNode+="</>",void(B.state=H.TEXT);if(B.script){if("script"!==B.tagName)return B.script+="</"+B.tagName+">",B.tagName="",void(B.state=H.SCRIPT);xe(B,"onscript",B.script),B.script=""}var I=B.tags.length,se=B.tagName;B.strict||(se=se[B.looseCase]());for(var K=se;I--&&B.tags[I].name!==K;)Ae(B,"Unexpected close tag");if(I<0)return Ae(B,"Unmatched closing tag: "+B.tagName),B.textNode+="</"+B.tagName+">",void(B.state=H.TEXT);B.tagName=se;for(var Ve=B.tags.length;Ve-- >I;){var pe=B.tag=B.tags.pop();B.tagName=B.tag.name,xe(B,"onclosetag",B.tagName);var Z={};for(var G in pe.ns)Z[G]=pe.ns[G];B.opt.xmlns&&pe.ns!==(B.tags[B.tags.length-1]||B).ns&&Object.keys(pe.ns).forEach(function(O){xe(B,"onclosenamespace",{prefix:O,uri:pe.ns[O]})})}0===I&&(B.closedRoot=!0),B.tagName=B.attribValue=B.attribName="",B.attribList.length=0,B.state=H.TEXT}function Xe(B){var K,I=B.entity,se=I.toLowerCase(),Fe="";return B.ENTITIES[I]?B.ENTITIES[I]:B.ENTITIES[se]?B.ENTITIES[se]:("#"===(I=se).charAt(0)&&("x"===I.charAt(1)?(I=I.slice(2),Fe=(K=parseInt(I,16)).toString(16)):(I=I.slice(1),Fe=(K=parseInt(I,10)).toString(10))),I=I.replace(/^0+/,""),isNaN(K)||Fe.toLowerCase()!==I?(Ae(B,"Invalid character entity"),"&"+B.entity+";"):String.fromCodePoint(K))}function rt(B,I){"<"===I?(B.state=H.OPEN_WAKA,B.startTagPosition=B.position):z(I)||(Ae(B,"Non-whitespace before first tag."),B.textNode=I,B.state=H.TEXT)}function Qe(B,I){var se="";return I<B.length&&(se=B.charAt(I)),se}H=E.STATE,String.fromCodePoint||(B=String.fromCharCode,I=Math.floor,se=function(){var Fe=[],Z=-1,G=arguments.length;if(!G)return"";for(var C="";++Z<G;){var O=Number(arguments[Z]);if(!isFinite(O)||O<0||O>1114111||I(O)!==O)throw RangeError("Invalid code point: "+O);O<=65535?Fe.push(O):Fe.push(55296+((O-=65536)>>10),O%1024+56320),(Z+1===G||Fe.length>16384)&&(C+=B.apply(null,Fe),Fe.length=0)}return C},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:se,configurable:!0,writable:!0}):String.fromCodePoint=se)}(J)},8280:function(){!function(te,J){"use strict";if(!te.setImmediate){var A,m=1,E={},b=!1,D=te.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(te);ae=ae&&ae.setTimeout?ae:te,"[object process]"==={}.toString.call(te.process)?function j(){A=function(Y){process.nextTick(function(){M(Y)})}}():function N(){if(te.postMessage&&!te.importScripts){var Y=!0,re=te.onmessage;return te.onmessage=function(){Y=!1},te.postMessage("","*"),te.onmessage=re,Y}}()?function U(){var Y="setImmediate$"+Math.random()+"$",re=function(ne){ne.source===te&&"string"==typeof ne.data&&0===ne.data.indexOf(Y)&&M(+ne.data.slice(Y.length))};te.addEventListener?te.addEventListener("message",re,!1):te.attachEvent("onmessage",re),A=function(ne){te.postMessage(Y+ne,"*")}}():te.MessageChannel?function ce(){var Y=new MessageChannel;Y.port1.onmessage=function(re){M(re.data)},A=function(re){Y.port2.postMessage(re)}}():D&&"onreadystatechange"in D.createElement("script")?function R(){var Y=D.documentElement;A=function(re){var ne=D.createElement("script");ne.onreadystatechange=function(){M(re),ne.onreadystatechange=null,Y.removeChild(ne),ne=null},Y.appendChild(ne)}}():function $(){A=function(Y){setTimeout(M,0,Y)}}(),ae.setImmediate=function k(Y){"function"!=typeof Y&&(Y=new Function(""+Y));for(var re=new Array(arguments.length-1),ne=0;ne<re.length;ne++)re[ne]=arguments[ne+1];return E[m]={callback:Y,args:re},A(m),m++},ae.clearImmediate=g}function g(Y){delete E[Y]}function M(Y){if(b)setTimeout(M,0,Y);else{var re=E[Y];if(re){b=!0;try{!function y(Y){var re=Y.callback,ne=Y.args;switch(ne.length){case 0:re();break;case 1:re(ne[0]);break;case 2:re(ne[0],ne[1]);break;case 3:re(ne[0],ne[1],ne[2]);break;default:re.apply(undefined,ne)}}(re)}finally{g(Y),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(te,J,m)=>{te.exports=D;var E=m(2016).EventEmitter;function D(){E.call(this)}m(6698)(D,E),D.Readable=m(842),D.Writable=m(7597),D.Duplex=m(2232),D.Transform=m(555),D.PassThrough=m(8226),D.finished=m(1227),D.pipeline=m(2345),D.Stream=D,D.prototype.pipe=function(A,k){var g=this;function y($){A.writable&&!1===A.write($)&&g.pause&&g.pause()}function M(){g.readable&&g.resume&&g.resume()}g.on("data",y),A.on("drain",M),!A._isStdio&&(!k||!1!==k.end)&&(g.on("end",N),g.on("close",U));var j=!1;function N(){j||(j=!0,A.end())}function U(){j||(j=!0,"function"==typeof A.destroy&&A.destroy())}function ce($){if(R(),0===E.listenerCount(this,"error"))throw $}function R(){g.removeListener("data",y),A.removeListener("drain",M),g.removeListener("end",N),g.removeListener("close",U),g.removeListener("error",ce),A.removeListener("error",ce),g.removeListener("end",R),g.removeListener("close",R),A.removeListener("close",R)}return g.on("error",ce),A.on("error",ce),g.on("end",R),g.on("close",R),A.on("close",R),A.emit("pipe",g),A}},9555:te=>{"use strict";var m={};function E(g,y,M){M||(M=Error);var N=function(U){function ce(R,$,ae){return U.call(this,function j(U,ce,R){return"string"==typeof y?y:y(U,ce,R)}(R,$,ae))||this}return function J(g,y){g.prototype=Object.create(y.prototype),g.prototype.constructor=g,g.__proto__=y}(ce,U),ce}(M);N.prototype.name=M.name,N.prototype.code=g,m[g]=N}function b(g,y){if(Array.isArray(g)){var M=g.length;return g=g.map(function(j){return String(j)}),M>2?"one of ".concat(y," ").concat(g.slice(0,M-1).join(", "),", or ")+g[M-1]:2===M?"one of ".concat(y," ").concat(g[0]," or ").concat(g[1]):"of ".concat(y," ").concat(g[0])}return"of ".concat(y," ").concat(String(g))}E("ERR_INVALID_OPT_VALUE",function(g,y){return'The value "'+y+'" is invalid for option "'+g+'"'},TypeError),E("ERR_INVALID_ARG_TYPE",function(g,y,M){var j,N;if("string"==typeof y&&function D(g,y,M){return g.substr(!M||M<0?0:+M,y.length)===y}(y,"not ")?(j="must not be",y=y.replace(/^not /,"")):j="must be",function A(g,y,M){return(void 0===M||M>g.length)&&(M=g.length),g.substring(M-y.length,M)===y}(g," argument"))N="The ".concat(g," ").concat(j," ").concat(b(y,"type"));else{var U=function k(g,y,M){return"number"!=typeof M&&(M=0),!(M+y.length>g.length)&&-1!==g.indexOf(y,M)}(g,".")?"property":"argument";N='The "'.concat(g,'" ').concat(U," ").concat(j," ").concat(b(y,"type"))}return N+". Received type ".concat(typeof M)},TypeError),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),E("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),E("ERR_STREAM_PREMATURE_CLOSE","Premature close"),E("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),E("ERR_STREAM_WRITE_AFTER_END","write after end"),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),te.exports.q=m},2232:(te,J,m)=>{"use strict";var E=Object.keys||function(N){var U=[];for(var ce in N)U.push(ce);return U};te.exports=y;var b=m(842),D=m(7597);m(6698)(y,b);for(var A=E(D.prototype),k=0;k<A.length;k++){var g=A[k];y.prototype[g]||(y.prototype[g]=D.prototype[g])}function y(N){if(!(this instanceof y))return new y(N);b.call(this,N),D.call(this,N),this.allowHalfOpen=!0,N&&(!1===N.readable&&(this.readable=!1),!1===N.writable&&(this.writable=!1),!1===N.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",M)))}function M(){this._writableState.ended||process.nextTick(j,this)}function j(N){N.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(U){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=U,this._writableState.destroyed=U)}})},8226:(te,J,m)=>{"use strict";te.exports=b;var E=m(555);function b(D){if(!(this instanceof b))return new b(D);E.call(this,D)}m(6698)(b,E),b.prototype._transform=function(D,A,k){k(null,D)}},842:(te,J,m)=>{"use strict";var E;te.exports=le,le.ReadableState=Ce,m(2016);var N,D=function(Z,G){return Z.listeners(G).length},A=m(3951),k=m(9007).Buffer,g=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},j=m(964);N=j&&j.debuglog?j.debuglog("stream"):function(){};var z,v,L,U=m(2998),ce=m(3992),$=m(4962).getHighWaterMark,ae=m(9555).q,Y=ae.ERR_INVALID_ARG_TYPE,re=ae.ERR_STREAM_PUSH_AFTER_EOF,ne=ae.ERR_METHOD_NOT_IMPLEMENTED,W=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;m(6698)(le,A);var T=ce.errorOrDestroy,he=["error","close","destroy","pause","resume"];function Ce(pe,Z,G){E=E||m(2232),"boolean"!=typeof G&&(G=Z instanceof E),this.objectMode=!!(pe=pe||{}).objectMode,G&&(this.objectMode=this.objectMode||!!pe.readableObjectMode),this.highWaterMark=$(this,pe,"readableHighWaterMark",G),this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==pe.emitClose,this.autoDestroy=!!pe.autoDestroy,this.destroyed=!1,this.defaultEncoding=pe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,pe.encoding&&(z||(z=m(2024).StringDecoder),this.decoder=new z(pe.encoding),this.encoding=pe.encoding)}function le(pe){if(E=E||m(2232),!(this instanceof le))return new le(pe);this._readableState=new Ce(pe,this,this instanceof E),this.readable=!0,pe&&("function"==typeof pe.read&&(this._read=pe.read),"function"==typeof pe.destroy&&(this._destroy=pe.destroy)),A.call(this)}function xe(pe,Z,G,C,O){N("readableAddChunk",Z);var de,ue=pe._readableState;if(null===Z)ue.reading=!1,function Ne(pe,Z){if(N("onEofChunk"),!Z.ended){if(Z.decoder){var G=Z.decoder.end();G&&G.length&&(Z.buffer.push(G),Z.length+=Z.objectMode?1:G.length)}Z.ended=!0,Z.sync?ke(pe):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,ze(pe)))}}(pe,ue);else if(O||(de=function De(pe,Z){var G;return!function M(pe){return k.isBuffer(pe)||pe instanceof g}(Z)&&"string"!=typeof Z&&void 0!==Z&&!pe.objectMode&&(G=new Y("chunk",["string","Buffer","Uint8Array"],Z)),G}(ue,Z)),de)T(pe,de);else if(ue.objectMode||Z&&Z.length>0)if("string"!=typeof Z&&!ue.objectMode&&Object.getPrototypeOf(Z)!==k.prototype&&(Z=function y(pe){return k.from(pe)}(Z)),C)ue.endEmitted?T(pe,new W):Ie(pe,ue,Z,!0);else if(ue.ended)T(pe,new re);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!G?(Z=ue.decoder.write(Z),ue.objectMode||0!==Z.length?Ie(pe,ue,Z,!1):me(pe,ue)):Ie(pe,ue,Z,!1)}else C||(ue.reading=!1,me(pe,ue));return!ue.ended&&(ue.length<ue.highWaterMark||0===ue.length)}function Ie(pe,Z,G,C){Z.flowing&&0===Z.length&&!Z.sync?(Z.awaitDrain=0,pe.emit("data",G)):(Z.length+=Z.objectMode?1:G.length,C?Z.buffer.unshift(G):Z.buffer.push(G),Z.needReadable&&ke(pe)),me(pe,Z)}Object.defineProperty(le.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Z){this._readableState&&(this._readableState.destroyed=Z)}}),le.prototype.destroy=ce.destroy,le.prototype._undestroy=ce.undestroy,le.prototype._destroy=function(pe,Z){Z(pe)},le.prototype.push=function(pe,Z){var C,G=this._readableState;return G.objectMode?C=!0:"string"==typeof pe&&((Z=Z||G.defaultEncoding)!==G.encoding&&(pe=k.from(pe,Z),Z=""),C=!0),xe(this,pe,Z,!1,C)},le.prototype.unshift=function(pe){return xe(this,pe,null,!0,!1)},le.prototype.isPaused=function(){return!1===this._readableState.flowing},le.prototype.setEncoding=function(pe){z||(z=m(2024).StringDecoder);var Z=new z(pe);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,C="";null!==G;)C+=Z.write(G.data),G=G.next;return this._readableState.buffer.clear(),""!==C&&this._readableState.buffer.push(C),this._readableState.length=C.length,this};var tt=1073741824;function Ae(pe,Z){return pe<=0||0===Z.length&&Z.ended?0:Z.objectMode?1:pe!=pe?Z.flowing&&Z.length?Z.buffer.head.data.length:Z.length:(pe>Z.highWaterMark&&(Z.highWaterMark=function Ye(pe){return pe>=tt?pe=tt:(pe--,pe|=pe>>>1,pe|=pe>>>2,pe|=pe>>>4,pe|=pe>>>8,pe|=pe>>>16,pe++),pe}(pe)),pe<=Z.length?pe:Z.ended?Z.length:(Z.needReadable=!0,0))}function ke(pe){var Z=pe._readableState;N("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(N("emitReadable",Z.flowing),Z.emittedReadable=!0,process.nextTick(ze,pe))}function ze(pe){var Z=pe._readableState;N("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&(Z.length||Z.ended)&&(pe.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,I(pe)}function me(pe,Z){Z.readingMore||(Z.readingMore=!0,process.nextTick(Se,pe,Z))}function Se(pe,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&0===Z.length);){var G=Z.length;if(N("maybeReadMore read 0"),pe.read(0),G===Z.length)break}Z.readingMore=!1}function rt(pe){var Z=pe._readableState;Z.readableListening=pe.listenerCount("readable")>0,Z.resumeScheduled&&!Z.paused?Z.flowing=!0:pe.listenerCount("data")>0&&pe.resume()}function Qe(pe){N("readable nexttick read 0"),pe.read(0)}function B(pe,Z){N("resume",Z.reading),Z.reading||pe.read(0),Z.resumeScheduled=!1,pe.emit("resume"),I(pe),Z.flowing&&!Z.reading&&pe.read(0)}function I(pe){var Z=pe._readableState;for(N("flow",Z.flowing);Z.flowing&&null!==pe.read(););}function se(pe,Z){return 0===Z.length?null:(Z.objectMode?G=Z.buffer.shift():!pe||pe>=Z.length?(G=Z.decoder?Z.buffer.join(""):1===Z.buffer.length?Z.buffer.first():Z.buffer.concat(Z.length),Z.buffer.clear()):G=Z.buffer.consume(pe,Z.decoder),G);var G}function K(pe){var Z=pe._readableState;N("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,process.nextTick(Fe,Z,pe))}function Fe(pe,Z){if(N("endReadableNT",pe.endEmitted,pe.length),!pe.endEmitted&&0===pe.length&&(pe.endEmitted=!0,Z.readable=!1,Z.emit("end"),pe.autoDestroy)){var G=Z._writableState;(!G||G.autoDestroy&&G.finished)&&Z.destroy()}}function Ve(pe,Z){for(var G=0,C=pe.length;G<C;G++)if(pe[G]===Z)return G;return-1}le.prototype.read=function(pe){N("read",pe),pe=parseInt(pe,10);var Z=this._readableState,G=pe;if(0!==pe&&(Z.emittedReadable=!1),0===pe&&Z.needReadable&&((0!==Z.highWaterMark?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return N("read: emitReadable",Z.length,Z.ended),0===Z.length&&Z.ended?K(this):ke(this),null;if(0===(pe=Ae(pe,Z))&&Z.ended)return 0===Z.length&&K(this),null;var O,C=Z.needReadable;return N("need readable",C),(0===Z.length||Z.length-pe<Z.highWaterMark)&&N("length less than watermark",C=!0),Z.ended||Z.reading?N("reading or ended",C=!1):C&&(N("do read"),Z.reading=!0,Z.sync=!0,0===Z.length&&(Z.needReadable=!0),this._read(Z.highWaterMark),Z.sync=!1,Z.reading||(pe=Ae(G,Z))),null===(O=pe>0?se(pe,Z):null)?(Z.needReadable=Z.length<=Z.highWaterMark,pe=0):(Z.length-=pe,Z.awaitDrain=0),0===Z.length&&(Z.ended||(Z.needReadable=!0),G!==pe&&Z.ended&&K(this)),null!==O&&this.emit("data",O),O},le.prototype._read=function(pe){T(this,new ne("_read()"))},le.prototype.pipe=function(pe,Z){var G=this,C=this._readableState;switch(C.pipesCount){case 0:C.pipes=pe;break;case 1:C.pipes=[C.pipes,pe];break;default:C.pipes.push(pe)}C.pipesCount+=1,N("pipe count=%d opts=%j",C.pipesCount,Z);var ue=Z&&!1===Z.end||pe===process.stdout||pe===process.stderr?q:He;function He(){N("onend"),pe.end()}C.endEmitted?process.nextTick(ue):G.once("end",ue),pe.on("unpipe",function de(S,oe){N("onunpipe"),S===G&&oe&&!1===oe.hasUnpiped&&(oe.hasUnpiped=!0,function Rt(){N("cleanup"),pe.removeListener("close",rn),pe.removeListener("finish",Re),pe.removeListener("drain",Ke),pe.removeListener("error",Vt),pe.removeListener("unpipe",de),G.removeListener("end",He),G.removeListener("end",q),G.removeListener("data",dt),ut=!0,C.awaitDrain&&(!pe._writableState||pe._writableState.needDrain)&&Ke()}())});var Ke=function Xe(pe){return function(){var G=pe._readableState;N("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,0===G.awaitDrain&&D(pe,"data")&&(G.flowing=!0,I(pe))}}(G);pe.on("drain",Ke);var ut=!1;function dt(S){N("ondata");var oe=pe.write(S);N("dest.write",oe),!1===oe&&((1===C.pipesCount&&C.pipes===pe||C.pipesCount>1&&-1!==Ve(C.pipes,pe))&&!ut&&(N("false write response, pause",C.awaitDrain),C.awaitDrain++),G.pause())}function Vt(S){N("onerror",S),q(),pe.removeListener("error",Vt),0===D(pe,"error")&&T(pe,S)}function rn(){pe.removeListener("finish",Re),q()}function Re(){N("onfinish"),pe.removeListener("close",rn),q()}function q(){N("unpipe"),G.unpipe(pe)}return G.on("data",dt),function H(pe,Z,G){if("function"==typeof pe.prependListener)return pe.prependListener(Z,G);pe._events&&pe._events[Z]?Array.isArray(pe._events[Z])?pe._events[Z].unshift(G):pe._events[Z]=[G,pe._events[Z]]:pe.on(Z,G)}(pe,"error",Vt),pe.once("close",rn),pe.once("finish",Re),pe.emit("pipe",G),C.flowing||(N("pipe resume"),G.resume()),pe},le.prototype.unpipe=function(pe){var Z=this._readableState,G={hasUnpiped:!1};if(0===Z.pipesCount)return this;if(1===Z.pipesCount)return pe&&pe!==Z.pipes||(pe||(pe=Z.pipes),Z.pipes=null,Z.pipesCount=0,Z.flowing=!1,pe&&pe.emit("unpipe",this,G)),this;if(!pe){var C=Z.pipes,O=Z.pipesCount;Z.pipes=null,Z.pipesCount=0,Z.flowing=!1;for(var ue=0;ue<O;ue++)C[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var de=Ve(Z.pipes,pe);return-1===de||(Z.pipes.splice(de,1),Z.pipesCount-=1,1===Z.pipesCount&&(Z.pipes=Z.pipes[0]),pe.emit("unpipe",this,G)),this},le.prototype.addListener=le.prototype.on=function(pe,Z){var G=A.prototype.on.call(this,pe,Z),C=this._readableState;return"data"===pe?(C.readableListening=this.listenerCount("readable")>0,!1!==C.flowing&&this.resume()):"readable"===pe&&!C.endEmitted&&!C.readableListening&&(C.readableListening=C.needReadable=!0,C.flowing=!1,C.emittedReadable=!1,N("on readable",C.length,C.reading),C.length?ke(this):C.reading||process.nextTick(Qe,this)),G},le.prototype.removeListener=function(pe,Z){var G=A.prototype.removeListener.call(this,pe,Z);return"readable"===pe&&process.nextTick(rt,this),G},le.prototype.removeAllListeners=function(pe){var Z=A.prototype.removeAllListeners.apply(this,arguments);return("readable"===pe||void 0===pe)&&process.nextTick(rt,this),Z},le.prototype.resume=function(){var pe=this._readableState;return pe.flowing||(N("resume"),pe.flowing=!pe.readableListening,function ge(pe,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,process.nextTick(B,pe,Z))}(this,pe)),pe.paused=!1,this},le.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},le.prototype.wrap=function(pe){var Z=this,G=this._readableState,C=!1;for(var O in pe.on("end",function(){if(N("wrapped end"),G.decoder&&!G.ended){var de=G.decoder.end();de&&de.length&&Z.push(de)}Z.push(null)}),pe.on("data",function(de){N("wrapped data"),G.decoder&&(de=G.decoder.write(de)),G.objectMode&&null==de||!(G.objectMode||de&&de.length)||Z.push(de)||(C=!0,pe.pause())}),pe)void 0===this[O]&&"function"==typeof pe[O]&&(this[O]=function(He){return function(){return pe[He].apply(pe,arguments)}}(O));for(var ue=0;ue<he.length;ue++)pe.on(he[ue],this.emit.bind(this,he[ue]));return this._read=function(de){N("wrapped _read",de),C&&(C=!1,pe.resume())},this},"function"==typeof Symbol&&(le.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=m(2590)),v(this)}),Object.defineProperty(le.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(le.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(le.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Z){this._readableState&&(this._readableState.flowing=Z)}}),le._fromList=se,Object.defineProperty(le.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(le.from=function(pe,Z){return void 0===L&&(L=m(5374)),L(le,pe,Z)})},555:(te,J,m)=>{"use strict";te.exports=M;var E=m(9555).q,b=E.ERR_METHOD_NOT_IMPLEMENTED,D=E.ERR_MULTIPLE_CALLBACK,A=E.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=E.ERR_TRANSFORM_WITH_LENGTH_0,g=m(2232);function y(U,ce){var R=this._transformState;R.transforming=!1;var $=R.writecb;if(null===$)return this.emit("error",new D);R.writechunk=null,R.writecb=null,null!=ce&&this.push(ce),$(U);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function M(U){if(!(this instanceof M))return new M(U);g.call(this,U),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,U&&("function"==typeof U.transform&&(this._transform=U.transform),"function"==typeof U.flush&&(this._flush=U.flush)),this.on("prefinish",j)}function j(){var U=this;"function"!=typeof this._flush||this._readableState.destroyed?N(this,null,null):this._flush(function(ce,R){N(U,ce,R)})}function N(U,ce,R){if(ce)return U.emit("error",ce);if(null!=R&&U.push(R),U._writableState.length)throw new k;if(U._transformState.transforming)throw new A;return U.push(null)}m(6698)(M,g),M.prototype.push=function(U,ce){return this._transformState.needTransform=!1,g.prototype.push.call(this,U,ce)},M.prototype._transform=function(U,ce,R){R(new b("_transform()"))},M.prototype._write=function(U,ce,R){var $=this._transformState;if($.writecb=R,$.writechunk=U,$.writeencoding=ce,!$.transforming){var ae=this._readableState;($.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},M.prototype._read=function(U){var ce=this._transformState;null===ce.writechunk||ce.transforming?ce.needTransform=!0:(ce.transforming=!0,this._transform(ce.writechunk,ce.writeencoding,ce.afterTransform))},M.prototype._destroy=function(U,ce){g.prototype._destroy.call(this,U,function(R){ce(R)})}},7597:(te,J,m)=>{"use strict";function b(I){var se=this;this.next=null,this.entry=null,this.finish=function(){!function B(I,se,K){var Fe=I.entry;for(I.entry=null;Fe;){var Ve=Fe.callback;se.pendingcb--,Ve(K),Fe=Fe.next}se.corkedRequestsFree.next=I}(se,I)}}var D;te.exports=Ce,Ce.WritableState=he;var H,A={deprecate:m(496)},k=m(3951),g=m(9007).Buffer,y=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},N=m(3992),ce=m(4962).getHighWaterMark,R=m(9555).q,$=R.ERR_INVALID_ARG_TYPE,ae=R.ERR_METHOD_NOT_IMPLEMENTED,Y=R.ERR_MULTIPLE_CALLBACK,re=R.ERR_STREAM_CANNOT_PIPE,ne=R.ERR_STREAM_DESTROYED,W=R.ERR_STREAM_NULL_VALUES,z=R.ERR_STREAM_WRITE_AFTER_END,v=R.ERR_UNKNOWN_ENCODING,L=N.errorOrDestroy;function T(){}function he(I,se,K){D=D||m(2232),"boolean"!=typeof K&&(K=se instanceof D),this.objectMode=!!(I=I||{}).objectMode,K&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=ce(this,I,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===I.decodeStrings),this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ve){!function Ne(I,se){var K=I._writableState,Fe=K.sync,Ve=K.writecb;if("function"!=typeof Ve)throw new Y;if(function Ae(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}(K),se)!function Ye(I,se,K,Fe,Ve){--se.pendingcb,K?(process.nextTick(Ve,Fe),process.nextTick(Qe,I,se),I._writableState.errorEmitted=!0,L(I,Fe)):(Ve(Fe),I._writableState.errorEmitted=!0,L(I,Fe),Qe(I,se))}(I,K,Fe,se,Ve);else{var pe=Se(K)||I.destroyed;!pe&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&me(I,K),Fe?process.nextTick(ke,I,K,pe,Ve):ke(I,K,pe,Ve)}}(se,Ve)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==I.emitClose,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Ce(I){var se=this instanceof(D=D||m(2232));if(!se&&!H.call(Ce,this))return new Ce(I);this._writableState=new he(I,this,se),this.writable=!0,I&&("function"==typeof I.write&&(this._write=I.write),"function"==typeof I.writev&&(this._writev=I.writev),"function"==typeof I.destroy&&(this._destroy=I.destroy),"function"==typeof I.final&&(this._final=I.final)),k.call(this)}function tt(I,se,K,Fe,Ve,pe,Z){se.writelen=Fe,se.writecb=Z,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new ne("write")):K?I._writev(Ve,se.onwrite):I._write(Ve,pe,se.onwrite),se.sync=!1}function ke(I,se,K,Fe){K||function ze(I,se){0===se.length&&se.needDrain&&(se.needDrain=!1,I.emit("drain"))}(I,se),se.pendingcb--,Fe(),Qe(I,se)}function me(I,se){se.bufferProcessing=!0;var K=se.bufferedRequest;if(I._writev&&K&&K.next){var Ve=new Array(se.bufferedRequestCount),pe=se.corkedRequestsFree;pe.entry=K;for(var Z=0,G=!0;K;)Ve[Z]=K,K.isBuf||(G=!1),K=K.next,Z+=1;Ve.allBuffers=G,tt(I,se,!0,se.length,Ve,"",pe.finish),se.pendingcb++,se.lastBufferedRequest=null,pe.next?(se.corkedRequestsFree=pe.next,pe.next=null):se.corkedRequestsFree=new b(se),se.bufferedRequestCount=0}else{for(;K;){var C=K.chunk;if(tt(I,se,!1,se.objectMode?1:C.length,C,K.encoding,K.callback),K=K.next,se.bufferedRequestCount--,se.writing)break}null===K&&(se.lastBufferedRequest=null)}se.bufferedRequest=K,se.bufferProcessing=!1}function Se(I){return I.ending&&0===I.length&&null===I.bufferedRequest&&!I.finished&&!I.writing}function Xe(I,se){I._final(function(K){se.pendingcb--,K&&L(I,K),se.prefinished=!0,I.emit("prefinish"),Qe(I,se)})}function Qe(I,se){var K=Se(se);if(K&&(function rt(I,se){!se.prefinished&&!se.finalCalled&&("function"!=typeof I._final||se.destroyed?(se.prefinished=!0,I.emit("prefinish")):(se.pendingcb++,se.finalCalled=!0,process.nextTick(Xe,I,se)))}(I,se),0===se.pendingcb&&(se.finished=!0,I.emit("finish"),se.autoDestroy))){var Fe=I._readableState;(!Fe||Fe.autoDestroy&&Fe.endEmitted)&&I.destroy()}return K}m(6698)(Ce,k),he.prototype.getBuffer=function(){for(var se=this.bufferedRequest,K=[];se;)K.push(se),se=se.next;return K},function(){try{Object.defineProperty(he.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(H=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ce,Symbol.hasInstance,{value:function(se){return!!H.call(this,se)||this===Ce&&se&&se._writableState instanceof he}})):H=function(se){return se instanceof this},Ce.prototype.pipe=function(){L(this,new re)},Ce.prototype.write=function(I,se,K){var Fe=this._writableState,Ve=!1,pe=!Fe.objectMode&&function j(I){return g.isBuffer(I)||I instanceof y}(I);return pe&&!g.isBuffer(I)&&(I=function M(I){return g.from(I)}(I)),"function"==typeof se&&(K=se,se=null),pe?se="buffer":se||(se=Fe.defaultEncoding),"function"!=typeof K&&(K=T),Fe.ending?function le(I,se){var K=new z;L(I,K),process.nextTick(se,K)}(this,K):(pe||function xe(I,se,K,Fe){var Ve;return null===K?Ve=new W:"string"!=typeof K&&!se.objectMode&&(Ve=new $("chunk",["string","Buffer"],K)),!Ve||(L(I,Ve),process.nextTick(Fe,Ve),!1)}(this,Fe,I,K))&&(Fe.pendingcb++,Ve=function De(I,se,K,Fe,Ve,pe){if(!K){var Z=function Ie(I,se,K){return!I.objectMode&&!1!==I.decodeStrings&&"string"==typeof se&&(se=g.from(se,K)),se}(se,Fe,Ve);Fe!==Z&&(K=!0,Ve="buffer",Fe=Z)}var G=se.objectMode?1:Fe.length;se.length+=G;var C=se.length<se.highWaterMark;if(C||(se.needDrain=!0),se.writing||se.corked){var O=se.lastBufferedRequest;se.lastBufferedRequest={chunk:Fe,encoding:Ve,isBuf:K,callback:pe,next:null},O?O.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else tt(I,se,!1,G,Fe,Ve,pe);return C}(this,Fe,pe,I,se,K)),Ve},Ce.prototype.cork=function(){this._writableState.corked++},Ce.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&me(this,I))},Ce.prototype.setDefaultEncoding=function(se){if("string"==typeof se&&(se=se.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((se+"").toLowerCase())>-1))throw new v(se);return this._writableState.defaultEncoding=se,this},Object.defineProperty(Ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ce.prototype._write=function(I,se,K){K(new ae("_write()"))},Ce.prototype._writev=null,Ce.prototype.end=function(I,se,K){var Fe=this._writableState;return"function"==typeof I?(K=I,I=null,se=null):"function"==typeof se&&(K=se,se=null),null!=I&&this.write(I,se),Fe.corked&&(Fe.corked=1,this.uncork()),Fe.ending||function ge(I,se,K){se.ending=!0,Qe(I,se),K&&(se.finished?process.nextTick(K):I.once("finish",K)),se.ended=!0,I.writable=!1}(this,Fe,K),this},Object.defineProperty(Ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ce.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(se){this._writableState&&(this._writableState.destroyed=se)}}),Ce.prototype.destroy=N.destroy,Ce.prototype._undestroy=N.undestroy,Ce.prototype._destroy=function(I,se){se(I)}},2590:(te,J,m)=>{"use strict";var E;function b(z,v,L){return v=function D(z){var v=function A(z,v){if("object"!=typeof z||null===z)return z;var L=z[Symbol.toPrimitive];if(void 0!==L){var T=L.call(z,v||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(z)}(z,"string");return"symbol"==typeof v?v:String(v)}(v),v in z?Object.defineProperty(z,v,{value:L,enumerable:!0,configurable:!0,writable:!0}):z[v]=L,z}var k=m(1227),g=Symbol("lastResolve"),y=Symbol("lastReject"),M=Symbol("error"),j=Symbol("ended"),N=Symbol("lastPromise"),U=Symbol("handlePromise"),ce=Symbol("stream");function R(z,v){return{value:z,done:v}}function $(z){var v=z[g];if(null!==v){var L=z[ce].read();null!==L&&(z[N]=null,z[g]=null,z[y]=null,v(R(L,!1)))}}function ae(z){process.nextTick($,z)}var re=Object.getPrototypeOf(function(){}),ne=Object.setPrototypeOf((b(E={get stream(){return this[ce]},next:function(){var v=this,L=this[M];if(null!==L)return Promise.reject(L);if(this[j])return Promise.resolve(R(void 0,!0));if(this[ce].destroyed)return new Promise(function(Ce,le){process.nextTick(function(){v[M]?le(v[M]):Ce(R(void 0,!0))})});var he,T=this[N];if(T)he=new Promise(function Y(z,v){return function(L,T){z.then(function(){v[j]?L(R(void 0,!0)):v[U](L,T)},T)}}(T,this));else{var H=this[ce].read();if(null!==H)return Promise.resolve(R(H,!1));he=new Promise(this[U])}return this[N]=he,he}},Symbol.asyncIterator,function(){return this}),b(E,"return",function(){var v=this;return new Promise(function(L,T){v[ce].destroy(null,function(he){he?T(he):L(R(void 0,!0))})})}),E),re);te.exports=function(v){var L,T=Object.create(ne,(b(L={},ce,{value:v,writable:!0}),b(L,g,{value:null,writable:!0}),b(L,y,{value:null,writable:!0}),b(L,M,{value:null,writable:!0}),b(L,j,{value:v._readableState.endEmitted,writable:!0}),b(L,U,{value:function(H,Ce){var le=T[ce].read();le?(T[N]=null,T[g]=null,T[y]=null,H(R(le,!1))):(T[g]=H,T[y]=Ce)},writable:!0}),L));return T[N]=null,k(v,function(he){if(he&&"ERR_STREAM_PREMATURE_CLOSE"!==he.code){var H=T[y];return null!==H&&(T[N]=null,T[g]=null,T[y]=null,H(he)),void(T[M]=he)}var Ce=T[g];null!==Ce&&(T[N]=null,T[g]=null,T[y]=null,Ce(R(void 0,!0))),T[j]=!0}),v.on("readable",ae.bind(null,T)),T}},2998:(te,J,m)=>{"use strict";function E(ae,Y){var re=Object.keys(ae);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(ae);Y&&(ne=ne.filter(function(W){return Object.getOwnPropertyDescriptor(ae,W).enumerable})),re.push.apply(re,ne)}return re}function b(ae){for(var Y=1;Y<arguments.length;Y++){var re=null!=arguments[Y]?arguments[Y]:{};Y%2?E(Object(re),!0).forEach(function(ne){D(ae,ne,re[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(re)):E(Object(re)).forEach(function(ne){Object.defineProperty(ae,ne,Object.getOwnPropertyDescriptor(re,ne))})}return ae}function D(ae,Y,re){return(Y=y(Y))in ae?Object.defineProperty(ae,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):ae[Y]=re,ae}function k(ae,Y){for(var re=0;re<Y.length;re++){var ne=Y[re];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ae,y(ne.key),ne)}}function y(ae){var Y=function M(ae,Y){if("object"!=typeof ae||null===ae)return ae;var re=ae[Symbol.toPrimitive];if(void 0!==re){var ne=re.call(ae,Y||"default");if("object"!=typeof ne)return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(ae)}(ae,"string");return"symbol"==typeof Y?Y:String(Y)}var N=m(9007).Buffer,ce=m(9862).inspect,R=ce&&ce.custom||"inspect";function $(ae,Y,re){N.prototype.copy.call(ae,Y,re)}te.exports=function(){function ae(){(function A(ae,Y){if(!(ae instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,ae),this.head=null,this.tail=null,this.length=0}return function g(ae,Y,re){Y&&k(ae.prototype,Y),re&&k(ae,re),Object.defineProperty(ae,"prototype",{writable:!1})}(ae,[{key:"push",value:function(re){var ne={data:re,next:null};this.length>0?this.tail.next=ne:this.head=ne,this.tail=ne,++this.length}},{key:"unshift",value:function(re){var ne={data:re,next:this.head};0===this.length&&(this.tail=ne),this.head=ne,++this.length}},{key:"shift",value:function(){if(0!==this.length){var re=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,re}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(re){if(0===this.length)return"";for(var ne=this.head,W=""+ne.data;ne=ne.next;)W+=re+ne.data;return W}},{key:"concat",value:function(re){if(0===this.length)return N.alloc(0);for(var ne=N.allocUnsafe(re>>>0),W=this.head,z=0;W;)$(W.data,ne,z),z+=W.data.length,W=W.next;return ne}},{key:"consume",value:function(re,ne){var W;return re<this.head.data.length?(W=this.head.data.slice(0,re),this.head.data=this.head.data.slice(re)):W=re===this.head.data.length?this.shift():ne?this._getString(re):this._getBuffer(re),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(re){var ne=this.head,W=1,z=ne.data;for(re-=z.length;ne=ne.next;){var v=ne.data,L=re>v.length?v.length:re;if(z+=L===v.length?v:v.slice(0,re),0==(re-=L)){L===v.length?(++W,this.head=ne.next?ne.next:this.tail=null):(this.head=ne,ne.data=v.slice(L));break}++W}return this.length-=W,z}},{key:"_getBuffer",value:function(re){var ne=N.allocUnsafe(re),W=this.head,z=1;for(W.data.copy(ne),re-=W.data.length;W=W.next;){var v=W.data,L=re>v.length?v.length:re;if(v.copy(ne,ne.length-re,0,L),0==(re-=L)){L===v.length?(++z,this.head=W.next?W.next:this.tail=null):(this.head=W,W.data=v.slice(L));break}++z}return this.length-=z,ne}},{key:R,value:function(re,ne){return ce(this,b(b({},ne),{},{depth:0,customInspect:!1}))}}]),ae}()},3992:te=>{"use strict";function m(k,g){D(k,g),E(k)}function E(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function D(k,g){k.emit("error",g)}te.exports={destroy:function J(k,g){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(g?g(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(D,this,k)):process.nextTick(D,this,k)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(k||null,function(N){!g&&N?y._writableState?y._writableState.errorEmitted?process.nextTick(E,y):(y._writableState.errorEmitted=!0,process.nextTick(m,y,N)):process.nextTick(m,y,N):g?(process.nextTick(E,y),g(N)):process.nextTick(E,y)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function A(k,g){var y=k._readableState,M=k._writableState;y&&y.autoDestroy||M&&M.autoDestroy?k.destroy(g):k.emit("error",g)}}},1227:(te,J,m)=>{"use strict";var E=m(9555).q.ERR_STREAM_PREMATURE_CLOSE;function D(){}te.exports=function k(g,y,M){if("function"==typeof y)return k(g,null,y);y||(y={}),M=function b(g){var y=!1;return function(){if(!y){y=!0;for(var M=arguments.length,j=new Array(M),N=0;N<M;N++)j[N]=arguments[N];g.apply(this,j)}}}(M||D);var j=y.readable||!1!==y.readable&&g.readable,N=y.writable||!1!==y.writable&&g.writable,U=function(){g.writable||R()},ce=g._writableState&&g._writableState.finished,R=function(){N=!1,ce=!0,j||M.call(g)},$=g._readableState&&g._readableState.endEmitted,ae=function(){j=!1,$=!0,N||M.call(g)},Y=function(z){M.call(g,z)},re=function(){var z;return j&&!$?((!g._readableState||!g._readableState.ended)&&(z=new E),M.call(g,z)):N&&!ce?((!g._writableState||!g._writableState.ended)&&(z=new E),M.call(g,z)):void 0},ne=function(){g.req.on("finish",R)};return function A(g){return g.setHeader&&"function"==typeof g.abort}(g)?(g.on("complete",R),g.on("abort",re),g.req?ne():g.on("request",ne)):N&&!g._writableState&&(g.on("end",U),g.on("close",U)),g.on("end",ae),g.on("finish",R),!1!==y.error&&g.on("error",Y),g.on("close",re),function(){g.removeListener("complete",R),g.removeListener("abort",re),g.removeListener("request",ne),g.req&&g.req.removeListener("finish",R),g.removeListener("end",U),g.removeListener("close",U),g.removeListener("finish",R),g.removeListener("end",ae),g.removeListener("error",Y),g.removeListener("close",re)}}},5374:te=>{te.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(te,J,m)=>{"use strict";var E,D=m(9555).q,A=D.ERR_MISSING_ARGS,k=D.ERR_STREAM_DESTROYED;function g(R){if(R)throw R}function j(R){R()}function N(R,$){return R.pipe($)}te.exports=function ce(){for(var R=arguments.length,$=new Array(R),ae=0;ae<R;ae++)$[ae]=arguments[ae];var Y=function U(R){return R.length&&"function"==typeof R[R.length-1]?R.pop():g}($);if(Array.isArray($[0])&&($=$[0]),$.length<2)throw new A("streams");var re,ne=$.map(function(W,z){var v=z<$.length-1;return function M(R,$,ae,Y){Y=function b(R){var $=!1;return function(){$||($=!0,R.apply(void 0,arguments))}}(Y);var re=!1;R.on("close",function(){re=!0}),void 0===E&&(E=m(1227)),E(R,{readable:$,writable:ae},function(W){if(W)return Y(W);re=!0,Y()});var ne=!1;return function(W){if(!re&&!ne){if(ne=!0,function y(R){return R.setHeader&&"function"==typeof R.abort}(R))return R.abort();if("function"==typeof R.destroy)return R.destroy();Y(W||new k("pipe"))}}}(W,v,z>0,function(T){re||(re=T),T&&ne.forEach(j),!v&&(ne.forEach(j),Y(re))})});return $.reduce(N)}},4962:(te,J,m)=>{"use strict";var E=m(9555).q.ERR_INVALID_OPT_VALUE;te.exports={getHighWaterMark:function D(A,k,g,y){var M=function b(A,k,g){return null!=A.highWaterMark?A.highWaterMark:k?A[g]:null}(k,y,g);if(null!=M){if(!isFinite(M)||Math.floor(M)!==M||M<0)throw new E(y?g:"highWaterMark",M);return Math.floor(M)}return A.objectMode?16:16384}}},3951:(te,J,m)=>{te.exports=m(2016).EventEmitter},2024:(te,J,m)=>{"use strict";var E=m(4282).Buffer,b=E.isEncoding||function(ne){switch((ne=""+ne)&&ne.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(ne){var W;switch(this.encoding=function A(ne){var W=function D(ne){if(!ne)return"utf8";for(var W;;)switch(ne){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ne;default:if(W)return;ne=(""+ne).toLowerCase(),W=!0}}(ne);if("string"!=typeof W&&(E.isEncoding===b||!b(ne)))throw new Error("Unknown encoding: "+ne);return W||ne}(ne),this.encoding){case"utf16le":this.text=ce,this.end=R,W=4;break;case"utf8":this.fillLast=j,W=4;break;case"base64":this.text=$,this.end=ae,W=3;break;default:return this.write=Y,void(this.end=re)}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe(W)}function g(ne){return ne<=127?0:ne>>5==6?2:ne>>4==14?3:ne>>3==30?4:ne>>6==2?-1:-2}function j(ne){var W=this.lastTotal-this.lastNeed,z=function M(ne,W,z){if(128!=(192&W[0]))return ne.lastNeed=0,"\ufffd";if(ne.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return ne.lastNeed=1,"\ufffd";if(ne.lastNeed>2&&W.length>2&&128!=(192&W[2]))return ne.lastNeed=2,"\ufffd"}}(this,ne);return void 0!==z?z:this.lastNeed<=ne.length?(ne.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ne.copy(this.lastChar,W,0,ne.length),void(this.lastNeed-=ne.length))}function ce(ne,W){if((ne.length-W)%2==0){var z=ne.toString("utf16le",W);if(z){var v=z.charCodeAt(z.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ne[ne.length-1],ne.toString("utf16le",W,ne.length-1)}function R(ne){var W=ne&&ne.length?this.write(ne):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function $(ne,W){var z=(ne.length-W)%3;return 0===z?ne.toString("base64",W):(this.lastNeed=3-z,this.lastTotal=3,1===z?this.lastChar[0]=ne[ne.length-1]:(this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1]),ne.toString("base64",W,ne.length-z))}function ae(ne){var W=ne&&ne.length?this.write(ne):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function Y(ne){return ne.toString(this.encoding)}function re(ne){return ne&&ne.length?this.write(ne):""}J.StringDecoder=k,k.prototype.write=function(ne){if(0===ne.length)return"";var W,z;if(this.lastNeed){if(void 0===(W=this.fillLast(ne)))return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<ne.length?W?W+this.text(ne,z):this.text(ne,z):W||""},k.prototype.end=function U(ne){var W=ne&&ne.length?this.write(ne):"";return this.lastNeed?W+"\ufffd":W},k.prototype.text=function N(ne,W){var z=function y(ne,W,z){var v=W.length-1;if(v<z)return 0;var L=g(W[v]);return L>=0?(L>0&&(ne.lastNeed=L-1),L):--v<z||-2===L?0:(L=g(W[v]))>=0?(L>0&&(ne.lastNeed=L-2),L):--v<z||-2===L?0:(L=g(W[v]))>=0?(L>0&&(2===L?L=0:ne.lastNeed=L-3),L):0}(this,ne,W);if(!this.lastNeed)return ne.toString("utf8",W);this.lastTotal=z;var v=ne.length-(z-this.lastNeed);return ne.copy(this.lastChar,0,v),ne.toString("utf8",W,v)},k.prototype.fillLast=function(ne){if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ne.length),this.lastNeed-=ne.length}},4282:(te,J,m)=>{var E=m(9007),b=E.Buffer;function D(k,g){for(var y in k)g[y]=k[y]}function A(k,g,y){return b(k,g,y)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?te.exports=E:(D(E,J),J.Buffer=A),A.prototype=Object.create(b.prototype),D(b,A),A.from=function(k,g,y){if("number"==typeof k)throw new TypeError("Argument must not be a number");return b(k,g,y)},A.alloc=function(k,g,y){if("number"!=typeof k)throw new TypeError("Argument must be a number");var M=b(k);return void 0!==g?"string"==typeof y?M.fill(g,y):M.fill(g):M.fill(0),M},A.allocUnsafe=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return b(k)},A.allocUnsafeSlow=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return E.SlowBuffer(k)}},496:te=>{function m(E){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[E];return null!=b&&"true"===String(b).toLowerCase()}te.exports=function J(E,b){if(m("noDeprecation"))return E;var D=!1;return function A(){if(!D){if(m("throwDeprecation"))throw new Error(b);m("traceDeprecation")?console.trace(b):console.warn(b),D=!0}return E.apply(this,arguments)}}},1171:te=>{"use strict";te.exports=function(J){J.prototype[Symbol.iterator]=function*(){for(let m=this.head;m;m=m.next)yield m.value}}},4439:(te,J,m)=>{"use strict";function E(g){var y=this;if(y instanceof E||(y=new E),y.tail=null,y.head=null,y.length=0,g&&"function"==typeof g.forEach)g.forEach(function(N){y.push(N)});else if(arguments.length>0)for(var M=0,j=arguments.length;M<j;M++)y.push(arguments[M]);return y}function b(g,y,M){var j=y===g.head?new k(M,null,y,g):new k(M,y,y.next,g);return null===j.next&&(g.tail=j),null===j.prev&&(g.head=j),g.length++,j}function D(g,y){g.tail=new k(y,g.tail,null,g),g.head||(g.head=g.tail),g.length++}function A(g,y){g.head=new k(y,null,g.head,g),g.tail||(g.tail=g.head),g.length++}function k(g,y,M,j){if(!(this instanceof k))return new k(g,y,M,j);this.list=j,this.value=g,y?(y.next=this,this.prev=y):this.prev=null,M?(M.prev=this,this.next=M):this.next=null}te.exports=E,E.Node=k,E.create=E,E.prototype.removeNode=function(g){if(g.list!==this)throw new Error("removing node which does not belong to this list");var y=g.next,M=g.prev;return y&&(y.prev=M),M&&(M.next=y),g===this.head&&(this.head=y),g===this.tail&&(this.tail=M),g.list.length--,g.next=null,g.prev=null,g.list=null,y},E.prototype.unshiftNode=function(g){if(g!==this.head){g.list&&g.list.removeNode(g);var y=this.head;g.list=this,g.next=y,y&&(y.prev=g),this.head=g,this.tail||(this.tail=g),this.length++}},E.prototype.pushNode=function(g){if(g!==this.tail){g.list&&g.list.removeNode(g);var y=this.tail;g.list=this,g.prev=y,y&&(y.next=g),this.tail=g,this.head||(this.head=g),this.length++}},E.prototype.push=function(){for(var g=0,y=arguments.length;g<y;g++)D(this,arguments[g]);return this.length},E.prototype.unshift=function(){for(var g=0,y=arguments.length;g<y;g++)A(this,arguments[g]);return this.length},E.prototype.pop=function(){if(this.tail){var g=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,g}},E.prototype.shift=function(){if(this.head){var g=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,g}},E.prototype.forEach=function(g,y){y=y||this;for(var M=this.head,j=0;null!==M;j++)g.call(y,M.value,j,this),M=M.next},E.prototype.forEachReverse=function(g,y){y=y||this;for(var M=this.tail,j=this.length-1;null!==M;j--)g.call(y,M.value,j,this),M=M.prev},E.prototype.get=function(g){for(var y=0,M=this.head;null!==M&&y<g;y++)M=M.next;if(y===g&&null!==M)return M.value},E.prototype.getReverse=function(g){for(var y=0,M=this.tail;null!==M&&y<g;y++)M=M.prev;if(y===g&&null!==M)return M.value},E.prototype.map=function(g,y){y=y||this;for(var M=new E,j=this.head;null!==j;)M.push(g.call(y,j.value,this)),j=j.next;return M},E.prototype.mapReverse=function(g,y){y=y||this;for(var M=new E,j=this.tail;null!==j;)M.push(g.call(y,j.value,this)),j=j.prev;return M},E.prototype.reduce=function(g,y){var M,j=this.head;if(arguments.length>1)M=y;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");j=this.head.next,M=this.head.value}for(var N=0;null!==j;N++)M=g(M,j.value,N),j=j.next;return M},E.prototype.reduceReverse=function(g,y){var M,j=this.tail;if(arguments.length>1)M=y;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");j=this.tail.prev,M=this.tail.value}for(var N=this.length-1;null!==j;N--)M=g(M,j.value,N),j=j.prev;return M},E.prototype.toArray=function(){for(var g=new Array(this.length),y=0,M=this.head;null!==M;y++)g[y]=M.value,M=M.next;return g},E.prototype.toArrayReverse=function(){for(var g=new Array(this.length),y=0,M=this.tail;null!==M;y++)g[y]=M.value,M=M.prev;return g},E.prototype.slice=function(g,y){(y=y||this.length)<0&&(y+=this.length),(g=g||0)<0&&(g+=this.length);var M=new E;if(y<g||y<0)return M;g<0&&(g=0),y>this.length&&(y=this.length);for(var j=0,N=this.head;null!==N&&j<g;j++)N=N.next;for(;null!==N&&j<y;j++,N=N.next)M.push(N.value);return M},E.prototype.sliceReverse=function(g,y){(y=y||this.length)<0&&(y+=this.length),(g=g||0)<0&&(g+=this.length);var M=new E;if(y<g||y<0)return M;g<0&&(g=0),y>this.length&&(y=this.length);for(var j=this.length,N=this.tail;null!==N&&j>y;j--)N=N.prev;for(;null!==N&&j>g;j--,N=N.prev)M.push(N.value);return M},E.prototype.splice=function(g,y,...M){g>this.length&&(g=this.length-1),g<0&&(g=this.length+g);for(var j=0,N=this.head;null!==N&&j<g;j++)N=N.next;var U=[];for(j=0;N&&j<y;j++)U.push(N.value),N=this.removeNode(N);for(null===N&&(N=this.tail),N!==this.head&&N!==this.tail&&(N=N.prev),j=0;j<M.length;j++)N=b(this,N,M[j]);return U},E.prototype.reverse=function(){for(var g=this.head,y=this.tail,M=g;null!==M;M=M.prev){var j=M.prev;M.prev=M.next,M.next=j}return this.head=y,this.tail=g,this};try{m(1171)(E)}catch{}},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(te,J,m)=>{var E=m(3801);function b(D){var A,k;function g(M,j){try{var N=D[M](j),U=N.value,ce=U instanceof E;Promise.resolve(ce?U.v:U).then(function(R){if(ce){var $="return"===M?"return":"next";if(!U.k||R.done)return g($,R);R=D[$](R).value}y(N.done?"return":"normal",R)},function(R){g("throw",R)})}catch(R){y("throw",R)}}function y(M,j){switch(M){case"return":A.resolve({value:j,done:!0});break;case"throw":A.reject(j);break;default:A.resolve({value:j,done:!1})}(A=A.next)?g(A.key,A.arg):k=null}this._invoke=function(M,j){return new Promise(function(N,U){var ce={key:M,arg:j,resolve:N,reject:U,next:null};k?k=k.next=ce:(A=k=ce,g(M,j))})},"function"!=typeof D.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(D){return this._invoke("next",D)},b.prototype.throw=function(D){return this._invoke("throw",D)},b.prototype.return=function(D){return this._invoke("return",D)},te.exports=b,te.exports.__esModule=!0,te.exports.default=te.exports},3801:te=>{te.exports=function J(m,E){this.v=m,this.k=E},te.exports.__esModule=!0,te.exports.default=te.exports},8131:(te,J,m)=>{var E=m(3801);te.exports=function b(D){var A={},k=!1;function g(y,M){return k=!0,M=new Promise(function(j){j(D[y](M))}),{done:!1,value:new E(M,1)}}return A[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},A.next=function(y){return k?(k=!1,y):g("next",y)},"function"==typeof D.throw&&(A.throw=function(y){if(k)throw k=!1,y;return g("throw",y)}),"function"==typeof D.return&&(A.return=function(y){return k?(k=!1,y):g("return",y)}),A},te.exports.__esModule=!0,te.exports.default=te.exports},8237:te=>{function m(E){function b(D){if(Object(D)!==D)return Promise.reject(new TypeError(D+" is not an object."));var A=D.done;return Promise.resolve(D.value).then(function(k){return{value:k,done:A}})}return(m=function(A){this.s=A,this.n=A.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(A){var k=this.s.return;return void 0===k?Promise.resolve({value:A,done:!0}):b(k.apply(this.s,arguments))},throw:function(A){var k=this.s.return;return void 0===k?Promise.reject(A):b(k.apply(this.s,arguments))}},new m(E)}te.exports=function J(E){var b,D,A,k=2;for(typeof Symbol<"u"&&(D=Symbol.asyncIterator,A=Symbol.iterator);k--;){if(D&&null!=(b=E[D]))return b.call(E);if(A&&null!=(b=E[A]))return new m(b.call(E));D="@@asyncIterator",A="@@iterator"}throw new TypeError("Object is not async iterable")},te.exports.__esModule=!0,te.exports.default=te.exports},7156:te=>{function J(E,b,D,A,k,g,y){try{var M=E[g](y),j=M.value}catch(N){return void D(N)}M.done?b(j):Promise.resolve(j).then(A,k)}te.exports=function m(E){return function(){var b=this,D=arguments;return new Promise(function(A,k){var g=E.apply(b,D);function y(j){J(g,A,k,y,M,"next",j)}function M(j){J(g,A,k,y,M,"throw",j)}y(void 0)})}},te.exports.__esModule=!0,te.exports.default=te.exports},6737:(te,J,m)=>{var E=m(3801);te.exports=function b(D){return new E(D,0)},te.exports.__esModule=!0,te.exports.default=te.exports},8186:(te,J,m)=>{var E=m(4642);te.exports=function b(D){return function(){return new E(D.apply(this,arguments))}},te.exports.__esModule=!0,te.exports.default=te.exports}},te=>{te(te.s=2943)}]);