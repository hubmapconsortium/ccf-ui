<div class="ccf-app mat-app-background">
  <ccf-header [filters]="data.filter$ | async" (logoClicked)="reset(left, right, filterbox, viewer)"></ccf-header>
  <ccf-spinner-overlay text="Loading data" [active]="spinnerActive$ | async"></ccf-spinner-overlay>
  <ccf-image-viewer-popover #viewer></ccf-image-viewer-popover>

  <ccf-drawer-container class="main-drawers">
    <ccf-drawer opened #left (stateChange)="filterbox.removeBox()">
      <ccf-ontology-selection></ccf-ontology-selection>
      <ccf-drawer-toggle-button></ccf-drawer-toggle-button>
    </ccf-drawer>
    <ccf-drawer position="end" opened #right (stateChange)="filterbox.removeBox()">
      <div class="drawer-icons">
        <ccf-filters-popover [filters]="data.filter$ | async" [drawerExpanded]="right.expanded"
                             (filtersChange)="data.updateFilter($event)" #filterbox></ccf-filters-popover>
        <button class="button" (click)="filterbox.removeBox(); right.toggleExpanded();">
          <mat-icon class="icon">{{ right.expanded ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
        </button>
      </div>
      <button (click)="openViewer(viewer, 'https://entity-api.hubmapconsortium.org/entities/003d63df59a4975bbd680a1f6b706d67')">
        Open Tissue Viewer
      </button>
      <ccf-drawer-toggle-button></ccf-drawer-toggle-button>
    </ccf-drawer>
    <ccf-drawer-content>
      <ccf-body-ui></ccf-body-ui>
    </ccf-drawer-content>
  </ccf-drawer-container>
</div>
