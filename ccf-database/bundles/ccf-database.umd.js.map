{"version":3,"file":"ccf-database.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/ccf-database/src/lib/util/n3-functions.ts","../../../projects/ccf-database/src/lib/util/prefixes.ts","../../../projects/ccf-database/src/lib/queries/spatial-result-n3.ts","../../../projects/ccf-database/src/lib/ccf-spatial-graph.ts","../../../projects/ccf-database/src/lib/ccf-spatial-scene.ts","../../../projects/ccf-database/src/lib/hubmap/hubmap-data.ts","../../../projects/ccf-database/src/lib/hubmap/hubmap-data-import.ts","../../../projects/ccf-database/src/lib/queries/aggregate-results-n3.ts","../../../projects/ccf-database/src/lib/queries/spatial-search-n3.ts","../../../projects/ccf-database/src/lib/queries/find-ids-n3.ts","../../../projects/ccf-database/src/lib/queries/ontology-term-occurences-n3.ts","../../../projects/ccf-database/src/lib/queries/ontology-tree-n3.ts","../../../projects/ccf-database/src/lib/queries/tissue-block-result-n3.ts","../../../projects/ccf-database/src/lib/util/ccf-database-status-tracker.ts","../../../projects/ccf-database/src/lib/util/patch-jsonld.ts","../../../projects/ccf-database/src/lib/util/enrich-rui-locations.ts","../../../projects/ccf-database/src/lib/ccf-database.ts","../../../projects/ccf-database/src/lib/util/probing-sphere-scene.ts","../../../projects/ccf-database/src/lib/util/origin-scene.ts","../../../projects/ccf-database/src/public-api.ts","../../../projects/ccf-database/src/ccf-database.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { fromRdf } from 'rdf-literal';\nimport { Store, readQuads } from 'triple-store-utils';\n\n\n/**\n * Iterates over the key/value pairs for an IRI, using the specified mapping with quads from the store.\n *\n * @param store The triple store.\n * @param iri The data identifier.\n * @param mapping Property mappings.\n * @returns an iterator over the key/value pairs\n */\nexport function* getEntries(store: Store, iri: string, mapping: { [iri: string]: string }): Generator<[ string, string|number ]> {\n  for (const [predicate, key] of Object.entries(mapping)) {\n    for (const quad of readQuads(store, iri, predicate, null, null)) {\n      const value = quad.object.termType === 'Literal' ? fromRdf(quad.object) : quad.object.id;\n      yield [key, value];\n    }\n  }\n}\n\n/**\n * Creates an object of the specified type using quads from the store.\n *\n * @param store The triple store.\n * @param iri The data identifier.\n * @param type Type name.\n * @param mapping Property mappings.\n * @returns A new data object.\n */\nexport function getMappedResult<T = unknown>(store: Store, iri: string, type: string, mapping: { [iri: string]: string }): T {\n  const result = { '@id': iri, '@type': type };\n  for (const [predicate, key] of Object.entries(mapping)) {\n    for (const quad of readQuads(store, result['@id'], predicate, null, null)) {\n      const value = quad.object.termType === 'Literal' ? fromRdf(quad.object) : quad.object.id;\n      result[key] = value;\n    }\n  }\n  return result as unknown as T;\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { DataFactory, Util } from 'triple-store-utils';\n\n/** Constants used to create entity accessors. */\nexport const PREFIXES = {\n  base: 'http://purl.org/ccf/latest/ccf.owl#',\n  ccf: 'http://purl.org/ccf/',\n  fma: 'http://purl.org/sig/ont/fma/fma',\n  obo: 'http://purl.obolibrary.org/obo/',\n  uberon: 'http://purl.obolibrary.org/obo/UBERON_',\n  cl: 'http://purl.obolibrary.org/obo/CL_',\n  lmha: 'http://purl.obolibrary.org/obo/LMHA_',\n  rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n  rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n  dc: 'http://purl.org/dc/elements/1.1/',\n  dcterms: 'http://purl.org/dc/terms/'\n};\n\n/** Prefix factory. */\nexport const prefixer = Util.prefixes(PREFIXES, DataFactory);\n\nexport const rdf = {\n  x: prefixer('rdf'),\n  type: prefixer('rdf')('type')\n};\n\nexport const rdfs = {\n  x: prefixer('rdfs'),\n  label: prefixer('rdfs')('label'),\n  comment: prefixer('rdfs')('comment'),\n  isDefinedBy: prefixer('rdfs')('isDefinedBy'),\n  seeAlso: prefixer('rdfs')('seeAlso')\n};\n\n/** CCF id helper. */\nconst ccfx = prefixer('ccf');\n\n/** Common entity ids. */\nexport const entity = {\n  id: prefixer('ccf')('has_registration_location'),\n  label: prefixer('rdfs')('label'),\n  description: prefixer('rdfs')('comment'),\n  link: ccfx('url'),\n\n  sex: ccfx('sex'),\n  age: ccfx('age'),\n  bmi: ccfx('bmi'),\n\n  Male: DataFactory.literal('Male'),\n  Female: DataFactory.literal('Female'),\n\n  consortiumName: ccfx('consortium_name'),\n  providerName: ccfx('tissue_provider_name'),\n  providerUUID: ccfx('tissue_provider_uuid'),\n\n  donor: ccfx('comes_from'),\n\n  sections: ccfx('subdivided_into_sections'),\n  datasets: ccfx('generates_dataset'),\n\n  sampleType: ccfx('sample_type'),\n\n  TissueBlock: DataFactory.literal('Tissue Block'),\n  TissueSection: DataFactory.literal('Tissue Section'),\n  NonStandard: DataFactory.literal('Non-standard'),\n\n  sectionCount: ccfx('section_count'),\n  sectionSize: ccfx('section_size'),\n  sectionUnits: ccfx('section_size_unit'),\n  sectionNumber: ccfx('section_number'),\n\n  spatialEntity: ccfx('has_registration_location'),\n  ontologyTerms: ccfx('has_ontology_term'),\n  cellTypeTerms: ccfx('has_cell_type_term'),\n\n  technology: ccfx('technology'),\n  thumbnail: ccfx('thumbnail')\n};\n\n/** CCF specific ids. */\nexport const ccf = {\n  x: ccfx,\n  base: prefixer('base'),\n  ontologyNode: {\n    label: ccfx('ccf_pref_label'),\n    parent: ccfx('ccf_part_of'),\n    children: ccfx('ccf_part_of'),\n    rui_rank: ccfx('rui_rank'),\n    synonymLabels: DataFactory.namedNode('http://www.geneontology.org/formats/oboInOwl#hasExactSynonym')\n  },\n  asctb: {\n    part_of: ccfx('ccf_part_of'),\n    ct_is_a: ccfx('ccf_ct_isa'),\n    located_in: ccfx('ccf_located_in'),\n    characterizes: ccfx('ccf_characterizes')\n  },\n  spatial: {\n    Female: prefixer('base')('VHFemale'),\n    Male: prefixer('base')('VHMale'),\n    BothSexes: prefixer('base')('VHBothSexes'),\n    FemaleOrgans: prefixer('base')('VHFemaleOrgans'),\n    MaleOrgans: prefixer('base')('VHMaleOrgans')\n  },\n  SpatialObjectReference: ccfx('spatial_object_reference'),\n  SpatialEntity: ccfx('spatial_entity'),\n  SpatialPlacement: ccfx('spatial_placement'),\n  spatialObjectReference: {\n    file: ccfx('file_url'),\n    file_format: ccfx('file_format'),\n    file_subpath: ccfx('file_subpath')\n  },\n  extractionSet: {\n    label: prefixer('rdfs')('label'),\n    rui_rank: ccfx('rui_rank')\n  },\n  spatialEntity: {\n    label: prefixer('rdfs')('label'),\n    description: prefixer('rdfs')('comment'),\n    creator: prefixer('dcterms')('creator'),\n    creator_first_name: ccfx('creator_first_name'),\n    creator_last_name: ccfx('creator_last_name'),\n    creator_orcid: ccfx('creator_orcid'),\n    creation_date: prefixer('dcterms')('created'),\n    updated_date: ccfx('updated_date'),\n    ccf_annotations: ccfx('collides_with'),\n    representation_of: ccfx('representation_of'),\n    reference_organ: ccfx('has_reference_organ'),\n    extraction_set_for: ccfx('extraction_set_for'),\n    extraction_set: ccfx('has_extraction_set'),\n    sex: ccfx('organ_owner_sex'),\n    side: ccfx('organ_side'),\n    rui_rank: ccfx('rui_rank'),\n    slice_thickness: ccfx('slice_thickness'),\n    slice_count: ccfx('slice_count'),\n    x_dimension: ccfx('x_dimension'),\n    y_dimension: ccfx('y_dimension'),\n    z_dimension: ccfx('z_dimension'),\n    dimension_units: ccfx('dimension_unit'),\n    object: ccfx('has_object_reference')\n  },\n  spatialPlacement: {\n    source: ccfx('placement_for'),\n    target: ccfx('placement_relative_to'),\n\n    placement_date: prefixer('dcterms')('created'),\n    x_scaling: ccfx('x_scaling'),\n    y_scaling: ccfx('y_scaling'),\n    z_scaling: ccfx('z_scaling'),\n    scaling_units: ccfx('scaling_unit'),\n\n    x_rotation: ccfx('x_rotation'),\n    y_rotation: ccfx('y_rotation'),\n    z_rotation: ccfx('z_rotation'),\n    w_rotation: ccfx('theta_rotation'),\n    rotation_order: ccfx('rotation_order'),\n    rotation_units: ccfx('rotation_unit'),\n\n    x_translation: ccfx('x_translation'),\n    y_translation: ccfx('y_translation'),\n    z_translation: ccfx('z_translation'),\n    translation_units: ccfx('translation_unit')\n  }\n};\n\n/** Uberon specific ids. */\nexport const uberon = {\n  x: prefixer('uberon'),\n  body: prefixer('uberon')('0013702')\n};\n\n/** CL specific ids. */\nexport const cl = {\n  x: prefixer('cl'),\n  cell: prefixer('cl')('0000000')\n};\n\n/** FMA specific ids. */\nexport const fma = {\n  x: prefixer('fma')\n};\n\n/** LMHA specific ids. */\nexport const lmha = {\n  x: prefixer('lmha')\n};\n\n/** RUI accessors. */\nexport const rui = {\n  body: uberon.body,\n  cell: cl.cell,\n  respiratory_system: uberon.x('0001004'),\n  colon: uberon.x('0001155'),\n  left_lung: uberon.x('0002168'),\n  right_lung: uberon.x('0002167'),\n  left_bronchus: uberon.x('0002178'),\n  right_bronchus: uberon.x('0002177'),\n  kidney: uberon.x('0002113'),\n  ureter: uberon.x('0000056'),\n  eye: uberon.x('0000970'),\n  fallopian_tube: uberon.x('0003889'),\n  knee: uberon.x('0001465'),\n  ovary: uberon.x('0000992'),\n  trachea: uberon.x('0003126'),\n  aorta: uberon.x('0000947'),\n  blood: uberon.x('0000178'),\n  bone_marrow: uberon.x('0002371'),\n  male_reproductive_system: uberon.x('0000079'),\n  lymph_node: uberon.x('0000029'),\n\n  // Derived using console.log(ALL_POSSIBLE_ORGANS.map(o => `  ${o.name.toLowerCase().replace(',', '').replace(/ /g, '_')}: ${o.id.split('/').slice(-1)[0].split('_')[0].toLowerCase()}.x('${o.id.split('_').slice(-1)[0]}'),`).join('\\n'));\n  blood_vasculature: uberon.x('0004537'),\n  brain: uberon.x('0000955'),\n  eye_left: uberon.x('0004548'),\n  eye_right: fma.x('54449'),\n  fallopian_tube_left: uberon.x('0001303'),\n  fallopian_tube_right: uberon.x('0001302'),\n  heart: uberon.x('0000948'),\n  kidney_left: uberon.x('0004538'),\n  kidney_right: uberon.x('0004539'),\n  knee_left: fma.x('24978'),\n  knee_right: fma.x('24977'),\n  large_intestine: uberon.x('0000059'),\n  liver: uberon.x('0002107'),\n  lungs: uberon.x('0002048'),\n  mesenteric_lymph_node: uberon.x('0002509'),\n  ovary_left: fma.x('7214'),\n  ovary_right: fma.x('7213'),\n  pancreas: uberon.x('0001264'),\n  pelvis: uberon.x('0001270'),\n  prostate_gland: uberon.x('0002367'),\n  skin: uberon.x('0002097'),\n  small_intestine: uberon.x('0002108'),\n  spleen: uberon.x('0002106'),\n  thymus: uberon.x('0002370'),\n  ureter_left: uberon.x('0001223'),\n  ureter_right: uberon.x('0001222'),\n  urinary_bladder: uberon.x('0001255'),\n  uterus: uberon.x('0000995')\n};\n","import { sortBy } from 'lodash';\nimport { DataFactory, NamedNode, Store } from 'triple-store-utils';\n\nimport { SpatialEntity, SpatialObjectReference, SpatialPlacement, ExtractionSet } from '../spatial-types';\nimport { getMappedResult } from '../util/n3-functions';\nimport { ccf, entity } from '../util/prefixes';\n\n\n/**\n * Reverses the keys and values in a mapping.\n *\n * @param mapping The mapping to reverse.\n * @returns The reversed mapping.\n */\nfunction reverseMapping(mapping: { [property: string]: NamedNode }): { [iri: string]: string } {\n  const newMapping: { [iri: string]: string } = {};\n  Object.entries(mapping).forEach(([prop, predicate]) => {\n    newMapping[predicate.id] = prop;\n  });\n  return newMapping;\n}\n\n/** A mapping of spatial objects. */\nconst mappings = {\n  spatialObjectReference: reverseMapping(ccf.spatialObjectReference),\n  spatialEntity: reverseMapping(ccf.spatialEntity),\n  spatialPlacement: reverseMapping(ccf.spatialPlacement)\n};\n\n/**\n * Creates a spatial object reference.\n *\n * @param store The triple store.\n * @param iri The data identifier.\n * @returns The new reference.\n */\nexport function getSpatialObjectReference(store: Store, iri: string): SpatialObjectReference {\n  return getMappedResult<SpatialObjectReference>(store, iri, 'SpatialObjectReference', mappings.spatialObjectReference);\n}\n\n/**\n * Creates an extraction set data object.\n *\n * @param store The triple store.\n * @param iri The data identifier.\n * @returns The new entity.\n */\nexport function getExtractionSet(store: Store, iri: string): ExtractionSet {\n  const result = getMappedResult<ExtractionSet>(store, iri, 'ExtractionSet', mappings.spatialEntity);\n  result.extractionSites = sortBy(\n    store.getSubjects(ccf.spatialEntity.extraction_set, iri, null)\n      .map((value) => getSpatialEntity(store, value.id)),\n    ['rui_rank']);\n  return result;\n}\n\n/**\n * Gets extraction sets associated with a reference organ\n *\n * @param store The triple store.\n * @param iri The data identifier (the reference organ).\n * @returns A set of extraction sets associated with the reference organ\n */\nexport function getExtractionSets(store: Store, iri: string): ExtractionSet[] {\n  return sortBy(\n    store.getSubjects(ccf.spatialEntity.extraction_set_for, iri, null)\n      .map((value) => getExtractionSet(store, value.id)),\n    ['rui_rank']\n  );\n}\n\n\n/**\n * Gets the anatomical structures associated with a reference organ.\n *\n * @param store The triple store.\n * @param iri The data identifier (reference organ).\n * @returns The new entity.\n */\nexport function getAnatomicalStructures(store: Store, iri: string): SpatialEntity[] {\n  return sortBy(\n    store.getSubjects(ccf.spatialEntity.reference_organ, iri, null)\n      .map((value) => getSpatialEntity(store, value.id))\n      .filter((e) => e['@id'] !== iri),\n    ['rui_rank']\n  );\n}\n\n/**\n * Gets all reference organs in the triple store\n *\n * @param store The triple store.\n * @returns All the reference organs.\n */\nexport function getReferenceOrgans(store: Store): SpatialEntity[] {\n  const results: SpatialEntity[] = [];\n  store.forEach((quad) => {\n    if (quad.subject.id === quad.object.id) {\n      results.push(getSpatialEntity(store, quad.subject.id));\n    }\n  }, null, ccf.spatialEntity.reference_organ, null, null);\n  return sortBy(results, ['rui_rank']);\n}\n\n/**\n * Creates a spatial entity data object.\n *\n * @param store The triple store.\n * @param iri The data identifier.\n * @returns The new entity.\n */\nexport function getSpatialEntity(store: Store, iri: string): SpatialEntity {\n  const result = getMappedResult<SpatialEntity>(store, iri, 'SpatialEntity', mappings.spatialEntity);\n  // Default mapping will come back as an IRI which we can look up for the full object\n  if (result.object) {\n    result.object = getSpatialObjectReference(store, (result.object as unknown) as string);\n  }\n  if (result.ccf_annotations) {\n    result.ccf_annotations = store.getObjects(iri, ccf.spatialEntity.ccf_annotations, null).map(o => o.id);\n  }\n  store.forSubjects((subject) => (result.entityId = subject.id), entity.spatialEntity, iri, null);\n  return result;\n}\n\n/**\n * Creates a spatial placement object.\n *\n * @param store The triple store.\n * @param iri The data identifier.\n * @returns THe new placement object.\n */\nexport function getSpatialPlacement(store: Store, iri: string): SpatialPlacement {\n  const result = getMappedResult<SpatialPlacement>(store, iri, 'SpatialPlacement', mappings.spatialPlacement);\n  // Default mapping will come back as an IRI for source/target which we can look up for the full object\n  if (result.source) {\n    result.source = getSpatialEntity(store, (result.source as unknown) as string);\n  }\n  if (result.target) {\n    result.target = getSpatialEntity(store, (result.target as unknown) as string);\n  }\n  return result;\n}\n\n/**\n * Creates a spatial entity based on another entity in the store.\n *\n * @param store The triple store.\n * @param entityIRI The indentifier of the store entity.\n * @returns A new entity.\n */\nexport function getSpatialEntityForEntity(store: Store, entityIRI: string): SpatialEntity | undefined {\n  const spatialEntityNodes = store.getObjects(DataFactory.namedNode(entityIRI), entity.spatialEntity, null);\n  if (spatialEntityNodes.length > 0) {\n    return getSpatialEntity(store, spatialEntityNodes[0].id);\n  } else {\n    return undefined;\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { Euler, Matrix4, toDegrees, toRadians } from '@math.gl/core';\nimport { DirectedGraph } from 'graphology';\nimport shortestPath from 'graphology-shortest-path/unweighted';\nimport { get } from 'lodash';\nimport { readQuads } from 'triple-store-utils';\nimport { v4 as uuidV4 } from 'uuid';\n\nimport { CCFDatabase } from './ccf-database';\nimport { getSpatialPlacement } from './queries/spatial-result-n3';\nimport { FlatSpatialPlacement, SpatialEntity, SpatialPlacement } from './spatial-types';\nimport { ccf, rdf } from './util/prefixes';\n\n\nexport function applySpatialPlacement(tx: Matrix4, placement: SpatialPlacement): Matrix4 {\n  const p = placement;\n  let factor: number;\n  switch (p.translation_units) {\n    case 'centimeter':\n      factor = 1 / 100;\n      break;\n    case 'millimeter':\n      factor = 1 / 1000;\n      break;\n    case 'meter':\n    default:\n      factor = 1;\n      break;\n  }\n  const T = [p.x_translation, p.y_translation, p.z_translation].map(t => t * factor);\n  const R = [p.x_rotation, p.y_rotation, p.z_rotation].map<number>(toRadians) as [number, number, number];\n  const S = [p.x_scaling, p.y_scaling, p.z_scaling];\n\n  return tx.translate(T).rotateXYZ(R).scale(S);\n}\n\nexport class CCFSpatialGraph {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  graph: any;\n\n  constructor(private db: CCFDatabase) {\n    this.createGraph();\n  }\n\n  createGraph(): void {\n    this.graph = new DirectedGraph();\n    const store = this.db.store;\n\n    // Add all Spatial Object References\n    store.forSubjects((subject) => {\n      this.addNode(subject.id, 'SpatialObjectReference');\n    }, rdf.type, ccf.SpatialObjectReference, null);\n\n    // Add all Spatial Entities\n    store.forSubjects((subject) => {\n      this.addNode(subject.id, 'SpatialEntity');\n    }, rdf.type, ccf.SpatialEntity, null);\n\n    // Add all Spatial Placements\n    const edgeSource: Record<string, string> = {};\n    for (const quad of readQuads(store, null, ccf.spatialPlacement.source, null, null)) {\n      edgeSource[quad.subject.id] = quad.object.id;\n    }\n    for (const quad of readQuads(store, null, ccf.spatialPlacement.target, null, null)) {\n      const source = edgeSource[quad.subject.id];\n      if (source) {\n        this.addEdge(quad.subject.id, source, quad.object.id, 'SpatialPlacement');\n      }\n    }\n  }\n\n  addNode(id: string, type: string): void {\n    this.graph.mergeNode(id, { type });\n  }\n\n  addEdge(id: string, source: string, target: string, type: string): void {\n    this.graph.mergeDirectedEdge(source, target, { type, id });\n  }\n\n  getTransformationMatrix(sourceIRI: string, targetIRI: string): Matrix4 | undefined {\n    if (sourceIRI === targetIRI) {\n      return new Matrix4(Matrix4.IDENTITY); // identity\n    }\n    if (!this.graph.hasNode(sourceIRI) || !this.graph.hasNode(targetIRI)) {\n      return undefined;\n    }\n\n    const store = this.db.store;\n    const tx = new Matrix4(Matrix4.IDENTITY);\n    const path = shortestPath(this.graph, sourceIRI, targetIRI);\n    if (path && path.length > 0) {\n      path.reverse();\n      let target: string | number = '';\n      for (const source of path) {\n        if (target) {\n          const placementId = this.graph.getEdgeAttribute(source, target, 'id');\n          const placement = getSpatialPlacement(store, placementId);\n          applySpatialPlacement(tx, placement);\n        }\n        target = source;\n      }\n      return tx;\n    } else {\n      return undefined;\n    }\n  }\n\n  getSpatialPlacement(source: SpatialEntity, targetIri: string): FlatSpatialPlacement | undefined {\n    const sourceIri = this.graph.hasNode(source['@id']) ? source['@id'] : undefined;\n    const placement: SpatialPlacement = get(source, 'placement[0]', get(source, 'placement', undefined));\n\n    let matrix: Matrix4 | undefined;\n    if (placement && this.graph.hasNode(placement.target)) {\n      matrix = this.getTransformationMatrix(placement.target as unknown as string, targetIri);\n      if (matrix) {\n        matrix = applySpatialPlacement(matrix, placement);\n      }\n    } else if (sourceIri) {\n      matrix = this.getTransformationMatrix(sourceIri, targetIri);\n    }\n\n    if (matrix) {\n      const euler = new Euler().fromRotationMatrix(matrix, Euler.XYZ);\n      const T = matrix.getTranslation().map(n => n * 1000) as [number, number, number];\n      const R = euler.toVector3().map<number>(toDegrees) as [number, number, number];\n      const S = matrix.getScale().map(n => n < 1 && n > 0.999999 ? 1 : n) as [number, number, number];\n\n      return {\n        '@context': 'https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld',\n        '@id': `http://purl.org/ccf/1.5/${uuidV4()}_placement`,\n        '@type': 'SpatialPlacement',\n        source: source['@id'],\n        target: targetIri,\n        placement_date: new Date().toISOString().split('T')[0],\n        x_scaling: S[0],\n        y_scaling: S[1],\n        z_scaling: S[2],\n        scaling_units: 'ratio',\n        x_rotation: R[0],\n        y_rotation: R[1],\n        z_rotation: R[2],\n        rotation_order: 'XYZ',\n        rotation_units: 'degree',\n        x_translation: T[0],\n        y_translation: T[1],\n        z_translation: T[2],\n        translation_units: 'millimeter'\n      };\n    } else {\n      return undefined;\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { Matrix4, toRadians } from '@math.gl/core';\n\nimport { CCFDatabase } from './ccf-database';\nimport { Filter } from './interfaces';\nimport {\n  getAnatomicalStructures, getExtractionSet, getExtractionSets, getReferenceOrgans, getSpatialEntity,\n} from './queries/spatial-result-n3';\nimport { ExtractionSet, SpatialEntity } from './spatial-types';\nimport { ccf } from './util/prefixes';\n\n\nexport type SpatialSceneGeometry = 'sphere' | 'cube' | 'wireframe' | 'text' | 'cone' | 'cylinder';\n\nexport interface SpatialSceneNode {\n  '@id': string;\n  '@type': string;\n  entityId?: string;\n  ccf_annotations?: string[];\n  representation_of?: string;\n  reference_organ?: string;\n  unpickable?: boolean;\n  geometry?: SpatialSceneGeometry;\n  text?: string;\n  _lighting?: string;\n  scenegraph?: string;\n  scenegraphNode?: string;\n  zoomBasedOpacity?: boolean;\n  zoomToOnLoad?: boolean;\n  color?: [number, number, number, number];\n  opacity?: number;\n  transformMatrix: Matrix4;\n  name?: string;\n  tooltip?: string;\n  priority?: number;\n}\n\nexport class CCFSpatialScene {\n\n  constructor(private db: CCFDatabase) {}\n\n  getSpatialEntity(iri: string): SpatialEntity {\n    return getSpatialEntity(this.db.store, iri);\n  }\n  getExtractionSets(iri: string): ExtractionSet[] {\n    return getExtractionSets(this.db.store, iri);\n  }\n  getExtractionSet(iri: string): ExtractionSet {\n    return getExtractionSet(this.db.store, iri);\n  }\n  getAnatomicalStructures(iri: string): SpatialEntity[] {\n    return getAnatomicalStructures(this.db.store, iri);\n  }\n  getReferenceOrgans(): SpatialEntity[] {\n    return getReferenceOrgans(this.db.store);\n  }\n\n  getReferenceBody(filter?: Filter): SpatialEntity {\n    let bodyId: string;\n    switch (filter?.sex) {\n      case 'Male':\n        bodyId = ccf.spatial.Male.id;\n        break;\n      case 'Female':\n        bodyId = ccf.spatial.Female.id;\n        break;\n      case 'Both':\n      default:\n        bodyId = ccf.spatial.BothSexes.id;\n        break;\n    }\n    return this.getSpatialEntity(bodyId);\n  }\n\n  getReferenceOrganSets(filter?: Filter): SpatialEntity[] {\n    let organSet = this.getReferenceOrgans();\n    switch (filter?.sex) {\n      case 'Male':\n        organSet = organSet.filter(s => s.sex === 'Male');\n        break;\n      case 'Female':\n        organSet = organSet.filter(s => s.sex === 'Female');\n        break;\n      case 'Both':\n      default:\n        break;\n    }\n    if (filter?.debug) {\n      organSet = organSet.map(o => [ [o], this.getAnatomicalStructures(o['@id'])])\n        .reduce<SpatialEntity[]>((acc, [organ, structures]) => acc.concat(structures.length > 0 ? structures : organ), []);\n    }\n    return organSet;\n  }\n\n  getReferenceSceneNodes(filter?: Filter): SpatialSceneNode[] {\n    const body = this.getReferenceBody(filter);\n    const skinNodes: SpatialSceneNode[] = [];\n    let nodes: (SpatialSceneNode | undefined)[] = [\n      ...this.getReferenceOrganSets(filter).map((organ) => {\n        const isSkin = organ.representation_of === 'http://purl.obolibrary.org/obo/UBERON_0002097';\n        const sceneNode = this.getSceneNode(organ, body, {\n          color: [255, 255, 255, 255], opacity: isSkin ? 0.5 : 0.2, unpickable: true, _lighting: 'pbr', zoomBasedOpacity: !isSkin\n        });\n        if (isSkin && sceneNode) {\n          skinNodes.push(sceneNode);\n          return undefined;\n        } else {\n          return sceneNode;\n        }\n      })\n    ];\n    if (skinNodes.length > 0) {\n      nodes = [...skinNodes, ...nodes];\n    }\n\n    if (filter?.debug) {\n      // Debug bounding boxes\n      nodes = nodes.concat([\n        this.getSceneNode(this.getSpatialEntity(ccf.base('VHRightKidney').id), body, { color: [0, 0, 255, 0.5*255], geometry: 'wireframe' }),\n        this.getSceneNode(this.getSpatialEntity(ccf.base('VHLeftKidney').id), body, { color: [255, 0, 0, 0.5*255], geometry: 'wireframe' }),\n        this.getSceneNode(this.getSpatialEntity(ccf.base('VHSpleenCC1').id), body, { color: [0, 255, 0, 0.5*255], geometry: 'wireframe' }),\n        this.getSceneNode(this.getSpatialEntity(ccf.base('VHSpleenCC2').id), body, { color: [0, 255, 0, 0.5*255], geometry: 'wireframe' }),\n        this.getSceneNode(this.getSpatialEntity(ccf.base('VHSpleenCC3').id), body, { color: [0, 255, 0, 0.5*255], geometry: 'wireframe' })\n      ]);\n    }\n\n    return nodes.filter(s => s !== undefined) as SpatialSceneNode[];\n  }\n\n  getReferenceOrganScene(organIri: string, filter?: Filter): SpatialSceneNode[] {\n    const hasSexFilter = filter?.sex !== undefined && filter?.sex?.toLowerCase() !== 'both';\n    const organs = this.getReferenceOrgans().filter((o) => o.representation_of === organIri && (!hasSexFilter || o.sex === filter?.sex));\n    if (organs.length > 0) {\n      const organ = organs[0];\n      const isSkin = organ.representation_of === 'http://purl.obolibrary.org/obo/UBERON_0002097';\n      const organNode = this.getSceneNode(organ, organ, {\n        color: [255, 255, 255, 255], opacity: isSkin ? 0.5 : 0.2, unpickable: true, _lighting: 'pbr'\n      }) as SpatialSceneNode;\n\n      const scene = (this.db.getSpatialEntities(filter) ?? []).map((entity) =>\n        this.getSceneNode(entity, organ, { color: [255, 255, 255, 0.9*255] })\n      ) as SpatialSceneNode[];\n      return [organNode].concat(scene).filter(n => n !== undefined);\n    } else {\n      return [];\n    }\n  }\n\n  getEntitySceneNodes(filter?: Filter): SpatialSceneNode[] {\n    const body = this.getReferenceBody(filter);\n    return this.db.getSpatialEntities(filter).map((entity) =>\n      this.getSceneNode(entity, body, { color: [255, 255, 255, 0.9*255] })\n    ).filter(s => s !== undefined) as SpatialSceneNode[];\n  }\n\n  getSceneNode(source: SpatialEntity, target: SpatialEntity, nodeAttrs: Partial<SpatialSceneNode> = {}): SpatialSceneNode | undefined {\n    const has3dObject = source?.object?.file_format?.startsWith('model/gltf');\n    const sourceID = has3dObject && source.object ? source.object['@id'] : source['@id'];\n    let transform = this.db.graph.getTransformationMatrix(sourceID, target['@id']);\n    if (transform) {\n      if (has3dObject) {\n        transform = new Matrix4(Matrix4.IDENTITY).rotateX(toRadians(90)).multiplyLeft(transform);\n      } else {\n        // Scale visible bounding boxes to the desired dimensions\n        let factor: number;\n        switch (source.dimension_units) {\n          case 'centimeter':\n            factor = 1 / 100;\n            break;\n          case 'millimeter':\n            factor = 1 / 1000;\n            break;\n          case 'meter':\n          default:\n            factor = 1;\n            break;\n        }\n        const scale = [source.x_dimension, source.y_dimension, source.z_dimension].map(dim => dim * factor / 2);\n        transform.scale(scale);\n      }\n      return {\n        '@id': source['@id'], '@type': 'SpatialSceneNode',\n        entityId: source.entityId,\n        ccf_annotations: source.ccf_annotations,\n        representation_of: source.representation_of,\n        reference_organ: source.reference_organ,\n        scenegraph: has3dObject ? source.object?.file : undefined,\n        scenegraphNode: has3dObject ? source.object?.file_subpath : undefined,\n        transformMatrix: transform,\n        tooltip: source.label,\n        ...nodeAttrs\n      };\n    } else {\n      return undefined;\n    }\n  }\n\n  getScene(filter?: Filter): SpatialSceneNode[] {\n    return [\n      ...this.getReferenceSceneNodes(filter),\n      ...this.getEntitySceneNodes(filter)\n    ];\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { JsonLd, JsonLdObj } from 'jsonld/jsonld-spec';\nimport { get, omit, set, toNumber } from 'lodash';\n\n\ntype JsonDict = Record<string, unknown>;\nconst HBM_PREFIX = 'https://entity.api.hubmapconsortium.org/entities/';\n\n// eslint-disable-next-line max-len\nexport const DR1_VU_THUMBS = new Set(['VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg', 'VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0003-LK-32-21-PAS_registered_thumbnail.jpg', 'VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg', 'VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg', 'VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0005-RK-1-1-PAS_registered_thumbnail.jpg', 'VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg', 'VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0005-RK-4-172-PAS_registered_thumbnail.jpg', 'VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg', 'VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0006-LK-2-85-PAS_registered_thumbnail.jpg', 'VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg', 'VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg', 'VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0007-LK-203-103-PAS_registered_thumbnail.jpg', 'VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg', 'VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0008-RK-403-100-PAS_registered_thumbnail.jpg', 'VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg', 'VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg', 'VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0009-LK-102-7-PAS_registered_thumbnail.jpg', 'VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg', 'VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0010-LK-155-40-PAS_registered_thumbnail.jpg', 'VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg', 'VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0011-RK-3-10-PAS_registered_thumbnail.jpg', 'VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg', 'VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg', 'VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0012-RK-103-75-PAS_registered_thumbnail.jpg', 'VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg', 'VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg', 'VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0013-LK-202-96-PAS_registered_thumbnail.jpg', 'VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg', 'VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg', 'VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0014-LK-203-108-PAS_registered_thumbnail.jpg', 'VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg', 'VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0016-LK-202-89-PAS_registered_thumbnail.jpg', 'VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg', 'VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0003-LK-32-21-PAS_registered_thumbnail.jpg', 'VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg', 'VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg', 'VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0005-RK-1-1-PAS_registered_thumbnail.jpg', 'VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg', 'VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0005-RK-4-172-PAS_registered_thumbnail.jpg', 'VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg', 'VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0006-LK-2-85-PAS_registered_thumbnail.jpg', 'VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg', 'VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg', 'VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0007-LK-203-103-PAS_registered_thumbnail.jpg', 'VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg', 'VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0008-RK-403-100-PAS_registered_thumbnail.jpg', 'VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg', 'VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg', 'VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0011-RK-3-10-PAS_registered_thumbnail.jpg', 'VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg', 'VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg', 'VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg', 'VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg', 'VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg', 'VAN0012-RK-103-75-PAS_registered_thumbnail.jpg', 'VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg', 'VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg', 'VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg', 'VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg']);\n// eslint-disable-next-line max-len\nexport const UFL_THUMBS = { 'HBM558.SRZG.629': 'HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg', 'HBM562.NTMH.548': 'HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg', 'HBM685.KHRQ.684': 'HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg', 'HBM278.SFQW.627': 'HBM278.SFQW.627_UFL0008-LY09-1-1.jpg', 'HBM427.SMGB.866': 'HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg', 'HBM432.LLCF.677': 'HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg', 'HBM586.ZSVS.996': 'HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg', 'HBM285.XMBT.542': 'HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg', 'HBM289.BWJW.663': 'HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg', 'HBM255.SRPR.985': 'HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg', 'HBM799.WXHD.535': 'HBM799.WXHD.535_UFL0009-LY02-1-1.jpg', 'HBM294.RZFN.624': 'HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg', 'HBM383.TRQG.424': 'HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg', 'HBM647.MFQB.496': 'HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg', 'HBM237.GGPR.739': 'HBM237.GGPR.739_UFL0006-LY01-1-1.jpg', 'HBM288.TPBD.654': 'HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg', 'HBM974.NDXT.675': 'HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg', 'HBM589.SLVV.423': 'HBM589.SLVV.423_UFL0008-LY10-1-1.jpg', 'HBM794.RLFN.358': 'HBM794.RLFN.358_UFL0006-LY03-1-1.jpg', 'HBM372.BQSR.778': 'HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg', 'HBM499.TKDW.458': 'HBM499.TKDW.458_UFL0009-LY03-1-1.jpg', 'HBM342.PRQB.739': 'HBM342.PRQB.739_UFL0003-LY06-1-1.jpg', 'HBM633.CLVN.674': 'HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg', 'HBM343.JQKM.578': 'HBM343.JQKM.578_UFL0009-LY01-1-1.jpg', 'HBM987.XGTH.368': 'HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg', 'HBM964.CWCP.788': 'HBM964.CWCP.788_UFL0006-LY02-2-1.jpg', 'HBM244.TJLK.223': 'HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg', 'HBM646.FSBQ.966': 'HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg', 'HBM572.GXSB.234': 'HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg', 'HBM772.TKGJ.794': 'HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg', 'HBM239.CBWR.263': 'HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg', 'HBM992.NRTT.383': 'HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg', 'HBM283.DQXD.546': 'HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg', 'HBM795.JHND.856': 'HBM795.JHND.856_UFL0007-SP-1-2-1.jpg', 'HBM267.BZKT.867': 'HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg', 'HBM838.DLMJ.782': 'HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg', 'HBM337.FSXL.564': 'HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg', 'HBM355.JDLK.244': 'HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg', 'HBM599.PSZG.737': 'HBM599.PSZG.737_UFL0006-LY02-1-1.jpg' };\n\n/** UUID to TMC mapping. */\nconst GROUP_UUID_MAPPING: { [uuid: string]: string } = {\n  '03b3d854-ed44-11e8-8bce-0e368f3075e8': 'TMC-UCSD',\n  '07a29e4c-ed43-11e8-b56a-0e8017bdda58': 'TMC-Florida',\n  '308f5ffc-ed43-11e8-b56a-0e8017bdda58': 'TMC-CalTech',\n  '5bd084c8-edc2-11e8-802f-0e368f3075e8': 'HBM-TestingGroup',\n  '73bb26e4-ed43-11e8-8f19-0a7c1eab007a': 'TMC-Vanderbilt',\n  'def5fd76-ed43-11e8-b56a-0e8017bdda58': 'TMC-Stanford',\n  '5c106f29-ea2d-11e9-85e8-0efb3ba9a670': 'RTI-General Electric',\n  '301615f9-c870-11eb-a8dc-35ce3d8786fe': 'TMC-UConn'\n};\n\nconst ENTITY_CONTEXT = {\n  '@base': 'http://purl.org/ccf/latest/ccf-entity.owl#',\n  '@vocab': 'http://purl.org/ccf/latest/ccf-entity.owl#',\n  ccf: 'http://purl.org/ccf/',\n  rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\n  label: 'rdfs:label',\n  description: 'rdfs:comment',\n  link: {\n    '@id': 'rdfs:seeAlso',\n    '@type': '@id'\n  },\n  samples: {\n    '@reverse': 'has_donor'\n  },\n  sections: {\n    '@id': 'has_tissue_section',\n    '@type': '@id'\n  },\n  datasets: {\n    '@id': 'has_dataset',\n    '@type': '@id'\n  },\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  rui_location: {\n    '@id': 'has_spatial_entity',\n    '@type': '@id'\n  },\n  ontologyTerms: {\n    '@id': 'has_ontology_term',\n    '@type': '@id'\n  },\n  cellTypeTerms: {\n    '@id': 'has_cell_type_term',\n    '@type': '@id'\n  },\n  thumbnail: {\n    '@id': 'has_thumbnail'\n  }\n};\n\n/**\n * Converts a hubmap response object into JsonLd.\n *\n * @param data The hubmap data.\n * @returns The converted data.\n */\nexport function hubmapResponseAsJsonLd(data: unknown, assetsApi = '', portalUrl = '', serviceToken?: string, debug = false): JsonLd {\n  const entries = (get(data, 'hits.hits', []) as JsonDict[])\n    .map(e => get(e, '_source', {}) as JsonDict)\n    .sort((a, b) => (a['uuid'] as string).localeCompare(b['uuid'] as string));\n\n  const donorLookup: Record<string, JsonLdObj> = {};\n  const unflattened: JsonLdObj[] = entries.map(e =>\n    new HuBMAPTissueBlock(e, assetsApi, portalUrl, serviceToken).toJsonLd()\n  );\n  for (const donor of unflattened) {\n    const donorId = donor['@id'] as string;\n    if (!donorLookup[donorId]) {\n      donorLookup[donorId] = donor;\n    } else {\n      const samples = donorLookup[donorId].samples as JsonLdObj[];\n      samples.push((donor.samples as JsonLdObj[])[0]);\n    }\n  }\n  const donors = Object.values(donorLookup);\n\n  if (debug) {\n    debugDonors(donors);\n    console.log(donors.map(d => ({ '@context': ENTITY_CONTEXT, ...d })));\n  }\n\n  return { '@context': ENTITY_CONTEXT, '@graph': donors };\n}\n\nfunction debugDonors(donors: JsonLdObj[]) {\n  let datasets: JsonLdObj[] = [];\n  let deleted = 0;\n  for (const donor of donors.filter(d => (d.samples as []).length > 1)) {\n    const samples = donor.samples as JsonLdObj[];\n    for (let i=0; i < samples.length; i++) {\n      const blockId = samples[i]['@id'] as string;\n      datasets = datasets.concat(samples[i].datasets as JsonLdObj[]);\n      for (const section of samples[i].sections as JsonLdObj[]) {\n        datasets = datasets.concat(section.datasets as JsonLdObj[]);\n      }\n      for (let j=i+1; j < samples.length; j++) {\n        const sections = samples[j].sections as JsonLdObj[];\n        if (sections.find(s => s['@id'] === blockId)) {\n          samples[i].deleteMe = true;\n          deleted++;\n        }\n      }\n    }\n    donor.samples = samples.filter(s => s.deleteMe !== true);\n  }\n  if (deleted > 0) {\n    console.log(`⚠ ${deleted} sections identified as blocks`);\n  }\n}\n\nexport class HuBMAPTissueBlock {\n  bad = false;\n  donor: JsonLdObj;\n\n  '@id': string;\n  '@type' = 'Sample';\n  label: string;\n  description: string;\n  link: string;\n\n  sample_type = 'Tissue Block';\n  section_count: number;\n  section_size: number;\n  section_units: string;\n\n  rui_location: JsonLdObj;\n  sections: JsonLdObj[];\n  datasets: JsonLdObj[];\n\n  constructor(public data: JsonDict, assetsApi = '', portalUrl = '', serviceToken?: string) {\n    const entityType = this.data.entity_type;\n    if (entityType !== 'Sample') {\n      this.bad = true;\n      return;\n    }\n    const ancestors = (this.data.ancestors || []) as JsonDict[];\n    const descendants = (this.data.descendants || []) as JsonDict[];\n\n    const donor = ancestors.find(e => e.entity_type === 'Donor') as JsonDict;\n    this.donor = this.getDonor(donor, portalUrl);\n    const ruiLocation = this.getRuiLocation(data, this.donor);\n    if (!ruiLocation) {\n      this.bad = true;\n    } else {\n      this.rui_location = ruiLocation;\n    }\n\n    if (!GROUP_UUID_MAPPING[data.group_uuid as string]) {\n      GROUP_UUID_MAPPING[data.group_uuid as string] = data.group_name as string;\n    }\n\n    const dateEntered = new Date(data.last_modified_timestamp as number).toLocaleDateString();\n    const groupName = GROUP_UUID_MAPPING[data.group_uuid as string] || data.group_name as string;\n    const creator = data.created_by_user_displayname;\n\n    this['@id'] = HBM_PREFIX + data.uuid;\n    this.label = `Registered ${dateEntered}, ${creator}, ${groupName}`;\n    this.link = `${portalUrl}browse/sample/${data.uuid}`;\n\n    const sectionLookup: Record<string, JsonLdObj> = {};\n    const sections: JsonLdObj[] = [];\n    this.sections = sections;\n    const datasets: JsonLdObj[] = [];\n    this.datasets = datasets;\n\n    for (const descendant of descendants.filter(d => d.entity_type === 'Sample')) {\n      const section = this.getSection(descendant, data, portalUrl);\n\n      const sectionId = descendant.submission_id as string;\n      sectionLookup[sectionId] = section;\n      sections.push(section);\n      section.section_number = section.section_number ?? sections.length;\n    }\n    for (const descendant of descendants) {\n      if (descendant.entity_type === 'Dataset') {\n        const dataset = this.getDataset(descendant, assetsApi, portalUrl, serviceToken);\n\n        const sectionId = get(descendant, ['ingest_metadata', 'metadata', 'tissue_id']) as string;\n        if (sectionLookup[sectionId]) {\n          (sectionLookup[sectionId].datasets as JsonLd[])?.push(dataset);\n        } else {\n          datasets.push(dataset);\n        }\n      }\n    }\n\n    const loc: JsonDict = ruiLocation ?? {};\n    const dims = `${loc.x_dimension} x ${loc.y_dimension} x ${loc.z_dimension} ${loc.dimension_units}`;\n    this.section_count = loc.slice_count as number || sections.length;\n    const sSize = parseFloat(\n      (loc.slice_thickness as number ||\n        ((loc.z_dimension as number || 0) / Math.max(this.section_count, 1)))\n        .toFixed(1)\n    );\n    this.section_size = sSize;\n    const sUnits = loc.dimension_units as string || 'millimeter';\n    this.section_units = sUnits;\n\n    this.description = `${dims}, ${sSize} ${sUnits}, ${data.specimen_type}, ${this.section_count} Sections`;\n\n    sections.forEach((section, index) => {\n      section.description = `${loc.x_dimension} x ${loc.y_dimension} x ${sSize} ${sUnits}, ${sSize} ${sUnits}, ${section.description}`;\n      section.section_number = index + 1;\n    });\n  }\n\n  getSection(section: JsonDict, data: JsonDict, portalUrl: string): JsonLdObj {\n    const dateEntered = new Date(section.last_modified_timestamp as number).toLocaleDateString();\n    const groupName = GROUP_UUID_MAPPING[section.group_uuid as string] || section.group_name as string;\n    const creator = section.created_by_user_displayname;\n\n    return {\n      '@id': HBM_PREFIX + section.uuid,\n      '@type': 'Sample',\n      label: `Registered ${dateEntered}, ${creator}, ${groupName}`,\n      description: `${data.specimen_type}`,\n      link: `${portalUrl}browse/sample/${section.uuid}`,\n\n      sample_type: 'Tissue Section',\n      section_number: 1,\n\n      samples: [],\n      datasets: []\n    };\n  }\n\n  getDataset(dataset: JsonDict, assetsApi = '', portalUrl = '', serviceToken?: string): JsonLdObj {\n    const dateEntered = new Date(dataset.last_modified_timestamp as number).toLocaleDateString();\n    const groupName = GROUP_UUID_MAPPING[dataset.group_uuid as string] || dataset.group_name as string;\n    const creator = dataset.created_by_user_displayname;\n\n    const types = [\n      ...dataset.data_types as string[],\n      get(dataset, ['ingest_metadata', 'metadata', 'assay_type'], '')\n    ];\n    const typesSearch = types.join('|').toLowerCase();\n\n    let technology: string;\n    let thumbnail = 'assets/icons/ico-unknown.svg';\n    if (typesSearch.indexOf('10x') !== -1) {\n      technology = '10x';\n      thumbnail = 'assets/icons/ico-bulk-10x.svg';\n    } else if (typesSearch.indexOf('af') !== -1) {\n      technology = 'AF';\n      thumbnail = 'assets/icons/ico-spatial-af.svg';\n    } else if (typesSearch.indexOf('codex') !== -1) {\n      technology = 'CODEX';\n      thumbnail = 'assets/icons/ico-spatial-codex.svg';\n    } else if (typesSearch.indexOf('imc') !== -1) {\n      technology = 'IMC';\n      thumbnail = 'assets/icons/ico-spatial-imc.svg';\n    } else if ((typesSearch.indexOf('lc') !== -1) && (typesSearch.indexOf('af') === -1)) {\n      technology = 'LC';\n      thumbnail = 'assets/icons/ico-bulk-lc.svg';\n    } else if (typesSearch.indexOf('maldi') !== -1) {\n      technology = 'MALDI';\n    } else if (typesSearch.indexOf('pas') !== -1) {\n      technology = 'PAS';\n    } else {\n      technology = 'OTHER';\n    }\n    thumbnail = this.getDatasetThumbnail(dataset, assetsApi, serviceToken) ?? thumbnail;\n\n    return {\n      '@id': HBM_PREFIX + dataset.uuid,\n      '@type': 'Dataset',\n      label: `Registered ${dateEntered}, ${creator}, ${groupName}`,\n      description: `Data/Assay Types: ${types.join(', ')}`,\n      link: `${portalUrl}browse/dataset/${dataset.uuid}`,\n      technology,\n      thumbnail\n    };\n  }\n\n  getDatasetThumbnail(dataset: JsonDict, assetsApi: string, serviceToken?: string): string | undefined {\n    if (dataset.thumbnail_file) {\n      const thumbnailFile = dataset.thumbnail_file as JsonDict;\n      return `${assetsApi}/${thumbnailFile.file_uuid}/${thumbnailFile.filename}` + (serviceToken ? `?token=${serviceToken}` : '');\n    } else if (dataset.group_uuid === '73bb26e4-ed43-11e8-8f19-0a7c1eab007a') { // TMC-Vanderbilt\n      const tiffs = (get(dataset, 'metadata.files', []) as { rel_path: string }[])\n        .filter(f => /\\.(ome\\.tif|ome\\.tiff)$/.test(f.rel_path))\n        .filter(f => !/(multilayer\\.ome\\.tif|_ac\\.ome\\.tif)/.test(f.rel_path))\n        .filter(f => DR1_VU_THUMBS.has(\n          f.rel_path.split('/').slice(-1)[0].split('?')[0].replace('.ome.tif', '_thumbnail.jpg')\n        ))\n        .map(f => `${assetsApi}/${dataset.uuid}/${f.rel_path}` + (serviceToken ? `?token=${serviceToken}` : ''));\n\n      if (tiffs.length > 0) {\n        const thumb = tiffs[0].split('/').slice(-1)[0].split('?')[0].replace('.ome.tif', '_thumbnail.jpg');\n        if (DR1_VU_THUMBS.has(thumb)) {\n          return `assets/thumbnails/TMC-Vanderbilt/DR1/${thumb}`;\n        }\n      }\n    } else if (dataset.group_uuid === '07a29e4c-ed43-11e8-b56a-0e8017bdda58') { // TMC-Florida\n      const thumb = UFL_THUMBS[dataset.hubmap_id as string];\n      if (thumb) {\n        return `assets/thumbnails/TMC-Florida/${thumb}`;\n      }\n    }\n    return undefined;\n  }\n\n  getDonor(donor: JsonDict, portalUrl: string): JsonLdObj {\n    const donorDescription = (donor.description as string || '').toLowerCase();\n    let sex: 'Male' | 'Female' | undefined;\n    if (donorDescription.includes('female')) {\n      sex = 'Female';\n    } else if (donorDescription.includes('male')) {\n      sex = 'Male';\n    }\n    const ageMatch = donorDescription.match(/age ([0-9]+)/);\n    let age: number | undefined;\n    if (ageMatch) {\n      age = toNumber(ageMatch[1]);\n    }\n    let bmi: number | undefined;\n    for (const md of get(donor, 'metadata.organ_donor_data', get(donor, 'metadata.living_donor_data', [])) as JsonDict[]) {\n      if (md.preferred_term === 'Feminine gender' || md.preferred_term === 'Female') {\n        sex = 'Female';\n      } else if (md.preferred_term === 'Masculine gender' || md.preferred_term === 'Male') {\n        sex = 'Male';\n      } else if (md.preferred_term === 'Current chronological age' || md.preferred_term === 'Age') {\n        age = toNumber(md.data_value);\n      } else if (md.preferred_term === 'Body mass index') {\n        bmi = toNumber(md.data_value);\n      }\n    }\n    let label = '';\n    if (sex && age) {\n      label += `${sex}, Age ${age}`;\n      if (bmi) {\n        label += `, BMI ${bmi.toFixed(1)}`;\n      }\n    }\n\n    const dateEntered = new Date(donor.last_modified_timestamp as number).toLocaleDateString();\n    const groupName = GROUP_UUID_MAPPING[donor.group_uuid as string] || donor.group_name as string;\n    const creator = donor.created_by_user_displayname;\n\n    return {\n      '@id': HBM_PREFIX + donor.uuid,\n      '@type': 'Donor',\n      label,\n      description: `Entered ${dateEntered}, ${creator}, ${groupName}`,\n      link: `${portalUrl}browse/donor/${donor.uuid}`,\n\n      age,\n      sex,\n      bmi,\n\n      consortium_name: 'HuBMAP',\n      provider_name: groupName,\n      provider_uuid: donor.group_uuid as string,\n\n      samples: []\n    };\n  }\n\n  getRuiLocation(data: JsonDict, donor: JsonLdObj): JsonLdObj | undefined {\n    let spatialEntity: JsonLdObj | undefined;\n    let ruiLocation = data.rui_location as JsonDict;\n    if (ruiLocation) {\n      // RUI Location may come in as an unparsed string\n      if (typeof ruiLocation === 'string') {\n        ruiLocation = JSON.parse(ruiLocation as string) as JsonDict;\n      }\n      if (ruiLocation.alignment_id) { // Detect RUI 0.5 generated JSON\n        console.log('Detected a deprecated rui_location', data.uuid);\n      } else if ((ruiLocation as unknown as { '@id': string })['@id']) { // Detect RUI 1.0+ generated JSON-LD\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        spatialEntity = ruiLocation as unknown as JsonLdObj;\n      }\n    }\n    if (spatialEntity) {\n      // Patch to fix RUI 0.5 Kidney and Spleen Placements\n      const target: string = get(spatialEntity, ['placement', 'target']) ?? '';\n      if (target.startsWith('http://purl.org/ccf/latest/ccf.owl#VHSpleenCC')) {\n        if (donor.sex === 'Male') {\n          set(spatialEntity, ['placement', 'target'], target.replace('#VHSpleenCC', '#VHMSpleenCC'));\n        } else {\n          set(spatialEntity, ['placement', 'target'], target.replace('#VHSpleenCC', '#VHFSpleenCC'));\n        }\n      } else if (target === 'http://purl.org/ccf/latest/ccf.owl#VHLeftKidney' || target === 'http://purl.org/ccf/latest/ccf.owl#VHRightKidney') {\n        if (donor.sex === 'Male') {\n          set(spatialEntity, ['placement', 'target'], target.replace('#VH', '#VHM') + '_Patch');\n        } else {\n          set(spatialEntity, ['placement', 'target'], target.replace('#VH', '#VHF') + '_Patch');\n        }\n      }\n    }\n    return spatialEntity;\n  }\n\n  getTissueBlock(): JsonLdObj {\n    return omit({ ...this }, ['data', 'bad', 'donor']) as unknown as JsonLdObj;\n  }\n\n  toJsonLd(): JsonLdObj {\n    return { ...this.donor, samples: [this.getTissueBlock()] };\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { JsonLd } from 'jsonld/jsonld-spec';\nimport { addJsonLdToStore, Store } from 'triple-store-utils';\n\nimport { hubmapResponseAsJsonLd } from './hubmap-data';\n\n\ninterface SearchResultJson {\n  hits: {\n    hits: unknown[];\n    total: {\n      value: number;\n    };\n  };\n}\n\n\n// Reduce this value if including more data fields\nconst PER_API_SEARCH_REQUEST_COUNT = 250;\n\nconst INCLUDED_DATA_FIELDS = [\n  'uuid', 'entity_type',\n  'group_uuid', 'group_name',\n  'last_modified_timestamp', 'created_by_user_displayname',\n  'ancestors.entity_type',\n  'ancestors.description',\n  'ancestors.metadata.organ_donor_data.preferred_term',\n  'ancestors.metadata.organ_donor_data.data_value',\n  'ancestors.metadata.living_donor_data.preferred_term',\n  'ancestors.metadata.living_donor_data.data_value',\n  'ancestors.last_modified_timestamp',\n  'ancestors.group_uuid',\n  'ancestors.group_name',\n  'ancestors.created_by_user_displayname',\n  'ancestors.uuid',\n  'descendants.entity_type',\n  'descendants.ingest_metadata.metadata.tissue_id',\n  'descendants.last_modified_timestamp',\n  'descendants.group_uuid',\n  'descendants.group_name',\n  'descendants.created_by_user_displayname',\n  'descendants.uuid',\n  'descendants.data_types',\n  'descendants.ingest_metadata.metadata.assay_type',\n  'descendants.thumbnail_file',\n  'descendants.metadata.files.rel_path',\n  'rui_location', 'specimen_type'\n];\n\nconst DEFAULT_API_SEARCH_QUERY: unknown = {\n  exists: {\n    field: 'rui_location'\n  }\n};\n\nfunction getApiSearchHeaders(token?: string): Headers {\n  const headers = new Headers();\n\n  headers.append('Content-type', 'application/json');\n  if (token) {\n    headers.append('Authorization', `Bearer ${token}`);\n  }\n\n  return headers;\n}\n\nfunction getApiSearchBody(from: number, size: number, query?: unknown): string {\n  const bodyObj = {\n    version: true,\n    from,\n    size,\n    stored_fields: ['*'],\n    script_fields: {},\n    docvalue_fields: [],\n    query: query ?? DEFAULT_API_SEARCH_QUERY,\n    _source: {\n      includes: INCLUDED_DATA_FIELDS\n    }\n  };\n\n  return JSON.stringify(bodyObj);\n}\n\nasync function doSearchRequest(\n  url: string, init?: RequestInit\n): Promise<SearchResultJson | undefined> {\n  try {\n    const res = await fetch(url, init);\n    return res.ok ? (await res.json()) : undefined;\n  } catch (_error) {\n    return undefined;\n  }\n}\n\nasync function doApiSearch(\n  url: string, token?: string, query?: unknown\n): Promise<SearchResultJson | undefined> {\n  const perReqCount = PER_API_SEARCH_REQUEST_COUNT;\n  const headers = getApiSearchHeaders(token);\n  const body = getApiSearchBody(0, perReqCount, query);\n  const firstResult = await doSearchRequest(url, { method: 'POST', headers, body });\n  if (!firstResult) {\n    return undefined;\n  }\n\n  const totalCount = firstResult.hits.total.value;\n  if (totalCount <= perReqCount) {\n    return firstResult;\n  }\n\n  const requests: Promise<SearchResultJson | undefined>[] = [];\n  for (let from = perReqCount; from < totalCount; from += perReqCount) {\n    requests.push(doSearchRequest(url, {\n      method: 'POST',\n      headers,\n      body: getApiSearchBody(from, perReqCount, query)\n    }));\n  }\n\n  const results = await Promise.all(requests);\n  if (results.some(res => !res)) {\n    return undefined;\n  }\n\n  const items = results.map(res => res!.hits.hits);\n  return {\n    ...firstResult,\n    hits: {\n      ...firstResult.hits,\n      hits: firstResult.hits.hits.concat(...items),\n    }\n  };\n}\n\n/**\n * Search the HuBMAP Search API and return CCF-compatible JSON-LD data\n *\n * @param dataUrl the search API url\n * @param serviceType 'static' if a statically saved response or 'search-api' if querying the search-api live\n * @param query the elastic search query to use\n * @param serviceToken the api key to the search-api\n * @param assetsApi the assets api endpoint\n * @param portalUrl the portal url to point to\n * @returns CCF-compatible JSON-LD data or undefined on error\n */\nexport async function searchHubmap(\n  dataUrl: string, serviceType: 'static' | 'search-api',\n  query?: unknown, serviceToken?: string, assetsApi = '', portalUrl = ''\n): Promise<JsonLd | undefined> {\n  let hubmapData: SearchResultJson | undefined;\n  if (serviceType === 'static') {\n    hubmapData = await doSearchRequest(dataUrl);\n  } else if (serviceType === 'search-api') {\n    hubmapData = await doApiSearch(dataUrl, serviceToken, query);\n  }\n\n  if (hubmapData) {\n    return hubmapResponseAsJsonLd(hubmapData, assetsApi, portalUrl, serviceToken);\n  } else {\n    console.warn(`Unable to load ${dataUrl} as HuBMAP Data`);\n    return undefined;\n  }\n}\n\n/**\n * Adds hubmap data from a url to the triple store.\n *\n * @param store The triple store.\n * @param dataUrl The data url.\n * @param serviceType The service type.\n */\nexport async function addHubmapDataToStore(\n  store: Store, dataUrl: string, serviceType: 'static' | 'search-api', serviceToken?: string, assetsApi = '', portalUrl = ''\n): Promise<void> {\n  const hubmapData = await searchHubmap(dataUrl, serviceType, undefined, serviceToken, assetsApi, portalUrl);\n  if (hubmapData) {\n    await addJsonLdToStore(hubmapData, store);\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { readQuads, Store } from 'triple-store-utils';\n\nimport { AggregateResult } from '../interfaces';\nimport { entity } from '../util/prefixes';\n\n\nfunction getObjects(store: Store, ids: Set<string>, predicate: string): Set<string> {\n  const objects = new Set<string>();\n  for (const id of ids) {\n    for (const quad of readQuads(store, id, predicate, null, null)) {\n      objects.add(quad.object.id);\n    }\n  }\n  return objects;\n}\n\n/**\n * Computes aggregate results.\n *\n * @param ids Ids of objects to calculate aggregate over.\n * @param store The triple store.\n * @returns The list of aggregate results.\n */\nexport function getAggregateResults(ids: Set<string>, store: Store): AggregateResult[] {\n  const donors = getObjects(store, ids, entity.donor.id);\n  const centers = getObjects(store, donors, entity.providerUUID.id);\n\n  const tissueBlocks = new Set<string>();\n  for (const id of ids) {\n    for (const quad of readQuads(store, id, entity.spatialEntity, null, null)) {\n      tissueBlocks.add(quad.subject.id);\n    }\n  }\n\n  const tissueSections = getObjects(store, tissueBlocks, entity.sections.id);\n  const tissueDatasets = new Set<string>([\n    ...getObjects(store, tissueBlocks, entity.datasets.id),\n    ...getObjects(store, tissueSections, entity.datasets.id)\n  ]);\n\n  const results: { [key: string]: number } = {\n    'Tissue Data Providers': centers.size,\n    Donors: donors.size,\n    'Tissue Blocks': tissueBlocks.size,\n    'Tissue Sections': tissueSections.size,\n    'Tissue Datasets': tissueDatasets.size\n  };\n\n  return Object.entries(results).map(([label, count]) => ({ label, count }));\n}\n\n/**\n * Get a list of technology names used by datasets\n *\n * @param store The triple store.\n * @returns list of unique technology names in the data\n */\nexport function getDatasetTechnologyNames(store: Store): string[] {\n  const names = new Set<string>();\n  for (const quad of readQuads(store, null, entity.technology, null, null)) {\n    names.add(quad.object.value);\n  }\n  return Array.from(names).sort();\n}\n\n/**\n * Get a list of provider names from the database\n *\n * @param store The triple store.\n * @returns list of unique provider names in the data\n */\nexport function getProviderNames(store: Store): string[] {\n  const names = new Set<string>();\n  for (const quad of readQuads(store, null, entity.providerName, null, null)) {\n    names.add(quad.object.value);\n  }\n  return Array.from(names).sort();\n}\n","import { Euler } from '@math.gl/core';\nimport { OrientedBoundingBox } from '@math.gl/culling';\nimport { Store } from 'triple-store-utils';\n\nimport { CCFSpatialGraph } from '../ccf-spatial-graph';\nimport { SpatialSearch } from '../interfaces';\nimport { getMappedResult } from '../util/n3-functions';\nimport { ccf } from '../util/prefixes';\n\n\nconst spatialEntityDimensions = {\n  [ccf.spatialEntity.x_dimension.id]: 'x',\n  [ccf.spatialEntity.y_dimension.id]: 'y',\n  [ccf.spatialEntity.z_dimension.id]: 'z'\n};\n\nfunction getSpatialEntityDimensions(store: Store, iri: string): [number, number, number] {\n  const dims = getMappedResult<{ x: number; y: number; z: number }>(store, iri, 'Dimensions', spatialEntityDimensions);\n  return [ dims.x, dims.y, dims.z ];\n}\n\nexport function getOrientedBoundingBox(store: Store, graph: CCFSpatialGraph, sourceIri: string, targetIri: string): OrientedBoundingBox | undefined {\n  const matrix = graph.getTransformationMatrix(sourceIri, targetIri);\n  let result: OrientedBoundingBox | undefined = undefined;\n  if (matrix) {\n    const center = matrix.getTranslation();\n    const halfSize = getSpatialEntityDimensions(store, sourceIri).map(n => n / 1000 / 2);\n    const quaternion = new Euler().fromRotationMatrix(matrix, Euler.XYZ).toQuaternion().normalize().calculateW();\n    result = new OrientedBoundingBox().fromCenterHalfSizeQuaternion(center, halfSize, quaternion);\n  }\n  return result;\n}\n\nexport function filterByProbingSphere(store: Store, graph: CCFSpatialGraph, seen: Set<string>, search: SpatialSearch): Set<string> {\n  const { x, y, z, radius, target } = search;\n  const newSeen = new Set<string>();\n  const radiusSquared = (radius / 1000) * (radius / 1000);\n  for (const sourceIri of seen) {\n    const boundingBox = getOrientedBoundingBox(store, graph, sourceIri, target);\n    if (boundingBox) {\n      const distanceSquared = boundingBox.distanceSquaredTo([x, y, z].map(n => n / 1000));\n      if (distanceSquared <= radiusSquared) {\n        newSeen.add(sourceIri);\n      }\n    }\n  }\n  return newSeen;\n}\n","import { isFinite } from 'lodash';\nimport { fromRdf } from 'rdf-literal';\nimport { DataFactory, Literal, readQuads, Store, Term } from 'triple-store-utils';\n\nimport { CCFSpatialGraph } from '../ccf-spatial-graph';\nimport { Filter, SpatialSearch } from '../interfaces';\nimport { ccf, entity, rui } from '../util/prefixes';\nimport { filterByProbingSphere } from './spatial-search-n3';\n\n\nfunction filterWithDonor(store: Store, seen: Set<string>, callback: (donorsSeen: Set<string>) => Set<string>): Set<string> {\n  const donor2entity = new Map<string, string[]>();\n  const donors = new Set<string>();\n  for (const subject of seen) {\n    for (const quad of readQuads(store, subject, entity.donor, null, null)) {\n      donors.add(quad.object.id);\n      if (!donor2entity.has(quad.object.id)) {\n        donor2entity.set(quad.object.id, [subject]);\n      } else {\n        donor2entity.get(quad.object.id)?.push(subject);\n      }\n    }\n  }\n\n  const newDonors = callback(donors);\n  const newSeen = new Set<string>();\n  for (const d of newDonors) {\n    for (const s of donor2entity.get(d) ?? []) {\n      newSeen.add(s);\n    }\n  }\n  return newSeen;\n}\n\nfunction filterWithSpatialEntity(store: Store, seen: Set<string>, callback: (entitiesSeen: Set<string>) => Set<string>): Set<string> {\n  const spatial2entity = new Map<string, string[]>();\n  const entities = new Set<string>();\n  for (const subject of seen) {\n    for (const quad of readQuads(store, subject, entity.spatialEntity, null, null)) {\n      entities.add(quad.object.id);\n      if (!spatial2entity.has(quad.object.id)) {\n        spatial2entity.set(quad.object.id, [subject]);\n      } else {\n        spatial2entity.get(quad.object.id)?.push(subject);\n      }\n    }\n  }\n\n  const newSpatialEntities = callback(entities);\n  const newSeen = new Set<string>();\n  for (const e of newSpatialEntities) {\n    for (const s of spatial2entity.get(e) ?? []) {\n      newSeen.add(s);\n    }\n  }\n  return newSeen;\n}\n\nfunction filterWithDataset(store: Store, seen: Set<string>, callback: (datasetsSeen: Set<string>) => Set<string>): Set<string> {\n  const dataset2entity = new Map<string, string[]>();\n  const datasets = new Set<string>();\n\n  const sectionAndBlockSeen = new Set<string>(seen);\n  for (const subject of seen) {\n    for (const quad of readQuads(store, subject, entity.sections, null, null)) {\n      sectionAndBlockSeen.add(quad.object.id);\n    }\n  }\n\n  for (const subject of sectionAndBlockSeen) {\n    for (const quad of readQuads(store, subject, entity.datasets, null, null)) {\n      datasets.add(quad.object.id);\n      if (!dataset2entity.has(quad.object.id)) {\n        dataset2entity.set(quad.object.id, [subject]);\n      } else {\n        dataset2entity.get(quad.object.id)?.push(subject);\n      }\n    }\n  }\n\n  const newDatasets = callback(datasets);\n  const newSeen = new Set<string>();\n  for (const e of newDatasets) {\n    for (const s of dataset2entity.get(e) ?? []) {\n      newSeen.add(s);\n    }\n  }\n  return newSeen;\n}\n\n/**\n * Finds all ids of object matching a filter.\n *\n * @param store The triple store.\n * @param filter The filter to limit objects.\n * @returns A set of all ids matching the filter.\n */\nexport function findIds(store: Store, graph: CCFSpatialGraph, filter: Filter): Set<string> {\n  let seen = getAllEntities(store);\n  if (seen.size > 0) {\n    seen = filterByHasSpatialEntity(store, seen);\n  }\n  if (seen.size > 0 && (filter.sex === 'Male' || filter.sex === 'Female')) {\n    const sex = filter.sex;\n    seen = filterWithDonor(store, seen, (donors) =>\n      filterBySex(store, donors, sex)\n    );\n  }\n  if (seen.size > 0 && filter.tmc?.length > 0) {\n    seen = filterWithDonor(store, seen, (donors) =>\n      filterByGroupName(store, donors, filter.tmc)\n    );\n  }\n  if (seen.size > 0 && filter.technologies?.length > 0) {\n    seen = filterWithDataset(store, seen, (datasets) =>\n      filterByTechnology(store, datasets, filter.technologies)\n    );\n  }\n  if (seen.size > 0 && filter.spatialSearches?.length > 0) {\n    seen = filterWithSpatialEntity(store, seen, (entities) =>\n      filterBySpatialSearches(store, graph, entities, filter.spatialSearches)\n    );\n  }\n  if (seen.size > 0 && filter.ontologyTerms?.length > 0) {\n    const terms = filter.ontologyTerms;\n    if (terms.indexOf(rui.body.id) === -1) {\n      seen = filterWithSpatialEntity(store, seen, (entities) =>\n        filterByOntologyTerms(store, entities, terms)\n      );\n    }\n  }\n  if (seen.size > 0 && filter.cellTypeTerms?.length > 0) {\n    const terms = filter.cellTypeTerms;\n    if (terms.indexOf(rui.cell.id) === -1) {\n      seen = filterWithSpatialEntity(store, seen, (entities) =>\n        filterByCellTypeTerms(store, entities, terms)\n      );\n    }\n  }\n  if (seen.size > 0 && filter.ageRange?.length === 2 &&\n    isFinite(filter.ageRange[0]) && isFinite(filter.ageRange[1])) {\n    const maxAge = Math.max(...filter.ageRange);\n    const minAge = Math.min(...filter.ageRange);\n\n    // Age filter given by their default range will be ignored\n    if (!(minAge === 1 && maxAge === 110)) {\n      seen = filterWithDonor(store, seen, (donors) =>\n        filterByAge(store, donors, minAge, maxAge)\n      );\n    }\n  }\n  if (seen.size > 0 && filter.bmiRange?.length === 2 &&\n    isFinite(filter.bmiRange[0]) && isFinite(filter.bmiRange[1])) {\n    const maxBMI = Math.max(...filter.bmiRange);\n    const minBMI = Math.min(...filter.bmiRange);\n\n    // BMI filter given by their default range will be ignored\n    if (!(minBMI === 13 && maxBMI === 83)) {\n      seen = filterWithDonor(store, seen, (donors) =>\n        filterByBMI(store, donors, minBMI, maxBMI)\n      );\n    }\n  }\n  return seen;\n}\n\n/**\n * Gets all object ids in a store.\n *\n * @param store The triple store.\n * @returns A set of all ids.\n */\nfunction getAllEntities(store: Store): Set<string> {\n  const seen = new Set<string>();\n  store.forSubjects((s) => seen.add(s.id), entity.spatialEntity, null, null);\n  return seen;\n}\n\n/**\n * Creates a callback function that adds ids to a second set iff it exists in the first set.\n *\n * @param seen The first set of ids.\n * @param newSeen The second set to add ids to.\n * @returns The callback function.\n */\nfunction differenceCallback(seen: Set<string>, newSeen: Set<string>): (term: Term) => void {\n  return function (term: Term) {\n    if (seen.has(term.id)) {\n      newSeen.add(term.id);\n    }\n  };\n}\n\n/**\n * Filters ids by sex.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param sex Sex to filter on.\n * @returns The subset of ids with the specified sex.\n */\nfunction filterBySex(store: Store, seen: Set<string>, sex: 'Male' | 'Female'): Set<string> {\n  const newSeen = new Set<string>();\n  store.forSubjects(differenceCallback(seen, newSeen), entity.sex, entity[sex], null);\n  return newSeen;\n}\n\n/**\n * Filters ids by group names.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param groupNames Group names to filter on.\n * @returns The subset of ids with the specified group names.\n */\nfunction filterByGroupName(store: Store, seen: Set<string>, groupNames: string[]): Set<string> {\n  const newSeen = new Set<string>();\n  for (const groupName of groupNames) {\n    const literal = DataFactory.literal(groupName);\n    store.forSubjects(differenceCallback(seen, newSeen), entity.providerName, literal, null);\n  }\n  return newSeen;\n}\n\n/**\n * Filters ids by technology names.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param technologies Technology names to filter on.\n * @returns The subset of ids with the specified technology names.\n */\nfunction filterByTechnology(store: Store, seen: Set<string>, technologies: string[]): Set<string> {\n  const newSeen = new Set<string>();\n  for (const technology of technologies) {\n    const literal = DataFactory.literal(technology);\n    store.forSubjects(differenceCallback(seen, newSeen), entity.technology, literal, null);\n  }\n  return newSeen;\n}\n\n/**\n * Filters ids by ontology terms.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param terms Ontology terms to filter on.\n * @returns The subset of ids with the specified ontology terms.\n */\nfunction filterByOntologyTerms(store: Store, seen: Set<string>, terms: string[]): Set<string> {\n  const newSeen = new Set<string>();\n  for (const term of terms) {\n    const namedNode = DataFactory.namedNode(term);\n    store.forSubjects(differenceCallback(seen, newSeen), ccf.spatialEntity.ccf_annotations, namedNode, null);\n  }\n  return newSeen;\n}\n\n/**\n * Filters ids by cell type terms.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param terms Cell type terms to filter on.\n * @returns The subset of ids with the specified cell type terms.\n */\nfunction filterByCellTypeTerms(store: Store, seen: Set<string>, terms: string[]): Set<string> {\n  const asTerms = new Set<string>();\n  for (const term of terms) {\n    store.forObjects((asTerm) => {\n      asTerms.add(asTerm.id);\n    }, term, ccf.asctb.located_in, null);\n    if (term === rui.cell.id) {\n      asTerms.add(rui.body.id);\n    }\n  }\n  return filterByOntologyTerms(store, seen, [...asTerms]);\n}\n\n/**\n * Filters ids by age.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param minAge Minimum age.\n * @param maxAge Maximum age.\n * @returns The subset of ids with the specified age.\n */\nfunction filterByAge(store: Store, seen: Set<string>, minAge: number, maxAge: number): Set<string> {\n  const newSeen = new Set<string>();\n  for (const subject of seen) {\n    for (const quad of readQuads(store, subject, entity.age, null, null)) {\n      const value = fromRdf(quad.object as Literal) as number;\n      if (value >= minAge && value <= maxAge) {\n        newSeen.add(subject);\n      }\n    }\n  }\n  return newSeen;\n}\n\n/**\n * Filters ids by BMI.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param minBMI Minimum BMI.\n * @param maxBMI Maximum BMI.\n * @returns The subset of ids with the specified BMI.\n */\nfunction filterByBMI(store: Store, seen: Set<string>, minBMI: number, maxBMI: number): Set<string> {\n  const newSeen = new Set<string>();\n  for (const subject of seen) {\n    for (const quad of readQuads(store, subject, entity.bmi, null, null)) {\n      const value = fromRdf(quad.object as Literal) as number;\n      if (value >= minBMI && value <= maxBMI) {\n        newSeen.add(subject);\n      }\n    }\n  }\n  return newSeen;\n}\n\n/**\n * Filters ids by spatial entities.\n *\n * @param store The triple store.\n * @param seen All ids to choose from.\n * @param hasSpatialEntity Whether the filtered objects should have a spatial entity.\n * @returns The subset of ids with/without spatial entities.\n */\nfunction filterByHasSpatialEntity(store: Store, seen: Set<string>, hasSpatialEntity = true): Set<string> {\n  const newSeen = new Set<string>();\n  store.forSubjects(differenceCallback(seen, newSeen), entity.spatialEntity, null, null);\n  if (!hasSpatialEntity) {\n    const notNewSeen = new Set<string>();\n    seen.forEach((s) => !newSeen.has(s) ? notNewSeen.add(s) : undefined);\n    return notNewSeen;\n  }\n  return newSeen;\n}\n\nfunction filterBySpatialSearches(store: Store, graph: CCFSpatialGraph, seen: Set<string>, spatialSearches: SpatialSearch[]): Set<string> {\n  const newSeen = new Set<string>();\n  for (const search of spatialSearches) {\n    const thisSeen = filterByProbingSphere(store, graph, seen, search);\n    thisSeen.forEach((s) => newSeen.add(s));\n  }\n  return newSeen;\n}\n","import { Store, readQuads } from 'triple-store-utils';\n\nimport { ccf, entity, rui } from '../util/prefixes';\n\n\nfunction getSpatialEntityMapping(subjects: Set<string>, store: Store): Map<string, Set<string>> {\n  const spatial2entity = new Map<string, Set<string>>();\n\n  for (const subject of subjects) {\n    for (const quad of readQuads(store, subject, entity.spatialEntity, null, null)) {\n      if (!spatial2entity.has(quad.object.id)) {\n        spatial2entity.set(quad.object.id, new Set<string>([subject]));\n      } else {\n        spatial2entity.get(quad.object.id)!.add(subject);\n      }\n    }\n  }\n  return spatial2entity;\n}\n\nfunction getAnatomicalStructureMapping(ids: Set<string>, store: Store): Map<string, Set<string>> {\n  const spatial2entity = getSpatialEntityMapping(ids, store);\n  const term2entity = new Map<string, Set<string>>();\n\n  for (const subject of spatial2entity.keys()) {\n    const entities = spatial2entity.get(subject)!;\n    for (const quad of readQuads(store, subject, ccf.spatialEntity.ccf_annotations, null, null)) {\n      if (!term2entity.has(quad.object.id)) {\n        term2entity.set(quad.object.id, new Set<string>(entities));\n      } else {\n        const termEntities = term2entity.get(quad.object.id)!;\n        entities.forEach((value) => termEntities.add(value));\n      }\n    }\n  }\n  return term2entity;\n}\n\n/**\n * Get number of occurrences of ontology terms for a set of ids.\n *\n * @param ids Ids of objects to calculate aggregate over.\n * @param store The triple store.\n * @returns Ontology term counts.\n */\nexport function getOntologyTermOccurences(ids: Set<string>, store: Store): Record<string, number> {\n  const counts: Record<string, number> = {};\n  const term2entities = getAnatomicalStructureMapping(ids, store);\n\n  term2entities.forEach((value, key) => {\n    counts[key] = value.size;\n  });\n\n  return counts;\n}\n\n/**\n * Get number of occurrences of cell type terms for a set of ids.\n *\n * @param ids Ids of objects to calculate aggregate over.\n * @param store The triple store.\n * @returns Ontology term counts.\n */\nexport function getCellTypeTermOccurences(ids: Set<string>, store: Store): Record<string, number> {\n  const asTerm2entities = getAnatomicalStructureMapping(ids, store);\n  const ctTerm2entities = new Map<string, Set<string>>();\n\n  for (const asTerm of asTerm2entities.keys()) {\n    const entities = asTerm2entities.get(asTerm)!;\n    for (const quad of readQuads(store, null, ccf.asctb.located_in, asTerm, null)) {\n      const cellType = quad.subject.id;\n      if (!ctTerm2entities.has(cellType)) {\n        ctTerm2entities.set(cellType, new Set<string>(entities));\n      } else {\n        const termEntities = ctTerm2entities.get(cellType)!;\n        entities.forEach((value) => termEntities.add(value));\n      }\n    }\n  }\n\n  const counts: Record<string, number> = {};\n\n  ctTerm2entities.forEach((value, key) => {\n    counts[key] = value.size;\n  });\n\n  counts[rui.cell.id] = asTerm2entities.get(rui.body.id)?.size ?? 0;\n\n  return counts;\n}\n","import { memoize } from 'lodash';\nimport { readQuads, Store } from 'triple-store-utils';\nimport { OntologyTreeModel, OntologyTreeNode } from '../interfaces';\nimport { getEntries } from '../util/n3-functions';\nimport { ccf, rui } from '../util/prefixes';\n\n\nexport function getOntologyTreeNode(store: Store, iri: string, relationshipIri: string): OntologyTreeNode {\n  const result: OntologyTreeNode = {\n    '@id': iri, '@type': 'OntologyTreeNode', id: iri, parent: '',\n    children: [] as string[], synonymLabels: [] as string[], label: ''\n  };\n\n  const ontologyTreeNodeResult = {\n    [ccf.ontologyNode.label.id]: 'label',\n    [relationshipIri]: 'parent',\n    [ccf.ontologyNode.synonymLabels.id]: 'synonymLabels',\n  };\n\n  for (const [key, value] of getEntries(store, iri, ontologyTreeNodeResult)) {\n    if (key === 'synonymLabels') {\n      result.synonymLabels.push(value as string);\n    } else {\n      result[key] = value;\n    }\n  }\n  result.children = store.getSubjects(relationshipIri, iri, null).map(s => s.id);\n\n  return result;\n}\n\nexport function getOntologyTreeModel(store: Store, rootIri: string, rootLabel: string, relationshipIri: string): OntologyTreeModel {\n  const result: OntologyTreeModel = { root: rootIri, nodes: {} };\n  const seen = new Set<string>();\n  for (const quad of readQuads(store, null, relationshipIri, null, null)) {\n    seen.add(quad.subject.id);\n    seen.add(quad.object.id);\n  }\n\n  for (const iri of seen) {\n    result.nodes[iri] = getOntologyTreeNode(store, iri, relationshipIri);\n  }\n\n  if (!result.nodes[rootIri]) {\n    result.nodes[rootIri] = {\n      '@id': rootIri,\n      '@type': 'OntologyTreeNode',\n      id: rootIri,\n      label: rootLabel,\n      children: [],\n      synonymLabels: []\n    } as unknown as OntologyTreeNode;\n  }\n\n  const rootChildren = store\n    .getSubjects(relationshipIri, rootIri, null).map(o => o.id)\n    .sort((a, b) => result.nodes[a].label.localeCompare(result.nodes[b].label));\n  result.nodes[rootIri].children = rootChildren;\n\n  treeify(result);\n\n  return result;\n}\n\n/**\n * Recursive function to ensure that the given ontology tree model is actually a tree by essentially using a BFS search.\n *\n * @param model the ontology tree model to mutate\n * @param nodeIri the tree node iri to modify. Starts at root in the base case\n * @param seen a set of IRIs that have been 'seen' so far to remove loops in the graph\n */\nfunction treeify(model: OntologyTreeModel, nodeIri: string | undefined = undefined, seen: Set<string> = new Set()) {\n  const node = model.nodes[nodeIri ?? model.root];\n  if (node) {\n    node.children = node.children.filter(n => !seen.has(n));\n    node.children.forEach(n => seen.add(n));\n    for (const childId of node.children) {\n      treeify(model, childId, seen);\n      if (model.nodes[childId]) {\n        model.nodes[childId].parent = node['@id'];\n      }\n    }\n  }\n}\n\nexport function getAnatomicalStructureTreeModelSlowly(store: Store): OntologyTreeModel {\n  const model = getOntologyTreeModel(store, rui.body.id, 'body', ccf.asctb.part_of.id);\n  model.nodes[rui.body.id].children = [\n    'http://purl.obolibrary.org/obo/UBERON_0000955', // Brain\n    'http://purl.obolibrary.org/obo/UBERON_0000029', // Lymph Node\n    // 'http://purl.obolibrary.org/obo/UBERON_0002509', // Mesenteric Lymph Node\n    'http://purl.obolibrary.org/obo/UBERON_0000970', // Eye\n    // 'http://purl.obolibrary.org/obo/UBERON_0004548', // Eye, L\n    // 'http://purl.org/sig/ont/fma/fma54449', // Eye, R\n    'http://purl.obolibrary.org/obo/UBERON_0003889', // Fallopian Tube\n    // 'http://purl.obolibrary.org/obo/UBERON_0001303', // Fallopian Tube, L\n    // 'http://purl.obolibrary.org/obo/UBERON_0001302', // Fallopian Tube, R\n    'http://purl.obolibrary.org/obo/UBERON_0000948', // Heart\n    'http://purl.obolibrary.org/obo/UBERON_0002113', // Kidney\n    // 'http://purl.obolibrary.org/obo/UBERON_0004538', // Kidney, L\n    // 'http://purl.obolibrary.org/obo/UBERON_0004539', // Kidney, R\n    'http://purl.obolibrary.org/obo/UBERON_0001465', // Knee\n    // 'http://purl.org/sig/ont/fma/fma24978', // Knee, L\n    // 'http://purl.org/sig/ont/fma/fma24977', // Knee, R\n    'http://purl.obolibrary.org/obo/UBERON_0002107', // Liver\n    'http://purl.obolibrary.org/obo/UBERON_0002048', // Lungs\n    'http://purl.obolibrary.org/obo/UBERON_0001911', // Mammary Gland\n    // 'http://purl.org/sig/ont/fma/fma57991', // Mammary Gland, L\n    // 'http://purl.org/sig/ont/fma/fma57987', // Mammary Gland, R\n    'http://purl.obolibrary.org/obo/UBERON_0000992', // Ovary\n    // 'http://purl.org/sig/ont/fma/fma7214', // Ovary, L\n    // 'http://purl.org/sig/ont/fma/fma7213', // Ovary, R\n    'http://purl.obolibrary.org/obo/UBERON_0001264', // Pancreas\n    'http://purl.obolibrary.org/obo/UBERON_0001270', // Pelvis\n    'http://purl.obolibrary.org/obo/UBERON_0001987', // Placenta\n    'http://purl.obolibrary.org/obo/UBERON_0002367', // Prostate\n    'http://purl.obolibrary.org/obo/UBERON_0002097', // Skin\n    'http://purl.obolibrary.org/obo/UBERON_0002108', // Small Intestine\n    'http://purl.obolibrary.org/obo/UBERON_0002240', // Spinal Cord\n    'http://purl.obolibrary.org/obo/UBERON_0000059', // Large Intestine\n    'http://purl.obolibrary.org/obo/UBERON_0002106', // Spleen\n    'http://purl.obolibrary.org/obo/UBERON_0002370', // Thymus\n    'http://purl.obolibrary.org/obo/UBERON_0000056', // Ureter\n    // 'http://purl.obolibrary.org/obo/UBERON_0001223', // Ureter, L\n    // 'http://purl.obolibrary.org/obo/UBERON_0001222', // Ureter, R\n    'http://purl.obolibrary.org/obo/UBERON_0001255', // Urinary Bladder\n    'http://purl.obolibrary.org/obo/UBERON_0000995', // Uterus\n    'http://purl.obolibrary.org/obo/UBERON_0004537' // Blood Vasculature\n  ].filter(iri => iri in model.nodes);\n  return model;\n}\n\nexport const getAnatomicalStructureTreeModel = memoize(getAnatomicalStructureTreeModelSlowly, () => '');\n\nexport function getCellTypeTreeModel(store: Store): OntologyTreeModel {\n  return getOntologyTreeModel(store, rui.cell.id, 'cell', ccf.asctb.ct_is_a.id);\n}\n","import { Store } from 'triple-store-utils';\nimport { DatasetResult, DonorResult, TissueBlockResult, TissueSectionResult } from '../interfaces';\nimport { getEntries, getMappedResult } from '../util/n3-functions';\nimport { entity } from '../util/prefixes';\n\n\n/** Entity iri to property path. */\nconst listResultSet: { [iri: string]: string } = {\n  [entity.label.id]: 'label',\n  [entity.description.id]: 'description',\n  [entity.link.id]: 'link'\n};\n\nconst donorResultSet: { [iri: string]: string } = {\n  ...listResultSet,\n  [entity.providerName.id]: 'providerName'\n};\n\nconst datasetResultSet: { [iri: string]: string } = {\n  ...listResultSet,\n  [entity.technology.id]: 'technology',\n  [entity.thumbnail.id]: 'thumbnail',\n};\n\nconst tissueSectionResultSet: { [iri: string]: string } = {\n  ...listResultSet,\n  [entity.sampleType.id]: 'sampleType',\n  [entity.sectionNumber.id]: 'sectionNumber',\n  [entity.datasets.id]: 'datasets',\n};\n\nconst tissueBlockResultSet: { [iri: string]: string } = {\n  ...listResultSet,\n  [entity.sampleType.id]: 'sampleType',\n  [entity.sectionCount.id]: 'sectionCount',\n  [entity.sectionSize.id]: 'sectionSize',\n  [entity.sectionUnits.id]: 'sectionUnits',\n\n  [entity.donor.id]: 'donor',\n  [entity.spatialEntity.id]: 'spatialEntityId',\n  [entity.sections.id]: 'sections',\n  [entity.datasets.id]: 'datasets',\n};\n\n/**\n * Extracts a single donor result from the triple store.\n *\n * @param store The triple store.\n * @param iri The entity id.\n * @returns The list data.\n */\nexport function getDonorResult(store: Store, iri: string): DonorResult {\n  return getMappedResult(store, iri, 'Donor', donorResultSet);\n}\n\n/**\n * Extracts a single dataset result from the triple store.\n *\n * @param store The triple store.\n * @param iri The entity id.\n * @returns The list data.\n */\nexport function getDatasetResult(store: Store, iri: string): DatasetResult {\n  return getMappedResult(store, iri, 'Dataset', datasetResultSet);\n}\n\n/**\n * Extracts a single tissue section result from the triple store.\n *\n * @param store The triple store.\n * @param iri The entity id.\n * @returns The list data.\n */\nexport function getTissueSectionResult(store: Store, iri: string): TissueSectionResult {\n  // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n  const result = { '@id': iri, '@type': 'Sample', datasets: [] as DatasetResult[] } as TissueSectionResult;\n  for (const [key, value] of getEntries(store, iri, tissueSectionResultSet)) {\n    if (key === 'datasets') {\n      const dataset = getDatasetResult(store, value as string);\n      result[key].push(dataset);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Extracts a single tissue block result from the triple store.\n *\n * @param store The triple store.\n * @param iri The entity id.\n * @returns The list data.\n */\nexport function getTissueBlockResult(store: Store, iri: string): TissueBlockResult {\n  // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n  const result = { '@id': iri, '@type': 'Sample',\n    sections: [] as TissueSectionResult[], datasets: [] as DatasetResult[]\n  } as TissueBlockResult;\n  for (const [key, value] of getEntries(store, iri, tissueBlockResultSet)) {\n    if (key === 'sections') {\n      const section = getTissueSectionResult(store, value as string);\n      result[key].push(section);\n    } else if (key === 'datasets') {\n      const dataset = getDatasetResult(store, value as string);\n      result[key].push(dataset);\n    } else if (key === 'donor') {\n      result[key] = getDonorResult(store, value as string);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n","import { DatabaseStatus } from '../interfaces';\nimport { CCFDatabase } from '../ccf-database';\n\n\nexport class CCFDatabaseStatusTracker {\n  status: 'Ready' | 'Loading' | 'Error';\n  message?: string;\n  loadTime?: number;\n\n  constructor(public database: CCFDatabase) {\n    this.connect();\n  }\n\n  toJson(): DatabaseStatus {\n    return {\n      status: this.status,\n      message: this.message,\n      checkback: this.status === 'Ready' || this.status === 'Error' ? 60 * 60 * 1000 : 2000,\n      loadTime: this.loadTime\n    };\n  }\n\n  private connect(): Promise<void> {\n    this.status = 'Loading';\n    this.message = 'Loading database';\n\n    const startTime = Date.now();\n    return this.database.connect()\n      .then(async (loaded) => {\n        if (loaded) {\n          // Warm up the database\n          this.message = 'Building scene';\n          await this.database.getScene();\n          this.message = 'Building tissue block results';\n          await this.database.getTissueBlockResults();\n          this.message = 'Aggregating results';\n          await this.database.getAggregateResults();\n          this.status = 'Ready';\n          this.message = 'Database successfully loaded';\n        } else {\n          this.status = 'Error';\n          this.message = 'Unknown error while loading database';\n        }\n      })\n      .catch((error: { message?: string }) => {\n        this.status = 'Error';\n        this.message = error?.message ?? 'Unknown error while loading database';\n      })\n      .finally(() => {\n        this.loadTime = Date.now() - startTime;\n      });\n  }\n}\n","\nimport { Context, JsonLd } from 'jsonld/jsonld-spec';\n\n/* eslint-disable @typescript-eslint/naming-convention */\n/** CCF v2.0 JSON-LD Context */\nconst CCF_CONTEXT = {\n  '@context': {\n    '@base': 'http://purl.org/ccf/',\n    '@vocab': 'http://purl.org/ccf/',\n    'ccf': 'http://purl.org/ccf/',\n    'rdfs': 'http://www.w3.org/2000/01/rdf-schema#',\n    'dcterms': 'http://purl.org/dc/terms/',\n    'label': 'rdfs:label',\n    'description': 'rdfs:comment',\n    'link': 'ccf:url',\n    'sex': 'ccf:sex',\n    'age': 'ccf:age',\n    'bmi': 'ccf:bmi',\n    'consortium_name': 'ccf:consortium_name',\n    'provider_name': 'ccf:tissue_provider_name',\n    'provider_uuid': 'ccf:tissue_provider_uuid',\n    'donor': {\n      '@id': 'ccf:comes_from',\n      '@type': '@id'\n    },\n    'samples': {\n      '@reverse': 'donor'\n    },\n    'sections': {\n      '@id': 'ccf:subdivided_into_sections',\n      '@type': '@id'\n    },\n    'datasets': {\n      '@id': 'ccf:generates_dataset',\n      '@type': '@id'\n    },\n    'sample_type': 'ccf:sample_type',\n    'section_count': 'ccf:section_count',\n    'section_size': 'ccf:section_size',\n    'section_units': 'ccf:section_size_unit',\n    'section_number': 'ccf:section_number',\n    'rui_location': {\n      '@id': 'ccf:has_registration_location',\n      '@type': '@id'\n    },\n    'ccf_annotations': {\n      '@id': 'ccf:collides_with',\n      '@type': '@id',\n      '@container': '@set'\n    },\n    'representation_of': {\n      '@id': 'ccf:representation_of',\n      '@type': '@id'\n    },\n    'reference_organ': {\n      '@id': 'ccf:has_reference_organ',\n      '@type': '@id'\n    },\n    'extraction_set_for': {\n      '@id': 'ccf:extraction_set_for',\n      '@type': '@id'\n    },\n    'extraction_set': {\n      '@id': 'ccf:has_extraction_set',\n      '@type': '@id'\n    },\n    'organ_owner_sex': 'ccf:organ_owner_sex',\n    'side': 'ccf:organ_side',\n    'rui_rank': 'ccf:rui_rank',\n    'slice_thickness': 'ccf:slice_thickness',\n    'slice_count': 'ccf:slice_count',\n    'object': {\n      '@id': 'ccf:has_object_reference',\n      '@type': '@id'\n    },\n    'creation_date': 'dcterms:created',\n    'updated_date': 'ccf:updated_date',\n    'creator': 'dcterms:creator',\n    'creator_first_name': 'ccf:creator_first_name',\n    'creator_last_name': 'ccf:creator_last_name',\n    'placement': {\n      '@reverse': 'ccf:placement_for'\n    },\n    'placement_date': 'dcterms:created',\n    'rotation_order': 'ccf:rotation_order',\n    'dimension_units': 'ccf:dimension_unit',\n    'rotation_units': 'ccf:rotation_unit',\n    'scaling_units': 'ccf:scaling_unit',\n    'translation_units': 'ccf:translation_unit',\n    'source': {\n      '@id': 'ccf:placement_for',\n      '@type': '@id'\n    },\n    'target': {\n      '@id': 'ccf:placement_relative_to',\n      '@type': '@id'\n    },\n    'x_rotation': 'ccf:x_rotation',\n    'y_rotation': 'ccf:y_rotation',\n    'z_rotation': 'ccf:z_rotation',\n    'x_scaling': 'ccf:x_scaling',\n    'y_scaling': 'ccf:y_scaling',\n    'z_scaling': 'ccf:z_scaling',\n    'x_translation': 'ccf:x_translation',\n    'y_translation': 'ccf:y_translation',\n    'z_translation': 'ccf:z_translation',\n    'x_dimension': 'ccf:x_dimension',\n    'y_dimension': 'ccf:y_dimension',\n    'z_dimension': 'ccf:z_dimension',\n    'ontology_terms': {\n      '@id': 'ccf:has_ontology_term',\n      '@type': '@id'\n    },\n    'technology': 'ccf:technology',\n    'thumbnail': 'ccf:thumbnail',\n    'file': 'ccf:file_url',\n    'file_format': 'ccf:file_format',\n    'file_subpath': 'ccf:file_subpath'\n  }\n};\n/* eslint-enable @typescript-eslint/naming-convention */\n\n/**\n * Function which takes JSON-LD data and makes patches to update from CCF v1.x to v2.0 automatically\n *\n * @param jsonLdString the input JSON-LD as a string\n * @returns A JSON-LD object derived from the given string with updated data to be compatible with CCF v2.0\n */\nexport function patchJsonLd(jsonLdString: string): JsonLd {\n  return JSON.parse(jsonLdString, (key, value) => {\n    if (key === 'ccf_annotations' && Array.isArray(value)) {\n      return value.map((iri: string) => {\n        if (iri?.startsWith('http://purl.obolibrary.org/obo/FMA_')) {\n          return iri.replace(\n            'http://purl.obolibrary.org/obo/FMA_',\n            'http://purl.org/sig/ont/fma/fma'\n          );\n        } else {\n          return iri;\n        }\n      });\n    } else if (key === '@context' && value && (\n      value === 'https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld'\n        || value === 'https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld'\n        || value === 'https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld'\n        || (value as Context)['@base'] === 'http://purl.org/ccf/latest/ccf-entity.owl#'\n    )) {\n      return CCF_CONTEXT;\n    }\n    return value;\n  });\n}\n","import { Store, readQuads, DataFactory, NamedNode } from 'triple-store-utils';\nimport { getAnatomicalStructureTreeModel } from '../queries/ontology-tree-n3';\nimport { ccf, entity } from './prefixes';\n\n\n/**\n * Function to add additional ccf_annotations to rui locations based on the\n * reference organ it was placed relative to.\n *\n * @param store the triple store holding the CCF.OWL data\n */\nexport function enrichRuiLocations(store: Store): void {\n  const tree = getAnatomicalStructureTreeModel(store);\n  const refOrganMap: Map<string, NamedNode[]> = new Map();\n\n  // Build a map from reference organ to ccf annotations via representation_of and the AS partonomy\n  for (const { subject: organ, object: term } of readQuads(store, null, ccf.spatialEntity.representation_of, null, null)) {\n    const annotations = new Set([term.id]);\n    let parent = tree.nodes[term.id]?.parent;\n    while (parent) {\n      if (annotations.has(parent)) {\n        break;\n      } else {\n        annotations.add(parent);\n        parent = tree.nodes[parent]?.parent;\n      }\n    }\n    refOrganMap.set(organ.id, [ ...annotations].map(s => DataFactory.namedNode(s)));\n  }\n\n  // Add AS terms for rui locations based on the reference organs they are placed relative to\n  for (const { object: ruiLocation } of readQuads(store, null, entity.spatialEntity, null, null)) {\n    for (const { subject: placement } of readQuads(store, null, ccf.spatialPlacement.source, ruiLocation, null)) {\n      for (const { object: organ } of readQuads(store, placement, ccf.spatialPlacement.target, null, null)) {\n        for (const term of refOrganMap.get(organ.id) ?? []) {\n          store.addQuad(DataFactory.namedNode(ruiLocation.id), ccf.spatialEntity.ccf_annotations, term);\n        }\n      }\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/member-ordering */\nimport { delMany, get, setMany } from 'idb-keyval';\nimport { JsonLd } from 'jsonld/jsonld-spec';\nimport {\n  addJsonLdToStore, addN3ToStore, addRdfXmlToStore, DataFactory, deserializeN3Store, Quad, serializeN3Store, Store\n} from 'triple-store-utils';\n\nimport { CCFSpatialGraph } from './ccf-spatial-graph';\nimport { CCFSpatialScene, SpatialSceneNode } from './ccf-spatial-scene';\nimport { searchHubmap } from './hubmap/hubmap-data-import';\nimport { AggregateResult, DatabaseStatus, Filter, OntologyTreeModel, TissueBlockResult } from './interfaces';\nimport { getAggregateResults, getDatasetTechnologyNames, getProviderNames } from './queries/aggregate-results-n3';\nimport { findIds } from './queries/find-ids-n3';\nimport { getCellTypeTermOccurences, getOntologyTermOccurences } from './queries/ontology-term-occurences-n3';\nimport { getAnatomicalStructureTreeModel, getCellTypeTreeModel } from './queries/ontology-tree-n3';\nimport { getSpatialEntityForEntity } from './queries/spatial-result-n3';\nimport { getTissueBlockResult } from './queries/tissue-block-result-n3';\nimport { FlatSpatialPlacement, SpatialEntity } from './spatial-types';\nimport { CCFDatabaseStatusTracker } from './util/ccf-database-status-tracker';\nimport { patchJsonLd } from './util/patch-jsonld';\nimport { enrichRuiLocations } from './util/enrich-rui-locations';\n\n\n/** Database initialization options. */\nexport interface CCFDatabaseOptions {\n  /** A url to load data from. */\n  ccfOwlUrl: string;\n  /** Context. */\n  ccfContextUrl: string;\n  /** A list of data sources (in n3, rdf, xml, owl, or jsonld format) */\n  dataSources: (string|JsonLd)[];\n  /** Data service type. */\n  hubmapDataService: 'static' | 'search-api';\n  /** HuBMAP Elastic Search Query */\n  hubmapQuery?: unknown;\n  /** Hubmap Portal url. */\n  hubmapPortalUrl: string;\n  /** Hubmap data url. */\n  hubmapDataUrl: string;\n  /** Hubmap assets api url. */\n  hubmapAssetsUrl: string;\n  /** HuBMAP Service Token. */\n  hubmapToken?: string;\n}\n\n/** Default initialization options. */\nexport const DEFAULT_CCF_DB_OPTIONS: CCFDatabaseOptions = {\n  ccfOwlUrl: 'https://purl.org/ccf/latest/ccf.owl',\n  ccfContextUrl: 'https://purl.org/ccf/latest/ccf-context.jsonld',\n  dataSources: [],\n  hubmapDataService: 'static',\n  hubmapPortalUrl: 'https://portal.hubmapconsortium.org/',\n  hubmapDataUrl: '',\n  hubmapAssetsUrl: 'https://assets.hubmapconsortium.org'\n};\n\n/** Database provider. */\nexport class CCFDatabase {\n  /** The triple store. */\n  store: Store;\n  /** The spatial graph */\n  graph: CCFSpatialGraph;\n  /** Creates SpatialEntity Scenes */\n  scene: CCFSpatialScene;\n  /** If the database is initialized */\n  private initializing?: Promise<void>;\n\n  private status: CCFDatabaseStatusTracker;\n\n  /**\n   * Creates an instance of ccfdatabase.\n   *\n   * @param [options] Initialization options.\n   */\n  constructor(public options: CCFDatabaseOptions = DEFAULT_CCF_DB_OPTIONS) {\n    this.store = new Store(undefined, { factory: DataFactory });\n    this.graph = new CCFSpatialGraph(this);\n    this.scene = new CCFSpatialScene(this);\n  }\n\n  /**\n   * Connects the database.\n   *\n   * @param [options] Options used to initialize.\n   * @returns A promise resolving to true if data has been loaded into the database.\n   */\n  async connect(options?: CCFDatabaseOptions, cached = false): Promise<boolean> {\n    if (options) {\n      this.options = options;\n    }\n    if (!this.initializing) {\n      if (cached) {\n        this.initializing = this.cachedConnect();\n      } else {\n        this.initializing = this.doConnect();\n      }\n    }\n    await this.initializing;\n    return this.store.size > 0;\n  }\n\n  private async cachedConnect(): Promise<void> {\n    const start = new Date().getTime();\n    const lastModifiedKey = 'ccf-database.last_modified';\n    const ccfDatabaseKey = 'ccf-database';\n\n    const lastModified = await get(lastModifiedKey).catch(() => undefined);\n    let serializedDb: string | undefined;\n\n    if (lastModified && start - new Date(+lastModified).getTime() > 60*60*1000) {\n      await delMany([ccfDatabaseKey, lastModifiedKey]).catch(() => undefined);\n    } else {\n      serializedDb = await get(ccfDatabaseKey).catch(() => undefined);\n    }\n\n    if (serializedDb) {\n      await this.deserialize(serializedDb);\n    } else {\n      await this.doConnect();\n\n      setMany([\n        [ccfDatabaseKey, this.serialize()],\n        [lastModifiedKey, '' + start]\n      ]).catch(() => undefined);\n    }\n  }\n\n  /**\n   * Actually connects to the database.\n   *\n   * @returns A promise resolving to void when connected.\n   */\n  private async doConnect(): Promise<void> {\n    const ops: Promise<unknown>[] = [];\n    const sources: (string|JsonLd)[] = this.options.dataSources?.concat() ?? [];\n\n    const ccfOwlUrl = this.options.ccfOwlUrl;\n    if (ccfOwlUrl.startsWith('{')) {\n      // serialized n3 store was provided as the ccfOwlUrl\n      this.store = deserializeN3Store(ccfOwlUrl, DataFactory);\n    } else if (ccfOwlUrl.endsWith('.n3store.json')) {\n      const storeString = await fetch(ccfOwlUrl).then(r => r.text())\n        .catch(() => console.log('Couldn\\'t locate serialized store.'));\n      if (storeString) {\n        this.store = deserializeN3Store(storeString, DataFactory);\n      }\n    } else if (ccfOwlUrl?.length > 0) {\n      sources.push(ccfOwlUrl);\n    }\n    if (this.options.hubmapDataUrl) {\n      if (this.options.hubmapDataUrl.endsWith('jsonld')) {\n        sources.push(this.options.hubmapDataUrl);\n      } else {\n        ops.push(searchHubmap(\n          this.options.hubmapDataUrl,\n          this.options.hubmapDataService,\n          this.options.hubmapQuery,\n          this.options.hubmapToken,\n          this.options.hubmapAssetsUrl,\n          this.options.hubmapPortalUrl\n        ).then((jsonld) => {\n          if (jsonld) {\n            return this.addDataSources([jsonld]);\n          } else {\n            return undefined;\n          }\n        }));\n      }\n    }\n    ops.push(this.addDataSources(sources));\n    await Promise.all(ops);\n    await this.synchronize();\n  }\n\n  async addDataSources(sources: (string|JsonLd)[], inputStore?: Store): Promise<this> {\n    const store: Store = inputStore ?? this.store;\n    await Promise.all(\n      sources.map(async (source) => {\n        if (typeof source === 'string') {\n          if ((source.startsWith('http') || source.startsWith('assets/')) && source.includes('jsonld')) {\n            source = await fetch(source).then(r => r.text());\n            source = patchJsonLd(source as string);\n            await addJsonLdToStore(source, store);\n          } else if (source.endsWith('n3')) {\n            await addN3ToStore(source, store);\n          } else if (source.endsWith('rdf') || source.endsWith('owl') || source.endsWith('xml')) {\n            await addRdfXmlToStore(source, store);\n          } else {\n            // Passthrough assumes a JSON-LD response\n            source = patchJsonLd(source);\n            await addJsonLdToStore(source, store);\n          }\n        } else {\n          source = patchJsonLd(JSON.stringify(source));\n          await addJsonLdToStore(source, store);\n        }\n      })\n    );\n    return this;\n  }\n\n  async synchronize(): Promise<this> {\n    // Add a small delay to allow the triple store to settle\n    await new Promise(r => {\n      setTimeout(r, 500);\n    });\n    this.graph.createGraph();\n    enrichRuiLocations(this.store);\n    return this;\n  }\n\n  serialize(): string {\n    return serializeN3Store(this.store);\n  }\n\n  async deserialize(value: string): Promise<void> {\n    this.store = deserializeN3Store(value, DataFactory);\n    this.graph = new CCFSpatialGraph(this);\n    this.scene = new CCFSpatialScene(this);\n    await new Promise(r => {\n      setTimeout(r, 10);\n    });\n  }\n\n  /**\n   * Gets all ids matching the filter.\n   *\n   * @param [filter] The filter.\n   * @returns A set of all matching ids.\n   */\n  getIds(filter: Filter = {} as Filter): Set<string> {\n    return findIds(this.store, this.graph, filter);\n  }\n\n  /**\n   * Gets the data for an object.\n   *\n   * @param id The id of the requested object.\n   * @returns The object data.\n   */\n  get(id: string): Quad[] {\n    return this.store.getQuads(DataFactory.namedNode(id), null, null, null);\n  }\n\n  /**\n   * Gets the data for objects matching a filter.\n   *\n   * @param [filter] The filter.\n   * @returns An array of data.\n   */\n  search(filter: Filter = {} as Filter): Quad[][] {\n    return [...this.getIds(filter)].map((s) => this.get(s));\n  }\n\n  /**\n   * Gets all spatial entities for a filter.\n   *\n   * @param [filter] The filter.\n   * @returns A list of spatial entities.\n   */\n  getSpatialEntities(filter?: Filter): SpatialEntity[] {\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    filter = { ...filter, hasSpatialEntity: true } as Filter;\n    return [...this.getIds(filter)].map((s) => getSpatialEntityForEntity(this.store, s) as SpatialEntity);\n  }\n\n  async getDatabaseStatus(): Promise<DatabaseStatus> {\n    if (!this.status) {\n      this.status = new CCFDatabaseStatusTracker(this);\n    }\n    return this.status.toJson();\n  }\n\n  /**\n   * Get a list of technology names used by datasets\n   *\n   * @returns list of unique technology names in the data\n   */\n  async getDatasetTechnologyNames(): Promise<string[]> {\n    return getDatasetTechnologyNames(this.store);\n  }\n\n  /**\n   * Get a list of provider names from the database\n   *\n   * @returns list of unique provider names in the data\n   */\n  async getProviderNames(): Promise<string[]> {\n    return getProviderNames(this.store);\n  }\n\n  /**\n   * Gets all tissue block results for a filter.\n   *\n   * @param [filter] The filter.\n   * @returns A list of results.\n   */\n  async getTissueBlockResults(filter?: Filter): Promise<TissueBlockResult[]> {\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    filter = { ...filter, hasSpatialEntity: true } as Filter;\n    return [...this.getIds(filter)].map((s) => getTissueBlockResult(this.store, s));\n  }\n\n  /**\n   * Gets all aggregate results for a filter.\n   *\n   * @param [filter] The filter.\n   * @returns A list of aggregate data.\n   */\n  async getAggregateResults(filter?: Filter): Promise<AggregateResult[]> {\n    return getAggregateResults(this.getIds(filter), this.store);\n  }\n\n  /**\n   * Get number of occurrences of ontology terms for a set of ids.\n   *\n   * @param [filter] The filter.\n   * @returns Ontology term counts.\n   */\n  async getOntologyTermOccurences(filter?: Filter): Promise<Record<string, number>> {\n    return getOntologyTermOccurences(this.getIds(filter), this.store);\n  }\n\n  /**\n   * Get number of occurrences of cell type terms for a set of ids.\n   *\n   * @param [filter] The filter.\n   * @returns Cell type term counts.\n   */\n  async getCellTypeTermOccurences(filter?: Filter): Promise<Record<string, number>> {\n    return getCellTypeTermOccurences(this.getIds(filter), this.store);\n  }\n\n  /**\n   * Get ontology term tree nodes\n   *\n   * @returns Ontology term counts.\n   */\n  async getOntologyTreeModel(): Promise<OntologyTreeModel> {\n    return getAnatomicalStructureTreeModel(this.store);\n  }\n\n  /**\n   * Get cell type term tree nodes\n   *\n   * @returns Ontology term counts.\n   */\n  async getCellTypeTreeModel(): Promise<OntologyTreeModel> {\n    return getCellTypeTreeModel(this.store);\n  }\n\n  /**\n   * Get reference organs\n   *\n   * @returns Ontology term counts.\n   */\n  async getReferenceOrgans(): Promise<SpatialEntity[]> {\n    return this.scene.getReferenceOrgans();\n  }\n\n  /**\n   * Get all nodes to form the 3D scene of reference body, organs, and tissues\n   *\n   * @param [filter] The filter.\n   * @returns A list of Spatial Scene Nodes for the 3D Scene\n   */\n  async getScene(filter?: Filter): Promise<SpatialSceneNode[]> {\n    this.graph.createGraph();\n    return this.scene.getScene(filter);\n  }\n\n  /**\n   * Get all nodes to form the 3D scene of reference organ and tissues\n   *\n   * @param [organIri] The Reference Organ IRI\n   * @param [filter] The filter.\n   * @returns A list of Spatial Scene Nodes for the 3D Scene\n   */\n  async getReferenceOrganScene(organIri: string, filter?: Filter): Promise<SpatialSceneNode[]> {\n    this.graph.createGraph();\n    return this.scene.getReferenceOrganScene(organIri, filter);\n  }\n\n  async getSpatialPlacement(source: SpatialEntity, targetIri: string): Promise<FlatSpatialPlacement | undefined> {\n    return this.graph.getSpatialPlacement(source, targetIri);\n  }\n}\n","import { Matrix4, toRadians } from '@math.gl/core';\nimport { SpatialSceneNode } from '../ccf-spatial-scene';\nimport { SpatialSearch } from '../interfaces';\nimport { SpatialEntity } from '../spatial-types';\n\ntype Color = [number, number, number, number];\nconst gold: Color = [240, 183, 98, 255];\nconst red: Color = [213, 0, 0, 255];\nconst green: Color = [29, 204, 101, 255];\nconst blue: Color = [41, 121, 255, 255];\n\n/**\n * Create a set of scene nodes for the body-ui to show the probing sphere and lines around it\n * for a given spatial search.\n * @param node the Spatial Entity (usually a reference organ) that the sphere is probing into\n * @param sphere the Spatial Search that defines where and how big the probing sphere is\n * @returns a set of scene nodes for the body-ui\n */\nexport function getProbingSphereScene(node: SpatialEntity, sphere?: SpatialSearch): SpatialSceneNode[] {\n  const sceneWidth = node.x_dimension / 1000;\n  const sceneHeight = node.y_dimension / 1000;\n  const sceneDepth = node.z_dimension / 1000;\n  const defaultSphereRadius = Math.max(sceneWidth, sceneHeight, sceneDepth) * 0.07;\n  const sphereLineRadius = defaultSphereRadius * 0.05;\n  const sphereLineLength = defaultSphereRadius * 2;\n  const sphereConeRadius = sphereLineRadius * 4;\n\n  if (!sphere) {\n    sphere = {\n      target: node.representation_of ?? node['@id'],\n      radius: defaultSphereRadius,\n      x: sceneWidth / 2,\n      y: sceneHeight / 2,\n      z: sceneDepth / 2\n    };\n  } else {\n    sphere = {\n      ...sphere,\n      radius: sphere.radius / 1000,\n      x: sphere.x / 1000,\n      y: sphere.y / 1000,\n      z: sphere.z / 1000\n    };\n  }\n\n  return [\n    // Probing Sphere\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingSphere',\n      '@type': 'SpatialSceneNode',\n      unpickable: false,\n      geometry: 'sphere',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([sphere.x, sphere.y, sphere.z]).scale(sphere.radius),\n      color: gold\n    },\n    // Probing Sphere Positive X Axis (D)\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereXD',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x + sphere.radius + sphereLineLength / 2, sphere.y, sphere.z])\n        .rotateZ(toRadians(-90))\n        .scale([sphereLineRadius, sphereLineLength, sphereLineRadius]),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereXDCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x + sphere.radius + sphereLineLength, sphere.y, sphere.z])\n        .rotateZ(toRadians(-90))\n        .scale([ sphereConeRadius, sphereConeRadius * 3, sphereConeRadius ]),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereXDLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'D',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x + sphere.radius + sphereLineLength + sphereConeRadius * 3, sphere.y, sphere.z])\n        .scale(sphereConeRadius),\n      color: red\n    },\n    // Probing Sphere Negative X Axis (A)\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereXA',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x - sphere.radius - sphereLineLength / 2, sphere.y, sphere.z])\n        .rotateZ(toRadians(-90))\n        .scale([sphereLineRadius, sphereLineLength, sphereLineRadius]),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereXACone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x - sphere.radius - sphereLineLength, sphere.y, sphere.z])\n        .rotateZ(toRadians(90))\n        .scale([ sphereConeRadius, sphereConeRadius * 3, sphereConeRadius ]),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereXALabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'A',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x - sphere.radius - sphereLineLength - sphereConeRadius * 3.5, sphere.y, sphere.z])\n        .scale(sphereConeRadius),\n      color: red\n    },\n    // Probing Sphere Positive Y Axis (W)\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereYW',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y + sphere.radius + sphereLineLength / 2, sphere.z])\n        .scale([sphereLineRadius, sphereLineLength, sphereLineRadius]),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereYWCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y + sphere.radius + sphereLineLength, sphere.z])\n        .scale([ sphereConeRadius, sphereConeRadius * 3, sphereConeRadius ]),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereYWLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'W',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y + sphere.radius + sphereLineLength + sphereConeRadius * 3, sphere.z])\n        .scale(sphereConeRadius),\n      color: green\n    },\n    // Probing Sphere Negative Y Axis (S)\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereYS',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y - sphere.radius - sphereLineLength / 2, sphere.z])\n        .scale([sphereLineRadius, sphereLineLength, sphereLineRadius]),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereYSCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y - sphere.radius - sphereLineLength, sphere.z])\n        .rotateZ(toRadians(180))\n        .scale([ sphereConeRadius, sphereConeRadius * 3, sphereConeRadius ]),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereYSLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'S',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y - sphere.radius - sphereLineLength - sphereConeRadius * 3.5, sphere.z])\n        .scale(sphereConeRadius),\n      color: green\n    },\n    // Probing Sphere Positive Z Axis (E)\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereZE',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y, sphere.z + sphere.radius + sphereLineLength / 2])\n        .rotateX(toRadians(90))\n        .scale([sphereLineRadius, sphereLineLength, sphereLineRadius]),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereZECone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y, sphere.z + sphere.radius + sphereLineLength])\n        .rotateX(toRadians(90))\n        .scale([ sphereConeRadius, sphereConeRadius * 3, sphereConeRadius ]),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereZELabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'E',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y, sphere.z + sphere.radius + sphereLineLength + sphereConeRadius * 3])\n        .scale(sphereConeRadius),\n      color: blue\n    },\n    // Probing Sphere Negative Z Axis (Q)\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereZQ',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y, sphere.z - sphere.radius - sphereLineLength / 2])\n        .rotateX(toRadians(-90))\n        .scale([sphereLineRadius, sphereLineLength, sphereLineRadius]),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereZQCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y, sphere.z - sphere.radius - sphereLineLength])\n        .rotateX(toRadians(-90))\n        .scale([ sphereConeRadius, sphereConeRadius * 3, sphereConeRadius ]),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#ProbingsphereZQLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'Q',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sphere.x, sphere.y, sphere.z - sphere.radius - sphereLineLength - sphereConeRadius * 3.5])\n        .scale(sphereConeRadius),\n      color: blue\n    }\n  ];\n}\n","import { Matrix4, toRadians } from '@math.gl/core';\nimport { SpatialSceneNode } from '../ccf-spatial-scene';\nimport { SpatialEntity } from '../spatial-types';\n\n\ntype Color = [number, number, number, number];\nconst gray: Color = [204, 204, 204, 255];\nconst red: Color = [213, 0, 0, 255];\nconst green: Color = [29, 204, 101, 255];\nconst blue: Color = [41, 121, 255, 255];\n\n/**\n * Create a set of scene nodes for the body-ui to show the origin and lines extending to it's dimensions.\n * @param node the Spatial Entity (usually a reference organ) that the origin is defined by\n * @param includeLetters whether to show the keyboard letters associated with the origin points\n * @returns a set of scene nodes for the body-ui\n */\nexport function getOriginScene(node: SpatialEntity, includeLetters = false): SpatialSceneNode[] {\n  const sceneWidth = node.x_dimension / 1000;\n  const sceneHeight = node.y_dimension / 1000;\n  const sceneDepth = node.z_dimension / 1000;\n  const originRadius = Math.max(sceneWidth, sceneHeight, sceneDepth) * 0.05;\n  const lineRadius = originRadius * 0.1;\n\n  return [\n    // Origin Sphere\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginSphere',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'sphere',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).scale(originRadius),\n      color: gray\n    },\n    // Origin X Axis\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginX',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sceneWidth / 2, 0, 0])\n        .rotateZ(toRadians(-90))\n        .scale([lineRadius, sceneWidth, lineRadius]),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginXCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([sceneWidth, 0, 0])\n        .rotateZ(toRadians(-90))\n        .scale([ originRadius, originRadius * 3, originRadius ]),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginXALabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'A',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([-originRadius * 2, 0, 0]).scale(originRadius),\n      color: red\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginXDLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'D',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([sceneWidth + originRadius * 2, 0, 0]).scale(originRadius),\n      color: red\n    },\n    // Origin Y Axis\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginY',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([0, sceneHeight / 2, 0])\n        .scale([lineRadius, sceneHeight, lineRadius]),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginYCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([0, sceneHeight, 0])\n        .scale([ originRadius, originRadius * 3, originRadius ]),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginYSLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'S',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([originRadius * 1.5, originRadius * 1.5, 0]).scale(originRadius),\n      color: green\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginYWLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'W',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([0, sceneHeight + originRadius * 2, 0]).scale(originRadius),\n      color: green\n    },\n    // Origin Z Axis\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginZ',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cylinder',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([0, 0, sceneDepth / 2])\n        .rotateX(toRadians(90))\n        .scale([lineRadius, sceneDepth, lineRadius]),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginZCone',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'cone',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY)\n        .translate([0, 0, sceneDepth])\n        .rotateX(toRadians(90))\n        .scale([ originRadius, originRadius * 3, originRadius ]),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginZQLabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'Q',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([originRadius * 1.5, - originRadius * 1.5, 0]).scale(originRadius),\n      color: blue\n    },\n    {\n      '@id': 'http://purl.org/ccf/latest/ccf.owl#OriginZELabel',\n      '@type': 'SpatialSceneNode',\n      unpickable: true,\n      geometry: 'text',\n      text: 'E',\n      transformMatrix: new Matrix4(Matrix4.IDENTITY).translate([0, 0, sceneDepth + originRadius * 2]).scale(originRadius),\n      color: blue\n    }\n  ].filter(n => (includeLetters && n.geometry === 'text' && n.text) || !n.text) as SpatialSceneNode[];\n}\n","/*\n * Public API Surface of ccf\n */\nexport * from './lib/ccf-database';\nexport * from './lib/ccf-spatial-scene';\nexport * from './lib/interfaces';\nexport * from './lib/spatial-types';\nexport * from './lib/hubmap/hubmap-data-import';\nexport * from './lib/util/ccf-database-status-tracker';\nexport * from './lib/util/probing-sphere-scene';\nexport * from './lib/util/origin-scene';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["readQuads","fromRdf","Util","DataFactory","sortBy","toRadians","DirectedGraph","Matrix4","shortestPath","get","Euler","toDegrees","uuidV4","toNumber","set","omit","addJsonLdToStore","_a","OrientedBoundingBox","isFinite","memoize","Store","delMany","setMany","deserializeN3Store","addN3ToStore","addRdfXmlToStore","serializeN3Store","red","green","blue"],"mappings":"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"}