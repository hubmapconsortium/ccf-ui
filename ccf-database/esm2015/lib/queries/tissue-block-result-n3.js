import { getEntries, getMappedResult } from '../util/n3-functions';
import { entity } from '../util/prefixes';
/** Entity iri to property path. */
const listResultSet = {
    [entity.label.id]: 'label',
    [entity.description.id]: 'description',
    [entity.link.id]: 'link'
};
const donorResultSet = Object.assign(Object.assign({}, listResultSet), { [entity.providerName.id]: 'providerName' });
const datasetResultSet = Object.assign(Object.assign({}, listResultSet), { [entity.technology.id]: 'technology', [entity.thumbnail.id]: 'thumbnail' });
const tissueSectionResultSet = Object.assign(Object.assign({}, listResultSet), { [entity.sampleType.id]: 'sampleType', [entity.sectionNumber.id]: 'sectionNumber', [entity.datasets.id]: 'datasets' });
const tissueBlockResultSet = Object.assign(Object.assign({}, listResultSet), { [entity.sampleType.id]: 'sampleType', [entity.sectionCount.id]: 'sectionCount', [entity.sectionSize.id]: 'sectionSize', [entity.sectionUnits.id]: 'sectionUnits', [entity.donor.id]: 'donor', [entity.spatialEntity.id]: 'spatialEntityId', [entity.sections.id]: 'sections', [entity.datasets.id]: 'datasets' });
/**
 * Extracts a single donor result from the triple store.
 *
 * @param store The triple store.
 * @param iri The entity id.
 * @returns The list data.
 */
export function getDonorResult(store, iri) {
    return getMappedResult(store, iri, 'Donor', donorResultSet);
}
/**
 * Extracts a single dataset result from the triple store.
 *
 * @param store The triple store.
 * @param iri The entity id.
 * @returns The list data.
 */
export function getDatasetResult(store, iri) {
    return getMappedResult(store, iri, 'Dataset', datasetResultSet);
}
/**
 * Extracts a single tissue section result from the triple store.
 *
 * @param store The triple store.
 * @param iri The entity id.
 * @returns The list data.
 */
export function getTissueSectionResult(store, iri) {
    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
    const result = { '@id': iri, '@type': 'Sample', datasets: [] };
    for (const [key, value] of getEntries(store, iri, tissueSectionResultSet)) {
        if (key === 'datasets') {
            const dataset = getDatasetResult(store, value);
            result[key].push(dataset);
        }
        else {
            result[key] = value;
        }
    }
    return result;
}
/**
 * Extracts a single tissue block result from the triple store.
 *
 * @param store The triple store.
 * @param iri The entity id.
 * @returns The list data.
 */
export function getTissueBlockResult(store, iri) {
    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
    const result = { '@id': iri, '@type': 'Sample',
        sections: [], datasets: []
    };
    for (const [key, value] of getEntries(store, iri, tissueBlockResultSet)) {
        if (key === 'sections') {
            const section = getTissueSectionResult(store, value);
            result[key].push(section);
        }
        else if (key === 'datasets') {
            const dataset = getDatasetResult(store, value);
            result[key].push(dataset);
        }
        else if (key === 'donor') {
            result[key] = getDonorResult(store, value);
        }
        else {
            result[key] = value;
        }
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGlzc3VlLWJsb2NrLXJlc3VsdC1uMy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NjZi1kYXRhYmFzZS9zcmMvbGliL3F1ZXJpZXMvdGlzc3VlLWJsb2NrLXJlc3VsdC1uMy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ25FLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUcxQyxtQ0FBbUM7QUFDbkMsTUFBTSxhQUFhLEdBQThCO0lBQy9DLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPO0lBQzFCLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsRUFBRSxhQUFhO0lBQ3RDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNO0NBQ3pCLENBQUM7QUFFRixNQUFNLGNBQWMsbUNBQ2YsYUFBYSxLQUNoQixDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLEVBQUUsY0FBYyxHQUN6QyxDQUFDO0FBRUYsTUFBTSxnQkFBZ0IsbUNBQ2pCLGFBQWEsS0FDaEIsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFDcEMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFdBQVcsR0FDbkMsQ0FBQztBQUVGLE1BQU0sc0JBQXNCLG1DQUN2QixhQUFhLEtBQ2hCLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQ3BDLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQzFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxVQUFVLEdBQ2pDLENBQUM7QUFF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QUcsS0FBSyxPQUFPLEVBQUU7WUFDMUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxLQUFLLEVBQUUsS0FBZSxDQUFDLENBQUM7U0FDdEQ7YUFBTTtZQUNMLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7U0FDckI7S0FDRjtJQUNELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9yZSB9IGZyb20gJ3RyaXBsZS1zdG9yZS11dGlscyc7XG5pbXBvcnQgeyBEYXRhc2V0UmVzdWx0LCBEb25vclJlc3VsdCwgVGlzc3VlQmxvY2tSZXN1bHQsIFRpc3N1ZVNlY3Rpb25SZXN1bHQgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IGdldEVudHJpZXMsIGdldE1hcHBlZFJlc3VsdCB9IGZyb20gJy4uL3V0aWwvbjMtZnVuY3Rpb25zJztcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gJy4uL3V0aWwvcHJlZml4ZXMnO1xuXG5cbi8qKiBFbnRpdHkgaXJpIHRvIHByb3BlcnR5IHBhdGguICovXG5jb25zdCBsaXN0UmVzdWx0U2V0OiB7IFtpcmk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICBbZW50aXR5LmxhYmVsLmlkXTogJ2xhYmVsJyxcbiAgW2VudGl0eS5kZXNjcmlwdGlvbi5pZF06ICdkZXNjcmlwdGlvbicsXG4gIFtlbnRpdHkubGluay5pZF06ICdsaW5rJ1xufTtcblxuY29uc3QgZG9ub3JSZXN1bHRTZXQ6IHsgW2lyaTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gIC4uLmxpc3RSZXN1bHRTZXQsXG4gIFtlbnRpdHkucHJvdmlkZXJOYW1lLmlkXTogJ3Byb3ZpZGVyTmFtZSdcbn07XG5cbmNvbnN0IGRhdGFzZXRSZXN1bHRTZXQ6IHsgW2lyaTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gIC4uLmxpc3RSZXN1bHRTZXQsXG4gIFtlbnRpdHkudGVjaG5vbG9neS5pZF06ICd0ZWNobm9sb2d5JyxcbiAgW2VudGl0eS50aHVtYm5haWwuaWRdOiAndGh1bWJuYWlsJyxcbn07XG5cbmNvbnN0IHRpc3N1ZVNlY3Rpb25SZXN1bHRTZXQ6IHsgW2lyaTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gIC4uLmxpc3RSZXN1bHRTZXQsXG4gIFtlbnRpdHkuc2FtcGxlVHlwZS5pZF06ICdzYW1wbGVUeXBlJyxcbiAgW2VudGl0eS5zZWN0aW9uTnVtYmVyLmlkXTogJ3NlY3Rpb25OdW1iZXInLFxuICBbZW50aXR5LmRhdGFzZXRzLmlkXTogJ2RhdGFzZXRzJyxcbn07XG5cbmNvbnN0IHRpc3N1ZUJsb2NrUmVzdWx0U2V0OiB7IFtpcmk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAuLi5saXN0UmVzdWx0U2V0LFxuICBbZW50aXR5LnNhbXBsZVR5cGUuaWRdOiAnc2FtcGxlVHlwZScsXG4gIFtlbnRpdHkuc2VjdGlvbkNvdW50LmlkXTogJ3NlY3Rpb25Db3VudCcsXG4gIFtlbnRpdHkuc2VjdGlvblNpemUuaWRdOiAnc2VjdGlvblNpemUnLFxuICBbZW50aXR5LnNlY3Rpb25Vbml0cy5pZF06ICdzZWN0aW9uVW5pdHMnLFxuXG4gIFtlbnRpdHkuZG9ub3IuaWRdOiAnZG9ub3InLFxuICBbZW50aXR5LnNwYXRpYWxFbnRpdHkuaWRdOiAnc3BhdGlhbEVudGl0eUlkJyxcbiAgW2VudGl0eS5zZWN0aW9ucy5pZF06ICdzZWN0aW9ucycsXG4gIFtlbnRpdHkuZGF0YXNldHMuaWRdOiAnZGF0YXNldHMnLFxufTtcblxuLyoqXG4gKiBFeHRyYWN0cyBhIHNpbmdsZSBkb25vciByZXN1bHQgZnJvbSB0aGUgdHJpcGxlIHN0b3JlLlxuICpcbiAqIEBwYXJhbSBzdG9yZSBUaGUgdHJpcGxlIHN0b3JlLlxuICogQHBhcmFtIGlyaSBUaGUgZW50aXR5IGlkLlxuICogQHJldHVybnMgVGhlIGxpc3QgZGF0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERvbm9yUmVzdWx0KHN0b3JlOiBTdG9yZSwgaXJpOiBzdHJpbmcpOiBEb25vclJlc3VsdCB7XG4gIHJldHVybiBnZXRNYXBwZWRSZXN1bHQoc3RvcmUsIGlyaSwgJ0Rvbm9yJywgZG9ub3JSZXN1bHRTZXQpO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGEgc2luZ2xlIGRhdGFzZXQgcmVzdWx0IGZyb20gdGhlIHRyaXBsZSBzdG9yZS5cbiAqXG4gKiBAcGFyYW0gc3RvcmUgVGhlIHRyaXBsZSBzdG9yZS5cbiAqIEBwYXJhbSBpcmkgVGhlIGVudGl0eSBpZC5cbiAqIEByZXR1cm5zIFRoZSBsaXN0IGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhc2V0UmVzdWx0KHN0b3JlOiBTdG9yZSwgaXJpOiBzdHJpbmcpOiBEYXRhc2V0UmVzdWx0IHtcbiAgcmV0dXJuIGdldE1hcHBlZFJlc3VsdChzdG9yZSwgaXJpLCAnRGF0YXNldCcsIGRhdGFzZXRSZXN1bHRTZXQpO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGEgc2luZ2xlIHRpc3N1ZSBzZWN0aW9uIHJlc3VsdCBmcm9tIHRoZSB0cmlwbGUgc3RvcmUuXG4gKlxuICogQHBhcmFtIHN0b3JlIFRoZSB0cmlwbGUgc3RvcmUuXG4gKiBAcGFyYW0gaXJpIFRoZSBlbnRpdHkgaWQuXG4gKiBAcmV0dXJucyBUaGUgbGlzdCBkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGlzc3VlU2VjdGlvblJlc3VsdChzdG9yZTogU3RvcmUsIGlyaTogc3RyaW5nKTogVGlzc3VlU2VjdGlvblJlc3VsdCB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgY29uc3QgcmVzdWx0ID0geyAnQGlkJzogaXJpLCAnQHR5cGUnOiAnU2FtcGxlJywgZGF0YXNldHM6IFtdIGFzIERhdGFzZXRSZXN1bHRbXSB9IGFzIFRpc3N1ZVNlY3Rpb25SZXN1bHQ7XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGdldEVudHJpZXMoc3RvcmUsIGlyaSwgdGlzc3VlU2VjdGlvblJlc3VsdFNldCkpIHtcbiAgICBpZiAoa2V5ID09PSAnZGF0YXNldHMnKSB7XG4gICAgICBjb25zdCBkYXRhc2V0ID0gZ2V0RGF0YXNldFJlc3VsdChzdG9yZSwgdmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgIHJlc3VsdFtrZXldLnB1c2goZGF0YXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0cmFjdHMgYSBzaW5nbGUgdGlzc3VlIGJsb2NrIHJlc3VsdCBmcm9tIHRoZSB0cmlwbGUgc3RvcmUuXG4gKlxuICogQHBhcmFtIHN0b3JlIFRoZSB0cmlwbGUgc3RvcmUuXG4gKiBAcGFyYW0gaXJpIFRoZSBlbnRpdHkgaWQuXG4gKiBAcmV0dXJucyBUaGUgbGlzdCBkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGlzc3VlQmxvY2tSZXN1bHQoc3RvcmU6IFN0b3JlLCBpcmk6IHN0cmluZyk6IFRpc3N1ZUJsb2NrUmVzdWx0IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICBjb25zdCByZXN1bHQgPSB7ICdAaWQnOiBpcmksICdAdHlwZSc6ICdTYW1wbGUnLFxuICAgIHNlY3Rpb25zOiBbXSBhcyBUaXNzdWVTZWN0aW9uUmVzdWx0W10sIGRhdGFzZXRzOiBbXSBhcyBEYXRhc2V0UmVzdWx0W11cbiAgfSBhcyBUaXNzdWVCbG9ja1Jlc3VsdDtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZ2V0RW50cmllcyhzdG9yZSwgaXJpLCB0aXNzdWVCbG9ja1Jlc3VsdFNldCkpIHtcbiAgICBpZiAoa2V5ID09PSAnc2VjdGlvbnMnKSB7XG4gICAgICBjb25zdCBzZWN0aW9uID0gZ2V0VGlzc3VlU2VjdGlvblJlc3VsdChzdG9yZSwgdmFsdWUgYXMgc3RyaW5nKTtcbiAgICAgIHJlc3VsdFtrZXldLnB1c2goc2VjdGlvbik7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdkYXRhc2V0cycpIHtcbiAgICAgIGNvbnN0IGRhdGFzZXQgPSBnZXREYXRhc2V0UmVzdWx0KHN0b3JlLCB2YWx1ZSBhcyBzdHJpbmcpO1xuICAgICAgcmVzdWx0W2tleV0ucHVzaChkYXRhc2V0KTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Rvbm9yJykge1xuICAgICAgcmVzdWx0W2tleV0gPSBnZXREb25vclJlc3VsdChzdG9yZSwgdmFsdWUgYXMgc3RyaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiJdfQ==